(()=>{var e={};e.id=9162,e.ids=[9162],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},46420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(83162),r(5932),r(32029),r(35866);var s=r(23191),i=r(88716),n=r(37922),a=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["[lng]",{children:["(index)",{children:["setting",{children:["role",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,83162)),"/Users/tzu/Desktop/Cyfoundry_Code/phalanx/phalanx/src/app/[lng]/(index)/setting/role/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5932)),"/Users/tzu/Desktop/Cyfoundry_Code/phalanx/phalanx/src/app/[lng]/(index)/layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/Users/tzu/Desktop/Cyfoundry_Code/phalanx/phalanx/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/tzu/Desktop/Cyfoundry_Code/phalanx/phalanx/src/app/[lng]/(index)/setting/role/page.tsx"],u="/[lng]/(index)/setting/role/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/[lng]/(index)/setting/role/page",pathname:"/[lng]/setting/role",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},41902:(e,t,r)=>{Promise.resolve().then(r.bind(r,93030))},85445:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}},93030:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var s=r(10326),i=r(17577),n=r(25842),a=r(48260),l=r(48467),o=r(3735),d=r(71728),c=r(30274),u=r(84294),x=r(60893),p=r(72069),h=r(82852),g=r(99707),m=r(60181),f=r(36265),j=r(84873),b=r(42167),y=r(76305),v=r(74007),Z=r(21969),q=r(87638),C=r(53913),w=r(90541),_=r(99207),k=r(5394),P=r(88041),S=r(26644),M=r(11757),I=r(85445),A=r(91703),z=r(52023),R=r(81598),E=r(39147);let D=e=>e.role,N=(0,E.P1)(D,e=>e.loading),U=(0,E.P1)(D,e=>e.powerTree);(0,E.P1)(D,e=>e.roleRequest);let $=(0,E.P1)(D,e=>e.roles),G=(0,E.P1)(D,e=>e.roleData);var O=r(67452);let T=(0,A.ZP)(Z.Z)(({theme:e})=>({"& .MuiSwitch-switchBase.Mui-checked":{color:I.Z[600],"&:hover":{backgroundColor:(0,z.Fq)(I.Z[600],e.palette.action.hoverOpacity)}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:I.Z[600]}}));function B({id:e,modal:t,handleChangeClose:r,lng:a}){let x=(0,n.I0)(),p=(0,n.v9)(N),g=(0,n.v9)(G),[m,f]=(0,i.useState)(""),[j,b]=(0,i.useState)(""),y=(0,n.v9)(U),{t:v}=(0,h.$)(a,"setting/role"),[Z,I]=(0,i.useState)({id:-1,title:"",sort:null,description:"",is_enable:!0,rolePowerList:[]}),[A,z]=(0,i.useState)({title:v("required",{name:v("title")})}),E={title:{required:!0,requiredMessage:v("titleRequired")}},D=(e,t)=>{let r=E[e];if(r.required&&(!t||Array.isArray(t)&&0===t.length))return r.requiredMessage;if(r.regex){if(Array.isArray(t)){for(let e of t)if(!r.regex.test(e))return r.regexMessage}else if(!r.regex.test(t))return r.regexMessage}return""},$=async()=>{x(O.Nw.createOrUpdateRole(Z))},[B,F]=(0,i.useState)([]);return"delete"==t?(0,s.jsxs)(d.Z,{children:[s.jsx(c.Z,{variant:"body1",gutterBottom:!0,children:v("confirmDeletion",{title:Z.title})}),s.jsx(q.Z,{children:s.jsx(C.Z,{variant:"outlined",sx:{m:1},children:s.jsx(w.Z,{required:!0,label:v("typeToConfirmDelete",{title:Z.title}),variant:"outlined",value:m,error:""!==j,helperText:j||v("enterNameToDelete"),onChange:e=>{let t=e.target.value;f(t),b(t!==Z.title?v("nameMismatch"):"")}})})}),(0,s.jsxs)(d.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[" ",s.jsx(u.Z,{variant:"contained",color:"error",onClick:async()=>{x(O.Nw.deleteRole(e)),r()},startIcon:s.jsx(S.Z,{}),sx:{mr:1},disabled:m!==g.title,children:v("delete")}),s.jsx(u.Z,{variant:"contained",onClick:r,startIcon:s.jsx(M.Z,{}),children:v("cancel")})]})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{in:p,children:s.jsx(o.Z,{})}),(0,s.jsxs)(d.Z,{children:[s.jsx(c.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:v(t)}),s.jsx(_.Z,{}),(0,s.jsxs)(q.Z,{sx:{pt:2},children:[s.jsx(C.Z,{variant:"outlined",sx:{m:1},children:s.jsx(w.Z,{required:!0,label:v("title"),variant:"outlined",error:""!==A.title,helperText:A.title,value:Z.title,onChange:e=>{I(t=>({...t,title:e.target.value}));let t=D("title",e.target.value);z(e=>({...e,title:t}))}})}),s.jsx(C.Z,{variant:"outlined",sx:{m:1},children:s.jsx(w.Z,{required:!0,label:v("description"),variant:"outlined",value:Z.description,onChange:e=>{I(t=>({...t,description:e.target.value}))}})}),s.jsx(C.Z,{variant:"outlined",sx:{m:1,alignItems:"flex-start"},children:s.jsx(k.Z,{value:Z.is_enable,control:s.jsx(T,{color:"primary",checked:Z.is_enable,style:{color:Z.is_enable?"red":""}}),label:v("isEnable"),labelPlacement:"start",onChange:(e,t)=>{I(e=>({...e,is_enable:t}))}})}),s.jsx(C.Z,{variant:"outlined",sx:{m:1,alignItems:"flex-start"},children:y&&s.jsx(R.C,{data:y,selected:B,setSelected:F})})]}),s.jsx(d.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:1,mb:1},children:s.jsx(P.Z,{children:s.jsx(u.Z,{variant:"contained",color:"success",disabled:Object.values(A).some(e=>""!==e),onClick:async()=>{$(),r()},children:v("save")})})})]})]})}function F({params:{lng:e}}){let{t}=(0,h.$)(e,"setting/role"),r=(0,n.I0)(),Z=(0,g.A)(),[q,C]=(0,i.useState)(!1),w=()=>C(!0),_=()=>C(!1),[k,P]=(0,i.useState)(!0),[S,M]=(0,i.useState)("create"),I=(0,n.v9)(N),A=(0,n.v9)($),z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};z.width=k?800:400;let R=[{field:"title",headerName:`${t("title")}`,flex:1},{field:"description",headerName:`${t("description")}`,flex:1},{field:"is_enable",headerName:`${t("isEnable")}`,type:"boolean",flex:1},{field:"actions",headerName:"",flex:1,align:"center",sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,s.jsxs)("div",{children:[s.jsx(a.Z,{onClick:()=>{D(Number(e.id)),w(),M("edit")},size:"small",style:{margin:"5px"},children:s.jsx(b.Z,{fontSize:"inherit"})}),s.jsx(a.Z,{onClick:()=>{D(Number(e.id)),w(),M("delete")},size:"small",style:{margin:"5px"},children:s.jsx(y.Z,{fontSize:"inherit"})})]})}],[E,D]=(0,i.useState)(-1),U=async e=>{let t=[...A],s=t.findIndex(t=>t.id===e.row.id),i=e.targetIndex;if(s>-1&&i>-1){let e={...t[s]};t[s]={...t[i]},t[i]=e}r(O.Nw.changeRowRole({firstId:t[s].id,secondId:t[i].id}))};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{in:I,children:s.jsx(o.Z,{})}),(0,s.jsxs)(d.Z,{children:[(0,s.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx(c.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:t("roleManage")}),(0,s.jsxs)(d.Z,{children:[" ",s.jsx(u.Z,{component:"label",variant:"contained",color:"info",onClick:()=>{w(),M("create")},startIcon:s.jsx(j.Z,{}),sx:{mt:1,mb:1},children:t("create")})]})]}),s.jsx(x.Z,{elevation:3,sx:{p:2,borderRadius:"15px",width:"99%"},children:A&&A.length>0?s.jsx(m.s,{apiRef:Z,rows:A,columns:R,slots:{toolbar:f.n},rowReordering:!0,onRowOrderChange:U,disableRowSelectionOnClick:!0,autoHeight:!0}):s.jsx(c.Z,{variant:"body1"})})]}),s.jsx(p.Z,{open:q,onClose:_,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(d.Z,{sx:z,children:["delete"!=S?s.jsx(c.Z,{id:"modal-modal-title",variant:"h6",component:"h2",style:{color:"white"},children:s.jsx(a.Z,{"aria-label":"resize",style:{float:"right",backgroundColor:"transparent"},onClick:()=>{P(!k)},children:s.jsx(v.Z,{})})}):s.jsx(s.Fragment,{}),s.jsx(B,{id:E,modal:S,handleChangeClose:_,lng:e,t:t})]})})]})}},81598:(e,t,r)=>{"use strict";r.d(t,{C:()=>u});var s=r(10326),i=r(17577),n=r(2354),a=r(94205),l=r(6446),o=r(93332),d=r(5394),c=r(76971);function u({data:e,selected:t,setSelected:r}){let u=(0,i.useMemo)(()=>new Set(t),[t]),x=e=>{let t=[e.id];return e.children&&e.children.forEach(e=>{t=t.concat(x(e))}),t},p=(e,t={})=>(e.children&&(t[e.id]=e.children.map(e=>e.id),e.children.forEach(e=>p(e,t))),t),h=(0,i.useMemo)(()=>p(e),[e]),g=(t,s)=>{let i=x(e).filter(e=>e===t||h[e]?.includes(t)),n=new Set(u);s?i.forEach(e=>n.add(e)):i.forEach(e=>n.delete(e)),r(Array.from(n))},m=e=>{let t=e.children?.every(e=>u.has(e.id)),r=e.children?.some(e=>u.has(e.id)),i=u.has(e.id);return s.jsx(n.k,{nodeId:e.id,label:s.jsx(d.Z,{control:s.jsx(c.Z,{checked:i,indeterminate:r&&!t,onChange:t=>g(e.id,t.target.checked),onClick:e=>e.stopPropagation()}),label:e.name}),children:e.children?.map(e=>m(e))},e.id)};return s.jsx(a.L,{defaultCollapseIcon:s.jsx(l.Z,{}),defaultExpandIcon:s.jsx(o.Z,{}),children:m(e)})}},83162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>n,default:()=>l});var s=r(68570);let i=(0,s.createProxy)(String.raw`/Users/tzu/Desktop/Cyfoundry_Code/phalanx/phalanx/src/app/[lng]/(index)/setting/role/page.tsx`),{__esModule:n,$$typeof:a}=i;i.default;let l=(0,s.createProxy)(String.raw`/Users/tzu/Desktop/Cyfoundry_Code/phalanx/phalanx/src/app/[lng]/(index)/setting/role/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,1184,4471,6647,9999,5518,743,5313,1860,1174,6494,9749],()=>r(46420));module.exports=s})();