(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7e3],{19929:function(r,n,i){var a,o=i(86300).Buffer;/*! For license information please see plotly.min.js.LICENSE.txt */self,a=function(){return function(){var r={98847:function(r,n,i){"use strict";var a=i(71828),o={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var s in o){var l=s.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(l,o[s])}},98222:function(r,n,i){"use strict";r.exports=i(82887)},27206:function(r,n,i){"use strict";r.exports=i(60822)},59893:function(r,n,i){"use strict";r.exports=i(23381)},5224:function(r,n,i){"use strict";r.exports=i(83832)},59509:function(r,n,i){"use strict";r.exports=i(72201)},75557:function(r,n,i){"use strict";r.exports=i(91815)},40338:function(r,n,i){"use strict";r.exports=i(21462)},35080:function(r,n,i){"use strict";r.exports=i(51319)},61396:function(r,n,i){"use strict";r.exports=i(57516)},40549:function(r,n,i){"use strict";r.exports=i(98128)},49866:function(r,n,i){"use strict";r.exports=i(99442)},36089:function(r,n,i){"use strict";r.exports=i(93740)},19548:function(r,n,i){"use strict";r.exports=i(8729)},35831:function(r,n,i){"use strict";r.exports=i(93814)},61039:function(r,n,i){"use strict";r.exports=i(14382)},97040:function(r,n,i){"use strict";r.exports=i(51759)},77986:function(r,n,i){"use strict";r.exports=i(10421)},24296:function(r,n,i){"use strict";r.exports=i(43102)},58872:function(r,n,i){"use strict";r.exports=i(92165)},29626:function(r,n,i){"use strict";r.exports=i(3325)},65591:function(r,n,i){"use strict";r.exports=i(36071)},69738:function(r,n,i){"use strict";r.exports=i(43905)},92650:function(r,n,i){"use strict";r.exports=i(35902)},35630:function(r,n,i){"use strict";r.exports=i(69816)},73434:function(r,n,i){"use strict";r.exports=i(94507)},27909:function(r,n,i){"use strict";var a=i(19548);a.register([i(27206),i(5224),i(58872),i(65591),i(69738),i(92650),i(49866),i(25743),i(6197),i(97040),i(85461),i(73434),i(54201),i(81299),i(47645),i(35630),i(77986),i(83043),i(93005),i(96881),i(4534),i(50581),i(40549),i(77900),i(47582),i(35080),i(21641),i(17280),i(5861),i(29626),i(10021),i(65317),i(96268),i(61396),i(35831),i(16122),i(46163),i(40344),i(40338),i(48131),i(36089),i(55334),i(75557),i(19440),i(99488),i(59893),i(97393),i(98222),i(61039),i(24296),i(66398),i(59509)]),r.exports=a},46163:function(r,n,i){"use strict";r.exports=i(15154)},96881:function(r,n,i){"use strict";r.exports=i(64943)},50581:function(r,n,i){"use strict";r.exports=i(21164)},55334:function(r,n,i){"use strict";r.exports=i(54186)},65317:function(r,n,i){"use strict";r.exports=i(94873)},10021:function(r,n,i){"use strict";r.exports=i(67618)},54201:function(r,n,i){"use strict";r.exports=i(58810)},5861:function(r,n,i){"use strict";r.exports=i(20593)},16122:function(r,n,i){"use strict";r.exports=i(29396)},83043:function(r,n,i){"use strict";r.exports=i(13551)},48131:function(r,n,i){"use strict";r.exports=i(46858)},47582:function(r,n,i){"use strict";r.exports=i(17988)},21641:function(r,n,i){"use strict";r.exports=i(68868)},96268:function(r,n,i){"use strict";r.exports=i(20467)},19440:function(r,n,i){"use strict";r.exports=i(91271)},99488:function(r,n,i){"use strict";r.exports=i(21461)},97393:function(r,n,i){"use strict";r.exports=i(85956)},25743:function(r,n,i){"use strict";r.exports=i(52979)},66398:function(r,n,i){"use strict";r.exports=i(32275)},17280:function(r,n,i){"use strict";r.exports=i(6419)},77900:function(r,n,i){"use strict";r.exports=i(61510)},81299:function(r,n,i){"use strict";r.exports=i(87619)},93005:function(r,n,i){"use strict";r.exports=i(93601)},40344:function(r,n,i){"use strict";r.exports=i(96595)},47645:function(r,n,i){"use strict";r.exports=i(70954)},6197:function(r,n,i){"use strict";r.exports=i(47462)},4534:function(r,n,i){"use strict";r.exports=i(17659)},85461:function(r,n,i){"use strict";r.exports=i(19990)},82884:function(r){"use strict";r.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(r,n,i){"use strict";var a=i(82884),o=i(41940),s=i(85555),l=i(44467).templatedArray;i(24695),r.exports=l("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:o({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",s.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",s.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",s.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:o({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(92605).draw;function l(r){var n=r._fullLayout;a.filterVisible(n.annotations).forEach(function(n){var i=o.getFromId(r,n.xref),a=o.getFromId(r,n.yref),s=o.getRefType(n.xref),l=o.getRefType(n.yref);n._extremes={},"range"===s&&u(n,i),"range"===l&&u(n,a)})}function u(r,n){var i,a=n._id,s=a.charAt(0),l=r[s],u=r["a"+s],c=r[s+"ref"],f=r["a"+s+"ref"],h=r["_"+s+"padplus"],p=r["_"+s+"padminus"],d={x:1,y:-1}[s]*r[s+"shift"],v=3*r.arrowsize*r.arrowwidth||0,g=v+d,y=v-d,m=3*r.startarrowsize*r.arrowwidth||0,x=m+d,b=m-d;if(f===c){var _=o.findExtremes(n,[n.r2c(l)],{ppadplus:g,ppadminus:y}),w=o.findExtremes(n,[n.r2c(u)],{ppadplus:Math.max(h,x),ppadminus:Math.max(p,b)});i={min:[_.min[0],w.min[0]],max:[_.max[0],w.max[0]]}}else x=u?x+u:x,b=u?b-u:b,i=o.findExtremes(n,[n.r2c(l)],{ppadplus:Math.max(h,g,x),ppadminus:Math.max(p,y,b)});r._extremes[a]=i}r.exports=function(r){var n=r._fullLayout;if(a.filterVisible(n.annotations).length&&r._fullData.length)return a.syncOrAsync([s,l],r)}},44317:function(r,n,i){"use strict";var a=i(71828),o=i(73972),s=i(44467).arrayEditor;function l(r,n){var i,a,o,s,l,c,f,h=r._fullLayout.annotations,p=[],d=[],v=[],g=(n||[]).length;for(i=0;i<h.length;i++)if(s=(o=h[i]).clicktoshow){for(a=0;a<g;a++)if(c=(l=n[a]).xaxis,f=l.yaxis,c._id===o.xref&&f._id===o.yref&&c.d2r(l.x)===u(o._xclick,c)&&f.d2r(l.y)===u(o._yclick,f)){(o.visible?"onout"===s?d:v:p).push(i);break}a===g&&o.visible&&"onout"===s&&d.push(i)}return{on:p,off:d,explicitOff:v}}function u(r,n){return"log"===n.type?n.l2r(r):n.d2r(r)}r.exports={hasClickToShow:function(r,n){var i=l(r,n);return i.on.length>0||i.explicitOff.length>0},onClick:function(r,n){var i,u,c=l(r,n),f=c.on,h=c.off.concat(c.explicitOff),p={},d=r._fullLayout.annotations;if(f.length||h.length){for(i=0;i<f.length;i++)(u=s(r.layout,"annotations",d[f[i]])).modifyItem("visible",!0),a.extendFlat(p,u.getUpdateObj());for(i=0;i<h.length;i++)(u=s(r.layout,"annotations",d[h[i]])).modifyItem("visible",!1),a.extendFlat(p,u.getUpdateObj());return o.call("update",r,{},p)}}}},25625:function(r,n,i){"use strict";var a=i(71828),o=i(7901);r.exports=function(r,n,i,s){s("opacity");var l=s("bgcolor"),u=s("bordercolor"),c=o.opacity(u);s("borderpad");var f=s("borderwidth"),h=s("showarrow");if(s("text",h?" ":i._dfltTitle.annotation),s("textangle"),a.coerceFont(s,"font",i.font),s("width"),s("align"),s("height")&&s("valign"),h){var p,d,v=s("arrowside");-1!==v.indexOf("end")&&(p=s("arrowhead"),d=s("arrowsize")),-1!==v.indexOf("start")&&(s("startarrowhead",p),s("startarrowsize",d)),s("arrowcolor",c?n.bordercolor:o.defaultLine),s("arrowwidth",2*(c&&f||1)),s("standoff"),s("startstandoff")}var g=s("hovertext"),y=i.hoverlabel||{};if(g){var m=s("hoverlabel.bgcolor",y.bgcolor||(o.opacity(l)?o.rgb(l):o.defaultLine)),x=s("hoverlabel.bordercolor",y.bordercolor||o.contrast(m));a.coerceFont(s,"hoverlabel.font",{family:y.font.family,size:y.font.size,color:y.font.color||x})}s("captureevents",!!g)}},94128:function(r,n,i){"use strict";var a=i(92770),o=i(58163);r.exports=function(r,n,i,s){n=n||{};var l="log"===i&&"linear"===n.type,u="linear"===i&&"log"===n.type;if(l||u)for(var c,f,h=r._fullLayout.annotations,p=n._id.charAt(0),d=0;d<h.length;d++)c=h[d],f="annotations["+d+"].",c[p+"ref"]===n._id&&v(p),c["a"+p+"ref"]===n._id&&v("a"+p);function v(r){var i=c[r],u=null;a(u=l?o(i,n.range):Math.pow(10,i))||(u=null),s(f+r,u)}}},84046:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(85501),l=i(25625),u=i(50215);function c(r,n,i){function s(i,o){return a.coerce(r,n,u,i,o)}var c=s("visible"),f=s("clicktoshow");if(c||f){l(r,n,i,s);for(var h=n.showarrow,p=["x","y"],d=[-10,-30],v={_fullLayout:i},g=0;g<2;g++){var y=p[g],m=o.coerceRef(r,n,v,y,"","paper");if("paper"!==m&&o.getFromId(v,m)._annIndices.push(n._index),o.coercePosition(n,v,s,m,y,.5),h){var x="a"+y,b=o.coerceRef(r,n,v,x,"pixel",["pixel","paper"]);"pixel"!==b&&b!==m&&(b=n[x]="pixel");var _="pixel"===b?d[g]:.4;o.coercePosition(n,v,s,b,x,_)}s(y+"anchor"),s(y+"shift")}if(a.noneOrAll(r,n,["x","y"]),h&&a.noneOrAll(r,n,["ax","ay"]),f){var w=s("xclick"),T=s("yclick");n._xclick=void 0===w?n.x:o.cleanPosition(w,v,n.xref),n._yclick=void 0===T?n.y:o.cleanPosition(T,v,n.yref)}}}r.exports=function(r,n){s(r,n,{name:"annotations",handleItemDefaults:c})}},92605:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(74875),l=i(71828),u=l.strTranslate,c=i(89298),f=i(7901),h=i(91424),p=i(30211),d=i(63893),v=i(6964),g=i(28569),y=i(44467).arrayEditor,m=i(13011);function x(r,n){var i=r._fullLayout.annotations[n]||{},a=c.getFromId(r,i.xref),o=c.getFromId(r,i.yref);a&&a.setScale(),o&&o.setScale(),_(r,i,n,!1,a,o)}function b(r,n,i,a,o){var s=o[i],l=o[i+"ref"],u=-1!==i.indexOf("y"),f="domain"===c.getRefType(l),h=u?a.h:a.w;return r?f?s+(u?-n:n)/r._length:r.p2r(r.r2p(s)+n):s+(u?-n:n)/h}function _(r,n,i,s,x,_){var w,T,k=r._fullLayout,A=r._fullLayout._size,M=r._context.edits;s?(w="annotation-"+s,T=s+".annotations"):(w="annotation",T="annotations");var S=y(r.layout,T,n),E=S.modifyBase,L=S.modifyItem,C=S.getUpdateObj;k._infolayer.selectAll("."+w+'[data-index="'+i+'"]').remove();var O="clip"+k._uid+"_ann"+i;if(n._input&&!1!==n.visible){var P={x:{},y:{}},I=+n.textangle||0,D=k._infolayer.append("g").classed(w,!0).attr("data-index",String(i)).style("opacity",n.opacity),z=D.append("g").classed("annotation-text-g",!0),R=M[n.showarrow?"annotationTail":"annotationPosition"],F=n.captureevents||M.annotationText||R,B=z.append("g").style("pointer-events",F?"all":null).call(v,"pointer").on("click",function(){r._dragging=!1,r.emit("plotly_clickannotation",W(a.event))});n.hovertext&&B.on("mouseover",function(){var i=n.hoverlabel,a=i.font,o=this.getBoundingClientRect(),s=r.getBoundingClientRect();p.loneHover({x0:o.left-s.left,x1:o.right-s.left,y:(o.top+o.bottom)/2-s.top,text:n.hovertext,color:i.bgcolor,borderColor:i.bordercolor,fontFamily:a.family,fontSize:a.size,fontColor:a.color},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:r})}).on("mouseout",function(){p.loneUnhover(k._hoverlayer.node())});var N=n.borderwidth,j=n.borderpad,U=N+j,V=B.append("rect").attr("class","bg").style("stroke-width",N+"px").call(f.stroke,n.bordercolor).call(f.fill,n.bgcolor),H=n.width||n.height,q=k._topclips.selectAll("#"+O).data(H?[0]:[]);q.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),q.exit().remove();var G=n.font,Z=k._meta?l.templateString(n.text,k._meta):n.text,Y=B.append("text").classed("annotation-text",!0).text(Z);M.annotationText?Y.call(d.makeEditable,{delegate:B,gd:r}).call(X).on("edit",function(i){n.text=i,this.call(X),L("text",i),x&&x.autorange&&E(x._name+".autorange",!0),_&&_.autorange&&E(_._name+".autorange",!0),o.call("_guiRelayout",r,C())}):Y.call(X)}else a.selectAll("#"+O).remove();function W(r){var a={index:i,annotation:n._input,fullAnnotation:n,event:r};return s&&(a.subplotId=s),a}function X(i){return i.call(h.font,G).attr({"text-anchor":{left:"start",right:"end"}[n.align]||"middle"}),d.convertToTspans(i,r,J),i}function J(){var i=Y.selectAll("a");1===i.size()&&i.text()===Y.text()&&B.insert("a",":first-child").attr({"xlink:xlink:href":i.attr("xlink:href"),"xlink:xlink:show":i.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(V.node());var a=B.select(".annotation-text-math-group"),p=!a.empty(),y=h.bBox((p?a:Y).node()),w=y.width,T=y.height,S=n.width||w,F=n.height||T,j=Math.round(S+2*U),G=Math.round(F+2*U);function Z(r,n){return"auto"===n&&(n=r<1/3?"left":r>2/3?"right":"center"),({center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5})[n]}for(var X=!1,J=["x","y"],K=0;K<J.length;K++){var $,Q,tt,te,tr,tn=J[K],ti=n[tn+"ref"]||tn,ta=n["a"+tn+"ref"],to={x:x,y:_}[tn],ts=(I+("x"===tn?0:-90))*Math.PI/180,tl=j*Math.cos(ts),tu=G*Math.sin(ts),tc=Math.abs(tl)+Math.abs(tu),tf=n[tn+"anchor"],th=n[tn+"shift"]*("x"===tn?1:-1),tp=P[tn],td=c.getRefType(ti);if(to&&"domain"!==td){var tv=to.r2fraction(n[tn]);(tv<0||tv>1)&&(ta===ti?((tv=to.r2fraction(n["a"+tn]))<0||tv>1)&&(X=!0):X=!0),$=to._offset+to.r2p(n[tn]),te=.5}else{var tg="domain"===td;"x"===tn?(tt=n[tn],$=tg?to._offset+to._length*tt:$=A.l+A.w*tt):(tt=1-n[tn],$=tg?to._offset+to._length*tt:$=A.t+A.h*tt),te=n.showarrow?.5:tt}if(n.showarrow){tp.head=$;var ty=n["a"+tn];if(tr=tl*Z(.5,n.xanchor)-tu*Z(.5,n.yanchor),ta===ti){var tm=c.getRefType(ta);"domain"===tm?("y"===tn&&(ty=1-ty),tp.tail=to._offset+to._length*ty):"paper"===tm?"y"===tn?(ty=1-ty,tp.tail=A.t+A.h*ty):tp.tail=A.l+A.w*ty:tp.tail=to._offset+to.r2p(ty),Q=tr}else tp.tail=$+ty,Q=tr+ty;tp.text=tp.tail+tr;var tx=k["x"===tn?"width":"height"];if("paper"===ti&&(tp.head=l.constrain(tp.head,1,tx-1)),"pixel"===ta){var tb=-Math.max(tp.tail-3,tp.text),t_=Math.min(tp.tail+3,tp.text)-tx;tb>0?(tp.tail+=tb,tp.text+=tb):t_>0&&(tp.tail-=t_,tp.text-=t_)}tp.tail+=th,tp.head+=th}else Q=tr=tc*Z(te,tf),tp.text=$+tr;tp.text+=th,tr+=th,Q+=th,n["_"+tn+"padplus"]=tc/2+Q,n["_"+tn+"padminus"]=tc/2-Q,n["_"+tn+"size"]=tc,n["_"+tn+"shift"]=tr}if(X)B.remove();else{var tw=0,tT=0;if("left"!==n.align&&(tw=(S-w)*("center"===n.align?.5:1)),"top"!==n.valign&&(tT=(F-T)*("middle"===n.valign?.5:1)),p)a.select("svg").attr({x:U+tw-1,y:U+tT}).call(h.setClipUrl,H?O:null,r);else{var tk=U+tT-y.top,tA=U+tw-y.left;Y.call(d.positionText,tA,tk).call(h.setClipUrl,H?O:null,r)}q.select("rect").call(h.setRect,U,U,S,F),V.call(h.setRect,N/2,N/2,j-N,G-N),B.call(h.setTranslate,Math.round(P.x.text-j/2),Math.round(P.y.text-G/2)),z.attr({transform:"rotate("+I+","+P.x.text+","+P.y.text+")"});var tM,tS=function(i,a){D.selectAll(".annotation-arrow-g").remove();var c=P.x.head,p=P.y.head,d=P.x.tail+i,v=P.y.tail+a,y=P.x.text+i,w=P.y.text+a,T=l.rotationXYMatrix(I,y,w),k=l.apply2DTransform(T),S=l.apply2DTransform2(T),O=+V.attr("width"),R=+V.attr("height"),F=y-.5*O,N=F+O,j=w-.5*R,U=j+R,H=[[F,j,F,U],[F,U,N,U],[N,U,N,j],[N,j,F,j]].map(S);if(!H.reduce(function(r,n){return!!l.segmentsIntersect(c,p,c+1e6,p+1e6,n[0],n[1],n[2],n[3])^r},!1)){H.forEach(function(r){var n=l.segmentsIntersect(d,v,c,p,r[0],r[1],r[2],r[3]);n&&(d=n.x,v=n.y)});var q=n.arrowwidth,G=n.arrowcolor,Z=n.arrowside,Y=D.append("g").style({opacity:f.opacity(G)}).classed("annotation-arrow-g",!0),W=Y.append("path").attr("d","M"+d+","+v+"L"+c+","+p).style("stroke-width",q+"px").call(f.stroke,f.rgb(G));if(m(W,Z,n),M.annotationPosition&&W.node().parentNode&&!s){var X=c,J=p;if(n.standoff){var K=Math.sqrt(Math.pow(c-d,2)+Math.pow(p-v,2));X+=n.standoff*(d-c)/K,J+=n.standoff*(v-p)/K}var $,Q,tt=Y.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-X)+","+(v-J),transform:u(X,J)}).style("stroke-width",q+6+"px").call(f.stroke,"rgba(0,0,0,0)").call(f.fill,"rgba(0,0,0,0)");g.init({element:tt.node(),gd:r,prepFn:function(){var r=h.getTranslate(B);$=r.x,Q=r.y,x&&x.autorange&&E(x._name+".autorange",!0),_&&_.autorange&&E(_._name+".autorange",!0)},moveFn:function(r,i){var a=k($,Q),o=a[0]+r,s=a[1]+i;B.call(h.setTranslate,o,s),L("x",b(x,r,"x",A,n)),L("y",b(_,i,"y",A,n)),n.axref===n.xref&&L("ax",b(x,r,"ax",A,n)),n.ayref===n.yref&&L("ay",b(_,i,"ay",A,n)),Y.attr("transform",u(r,i)),z.attr({transform:"rotate("+I+","+o+","+s+")"})},doneFn:function(){o.call("_guiRelayout",r,C());var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}})}}};n.showarrow&&tS(0,0),R&&g.init({element:B.node(),gd:r,prepFn:function(){tM=z.attr("transform")},moveFn:function(r,i){var a="pointer";if(n.showarrow)n.axref===n.xref?L("ax",b(x,r,"ax",A,n)):L("ax",n.ax+r),n.ayref===n.yref?L("ay",b(_,i,"ay",A.w,n)):L("ay",n.ay+i),tS(r,i);else{if(s)return;if(x)o=b(x,r,"x",A,n);else{var o,l,c=n._xsize/A.w,f=n.x+(n._xshift-n.xshift)/A.w-c/2;o=g.align(f+r/A.w,c,0,1,n.xanchor)}if(_)l=b(_,i,"y",A,n);else{var h=n._ysize/A.h,p=n.y-(n._yshift+n.yshift)/A.h-h/2;l=g.align(p-i/A.h,h,0,1,n.yanchor)}L("x",o),L("y",l),x&&_||(a=g.getCursor(x?.5:o,_?.5:l,n.xanchor,n.yanchor))}z.attr({transform:u(r,i)+tM}),v(B,a)},clickFn:function(i,a){n.captureevents&&r.emit("plotly_clickannotation",W(a))},doneFn:function(){v(B),o.call("_guiRelayout",r,C());var n=document.querySelector(".js-notes-box-panel");n&&n.redraw(n.selectedObj)}})}}}r.exports={draw:function(r){var n=r._fullLayout;n._infolayer.selectAll(".annotation").remove();for(var i=0;i<n.annotations.length;i++)n.annotations[i].visible&&x(r,i);return s.previousPromises(r)},drawOne:x,drawRaw:_}},13011:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(82884),l=i(71828),u=l.strScale,c=l.strRotate,f=l.strTranslate;r.exports=function(r,n,i){var l,h,p,d,v=r.node(),g=s[i.arrowhead||0],y=s[i.startarrowhead||0],m=(i.arrowwidth||1)*(i.arrowsize||1),x=(i.arrowwidth||1)*(i.startarrowsize||1),b=n.indexOf("start")>=0,_=n.indexOf("end")>=0,w=g.backoff*m+i.standoff,T=y.backoff*x+i.startstandoff;if("line"===v.nodeName){l={x:+r.attr("x1"),y:+r.attr("y1")},h={x:+r.attr("x2"),y:+r.attr("y2")};var k=l.x-h.x,A=l.y-h.y;if(d=(p=Math.atan2(A,k))+Math.PI,w&&T&&w+T>Math.sqrt(k*k+A*A))return void R();if(w){if(w*w>k*k+A*A)return void R();var M=w*Math.cos(p),S=w*Math.sin(p);h.x+=M,h.y+=S,r.attr({x2:h.x,y2:h.y})}if(T){if(T*T>k*k+A*A)return void R();var E=T*Math.cos(p),L=T*Math.sin(p);l.x-=E,l.y-=L,r.attr({x1:l.x,y1:l.y})}}else if("path"===v.nodeName){var C=v.getTotalLength(),O="";if(C<w+T)return void R();var P=v.getPointAtLength(0),I=v.getPointAtLength(.1);p=Math.atan2(P.y-I.y,P.x-I.x),l=v.getPointAtLength(Math.min(T,C)),O="0px,"+T+"px,";var D=v.getPointAtLength(C),z=v.getPointAtLength(C-.1);d=Math.atan2(D.y-z.y,D.x-z.x),h=v.getPointAtLength(Math.max(0,C-w)),O+=C-(O?T+w:w)+"px,"+C+"px",r.style("stroke-dasharray",O)}function R(){r.style("stroke-dasharray","0px,100px")}function F(n,s,l,h){n.path&&(n.noRotate&&(l=0),a.select(v.parentNode).append("path").attr({class:r.attr("class"),d:n.path,transform:f(s.x,s.y)+c(180*l/Math.PI)+u(h)}).style({fill:o.rgb(i.arrowcolor),"stroke-width":0}))}b&&F(y,l,p,x),_&&F(g,h,d,m)}},32745:function(r,n,i){"use strict";var a=i(92605),o=i(44317);r.exports={moduleType:"component",name:"annotations",layoutAttributes:i(50215),supplyLayoutDefaults:i(84046),includeBasePlot:i(76325)("annotations"),calcAutorange:i(3749),draw:a.draw,drawOne:a.drawOne,drawRaw:a.drawRaw,hasClickToShow:o.hasClickToShow,onClick:o.onClick,convertCoords:i(94128)}},26997:function(r,n,i){"use strict";var a=i(50215),o=i(30962).overrideAll,s=i(44467).templatedArray;r.exports=o(s("annotation",{visible:a.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:a.xanchor,xshift:a.xshift,yanchor:a.yanchor,yshift:a.yshift,text:a.text,textangle:a.textangle,font:a.font,width:a.width,height:a.height,opacity:a.opacity,align:a.align,valign:a.valign,bgcolor:a.bgcolor,bordercolor:a.bordercolor,borderpad:a.borderpad,borderwidth:a.borderwidth,showarrow:a.showarrow,arrowcolor:a.arrowcolor,arrowhead:a.arrowhead,startarrowhead:a.startarrowhead,arrowside:a.arrowside,arrowsize:a.arrowsize,startarrowsize:a.startarrowsize,arrowwidth:a.arrowwidth,standoff:a.standoff,startstandoff:a.startstandoff,hovertext:a.hovertext,hoverlabel:a.hoverlabel,captureevents:a.captureevents}),"calc","from-root")},5485:function(r,n,i){"use strict";var a=i(71828),o=i(89298);r.exports=function(r){for(var n=r.fullSceneLayout.annotations,i=0;i<n.length;i++)!function(r,n){var i=n.fullSceneLayout.domain,s=n.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};r._xa={},a.extendFlat(r._xa,l),o.setConvert(r._xa),r._xa._offset=s.l+i.x[0]*s.w,r._xa.l2p=function(){return .5*(1+r._pdata[0]/r._pdata[3])*s.w*(i.x[1]-i.x[0])},r._ya={},a.extendFlat(r._ya,l),o.setConvert(r._ya),r._ya._offset=s.t+(1-i.y[1])*s.h,r._ya.l2p=function(){return .5*(1-r._pdata[1]/r._pdata[3])*s.h*(i.y[1]-i.y[0])}}(n[i],r);r.fullLayout._infolayer.selectAll(".annotation-"+r.id).remove()}},20226:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(85501),l=i(25625),u=i(26997);function c(r,n,i,s){function c(i,o){return a.coerce(r,n,u,i,o)}function f(r){var a=r+"axis",s={_fullLayout:{}};return s._fullLayout[a]=i[a],o.coercePosition(n,s,c,r,r,.5)}c("visible")&&(l(r,n,s.fullLayout,c),f("x"),f("y"),f("z"),a.noneOrAll(r,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",c("xanchor"),c("yanchor"),c("xshift"),c("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",c("ax",-10),c("ay",-30),a.noneOrAll(r,n,["ax","ay"])))}r.exports=function(r,n,i){s(r,n,{name:"annotations",handleItemDefaults:c,fullLayout:i.fullLayout})}},82188:function(r,n,i){"use strict";var a=i(92605).drawRaw,o=i(63538),s=["x","y","z"];r.exports=function(r){for(var n=r.fullSceneLayout,i=r.dataScale,l=n.annotations,u=0;u<l.length;u++){for(var c=l[u],f=!1,h=0;h<3;h++){var p=s[h],d=c[p],v=n[p+"axis"].r2fraction(d);if(v<0||v>1){f=!0;break}}f?r.fullLayout._infolayer.select(".annotation-"+r.id+'[data-index="'+u+'"]').remove():(c._pdata=o(r.glplot.cameraParams,[n.xaxis.r2l(c.x)*i[0],n.yaxis.r2l(c.y)*i[1],n.zaxis.r2l(c.z)*i[2]]),a(r.graphDiv,c,u,r.id,c._xa,c._ya))}}},2468:function(r,n,i){"use strict";var a=i(73972),o=i(71828);r.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:i(26997)}}},layoutAttributes:i(26997),handleDefaults:i(20226),includeBasePlot:function(r,n){var i=a.subplotsRegistry.gl3d;if(i)for(var s=i.attrRegex,l=Object.keys(r),u=0;u<l.length;u++){var c=l[u];s.test(c)&&(r[c].annotations||[]).length&&(o.pushUnique(n._basePlotModules,i),o.pushUnique(n._subplots.gl3d,c))}},convert:i(5485),draw:i(82188)}},7561:function(r,n,i){"use strict";r.exports=i(63489),i(94338),i(3961),i(38751),i(86825),i(37715),i(99384),i(43805),i(88874),i(83290),i(29108),i(55422),i(94320),i(31320),i(51367),i(21457)},72201:function(r,n,i){"use strict";var a=i(7561),o=i(71828),s=i(50606),l=s.EPOCHJD,u=s.ONEDAY,c={valType:"enumerated",values:o.sortObjectKeys(a.calendars),editType:"calc",dflt:"gregorian"},f=function(r,n,i,a){var s={};return s[i]=c,o.coerce(r,n,s,i,a)},h={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},p={};function d(r){return p[r]||(p[r]=a.instance(r))}function v(r){return o.extendFlat({},c,{description:r})}function g(r){return"Sets the calendar system to use with `"+r+"` date data."}var y={xcalendar:v(g("x"))},m=o.extendFlat({},y,{ycalendar:v(g("y"))}),x=o.extendFlat({},m,{zcalendar:v(g("z"))}),b=v("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");r.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:x,surface:x,mesh3d:x,scattergl:m,ohlc:y,candlestick:y},layout:{calendar:v("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:b},yaxis:{calendar:b},scene:{xaxis:{calendar:b},yaxis:{calendar:b},zaxis:{calendar:b}},polar:{radialaxis:{calendar:b}}},transforms:{filter:{valuecalendar:v("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `value`, if it is a date."),targetcalendar:v("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:c,handleDefaults:f,handleTraceDefaults:function(r,n,i,a){for(var o=0;o<i.length;o++)f(r,n,i[o]+"calendar",a.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(r,n,i){for(var a,o,s,c,f,p=Math.floor((n+.05)/u)+l,v=d(i).fromJD(p),g=0;-1!==(g=r.indexOf("%",g));)"0"===(a=r.charAt(g+1))||"-"===a||"_"===a?(s=3,o=r.charAt(g+2),"_"===a&&(a="-")):(o=a,a="0",s=2),(c=h[o])?(f="##"===c?"##":v.formatDate(c[a]),r=r.substr(0,g)+f+r.substr(g+s),g+=f.length):g+=s;return r}}},22399:function(r,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},7901:function(r,n,i){"use strict";var a=i(84267),o=i(92770),s=i(73627).isTypedArray,l=r.exports={},u=i(22399);l.defaults=u.defaults;var c=l.defaultLine=u.defaultLine;l.lightLine=u.lightLine;var f=l.background=u.background;function h(r){if(o(r)||"string"!=typeof r)return r;var n=r.trim();if("rgb"!==n.substr(0,3))return r;var i=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!i)return r;var a=i[1].trim().split(/\s*[\s,]\s*/),s="a"===n.charAt(3)&&4===a.length;if(!s&&3!==a.length)return r;for(var l=0;l<a.length;l++){if(!a[l].length||(a[l]=Number(a[l]),!(a[l]>=0)))return r;if(3===l)a[l]>1&&(a[l]=1);else if(a[l]>=1)return r}var u=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return s?"rgba("+u+", "+a[3]+")":"rgb("+u+")"}l.tinyRGB=function(r){var n=r.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},l.rgb=function(r){return l.tinyRGB(a(r))},l.opacity=function(r){return r?a(r).getAlpha():0},l.addOpacity=function(r,n){var i=a(r).toRgb();return"rgba("+Math.round(i.r)+", "+Math.round(i.g)+", "+Math.round(i.b)+", "+n+")"},l.combine=function(r,n){var i=a(r).toRgb();if(1===i.a)return a(r).toRgbString();var o=a(n||f).toRgb(),s=1===o.a?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a};return a({r:s.r*(1-i.a)+i.r*i.a,g:s.g*(1-i.a)+i.g*i.a,b:s.b*(1-i.a)+i.b*i.a}).toRgbString()},l.contrast=function(r,n,i){var o=a(r);return 1!==o.getAlpha()&&(o=a(l.combine(r,f))),(o.isDark()?n?o.lighten(n):f:i?o.darken(i):c).toString()},l.stroke=function(r,n){var i=a(n);r.style({stroke:l.tinyRGB(i),"stroke-opacity":i.getAlpha()})},l.fill=function(r,n){var i=a(n);r.style({fill:l.tinyRGB(i),"fill-opacity":i.getAlpha()})},l.clean=function(r){if(r&&"object"==typeof r){var n,i,a,o,u=Object.keys(r);for(n=0;n<u.length;n++)if(o=r[a=u[n]],"color"===a.substr(a.length-5)){if(Array.isArray(o))for(i=0;i<o.length;i++)o[i]=h(o[i]);else r[a]=h(o)}else if("colorscale"===a.substr(a.length-10)&&Array.isArray(o))for(i=0;i<o.length;i++)Array.isArray(o[i])&&(o[i][1]=h(o[i][1]));else if(Array.isArray(o)){var c=o[0];if(!Array.isArray(c)&&c&&"object"==typeof c)for(i=0;i<o.length;i++)l.clean(o[i])}else o&&"object"==typeof o&&!s(o)&&l.clean(o)}}},63583:function(r,n,i){"use strict";var a=i(13838),o=i(41940),s=i(1426).extendFlat,l=i(30962).overrideAll;r.exports=l({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:a.linecolor,outlinewidth:a.linewidth,bordercolor:a.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:a.minor.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:s({},a.ticks,{dflt:""}),ticklabeloverflow:s({},a.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,labelalias:a.labelalias,tickfont:o({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,title:{text:{valType:"string"},font:o({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:o({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(r){"use strict";r.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(r,n,i){"use strict";var a=i(71828),o=i(44467),s=i(26218),l=i(38701),u=i(96115),c=i(89426),f=i(63583);r.exports=function(r,n,i){var h=o.newContainer(n,"colorbar"),p=r.colorbar||{};function d(r,n){return a.coerce(p,h,f,r,n)}var v=i.margin||{t:0,b:0,l:0,r:0},g=i.width-v.l-v.r,y=i.height-v.t-v.b,m="v"===d("orientation"),x=d("thicknessmode");d("thickness","fraction"===x?30/(m?g:y):30);var b=d("lenmode");d("len","fraction"===b?1:m?y:g);var _,w,T,k="paper"===d("yref"),A="paper"===d("xref"),M="left";m?(T="middle",M=A?"left":"right",_=A?1.02:1,w=.5):(T=k?"bottom":"top",M="center",_=.5,w=k?1.02:1),a.coerce(p,h,{x:{valType:"number",min:A?-2:0,max:A?3:1,dflt:_}},"x"),a.coerce(p,h,{y:{valType:"number",min:k?-2:0,max:k?3:1,dflt:w}},"y"),d("xanchor",M),d("xpad"),d("yanchor",T),d("ypad"),a.noneOrAll(p,h,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var S=a.coerce(p,h,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",-1!==S.indexOf("inside")?"hide past domain":"hide past div"),s(p,h,d,"linear");var E=i.font,L={outerTicks:!1,font:E};-1!==S.indexOf("inside")&&(L.bgColor="black"),c(p,h,d,"linear",L),u(p,h,d,"linear",L),l(p,h,d,"linear",L),d("title.text",i._dfltTitle.colorbar);var C=h.showticklabels?h.tickfont:E,O=a.extendFlat({},C,{color:E.color,size:a.bigFont(C.size)});a.coerceFont(d,"title.font",O),d("title.side",m?"top":"right")}},98981:function(r,n,i){"use strict";var a=i(39898),o=i(84267),s=i(74875),l=i(73972),u=i(89298),c=i(28569),f=i(71828),h=f.strTranslate,p=i(1426).extendFlat,d=i(6964),v=i(91424),g=i(7901),y=i(92998),m=i(63893),x=i(52075).flipScale,b=i(71453),_=i(52830),w=i(13838),T=i(18783),k=T.LINE_SPACING,A=T.FROM_TL,M=T.FROM_BR,S=i(30939).cn;r.exports={draw:function(r){var n=r._fullLayout._infolayer.selectAll("g."+S.colorbar).data(function(r){var n,i,a,o,s=r._fullLayout,l=r.calcdata,u=[];function c(r){return p(r,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function f(){"function"==typeof o.calc?o.calc(r,a,n):(n._fillgradient=i.reversescale?x(i.colorscale):i.colorscale,n._zrange=[i[o.min],i[o.max]])}for(var h=0;h<l.length;h++)if((a=l[h][0].trace)._module){var d=a._module.colorbar;if(!0===a.visible&&d)for(var v=Array.isArray(d),g=v?d:[d],y=0;y<g.length;y++){var m=(o=g[y]).container;(i=m?a[m]:a)&&i.showscale&&((n=c(i.colorbar))._id="cb"+a.uid+(v&&m?"-"+m:""),n._traceIndex=a.index,n._propPrefix=(m?m+".":"")+"colorbar.",n._meta=a._meta,f(),u.push(n))}}for(var b in s._colorAxes)if((i=s[b]).showscale){var _=s._colorAxes[b];(n=c(i.colorbar))._id="cb"+b,n._propPrefix=b+".colorbar.",n._meta=s._meta,o={min:"cmin",max:"cmax"},"heatmap"!==_[0]&&(a=_[1],o.calc=a._module.colorbar.calc),f(),u.push(n)}return u}(r),function(r){return r._id});n.enter().append("g").attr("class",function(r){return r._id}).classed(S.colorbar,!0),n.each(function(n){var i,x,T,E,L,C=a.select(this);f.ensureSingle(C,"rect",S.cbbg),f.ensureSingle(C,"g",S.cbfills),f.ensureSingle(C,"g",S.cblines),f.ensureSingle(C,"g",S.cbaxis,function(r){r.classed(S.crisp,!0)}),f.ensureSingle(C,"g",S.cbtitleunshift,function(r){r.append("g").classed(S.cbtitle,!0)}),f.ensureSingle(C,"rect",S.cboutline);var O=function(r,n,i){var l="v"===n.orientation,c=n.len,d=n.lenmode,x=n.thickness,T=n.thicknessmode,E=n.outlinewidth,L=n.borderwidth,C=n.bgcolor,O=n.xanchor,P=n.yanchor,I=n.xpad,D=n.ypad,z=n.x,R=l?n.y:1-n.y,F="paper"===n.yref,B="paper"===n.xref,N=i._fullLayout,j=N._size,U=n._fillcolor,V=n._line,H=n.title,q=H.side,G=n._zrange||a.extent(("function"==typeof U?U:V.color).domain()),Z="function"==typeof V.color?V.color:function(){return V.color},Y="function"==typeof U?U:function(){return U},W=n._levels,X=function(r,n,i){var a,o,s=n._levels,l=[],u=[],c=s.end+s.size/100,f=s.size,h=1.001*i[0]-.001*i[1],p=1.001*i[1]-.001*i[0];for(o=0;o<1e5&&(a=s.start+o*f,!(f>0?a>=c:a<=c));o++)a>h&&a<p&&l.push(a);if(n._fillgradient)u=[0];else if("function"==typeof n._fillcolor){var d=n._filllevels;if(d)for(c=d.end+d.size/100,f=d.size,o=0;o<1e5&&(a=d.start+o*f,!(f>0?a>=c:a<=c));o++)a>i[0]&&a<i[1]&&u.push(a);else(u=l.map(function(r){return r-s.size/2})).push(u[u.length-1]+s.size)}else n._fillcolor&&"string"==typeof n._fillcolor&&(u=[0]);return s.size<0&&(l.reverse(),u.reverse()),{line:l,fill:u}}(0,n,G),J=X.fill,K=X.line,$=Math.round(x*("fraction"===T?l?j.w:j.h:1)),Q=$/(l?j.w:j.h),tt=Math.round(c*("fraction"===d?l?j.h:j.w:1)),te=tt/(l?j.h:j.w),tr=B?j.w:i._fullLayout.width,tn=F?j.h:i._fullLayout.height,ti=Math.round(l?z*tr+I:R*tn+D),ta={center:.5,right:1}[O]||0,to={top:1,middle:.5}[P]||0,ts=l?z-ta*Q:R-to*Q,tl=l?R-to*te:z-ta*te,tu=Math.round(l?tn*(1-tl):tr*tl);n._lenFrac=te,n._thickFrac=Q,n._uFrac=ts,n._vFrac=tl;var tc=n._axis=function(r,n,i){var a=r._fullLayout,o="v"===n.orientation,s={type:"linear",range:i,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,labelalias:n.labelalias,ticklabelposition:n.ticklabelposition,ticklabeloverflow:n.ticklabeloverflow,ticklabelstep:n.ticklabelstep,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,showline:!0,anchor:"free",side:o?"right":"bottom",position:1},l=o?"y":"x",u={type:"linear",_id:l+n._id},c={letter:l,font:a.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:a.calendar};function h(r,n){return f.coerce(s,u,w,r,n)}return b(s,u,h,c,a),_(s,u,h,c),u}(i,n,G);tc.position=Q+(l?z+I/j.w:R+D/j.h);var tf=-1!==["top","bottom"].indexOf(q);if(l&&tf&&(tc.title.side=q,tc.titlex=z+I/j.w,tc.titley=tl+("top"===H.side?te-D/j.h:D/j.h)),l||tf||(tc.title.side=q,tc.titley=R+D/j.h,tc.titlex=tl+I/j.w),V.color&&"auto"===n.tickmode){tc.tickmode="linear",tc.tick0=W.start;var th=W.size,tp=f.constrain(tt/50,4,15)+1,td=(G[1]-G[0])/((n.nticks||tp)*th);if(td>1){var tv=Math.pow(10,Math.floor(Math.log(td)/Math.LN10));th*=tv*f.roundUp(td/tv,[2,5,10]),(Math.abs(W.start)/W.size+1e-6)%1<2e-6&&(tc.tick0=0)}tc.dtick=th}tc.domain=l?[tl+D/j.h,tl+te-D/j.h]:[tl+I/j.w,tl+te-I/j.w],tc.setScale(),r.attr("transform",h(Math.round(j.l),Math.round(j.t)));var tg,ty=r.select("."+S.cbtitleunshift).attr("transform",h(-Math.round(j.l),-Math.round(j.t))),tm=tc.ticklabelposition,tx=tc.title.font.size,tb=r.select("."+S.cbaxis),t_=0,tw=0;function tT(a,o){var s={propContainer:tc,propName:n._propPrefix+"title",traceIndex:n._traceIndex,_meta:n._meta,placeholder:N._dfltTitle.colorbar,containerGroup:r.select("."+S.cbtitle)},l="h"===a.charAt(0)?a.substr(1):"h"+a;r.selectAll("."+l+",."+l+"-math-group").remove(),y.draw(i,a,p(s,o||{}))}return f.syncOrAsync([s.previousPromises,function(){var r,n;(l&&tf||!l&&!tf)&&("top"===q&&(r=I+j.l+tr*z,n=D+j.t+tn*(1-tl-te)+3+.75*tx),"bottom"===q&&(r=I+j.l+tr*z,n=D+j.t+tn*(1-tl)-3-.25*tx),"right"===q&&(n=D+j.t+tn*R+3+.75*tx,r=I+j.l+tr*tl),tT(tc._id+"title",{attributes:{x:r,y:n,"text-anchor":l?"start":"middle"}}))},function(){if(!l&&!tf||l&&tf){var s,c=r.select("."+S.cbtitle),p=c.select("text"),d=[-E/2,E/2],g=c.select(".h"+tc._id+"title-math-group").node(),y=15.6;if(p.node()&&(y=parseInt(p.node().style.fontSize,10)*k),g?(tw=(s=v.bBox(g)).width,(t_=s.height)>y&&(d[1]-=(t_-y)/2)):p.node()&&!p.classed(S.jsPlaceholder)&&(tw=(s=v.bBox(p.node())).width,t_=s.height),l){if(t_){if(t_+=5,"top"===q)tc.domain[1]-=t_/j.h,d[1]*=-1;else{tc.domain[0]+=t_/j.h;var x=m.lineCount(p);d[1]+=(1-x)*y}c.attr("transform",h(d[0],d[1])),tc.setScale()}}else tw&&("right"===q&&(tc.domain[0]+=(tw+tx/2)/j.w),c.attr("transform",h(d[0],d[1])),tc.setScale())}r.selectAll("."+S.cbfills+",."+S.cblines).attr("transform",l?h(0,Math.round(j.h*(1-tc.domain[1]))):h(Math.round(j.w*tc.domain[0]),0)),tb.attr("transform",l?h(0,Math.round(-j.t)):h(Math.round(-j.l),0));var b=r.select("."+S.cbfills).selectAll("rect."+S.cbfill).attr("style","").data(J);b.enter().append("rect").classed(S.cbfill,!0).attr("style",""),b.exit().remove();var _=G.map(tc.c2p).map(Math.round).sort(function(r,n){return r-n});b.each(function(r,s){var u=[0===s?G[0]:(J[s]+J[s-1])/2,s===J.length-1?G[1]:(J[s]+J[s+1])/2].map(tc.c2p).map(Math.round);l&&(u[1]=f.constrain(u[1]+(u[1]>u[0])?1:-1,_[0],_[1]));var c=a.select(this).attr(l?"x":"y",ti).attr(l?"y":"x",a.min(u)).attr(l?"width":"height",Math.max($,2)).attr(l?"height":"width",Math.max(a.max(u)-a.min(u),2));if(n._fillgradient)v.gradient(c,i,n._id,l?"vertical":"horizontalreversed",n._fillgradient,"fill");else{var h=Y(r).replace("e-","");c.attr("fill",o(h).toHexString())}});var w=r.select("."+S.cblines).selectAll("path."+S.cbline).data(V.color&&V.width?K:[]);w.enter().append("path").classed(S.cbline,!0),w.exit().remove(),w.each(function(r){var n=Math.round(tc.c2p(r))+V.width/2%1;a.select(this).attr("d","M"+(l?ti+","+n:n+","+ti)+(l?"h":"v")+$).call(v.lineGroupStyle,V.width,Z(r),V.dash)}),tb.selectAll("g."+tc._id+"tick,path").remove();var T=ti+$+(E||0)/2-("outside"===n.ticks?1:0),A=u.calcTicks(tc),M=u.getTickSigns(tc)[2];return u.drawTicks(i,tc,{vals:"inside"===tc.ticks?u.clipEnds(tc,A):A,layer:tb,path:u.makeTickPath(tc,T,M),transFn:u.makeTransTickFn(tc)}),u.drawLabels(i,tc,{vals:A,layer:tb,transFn:u.makeTransTickLabelFn(tc),labelFns:u.makeLabelFns(tc,T)})},function(){if(l&&!tf||!l&&tf){var r,o,s=tc.position||0,u=tc._offset+tc._length/2;if("right"===q)o=u,r=j.l+tr*s+10+tx*(tc.showticklabels?1:.5);else if(r=u,"bottom"===q&&(o=j.t+tn*s+10+(-1===tm.indexOf("inside")?tc.tickfont.size:0)+("intside"!==tc.ticks&&n.ticklen||0)),"top"===q){var c=H.text.split("<br>").length;o=j.t+tn*s+10-$-k*tx*c}tT((l?"h":"v")+tc._id+"title",{avoid:{selection:a.select(i).selectAll("g."+tc._id+"tick"),side:q,offsetTop:l?0:j.t,offsetLeft:l?j.l:0,maxShift:l?N.width:N.height},attributes:{x:r,y:o,"text-anchor":"middle"},transform:{rotate:l?-90:0,offset:0}})}},s.previousPromises,function(){var a,u=$+E/2;-1===tm.indexOf("inside")&&(a=v.bBox(tb.node()),u+=l?a.width:a.height),tg=ty.select("text");var f=0,p=l&&"top"===q,y=!l&&"right"===q,m=0;if(tg.node()&&!tg.classed(S.jsPlaceholder)){var b,_=ty.select(".h"+tc._id+"title-math-group").node();_&&(l&&tf||!l&&!tf)?(f=(a=v.bBox(_)).width,b=a.height):(f=(a=v.bBox(ty.node())).right-j.l-(l?ti:tu),b=a.bottom-j.t-(l?tu:ti),l||"top"!==q||(u+=a.height,m=a.height)),y&&(tg.attr("transform",h(f/2+tx/2,0)),f*=2),u=Math.max(u,l?f:b)}var w=2*(l?I:D)+u+L+E/2,k=0;!l&&H.text&&"bottom"===P&&R<=0&&(w+=k=w/2,m+=k),N._hColorbarMoveTitle=k,N._hColorbarMoveCBTitle=m;var U=L+E,V=(l?ti:tu)-U/2-(l?I:0),G=(l?tu:ti)-(l?tt:D+m-k);r.select("."+S.cbbg).attr("x",V).attr("y",G).attr(l?"width":"height",Math.max(w-k,2)).attr(l?"height":"width",Math.max(tt+U,2)).call(g.fill,C).call(g.stroke,n.bordercolor).style("stroke-width",L);var Z=y?Math.max(f-10,0):0;r.selectAll("."+S.cboutline).attr("x",(l?ti:tu+I)+Z).attr("y",(l?tu+D-tt:ti)+(p?t_:0)).attr(l?"width":"height",Math.max($,2)).attr(l?"height":"width",Math.max(tt-(l?2*D+t_:2*I+Z),2)).call(g.stroke,n.outlinecolor).style({fill:"none","stroke-width":E});var Y=l?ta*w:0,W=l?0:(1-to)*w-m;if(Y=B?j.l-Y:-Y,W=F?j.t-W:-W,r.attr("transform",h(Y,W)),!l&&(L||o(C).getAlpha()&&!o.equals(N.paper_bgcolor,C))){var X=tb.selectAll("text"),J=X[0].length,K=r.select("."+S.cbbg).node(),Q=v.bBox(K),te=v.getTranslate(r);X.each(function(r,n){var i=J-1;if(0===n||n===i){var a,o=v.bBox(this),s=v.getTranslate(this);if(n===i){var l=o.right+s.x;(a=Q.right+te.x+tu-L-2+z-l)>0&&(a=0)}else if(0===n){var u=o.left+s.x;(a=Q.left+te.x+tu+L+2-u)<0&&(a=0)}a&&(J<3?this.setAttribute("transform","translate("+a+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var tr={},tn=A[O],ts=M[O],tl=A[P],th=M[P],tp=w-$;l?("pixels"===d?(tr.y=R,tr.t=tt*tl,tr.b=tt*th):(tr.t=tr.b=0,tr.yt=R+c*tl,tr.yb=R-c*th),"pixels"===T?(tr.x=z,tr.l=w*tn,tr.r=w*ts):(tr.l=tp*tn,tr.r=tp*ts,tr.xl=z-x*tn,tr.xr=z+x*ts)):("pixels"===d?(tr.x=z,tr.l=tt*tn,tr.r=tt*ts):(tr.l=tr.r=0,tr.xl=z+c*tn,tr.xr=z-c*ts),"pixels"===T?(tr.y=1-R,tr.t=w*tl,tr.b=w*th):(tr.t=tp*tl,tr.b=tp*th,tr.yt=R-x*tl,tr.yb=R+x*th));var td=n.y<.5?"b":"t",tv=n.x<.5?"l":"r";i._fullLayout._reservedMargin[n._id]={};var tw={r:N.width-V-Y,l:V+tr.r,b:N.height-G-W,t:G+tr.b};B&&F?s.autoMargin(i,n._id,tr):B?i._fullLayout._reservedMargin[n._id][td]=tw[td]:F||l?i._fullLayout._reservedMargin[n._id][tv]=tw[tv]:i._fullLayout._reservedMargin[n._id][td]=tw[td]}],i)}(C,n,r);O&&O.then&&(r._promises||[]).push(O),r._context.edits.colorbarPosition&&(E="v"===n.orientation,L=r._fullLayout._size,c.init({element:C.node(),gd:r,prepFn:function(){i=C.attr("transform"),d(C)},moveFn:function(r,a){C.attr("transform",i+h(r,a)),x=c.align((E?n._uFrac:n._vFrac)+r/L.w,E?n._thickFrac:n._lenFrac,0,1,n.xanchor),T=c.align((E?n._vFrac:1-n._uFrac)-a/L.h,E?n._lenFrac:n._thickFrac,0,1,n.yanchor),d(C,c.getCursor(x,T,n.xanchor,n.yanchor))},doneFn:function(){if(d(C),void 0!==x&&void 0!==T){var i={};i[n._propPrefix+"x"]=x,i[n._propPrefix+"y"]=T,void 0!==n._traceIndex?l.call("_guiRestyle",r,i,n._traceIndex):l.call("_guiRelayout",r,i)}}}))}),n.exit().each(function(n){s.autoMargin(r,n._id)}).remove(),n.order()}}},76228:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r){return a.isPlainObject(r.colorbar)}},12311:function(r,n,i){"use strict";r.exports={moduleType:"component",name:"colorbar",attributes:i(63583),supplyDefaults:i(62499),draw:i(98981).draw,hasColorbar:i(76228)}},50693:function(r,n,i){"use strict";var a=i(63583),o=i(30587).counter,s=i(78607),l=i(63282).scales;function u(r){return"`"+r+"`"}s(l),r.exports=function(r,n){r=r||"";var i,s=(n=n||{}).cLetter||"c",c=("onlyIfNumerical"in n&&n.onlyIfNumerical,"noScale"in n?n.noScale:"marker.line"===r),f="showScaleDflt"in n?n.showScaleDflt:"z"===s,h="string"==typeof n.colorscaleDflt?l[n.colorscaleDflt]:null,p=n.editTypeOverride||"",d=r?r+".":"";"colorAttr"in n?(i=n.colorAttr,n.colorAttr):u(d+(i=({z:"z",c:"color"})[s]));var v=s+"auto",g=s+"min",y=s+"max",m=(u(d+v),u(d+g),u(d+y),{});m[g]=m[y]=void 0;var x={};x[v]=!1;var b={};return"color"===i&&(b.color={valType:"color",arrayOk:!0,editType:p||"style"},n.anim&&(b.color.anim=!0)),b[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:m},b[g]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:x},b[y]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:x},b[s+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:m},b.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:!1!==n.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},c||(b.showscale={valType:"boolean",dflt:f,editType:"calc"},b.colorbar=a),n.noColorAxis||(b.coloraxis={valType:"subplotid",regex:o("coloraxis"),dflt:null,editType:"calc"}),b}},78803:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(52075).extractOpts;r.exports=function(r,n,i){var l,u=r._fullLayout,c=i.vals,f=i.containerStr,h=f?o.nestedProperty(n,f).get():n,p=s(h),d=!1!==p.auto,v=p.min,g=p.max,y=p.mid,m=function(){return o.aggNums(Math.min,null,c)},x=function(){return o.aggNums(Math.max,null,c)};void 0===v?v=m():d&&(v=h._colorAx&&a(v)?Math.min(v,m()):m()),void 0===g?g=x():d&&(g=h._colorAx&&a(g)?Math.max(g,x()):x()),d&&void 0!==y&&(g-y>y-v?v=y-(g-y):g-y<y-v&&(g=y+(y-v))),v===g&&(v-=.5,g+=.5),p._sync("min",v),p._sync("max",g),p.autocolorscale&&(l=v*g<0?u.colorscale.diverging:v>=0?u.colorscale.sequential:u.colorscale.sequentialminus,p._sync("colorscale",l))}},33046:function(r,n,i){"use strict";var a=i(71828),o=i(52075).hasColorscale,s=i(52075).extractOpts;r.exports=function(r,n){function i(r,n){var i=r["_"+n];void 0!==i&&(r[n]=i)}function l(r,o){var l=o.container?a.nestedProperty(r,o.container).get():r;if(l){if(l.coloraxis)l._colorAx=n[l.coloraxis];else{var u=s(l),c=u.auto;(c||void 0===u.min)&&i(l,o.min),(c||void 0===u.max)&&i(l,o.max),u.autocolorscale&&i(l,"colorscale")}}}for(var u=0;u<r.length;u++){var c=r[u],f=c._module.colorbar;if(f){if(Array.isArray(f))for(var h=0;h<f.length;h++)l(c,f[h]);else l(c,f)}o(c,"marker.line")&&l(c,{container:"marker.line",min:"cmin",max:"cmax"})}for(var p in n._colorAxes)l(n[p],{min:"cmin",max:"cmax"})}},1586:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(76228),l=i(62499),u=i(63282).isValid,c=i(73972).traceIs;function f(r,n){var i=n.slice(0,n.length-1);return n?o.nestedProperty(r,i).get()||{}:r}r.exports=function r(n,i,h,p,d){var v=d.prefix,g=d.cLetter,y="_module"in i,m=f(n,v),x=f(i,v),b=f(i._template||{},v)||{},_=function(){return delete n.coloraxis,delete i.coloraxis,r(n,i,h,p,d)};if(y){var w=h._colorAxes||{},T=p(v+"coloraxis");if(T){var k=c(i,"contour")&&o.nestedProperty(i,"contours.coloring").get()||"heatmap",A=w[T];return void(A?(A[2].push(_),A[0]!==k&&(A[0]=!1,o.warn(["Ignoring coloraxis:",T,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[T]=[k,i,[_]])}}var M=m[g+"min"],S=m[g+"max"];p(v+g+"auto",!(a(M)&&a(S)&&M<S))?p(v+g+"mid"):(p(v+g+"min"),p(v+g+"max"));var E,L,C=m.colorscale,O=b.colorscale;void 0!==C&&(E=!u(C)),void 0!==O&&(E=!u(O)),p(v+"autocolorscale",E),p(v+"colorscale"),p(v+"reversescale"),"marker.line."!==v&&(v&&y&&(L=s(m)),p(v+"showscale",L)&&(v&&b&&(x._template=b),l(m,x,h)))}},52075:function(r,n,i){"use strict";var a=i(39898),o=i(84267),s=i(92770),l=i(71828),u=i(7901),c=i(63282).isValid,f=["showscale","autocolorscale","colorscale","reversescale","colorbar"],h=["min","max","mid","auto"];function p(r){var n,i,a,o,s=r._colorAx,l=s||r,u={};for(a=0;a<f.length;a++)u[o=f[a]]=l[o];if(s)for(i="c",a=0;a<h.length;a++)u[o=h[a]]=l["c"+o];else{for(a=0;a<h.length;a++)((n="c"+(o=h[a]))in l||(n="z"+o)in l)&&(u[o]=l[n]);i=n.charAt(0)}return u._sync=function(r,n){var a=-1!==h.indexOf(r)?i+r:r;l[a]=l["_"+a]=n},u}function d(r){for(var n=p(r),i=n.min,a=n.max,o=n.reversescale?v(n.colorscale):n.colorscale,s=o.length,l=Array(s),u=Array(s),c=0;c<s;c++){var f=o[c];l[c]=i+f[0]*(a-i),u[c]=f[1]}return{domain:l,range:u}}function v(r){for(var n=r.length,i=Array(n),a=n-1,o=0;a>=0;a--,o++){var s=r[a];i[o]=[1-s[0],s[1]]}return i}function g(r,n){n=n||{};for(var i=r.domain,l=r.range,c=l.length,f=Array(c),h=0;h<c;h++){var p=o(l[h]).toRgb();f[h]=[p.r,p.g,p.b,p.a]}var d,v=a.scale.linear().domain(i).range(f).clamp(!0),g=n.noNumericCheck,m=n.returnArray;return(d=g&&m?v:g?function(r){return y(v(r))}:m?function(r){return s(r)?v(r):o(r).isValid()?r:u.defaultLine}:function(r){return s(r)?y(v(r)):o(r).isValid()?r:u.defaultLine}).domain=v.domain,d.range=function(){return l},d}function y(r){return o({r:r[0],g:r[1],b:r[2],a:r[3]}).toRgbString()}r.exports={hasColorscale:function(r,n,i){var a=n?l.nestedProperty(r,n).get()||{}:r,o=a[i||"color"];o&&o._inputArray&&(o=o._inputArray);var u=!1;if(l.isArrayOrTypedArray(o)){for(var f=0;f<o.length;f++)if(s(o[f])){u=!0;break}}return l.isPlainObject(a)&&(u||!0===a.showscale||s(a.cmin)&&s(a.cmax)||c(a.colorscale)||l.isPlainObject(a.colorbar))},extractOpts:p,extractScale:d,flipScale:v,makeColorScaleFunc:g,makeColorScaleFuncFromTrace:function(r,n){return g(d(r),n)}}},21081:function(r,n,i){"use strict";var a=i(63282),o=i(52075);r.exports={moduleType:"component",name:"colorscale",attributes:i(50693),layoutAttributes:i(72673),supplyLayoutDefaults:i(30959),handleDefaults:i(1586),crossTraceDefaults:i(33046),calc:i(78803),scales:a.scales,defaultScale:a.defaultScale,getScale:a.get,isValidScale:a.isValid,hasColorscale:o.hasColorscale,extractOpts:o.extractOpts,extractScale:o.extractScale,flipScale:o.flipScale,makeColorScaleFunc:o.makeColorScaleFunc,makeColorScaleFuncFromTrace:o.makeColorScaleFuncFromTrace}},72673:function(r,n,i){"use strict";var a=i(1426).extendFlat,o=i(50693),s=i(63282).scales;r.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:s.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:s.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:s.RdBu,editType:"calc"}},coloraxis:a({_isSubplotObj:!0,editType:"calc"},o("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(r,n,i){"use strict";var a=i(71828),o=i(44467),s=i(72673),l=i(1586);r.exports=function(r,n){function i(i,o){return a.coerce(r,n,s,i,o)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var u,c,f=n._colorAxes;function h(r,n){return a.coerce(u,c,s.coloraxis,r,n)}for(var p in f){var d=f[p];if(d[0])u=r[p]||{},(c=o.newContainer(n,p,"coloraxis"))._name=p,l(u,c,n,h,{prefix:"",cLetter:"c"});else{for(var v=0;v<d[2].length;v++)d[2][v]();delete n._colorAxes[p]}}}},63282:function(r,n,i){"use strict";var a=i(84267),o={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},s=o.RdBu;function l(r){var n=0;if(!Array.isArray(r)||r.length<2||!r[0]||!r[r.length-1]||0!=+r[0][0]||1!=+r[r.length-1][0])return!1;for(var i=0;i<r.length;i++){var o=r[i];if(2!==o.length||+o[0]<n||!a(o[1]).isValid())return!1;n=+o[0]}return!0}r.exports={scales:o,defaultScale:s,get:function(r,n){if(n||(n=s),!r)return n;function i(){try{r=o[r]||JSON.parse(r)}catch(i){r=n}}return"string"==typeof r&&(i(),"string"==typeof r&&i()),l(r)?r:n},isValid:function(r){return void 0!==o[r]||l(r)}}},92807:function(r){"use strict";r.exports=function(r,n,i,a,o){var s=(r-i)/(a-i),l=s+n/(a-i),u=(s+l)/2;return"left"===o||"bottom"===o?s:"center"===o||"middle"===o?u:"right"===o||"top"===o?l:s<2/3-u?s:l>4/3-u?l:u}},70461:function(r,n,i){"use strict";var a=i(71828),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];r.exports=function(r,n,i,s){return r="left"===i?0:"center"===i?1:"right"===i?2:a.constrain(Math.floor(3*r),0,2),o[n="bottom"===s?0:"middle"===s?1:"top"===s?2:a.constrain(Math.floor(3*n),0,2)][r]}},64505:function(r,n){"use strict";n.selectMode=function(r){return"lasso"===r||"select"===r},n.drawMode=function(r){return"drawclosedpath"===r||"drawopenpath"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r},n.openMode=function(r){return"drawline"===r||"drawopenpath"===r},n.rectMode=function(r){return"select"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r},n.freeMode=function(r){return"lasso"===r||"drawclosedpath"===r||"drawopenpath"===r},n.selectingOrDrawing=function(r){return n.freeMode(r)||n.rectMode(r)}},28569:function(r,n,i){"use strict";var a=i(48956),o=i(57035),s=i(38520),l=i(71828).removeElement,u=i(85555),c=r.exports={};c.align=i(92807),c.getCursor=i(70461);var f=i(26041);function h(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function p(r){return a(r.changedTouches?r.changedTouches[0]:r,document.body)}c.unhover=f.wrapped,c.unhoverRaw=f.raw,c.init=function(r){var n,i,a,f,d,v,g,y,m=r.gd,x=1,b=m._context.doubleClickDelay,_=r.element;m._mouseDownTime||(m._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=T,s?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=T,_.addEventListener("touchstart",T,{passive:!1})):_.ontouchstart=T;var w=r.clampFn||function(r,n,i){return Math.abs(r)<i&&(r=0),Math.abs(n)<i&&(n=0),[r,n]};function T(s){m._dragged=!1,m._dragging=!0;var l=p(s);n=l[0],i=l[1],g=s.target,v=s,y=2===s.buttons||s.ctrlKey,void 0===s.clientX&&void 0===s.clientY&&(s.clientX=n,s.clientY=i),(a=(new Date).getTime())-m._mouseDownTime<b?x+=1:(x=1,m._mouseDownTime=a),r.prepFn&&r.prepFn(s,n,i),o&&!y?(d=h()).style.cursor=window.getComputedStyle(_).cursor:o||(d=document,f=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",A),document.addEventListener("touchend",A),!1!==r.dragmode&&(s.preventDefault(),document.addEventListener("mousemove",k),document.addEventListener("touchmove",k,{passive:!1}))}function k(a){a.preventDefault();var o=p(a),s=r.minDrag||u.MINDRAG,l=w(o[0]-n,o[1]-i,s),f=l[0],h=l[1];(f||h)&&(m._dragged=!0,c.unhover(m,a)),m._dragged&&r.moveFn&&!y&&(m._dragdata={element:_,dx:f,dy:h},r.moveFn(f,h))}function A(n){if(delete m._dragdata,!1!==r.dragmode&&(n.preventDefault(),document.removeEventListener("mousemove",k),document.removeEventListener("touchmove",k)),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),o?l(d):f&&(d.documentElement.style.cursor=f,f=null),m._dragging){if(m._dragging=!1,(new Date).getTime()-m._mouseDownTime>b&&(x=Math.max(x-1,1)),m._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(x,v),!y){var i;try{i=new MouseEvent("click",n)}catch(r){var a=p(n);(i=document.createEvent("MouseEvents")).initMouseEvent("click",n.bubbles,n.cancelable,n.view,n.detail,n.screenX,n.screenY,a[0],a[1],n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,n.relatedTarget)}g.dispatchEvent(i)}m._dragging=!1,m._dragged=!1}else m._dragged=!1}},c.coverSlip=h},26041:function(r,n,i){"use strict";var a=i(11086),o=i(79990),s=i(24401).getGraphDiv,l=i(26675),u=r.exports={};u.wrapped=function(r,n,i){(r=s(r))._fullLayout&&o.clear(r._fullLayout._uid+l.HOVERID),u.raw(r,n,i)},u.raw=function(r,n){var i=r._fullLayout,o=r._hoverdata;n||(n={}),n.target&&!r._dragged&&!1===a.triggerHandler(r,"plotly_beforehover",n)||(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,n.target&&o&&r.emit("plotly_unhover",{event:n,points:o}))}},79952:function(r,n){"use strict";n.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=o.numberFormat,l=i(92770),u=i(84267),c=i(73972),f=i(7901),h=i(21081),p=o.strTranslate,d=i(63893),v=i(77922),g=i(18783).LINE_SPACING,y=i(37822).DESELECTDIM,m=i(34098),x=i(39984),b=i(23469).appendArrayPointValue,_=r.exports={};function w(r,n,i){var a=n.fillpattern,o=a&&_.getPatternAttr(a.shape,0,"");if(o){var s=_.getPatternAttr(a.bgcolor,0,null),l=_.getPatternAttr(a.fgcolor,0,null),u=a.fgopacity,c=_.getPatternAttr(a.size,0,8),h=_.getPatternAttr(a.solidity,0,.3),p=n.uid;_.pattern(r,"point",i,p,o,c,h,void 0,a.fillmode,s,l,u)}else n.fillcolor&&r.call(f.fill,n.fillcolor)}_.font=function(r,n,i,a){o.isPlainObject(n)&&(a=n.color,i=n.size,n=n.family),n&&r.style("font-family",n),i+1&&r.style("font-size",i+"px"),a&&r.call(f.fill,a)},_.setPosition=function(r,n,i){r.attr("x",n).attr("y",i)},_.setSize=function(r,n,i){r.attr("width",n).attr("height",i)},_.setRect=function(r,n,i,a,o){r.call(_.setPosition,n,i).call(_.setSize,a,o)},_.translatePoint=function(r,n,i,a){var o=i.c2p(r.x),s=a.c2p(r.y);return!!(l(o)&&l(s)&&n.node())&&("text"===n.node().nodeName?n.attr("x",o).attr("y",s):n.attr("transform",p(o,s)),!0)},_.translatePoints=function(r,n,i){r.each(function(r){var o=a.select(this);_.translatePoint(r,o,n,i)})},_.hideOutsideRangePoint=function(r,n,i,a,o,s){n.attr("display",i.isPtWithinRange(r,o)&&a.isPtWithinRange(r,s)?null:"none")},_.hideOutsideRangePoints=function(r,n){if(n._hasClipOnAxisFalse){var i=n.xaxis,o=n.yaxis;r.each(function(n){var s=n[0].trace,l=s.xcalendar,u=s.ycalendar,f=c.traceIs(s,"bar-like")?".bartext":".point,.textpoint";r.selectAll(f).each(function(r){_.hideOutsideRangePoint(r,a.select(this),i,o,l,u)})})}},_.crispRound=function(r,n,i){return n&&l(n)?r._context.staticPlot?n:n<1?1:Math.round(n):i||0},_.singleLineStyle=function(r,n,i,a,o){n.style("fill","none");var s=(((r||[])[0]||{}).trace||{}).line||{},l=i||s.width||0,u=o||s.dash||"";f.stroke(n,a||s.color),_.dashLine(n,u,l)},_.lineGroupStyle=function(r,n,i,o){r.style("fill","none").each(function(r){var s=(((r||[])[0]||{}).trace||{}).line||{},l=n||s.width||0,u=o||s.dash||"";a.select(this).call(f.stroke,i||s.color).call(_.dashLine,u,l)})},_.dashLine=function(r,n,i){i=+i||0,n=_.dashStyle(n,i),r.style({"stroke-dasharray":n,"stroke-width":i+"px"})},_.dashStyle=function(r,n){var i=Math.max(n=+n||1,3);return"solid"===r?r="":"dot"===r?r=i+"px,"+i+"px":"dash"===r?r=3*i+"px,"+3*i+"px":"longdash"===r?r=5*i+"px,"+5*i+"px":"dashdot"===r?r=3*i+"px,"+i+"px,"+i+"px,"+i+"px":"longdashdot"===r&&(r=5*i+"px,"+2*i+"px,"+i+"px,"+2*i+"px"),r},_.singleFillStyle=function(r,n){var i=a.select(r.node());w(r,((i.data()[0]||[])[0]||{}).trace||{},n)},_.fillGroupStyle=function(r,n){r.style("stroke-width",0).each(function(r){var i=a.select(this);r[0].trace&&w(i,r[0].trace,n)})};var T=i(90998);_.symbolNames=[],_.symbolFuncs=[],_.symbolBackOffs=[],_.symbolNeedLines={},_.symbolNoDot={},_.symbolNoFill={},_.symbolList=[],Object.keys(T).forEach(function(r){var n=T[r],i=n.n;_.symbolList.push(i,String(i),r,i+100,String(i+100),r+"-open"),_.symbolNames[i]=r,_.symbolFuncs[i]=n.f,_.symbolBackOffs[i]=n.backoff||0,n.needLine&&(_.symbolNeedLines[i]=!0),n.noDot?_.symbolNoDot[i]=!0:_.symbolList.push(i+200,String(i+200),r+"-dot",i+300,String(i+300),r+"-open-dot"),n.noFill&&(_.symbolNoFill[i]=!0)});var k=_.symbolNames.length;function A(r,n,i,a){return _.symbolFuncs[r%100](n,i,a)+(r>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}_.symbolNumber=function(r){if(l(r))r=+r;else if("string"==typeof r){var n=0;r.indexOf("-open")>0&&(n=100,r=r.replace("-open","")),r.indexOf("-dot")>0&&(n+=200,r=r.replace("-dot","")),(r=_.symbolNames.indexOf(r))>=0&&(r+=n)}return r%100>=k||r>=400?0:Math.floor(Math.max(r,0))};var M={x1:1,x2:0,y1:0,y2:0},S={x1:0,x2:0,y1:1,y2:0},E=s("~f"),L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:S},verticalreversed:{node:"linearGradient",attrs:S,reversed:!0}};_.gradient=function(r,n,i,s,l,c){for(var h=l.length,p=L[s],d=Array(h),v=0;v<h;v++)p.reversed?d[h-1-v]=[E(100*(1-l[v][0])),l[v][1]]:d[v]=[E(100*l[v][0]),l[v][1]];var g=n._fullLayout,y="g"+g._uid+"-"+i,m=g._defs.select(".gradients").selectAll("#"+y).data([s+d.join(";")],o.identity);m.exit().remove(),m.enter().append(p.node).each(function(){var r=a.select(this);p.attrs&&r.attr(p.attrs),r.attr("id",y);var n=r.selectAll("stop").data(d);n.exit().remove(),n.enter().append("stop"),n.each(function(r){var n=u(r[1]);a.select(this).attr({offset:r[0]+"%","stop-color":f.tinyRGB(n),"stop-opacity":n.getAlpha()})})}),r.style(c,q(y,n)).style(c+"-opacity",null),r.classed("gradient_filled",!0)},_.pattern=function(r,n,i,s,l,c,h,p,d,v,g,y){var m="legend"===n;p&&("overlay"===d?(v=p,g=f.contrast(v)):(v=void 0,g=p));var x,b,_,w,T,k,A,M=i._fullLayout,S="p"+M._uid+"-"+s,E={},L=u(g),C=f.tinyRGB(L),O=y*L.getAlpha();switch(l){case"/":T="path",E={d:_="M-"+(x=c*Math.sqrt(2))/4+","+(b=c*Math.sqrt(2))/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2,opacity:O,stroke:C,"stroke-width":h*c+"px"};break;case"\\":T="path",E={d:_="M"+(x=c*Math.sqrt(2))/4*3+",-"+(b=c*Math.sqrt(2))/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2,opacity:O,stroke:C,"stroke-width":h*c+"px"};break;case"x":_="M-"+(x=c*Math.sqrt(2))/4+","+(b=c*Math.sqrt(2))/4+"l"+x/2+",-"+b/2+"M0,"+b+"L"+x+",0M"+x/4*3+","+b/4*5+"l"+x/2+",-"+b/2+"M"+x/4*3+",-"+b/4+"l"+x/2+","+b/2+"M0,0L"+x+","+b+"M-"+x/4+","+b/4*3+"l"+x/2+","+b/2,T="path",E={d:_,opacity:O,stroke:C,"stroke-width":c-c*Math.sqrt(1-h)+"px"};break;case"|":T="path",T="path",E={d:_="M"+(x=c)/2+",0L"+x/2+","+(b=c),opacity:O,stroke:C,"stroke-width":h*c+"px"};break;case"-":T="path",T="path",E={d:_="M0,"+(b=c)/2+"L"+(x=c)+","+b/2,opacity:O,stroke:C,"stroke-width":h*c+"px"};break;case"+":T="path",_="M"+(x=c)/2+",0L"+x/2+","+(b=c)+"M0,"+b/2+"L"+x+","+b/2,T="path",E={d:_,opacity:O,stroke:C,"stroke-width":c-c*Math.sqrt(1-h)+"px"};break;case".":x=c,b=c,h<Math.PI/4?w=Math.sqrt(h*c*c/Math.PI):(k=Math.PI/4,w=(A=c/2)+(c/Math.sqrt(2)-A)*(h-k)/(1-k)),T="circle",E={cx:x/2,cy:b/2,r:w,opacity:O,fill:C}}var P=[l||"noSh",v||"noBg",g||"noFg",c,h].join(";"),I=M._defs.select(".patterns").selectAll("#"+S).data([P],o.identity);I.exit().remove(),I.enter().append("pattern").each(function(){var r=a.select(this);if(r.attr({id:S,width:x+"px",height:b+"px",patternUnits:"userSpaceOnUse",patternTransform:m?"scale(0.8)":""}),v){var n=u(v),i=f.tinyRGB(n),o=n.getAlpha(),s=r.selectAll("rect").data([0]);s.exit().remove(),s.enter().append("rect").attr({width:x+"px",height:b+"px",fill:i,"fill-opacity":o})}var l=r.selectAll(T).data([0]);l.exit().remove(),l.enter().append(T).attr(E)}),r.style("fill",q(S,i)).style("fill-opacity",null),r.classed("pattern_filled",!0)},_.initGradients=function(r){var n=r._fullLayout;o.ensureSingle(n._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),a.select(r).selectAll(".gradient_filled").classed("gradient_filled",!1)},_.initPatterns=function(r){var n=r._fullLayout;o.ensureSingle(n._defs,"g","patterns").selectAll("pattern").remove(),a.select(r).selectAll(".pattern_filled").classed("pattern_filled",!1)},_.getPatternAttr=function(r,n,i){return r&&o.isArrayOrTypedArray(r)?n<r.length?r[n]:i:r},_.pointStyle=function(r,n,i,o){if(r.size()){var s=_.makePointStyleFns(n);r.each(function(r){_.singlePointStyle(r,a.select(this),n,s,i,o)})}},_.singlePointStyle=function(r,n,i,a,s,l){var u=i.marker,c=u.line;if(l&&l.i>=0&&void 0===r.i&&(r.i=l.i),n.style("opacity",a.selectedOpacityFn?a.selectedOpacityFn(r):void 0===r.mo?u.opacity:r.mo),a.ms2mrc){h="various"===r.ms||"various"===u.size?3:a.ms2mrc(r.ms),r.mrc=h,a.selectedSizeFn&&(h=r.mrc=a.selectedSizeFn(r));var h,p=_.symbolNumber(r.mx||u.symbol)||0;r.om=p%200>=100;var d=ti(r,i),v=Y(r,i);n.attr("d",A(p,h,d,v))}var g,y,m,x=!1;if(r.so)m=c.outlierwidth,y=c.outliercolor,g=u.outliercolor;else{var b=(c||{}).width;m=(r.mlw+1||b+1||(r.trace?(r.trace.marker.line||{}).width:0)+1)-1||0,y="mlc"in r?r.mlcc=a.lineScale(r.mlc):o.isArrayOrTypedArray(c.color)?f.defaultLine:c.color,o.isArrayOrTypedArray(u.color)&&(g=f.defaultLine,x=!0),g="mc"in r?r.mcc=a.markerScale(r.mc):u.color||u.colors||"rgba(0,0,0,0)",a.selectedColorFn&&(g=a.selectedColorFn(r))}if(r.om)n.call(f.stroke,g).style({"stroke-width":(m||1)+"px",fill:"none"});else{n.style("stroke-width",(r.isBlank?0:m)+"px");var w=u.gradient,T=r.mgt;T?x=!0:T=w&&w.type,o.isArrayOrTypedArray(T)&&(L[T=T[0]]||(T=0));var k=u.pattern,M=k&&_.getPatternAttr(k.shape,r.i,"");if(T&&"none"!==T){var S=r.mgc;S?x=!0:S=w.color;var E=i.uid;x&&(E+="-"+r.i),_.gradient(n,s,E,T,[[0,S],[1,g]],"fill")}else if(M){var C=!1,O=k.fgcolor;!O&&l&&l.color&&(O=l.color,C=!0);var P=_.getPatternAttr(O,r.i,l&&l.color||null),I=_.getPatternAttr(k.bgcolor,r.i,null),D=k.fgopacity,z=_.getPatternAttr(k.size,r.i,8),R=_.getPatternAttr(k.solidity,r.i,.3);C=C||r.mcc||o.isArrayOrTypedArray(k.shape)||o.isArrayOrTypedArray(k.bgcolor)||o.isArrayOrTypedArray(k.fgcolor)||o.isArrayOrTypedArray(k.size)||o.isArrayOrTypedArray(k.solidity);var F=i.uid;C&&(F+="-"+r.i),_.pattern(n,"point",s,F,M,z,R,r.mcc,k.fillmode,I,P,D)}else o.isArrayOrTypedArray(g)?f.fill(n,g[r.i]):f.fill(n,g);m&&f.stroke(n,y)}},_.makePointStyleFns=function(r){var n={},i=r.marker;return n.markerScale=_.tryColorscale(i,""),n.lineScale=_.tryColorscale(i,"line"),c.traceIs(r,"symbols")&&(n.ms2mrc=m.isBubble(r)?x(r):function(){return(i.size||6)/2}),r.selectedpoints&&o.extendFlat(n,_.makeSelectedPointStyleFns(r)),n},_.makeSelectedPointStyleFns=function(r){var n={},i=r.selected||{},a=r.unselected||{},s=r.marker||{},l=i.marker||{},u=a.marker||{},f=s.opacity,h=l.opacity,p=u.opacity,d=void 0!==h,v=void 0!==p;(o.isArrayOrTypedArray(f)||d||v)&&(n.selectedOpacityFn=function(r){var n=void 0===r.mo?s.opacity:r.mo;return r.selected?d?h:n:v?p:y*n});var g=s.color,m=l.color,x=u.color;(m||x)&&(n.selectedColorFn=function(r){var n=r.mcc||g;return r.selected?m||n:x||n});var b=s.size,_=l.size,w=u.size,T=void 0!==_,k=void 0!==w;return c.traceIs(r,"symbols")&&(T||k)&&(n.selectedSizeFn=function(r){var n=r.mrc||b/2;return r.selected?T?_/2:n:k?w/2:n}),n},_.makeSelectedTextStyleFns=function(r){var n={},i=r.selected||{},a=r.unselected||{},o=r.textfont||{},s=i.textfont||{},l=a.textfont||{},u=o.color,c=s.color,h=l.color;return n.selectedTextColorFn=function(r){var n=r.tc||u;return r.selected?c||n:h||(c?n:f.addOpacity(n,y))},n},_.selectedPointStyle=function(r,n){if(r.size()&&n.selectedpoints){var i=_.makeSelectedPointStyleFns(n),o=n.marker||{},s=[];i.selectedOpacityFn&&s.push(function(r,n){r.style("opacity",i.selectedOpacityFn(n))}),i.selectedColorFn&&s.push(function(r,n){f.fill(r,i.selectedColorFn(n))}),i.selectedSizeFn&&s.push(function(r,a){var s=a.mx||o.symbol||0,l=i.selectedSizeFn(a);r.attr("d",A(_.symbolNumber(s),l,ti(a,n),Y(a,n))),a.mrc2=l}),s.length&&r.each(function(r){for(var n=a.select(this),i=0;i<s.length;i++)s[i](n,r)})}},_.tryColorscale=function(r,n){var i=n?o.nestedProperty(r,n).get():r;if(i){var a=i.color;if((i.colorscale||i._colorAx)&&o.isArrayOrTypedArray(a))return h.makeColorScaleFuncFromTrace(i)}return o.identity};var C,O,P={start:1,end:-1,middle:0,bottom:1,top:-1};function I(r,n,i,o,s){var l=a.select(r.node().parentNode),u=-1!==n.indexOf("top")?"top":-1!==n.indexOf("bottom")?"bottom":"middle",c=-1!==n.indexOf("left")?"end":-1!==n.indexOf("right")?"start":"middle",f=o?o/.8+1:0,h=(d.lineCount(r)-1)*g+1,v=P[c]*f,y=.75*i+P[u]*f+(P[u]-1)*h*i/2;r.attr("text-anchor",c),s||l.attr("transform",p(v,y))}function D(r,n){var i=r.ts||n.textfont.size;return l(i)&&i>0?i:0}function z(r,n,i){return i&&(r=U(r)),n?F(r[1]):R(r[0])}function R(r){var n=a.round(r,2);return C=n,n}function F(r){var n=a.round(r,2);return O=n,n}function B(r,n,i,a){var o=r[0]-n[0],s=r[1]-n[1],l=i[0]-n[0],u=i[1]-n[1],c=Math.pow(o*o+s*s,.25),f=Math.pow(l*l+u*u,.25),h=(f*f*o-c*c*l)*a,p=(f*f*s-c*c*u)*a,d=3*f*(c+f),v=3*c*(c+f);return[[R(n[0]+(d&&h/d)),F(n[1]+(d&&p/d))],[R(n[0]-(v&&h/v)),F(n[1]-(v&&p/v))]]}_.textPointStyle=function(r,n,i){if(r.size()){if(n.selectedpoints){var s;s=_.makeSelectedTextStyleFns(n).selectedTextColorFn}var l=n.texttemplate,u=i._fullLayout;r.each(function(r){var c=a.select(this),f=l?o.extractOption(r,n,"txt","texttemplate"):o.extractOption(r,n,"tx","text");if(f||0===f){if(l){var h=n._module.formatLabels,p=h?h(r,n,u):{},v={};b(v,n,r.i);var g=n._meta||{};f=o.texttemplateString(f,p,u._d3locale,v,r,g)}var y=r.tp||n.textposition,m=D(r,n),x=s?s(r):r.tc||n.textfont.color;c.call(_.font,r.tf||n.textfont.family,m,x).text(f).call(d.convertToTspans,i).call(I,y,m,r.mrc)}else c.remove()})}},_.selectedTextStyle=function(r,n){if(r.size()&&n.selectedpoints){var i=_.makeSelectedTextStyleFns(n);r.each(function(r){var o=a.select(this),s=i.selectedTextColorFn(r),l=r.tp||n.textposition,u=D(r,n);f.fill(o,s);var h=c.traceIs(n,"bar-like");I(o,l,u,r.mrc2||r.mrc,h)})}},_.smoothopen=function(r,n){if(r.length<3)return"M"+r.join("L");var i,a="M"+r[0],o=[];for(i=1;i<r.length-1;i++)o.push(B(r[i-1],r[i],r[i+1],n));for(a+="Q"+o[0][0]+" "+r[1],i=2;i<r.length-1;i++)a+="C"+o[i-2][1]+" "+o[i-1][0]+" "+r[i];return a+"Q"+o[r.length-3][1]+" "+r[r.length-1]},_.smoothclosed=function(r,n){if(r.length<3)return"M"+r.join("L")+"Z";var i,a="M"+r[0],o=r.length-1,s=[B(r[o],r[0],r[1],n)];for(i=1;i<o;i++)s.push(B(r[i-1],r[i],r[i+1],n));for(s.push(B(r[o-1],r[o],r[0],n)),i=1;i<=o;i++)a+="C"+s[i-1][1]+" "+s[i][0]+" "+r[i];return a+"C"+s[o][1]+" "+s[0][0]+" "+r[0]+"Z"};var N={hv:function(r,n,i){return"H"+R(n[0])+"V"+z(n,1,i)},vh:function(r,n,i){return"V"+F(n[1])+"H"+z(n,0,i)},hvh:function(r,n,i){return"H"+R((r[0]+n[0])/2)+"V"+F(n[1])+"H"+z(n,0,i)},vhv:function(r,n,i){return"V"+F((r[1]+n[1])/2)+"H"+R(n[0])+"V"+z(n,1,i)}},j=function(r,n,i){return"L"+z(n,0,i)+","+z(n,1,i)};function U(r,n){var i=r.backoff,a=r.trace,s=r.d,l=r.i;if(i&&a&&a.marker&&a.marker.angle%360==0&&a.line&&"spline"!==a.line.shape){var u=o.isArrayOrTypedArray(i),c=r,f=n?n[0]:C||0,h=n?n[1]:O||0,p=c[0],d=c[1],v=Math.atan2(d-h,p-f),g=u?i[l]:i;if("auto"===g){var y=c.i;"scatter"===a.type&&y--;var m=c.marker,x=m.symbol;o.isArrayOrTypedArray(x)&&(x=x[y]);var b=m.size;o.isArrayOrTypedArray(b)&&(b=b[y]),g=(m?_.symbolBackOffs[_.symbolNumber(x)]*b:0)+(_.getMarkerStandoff(s[y],a)||0)}var w=p-g*Math.cos(v),T=d-g*Math.sin(v);(w<=p&&w>=f||w>=p&&w<=f)&&(T<=d&&T>=h||T>=d&&T<=h)&&(r=[w,T])}return r}_.steps=function(r){var n=N[r]||j;return function(r){for(var i="M"+R(r[0][0])+","+F(r[0][1]),a=r.length,o=1;o<a;o++)i+=n(r[o-1],r[o],o===a-1);return i}},_.applyBackoff=U,_.makeTester=function(){var r=o.ensureSingleById(a.select("body"),"svg","js-plotly-tester",function(r){r.attr(v.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),n=o.ensureSingle(r,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});_.tester=r,_.testref=n},_.savedBBoxes={};var V=0;function H(r){var n=r.getAttribute("data-unformatted");if(null!==n)return n+r.getAttribute("data-math")+r.getAttribute("text-anchor")+r.getAttribute("style")}function q(r,n){if(!r)return null;var i=n._context,a=i._exportedPlot?"":i._baseUrl||"";return a?"url('"+a+"#"+r+"')":"url(#"+r+")"}_.bBox=function(r,n,i){if(i||(i=H(r)),i){if(s=_.savedBBoxes[i])return o.extendFlat({},s)}else if(1===r.childNodes.length){var s,l,u,c=r.childNodes[0];if(i=H(c)){var f=+c.getAttribute("x")||0,h=+c.getAttribute("y")||0,p=c.getAttribute("transform");if(!p){var v=_.bBox(c,!1,i);return f&&(v.left+=f,v.right+=f),h&&(v.top+=h,v.bottom+=h),v}if(i+="~"+f+"~"+h+"~"+p,s=_.savedBBoxes[i])return o.extendFlat({},s)}}n?l=r:(u=_.tester.node(),l=r.cloneNode(!0),u.appendChild(l)),a.select(l).attr("transform",null).call(d.positionText,0,0);var g=l.getBoundingClientRect(),y=_.testref.node().getBoundingClientRect();n||u.removeChild(l);var m={height:g.height,width:g.width,left:g.left-y.left,top:g.top-y.top,right:g.right-y.left,bottom:g.bottom-y.top};return V>=1e4&&(_.savedBBoxes={},V=0),i&&(_.savedBBoxes[i]=m),V++,o.extendFlat({},m)},_.setClipUrl=function(r,n,i){r.attr("clip-path",q(n,i))},_.getTranslate=function(r){var n=(r[r.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(r,n,i){return[n,i].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}},_.setTranslate=function(r,n,i){var a=r.attr?"attr":"getAttribute",o=r.attr?"attr":"setAttribute",s=r[a]("transform")||"";return n=n||0,i=i||0,s=(s=s.replace(/(\btranslate\(.*?\);?)/,"").trim()+p(n,i)).trim(),r[o]("transform",s),s},_.getScale=function(r){var n=(r[r.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(r,n,i){return[n,i].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}},_.setScale=function(r,n,i){var a=r.attr?"attr":"getAttribute",o=r.attr?"attr":"setAttribute",s=r[a]("transform")||"";return n=n||1,i=i||1,s=(s=s.replace(/(\bscale\(.*?\);?)/,"").trim()+("scale("+n+",")+i+")").trim(),r[o]("transform",s),s};var G=/\s*sc.*/;_.setPointGroupScale=function(r,n,i){if(n=n||1,i=i||1,r){var a=1===n&&1===i?"":"scale("+n+","+i+")";r.each(function(){var r=(this.getAttribute("transform")||"").replace(G,"");r=(r+=a).trim(),this.setAttribute("transform",r)})}};var Z=/translate\([^)]*\)\s*$/;function Y(r,n){var i;return r&&(i=r.mf),void 0===i&&(i=n.marker&&n.marker.standoff||0),n._geo||n._xA?i:-i}_.setTextPointsScale=function(r,n,i){r&&r.each(function(){var r,o=a.select(this),s=o.select("text");if(s.node()){var l=parseFloat(s.attr("x")||0),u=parseFloat(s.attr("y")||0),c=(o.attr("transform")||"").match(Z);r=1===n&&1===i?[]:[p(l,u),"scale("+n+","+i+")",p(-l,-u)],c&&r.push(c),o.attr("transform",r.join(""))}})},_.getMarkerStandoff=Y;var W,X,J,K,$,Q,tt=Math.atan2,te=Math.cos,tr=Math.sin;function tn(r,n){var i=n[0],a=n[1];return[i*te(r)-a*tr(r),i*tr(r)+a*te(r)]}function ti(r,n){var i,a,s=r.ma;void 0===s&&((s=n.marker.angle)&&!o.isArrayOrTypedArray(s)||(s=0));var u=n.marker.angleref;if("previous"===u||"north"===u){if(n._geo){var c=n._geo.project(r.lonlat);i=c[0],a=c[1]}else{var f=n._xA,h=n._yA;if(!f||!h)return 90;i=f.c2p(r.x),a=h.c2p(r.y)}if(n._geo){var p,d=r.lonlat[0],v=r.lonlat[1],g=n._geo.project([d,v+1e-5]),y=n._geo.project([d+1e-5,v]),m=tt(y[1]-a,y[0]-i),x=tt(g[1]-a,g[0]-i);if("north"===u)p=s/180*Math.PI;else if("previous"===u){var b=v/180*Math.PI,_=X/180*Math.PI,w=W/180*Math.PI-d/180*Math.PI;p=-tt(te(_)*tr(w),tr(_)*te(b)-te(_)*tr(b)*te(w))-Math.PI,W=d,X=v}var T=tn(m,[te(p),0]),k=tn(x,[tr(p),0]);s=tt(T[1]+k[1],T[0]+k[0])/Math.PI*180,"previous"!==u||Q===n.uid&&r.i===$+1||(s=null)}if("previous"===u&&!n._geo){if(Q===n.uid&&r.i===$+1&&l(i)&&l(a)){var A=i-J,M=a-K,S=n.line&&n.line.shape||"",E=S.slice(S.length-1);"h"===E&&(M=0),"v"===E&&(A=0),s+=tt(M,A)/Math.PI*180+90}else s=null}}return J=i,K=a,$=r.i,Q=n.uid,s}_.getMarkerAngle=ti},90998:function(r,n,i){"use strict";var a,o,s,l,u=i(95616),c=i(39898).round,f="M0,0Z",h=Math.sqrt(2),p=Math.sqrt(3),d=Math.PI,v=Math.cos,g=Math.sin;function y(r){return null===r}function m(r,n,i){if(!(r&&r%360!=0||n))return i;if(s===r&&l===n&&a===i)return o;function c(r,i){var a=v(r),o=g(r),s=i[0],l=i[1]+(n||0);return[s*a-l*o,s*o+l*a]}s=r,l=n,a=i;for(var f=r/180*d,h=0,p=0,y=u(i),m="",x=0;x<y.length;x++){var b=y[x],_=b[0],w=h,T=p;if("M"===_||"L"===_)h=+b[1],p=+b[2];else if("m"===_||"l"===_)h+=+b[1],p+=+b[2];else if("H"===_)h=+b[1];else if("h"===_)h+=+b[1];else if("V"===_)p=+b[1];else if("v"===_)p+=+b[1];else if("A"===_){h=+b[1],p=+b[2];var k=c(f,[+b[6],+b[7]]);b[6]=k[0],b[7]=k[1],b[3]=+b[3]+r}"H"!==_&&"V"!==_||(_="L"),"h"!==_&&"v"!==_||(_="l"),"m"!==_&&"l"!==_||(h-=w,p-=T);var A=c(f,[h,p]);"H"!==_&&"V"!==_||(_="L"),"M"!==_&&"L"!==_&&"m"!==_&&"l"!==_||(b[1]=A[0],b[2]=A[1]),b[0]=_,m+=b[0]+b.slice(1).join(",")}return o=m,m}r.exports={circle:{n:0,f:function(r,n,i){if(y(n))return f;var a=c(r,2),o="M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z";return i?m(n,i,o):o}},square:{n:1,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")}},diamond:{n:2,f:function(r,n,i){if(y(n))return f;var a=c(1.3*r,2);return m(n,i,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"Z")}},cross:{n:3,f:function(r,n,i){if(y(n))return f;var a=c(.4*r,2),o=c(1.2*r,2);return m(n,i,"M"+o+","+a+"H"+a+"V"+o+"H-"+a+"V"+a+"H-"+o+"V-"+a+"H-"+a+"V-"+o+"H"+a+"V-"+a+"H"+o+"Z")}},x:{n:4,f:function(r,n,i){if(y(n))return f;var a=c(.8*r/h,2),o="l"+a+","+a,s="l"+a+",-"+a,l="l-"+a+",-"+a,u="l-"+a+","+a;return m(n,i,"M0,"+a+o+s+l+s+l+u+l+u+o+u+o+"Z")}},"triangle-up":{n:5,f:function(r,n,i){if(y(n))return f;var a=c(2*r/p,2);return m(n,i,"M-"+a+","+c(r/2,2)+"H"+a+"L0,-"+c(r,2)+"Z")}},"triangle-down":{n:6,f:function(r,n,i){if(y(n))return f;var a=c(2*r/p,2);return m(n,i,"M-"+a+",-"+c(r/2,2)+"H"+a+"L0,"+c(r,2)+"Z")}},"triangle-left":{n:7,f:function(r,n,i){if(y(n))return f;var a=c(2*r/p,2);return m(n,i,"M"+c(r/2,2)+",-"+a+"V"+a+"L-"+c(r,2)+",0Z")}},"triangle-right":{n:8,f:function(r,n,i){if(y(n))return f;var a=c(2*r/p,2);return m(n,i,"M-"+c(r/2,2)+",-"+a+"V"+a+"L"+c(r,2)+",0Z")}},"triangle-ne":{n:9,f:function(r,n,i){if(y(n))return f;var a=c(.6*r,2),o=c(1.2*r,2);return m(n,i,"M-"+o+",-"+a+"H"+a+"V"+o+"Z")}},"triangle-se":{n:10,f:function(r,n,i){if(y(n))return f;var a=c(.6*r,2),o=c(1.2*r,2);return m(n,i,"M"+a+",-"+o+"V"+a+"H-"+o+"Z")}},"triangle-sw":{n:11,f:function(r,n,i){if(y(n))return f;var a=c(.6*r,2),o=c(1.2*r,2);return m(n,i,"M"+o+","+a+"H-"+a+"V-"+o+"Z")}},"triangle-nw":{n:12,f:function(r,n,i){if(y(n))return f;var a=c(.6*r,2),o=c(1.2*r,2);return m(n,i,"M-"+a+","+o+"V-"+a+"H"+o+"Z")}},pentagon:{n:13,f:function(r,n,i){if(y(n))return f;var a=c(.951*r,2),o=c(.588*r,2),s=c(-r,2),l=c(-.309*r,2);return m(n,i,"M"+a+","+l+"L"+o+","+c(.809*r,2)+"H-"+o+"L-"+a+","+l+"L0,"+s+"Z")}},hexagon:{n:14,f:function(r,n,i){if(y(n))return f;var a=c(r,2),o=c(r/2,2),s=c(r*p/2,2);return m(n,i,"M"+s+",-"+o+"V"+o+"L0,"+a+"L-"+s+","+o+"V-"+o+"L0,-"+a+"Z")}},hexagon2:{n:15,f:function(r,n,i){if(y(n))return f;var a=c(r,2),o=c(r/2,2),s=c(r*p/2,2);return m(n,i,"M-"+o+","+s+"H"+o+"L"+a+",0L"+o+",-"+s+"H-"+o+"L-"+a+",0Z")}},octagon:{n:16,f:function(r,n,i){if(y(n))return f;var a=c(.924*r,2),o=c(.383*r,2);return m(n,i,"M-"+o+",-"+a+"H"+o+"L"+a+",-"+o+"V"+o+"L"+o+","+a+"H-"+o+"L-"+a+","+o+"V-"+o+"Z")}},star:{n:17,f:function(r,n,i){if(y(n))return f;var a=1.4*r,o=c(.225*a,2),s=c(.951*a,2),l=c(.363*a,2),u=c(.588*a,2),h=c(-a,2),p=c(-.309*a,2),d=c(.118*a,2),v=c(.809*a,2);return m(n,i,"M"+o+","+p+"H"+s+"L"+l+","+d+"L"+u+","+v+"L0,"+c(.382*a,2)+"L-"+u+","+v+"L-"+l+","+d+"L-"+s+","+p+"H-"+o+"L0,"+h+"Z")}},hexagram:{n:18,f:function(r,n,i){if(y(n))return f;var a=c(.66*r,2),o=c(.38*r,2),s=c(.76*r,2);return m(n,i,"M-"+s+",0l-"+o+",-"+a+"h"+s+"l"+o+",-"+a+"l"+o+","+a+"h"+s+"l-"+o+","+a+"l"+o+","+a+"h-"+s+"l-"+o+","+a+"l-"+o+",-"+a+"h-"+s+"Z")}},"star-triangle-up":{n:19,f:function(r,n,i){if(y(n))return f;var a=c(r*p*.8,2),o=c(.8*r,2),s=c(1.6*r,2),l=c(4*r,2),u="A "+l+","+l+" 0 0 1 ";return m(n,i,"M-"+a+","+o+u+a+","+o+u+"0,-"+s+u+"-"+a+","+o+"Z")}},"star-triangle-down":{n:20,f:function(r,n,i){if(y(n))return f;var a=c(r*p*.8,2),o=c(.8*r,2),s=c(1.6*r,2),l=c(4*r,2),u="A "+l+","+l+" 0 0 1 ";return m(n,i,"M"+a+",-"+o+u+"-"+a+",-"+o+u+"0,"+s+u+a+",-"+o+"Z")}},"star-square":{n:21,f:function(r,n,i){if(y(n))return f;var a=c(1.1*r,2),o=c(2*r,2),s="A "+o+","+o+" 0 0 1 ";return m(n,i,"M-"+a+",-"+a+s+"-"+a+","+a+s+a+","+a+s+a+",-"+a+s+"-"+a+",-"+a+"Z")}},"star-diamond":{n:22,f:function(r,n,i){if(y(n))return f;var a=c(1.4*r,2),o=c(1.9*r,2),s="A "+o+","+o+" 0 0 1 ";return m(n,i,"M-"+a+",0"+s+"0,"+a+s+a+",0"+s+"0,-"+a+s+"-"+a+",0Z")}},"diamond-tall":{n:23,f:function(r,n,i){if(y(n))return f;var a=c(.7*r,2),o=c(1.4*r,2);return m(n,i,"M0,"+o+"L"+a+",0L0,-"+o+"L-"+a+",0Z")}},"diamond-wide":{n:24,f:function(r,n,i){if(y(n))return f;var a=c(1.4*r,2),o=c(.7*r,2);return m(n,i,"M0,"+o+"L"+a+",0L0,-"+o+"L-"+a+",0Z")}},hourglass:{n:25,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+","+a+"H-"+a+"L"+a+",-"+a+"H-"+a+"Z")},noDot:!0},bowtie:{n:26,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+","+a+"V-"+a+"L-"+a+","+a+"V-"+a+"Z")},noDot:!0},"circle-cross":{n:27,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(r,n,i){if(y(n))return f;var a=c(r,2),o=c(r/h,2);return m(n,i,"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(r,n,i){if(y(n))return f;var a=c(1.3*r,2);return m(n,i,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM0,-"+a+"V"+a+"M-"+a+",0H"+a)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(r,n,i){if(y(n))return f;var a=c(1.3*r,2),o=c(.65*r,2);return m(n,i,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM-"+o+",-"+o+"L"+o+","+o+"M-"+o+","+o+"L"+o+",-"+o)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(r,n,i){if(y(n))return f;var a=c(1.4*r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(r,n,i){if(y(n))return f;var a=c(1.2*r,2),o=c(.85*r,2);return m(n,i,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+o+","+o+"L-"+o+",-"+o+"M"+o+",-"+o+"L-"+o+","+o)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(r,n,i){if(y(n))return f;var a=c(r/2,2),o=c(r,2);return m(n,i,"M"+a+","+o+"V-"+o+"M"+(a-o)+",-"+o+"V"+o+"M"+o+","+a+"H-"+o+"M-"+o+","+(a-o)+"H"+o)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(r,n,i){if(y(n))return f;var a=c(1.2*r,2),o=c(1.6*r,2),s=c(.8*r,2);return m(n,i,"M-"+a+","+s+"L0,0M"+a+","+s+"L0,0M0,-"+o+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(r,n,i){if(y(n))return f;var a=c(1.2*r,2),o=c(1.6*r,2),s=c(.8*r,2);return m(n,i,"M-"+a+",-"+s+"L0,0M"+a+",-"+s+"L0,0M0,"+o+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(r,n,i){if(y(n))return f;var a=c(1.2*r,2),o=c(1.6*r,2),s=c(.8*r,2);return m(n,i,"M"+s+","+a+"L0,0M"+s+",-"+a+"L0,0M-"+o+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(r,n,i){if(y(n))return f;var a=c(1.2*r,2),o=c(1.6*r,2),s=c(.8*r,2);return m(n,i,"M-"+s+","+a+"L0,0M-"+s+",-"+a+"L0,0M"+o+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(r,n,i){if(y(n))return f;var a=c(1.4*r,2);return m(n,i,"M"+a+",0H-"+a)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(r,n,i){if(y(n))return f;var a=c(1.4*r,2);return m(n,i,"M0,"+a+"V-"+a)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M"+a+","+a+"L-"+a+",-"+a)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M0,0L-"+a+","+c(2*r,2)+"H"+a+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M0,0L-"+a+",-"+c(2*r,2)+"H"+a+"Z")},noDot:!0},"arrow-left":{n:47,f:function(r,n,i){if(y(n))return f;var a=c(2*r,2),o=c(r,2);return m(n,i,"M0,0L"+a+",-"+o+"V"+o+"Z")},noDot:!0},"arrow-right":{n:48,f:function(r,n,i){if(y(n))return f;var a=c(2*r,2),o=c(r,2);return m(n,i,"M0,0L-"+a+",-"+o+"V"+o+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M-"+a+",0H"+a+"M0,0L-"+a+","+c(2*r,2)+"H"+a+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(r,n,i){if(y(n))return f;var a=c(r,2);return m(n,i,"M-"+a+",0H"+a+"M0,0L-"+a+",-"+c(2*r,2)+"H"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(r,n,i){if(y(n))return f;var a=c(2*r,2),o=c(r,2);return m(n,i,"M0,-"+o+"V"+o+"M0,0L"+a+",-"+o+"V"+o+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(r,n,i){if(y(n))return f;var a=c(2*r,2),o=c(r,2);return m(n,i,"M0,-"+o+"V"+o+"M0,0L-"+a+",-"+o+"V"+o+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(r,n,i){if(y(n))return f;var a=d/2.5,o=2*r*v(a),s=2*r*g(a);return m(n,i,"M0,0L"+-o+","+s+"L"+o+","+s+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(r,n,i){if(y(n))return f;var a=d/4,o=2*r*v(a),s=2*r*g(a);return m(n,i,"M0,0L"+-o+","+s+"A "+2*r+","+2*r+" 0 0 1 "+o+","+s+"Z")},backoff:.4,noDot:!0}}},25673:function(r){"use strict";r.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(r,n,i){"use strict";var a=i(92770),o=i(73972),s=i(89298),l=i(71828),u=i(45827);function c(r,n,i,o){var c=n["error_"+o]||{},f=[];if(c.visible&&-1!==["linear","log"].indexOf(i.type)){for(var h=u(c),p=0;p<r.length;p++){var d=r[p],v=d.i;if(void 0===v)v=p;else if(null===v)continue;var g=d[o];if(a(i.c2l(g))){var y=h(g,v);if(a(y[0])&&a(y[1])){var m=d[o+"s"]=g-y[0],x=d[o+"h"]=g+y[1];f.push(m,x)}}}var b=i._id,_=n._extremes[b],w=s.findExtremes(i,f,l.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(w.min),_.max=_.max.concat(w.max)}}r.exports=function(r){for(var n=r.calcdata,i=0;i<n.length;i++){var a=n[i],l=a[0].trace;if(!0===l.visible&&o.traceIs(l,"errorBarsOK")){var u=s.getFromId(r,l.xaxis),f=s.getFromId(r,l.yaxis);c(a,l,u,"x"),c(a,l,f,"y")}}}},45827:function(r){"use strict";function n(r,n){return"percent"===r?function(r){return Math.abs(r*n/100)}:"constant"===r?function(){return Math.abs(n)}:"sqrt"===r?function(r){return Math.sqrt(Math.abs(r))}:void 0}r.exports=function(r){var i=r.type,a=r.symmetric;if("data"===i){var o=r.array||[];if(a)return function(r,n){var i=+o[n];return[i,i]};var s=r.arrayminus||[];return function(r,n){var i=+o[n],a=+s[n];return isNaN(i)&&isNaN(a)?[NaN,NaN]:[a||0,i||0]}}var l=n(i,r.value),u=n(i,r.valueminus);return a||void 0===r.valueminus?function(r){var n=l(r);return[n,n]}:function(r){return[u(r),l(r)]}}},97587:function(r,n,i){"use strict";var a=i(92770),o=i(73972),s=i(71828),l=i(44467),u=i(25673);r.exports=function(r,n,i,c){var f="error_"+c.axis,h=l.newContainer(n,f),p=r[f]||{};function d(r,n){return s.coerce(p,h,u,r,n)}if(!1!==d("visible",void 0!==p.array||void 0!==p.value||"sqrt"===p.type)){var v=d("type","array"in p?"data":"percent"),g=!0;"sqrt"!==v&&(g=d("symmetric",!(("data"===v?"arrayminus":"valueminus")in p))),"data"===v?(d("array"),d("traceref"),g||(d("arrayminus"),d("tracerefminus"))):"percent"!==v&&"constant"!==v||(d("value"),g||d("valueminus"));var y="copy_"+c.inherit+"style";c.inherit&&(n["error_"+c.inherit]||{}).visible&&d(y,!(p.color||a(p.thickness)||a(p.width))),c.inherit&&h[y]||(d("color",i),d("thickness"),d("width",o.traceIs(n,"gl3d")?0:4))}}},37369:function(r,n,i){"use strict";var a=i(71828),o=i(30962).overrideAll,s=i(25673),l={error_x:a.extendFlat({},s),error_y:a.extendFlat({},s)};delete l.error_x.copy_zstyle,delete l.error_y.copy_zstyle,delete l.error_y.copy_ystyle;var u={error_x:a.extendFlat({},s),error_y:a.extendFlat({},s),error_z:a.extendFlat({},s)};delete u.error_x.copy_ystyle,delete u.error_y.copy_ystyle,delete u.error_z.copy_ystyle,delete u.error_z.copy_zstyle,r.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:l,bar:l,histogram:l,scatter3d:o(u,"calc","nested"),scattergl:o(l,"calc","nested")}},supplyDefaults:i(97587),calc:i(84532),makeComputeError:i(45827),plot:i(19398),style:i(62662),hoverInfo:function(r,n,i){(n.error_y||{}).visible&&(i.yerr=r.yh-r.y,n.error_y.symmetric||(i.yerrneg=r.y-r.ys)),(n.error_x||{}).visible&&(i.xerr=r.xh-r.x,n.error_x.symmetric||(i.xerrneg=r.x-r.xs))}}},19398:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(91424),l=i(34098);r.exports=function(r,n,i,u){var c=i.xaxis,f=i.yaxis,h=u&&u.duration>0,p=r._context.staticPlot;n.each(function(n){var d,v=n[0].trace,g=v.error_x||{},y=v.error_y||{};v.ids&&(d=function(r){return r.id});var m=l.hasMarkers(v)&&v.marker.maxdisplayed>0;y.visible||g.visible||(n=[]);var x=a.select(this).selectAll("g.errorbar").data(n,d);if(x.exit().remove(),n.length){g.visible||x.selectAll("path.xerror").remove(),y.visible||x.selectAll("path.yerror").remove(),x.style("opacity",1);var b=x.enter().append("g").classed("errorbar",!0);h&&b.style("opacity",0).transition().duration(u.duration).style("opacity",1),s.setClipUrl(x,i.layerClipId,r),x.each(function(r){var n=a.select(this),i=(s={x:c.c2p(r.x),y:f.c2p(r.y)},void 0!==r.yh&&(s.yh=f.c2p(r.yh),s.ys=f.c2p(r.ys),o(s.ys)||(s.noYS=!0,s.ys=f.c2p(r.ys,!0))),void 0!==r.xh&&(s.xh=c.c2p(r.xh),s.xs=c.c2p(r.xs),o(s.xs)||(s.noXS=!0,s.xs=c.c2p(r.xs,!0))),s);if(!m||r.vis){var s,l,d=n.select("path.yerror");if(y.visible&&o(i.x)&&o(i.yh)&&o(i.ys)){var v=y.width;l="M"+(i.x-v)+","+i.yh+"h"+2*v+"m-"+v+",0V"+i.ys,i.noYS||(l+="m-"+v+",0h"+2*v),d.size()?h&&(d=d.transition().duration(u.duration).ease(u.easing)):d=n.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("yerror",!0),d.attr("d",l)}else d.remove();var x=n.select("path.xerror");if(g.visible&&o(i.y)&&o(i.xh)&&o(i.xs)){var b=(g.copy_ystyle?y:g).width;l="M"+i.xh+","+(i.y-b)+"v"+2*b+"m0,-"+b+"H"+i.xs,i.noXS||(l+="m0,-"+b+"v"+2*b),x.size()?h&&(x=x.transition().duration(u.duration).ease(u.easing)):x=n.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("xerror",!0),x.attr("d",l)}else x.remove()}})}})}},62662:function(r,n,i){"use strict";var a=i(39898),o=i(7901);r.exports=function(r){r.each(function(r){var n=r[0].trace,i=n.error_y||{},s=n.error_x||{},l=a.select(this);l.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(o.stroke,i.color),s.copy_ystyle&&(s=i),l.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(o.stroke,s.color)})}},77914:function(r,n,i){"use strict";var a=i(41940),o=i(528).hoverlabel,s=i(1426).extendFlat;r.exports={hoverlabel:{bgcolor:s({},o.bgcolor,{arrayOk:!0}),bordercolor:s({},o.bordercolor,{arrayOk:!0}),font:a({arrayOk:!0,editType:"none"}),align:s({},o.align,{arrayOk:!0}),namelength:s({},o.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(r,n,i){"use strict";var a=i(71828),o=i(73972);function s(r,n,i,o){o=o||a.identity,Array.isArray(r)&&(n[0][i]=o(r))}r.exports=function(r){for(var n=r.calcdata,i=r._fullLayout,l=0;l<n.length;l++){var u=n[l],c=u[0].trace;if(!o.traceIs(c,"pie-like")){var f=o.traceIs(c,"2dMap")?s:a.fillArray;f(c.hoverinfo,u,"hi",function(r){return function(n){return a.coerceHoverinfo({hoverinfo:n},{_module:r._module},i)}}(c)),c.hovertemplate&&f(c.hovertemplate,u,"ht"),c.hoverlabel&&(f(c.hoverlabel.bgcolor,u,"hbg"),f(c.hoverlabel.bordercolor,u,"hbc"),f(c.hoverlabel.font.size,u,"hts"),f(c.hoverlabel.font.color,u,"htc"),f(c.hoverlabel.font.family,u,"htf"),f(c.hoverlabel.namelength,u,"hnl"),f(c.hoverlabel.align,u,"hta"))}}}},75914:function(r,n,i){"use strict";var a=i(73972),o=i(88335).hover;r.exports=function(r,n,i){var s=a.getComponentMethod("annotations","onClick")(r,r._hoverdata);function l(){r.emit("plotly_click",{points:r._hoverdata,event:n})}void 0!==i&&o(r,n,i,!0),r._hoverdata&&n&&n.target&&(s&&s.then?s.then(l):l(),n.stopImmediatePropagation&&n.stopImmediatePropagation())}},26675:function(r){"use strict";r.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(r,n,i){"use strict";var a=i(71828),o=i(77914),s=i(38048);r.exports=function(r,n,i,l){var u=a.extendFlat({},l.hoverlabel);n.hovertemplate&&(u.namelength=-1),s(r,n,function(i,s){return a.coerce(r,n,o,i,s)},u)}},23469:function(r,n,i){"use strict";var a=i(71828);n.getSubplot=function(r){return r.subplot||r.xaxis+r.yaxis||r.geo},n.isTraceInSubplots=function(r,i){if("splom"===r.type){for(var a=r.xaxes||[],o=r.yaxes||[],s=0;s<a.length;s++)for(var l=0;l<o.length;l++)if(-1!==i.indexOf(a[s]+o[l]))return!0;return!1}return -1!==i.indexOf(n.getSubplot(r))},n.flat=function(r,n){for(var i=Array(r.length),a=0;a<r.length;a++)i[a]=n;return i},n.p2c=function(r,n){for(var i=Array(r.length),a=0;a<r.length;a++)i[a]=r[a].p2c(n);return i},n.getDistanceFunction=function(r,i,a,o){return"closest"===r?o||n.quadrature(i,a):"x"===r.charAt(0)?i:a},n.getClosest=function(r,n,i){if(!1!==i.index)i.index>=0&&i.index<r.length?i.distance=0:i.index=!1;else for(var a=0;a<r.length;a++){var o=n(r[a]);o<=i.distance&&(i.index=a,i.distance=o)}return i},n.inbox=function(r,n,i){return r*n<0||0===r?i:1/0},n.quadrature=function(r,n){return function(i){var a=r(i),o=n(i);return Math.sqrt(a*a+o*o)}},n.makeEventData=function(r,i,a){var o="index"in r?r.index:r.pointNumber,s={data:i._input,fullData:i,curveNumber:i.index,pointNumber:o};if(i._indexToPoints){var l=i._indexToPoints[o];1===l.length?s.pointIndex=l[0]:s.pointIndices=l}else s.pointIndex=o;return i._module.eventData?s=i._module.eventData(s,r,i,a,o):("xVal"in r?s.x=r.xVal:"x"in r&&(s.x=r.x),"yVal"in r?s.y=r.yVal:"y"in r&&(s.y=r.y),r.xa&&(s.xaxis=r.xa),r.ya&&(s.yaxis=r.ya),void 0!==r.zLabelVal&&(s.z=r.zLabelVal)),n.appendArrayPointValue(s,i,o),s},n.appendArrayPointValue=function(r,n,i){var l=n._arrayAttrs;if(l)for(var u=0;u<l.length;u++){var c=l[u],f=o[c]||c;if(void 0===r[f]){var h=s(a.nestedProperty(n,c).get(),i);void 0!==h&&(r[f]=h)}}},n.appendArrayMultiPointValues=function(r,n,i){var l=n._arrayAttrs;if(l)for(var u=0;u<l.length;u++){var c=l[u],f=o[c]||c;if(void 0===r[f]){for(var h=a.nestedProperty(n,c).get(),p=Array(i.length),d=0;d<i.length;d++)p[d]=s(h,i[d]);r[f]=p}}};var o={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function s(r,n){return Array.isArray(n)?Array.isArray(r)&&Array.isArray(r[n[0]])?r[n[0]][n[1]]:void 0:r[n]}var l={x:!0,y:!0},u={"x unified":!0,"y unified":!0};n.isUnifiedHover=function(r){return"string"==typeof r&&!!u[r]},n.isXYhover=function(r){return"string"==typeof r&&!!l[r]}},88335:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(84267),l=i(71828),u=l.strTranslate,c=l.strRotate,f=i(11086),h=i(63893),p=i(39918),d=i(91424),v=i(7901),g=i(28569),y=i(89298),m=i(73972),x=i(23469),b=i(26675),_=i(99017),w=i(43969),T=b.YANGLE,k=Math.PI*T/180,A=1/Math.sin(k),M=Math.cos(k),S=Math.sin(k),E=b.HOVERARROWSIZE,L=b.HOVERTEXTPAD,C={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function P(r){return[r.trace.index,r.index,r.x0,r.y0,r.name,r.attr,r.xa?r.xa._id:"",r.ya?r.ya._id:""].join(",")}n.hover=function(r,n,i,s){r=l.getGraphDiv(r);var u=n.target;l.throttle(r._fullLayout._uid+b.HOVERID,b.HOVERMINTIME,function(){!function(r,n,i,s,u){i||(i="xy");var c=Array.isArray(i)?i:[i],h=r._fullLayout,d=h._plots||[],b=d[i],_=h._has("cartesian");if(b){var w=b.overlays.map(function(r){return r.id});c=c.concat(w)}for(var T=c.length,k=Array(T),M=Array(T),S=!1,L=0;L<T;L++){var I=c[L];if(d[I])S=!0,k[L]=d[I].xaxis,M[L]=d[I].yaxis;else{if(!h[I]||!h[I]._subplot)return void l.warn("Unrecognized subplot: "+I);var z=h[I]._subplot;k[L]=z.xaxis,M[L]=z.yaxis}}var j=n.hovermode||h.hovermode;if(j&&!S&&(j="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(j)||!r.calcdata||r.querySelector(".zoombox")||r._dragging)return g.unhoverRaw(r,n);var q=h.hoverdistance;-1===q&&(q=1/0);var G=h.spikedistance;-1===G&&(G=1/0);var Z,Y,W,X,J,K,$,Q,tt,te,tr,tn,ti,ta=[],to=[],ts={hLinePoint:null,vLinePoint:null},tl=!1;if(Array.isArray(n))for(j="array",W=0;W<n.length;W++)(J=r.calcdata[n[W].curveNumber||0])&&(K=J[0].trace,"skip"!==J[0].trace.hoverinfo&&(to.push(J),"h"===K.orientation&&(tl=!0)));else{for(X=0;X<r.calcdata.length;X++)"skip"!==(K=(J=r.calcdata[X])[0].trace).hoverinfo&&x.isTraceInSubplots(K,c)&&(to.push(J),"h"===K.orientation&&(tl=!0));if(u){if(!1===f.triggerHandler(r,"plotly_beforehover",n))return;var tu,tc,tf=u.getBoundingClientRect();tu=n.clientX-tf.left,tc=n.clientY-tf.top,h._calcInverseTransform(r);var th=l.apply3DTransform(h._invTransform)(tu,tc);if(tu=th[0],tc=th[1],tu<0||tu>k[0]._length||tc<0||tc>M[0]._length)return g.unhoverRaw(r,n)}else tu="xpx"in n?n.xpx:k[0]._length/2,tc="ypx"in n?n.ypx:M[0]._length/2;if(n.pointerX=tu+k[0]._offset,n.pointerY=tc+M[0]._offset,Z="xval"in n?x.flat(c,n.xval):x.p2c(k,tu),Y="yval"in n?x.flat(c,n.yval):x.p2c(M,tc),!o(Z[0])||!o(Y[0]))return l.warn("Fx.hover failed",n,r),g.unhoverRaw(r,n)}var tp=1/0;function td(r,i){for(X=0;X<to.length;X++)if((J=to[X])&&J[0]&&J[0].trace&&!0===(K=J[0].trace).visible&&0!==K._length&&-1===["carpet","contourcarpet"].indexOf(K._module.name)){if("splom"===K.type?$=c[Q=0]:($=x.getSubplot(K),Q=c.indexOf($)),tt=j,x.isUnifiedHover(tt)&&(tt=tt.charAt(0)),tn={cd:J,trace:K,xa:k[Q],ya:M[Q],maxHoverDistance:q,maxSpikeDistance:G,index:!1,distance:Math.min(tp,q),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:v.defaultLine,name:K.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},h[$]&&(tn.subplot=h[$]._subplot),h._splomScenes&&h._splomScenes[K.uid]&&(tn.scene=h._splomScenes[K.uid]),ti=ta.length,"array"===tt){var a=n[X];"pointNumber"in a?(tn.index=a.pointNumber,tt="closest"):(tt="","xval"in a&&(te=a.xval,tt="x"),"yval"in a&&(tr=a.yval,tt=tt?"closest":"y"))}else void 0!==r&&void 0!==i?(te=r,tr=i):(te=Z[Q],tr=Y[Q]);if(0!==q){if(K._module&&K._module.hoverPoints){var s=K._module.hoverPoints(tn,te,tr,tt,{finiteRange:!0,hoverLayer:h._hoverlayer});if(s)for(var u,f=0;f<s.length;f++)o((u=s[f]).x0)&&o(u.y0)&&ta.push(function(r,n){var i=r.index,a=r.trace||{},s=r.cd[0],u=r.cd[i]||{};function c(r){return r||o(r)&&0===r}var f=Array.isArray(i)?function(r,n){var o=l.castOption(s,i,r);return c(o)?o:l.extractOption({},a,"",n)}:function(r,n){return l.extractOption(u,a,r,n)};function h(n,i,a){var o=f(i,a);c(o)&&(r[n]=o)}if(h("hoverinfo","hi","hoverinfo"),h("bgcolor","hbg","hoverlabel.bgcolor"),h("borderColor","hbc","hoverlabel.bordercolor"),h("fontFamily","htf","hoverlabel.font.family"),h("fontSize","hts","hoverlabel.font.size"),h("fontColor","htc","hoverlabel.font.color"),h("nameLength","hnl","hoverlabel.namelength"),h("textAlign","hta","hoverlabel.align"),r.posref="y"===n||"closest"===n&&"h"===a.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=l.constrain(r.x0,0,r.xa._length),r.x1=l.constrain(r.x1,0,r.xa._length),r.y0=l.constrain(r.y0,0,r.ya._length),r.y1=l.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:y.hoverLabelText(r.xa,r.xLabelVal,a.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal)),void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:y.hoverLabelText(r.ya,r.yLabelVal,a.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal)),void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal)),!(isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0)){var p=y.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text;void 0!==r.xerrneg?r.xLabel+=" +"+p+" / -"+y.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+=" \xb1 "+p,"x"===n&&(r.distance+=1)}if(!(isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0)){var d=y.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text;void 0!==r.yerrneg?r.yLabel+=" +"+d+" / -"+y.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+=" \xb1 "+d,"y"===n&&(r.distance+=1)}var v=r.hoverinfo||r.trace.hoverinfo;return v&&"all"!==v&&(-1===(v=Array.isArray(v)?v:v.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===v.indexOf("y")&&(r.yLabel=void 0),-1===v.indexOf("z")&&(r.zLabel=void 0),-1===v.indexOf("text")&&(r.text=void 0),-1===v.indexOf("name")&&(r.name=void 0)),r}(u,j))}else l.log("Unrecognized trace type in hover:",K)}if("closest"===j&&ta.length>ti&&(ta.splice(0,ti),tp=ta[0].distance),_&&0!==G&&0===ta.length){tn.distance=G,tn.index=!1;var p=K._module.hoverPoints(tn,te,tr,"closest",{hoverLayer:h._hoverlayer});if(p&&(p=p.filter(function(r){return r.spikeDistance<=G})),p&&p.length){var d,g=p.filter(function(r){return r.xa.showspikes&&"hovered data"!==r.xa.spikesnap});if(g.length){var m=g[0];o(m.x0)&&o(m.y0)&&(d=tg(m),(!ts.vLinePoint||ts.vLinePoint.spikeDistance>d.spikeDistance)&&(ts.vLinePoint=d))}var b=p.filter(function(r){return r.ya.showspikes&&"hovered data"!==r.ya.spikesnap});if(b.length){var w=b[0];o(w.x0)&&o(w.y0)&&(d=tg(w),(!ts.hLinePoint||ts.hLinePoint.spikeDistance>d.spikeDistance)&&(ts.hLinePoint=d))}}}}}function tv(r,n,i){for(var a,o=null,s=1/0,l=0;l<r.length;l++)a=r[l].spikeDistance,i&&0===l&&(a=-1/0),a<=s&&a<=n&&(o=r[l],s=a);return o}function tg(r){return r?{xa:r.xa,ya:r.ya,x:void 0!==r.xSpike?r.xSpike:(r.x0+r.x1)/2,y:void 0!==r.ySpike?r.ySpike:(r.y0+r.y1)/2,distance:r.distance,spikeDistance:r.spikeDistance,curveNumber:r.trace.index,color:r.color,pointNumber:r.index}:null}td();var ty={fullLayout:h,container:h._hoverlayer,event:n},tm=r._spikepoints,tx={vLinePoint:ts.vLinePoint,hLinePoint:ts.hLinePoint};r._spikepoints=tx;var tb=function(){ta.sort(function(r,n){return r.distance-n.distance}),ta=function(r,n){for(var i=n.charAt(0),a=[],o=[],s=[],l=0;l<r.length;l++){var u=r[l];m.traceIs(u.trace,"bar-like")||m.traceIs(u.trace,"box-violin")?s.push(u):u.trace[i+"period"]?o.push(u):a.push(u)}return a.concat(o).concat(s)}(ta,j)};tb();var t_=j.charAt(0),tw=("x"===t_||"y"===t_)&&ta[0]&&O[ta[0].trace.type];if(_&&0!==G&&0!==ta.length){var tT=tv(ta.filter(function(r){return r.ya.showspikes}),G,tw);ts.hLinePoint=tg(tT);var tk=tv(ta.filter(function(r){return r.xa.showspikes}),G,tw);ts.vLinePoint=tg(tk)}if(0===ta.length)return g.unhoverRaw(r,n),!_||null===ts.hLinePoint&&null===ts.vLinePoint||N(tm)&&B(r,ts,ty);if(_&&N(tm)&&B(r,ts,ty),x.isXYhover(tt)&&0!==ta[0].length&&"splom"!==ta[0].trace.type){var tA=ta[0],tM=(ta=C[tA.trace.type]?ta.filter(function(r){return r.trace.index===tA.trace.index}):[tA]).length;td(U("x",tA,h),U("y",tA,h));var tS,tE=[],tL={},tC=0,tO=function(r){var n=C[r.trace.type]?P(r):r.trace.index;if(tL[n]){var i=tL[n]-1,a=tE[i];i>0&&Math.abs(r.distance)<Math.abs(a.distance)&&(tE[i]=r)}else tC++,tL[n]=tC,tE.push(r)};for(tS=0;tS<tM;tS++)tO(ta[tS]);for(tS=ta.length-1;tS>tM-1;tS--)tO(ta[tS]);ta=tE,tb()}var tP=r._hoverdata,tI=[],tD=V(r),tz=H(r);for(W=0;W<ta.length;W++){var tR=ta[W],tF=x.makeEventData(tR,tR.trace,tR.cd);if(!1!==tR.hovertemplate){var tB=!1;tR.cd[tR.index]&&tR.cd[tR.index].ht&&(tB=tR.cd[tR.index].ht),tR.hovertemplate=tB||tR.trace.hovertemplate||!1}if(tR.xa&&tR.ya){var tN=tR.x0+tR.xa._offset,tj=tR.x1+tR.xa._offset,tU=tR.y0+tR.ya._offset,tV=tR.y1+tR.ya._offset,tH=Math.min(tN,tj),tq=Math.max(tN,tj),tG=Math.min(tU,tV),tZ=Math.max(tU,tV);tF.bbox={x0:tH+tz,x1:tq+tz,y0:tG+tD,y1:tZ+tD}}tR.eventData=[tF],tI.push(tF)}r._hoverdata=tI;var tY="y"===j&&(to.length>1||ta.length>1)||"closest"===j&&tl&&ta.length>1,tW=v.combine(h.plot_bgcolor||v.background,h.paper_bgcolor),tX=D(ta,{gd:r,hovermode:j,rotateLabels:tY,bgColor:tW,container:h._hoverlayer,outerContainer:h._paper.node(),commonLabelOpts:h.hoverlabel,hoverdistance:h.hoverdistance}),tJ=tX.hoverLabels;if(x.isUnifiedHover(j)||(function(r,n,i,a){var o,s,l,u,c,f,h,p=n?"xa":"ya",d=n?"ya":"xa",v=0,g=1,y=r.size(),m=Array(y),x=0,b=a.minX,_=a.maxX,w=a.minY,T=a.maxY,k=function(r){return r*i._invScaleX},M=function(r){return r*i._invScaleY};function S(r){var n=r[0],i=r[r.length-1];if(s=n.pmin-n.pos-n.dp+n.size,l=i.pos+i.dp+i.size-n.pmax,s>.01){for(c=r.length-1;c>=0;c--)r[c].dp+=s;o=!1}if(!(l<.01)){if(s<-.01){for(c=r.length-1;c>=0;c--)r[c].dp-=l;o=!1}if(o){var a=0;for(u=0;u<r.length;u++)(f=r[u]).pos+f.dp+f.size>n.pmax&&a++;for(u=r.length-1;u>=0&&!(a<=0);u--)(f=r[u]).pos>n.pmax-1&&(f.del=!0,a--);for(u=0;u<r.length&&!(a<=0);u++)if((f=r[u]).pos<n.pmin+1)for(f.del=!0,a--,l=2*f.size,c=r.length-1;c>=0;c--)r[c].dp-=l;for(u=r.length-1;u>=0&&!(a<=0);u--)(f=r[u]).pos+f.dp+f.size>n.pmax&&(f.del=!0,a--)}}}for(r.each(function(r){var a=r[p],o=r[d],s="x"===a._id.charAt(0),l=a.range;0===x&&l&&l[0]>l[1]!==s&&(g=-1);var u=0,c=s?i.width:i.height;if("x"===i.hovermode||"y"===i.hovermode){var f,h,v=R(r,n),y=r.anchor,S="end"===y?-1:1;if("middle"===y)h=(f=r.crossPos+(s?M(v.y-r.by/2):k(r.bx/2+r.tx2width/2)))+(s?M(r.by):k(r.bx));else if(s)h=(f=r.crossPos+M(E+v.y)-M(r.by/2-E))+M(r.by);else{var L=k(S*E+v.x),C=L+k(S*r.bx);f=r.crossPos+Math.min(L,C),h=r.crossPos+Math.max(L,C)}s?void 0!==w&&void 0!==T&&Math.min(h,T)-Math.max(f,w)>1&&("left"===o.side?(u=o._mainLinePosition,c=i.width):c=o._mainLinePosition):void 0!==b&&void 0!==_&&Math.min(h,_)-Math.max(f,b)>1&&("top"===o.side?(u=o._mainLinePosition,c=i.height):c=o._mainLinePosition)}m[x++]=[{datum:r,traceIndex:r.trace.index,dp:0,pos:r.pos,posref:r.posref,size:r.by*(s?A:1)/2,pmin:u,pmax:c}]}),m.sort(function(r,n){return r[0].posref-n[0].posref||g*(n[0].traceIndex-r[0].traceIndex)});!o&&v<=y;){for(v++,o=!0,u=0;u<m.length-1;){var L=m[u],C=m[u+1],O=L[L.length-1],P=C[0];if((s=O.pos+O.dp+O.size-P.pos-P.dp+P.size)>.01&&O.pmin===P.pmin&&O.pmax===P.pmax){for(c=C.length-1;c>=0;c--)C[c].dp+=s;for(L.push.apply(L,C),m.splice(u+1,1),h=0,c=L.length-1;c>=0;c--)h+=L[c].dp;for(l=h/L.length,c=L.length-1;c>=0;c--)L[c].dp-=l;o=!1}else u++}m.forEach(S)}for(u=m.length-1;u>=0;u--){var I=m[u];for(c=I.length-1;c>=0;c--){var D=I[c],z=D.datum;z.offset=D.dp,z.del=D.del}}}(tJ,tY,h,tX.commonLabelBoundingBox),F(tJ,tY,h._invScaleX,h._invScaleY)),u&&u.tagName){var tK=m.getComponentMethod("annotations","hasClickToShow")(r,tI);p(a.select(u),tK?"pointer":"")}u&&!s&&function(r,n,i){if(!i||i.length!==r._hoverdata.length)return!0;for(var a=i.length-1;a>=0;a--){var o=i[a],s=r._hoverdata[a];if(o.curveNumber!==s.curveNumber||String(o.pointNumber)!==String(s.pointNumber)||String(o.pointNumbers)!==String(s.pointNumbers))return!0}return!1}(r,0,tP)&&(tP&&r.emit("plotly_unhover",{event:n,points:tP}),r.emit("plotly_hover",{event:n,points:r._hoverdata,xaxes:k,yaxes:M,xvals:Z,yvals:Y}))}(r,n,i,s,u)})},n.loneHover=function(r,n){var i=!0;Array.isArray(r)||(i=!1,r=[r]);var o=n.gd,s=V(o),l=H(o),u=D(r.map(function(r){var i=r._x0||r.x0||r.x||0,a=r._x1||r.x1||r.x||0,u=r._y0||r.y0||r.y||0,c=r._y1||r.y1||r.y||0,f=r.eventData;if(f){var h=Math.min(i,a),p=Math.max(i,a),d=Math.min(u,c),g=Math.max(u,c),y=r.trace;if(m.traceIs(y,"gl3d")){var x=o._fullLayout[y.scene]._scene.container,b=x.offsetLeft,_=x.offsetTop;h+=b,p+=b,d+=_,g+=_}f.bbox={x0:h+l,x1:p+l,y0:d+s,y1:g+s},n.inOut_bbox&&n.inOut_bbox.push(f.bbox)}else f=!1;return{color:r.color||v.defaultLine,x0:r.x0||r.x||0,x1:r.x1||r.x||0,y0:r.y0||r.y||0,y1:r.y1||r.y||0,xLabel:r.xLabel,yLabel:r.yLabel,zLabel:r.zLabel,text:r.text,name:r.name,idealAlign:r.idealAlign,borderColor:r.borderColor,fontFamily:r.fontFamily,fontSize:r.fontSize,fontColor:r.fontColor,nameLength:r.nameLength,textAlign:r.textAlign,trace:r.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:r.hovertemplate||!1,hovertemplateLabels:r.hovertemplateLabels||!1,eventData:f}}),{gd:o,hovermode:"closest",rotateLabels:!1,bgColor:n.bgColor||v.background,container:a.select(n.container),outerContainer:n.outerContainer||n.container}).hoverLabels,c=0,f=0;return u.sort(function(r,n){return r.y0-n.y0}).each(function(r,i){var a=r.y0-r.by/2;r.offset=a-5<c?c-a+5:0,c=a+r.by+r.offset,i===n.anchorIndex&&(f=r.offset)}).each(function(r){r.offset-=f}),F(u,!1,o._fullLayout._invScaleX,o._fullLayout._invScaleY),i?u:u.node()};var I=/<extra>([\s\S]*)<\/extra>/;function D(r,n){var i=n.gd,o=i._fullLayout,s=n.hovermode,f=n.rotateLabels,p=n.bgColor,g=n.container,y=n.outerContainer,k=n.commonLabelOpts||{};if(0===r.length)return[[]];var A=n.fontFamily||b.HOVERFONT,M=n.fontSize||b.HOVERFONTSIZE,S=r[0],C=S.xa,O=S.ya,I=s.charAt(0),D=I+"Label",R=S[D];if(void 0===R&&"multicategory"===C.type)for(var F=0;F<r.length&&void 0===(R=r[F][D]);F++);var B=q(i,y),N=B.top,j=B.width,U=B.height,V=void 0!==R&&S.distance<=n.hoverdistance&&("x"===s||"y"===s);if(V){var H,G,Z=!0;for(H=0;H<r.length;H++)if(Z&&void 0===r[H].zLabel&&(Z=!1),G=r[H].hoverinfo||r[H].trace.hoverinfo){var Y=Array.isArray(G)?G:G.split("+");if(-1===Y.indexOf("all")&&-1===Y.indexOf(s)){V=!1;break}}Z&&(V=!1)}var W=g.selectAll("g.axistext").data(V?[0]:[]);W.enter().append("g").classed("axistext",!0),W.exit().remove();var X={minX:0,maxX:0,minY:0,maxY:0};if(W.each(function(){var r=a.select(this),n=l.ensureSingle(r,"path","",function(r){r.style({"stroke-width":"1px"})}),c=l.ensureSingle(r,"text","",function(r){r.attr("data-notex",1)}),f=k.bgcolor||v.defaultLine,p=k.bordercolor||v.contrast(f),g=v.contrast(f),y={family:k.font.family||A,size:k.font.size||M,color:k.font.color||g};n.style({fill:f,stroke:p}),c.text(R).call(d.font,y).call(h.positionText,0,0).call(h.convertToTspans,i),r.attr("transform","");var m,x,b=q(i,c.node());if("x"===s){var _="top"===C.side?"-":"";c.attr("text-anchor","middle").call(h.positionText,0,"top"===C.side?N-b.bottom-E-L:N-b.top+E+L),m=C._offset+(S.x0+S.x1)/2,x=O._offset+("top"===C.side?0:O._length);var w=b.width/2+L;m<w?(m=w,n.attr("d","M-"+(w-E)+",0L-"+(w-2*E)+","+_+E+"H"+w+"v"+_+(2*L+b.height)+"H-"+w+"V"+_+E+"Z")):m>o.width-w?(m=o.width-w,n.attr("d","M"+(w-E)+",0L"+w+","+_+E+"v"+_+(2*L+b.height)+"H-"+w+"V"+_+E+"H"+(w-2*E)+"Z")):n.attr("d","M0,0L"+E+","+_+E+"H"+w+"v"+_+(2*L+b.height)+"H-"+w+"V"+_+E+"H-"+E+"Z"),X.minX=m-w,X.maxX=m+w,"top"===C.side?(X.minY=x-(2*L+b.height),X.maxY=x-L):(X.minY=x+L,X.maxY=x+(2*L+b.height))}else{"right"===O.side?(T="start",P=1,I="",m=C._offset+C._length):(T="end",P=-1,I="-",m=C._offset),x=O._offset+(S.y0+S.y1)/2,c.attr("text-anchor",T),n.attr("d","M0,0L"+I+E+","+E+"V"+(L+b.height/2)+"h"+I+(2*L+b.width)+"V-"+(L+b.height/2)+"H"+I+E+"V-"+E+"Z"),X.minY=x-(L+b.height/2),X.maxY=x+(L+b.height/2),"right"===O.side?(X.minX=m+E,X.maxX=m+E+(2*L+b.width)):(X.minX=m-E-(2*L+b.width),X.maxX=m-E);var T,P,I,D,z=b.height/2,F=N-b.top-z,B="clip"+o._uid+"commonlabel"+O._id;if(m<b.width+2*L+E){D="M-"+(E+L)+"-"+z+"h-"+(b.width-L)+"V"+z+"h"+(b.width-L)+"Z";var j=b.width-m+L;h.positionText(c,j,F),"end"===T&&c.selectAll("tspan").each(function(){var r=a.select(this),n=d.tester.append("text").text(r.text()).call(d.font,y),o=q(i,n.node());Math.round(o.width)<Math.round(b.width)&&r.attr("x",j-o.width),n.remove()})}else h.positionText(c,P*(L+E),F),D=null;var U=o._topclips.selectAll("#"+B).data(D?[0]:[]);U.enter().append("clipPath").attr("id",B).append("path"),U.exit().remove(),U.select("path").attr("d",D),d.setClipUrl(c,D?B:null,i)}r.attr("transform",u(m,x))}),x.isUnifiedHover(s)){g.selectAll("g.hovertext").remove();var J=r.filter(function(r){return"none"!==r.hoverinfo});if(0===J.length)return[];var K=o.hoverlabel,$=K.font,Q={showlegend:!0,legend:{title:{text:R,font:$},font:$,bgcolor:K.bgcolor,bordercolor:K.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:o.legend?o.legend.traceorder:void 0,orientation:"v"}},tt={font:$};_(Q,tt,i._fullData);var te=tt.legend;te.entries=[];for(var tr=0;tr<J.length;tr++){var tn=J[tr];if("none"!==tn.hoverinfo){var ti=z(tn,!0,s,o,R),ta=ti[0],to=ti[1];tn.name=to,tn.text=""!==to?to+" : "+ta:ta;var ts=tn.cd[tn.index];ts&&(ts.mc&&(tn.mc=ts.mc),ts.mcc&&(tn.mc=ts.mcc),ts.mlc&&(tn.mlc=ts.mlc),ts.mlcc&&(tn.mlc=ts.mlcc),ts.mlw&&(tn.mlw=ts.mlw),ts.mrc&&(tn.mrc=ts.mrc),ts.dir&&(tn.dir=ts.dir)),tn._distinct=!0,te.entries.push([tn])}}te.entries.sort(function(r,n){return r[0].trace.index-n[0].trace.index}),te.layer=g,te._inHover=!0,te._groupTitleFont=K.grouptitlefont,w(i,te);var tl,tu,tc,tf,th=g.select("g.legend"),tp=q(i,th.node()),td=tp.width+2*L,tv=tp.height+2*L,tg=J[0],ty=(tg.x0+tg.x1)/2,tm=(tg.y0+tg.y1)/2,tx=!(m.traceIs(tg.trace,"bar-like")||m.traceIs(tg.trace,"box-violin"));"y"===I?tx?(tu=tm-L,tl=tm+L):(tu=Math.min.apply(null,J.map(function(r){return Math.min(r.y0,r.y1)})),tl=Math.max.apply(null,J.map(function(r){return Math.max(r.y0,r.y1)}))):tu=tl=l.mean(J.map(function(r){return(r.y0+r.y1)/2}))-tv/2,"x"===I?tx?(tc=ty+L,tf=ty-L):(tc=Math.max.apply(null,J.map(function(r){return Math.max(r.x0,r.x1)})),tf=Math.min.apply(null,J.map(function(r){return Math.min(r.x0,r.x1)}))):tc=tf=l.mean(J.map(function(r){return(r.x0+r.x1)/2}))-td/2;var tb,t_,tw=C._offset,tT=O._offset;return tf+=tw-td,tu+=tT-tv,tb=((tc+=tw)+td<j&&tc>=0?tc:tf+td<j&&tf>=0?tf:tw+td<j?tw:tc-ty<ty-tf+td?j-td:0)+L,t_=((tl+=tT)+tv<U&&tl>=0?tl:tu+tv<U&&tu>=0?tu:tT+tv<U?tT:tl-tm<tm-tu+tv?U-tv:0)+L,th.attr("transform",u(tb-1,t_-1)),th}var tk=g.selectAll("g.hovertext").data(r,function(r){return P(r)});return tk.enter().append("g").classed("hovertext",!0).each(function(){var r=a.select(this);r.append("rect").call(v.fill,v.addOpacity(p,.8)),r.append("text").classed("name",!0),r.append("path").style("stroke-width","1px"),r.append("text").classed("nums",!0).call(d.font,A,M)}),tk.exit().remove(),tk.each(function(r){var n=a.select(this).attr("transform",""),l=r.color;Array.isArray(l)&&(l=l[r.eventData[0].pointNumber]);var g=r.bgcolor||l,y=v.combine(v.opacity(g)?g:v.defaultLine,p),m=v.combine(v.opacity(l)?l:v.defaultLine,p),x=r.borderColor||v.contrast(y),b=z(r,V,s,o,R,n),_=b[0],w=b[1],k=n.select("text.nums").call(d.font,r.fontFamily||A,r.fontSize||M,r.fontColor||x).text(_).attr("data-notex",1).call(h.positionText,0,0).call(h.convertToTspans,i),S=n.select("text.name"),C=0,O=0;if(w&&w!==_){S.call(d.font,r.fontFamily||A,r.fontSize||M,m).text(w).attr("data-notex",1).call(h.positionText,0,0).call(h.convertToTspans,i);var P=q(i,S.node());C=P.width+2*L,O=P.height+2*L}else S.remove(),n.select("rect").remove();n.select("path").style({fill:y,stroke:x});var I=r.xa._offset+(r.x0+r.x1)/2,D=r.ya._offset+(r.y0+r.y1)/2,F=Math.abs(r.x1-r.x0),B=Math.abs(r.y1-r.y0),H=q(i,k.node()),G=H.width/o._invScaleX,Z=H.height/o._invScaleY;r.ty0=(N-H.top)/o._invScaleY,r.bx=G+2*L,r.by=Math.max(Z+2*L,O),r.anchor="start",r.txwidth=G,r.tx2width=C,r.offset=0;var Y,W,X=(G+E+L+C)*o._invScaleX;if(f)r.pos=I,Y=D+B/2+X<=U,W=D-B/2-X>=0,"top"!==r.idealAlign&&Y||!W?Y?(D+=B/2,r.anchor="start"):r.anchor="middle":(D-=B/2,r.anchor="end"),r.crossPos=D;else{if(r.pos=D,Y=I+F/2+X<=j,W=I-F/2-X>=0,"left"!==r.idealAlign&&Y||!W){if(Y)I+=F/2,r.anchor="start";else{r.anchor="middle";var J=X/2,K=I+J-j,$=I-J;K>0&&(I-=K),$<0&&(I+=-$)}}else I-=F/2,r.anchor="end";r.crossPos=I}k.attr("text-anchor",r.anchor),C&&S.attr("text-anchor",r.anchor),n.attr("transform",u(I,D)+(f?c(T):""))}),{hoverLabels:tk,commonLabelBoundingBox:X}}function z(r,n,i,a,o,s){var u="",c="";void 0!==r.nameOverride&&(r.name=r.nameOverride),r.name&&(r.trace._meta&&(r.name=l.templateString(r.name,r.trace._meta)),u=j(r.name,r.nameLength));var f=i.charAt(0);void 0!==r.zLabel?(void 0!==r.xLabel&&(c+="x: "+r.xLabel+"<br>"),void 0!==r.yLabel&&(c+="y: "+r.yLabel+"<br>"),"choropleth"!==r.trace.type&&"choroplethmapbox"!==r.trace.type&&(c+=(c?"z: ":"")+r.zLabel)):n&&r[f+"Label"]===o?c=r[("x"===f?"y":"x")+"Label"]||"":void 0===r.xLabel?void 0!==r.yLabel&&"scattercarpet"!==r.trace.type&&(c=r.yLabel):c=void 0===r.yLabel?r.xLabel:"("+r.xLabel+", "+r.yLabel+")",!r.text&&0!==r.text||Array.isArray(r.text)||(c+=(c?"<br>":"")+r.text),void 0!==r.extraText&&(c+=(c?"<br>":"")+r.extraText),s&&""===c&&!r.hovertemplate&&(""===u&&s.remove(),c=u);var h=r.hovertemplate||!1;if(h){var p=r.hovertemplateLabels||r;r[f+"Label"]!==o&&(p[f+"other"]=p[f+"Val"],p[f+"otherLabel"]=p[f+"Label"]),c=(c=l.hovertemplateString(h,p,a._d3locale,r.eventData[0]||{},r.trace._meta)).replace(I,function(n,i){return u=j(i,r.nameLength),""})}return[c,u]}function R(r,n){var i=0,a=r.offset;return n&&(a*=-S,i=r.offset*M),{x:i,y:a}}function F(r,n,i,o){var s=function(r){return r*i},l=function(r){return r*o};r.each(function(r){var i=a.select(this);if(r.del)return i.remove();var o,u,c,f=i.select("text.nums"),p=r.anchor,v="end"===p?-1:1,g=(c=(u=(o=({start:1,end:-1,middle:0})[r.anchor])*(E+L))+o*(r.txwidth+L),"middle"===r.anchor&&(u-=r.tx2width/2,c+=r.txwidth/2+L),{alignShift:o,textShiftX:u,text2ShiftX:c}),y=R(r,n),m=y.x,x=y.y,b="middle"===p;i.select("path").attr("d",b?"M-"+s(r.bx/2+r.tx2width/2)+","+l(x-r.by/2)+"h"+s(r.bx)+"v"+l(r.by)+"h-"+s(r.bx)+"Z":"M0,0L"+s(v*E+m)+","+l(E+x)+"v"+l(r.by/2-E)+"h"+s(v*r.bx)+"v-"+l(r.by)+"H"+s(v*E+m)+"V"+l(x-E)+"Z");var _=m+g.textShiftX,w=x+r.ty0-r.by/2+L,T=r.textAlign||"auto";"auto"!==T&&("left"===T&&"start"!==p?(f.attr("text-anchor","start"),_=b?-r.bx/2-r.tx2width/2+L:-r.bx-L):"right"===T&&"end"!==p&&(f.attr("text-anchor","end"),_=b?r.bx/2-r.tx2width/2-L:r.bx+L)),f.call(h.positionText,s(_),l(w)),r.tx2width&&(i.select("text.name").call(h.positionText,s(g.text2ShiftX+g.alignShift*L+m),l(x+r.ty0-r.by/2+L)),i.select("rect").call(d.setRect,s(g.text2ShiftX+(g.alignShift-1)*r.tx2width/2+m),l(x-r.by/2-1),s(r.tx2width),l(r.by+2)))})}function B(r,n,i){var a,o,l=i.container,u=i.fullLayout,c=u._size,f=i.event,h=!!n.hLinePoint,p=!!n.vLinePoint;if(l.selectAll(".spikeline").remove(),p||h){var g=v.combine(u.plot_bgcolor,u.paper_bgcolor);if(h){var m,x,b=n.hLinePoint;a=b&&b.xa,"cursor"===(o=b&&b.ya).spikesnap?(m=f.pointerX,x=f.pointerY):(m=a._offset+b.x,x=o._offset+b.y);var _,w,T=1.5>s.readability(b.color,g)?v.contrast(g):b.color,k=o.spikemode,A=o.spikethickness,M=o.spikecolor||T,S=y.getPxPosition(r,o);if(-1!==k.indexOf("toaxis")||-1!==k.indexOf("across")){if(-1!==k.indexOf("toaxis")&&(_=S,w=m),-1!==k.indexOf("across")){var E=o._counterDomainMin,L=o._counterDomainMax;"free"===o.anchor&&(E=Math.min(E,o.position),L=Math.max(L,o.position)),_=c.l+E*c.w,w=c.l+L*c.w}l.insert("line",":first-child").attr({x1:_,x2:w,y1:x,y2:x,"stroke-width":A,stroke:M,"stroke-dasharray":d.dashStyle(o.spikedash,A)}).classed("spikeline",!0).classed("crisp",!0),l.insert("line",":first-child").attr({x1:_,x2:w,y1:x,y2:x,"stroke-width":A+2,stroke:g}).classed("spikeline",!0).classed("crisp",!0)}-1!==k.indexOf("marker")&&l.insert("circle",":first-child").attr({cx:S+("right"!==o.side?A:-A),cy:x,r:A,fill:M}).classed("spikeline",!0)}if(p){var C,O,P=n.vLinePoint;a=P&&P.xa,o=P&&P.ya,"cursor"===a.spikesnap?(C=f.pointerX,O=f.pointerY):(C=a._offset+P.x,O=o._offset+P.y);var I,D,z=1.5>s.readability(P.color,g)?v.contrast(g):P.color,R=a.spikemode,F=a.spikethickness,B=a.spikecolor||z,N=y.getPxPosition(r,a);if(-1!==R.indexOf("toaxis")||-1!==R.indexOf("across")){if(-1!==R.indexOf("toaxis")&&(I=N,D=O),-1!==R.indexOf("across")){var j=a._counterDomainMin,U=a._counterDomainMax;"free"===a.anchor&&(j=Math.min(j,a.position),U=Math.max(U,a.position)),I=c.t+(1-U)*c.h,D=c.t+(1-j)*c.h}l.insert("line",":first-child").attr({x1:C,x2:C,y1:I,y2:D,"stroke-width":F,stroke:B,"stroke-dasharray":d.dashStyle(a.spikedash,F)}).classed("spikeline",!0).classed("crisp",!0),l.insert("line",":first-child").attr({x1:C,x2:C,y1:I,y2:D,"stroke-width":F+2,stroke:g}).classed("spikeline",!0).classed("crisp",!0)}-1!==R.indexOf("marker")&&l.insert("circle",":first-child").attr({cx:C,cy:N-("top"!==a.side?F:-F),r:F,fill:B}).classed("spikeline",!0)}}}function N(r,n){return!n||n.vLinePoint!==r._spikepoints.vLinePoint||n.hLinePoint!==r._spikepoints.hLinePoint}function j(r,n){return h.plainText(r||"",{len:n,allowedTags:["br","sub","sup","b","i","em"]})}function U(r,n,i){var a=n[r+"a"],o=n[r+"Val"],s=n.cd[0];if("category"===a.type||"multicategory"===a.type)o=a._categoriesMap[o];else if("date"===a.type){var l=n.trace[r+"periodalignment"];if(l){var u=n.cd[n.index],c=u[r+"Start"];void 0===c&&(c=u[r]);var f=u[r+"End"];void 0===f&&(f=u[r]);var h=f-c;"end"===l?o+=h:"middle"===l&&(o+=h/2)}o=a.d2c(o)}return s&&s.t&&s.t.posLetter===a._id&&("group"!==i.boxmode&&"group"!==i.violinmode||(o+=s.t.dPos)),o}function V(r){return r.offsetTop+r.clientTop}function H(r){return r.offsetLeft+r.clientLeft}function q(r,n){var i=r._fullLayout,a=n.getBoundingClientRect(),o=a.left,s=a.top,u=o+a.width,c=s+a.height,f=l.apply3DTransform(i._invTransform)(o,s),h=l.apply3DTransform(i._invTransform)(u,c),p=f[0],d=f[1],v=h[0],g=h[1];return{x:p,y:d,width:v-p,height:g-d,top:Math.min(d,g),left:Math.min(p,v),right:Math.max(p,v),bottom:Math.max(d,g)}}},38048:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(23469).isUnifiedHover;r.exports=function(r,n,i,l){l=l||{};var u=n.legend;function c(r){l.font[r]||(l.font[r]=u?n.legend.font[r]:n.font[r])}n&&s(n.hovermode)&&(l.font||(l.font={}),c("size"),c("family"),c("color"),u?(l.bgcolor||(l.bgcolor=o.combine(n.legend.bgcolor,n.paper_bgcolor)),l.bordercolor||(l.bordercolor=n.legend.bordercolor)):l.bgcolor||(l.bgcolor=n.paper_bgcolor)),i("hoverlabel.bgcolor",l.bgcolor),i("hoverlabel.bordercolor",l.bordercolor),i("hoverlabel.namelength",l.namelength),a.coerceFont(i,"hoverlabel.font",l.font),i("hoverlabel.align",l.align)}},98212:function(r,n,i){"use strict";var a=i(71828),o=i(528);r.exports=function(r,n){function i(i,s){return void 0!==n[i]?n[i]:a.coerce(r,n,o,i,s)}return i("clickmode"),i("hovermode")}},30211:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(28569),l=i(23469),u=i(528),c=i(88335);r.exports={moduleType:"component",name:"fx",constants:i(26675),schema:{layout:u},attributes:i(77914),layoutAttributes:u,supplyLayoutGlobalDefaults:i(22774),supplyDefaults:i(54268),supplyLayoutDefaults:i(34938),calc:i(30732),getDistanceFunction:l.getDistanceFunction,getClosest:l.getClosest,inbox:l.inbox,quadrature:l.quadrature,appendArrayPointValue:l.appendArrayPointValue,castHoverOption:function(r,n,i){return o.castOption(r,n,"hoverlabel."+i)},castHoverinfo:function(r,n,i){return o.castOption(r,i,"hoverinfo",function(i){return o.coerceHoverinfo({hoverinfo:i},{_module:r._module},n)})},hover:c.hover,unhover:s.unhover,loneHover:c.loneHover,loneUnhover:function(r){var n=o.isD3Selection(r)?r:a.select(r);n.selectAll("g.hovertext").remove(),n.selectAll(".spikeline").remove()},click:i(75914)}},528:function(r,n,i){"use strict";var a=i(26675),o=i(41940),s=o({editType:"none"});s.family.dflt=a.HOVERFONT,s.size.dflt=a.HOVERFONTSIZE,r.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:s,grouptitlefont:o({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(r,n,i){"use strict";var a=i(71828),o=i(528),s=i(98212),l=i(38048);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}s(r,n)&&(i("hoverdistance"),i("spikedistance")),"select"===i("dragmode")&&i("selectdirection");var u=n._has("mapbox"),c=n._has("geo"),f=n._basePlotModules.length;"zoom"===n.dragmode&&((u||c)&&1===f||u&&c&&2===f)&&(n.dragmode="pan"),l(r,n,i),a.coerceFont(i,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},22774:function(r,n,i){"use strict";var a=i(71828),o=i(38048),s=i(528);r.exports=function(r,n){o(r,n,function(i,o){return a.coerce(r,n,s,i,o)})}},83312:function(r,n,i){"use strict";var a=i(71828),o=i(30587).counter,s=i(27670).Y,l=i(85555).idRegex,u=i(44467),c={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[o("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[l.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:s({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function f(r,n,i){var a=n[i+"axes"],o=Object.keys((r._splomAxes||{})[i]||{});return Array.isArray(a)?a:o.length?o:void 0}function h(r,n,i,a,o,s){var l=n(r+"gap",i),u=n("domain."+r);n(r+"side",a);for(var c=Array(o),f=u[0],h=(u[1]-f)/(o-l),p=h*(1-l),d=0;d<o;d++){var v=f+h*d;c[s?o-1-d:d]=[v,v+p]}return c}function p(r,n,i,a,o){var s,l=Array(i);function u(r,i){-1!==n.indexOf(i)&&void 0===a[i]?(l[r]=i,a[i]=r):l[r]=""}if(Array.isArray(r))for(s=0;s<i;s++)u(s,r[s]);else for(u(0,o),s=1;s<i;s++)u(s,o+(s+1));return l}r.exports={moduleType:"component",name:"grid",schema:{layout:{grid:c}},layoutAttributes:c,sizeDefaults:function(r,n){var i=r.grid||{},o=f(n,i,"x"),s=f(n,i,"y");if(r.grid||o||s){var l,p,d=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),v=Array.isArray(o),g=Array.isArray(s),y=v&&o!==i.xaxes&&g&&s!==i.yaxes;d?(l=i.subplots.length,p=i.subplots[0].length):(g&&(l=s.length),v&&(p=o.length));var m=u.newContainer(n,"grid"),x=M("rows",l),b=M("columns",p);if(x*b>1){d||v||g||"independent"===M("pattern")&&(d=!0),m._hasSubplotGrid=d;var _,w,T="top to bottom"===M("roworder"),k=d?.2:.1,A=d?.3:.1;y&&n._splomGridDflt&&(_=n._splomGridDflt.xside,w=n._splomGridDflt.yside),m._domains={x:h("x",M,k,_,b),y:h("y",M,A,w,x,T)}}else delete n.grid}function M(r,n){return a.coerce(i,m,c,r,n)}},contentDefaults:function(r,n){var i=n.grid;if(i&&i._domains){var a,o,s,l,u,c,h,d=r.grid||{},v=n._subplots,g=i._hasSubplotGrid,y=i.rows,m=i.columns,x="independent"===i.pattern,b=i._axisMap={};if(g){var _=d.subplots||[];c=i.subplots=Array(y);var w=1;for(a=0;a<y;a++){var T=c[a]=Array(m),k=_[a]||[];for(o=0;o<m;o++)if(x?(u=1===w?"xy":"x"+w+"y"+w,w++):u=k[o],T[o]="",-1!==v.cartesian.indexOf(u)){if(h=u.indexOf("y"),s=u.slice(0,h),l=u.slice(h),void 0!==b[s]&&b[s]!==o||void 0!==b[l]&&b[l]!==a)continue;T[o]=u,b[s]=o,b[l]=a}}}else{var A=f(n,d,"x"),M=f(n,d,"y");i.xaxes=p(A,v.xaxis,m,b,"x"),i.yaxes=p(M,v.yaxis,y,b,"y")}var S=i._anchors={},E="top to bottom"===i.roworder;for(var L in b){var C,O,P,I=L.charAt(0),D=i[I+"side"];if(D.length<8)S[L]="free";else if("x"===I){if("t"===D.charAt(0)===E?(C=0,O=1,P=y):(C=y-1,O=-1,P=-1),g){var z=b[L];for(a=C;a!==P;a+=O)if((u=c[a][z])&&(h=u.indexOf("y"),u.slice(0,h)===L)){S[L]=u.slice(h);break}}else for(a=C;a!==P;a+=O)if(l=i.yaxes[a],-1!==v.cartesian.indexOf(L+l)){S[L]=l;break}}else if("l"===D.charAt(0)?(C=0,O=1,P=m):(C=m-1,O=-1,P=-1),g){var R=b[L];for(a=C;a!==P;a+=O)if((u=c[R][a])&&(h=u.indexOf("y"),u.slice(h)===L)){S[L]=u.slice(0,h);break}}else for(a=C;a!==P;a+=O)if(s=i.xaxes[a],-1!==v.cartesian.indexOf(s+L)){S[L]=s;break}}}}}},69819:function(r,n,i){"use strict";var a=i(85555),o=i(44467).templatedArray;i(24695),r.exports=o("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(r,n,i){"use strict";var a=i(92770),o=i(58163);r.exports=function(r,n,i,s){n=n||{};var l="log"===i&&"linear"===n.type,u="linear"===i&&"log"===n.type;if(l||u){for(var c,f,h=r._fullLayout.images,p=n._id.charAt(0),d=0;d<h.length;d++)if(f="images["+d+"].",(c=h[d])[p+"ref"]===n._id){var v=c[p],g=c["size"+p],y=null,m=null;if(l){var x=g/Math.pow(10,y=o(v,n.range))/2;m=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else m=(y=Math.pow(10,v))*(Math.pow(10,g/2)-Math.pow(10,-g/2));a(y)?a(m)||(m=null):(y=null,m=null),s(f+p,y),s(f+"size"+p,m)}}}},81603:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(85501),l=i(69819);function u(r,n,i){function s(i,o){return a.coerce(r,n,l,i,o)}var u=s("source");if(!s("visible",!!u))return n;s("layer"),s("xanchor"),s("yanchor"),s("sizex"),s("sizey"),s("sizing"),s("opacity");for(var c={_fullLayout:i},f=["x","y"],h=0;h<2;h++){var p=f[h],d=o.coerceRef(r,n,c,p,"paper",void 0);"paper"!==d&&o.getFromId(c,d)._imgIndices.push(n._index),o.coercePosition(n,c,s,d,p,0)}return n}r.exports=function(r,n){s(r,n,{name:"images",handleItemDefaults:u})}},80750:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(89298),l=i(41675),u=i(77922);r.exports=function(r){var n,i,c=r._fullLayout,f=[],h={},p=[];for(i=0;i<c.images.length;i++){var d=c.images[i];if(d.visible){if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){n=l.ref2id(d.xref)+l.ref2id(d.yref);var v=c._plots[n];if(!v){p.push(d);continue}v.mainplot&&(n=v.mainplot.id),h[n]||(h[n]=[]),h[n].push(d)}else"above"===d.layer?f.push(d):p.push(d)}}var g={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(n){var i=a.select(this);if(this._imgSrc!==n.source){if(i.attr("xmlns",u.svg),n.source&&"data:"===n.source.slice(0,5))i.attr("xlink:href",n.source),this._imgSrc=n.source;else{var o=new Promise((function(r){var a=new Image;function o(){i.remove(),r()}this.img=a,a.setAttribute("crossOrigin","anonymous"),a.onerror=o,a.onload=function(){var n=document.createElement("canvas");n.width=this.width,n.height=this.height,n.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var a=n.toDataURL("image/png");i.attr("xlink:href",a),r()},i.on("error",o),a.src=n.source,this._imgSrc=n.source}).bind(this));r._promises.push(o)}}}function x(n){var i,l,u=a.select(this),f=s.getFromId(r,n.xref),h=s.getFromId(r,n.yref),p="domain"===s.getRefType(n.xref),d="domain"===s.getRefType(n.yref),v=c._size;i=void 0!==f?"string"==typeof n.xref&&p?f._length*n.sizex:Math.abs(f.l2p(n.sizex)-f.l2p(0)):n.sizex*v.w,l=void 0!==h?"string"==typeof n.yref&&d?h._length*n.sizey:Math.abs(h.l2p(n.sizey)-h.l2p(0)):n.sizey*v.h;var m,x,b=i*g[n.xanchor].offset,_=l*y[n.yanchor].offset,w=g[n.xanchor].sizing+y[n.yanchor].sizing;switch(m=(void 0!==f?"string"==typeof n.xref&&p?f._length*n.x+f._offset:f.r2p(n.x)+f._offset:n.x*v.w+v.l)+b,x=(void 0!==h?"string"==typeof n.yref&&d?h._length*(1-n.y)+h._offset:h.r2p(n.y)+h._offset:v.h-n.y*v.h+v.t)+_,n.sizing){case"fill":w+=" slice";break;case"stretch":w="none"}u.attr({x:m,y:x,width:i,height:l,preserveAspectRatio:w,opacity:n.opacity});var T=(f&&"domain"!==s.getRefType(n.xref)?f._id:"")+(h&&"domain"!==s.getRefType(n.yref)?h._id:"");o.setClipUrl(u,T?"clip"+c._uid+T:null,r)}var b=c._imageLowerLayer.selectAll("image").data(p),_=c._imageUpperLayer.selectAll("image").data(f);b.enter().append("image"),_.enter().append("image"),b.exit().remove(),_.exit().remove(),b.each(function(r){m.bind(this)(r),x.bind(this)(r)}),_.each(function(r){m.bind(this)(r),x.bind(this)(r)});var w=Object.keys(c._plots);for(i=0;i<w.length;i++){n=w[i];var T=c._plots[n];if(T.imagelayer){var k=T.imagelayer.selectAll("image").data(h[n]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(r){m.bind(this)(r),x.bind(this)(r)})}}}},68804:function(r,n,i){"use strict";r.exports={moduleType:"component",name:"images",layoutAttributes:i(69819),supplyLayoutDefaults:i(81603),includeBasePlot:i(76325)("images"),draw:i(80750),convertCoords:i(75378)}},33030:function(r,n,i){"use strict";var a=i(41940),o=i(22399);r.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:a({editType:"legend"}),grouptitlefont:a({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:a({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(r){"use strict";r.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(44467),l=i(9012),u=i(33030),c=i(10820),f=i(10130);r.exports=function(r,n,i){var h,p=i.slice(),d=n.shapes;if(d)for(h=0;h<d.length;h++){var v=d[h];if(v.showlegend){var g={_input:v._input,visible:v.visible,showlegend:v.showlegend,legend:v.legend};p.push(g)}}var y=["legend"];for(h=0;h<p.length;h++)o.pushUnique(y,p[h].legend);for(n._legends=[],h=0;h<y.length;h++){var m=y[h];(function(r,n,i,h){var p=n[r]||{},d=s.newContainer(i,r);function v(r,n){return o.coerce(p,d,u,r,n)}var g=o.coerceFont(v,"font",i.font);if(v("bgcolor",i.paper_bgcolor),v("bordercolor"),v("visible")){for(var y,m=function(r,n){var i=y._input,a=y;return o.coerce(i,a,l,r,n)},x=i.font||{},b=o.coerceFont(v,"grouptitlefont",o.extendFlat({},x,{size:Math.round(1.1*x.size)})),_=0,w=!1,T="normal",k=(i.shapes||[]).filter(function(r){return r.showlegend}),A=h.concat(k).filter(function(n){return r===(n.legend||"legend")}),M=0;M<A.length;M++)if((y=A[M]).visible){var S=y._isShape;(y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&!1===y._module.attributes.showlegend.dflt))&&(_++,y.showlegend&&(w=!0,(!S&&a.traceIs(y,"pie-like")||!0===y._input.showlegend)&&_++),o.coerceFont(m,"legendgrouptitle.font",b)),(!S&&a.traceIs(y,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(y.fill))&&(T=f.isGrouped({traceorder:T})?"grouped+reversed":"reversed"),void 0!==y.legendgroup&&""!==y.legendgroup&&(T=f.isReversed({traceorder:T})?"reversed+grouped":"grouped")}var E=o.coerce(n,i,c,"showlegend",w&&_>("legend"===r?1:0));if(!1===E&&(i[r]=void 0),(!1!==E||p.uirevision)&&(v("uirevision",i.uirevision),!1!==E)){v("borderwidth");var L,C,O,P="h"===v("orientation"),I="paper"===v("yref"),D="paper"===v("xref"),z="left";if(P?(L=0,a.getComponentMethod("rangeslider","isVisible")(n.xaxis)?I?(C=1.1,O="bottom"):(C=1,O="top"):I?(C=-.1,O="top"):(C=0,O="bottom")):(C=1,O="auto",D?L=1.02:(L=1,z="right")),o.coerce(p,d,{x:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:L}},"x"),o.coerce(p,d,{y:{valType:"number",editType:"legend",min:I?-2:0,max:I?3:1,dflt:C}},"y"),v("traceorder",T),f.isGrouped(i[r])&&v("tracegroupgap"),v("entrywidth"),v("entrywidthmode"),v("itemsizing"),v("itemwidth"),v("itemclick"),v("itemdoubleclick"),v("groupclick"),v("xanchor",z),v("yanchor",O),v("valign"),o.noneOrAll(p,d,["x","y"]),v("title.text")){v("title.side",P?"left":"top");var R=o.extendFlat({},g,{size:o.bigFont(g.size)});o.coerceFont(v,"title.font",R)}}}})(m,r,n,p),n[m]&&n[m].visible&&(n[m]._id=m),n._legends.push(m)}}},43969:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(74875),l=i(73972),u=i(11086),c=i(28569),f=i(91424),h=i(7901),p=i(63893),d=i(85167),v=i(14928),g=i(18783),y=g.LINE_SPACING,m=g.FROM_TL,x=g.FROM_BR,b=i(82424),_=i(53630),w=i(10130),T=/^legend[0-9]*$/;function k(r,n){var i,u,d=n||{},g=r._fullLayout,T=I(d),k=d._inHover;if(k?(u=d.layer,i="hover"):(u=g._infolayer,i=T),u){if(i+=g._uid,r._legendMouseDownTime||(r._legendMouseDownTime=0),k){if(!d.entries)return;V=b(d.entries,d)}else{for(var E=(r.calcdata||[]).slice(),D=g.shapes,z=0;z<D.length;z++){var R=D[z];if(R.showlegend){var F={_isShape:!0,_fullInput:R,index:R._index,name:R.name||R.label.text||"shape "+R._index,legend:R.legend,legendgroup:R.legendgroup,legendgrouptitle:R.legendgrouptitle,legendrank:R.legendrank,legendwidth:R.legendwidth,showlegend:R.showlegend,visible:R.visible,opacity:R.opacity,mode:"line"===R.type?"lines":"markers",line:R.line,marker:{line:R.line,color:R.fillcolor,size:12,symbol:"rect"===R.type?"square":"circle"===R.type?"circle":"hexagon2"}};E.push([{trace:F}])}}V=g.showlegend&&b(E,d,g._legends.length>1)}var B=g.hiddenlabels||[];if(!(k||g.showlegend&&V.length))return u.selectAll("."+T).remove(),g._topdefs.select("#"+i).remove(),s.autoMargin(r,T);var N=o.ensureSingle(u,"g",T,function(r){k||r.attr("pointer-events","all")}),j=o.ensureSingleById(g._topdefs,"clipPath",i,function(r){r.append("rect")}),U=o.ensureSingle(N,"rect","bg",function(r){r.attr("shape-rendering","crispEdges")});U.call(h.stroke,d.bordercolor).call(h.fill,d.bgcolor).style("stroke-width",d.borderwidth+"px");var V,H,q=o.ensureSingle(N,"g","scrollbox"),G=d.title;d._titleWidth=0,d._titleHeight=0,G.text?((H=o.ensureSingle(q,"text",T+"titletext")).attr("text-anchor","start").call(f.font,G.font).text(G.text),C(H,q,r,d,1)):q.selectAll("."+T+"titletext").remove();var Z=o.ensureSingle(N,"rect","scrollbar",function(r){r.attr(v.scrollBarEnterAttrs).call(h.fill,v.scrollBarColor)}),Y=q.selectAll("g.groups").data(V);Y.enter().append("g").attr("class","groups"),Y.exit().remove();var W=Y.selectAll("g.traces").data(o.identity);W.enter().append("g").attr("class","traces"),W.exit().remove(),W.style("opacity",function(r){var n=r[0].trace;return l.traceIs(n,"pie-like")?-1!==B.indexOf(r[0].label)?.5:1:"legendonly"===n.visible?.5:1}).each(function(){a.select(this).call(S,r,d)}).call(_,r,d).each(function(){k||a.select(this).call(L,r,T)}),o.syncOrAsync([s.previousPromises,function(){return function(r,n,i,o){var s,l,u,c,h=r._fullLayout,p=I(o);o||(o=h[p]);var d=h._size,g=w.isVertical(o),y=w.isGrouped(o),m="fraction"===o.entrywidthmode,x=o.borderwidth,b=2*x,_=v.itemGap,T=o.itemwidth+2*_,k=2*(x+_),M=P(o),S=o.y<0||0===o.y&&"top"===M,E=o.y>1||1===o.y&&"bottom"===M,L=o.tracegroupgap,C={};o._maxHeight=Math.max(S||E?h.height/2:d.h,30);var D=0;o._width=0,o._height=0;var z=(l=0,u=0,(c=(s=o).title.side)&&(-1!==c.indexOf("left")&&(l=s._titleWidth),-1!==c.indexOf("top")&&(u=s._titleHeight)),[l,u]);if(g)i.each(function(r){var n=r[0].height;f.setTranslate(this,x+z[0],x+z[1]+o._height+n/2+_),o._height+=n,o._width=Math.max(o._width,r[0].width)}),D=T+o._width,o._width+=_+T+b,o._height+=k,y&&(n.each(function(r,n){f.setTranslate(this,0,n*o.tracegroupgap)}),o._height+=(o._lgroupsLength-1)*o.tracegroupgap);else{var R=O(o),F=o.x<0||0===o.x&&"right"===R,B=o.x>1||1===o.x&&"left"===R,N=E||S,j=h.width/2;o._maxWidth=Math.max(F?N&&"left"===R?d.l+d.w:j:B?N&&"right"===R?d.r+d.w:j:d.w,2*T);var U=0,V=0;i.each(function(r){var n=A(r,o,T);U=Math.max(U,n),V+=n}),D=null;var H=0;if(y){var q=0,G=0,Z=0;n.each(function(){var r=0,n=0;a.select(this).selectAll("g.traces").each(function(i){var a=A(i,o,T),s=i[0].height;f.setTranslate(this,z[0],z[1]+x+_+s/2+n),n+=s,r=Math.max(r,a),C[i[0].trace.legendgroup]=r});var i=r+_;G>0&&i+x+G>o._maxWidth?(H=Math.max(H,G),G=0,Z+=q+L,q=n):q=Math.max(q,n),f.setTranslate(this,G,Z),G+=i}),o._width=Math.max(H,G)+x,o._height=Z+q+k}else{var Y=i.size(),W=V+b+(Y-1)*_<o._maxWidth,X=0,J=0,K=0,$=0;i.each(function(r){var n=r[0].height,i=A(r,o,T),a=W?i:U;m||(a+=_),a+x+J-_>=o._maxWidth&&(H=Math.max(H,$),J=0,K+=X,o._height+=X,X=0),f.setTranslate(this,z[0]+x+J,z[1]+x+K+n/2+_),$=J+i+_,J+=a,X=Math.max(X,n)}),W?(o._width=J+b,o._height=X+k):(o._width=Math.max(H,$)+b,o._height+=X+k)}}o._width=Math.ceil(Math.max(o._width+z[0],o._titleWidth+2*(x+v.titlePad))),o._height=Math.ceil(Math.max(o._height+z[1],o._titleHeight+2*(x+v.itemGap))),o._effHeight=Math.min(o._height,o._maxHeight);var Q=r._context.edits,tt=Q.legendText||Q.legendPosition;i.each(function(r){var n=a.select(this).select("."+p+"toggle"),i=r[0].height,s=r[0].trace.legendgroup,l=A(r,o,T);y&&""!==s&&(l=C[s]);var u=tt?T:D||l;g||m||(u+=_/2),f.setRect(n,0,-i/2,u,i)})}(r,Y,W,d)},function(){var n,h,b,_,w=g._size,A=d.borderwidth,S="paper"===d.xref,E="paper"===d.yref;if(G.text&&function(r,n,i){if("top center"===n.title.side||"top right"===n.title.side){var a=n.title.font.size*y,o=0,s=r.node(),l=f.bBox(s).width;"top center"===n.title.side?o=.5*(n._width-2*i-2*v.titlePad-l):"top right"===n.title.side&&(o=n._width-2*i-2*v.titlePad-l),p.positionText(r,i+v.titlePad+o,i+a)}}(H,d,A),!k){if(function(r,n,i,a){var o=r._fullLayout,l=o[n],u=O(l),c=P(l),f="paper"===l.xref,h="paper"===l.yref;r._fullLayout._reservedMargin[n]={};var p=l.y<.5?"b":"t",d=l.x<.5?"l":"r",v={r:o.width-i,l:i+l._width,b:o.height-a,t:a+l._effHeight};if(f&&h)return s.autoMargin(r,n,{x:l.x,y:l.y,l:l._width*m[u],r:l._width*x[u],b:l._effHeight*x[c],t:l._effHeight*m[c]});f?r._fullLayout._reservedMargin[n][p]=v[p]:h||"v"===l.orientation?r._fullLayout._reservedMargin[n][d]=v[d]:r._fullLayout._reservedMargin[n][p]=v[p]}(r,T,D=S?w.l+w.w*d.x-m[O(d)]*d._width:g.width*d.x-m[O(d)]*d._width,z=E?w.t+w.h*(1-d.y)-m[P(d)]*d._effHeight:g.height*(1-d.y)-m[P(d)]*d._effHeight))return;if(g.margin.autoexpand){var L=D,C=z;D=S?o.constrain(D,0,g.width-d._width):L,z=E?o.constrain(z,0,g.height-d._effHeight):C,D!==L&&o.log("Constrain "+T+".x to make legend fit inside graph"),z!==C&&o.log("Constrain "+T+".y to make legend fit inside graph")}f.setTranslate(N,D,z)}if(Z.on(".drag",null),N.on("wheel",null),k||d._height<=d._maxHeight||r._context.staticPlot){var I=d._effHeight;k&&(I=d._height),U.attr({width:d._width-A,height:I-A,x:A/2,y:A/2}),f.setTranslate(q,0,0),j.select("rect").attr({width:d._width-2*A,height:I-2*A,x:A,y:A}),f.setClipUrl(q,i,r),f.setRect(Z,0,0,0,0),delete d._scrollY}else{var D,z,R,F,B,V=Math.max(v.scrollBarMinHeight,d._effHeight*d._effHeight/d._height),Y=d._effHeight-V-2*v.scrollBarMargin,W=d._height-d._effHeight,X=Y/W,J=Math.min(d._scrollY||0,W);U.attr({width:d._width-2*A+v.scrollBarWidth+v.scrollBarMargin,height:d._effHeight-A,x:A/2,y:A/2}),j.select("rect").attr({width:d._width-2*A+v.scrollBarWidth+v.scrollBarMargin,height:d._effHeight-2*A,x:A,y:A+J}),f.setClipUrl(q,i,r),Q(J,V,X),N.on("wheel",function(){Q(J=o.constrain(d._scrollY+a.event.deltaY/Y*W,0,W),V,X),0!==J&&J!==W&&a.event.preventDefault()});var K=a.behavior.drag().on("dragstart",function(){var r=a.event.sourceEvent;R="touchstart"===r.type?r.changedTouches[0].clientY:r.clientY,B=J}).on("drag",function(){var r,n=a.event.sourceEvent;2===n.buttons||n.ctrlKey||(r=((F="touchmove"===n.type?n.changedTouches[0].clientY:n.clientY)-R)/X+B,Q(J=o.constrain(r,0,W),V,X))});Z.call(K);var $=a.behavior.drag().on("dragstart",function(){var r=a.event.sourceEvent;"touchstart"===r.type&&(R=r.changedTouches[0].clientY,B=J)}).on("drag",function(){var r,n=a.event.sourceEvent;"touchmove"===n.type&&(F=n.changedTouches[0].clientY,r=(R-F)/X+B,Q(J=o.constrain(r,0,W),V,X))});q.call($)}function Q(n,i,a){d._scrollY=r._fullLayout[T]._scrollY=n,f.setTranslate(q,0,-n),f.setRect(Z,d._width,v.scrollBarMargin+n*a,v.scrollBarWidth,i),j.select("rect").attr("y",A+n)}r._context.edits.legendPosition&&(N.classed("cursor-move",!0),c.init({element:N.node(),gd:r,prepFn:function(){var r=f.getTranslate(N);b=r.x,_=r.y},moveFn:function(r,i){var a=b+r,o=_+i;f.setTranslate(N,a,o),n=c.align(a,d._width,w.l,w.l+w.w,d.xanchor),h=c.align(o+d._height,-d._height,w.t+w.h,w.t,d.yanchor)},doneFn:function(){if(void 0!==n&&void 0!==h){var i={};i[T+".x"]=n,i[T+".y"]=h,l.call("_guiRelayout",r,i)}},clickFn:function(n,i){var a=u.selectAll("g.traces").filter(function(){var r=this.getBoundingClientRect();return i.clientX>=r.left&&i.clientX<=r.right&&i.clientY>=r.top&&i.clientY<=r.bottom});a.size()>0&&M(r,N,a,n,i)}}))}],r)}}function A(r,n,i){var a=r[0],o=a.width,s=n.entrywidthmode,l=a.trace.legendwidth||n.entrywidth;return"fraction"===s?n._maxWidth*l:i+(l||o)}function M(r,n,i,a,o){var s=i.data()[0][0].trace,c={event:o,node:i.node(),curveNumber:s.index,expandedIndex:s._expandedIndex,data:r.data,layout:r.layout,frames:r._transitionData._frames,config:r._context,fullData:r._fullData,fullLayout:r._fullLayout};s._group&&(c.group=s._group),l.traceIs(s,"pie-like")&&(c.label=i.datum()[0].label);var f=u.triggerHandler(r,"plotly_legendclick",c);if(1===a){if(!1===f)return;n._clickTimeout=setTimeout(function(){r._fullLayout&&d(i,r,a)},r._context.doubleClickDelay)}else 2===a&&(n._clickTimeout&&clearTimeout(n._clickTimeout),r._legendMouseDownTime=0,!1!==u.triggerHandler(r,"plotly_legenddoubleclick",c)&&!1!==f&&d(i,r,a))}function S(r,n,i){var a,s,u=I(i),c=r.data()[0][0],h=c.trace,d=l.traceIs(h,"pie-like"),g=!i._inHover&&n._context.edits.legendText&&!d,y=i._maxNameLength;c.groupTitle?(a=c.groupTitle.text,s=c.groupTitle.font):(s=i.font,i.entries?a=c.text:(a=d?c.label:h.name,h._meta&&(a=o.templateString(a,h._meta))));var m=o.ensureSingle(r,"text",u+"text");m.attr("text-anchor","start").call(f.font,s).text(g?E(a,y):a);var x=i.itemwidth+2*v.itemGap;p.positionText(m,x,0),g?m.call(p.makeEditable,{gd:n,text:a}).call(C,r,n,i).on("edit",function(a){this.text(E(a,y)).call(C,r,n,i);var s=c.trace._fullInput||{},u={};if(l.hasTransform(s,"groupby")){var f=l.getTransformIndices(s,"groupby"),p=f[f.length-1],d=o.keyedContainer(s,"transforms["+p+"].styles","target","value.name");d.set(c.trace._group,a),u=d.constructUpdate()}else u.name=a;return s._isShape?l.call("_guiRelayout",n,"shapes["+h.index+"].name",u.name):l.call("_guiRestyle",n,u,h.index)}):C(m,r,n,i)}function E(r,n){var i=Math.max(4,n);if(r&&r.trim().length>=i/2)return r;for(var a=i-(r=r||"").length;a>0;a--)r+=" ";return r}function L(r,n,i){var s,l=n._context.doubleClickDelay,u=1,c=o.ensureSingle(r,"rect",i+"toggle",function(r){n._context.staticPlot||r.style("cursor","pointer").attr("pointer-events","all"),r.call(h.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(c.on("mousedown",function(){(s=(new Date).getTime())-n._legendMouseDownTime<l?u+=1:(u=1,n._legendMouseDownTime=s)}),c.on("mouseup",function(){if(!n._dragged&&!n._editing){var o=n._fullLayout[i];(new Date).getTime()-n._legendMouseDownTime>l&&(u=Math.max(u-1,1)),M(n,o,r,u,a.event)}}))}function C(r,n,i,a,o){a._inHover&&r.attr("data-notex",!0),p.convertToTspans(r,i,function(){!function(r,n,i,a){var o=r.data()[0][0];if(i._inHover||!o||o.trace.showlegend){var s=r.select("g[class*=math-group]"),l=s.node(),u=I(i);i||(i=n._fullLayout[u]);var c,h,d=i.borderwidth,g=(1===a?i.title.font:o.groupTitle?o.groupTitle.font:i.font).size*y;if(l){var m=f.bBox(l);c=m.height,h=m.width,1===a?f.setTranslate(s,d,d+.75*c):f.setTranslate(s,0,.25*c)}else{var x=r.select("."+u+(1===a?"title":"")+"text"),b=p.lineCount(x),_=x.node();if(c=g*b,h=_?f.bBox(_).width:0,1===a)"left"===i.title.side&&(h+=2*v.itemGap),p.positionText(x,d+v.titlePad,d+g);else{var w=2*v.itemGap+i.itemwidth;o.groupTitle&&(w=v.itemGap,h-=i.itemwidth),p.positionText(x,w,-g*((b-1)/2-.3))}}1===a?(i._titleWidth=h,i._titleHeight=c):(o.lineHeight=g,o.height=Math.max(c,16)+3,o.width=h)}else r.remove()}(n,i,a,o)})}function O(r){return o.isRightAnchor(r)?"right":o.isCenterAnchor(r)?"center":"left"}function P(r){return o.isBottomAnchor(r)?"bottom":o.isMiddleAnchor(r)?"middle":"top"}function I(r){return r._id||"legend"}r.exports=function(r,n){if(n)k(r,n);else{var i=r._fullLayout,o=i._legends;i._infolayer.selectAll('[class^="legend"]').each(function(){var r=a.select(this),n=r.attr("class").split(" ")[0];n.match(T)&&-1===o.indexOf(n)&&r.remove()});for(var s=0;s<o.length;s++){var l=o[s];k(r,r._fullLayout[l])}}}},82424:function(r,n,i){"use strict";var a=i(73972),o=i(10130);r.exports=function(r,n,i){var s,l,u=n._inHover,c=o.isGrouped(n),f=o.isReversed(n),h={},p=[],d=!1,v={},g=0,y=0;function m(r,a,s){if(!1!==n.visible&&(!i||r===n._id)){if(""!==a&&o.isGrouped(n))-1===p.indexOf(a)?(p.push(a),d=!0,h[a]=[s]):h[a].push(s);else{var l="~~i"+g;p.push(l),h[l]=[s],g++}}}for(s=0;s<r.length;s++){var x=r[s],b=x[0],_=b.trace,w=_.legend,T=_.legendgroup;if(u||_.visible&&_.showlegend){if(a.traceIs(_,"pie-like"))for(v[T]||(v[T]={}),l=0;l<x.length;l++){var k=x[l].label;v[T][k]||(m(w,T,{label:k,color:x[l].color,i:x[l].i,trace:_,pts:x[l].pts}),v[T][k]=!0,y=Math.max(y,(k||"").length))}else m(w,T,b),y=Math.max(y,(_.name||"").length)}}if(!p.length)return[];var A=!d||!c,M=[];for(s=0;s<p.length;s++){var S=h[p[s]];A?M.push(S[0]):M.push(S)}for(A&&(M=[M]),s=0;s<M.length;s++){var E=1/0;for(l=0;l<M[s].length;l++){var L=M[s][l].trace.legendrank;E>L&&(E=L)}M[s][0]._groupMinRank=E,M[s][0]._preGroupSort=s}var C=function(r,n){return r.trace.legendrank-n.trace.legendrank||r._preSort-n._preSort};for(M.forEach(function(r,n){r[0]._preGroupSort=n}),M.sort(function(r,n){return r[0]._groupMinRank-n[0]._groupMinRank||r[0]._preGroupSort-n[0]._preGroupSort}),s=0;s<M.length;s++){M[s].forEach(function(r,n){r._preSort=n}),M[s].sort(C);var O=M[s][0].trace,P=null;for(l=0;l<M[s].length;l++){var I=M[s][l].trace.legendgrouptitle;if(I&&I.text){P=I,u&&(I.font=n._groupTitleFont);break}}if(f&&M[s].reverse(),P){var D=!1;for(l=0;l<M[s].length;l++)if(a.traceIs(M[s][l].trace,"pie-like")){D=!0;break}M[s].unshift({i:-1,groupTitle:P,noClick:D,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:"toggleitem"===n.groupclick||O.visible}})}for(l=0;l<M[s].length;l++)M[s][l]=[M[s][l]]}return n._lgroupsLength=M.length,n._maxNameLength=y,M}},85167:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=o.pushUnique,l=!0;r.exports=function(r,n,i){var u=n._fullLayout;if(!n._dragged&&!n._editing){var c,f=u.legend.itemclick,h=u.legend.itemdoubleclick,p=u.legend.groupclick;if(1===i&&"toggle"===f&&"toggleothers"===h&&l&&n.data&&n._context.showTips&&o.notifier(o._(n,"Double-click on legend to isolate one trace"),"long"),l=!1,1===i?c=f:2===i&&(c=h),c){var d="togglegroup"===p,v=u.hiddenlabels?u.hiddenlabels.slice():[],g=r.data()[0][0];if(!g.groupTitle||!g.noClick){var y=n._fullData,m=(u.shapes||[]).filter(function(r){return r.showlegend}),x=y.concat(m),b=g.trace;b._isShape&&(b=b._fullInput);var _,w,T,k,A,M=b.legendgroup,S={},E=[],L=[],C=[],O=(u.shapes||[]).map(function(r){return r._input}),P=!1,I=b.legend,D=b._fullInput;if(D&&D._isShape||!a.traceIs(b,"pie-like")){var z,R=M&&M.length,F=[];if(R)for(_=0;_<x.length;_++)(z=x[_]).visible&&z.legendgroup===M&&F.push(_);if("toggle"===c){switch(b.visible){case!0:N="legendonly";break;case!1:N=!1;break;case"legendonly":N=!0}if(R){if(d)for(_=0;_<x.length;_++){var B=x[_];!1!==B.visible&&B.legendgroup===M&&tr(B,N)}else tr(b,N)}else tr(b,N)}else if("toggleothers"===c){var N,j,U,V,H,q=!0;for(_=0;_<x.length;_++)if(j=(H=x[_])===b,U=!0!==H.showlegend,!(j||U||R&&H.legendgroup===M||H.legend!==I||!0!==H.visible||a.traceIs(H,"notLegendIsolatable"))){q=!1;break}for(_=0;_<x.length;_++)if(!1!==(H=x[_]).visible&&H.legend===I&&!a.traceIs(H,"notLegendIsolatable"))switch(b.visible){case"legendonly":tr(H,!0);break;case!0:V=!!q||"legendonly",j=H===b,U=!0!==H.showlegend&&!H.legendgroup,tr(H,!!(j||R&&H.legendgroup===M||U)||V)}}for(_=0;_<L.length;_++)if(T=L[_]){var G=T.constructUpdate(),Z=Object.keys(G);for(w=0;w<Z.length;w++)(S[k=Z[w]]=S[k]||[])[C[_]]=G[k]}for(A=Object.keys(S),_=0;_<A.length;_++)for(k=A[_],w=0;w<E.length;w++)S[k].hasOwnProperty(w)||(S[k][w]=void 0);P?a.call("_guiUpdate",n,S,{shapes:O},E):a.call("_guiRestyle",n,S,E)}else{var Y=g.label,W=v.indexOf(Y);if("toggle"===c)-1===W?v.push(Y):v.splice(W,1);else if("toggleothers"===c){var X=-1!==W,J=[];for(_=0;_<n.calcdata.length;_++){var K=n.calcdata[_];for(w=0;w<K.length;w++){var $=K[w].label;I===K[0].trace.legend&&Y!==$&&(-1===v.indexOf($)&&(X=!0),s(v,$),J.push($))}}if(!X)for(var Q=0;Q<J.length;Q++){var tt=v.indexOf(J[Q]);-1!==tt&&v.splice(tt,1)}}a.call("_guiRelayout",n,"hiddenlabels",v)}}}}function te(r,n){var i=E.indexOf(r),a=S.visible;return a||(a=S.visible=[]),-1===E.indexOf(r)&&(E.push(r),i=E.length-1),a[i]=n,i}function tr(r,n){if(!g.groupTitle||d){var i=r._fullInput||r,s=i._isShape,l=i.index;if(void 0===l&&(l=i._index),a.hasTransform(i,"groupby")){var u=L[l];if(!u){var c=a.getTransformIndices(i,"groupby"),f=c[c.length-1];u=o.keyedContainer(i,"transforms["+f+"].styles","target","value.visible"),L[l]=u}var h=u.get(r._group);void 0===h&&(h=!0),!1!==h&&u.set(r._group,n),C[l]=te(l,!1!==i.visible)}else{var p=!1!==i.visible&&n;s?(O[l].visible=p,P=!0):te(l,p)}}}}},10130:function(r,n){"use strict";n.isGrouped=function(r){return -1!==(r.traceorder||"").indexOf("grouped")},n.isVertical=function(r){return"h"!==r.orientation},n.isReversed=function(r){return -1!==(r.traceorder||"").indexOf("reversed")}},2199:function(r,n,i){"use strict";r.exports={moduleType:"component",name:"legend",layoutAttributes:i(33030),supplyLayoutDefaults:i(99017),draw:i(43969),style:i(53630)}},53630:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(71828),l=s.strTranslate,u=i(91424),c=i(7901),f=i(52075).extractOpts,h=i(34098),p=i(63463),d=i(53581).castOption,v=i(14928);function g(r,n){return(n?"radial":"horizontal")+(r?"":"reversed")}function y(r){var n=r[0].trace,i=n.contours,a=h.hasLines(n),o=h.hasMarkers(n),s=n.visible&&n.fill&&"none"!==n.fill,l=!1,u=!1;if(i){var c=i.coloring;"lines"===c?l=!0:a="none"===c||"heatmap"===c||i.showlines,"constraint"===i.type?s="="!==i._operation:"fill"!==c&&"heatmap"!==c||(u=!0)}return{showMarker:o,showLine:a,showFill:s,showGradientLine:l,showGradientFill:u,anyLine:a||l,anyFill:s||u}}function m(r,n,i){return r&&s.isArrayOrTypedArray(r)?n:r>i?i:r}r.exports=function(r,n,i){var x=n._fullLayout;i||(i=x.legend);var b="constant"===i.itemsizing,_=i.itemwidth,w=l((_+2*v.itemGap)/2,0),T=function(r,n,i,a){var o;if(r+1)o=r;else{if(!(n&&n.width>0))return 0;o=n.width}return b?a:Math.min(o,i)};function k(r,s,l){var h=r[0].trace,p=h.marker||{},d=p.line||{},v=l?h.visible&&h.type===l:o.traceIs(h,"bar"),g=a.select(s).select("g.legendpoints").selectAll("path.legend"+l).data(v?[r]:[]);g.enter().append("path").classed("legend"+l,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),g.exit().remove(),g.each(function(r){var o=a.select(this),s=r[0],l=T(s.mlw,p.line,5,2);o.style("stroke-width",l+"px");var v=s.mcc;if(!i._inHover&&"mc"in s){var g=f(p),y=g.mid;void 0===y&&(y=(g.max+g.min)/2),v=u.tryColorscale(p,"")(y)}var x=v||s.mc||p.color,b=p.pattern,_=b&&u.getPatternAttr(b.shape,0,"");if(_){var w=u.getPatternAttr(b.bgcolor,0,null),k=u.getPatternAttr(b.fgcolor,0,null),A=b.fgopacity,M=m(b.size,8,10),S=m(b.solidity,.5,1),E="legend-"+h.uid;o.call(u.pattern,"legend",n,E,_,M,S,v,b.fillmode,w,k,A)}else o.call(c.fill,x);l&&c.stroke(o,s.mlc||d.color)})}function A(r,i,l){var u=r[0],c=u.trace,f=l?c.visible&&c.type===l:o.traceIs(c,l),h=a.select(i).select("g.legendpoints").selectAll("path.legend"+l).data(f?[r]:[]);if(h.enter().append("path").classed("legend"+l,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),h.exit().remove(),h.size()){var v=c.marker||{},g=T(d(v.line.width,u.pts),v.line,5,2),y="pieLike",m=s.minExtend(c,{marker:{line:{width:g}}},y);p(h,s.minExtend(u,{trace:m},y),m,n)}}r.each(function(r){var n=a.select(this),o=s.ensureSingle(n,"g","layers");o.style("opacity",r[0].trace.opacity);var u=i.valign,c=r[0].lineHeight,f=r[0].height;"middle"!==u&&c&&f?o.attr("transform",l(0,.5*(c-f+3)*({top:1,bottom:-1})[u])):o.attr("transform",null),o.selectAll("g.legendfill").data([r]).enter().append("g").classed("legendfill",!0),o.selectAll("g.legendlines").data([r]).enter().append("g").classed("legendlines",!0);var h=o.selectAll("g.legendsymbols").data([r]);h.enter().append("g").classed("legendsymbols",!0),h.selectAll("g.legendpoints").data([r]).enter().append("g").classed("legendpoints",!0)}).each(function(r){var i,o=r[0].trace,l=[];if(o.visible)switch(o.type){case"histogram2d":case"heatmap":l=[["M-15,-2V4H15V-2Z"]],i=!0;break;case"choropleth":case"choroplethmapbox":l=[["M-6,-6V6H6V-6Z"]],i=!0;break;case"densitymapbox":l=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],i="radial";break;case"cone":l=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],i=!1;break;case"streamtube":l=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],i=!1;break;case"surface":l=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],i=!0;break;case"mesh3d":l=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],i=!1;break;case"volume":l=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],i=!0;break;case"isosurface":l=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],i=!1}var h=a.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(l);h.enter().append("path").classed("legend3dandfriends",!0).attr("transform",w).style("stroke-miterlimit",1),h.exit().remove(),h.each(function(r,l){var h,p=a.select(this),d=f(o),v=d.colorscale,y=d.reversescale;if(v){if(!i){var m=v.length;h=0===l?v[y?m-1:0][1]:1===l?v[y?0:m-1][1]:v[Math.floor((m-1)/2)][1]}}else{var x=o.vertexcolor||o.facecolor||o.color;h=s.isArrayOrTypedArray(x)?x[l]||x[0]:x}p.attr("d",r[0]),h?p.call(c.fill,h):p.call(function(r){if(r.size()){var a="legendfill-"+o.uid;u.gradient(r,n,a,g(y,"radial"===i),v,"fill")}})})}).each(function(r){var n=r[0].trace,i="waterfall"===n.type;if(r[0]._distinct&&i){var o=r[0].trace[r[0].dir].marker;return r[0].mc=o.color,r[0].mlw=o.line.width,r[0].mlc=o.line.color,k(r,this,"waterfall")}var s=[];n.visible&&i&&(s=r[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var l=a.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(s);l.enter().append("path").classed("legendwaterfall",!0).attr("transform",w).style("stroke-miterlimit",1),l.exit().remove(),l.each(function(r){var i=a.select(this),o=n[r[0]].marker,s=T(void 0,o.line,5,2);i.attr("d",r[1]).style("stroke-width",s+"px").call(c.fill,o.color),s&&i.call(c.stroke,o.line.color)})}).each(function(r){k(r,this,"funnel")}).each(function(r){k(r,this)}).each(function(r){var i=r[0].trace,l=a.select(this).select("g.legendpoints").selectAll("path.legendbox").data(i.visible&&o.traceIs(i,"box-violin")?[r]:[]);l.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",w),l.exit().remove(),l.each(function(){var r=a.select(this);if("all"!==i.boxpoints&&"all"!==i.points||0!==c.opacity(i.fillcolor)||0!==c.opacity((i.line||{}).color)){var o=T(void 0,i.line,5,2);r.style("stroke-width",o+"px").call(c.fill,i.fillcolor),o&&c.stroke(r,i.line.color)}else{var f=s.minExtend(i,{marker:{size:b?12:s.constrain(i.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});l.call(u.pointStyle,f,n)}})}).each(function(r){A(r,this,"funnelarea")}).each(function(r){A(r,this,"pie")}).each(function(r){var i,o,l=y(r),c=l.showFill,p=l.showLine,d=l.showGradientLine,v=l.showGradientFill,m=l.anyFill,x=l.anyLine,b=r[0],w=b.trace,k=f(w),A=k.colorscale,M=k.reversescale,S=h.hasMarkers(w)||!m?"M5,0":x?"M5,-2":"M5,-3",E=a.select(this),L=E.select(".legendfill").selectAll("path").data(c||v?[r]:[]);if(L.enter().append("path").classed("js-fill",!0),L.exit().remove(),L.attr("d",S+"h"+_+"v6h-"+_+"z").call(function(r){if(r.size()){if(c)u.fillGroupStyle(r,n);else{var i="legendfill-"+w.uid;u.gradient(r,n,i,g(M),A,"fill")}}}),p||d){var C=T(void 0,w.line,10,5);o=s.minExtend(w,{line:{width:C}}),i=[s.minExtend(b,{trace:o})]}var O=E.select(".legendlines").selectAll("path").data(p||d?[i]:[]);O.enter().append("path").classed("js-line",!0),O.exit().remove(),O.attr("d",S+(d?"l"+_+",0.0001":"h"+_)).call(p?u.lineGroupStyle:function(r){if(r.size()){var i="legendline-"+w.uid;u.lineGroupStyle(r),u.gradient(r,n,i,g(M),A,"stroke")}})}).each(function(r){var i,o,l=y(r),c=l.anyFill,f=l.anyLine,p=l.showLine,d=l.showMarker,v=r[0],g=v.trace,m=!d&&!f&&!c&&h.hasText(g);function x(r,n,i,a){var o=s.nestedProperty(g,r).get(),l=s.isArrayOrTypedArray(o)&&n?n(o):o;if(b&&l&&void 0!==a&&(l=a),i){if(l<i[0])return i[0];if(l>i[1])return i[1]}return l}function _(r){return v._distinct&&v.index&&r[v.index]?r[v.index]:r[0]}if(d||m||p){var T={},k={};if(d){T.mc=x("marker.color",_),T.mx=x("marker.symbol",_),T.mo=x("marker.opacity",s.mean,[.2,1]),T.mlc=x("marker.line.color",_),T.mlw=x("marker.line.width",s.mean,[0,5],2),k.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var A=x("marker.size",s.mean,[2,16],12);T.ms=A,k.marker.size=A}p&&(k.line={width:x("line.width",_,[0,10],5)}),m&&(T.tx="Aa",T.tp=x("textposition",_),T.ts=10,T.tc=x("textfont.color",_),T.tf=x("textfont.family",_)),i=[s.minExtend(v,T)],(o=s.minExtend(g,k)).selectedpoints=null,o.texttemplate=null}var M=a.select(this).select("g.legendpoints"),S=M.selectAll("path.scatterpts").data(d?i:[]);S.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",w),S.exit().remove(),S.call(u.pointStyle,o,n),d&&(i[0].mrc=3);var E=M.selectAll("g.pointtext").data(m?i:[]);E.enter().append("g").classed("pointtext",!0).append("text").attr("transform",w),E.exit().remove(),E.selectAll("text").call(u.textPointStyle,o,n)}).each(function(r){var n=r[0].trace,i=a.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(n.visible&&"candlestick"===n.type?[r,r]:[]);i.enter().append("path").classed("legendcandle",!0).attr("d",function(r,n){return n?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",w).style("stroke-miterlimit",1),i.exit().remove(),i.each(function(r,i){var o=a.select(this),s=n[i?"increasing":"decreasing"],l=T(void 0,s.line,5,2);o.style("stroke-width",l+"px").call(c.fill,s.fillcolor),l&&c.stroke(o,s.line.color)})}).each(function(r){var n=r[0].trace,i=a.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(n.visible&&"ohlc"===n.type?[r,r]:[]);i.enter().append("path").classed("legendohlc",!0).attr("d",function(r,n){return n?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",w).style("stroke-miterlimit",1),i.exit().remove(),i.each(function(r,i){var o=a.select(this),s=n[i?"increasing":"decreasing"],l=T(void 0,s.line,5,2);o.style("fill","none").call(u.dashLine,s.line.dash,l),l&&c.stroke(o,s.line.color)})})}},42068:function(r,n,i){"use strict";i(93348),r.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(r,n,i){"use strict";var a=i(73972),o=i(74875),s=i(41675),l=i(24255),u=i(34031).eraseActiveShape,c=i(71828),f=c._,h=r.exports={};function p(r,n){var i,o,l=n.currentTarget,u=l.getAttribute("data-attr"),c=l.getAttribute("data-val")||!0,f=r._fullLayout,h={},p=s.list(r,null,!0),d=f._cartesianSpikesEnabled;if("zoom"===u){var v,g="in"===c?.5:2,y=(1+g)/2,m=(1-g)/2;for(o=0;o<p.length;o++)if(!(i=p[o]).fixedrange){if(v=i._name,"auto"===c)h[v+".autorange"]=!0;else if("reset"===c)void 0===i._rangeInitial0&&void 0===i._rangeInitial1?h[v+".autorange"]=!0:void 0===i._rangeInitial0?(h[v+".autorange"]=i._autorangeInitial,h[v+".range"]=[null,i._rangeInitial1]):void 0===i._rangeInitial1?(h[v+".range"]=[i._rangeInitial0,null],h[v+".autorange"]=i._autorangeInitial):h[v+".range"]=[i._rangeInitial0,i._rangeInitial1],void 0!==i._showSpikeInitial&&(h[v+".showspikes"]=i._showSpikeInitial,"on"!==d||i._showSpikeInitial||(d="off"));else{var x=[i.r2l(i.range[0]),i.r2l(i.range[1])],b=[y*x[0]+m*x[1],y*x[1]+m*x[0]];h[v+".range[0]"]=i.l2r(b[0]),h[v+".range[1]"]=i.l2r(b[1])}}}else"hovermode"!==u||"x"!==c&&"y"!==c||(c=f._isHoriz?"y":"x",l.setAttribute("data-val",c)),h[u]=c;f._cartesianSpikesEnabled=d,a.call("_guiRelayout",r,h)}function d(r,n){for(var i=n.currentTarget,o=i.getAttribute("data-attr"),s=i.getAttribute("data-val")||!0,l=r._fullLayout._subplots.gl3d||[],u={},c=o.split("."),f=0;f<l.length;f++)u[l[f]+"."+c[1]]=s;var h="pan"===s?s:"zoom";u.dragmode=h,a.call("_guiRelayout",r,u)}function v(r,n){for(var i=n.currentTarget.getAttribute("data-attr"),o="resetLastSave"===i,s="resetDefault"===i,l=r._fullLayout,u=l._subplots.gl3d||[],c={},f=0;f<u.length;f++){var h,p=u[f],d=p+".camera",v=p+".aspectratio",g=p+".aspectmode",y=l[p]._scene;o?(c[d+".up"]=y.viewInitial.up,c[d+".eye"]=y.viewInitial.eye,c[d+".center"]=y.viewInitial.center,h=!0):s&&(c[d+".up"]=null,c[d+".eye"]=null,c[d+".center"]=null,h=!0),h&&(c[v+".x"]=y.viewInitial.aspectratio.x,c[v+".y"]=y.viewInitial.aspectratio.y,c[v+".z"]=y.viewInitial.aspectratio.z,c[g]=y.viewInitial.aspectmode)}a.call("_guiRelayout",r,c)}function g(r,n){var i=n.currentTarget,a=i._previousVal,o=r._fullLayout,s=o._subplots.gl3d||[],l=["xaxis","yaxis","zaxis"],u={},c={};if(a)c=a,i._previousVal=null;else{for(var f=0;f<s.length;f++){var h=s[f],p=o[h],d=h+".hovermode";u[d]=p.hovermode,c[d]=!1;for(var v=0;v<3;v++){var g=l[v],y=h+"."+g+".showspikes";c[y]=!1,u[y]=p[g].showspikes}}i._previousVal=u}return c}function y(r,n){for(var i=n.currentTarget,o=i.getAttribute("data-attr"),s=i.getAttribute("data-val")||!0,l=r._fullLayout,u=l._subplots.geo||[],c=0;c<u.length;c++){var f=u[c],h=l[f];if("zoom"===o){var p=h.projection.scale,d="in"===s?2*p:.5*p;a.call("_guiRelayout",r,f+".projection.scale",d)}}"reset"===o&&_(r,"geo")}function m(r){var n=r._fullLayout;return!n.hovermode&&(n._has("cartesian")?n._isHoriz?"y":"x":"closest")}function x(r){var n=m(r);a.call("_guiRelayout",r,"hovermode",n)}function b(r,n){for(var i=n.currentTarget.getAttribute("data-val"),o=r._fullLayout,s=o._subplots.mapbox||[],l={},u=0;u<s.length;u++){var c=s[u],f=o[c].zoom,h="in"===i?1.05*f:f/1.05;l[c+".zoom"]=h}a.call("_guiRelayout",r,l)}function _(r,n){for(var i=r._fullLayout,o=i._subplots[n]||[],s={},l=0;l<o.length;l++)for(var u=o[l],c=i[u]._subplot.viewInitial,f=Object.keys(c),h=0;h<f.length;h++){var p=f[h];s[u+"."+p]=c[p]}a.call("_guiRelayout",r,s)}h.toImage={name:"toImage",title:function(r){var n=(r._context.toImageButtonOptions||{}).format||"png";return f(r,"png"===n?"Download plot as a png":"Download plot")},icon:l.camera,click:function(r){var n=r._context.toImageButtonOptions,i={format:n.format||"png"};c.notifier(f(r,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==i.format&&c.isIE()&&(c.notifier(f(r,"IE only supports svg.  Changing format to svg."),"long"),i.format="svg"),["filename","width","height","scale"].forEach(function(r){r in n&&(i[r]=n[r])}),a.call("downloadImage",r,i).then(function(n){c.notifier(f(r,"Snapshot succeeded")+" - "+n,"long")}).catch(function(){c.notifier(f(r,"Sorry, there was a problem downloading your snapshot!"),"long")})}},h.sendDataToCloud={name:"sendDataToCloud",title:function(r){return f(r,"Edit in Chart Studio")},icon:l.disk,click:function(r){o.sendDataToCloud(r)}},h.editInChartStudio={name:"editInChartStudio",title:function(r){return f(r,"Edit in Chart Studio")},icon:l.pencil,click:function(r){o.sendDataToCloud(r)}},h.zoom2d={name:"zoom2d",_cat:"zoom",title:function(r){return f(r,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:p},h.pan2d={name:"pan2d",_cat:"pan",title:function(r){return f(r,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:p},h.select2d={name:"select2d",_cat:"select",title:function(r){return f(r,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:p},h.lasso2d={name:"lasso2d",_cat:"lasso",title:function(r){return f(r,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:p},h.drawclosedpath={name:"drawclosedpath",title:function(r){return f(r,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:l.drawclosedpath,click:p},h.drawopenpath={name:"drawopenpath",title:function(r){return f(r,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:l.drawopenpath,click:p},h.drawline={name:"drawline",title:function(r){return f(r,"Draw line")},attr:"dragmode",val:"drawline",icon:l.drawline,click:p},h.drawrect={name:"drawrect",title:function(r){return f(r,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:l.drawrect,click:p},h.drawcircle={name:"drawcircle",title:function(r){return f(r,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:l.drawcircle,click:p},h.eraseshape={name:"eraseshape",title:function(r){return f(r,"Erase active shape")},icon:l.eraseshape,click:u},h.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(r){return f(r,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:p},h.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(r){return f(r,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:p},h.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(r){return f(r,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:p},h.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(r){return f(r,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:p},h.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(r){return f(r,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:p},h.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(r){return f(r,"Compare data on hover")},attr:"hovermode",val:function(r){return r._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:p},h.zoom3d={name:"zoom3d",_cat:"zoom",title:function(r){return f(r,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:d},h.pan3d={name:"pan3d",_cat:"pan",title:function(r){return f(r,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:d},h.orbitRotation={name:"orbitRotation",title:function(r){return f(r,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:d},h.tableRotation={name:"tableRotation",title:function(r){return f(r,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:d},h.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(r){return f(r,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:v},h.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(r){return f(r,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:v},h.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(r,n){var i=g(r,n);a.call("_guiRelayout",r,i)}},h.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(r){return f(r,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:y},h.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(r){return f(r,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:y},h.resetGeo={name:"resetGeo",_cat:"reset",title:function(r){return f(r,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:y},h.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:x},h.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:x},h.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:x},h.resetViewSankey={name:"resetSankeyGroup",title:function(r){return f(r,"Reset view")},icon:l.home,click:function(r){for(var n={"node.groups":[],"node.x":[],"node.y":[]},i=0;i<r._fullData.length;i++){var o=r._fullData[i]._viewInitial;n["node.groups"].push(o.node.groups.slice()),n["node.x"].push(o.node.x.slice()),n["node.y"].push(o.node.y.slice())}a.call("restyle",r,n)}},h.toggleHover={name:"toggleHover",title:function(r){return f(r,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(r,n){var i=g(r,n);i.hovermode=m(r),a.call("_guiRelayout",r,i)}},h.resetViews={name:"resetViews",title:function(r){return f(r,"Reset views")},icon:l.home,click:function(r,n){var i=n.currentTarget;i.setAttribute("data-attr","zoom"),i.setAttribute("data-val","reset"),p(r,n),i.setAttribute("data-attr","resetLastSave"),v(r,n),_(r,"geo"),_(r,"mapbox")}},h.toggleSpikelines={name:"toggleSpikelines",title:function(r){return f(r,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(r){var n=r._fullLayout,i=n._cartesianSpikesEnabled;n._cartesianSpikesEnabled="on"===i?"off":"on",a.call("_guiRelayout",r,function(r){for(var n="on"===r._fullLayout._cartesianSpikesEnabled,i=s.list(r,null,!0),a={},o=0;o<i.length;o++){var l=i[o];a[l._name+".showspikes"]=!!n||l._showSpikeInitial}return a}(r))}},h.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(r){return f(r,"Reset view")},attr:"reset",icon:l.home,click:function(r){_(r,"mapbox")}},h.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(r){return f(r,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:b},h.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(r){return f(r,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:b}},93348:function(r,n,i){"use strict";var a=i(26023),o=Object.keys(a),s=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],l=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(s),u=[];o.forEach(function(r){!function(r){if(-1===l.indexOf(r._cat||r.name)){var n=r.name,i=(r._cat||r.name).toLowerCase();-1===u.indexOf(n)&&u.push(n),-1===u.indexOf(i)&&u.push(i)}}(a[r])}),u.sort(),r.exports={DRAW_MODES:s,backButtons:l,foreButtons:u}},35750:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(44467),l=i(42068);r.exports=function(r,n){var i=r.modebar||{},u=s.newContainer(n,"modebar");function c(r,n){return a.coerce(i,u,l,r,n)}c("orientation"),c("bgcolor",o.addOpacity(n.paper_bgcolor,.5));var f=o.contrast(o.rgb(n.modebar.bgcolor));c("color",o.addOpacity(f,.3)),c("activecolor",o.addOpacity(f,.7)),c("uirevision",n.uirevision),c("add"),c("remove")}},64168:function(r,n,i){"use strict";r.exports={moduleType:"component",name:"modebar",layoutAttributes:i(42068),supplyLayoutDefaults:i(35750),manage:i(14192)}},14192:function(r,n,i){"use strict";var a=i(41675),o=i(34098),s=i(73972),l=i(23469).isUnifiedHover,u=i(37676),c=i(26023),f=i(93348).DRAW_MODES,h=i(71828).extendDeep;r.exports=function(r){var n=r._fullLayout,i=r._context,p=n._modeBar;if(i.displayModeBar||i.watermark){if(!Array.isArray(i.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(i.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var d,v=i.modeBarButtons;d=Array.isArray(v)&&v.length?function(r){for(var n=h([],r),i=0;i<n.length;i++)for(var a=n[i],o=0;o<a.length;o++){var s=a[o];if("string"==typeof s){if(void 0===c[s])throw Error("*modeBarButtons* configuration options invalid button name");n[i][o]=c[s]}}return n}(v):!i.displayModeBar&&i.watermark?[]:function(r){var n=r._fullLayout,i=r._fullData,u=r._context;function h(r,n){if("string"==typeof n){if(n.toLowerCase()===r.toLowerCase())return!0}else{var i=n.name,a=n._cat||n.name;if(i===r||a===r.toLowerCase())return!0}return!1}var p=n.modebar.add;"string"==typeof p&&(p=[p]);var d=n.modebar.remove;"string"==typeof d&&(d=[d]);var v=u.modeBarButtonsToAdd.concat(p.filter(function(r){for(var n=0;n<u.modeBarButtonsToRemove.length;n++)if(h(r,u.modeBarButtonsToRemove[n]))return!1;return!0})),g=u.modeBarButtonsToRemove.concat(d.filter(function(r){for(var n=0;n<u.modeBarButtonsToAdd.length;n++)if(h(r,u.modeBarButtonsToAdd[n]))return!1;return!0})),y=n._has("cartesian"),m=n._has("gl3d"),x=n._has("geo"),b=n._has("pie"),_=n._has("funnelarea"),w=n._has("gl2d"),T=n._has("ternary"),k=n._has("mapbox"),A=n._has("polar"),M=n._has("smith"),S=n._has("sankey"),E=function(r){for(var n=a.list({_fullLayout:r},null,!0),i=0;i<n.length;i++)if(!n[i].fixedrange)return!1;return!0}(n),L=l(n.hovermode),C=[];function O(r){if(r.length){for(var n=[],i=0;i<r.length;i++){for(var a=r[i],o=c[a],s=o.name.toLowerCase(),l=(o._cat||o.name).toLowerCase(),u=!1,f=0;f<g.length;f++){var h=g[f].toLowerCase();if(h===s||h===l){u=!0;break}}u||n.push(c[a])}C.push(n)}}var P=["toImage"];u.showEditInChartStudio?P.push("editInChartStudio"):u.showSendToCloud&&P.push("sendDataToCloud"),O(P);var I=[],D=[],z=[],R=[];(y||w||b||_||T)+x+m+k+A+M>1?(D=["toggleHover"],z=["resetViews"]):x?(I=["zoomInGeo","zoomOutGeo"],D=["hoverClosestGeo"],z=["resetGeo"]):m?(D=["hoverClosest3d"],z=["resetCameraDefault3d","resetCameraLastSave3d"]):k?(I=["zoomInMapbox","zoomOutMapbox"],D=["toggleHover"],z=["resetViewMapbox"]):w?D=["hoverClosestGl2d"]:b?D=["hoverClosestPie"]:S?(D=["hoverClosestCartesian","hoverCompareCartesian"],z=["resetViewSankey"]):D=["toggleHover"],y&&(D=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(r){for(var n=0;n<r.length;n++)if(!s.traceIs(r[n],"noHover"))return!1;return!0}(i)||L)&&(D=[]),(y||w)&&!E&&(I=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"===z[0]||(z=["resetScale2d"])),m?R=["zoom3d","pan3d","orbitRotation","tableRotation"]:(y||w)&&!E||T?R=["zoom2d","pan2d"]:k||x?R=["pan2d"]:A&&(R=["zoom2d"]),function(r){for(var n=!1,i=0;i<r.length&&!n;i++){var a=r[i];a._module&&a._module.selectPoints&&(s.traceIs(a,"scatter-like")?(o.hasMarkers(a)||o.hasText(a))&&(n=!0):s.traceIs(a,"box-violin")&&"all"!==a.boxpoints&&"all"!==a.points||(n=!0))}return n}(i)&&R.push("select2d","lasso2d");var F=[],B=function(r){-1===F.indexOf(r)&&-1!==D.indexOf(r)&&F.push(r)};if(Array.isArray(v)){for(var N=[],j=0;j<v.length;j++){var U=v[j];"string"==typeof U?(U=U.toLowerCase(),-1!==f.indexOf(U)?(n._has("mapbox")||n._has("cartesian"))&&R.push(U):"togglespikelines"===U?B("toggleSpikelines"):"togglehover"===U?B("toggleHover"):"hovercompare"===U?B("hoverCompareCartesian"):"hoverclosest"===U?(B("hoverClosestCartesian"),B("hoverClosestGeo"),B("hoverClosest3d"),B("hoverClosestGl2d"),B("hoverClosestPie")):"v1hovermode"===U&&(B("toggleHover"),B("hoverClosestCartesian"),B("hoverCompareCartesian"),B("hoverClosestGeo"),B("hoverClosest3d"),B("hoverClosestGl2d"),B("hoverClosestPie"))):N.push(U)}v=N}return O(R),O(I.concat(z)),O(F),function(r,n){if(n.length){if(Array.isArray(n[0]))for(var i=0;i<n.length;i++)r.push(n[i]);else r.push(n)}return r}(C,v)}(r),p?p.update(r,d):n._modeBar=u(r,d)}else p&&(p.destroy(),delete n._modeBar)}},37676:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(71828),l=i(24255),u=i(11506).version,c=new DOMParser;function f(r){this.container=r.container,this.element=document.createElement("div"),this.update(r.graphInfo,r.buttons),this.container.appendChild(this.element)}var h=f.prototype;h.update=function(r,n){this.graphInfo=r;var i=this.graphInfo._context,a=this.graphInfo._fullLayout,o="modebar-"+a._uid;this.element.setAttribute("id",o),this._uid=o,this.element.className="modebar","hover"===i.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===a.modebar.orientation&&(this.element.className+=" vertical",n=n.reverse());var l=a.modebar,u="hover"===i.displayModeBar?".js-plotly-plot .plotly:hover ":"";s.deleteRelatedStyleRule(o),s.addRelatedStyleRule(o,u+"#"+o+" .modebar-group","background-color: "+l.bgcolor),s.addRelatedStyleRule(o,"#"+o+" .modebar-btn .icon path","fill: "+l.color),s.addRelatedStyleRule(o,"#"+o+" .modebar-btn:hover .icon path","fill: "+l.activecolor),s.addRelatedStyleRule(o,"#"+o+" .modebar-btn.active .icon path","fill: "+l.activecolor);var c=!this.hasButtons(n),f=this.hasLogo!==i.displaylogo,h=this.locale!==i.locale;if(this.locale=i.locale,(c||f||h)&&(this.removeAllButtons(),this.updateButtons(n),i.watermark||i.displaylogo)){var p=this.getLogo();i.watermark&&(p.className=p.className+" watermark"),"v"===a.modebar.orientation?this.element.insertBefore(p,this.element.childNodes[0]):this.element.appendChild(p),this.hasLogo=!0}this.updateActiveButton()},h.updateButtons=function(r){var n=this;this.buttons=r,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=n.createGroup();r.forEach(function(r){var a=r.name;if(!a)throw Error("must provide button 'name' in button config");if(-1!==n.buttonsNames.indexOf(a))throw Error("button name '"+a+"' is taken");n.buttonsNames.push(a);var o=n.createButton(r);n.buttonElements.push(o),i.appendChild(o)}),n.element.appendChild(i)})},h.createGroup=function(){var r=document.createElement("div");return r.className="modebar-group",r},h.createButton=function(r){var n=this,i=document.createElement("a");i.setAttribute("rel","tooltip"),i.className="modebar-btn";var o=r.title;void 0===o?o=r.name:"function"==typeof o&&(o=o(this.graphInfo)),(o||0===o)&&i.setAttribute("data-title",o),void 0!==r.attr&&i.setAttribute("data-attr",r.attr);var s=r.val;if(void 0!==s&&("function"==typeof s&&(s=s(this.graphInfo)),i.setAttribute("data-val",s)),"function"!=typeof r.click)throw Error("must provide button 'click' function in button config");i.addEventListener("click",function(i){r.click(n.graphInfo,i),n.updateActiveButton(i.currentTarget)}),i.setAttribute("data-toggle",r.toggle||!1),r.toggle&&a.select(i).classed("active",!0);var u=r.icon;return"function"==typeof u?i.appendChild(u()):i.appendChild(this.createIcon(u||l.question)),i.setAttribute("data-gravity",r.gravity||"n"),i},h.createIcon=function(r){var n,i=o(r.height)?Number(r.height):r.ascent-r.descent,a="http://www.w3.org/2000/svg";if(r.path){(n=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,r.width,i].join(" ")),n.setAttribute("class","icon");var s=document.createElementNS(a,"path");s.setAttribute("d",r.path),r.transform?s.setAttribute("transform",r.transform):void 0!==r.ascent&&s.setAttribute("transform","matrix(1 0 0 -1 0 "+r.ascent+")"),n.appendChild(s)}return r.svg&&(n=c.parseFromString(r.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},h.updateActiveButton=function(r){var n=this.graphInfo._fullLayout,i=void 0!==r?r.getAttribute("data-attr"):null;this.buttonElements.forEach(function(r){var o=r.getAttribute("data-val")||!0,l=r.getAttribute("data-attr"),u="true"===r.getAttribute("data-toggle"),c=a.select(r);if(u)l===i&&c.classed("active",!c.classed("active"));else{var f=null===l?l:s.nestedProperty(n,l).get();c.classed("active",f===o)}})},h.hasButtons=function(r){var n=this.buttons;if(!n||r.length!==n.length)return!1;for(var i=0;i<r.length;++i){if(r[i].length!==n[i].length)return!1;for(var a=0;a<r[i].length;a++)if(r[i][a].name!==n[i][a].name)return!1}return!0},h.getLogo=function(){var r=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly.js")+" (v"+u+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(l.newplotlylogo)),r.appendChild(n),r},h.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},h.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},r.exports=function(r,n){var i=r._fullLayout,o=new f({graphInfo:r,container:i._modebardiv.node(),buttons:n});return i._privateplot&&a.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}},37113:function(r,n,i){"use strict";var a=i(41940),o=i(22399),s=(0,i(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});r.exports={visible:{valType:"boolean",editType:"plot"},buttons:s,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a({editType:"plot"}),bgcolor:{valType:"color",dflt:o.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(r){"use strict";r.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(44467),l=i(85501),u=i(37113),c=i(89573);function f(r,n,i,o){var s=o.calendar;function l(i,o){return a.coerce(r,n,u.buttons,i,o)}if(l("visible")){var c=l("step");"all"!==c&&(s&&"gregorian"!==s&&("month"===c||"year"===c)?n.stepmode="backward":l("stepmode"),l("count")),l("label")}}r.exports=function(r,n,i,h,p){var d=r.rangeselector||{},v=s.newContainer(n,"rangeselector");function g(r,n){return a.coerce(d,v,u,r,n)}if(g("visible",l(d,v,{name:"buttons",handleItemDefaults:f,calendar:p}).length>0)){var y=function(r,n,i){for(var a=i.filter(function(i){return n[i].anchor===r._id}),o=0,s=0;s<a.length;s++){var l=n[a[s]].domain;l&&(o=Math.max(l[1],o))}return[r.domain[0],o+c.yPad]}(n,i,h);g("x",y[0]),g("y",y[1]),a.noneOrAll(r,n,["x","y"]),g("xanchor"),g("yanchor"),a.coerceFont(g,"font",i.font);var m=g("bgcolor");g("activecolor",o.contrast(m,c.lightAmount,c.darkAmount)),g("bordercolor"),g("borderwidth")}}},21598:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(74875),l=i(7901),u=i(91424),c=i(71828),f=c.strTranslate,h=i(63893),p=i(41675),d=i(18783),v=d.LINE_SPACING,g=d.FROM_TL,y=d.FROM_BR,m=i(89573),x=i(70565);function b(r){return r._id}function _(r,n,i){var a=c.ensureSingle(r,"rect","selector-rect",function(r){r.attr("shape-rendering","crispEdges")});a.attr({rx:m.rx,ry:m.ry}),a.call(l.stroke,n.bordercolor).call(l.fill,i._isActive||i._isHovered?n.activecolor:n.bgcolor).style("stroke-width",n.borderwidth+"px")}function w(r,n,i,a){var o;c.ensureSingle(r,"text","selector-text",function(r){r.attr("text-anchor","middle")}).call(u.font,n.font).text((o=a._fullLayout._meta,i.label?o?c.templateString(i.label,o):i.label:"all"===i.step?"all":i.count+i.step.charAt(0))).call(function(r){h.convertToTspans(r,a)})}r.exports=function(r){var n=r._fullLayout._infolayer.selectAll(".rangeselector").data(function(r){for(var n=p.list(r,"x",!0),i=[],a=0;a<n.length;a++){var o=n[a];o.rangeselector&&o.rangeselector.visible&&i.push(o)}return i}(r),b);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(n){var i,l,p,d,b,T,k,A,M,S=a.select(this),E=n.rangeselector,L=S.selectAll("g.button").data(c.filterVisible(E.buttons));L.enter().append("g").classed("button",!0),L.exit().remove(),L.each(function(i){var s=a.select(this),l=x(n,i);i._isActive=function(r,n,i){if("all"===n.step)return!0===r.autorange;var a=Object.keys(i);return r.range[0]===i[a[0]]&&r.range[1]===i[a[1]]}(n,i,l),s.call(_,E,i),s.call(w,E,i,r),s.on("click",function(){r._dragged||o.call("_guiRelayout",r,l)}),s.on("mouseover",function(){i._isHovered=!0,s.call(_,E,i)}),s.on("mouseout",function(){i._isHovered=!1,s.call(_,E,i)})}),i=n._name,l=0,p=0,d=E.borderwidth,L.each(function(){var r=a.select(this).select(".selector-text"),n=Math.max(E.font.size*v*h.lineCount(r),16)+3;p=Math.max(p,n)}),L.each(function(){var r=a.select(this),n=r.select(".selector-rect"),i=r.select(".selector-text"),o=i.node()&&u.bBox(i.node()).width,s=E.font.size*v,c=h.lineCount(i),g=Math.max(o+10,m.minButtonWidth);r.attr("transform",f(d+l,d)),n.attr({x:0,y:0,width:g,height:p}),h.positionText(i,g/2,p/2-(c-1)*s/2+3),l+=g+5}),T=(b=r._fullLayout._size).l+b.w*E.x,k=b.t+b.h*(1-E.y),A="left",c.isRightAnchor(E)&&(T-=l,A="right"),c.isCenterAnchor(E)&&(T-=l/2,A="center"),M="top",c.isBottomAnchor(E)&&(k-=p,M="bottom"),c.isMiddleAnchor(E)&&(k-=p/2,M="middle"),l=Math.ceil(l),p=Math.ceil(p),T=Math.round(T),k=Math.round(k),s.autoMargin(r,i+"-range-selector",{x:E.x,y:E.y,l:l*g[A],r:l*y[A],b:p*y[M],t:p*g[M]}),S.attr("transform",f(T,k))})}},70565:function(r,n,i){"use strict";var a=i(81041),o=i(71828).titleCase;r.exports=function(r,n){var i=r._name,s={};if("all"===n.step)s[i+".autorange"]=!0;else{var l=function(r,n){var i,s=r.range,l=new Date(r.r2l(s[1])),u=a["utc"+o(n.step)],c=n.count;switch(n.stepmode){case"backward":i=r.l2r(+u.offset(l,-c));break;case"todate":var f=u.offset(l,-c);i=r.l2r(+u.ceil(f))}return[i,s[1]]}(r,n);s[i+".range[0]"]=l[0],s[i+".range[1]"]=l[1]}return s}},97218:function(r,n,i){"use strict";r.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:i(37113)}}},layoutAttributes:i(37113),handleDefaults:i(28674),draw:i(21598)}},75148:function(r,n,i){"use strict";var a=i(22399);r.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(r,n,i){"use strict";var a=i(41675).list,o=i(71739).getAutoRange,s=i(73251);r.exports=function(r){for(var n=a(r,"x",!0),i=0;i<n.length;i++){var l=n[i],u=l[s.name];u&&u.visible&&u.autorange&&(u._input.autorange=!0,u._input.range=u.range=o(r,l))}}},73251:function(r){"use strict";r.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(r,n,i){"use strict";var a=i(71828),o=i(44467),s=i(41675),l=i(75148),u=i(47850);r.exports=function(r,n,i){var c=r[i],f=n[i];if(c.rangeslider||n._requestRangeslider[f._id]){a.isPlainObject(c.rangeslider)||(c.rangeslider={});var h,p,d=c.rangeslider,v=o.newContainer(f,"rangeslider");if(T("visible")){T("bgcolor",n.plot_bgcolor),T("bordercolor"),T("borderwidth"),T("thickness"),T("autorange",!f.isValidRange(d.range)),T("range");var g=n._subplots;if(g)for(var y=g.cartesian.filter(function(r){return r.substr(0,r.indexOf("y"))===s.name2id(i)}).map(function(r){return r.substr(r.indexOf("y"),r.length)}),m=a.simpleMap(y,s.id2name),x=0;x<m.length;x++){var b=m[x];h=d[b]||{},p=o.newContainer(v,b,"yaxis");var _,w=n[b];h.range&&w.isValidRange(h.range)&&(_="fixed"),"match"!==k("rangemode",_)&&k("range",w.range.slice())}v._input=d}}function T(r,n){return a.coerce(d,v,l,r,n)}function k(r,n){return a.coerce(h,p,u,r,n)}}},72413:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(74875),l=i(71828),u=l.strTranslate,c=i(91424),f=i(7901),h=i(92998),p=i(93612),d=i(41675),v=i(28569),g=i(6964),y=i(73251);function m(r){return"number"==typeof r.clientX?r.clientX:r.touches&&r.touches.length>0?r.touches[0].clientX:0}function x(r,n,i,a){var o=l.ensureSingle(r,"rect",y.bgClassName,function(r){r.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),s=a.borderwidth%2==0?a.borderwidth:a.borderwidth-1,h=-a._offsetShift,p=c.crispRound(n,a.borderwidth);o.attr({width:a._width+s,height:a._height+s,transform:u(h,h),"stroke-width":p}).call(f.stroke,a.bordercolor).call(f.fill,a.bgcolor)}function b(r,n,i,a){var o=n._fullLayout;l.ensureSingleById(o._topdefs,"clipPath",a._clipId,function(r){r.append("rect").attr({x:0,y:0})}).select("rect").attr({width:a._width,height:a._height})}function _(r,n,i,o){var u,f=n.calcdata,h=r.selectAll("g."+y.rangePlotClassName).data(i._subplotsWith,l.identity);h.enter().append("g").attr("class",function(r){return y.rangePlotClassName+" "+r}).call(c.setClipUrl,o._clipId,n),h.order(),h.exit().remove(),h.each(function(r,l){var c=a.select(this),h=d.getFromId(n,r,"y"),v=h._name,g=o[v],y={data:[],layout:{xaxis:{type:i.type,domain:[0,1],range:o.range.slice(),calendar:i.calendar},width:o._width,height:o._height,margin:{t:0,b:0,l:0,r:0}},_context:n._context};i.rangebreaks&&(y.layout.xaxis.rangebreaks=i.rangebreaks),y.layout[v]={type:h.type,domain:[0,1],range:"match"!==g.rangemode?g.range.slice():h.range.slice(),calendar:h.calendar},h.rangebreaks&&(y.layout[v].rangebreaks=h.rangebreaks),s.supplyDefaults(y);var m=y._fullLayout.xaxis,x=y._fullLayout[v];m.clearCalc(),m.setScale(),x.clearCalc(),x.setScale();var b={id:r,plotgroup:c,xaxis:m,yaxis:x,isRangePlot:!0};0===l?u=b:(b.mainplot="xy",b.mainplotinfo=u),p.rangePlot(n,b,function(r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a],s=o[0].trace;s.xaxis+s.yaxis===n&&i.push(o)}return i}(f,r))})}function w(r,n,i,a,o){l.ensureSingle(r,"rect",y.maskMinClassName,function(r){r.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",a._height).call(f.fill,y.maskColor),l.ensureSingle(r,"rect",y.maskMaxClassName,function(r){r.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",a._height).call(f.fill,y.maskColor),"match"!==o.rangemode&&(l.ensureSingle(r,"rect",y.maskMinOppAxisClassName,function(r){r.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",a._width).call(f.fill,y.maskOppAxisColor),l.ensureSingle(r,"rect",y.maskMaxOppAxisClassName,function(r){r.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",a._width).style("border-top",y.maskOppBorder).call(f.fill,y.maskOppAxisColor))}function T(r,n,i,a){n._context.staticPlot||l.ensureSingle(r,"rect",y.slideBoxClassName,function(r){r.attr({y:0,cursor:y.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:a._height,fill:y.slideBoxFill})}function k(r,n,i,a){var o=l.ensureSingle(r,"g",y.grabberMinClassName),s=l.ensureSingle(r,"g",y.grabberMaxClassName),u={x:0,width:y.handleWidth,rx:y.handleRadius,fill:f.background,stroke:f.defaultLine,"stroke-width":y.handleStrokeWidth,"shape-rendering":"crispEdges"},c={y:Math.round(a._height/4),height:Math.round(a._height/2)};l.ensureSingle(o,"rect",y.handleMinClassName,function(r){r.attr(u)}).attr(c),l.ensureSingle(s,"rect",y.handleMaxClassName,function(r){r.attr(u)}).attr(c);var h={width:y.grabAreaWidth,x:0,y:0,fill:y.grabAreaFill,cursor:n._context.staticPlot?void 0:y.grabAreaCursor};l.ensureSingle(o,"rect",y.grabAreaMinClassName,function(r){r.attr(h)}).attr("height",a._height),l.ensureSingle(s,"rect",y.grabAreaMaxClassName,function(r){r.attr(h)}).attr("height",a._height)}r.exports=function(r){for(var n=r._fullLayout,i=n._rangeSliderData,s=0;s<i.length;s++){var c=i[s][y.name];c._clipId=c._id+"-"+n._uid}var f=n._infolayer.selectAll("g."+y.containerClassName).data(i,function(r){return r._name});f.exit().each(function(r){var i=r[y.name];n._topdefs.select("#"+i._clipId).remove()}).remove(),0!==i.length&&(f.enter().append("g").classed(y.containerClassName,!0).attr("pointer-events","all"),f.each(function(i){var s=a.select(this),c=i[y.name],f=n[d.id2name(i.anchor)],p=c[d.id2name(i.anchor)];if(c.range){var A,M=l.simpleMap(c.range,i.r2l),S=l.simpleMap(i.range,i.r2l);A=S[0]<S[1]?[Math.min(M[0],S[0]),Math.max(M[1],S[1])]:[Math.max(M[0],S[0]),Math.min(M[1],S[1])],c.range=c._input.range=l.simpleMap(A,i.l2r)}i.cleanRange("rangeslider.range");var E=n._size,L=i.domain;c._width=E.w*(L[1]-L[0]);var C=Math.round(E.l+E.w*L[0]),O=Math.round(E.t+E.h*(1-i._counterDomainMin)+("bottom"===i.side?i._depth:0)+c._offsetShift+y.extraPad);s.attr("transform",u(C,O)),c._rl=l.simpleMap(c.range,i.r2l);var P=c._rl[0],I=c._rl[1],D=I-P;if(c.p2d=function(r){return r/c._width*D+P},c.d2p=function(r){return(r-P)/D*c._width},i.rangebreaks){var z=i.locateBreaks(P,I);if(z.length){var R,F,B=0;for(R=0;R<z.length;R++)B+=(F=z[R]).max-F.min;var N=c._width/(I-P-B),j=[-N*P];for(R=0;R<z.length;R++)F=z[R],j.push(j[j.length-1]-N*(F.max-F.min));for(c.d2p=function(r){for(var n=j[0],i=0;i<z.length;i++){var a=z[i];if(r>=a.max)n=j[i+1];else if(r<a.min)break}return n+N*r},R=0;R<z.length;R++)(F=z[R]).pmin=c.d2p(F.min),F.pmax=c.d2p(F.max);c.p2d=function(r){for(var n=j[0],i=0;i<z.length;i++){var a=z[i];if(r>=a.pmax)n=j[i+1];else if(r<a.pmin)break}return(r-n)/N}}}if("match"!==p.rangemode){var U=f.r2l(p.range[0]),V=f.r2l(p.range[1])-U;c.d2pOppAxis=function(r){return(r-U)/V*c._height}}s.call(x,r,i,c).call(b,r,i,c).call(_,r,i,c).call(w,r,i,c,p).call(T,r,i,c).call(k,r,i,c),function(r,n,i,s){if(!n._context.staticPlot){var u=r.select("rect."+y.slideBoxClassName).node(),c=r.select("rect."+y.grabAreaMinClassName).node(),f=r.select("rect."+y.grabAreaMaxClassName).node();r.on("mousedown",h),r.on("touchstart",h)}function h(){var h=a.event,p=h.target,d=m(h),y=d-r.node().getBoundingClientRect().left,x=s.d2p(i._rl[0]),b=s.d2p(i._rl[1]),_=v.coverSlip();function w(r){var h,v,w,T=+m(r)-d;switch(p){case u:if(w="ew-resize",x+T>i._length||b+T<0)return;h=x+T,v=b+T;break;case c:if(w="col-resize",x+T>i._length)return;h=x+T,v=b;break;case f:if(w="col-resize",b+T<0)return;h=x,v=b+T;break;default:w="ew-resize",h=y,v=y+T}if(v<h){var k=v;v=h,h=k}s._pixelMin=h,s._pixelMax=v,g(a.select(_),w),function(r,n,i,a){function s(r){return i.l2r(l.constrain(r,a._rl[0],a._rl[1]))}var u=s(a.p2d(a._pixelMin)),c=s(a.p2d(a._pixelMax));window.requestAnimationFrame(function(){o.call("_guiRelayout",n,i._name+".range",[u,c])})}(0,n,i,s)}function T(){_.removeEventListener("mousemove",w),_.removeEventListener("mouseup",T),this.removeEventListener("touchmove",w),this.removeEventListener("touchend",T),l.removeElement(_)}this.addEventListener("touchmove",w),this.addEventListener("touchend",T),_.addEventListener("mousemove",w),_.addEventListener("mouseup",T)}}(s,r,i,c),function(r,n,i,a,o,s){var c=y.handleWidth/2;function f(r){return l.constrain(r,0,a._width)}function h(r){return l.constrain(r,0,a._height)}function p(r){return l.constrain(r,-c,a._width+c)}var d=f(a.d2p(i._rl[0])),v=f(a.d2p(i._rl[1]));if(r.select("rect."+y.slideBoxClassName).attr("x",d).attr("width",v-d),r.select("rect."+y.maskMinClassName).attr("width",d),r.select("rect."+y.maskMaxClassName).attr("x",v).attr("width",a._width-v),"match"!==s.rangemode){var g=a._height-h(a.d2pOppAxis(o._rl[1])),m=a._height-h(a.d2pOppAxis(o._rl[0]));r.select("rect."+y.maskMinOppAxisClassName).attr("x",d).attr("height",g).attr("width",v-d),r.select("rect."+y.maskMaxOppAxisClassName).attr("x",d).attr("y",m).attr("height",a._height-m).attr("width",v-d),r.select("rect."+y.slideBoxClassName).attr("y",g).attr("height",m-g)}var x=Math.round(p(d-c))-.5,b=Math.round(p(v-c))+.5;r.select("g."+y.grabberMinClassName).attr("transform",u(x,.5)),r.select("g."+y.grabberMaxClassName).attr("transform",u(b,.5))}(s,0,i,c,f,p),"bottom"===i.side&&h.draw(r,i._id+"title",{propContainer:i,propName:i._name+".title",placeholder:n._dfltTitle.x,attributes:{x:i._offset+i._length/2,y:O+c._height+c._offsetShift+10+1.5*i.title.font.size,"text-anchor":"middle"}})}))}},549:function(r,n,i){"use strict";var a=i(41675),o=i(63893),s=i(73251),l=i(18783).LINE_SPACING,u=s.name;function c(r){var n=r&&r[u];return n&&n.visible}n.isVisible=c,n.makeData=function(r){var n=a.list({_fullLayout:r},"x",!0),i=r.margin,o=[];if(!r._has("gl2d"))for(var s=0;s<n.length;s++){var l=n[s];if(c(l)){o.push(l);var f=l[u];f._id=u+l._id,f._height=(r.height-i.b-i.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}r._rangeSliderData=o},n.autoMarginOpts=function(r,n){var i=r._fullLayout,a=n[u],c=n._id.charAt(0),f=0,h=0;return"bottom"===n.side&&(f=n._depth,n.title.text!==i._dfltTitle[c]&&(h=1.5*n.title.font.size+10+a._offsetShift+(n.title.text.match(o.BR_TAG_ALL)||[]).length*n.title.font.size*l)),{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:a._height+f+Math.max(i.margin.b,h),pad:s.extraPad+2*a._offsetShift}}},13137:function(r,n,i){"use strict";var a=i(71828),o=i(75148),s=i(47850),l=i(549);r.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a.extendFlat({},o,{yaxis:s})}}},layoutAttributes:i(75148),handleDefaults:i(26377),calcAutorange:i(88443),draw:i(72413),isVisible:l.isVisible,makeData:l.makeData,autoMarginOpts:l.autoMarginOpts}},47850:function(r){"use strict";r.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(r,n,i){"use strict";var a=i(50215),o=i(82196).line,s=i(79952).P,l=i(1426).extendFlat,u=i(30962).overrideAll,c=i(44467).templatedArray;i(24695),r.exports=u(c("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:l({},a.xref,{}),yref:l({},a.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:o.color,width:l({},o.width,{min:1,dflt:1}),dash:l({},s,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(r){"use strict";r.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(85501),l=i(8389),u=i(30477);function c(r,n,i){function s(i,o){return a.coerce(r,n,l,i,o)}var c=s("path"),f="path"!==s("type",c?"path":"rect");f&&delete n.path,s("opacity"),s("line.color"),s("line.width"),s("line.dash");for(var h=["x","y"],p=0;p<2;p++){var d,v,g,y=h[p],m={_fullLayout:i},x=o.coerceRef(r,n,m,y);if((d=o.getFromId(m,x))._selectionIndices.push(n._index),g=u.rangeToShapePosition(d),v=u.shapePositionToRange(d),f){var b=y+"0",_=y+"1",w=r[b],T=r[_];r[b]=v(r[b],!0),r[_]=v(r[_],!0),o.coercePosition(n,m,s,x,b),o.coercePosition(n,m,s,x,_);var k=n[b],A=n[_];void 0!==k&&void 0!==A&&(n[b]=g(k),n[_]=g(A),r[b]=w,r[_]=T)}}f&&a.noneOrAll(r,n,["x0","x1","y0","y1"])}r.exports=function(r,n){s(r,n,{name:"selections",handleItemDefaults:c});for(var i=n.selections,a=0;a<i.length;a++){var o=i[a];o&&void 0===o.path&&(void 0!==o.x0&&void 0!==o.x1&&void 0!==o.y0&&void 0!==o.y1||(n.selections[a]=null))}}},32485:function(r,n,i){"use strict";var a=i(60165).readPaths,o=i(42359),s=i(51873).clearOutlineControllers,l=i(7901),u=i(91424),c=i(44467).arrayEditor,f=i(30477),h=f.getPathString;function p(r){var n=r._fullLayout;for(var i in s(r),n._selectionLayer.selectAll("path").remove(),n._plots){var a=n._plots[i].selectionLayer;a&&a.selectAll("path").remove()}for(var o=0;o<n.selections.length;o++)v(r,o)}function d(r){return r._context.editSelection}function v(r,n){r._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+n+'"]').remove();var i=f.makeSelectionsOptionsAndPlotinfo(r,n),s=i.options,v=i.plotinfo;s._input&&function(i){var f=h(r,s),y={"data-index":n,"fill-rule":"evenodd",d:f},m=s.opacity,x="rgba(0,0,0,0)",b=s.line.color||l.contrast(r._fullLayout.plot_bgcolor),_=s.line.width,w=s.line.dash;_||(_=5,w="solid");var T=d(r)&&r._fullLayout._activeSelectionIndex===n;T&&(x=r._fullLayout.activeselection.fillcolor,m=r._fullLayout.activeselection.opacity);for(var k=[],A=1;A>=0;A--){var M=i.append("path").attr(y).style("opacity",A?.1:m).call(l.stroke,b).call(l.fill,x).call(u.dashLine,A?"solid":w,A?4+_:_);if(function(r,n,i){var a=i.xref+i.yref;u.setClipUrl(r,"clip"+n._fullLayout._uid+a,n)}(M,r,s),T){var S=c(r.layout,"selections",s);M.style({cursor:"move"});var E={element:M.node(),plotinfo:v,gd:r,editHelpers:S,isActiveSelection:!0};o(a(f,r),M,E)}else M.style("pointer-events",A?"all":"none");k[A]=M}var L=k[0];k[1].node().addEventListener("click",function(){return function(r,n){if(d(r)){var i=+n.node().getAttribute("data-index");if(i>=0){if(i===r._fullLayout._activeSelectionIndex)return void g(r);r._fullLayout._activeSelectionIndex=i,r._fullLayout._deactivateSelection=g,p(r)}}}(r,L)})}(r._fullLayout._selectionLayer)}function g(r){d(r)&&r._fullLayout._activeSelectionIndex>=0&&(s(r),delete r._fullLayout._activeSelectionIndex,p(r))}r.exports={draw:p,drawOne:v,activateLastSelection:function(r){if(d(r)){var n=r._fullLayout.selections.length-1;r._fullLayout._activeSelectionIndex=n,r._fullLayout._deactivateSelection=g,p(r)}}}},53777:function(r,n,i){"use strict";var a=i(79952).P,o=i(1426).extendFlat;r.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:o({},a,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(r){"use strict";r.exports=function(r,n,i){i("newselection.mode"),i("newselection.line.width")&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}},35855:function(r,n,i){"use strict";var a=i(64505).selectMode,o=i(51873).clearOutline,s=i(60165),l=s.readPaths,u=s.writePaths,c=s.fixDatesForPaths;r.exports=function(r,n){if(r.length){var i=r[0][0];if(i){var s=i.getAttribute("d"),f=n.gd,h=f._fullLayout.newselection,p=n.plotinfo,d=p.xaxis,v=p.yaxis,g=n.isActiveSelection,y=n.dragmode,m=(f.layout||{}).selections||[];if(!a(y)&&void 0!==g){var x=f._fullLayout._activeSelectionIndex;if(x<m.length)switch(f._fullLayout.selections[x].type){case"rect":y="select";break;case"path":y="lasso"}}var b,_=l(s,f,p,g),w={xref:d._id,yref:v._id,opacity:h.opacity,line:{color:h.line.color,width:h.line.width,dash:h.line.dash}};1===_.length&&(b=_[0]),b&&5===b.length&&"select"===y?(w.type="rect",w.x0=b[0][1],w.y0=b[0][2],w.x1=b[2][1],w.y1=b[2][2]):(w.type="path",d&&v&&c(_,d,v),w.path=u(_),b=null),o(f);for(var T=n.editHelpers,k=(T||{}).modifyItem,A=[],M=0;M<m.length;M++){var S=f._fullLayout.selections[M];if(S){if(A[M]=S._input,void 0!==g&&M===f._fullLayout._activeSelectionIndex)switch(S.type){case"rect":k("x0",w.x0),k("x1",w.x1),k("y0",w.y0),k("y1",w.y1);break;case"path":k("path",w.path)}}else A[M]=S}return void 0===g?(A.push(w),A):T?T.getUpdateObj():{}}}}},75549:function(r,n,i){"use strict";var a=i(71828).strTranslate;function o(r,n){switch(r.type){case"log":return r.p2d(n);case"date":return r.p2r(n,0,r.calendar);default:return r.p2r(n)}}r.exports={p2r:o,r2p:function(r,n){switch(r.type){case"log":return r.d2p(n);case"date":return r.r2p(n,0,r.calendar);default:return r.r2p(n)}},axValue:function(r){var n="y"===r._id.charAt(0)?1:0;return function(i){return o(r,i[n])}},getTransform:function(r){return a(r.xaxis._offset,r.yaxis._offset)}}},47322:function(r,n,i){"use strict";var a=i(32485),o=i(3937);r.exports={moduleType:"component",name:"selections",layoutAttributes:i(8389),supplyLayoutDefaults:i(59402),supplyDrawNewSelectionDefaults:i(90849),includeBasePlot:i(76325)("selections"),draw:a.draw,drawOne:a.drawOne,reselect:o.reselect,prepSelect:o.prepSelect,clearOutline:o.clearOutline,clearSelectionsCache:o.clearSelectionsCache,selectOnClick:o.selectOnClick}},3937:function(r,n,i){"use strict";var a=i(52142),o=i(38258),s=i(73972),l=i(91424).dashStyle,u=i(7901),c=i(30211),f=i(23469).makeEventData,h=i(64505),p=h.freeMode,d=h.rectMode,v=h.drawMode,g=h.openMode,y=h.selectMode,m=i(30477),x=i(21459),b=i(42359),_=i(51873).clearOutline,w=i(60165),T=w.handleEllipse,k=w.readPaths,A=i(90551).newShapes,M=i(35855),S=i(32485).activateLastSelection,E=i(71828),L=E.sorterAsc,C=i(61082),O=i(79990),P=i(41675).getFromId,I=i(33306),D=i(61549).redrawReglTraces,z=i(34122),R=z.MINSELECT,F=C.filter,B=C.tester,N=i(75549),j=N.p2r,U=N.axValue,V=N.getTransform;function H(r){return void 0!==r.subplot}function q(r,n,i,a,o,s,l){var u,c,f,h,p,d,v,y,m,x=n._hoverdata,_=n._fullLayout.clickmode.indexOf("event")>-1,w=[];if(x&&Array.isArray(x)&&!0!==x[0].hoverOnBox){Y(r,n,s);var T=function(r,n){var i,a,o=r[0],s=-1,l=[];for(a=0;a<n.length;a++)if(i=n[a],o.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(!0===o.hoverOnBox)break;void 0!==o.pointNumber?s=o.pointNumber:void 0!==o.binNumber&&(s=o.binNumber,l=o.pointNumbers);break}return{pointNumber:s,pointNumbers:l,searchInfo:i}}(x,u=J(n,i,a,o));if(T.pointNumbers.length>0?function(r,n){var i,a,o,s=[];for(o=0;o<r.length;o++)(i=r[o]).cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&s.push(i);if(1===s.length&&s[0]===n.searchInfo&&(a=n.searchInfo.cd[0].trace).selectedpoints.length===n.pointNumbers.length){for(o=0;o<n.pointNumbers.length;o++)if(0>a.selectedpoints.indexOf(n.pointNumbers[o]))return!1;return!0}return!1}(u,T):function(r){var n,i,a=0;for(i=0;i<r.length;i++)if((n=r[i].cd[0].trace).selectedpoints&&(n.selectedpoints.length>1||(a+=n.selectedpoints.length)>1))return!1;return 1===a}(u)&&(d=$(T))){for(l&&l.remove(),m=0;m<u.length;m++)(c=u[m])._module.selectPoints(c,!1);Q(n,u),W(s),_&&th(n)}else{for(v=r.shiftKey&&(void 0!==d?d:$(T)),f={pointNumber:T.pointNumber,searchInfo:T.searchInfo,subtract:!!v},h=Z(s.selectionDefs.concat([f])),m=0;m<u.length;m++)if(p=te(u[m]._module.selectPoints(u[m],h),u[m]),w.length)for(var k=0;k<p.length;k++)w.push(p[k]);else w=p;Q(n,u,y={points:w}),f&&s&&s.selectionDefs.push(f),l&&b(tr(s.mergedPolygons,g(s.dragmode)),l,s),_&&tf(n,y)}}}function G(r){return"pointNumber"in r&&"searchInfo"in r}function Z(r){if(r.length){for(var n=[],i=G(r[0])?0:r[0][0][0],a=i,o=G(r[0])?0:r[0][0][1],s=o,l=0;l<r.length;l++)if(G(r[l]))n.push(function(r){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(n,i,a,o){var s=r.searchInfo.cd[0].trace._expandedIndex;return o.cd[0].trace._expandedIndex===s&&a===r.pointNumber},isRect:!1,degenerate:!1,subtract:!!r.subtract}}(r[l]));else{var u=B(r[l]);u.subtract=!!r[l].subtract,n.push(u),i=Math.min(i,u.xmin),a=Math.max(a,u.xmax),o=Math.min(o,u.ymin),s=Math.max(s,u.ymax)}return{xmin:i,xmax:a,ymin:o,ymax:s,pts:[],contains:function(r,i,a,o){for(var s=!1,l=0;l<n.length;l++)n[l].contains(r,i,a,o)&&(s=!n[l].subtract);return s},isRect:!1,degenerate:!1}}}function Y(r,n,i){var a=n._fullLayout,o=i.plotinfo,s=i.dragmode,l=a._lastSelectedSubplot&&a._lastSelectedSubplot===o.id,u=(r.shiftKey||r.altKey)&&!(v(s)&&g(s));l&&u&&o.selection&&o.selection.selectionDefs&&!i.selectionDefs?(i.selectionDefs=o.selection.selectionDefs,i.mergedPolygons=o.selection.mergedPolygons):u&&o.selection||W(i),l||(_(n),a._lastSelectedSubplot=o.id)}function W(r,n){var i=r.dragmode,a=r.plotinfo,o=r.gd;o._fullLayout._activeShapeIndex>=0&&o._fullLayout._deactivateShape(o),o._fullLayout._activeSelectionIndex>=0&&o._fullLayout._deactivateSelection(o);var l=o._fullLayout._zoomlayer,u=v(i),c=y(i);if(u||c){var f,h,p=l.selectAll(".select-outline-"+a.id);p&&o._fullLayout._outlining&&(u&&(f=A(p,r)),f&&s.call("_guiRelayout",o,{shapes:f}),c&&!H(r)&&(h=M(p,r)),h&&(o._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",o,{selections:h}).then(function(){n&&S(o)})),o._fullLayout._outlining=!1)}a.selection={},a.selection.selectionDefs=r.selectionDefs=[],a.selection.mergedPolygons=r.mergedPolygons=[]}function X(r){return r._id}function J(r,n,i,a){if(!r.calcdata)return[];var o,s,l,u=[],c=n.map(X),f=i.map(X);for(l=0;l<r.calcdata.length;l++)if(!0===(s=(o=r.calcdata[l])[0].trace).visible&&s._module&&s._module.selectPoints){if(H({subplot:a})&&(s.subplot===a||s.geo===a))u.push(K(s._module,o,n[0],i[0]));else if("splom"===s.type){if(s._xaxes[c[0]]&&s._yaxes[f[0]]){var h=K(s._module,o,n[0],i[0]);h.scene=r._fullLayout._splomScenes[s.uid],u.push(h)}}else if("sankey"===s.type){var p=K(s._module,o,n[0],i[0]);u.push(p)}else{if(-1===c.indexOf(s.xaxis)||-1===f.indexOf(s.yaxis))continue;u.push(K(s._module,o,P(r,s.xaxis),P(r,s.yaxis)))}}return u}function K(r,n,i,a){return{_module:r,cd:n,xaxis:i,yaxis:a}}function $(r){var n=r.searchInfo.cd[0].trace,i=r.pointNumber,a=r.pointNumbers,o=a.length>0?a[0]:i;return!!n.selectedpoints&&n.selectedpoints.indexOf(o)>-1}function Q(r,n,i){var a,o;for(a=0;a<n.length;a++){var l=n[a].cd[0].trace._fullInput,u=r._fullLayout._tracePreGUI[l.uid]||{};void 0===u.selectedpoints&&(u.selectedpoints=l._input.selectedpoints||null)}if(i){var c=i.points||[];for(a=0;a<n.length;a++)(o=n[a].cd[0].trace)._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(var f=0;f<c.length;f++){var h=c[f],p=h.data,d=h.fullData,v=h.pointIndex,g=h.pointIndices;g?([].push.apply(p.selectedpoints,g),o._fullInput!==o&&[].push.apply(d.selectedpoints,g)):(p.selectedpoints.push(v),o._fullInput!==o&&d.selectedpoints.push(v))}}else for(a=0;a<n.length;a++)delete(o=n[a].cd[0].trace).selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;!function(r,n){for(var i=!1,a=0;a<n.length;a++){var o=n[a],l=o.cd;s.traceIs(l[0].trace,"regl")&&(i=!0);var u=o._module,c=u.styleOnSelect||u.style;c&&(c(r,l,l[0].node3),l[0].nodeRangePlot3&&c(r,l,l[0].nodeRangePlot3))}i&&(I(r),D(r))}(r,n)}function tt(r,n,i){for(var o=(i?a.difference:a.union)({regions:r},{regions:[n]}).regions.reverse(),s=0;s<o.length;s++){var l=o[s];l.subtract=ts(l,o.slice(0,s))}return o}function te(r,n){if(Array.isArray(r))for(var i=n.cd,a=n.cd[0].trace,o=0;o<r.length;o++)r[o]=f(r[o],a,i);return r}function tr(r,n){for(var i=[],a=0;a<r.length;a++){i[a]=[];for(var o=0;o<r[a].length;o++){i[a][o]=[],i[a][o][0]=o?"L":"M";for(var s=0;s<r[a][o].length;s++)i[a][o].push(r[a][o][s])}n||i[a].push(["Z",i[a][0][1],i[a][0][2]])}return i}function tn(r,n){for(var i,a,o=[],s=[],l=0;l<n.length;l++){var u=n[l];a=u._module.selectPoints(u,r),s.push(a),i=te(a,u),o=o.concat(i)}return o}function ti(r,n,i,a,o){var s,l,u,c=!!a;o&&(s=o.plotinfo,l=o.xaxes[0]._id,u=o.yaxes[0]._id);var f=[],h=[],p=to(r),d=r._fullLayout;if(s){var g=d._zoomlayer,m=d.dragmode,x=v(m),b=y(m);if(x||b){var _=P(r,l,"x"),w=P(r,u,"y");if(_&&w){var T=g.selectAll(".select-outline-"+s.id);if(T&&r._fullLayout._outlining&&T.length){for(var A=T[0][0].getAttribute("d"),M=k(A,r,s),S=[],E=0;E<M.length;E++){for(var L=M[E],C=[],O=0;O<L.length;O++)C.push([tl(_,L[O][1]),tl(w,L[O][2])]);C.xref=l,C.yref=u,C.subtract=ts(C,S),S.push(C)}p=p.concat(S)}}}}var I=l&&u?[l+u]:d._subplots.cartesian;!function(r){var n=r.calcdata;if(n)for(var i=0;i<n.length;i++){var a=n[i][0].trace,o=r._fullLayout._splomScenes;if(o){var s=o[a.uid];s&&(s.selectBatch=[])}}}(r);for(var D={},z=0;z<I.length;z++){var R=I[z],F=R.indexOf("y"),N=R.slice(0,F),j=R.slice(F),U=l&&u?i:void 0;if(U=function(r,n,i,a){for(var o,s=0;s<r.length;s++){var l=r[s];n===l.xref&&i===l.yref&&(o?a=Z(o=tt(o,l,!!l.subtract)):(o=[l],a=B(l)))}return a}(p,N,j,U)){var V=a;if(!c){var H=P(r,N,"x"),q=P(r,j,"y");V=J(r,[H],[q],R);for(var G=0;G<V.length;G++){var Y=V[G],W=Y.cd[0],X=W.trace;if("scattergl"===Y._module.name&&!W.t.xpx){var K=X.x,$=X.y,te=X._length;W.t.xpx=[],W.t.ypx=[];for(var tr=0;tr<te;tr++)W.t.xpx[tr]=H.c2p(K[tr]),W.t.ypx[tr]=q.c2p($[tr])}"splom"===Y._module.name&&(D[X.uid]||(D[X.uid]=!0))}}var ti=tn(U,V);f=f.concat(ti),h=h.concat(V)}}var tp={points:f};Q(r,h,tp);var td=d.clickmode.indexOf("event")>-1&&n;if(!s&&n){var tv=to(r,!0);if(tv.length){var tg=tv[0].xref,ty=tv[0].yref;if(tg&&ty){var tm=tu(tv);tc([P(r,tg,"x"),P(r,ty,"y")])(tp,tm)}}r._fullLayout._noEmitSelectedAtStart?r._fullLayout._noEmitSelectedAtStart=!1:td&&tf(r,tp),d._reselect=!1}if(!s&&d._deselect){var tx=d._deselect;(function(r,n,i){for(var a=0;a<i.length;a++){var o=i[a];if(o.xaxis&&o.xaxis._id===r&&o.yaxis&&o.yaxis._id===n)return!0}return!1})(l=tx.xref,u=tx.yref,h)||ta(r,l,u,a),td&&(tp.points.length?tf(r,tp):th(r)),d._deselect=!1}return{eventData:tp,selectionTesters:i}}function ta(r,n,i,a){a=J(r,[P(r,n,"x")],[P(r,i,"y")],n+i);for(var o=0;o<a.length;o++){var s=a[o];s._module.selectPoints(s,!1)}Q(r,a)}function to(r,n){for(var i=[],a=r._fullLayout,o=a.selections,s=o.length,l=0;l<s;l++)if(!n||l===a._activeSelectionIndex){var u=o[l];if(u){var c,f,h,p,d,v=u.xref,g=u.yref,y=P(r,v,"x"),b=P(r,g,"y");if("rect"===u.type){d=[];var _=tl(y,u.x0),w=tl(y,u.x1),T=tl(b,u.y0),k=tl(b,u.y1);d=[[_,T],[_,k],[w,k],[w,T]],c=Math.min(_,w),f=Math.max(_,w),h=Math.min(T,k),p=Math.max(T,k),d.xmin=c,d.xmax=f,d.ymin=h,d.ymax=p,d.xref=v,d.yref=g,d.subtract=!1,d.isRect=!0,i.push(d)}else if("path"===u.type)for(var A=u.path.split("Z"),M=[],S=0;S<A.length;S++){var E=A[S];if(E){E+="Z";var L=m.extractPathCoords(E,x.paramIsX,"raw"),C=m.extractPathCoords(E,x.paramIsY,"raw");c=1/0,f=-1/0,h=1/0,p=-1/0,d=[];for(var O=0;O<L.length;O++){var I=tl(y,L[O]),D=tl(b,C[O]);d.push([I,D]),c=Math.min(I,c),f=Math.max(I,f),h=Math.min(D,h),p=Math.max(D,p)}d.xmin=c,d.xmax=f,d.ymin=h,d.ymax=p,d.xref=v,d.yref=g,d.subtract=ts(d,M),M.push(d),i.push(d)}}}}return i}function ts(r,n){for(var i=!1,a=0;a<n.length;a++)for(var s=n[a],l=0;l<r.length;l++)if(o(r[l],s)){i=!i;break}return i}function tl(r,n){return"date"===r.type&&(n=n.replace("_"," ")),"log"===r.type?r.c2p(n):r.r2p(n,null,r.calendar)}function tu(r){for(var n,i=r.length,a=[],o=0;o<i;o++){var s=r[o];a=(a=a.concat(s)).concat([s[0]])}return(n=a).isRect=5===n.length&&n[0][0]===n[4][0]&&n[0][1]===n[4][1]&&n[0][0]===n[1][0]&&n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]||n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0],n.isRect&&(n.xmin=Math.min(n[0][0],n[2][0]),n.xmax=Math.max(n[0][0],n[2][0]),n.ymin=Math.min(n[0][1],n[2][1]),n.ymax=Math.max(n[0][1],n[2][1])),n}function tc(r){return function(n,i){for(var a,o,s=0;s<r.length;s++){var l=r[s],u=l._id,c=u.charAt(0);if(i.isRect){a||(a={});var f=i[c+"min"],h=i[c+"max"];void 0!==f&&void 0!==h&&(a[u]=[j(l,f),j(l,h)].sort(L))}else o||(o={}),o[u]=i.map(U(l))}a&&(n.range=a),o&&(n.lassoPoints=o)}}function tf(r,n){n&&(n.selections=(r.layout||{}).selections||[]),r.emit("plotly_selected",n)}function th(r){r.emit("plotly_deselect",null)}r.exports={reselect:ti,prepSelect:function(r,n,i,a,o){var f=!H(a),h=p(o),m=d(o),x=g(o),_=v(o),w=y(o),k="drawcircle"===o,A="drawline"===o||k,M=a.gd,S=M._fullLayout,L=w&&"immediate"===S.newselection.mode&&f,C=S._zoomlayer,P=a.element.getBoundingClientRect(),I=a.plotinfo,D=V(I),N=n-P.left,j=i-P.top;S._calcInverseTransform(M);var U=E.apply3DTransform(S._invTransform)(N,j);N=U[0],j=U[1];var G,X,K,$,te,to,ts,tl=S._invScaleX,tp=S._invScaleY,td=N,tv=j,tg="M"+N+","+j,ty=a.xaxes[0],tm=a.yaxes[0],tx=ty._length,tb=tm._length,t_=r.altKey&&!(v(o)&&x);Y(r,M,a),h&&(G=F([[N,j]],z.BENDPX));var tw=C.selectAll("path.select-outline-"+I.id).data([1]),tT=_?S.newshape:S.newselection;_&&(a.hasText=tT.label.text||tT.label.texttemplate);var tk=_&&!x?tT.fillcolor:"rgba(0,0,0,0)",tA=tT.line.color||(f?u.contrast(M._fullLayout.plot_bgcolor):"#7f7f7f");tw.enter().append("path").attr("class","select-outline select-outline-"+I.id).style({opacity:_?tT.opacity/2:1,"stroke-dasharray":l(tT.line.dash,tT.line.width),"stroke-width":tT.line.width+"px","shape-rendering":"crispEdges"}).call(u.stroke,tA).call(u.fill,tk).attr("fill-rule","evenodd").classed("cursor-move",!!_).attr("transform",D).attr("d",tg+"Z");var tM=C.append("path").attr("class","zoombox-corners").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1}).attr("transform",D).attr("d","M0,0Z");if(_&&a.hasText){var tS=C.select(".label-temp");tS.empty()&&(tS=C.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var tE=S._uid+z.SELECTID,tL=[],tC=J(M,a.xaxes,a.yaxes,a.subplot);L&&!r.shiftKey&&(a._clearSubplotSelections=function(){if(f){var r=ty._id,n=tm._id;ta(M,r,n,tC);for(var i=(M.layout||{}).selections||[],a=[],o=!1,l=0;l<i.length;l++){var u=S.selections[l];u.xref!==r||u.yref!==n?a.push(i[l]):o=!0}o&&(M._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",M,{selections:a}))}});var tO=a.plotinfo.fillRangeItems||tc(a.xaxes.concat(a.yaxes));a.moveFn=function(r,n){a._clearSubplotSelections&&(a._clearSubplotSelections(),a._clearSubplotSelections=void 0),td=Math.max(0,Math.min(tx,tl*r+N)),tv=Math.max(0,Math.min(tb,tp*n+j));var i=Math.abs(td-N),o=Math.abs(tv-j);if(m){if(w){var s=S.selectdirection;switch(l="any"===s?o<Math.min(.6*i,R)?"h":i<Math.min(.6*o,R)?"v":"d":s){case"h":u=k?tb/2:0,c=tb;break;case"v":u=k?tx/2:0,c=tx}}if(_)switch(S.newshape.drawdirection){case"vertical":l="h",u=k?tb/2:0,c=tb;break;case"horizontal":l="v",u=k?tx/2:0,c=tx;break;case"ortho":i<o?(l="h",u=j,c=tv):(l="v",u=N,c=td);break;default:l="d"}"h"===l?(($=A?T(k,[td,u],[td,c]):[[N,u],[N,c],[td,c],[td,u]]).xmin=A?td:Math.min(N,td),$.xmax=A?td:Math.max(N,td),$.ymin=Math.min(u,c),$.ymax=Math.max(u,c),tM.attr("d","M"+$.xmin+","+(j-R)+"h-4v"+2*R+"h4ZM"+($.xmax-1)+","+(j-R)+"h4v"+2*R+"h-4Z")):"v"===l?(($=A?T(k,[u,tv],[c,tv]):[[u,j],[u,tv],[c,tv],[c,j]]).xmin=Math.min(u,c),$.xmax=Math.max(u,c),$.ymin=A?tv:Math.min(j,tv),$.ymax=A?tv:Math.max(j,tv),tM.attr("d","M"+(N-R)+","+$.ymin+"v-4h"+2*R+"v4ZM"+(N-R)+","+($.ymax-1)+"v4h"+2*R+"v-4Z")):"d"===l&&(($=A?T(k,[N,j],[td,tv]):[[N,j],[N,tv],[td,tv],[td,j]]).xmin=Math.min(N,td),$.xmax=Math.max(N,td),$.ymin=Math.min(j,tv),$.ymax=Math.max(j,tv),tM.attr("d","M0,0Z"))}else h&&(G.addPt([td,tv]),$=G.filtered);if(a.selectionDefs&&a.selectionDefs.length?(K=tt(a.mergedPolygons,$,t_),$.subtract=t_,X=Z(a.selectionDefs.concat([$]))):(K=[$],X=B($)),b(tr(K,x),tw,a),w){var l,u,c,f,p=ti(M,!1),d=p.eventData?p.eventData.points.slice():[];X=(p=ti(M,!1,X,tC,a)).selectionTesters,ts=p.eventData,f=G?G.filtered:tu(K),O.throttle(tE,z.SELECTDELAY,function(){for(var r=(tL=tn(X,tC)).slice(),n=0;n<d.length;n++){for(var i=d[n],a=!1,o=0;o<r.length;o++)if(r[o].curveNumber===i.curveNumber&&r[o].pointNumber===i.pointNumber){a=!0;break}a||r.push(i)}r.length&&(ts||(ts={}),ts.points=r),tO(ts,f),function(r,n){r.emit("plotly_selecting",n)}(M,ts)})}},a.clickFn=function(r,n){if(tM.remove(),M._fullLayout._activeShapeIndex>=0)M._fullLayout._deactivateShape(M);else if(!_){var i=S.clickmode;O.done(tE).then(function(){if(O.clear(tE),2===r){for(tw.remove(),te=0;te<tC.length;te++)(to=tC[te])._module.selectPoints(to,!1);if(Q(M,tC),W(a),th(M),tC.length){var o=tC[0].xaxis,l=tC[0].yaxis;if(o&&l){for(var u=[],f=M._fullLayout.selections,h=0;h<f.length;h++){var p=f[h];p&&(p.xref===o._id&&p.yref===l._id||u.push(p))}u.length<f.length&&(M._fullLayout._noEmitSelectedAtStart=!0,s.call("_guiRelayout",M,{selections:u}))}}}else i.indexOf("select")>-1&&q(n,M,a.xaxes,a.yaxes,a.subplot,a,tw),"event"===i&&tf(M,void 0);c.click(M,n,I.id)}).catch(E.error)}},a.doneFn=function(){tM.remove(),O.done(tE).then(function(){O.clear(tE),!L&&$&&a.selectionDefs&&($.subtract=t_,a.selectionDefs.push($),a.mergedPolygons.length=0,[].push.apply(a.mergedPolygons,K)),(L||_)&&W(a,L),a.doneFnCompleted&&a.doneFnCompleted(tL),w&&tf(M,ts)}).catch(E.error)}},clearOutline:_,clearSelectionsCache:W,selectOnClick:q}},89827:function(r,n,i){"use strict";var a=i(50215),o=i(41940),s=i(82196).line,l=i(79952).P,u=i(1426).extendFlat,c=i(44467).templatedArray,f=(i(24695),i(9012)),h=i(5386).R,p=i(37281);r.exports=c("shape",{visible:u({},f.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:u({},f.legend,{editType:"calc+arraydraw"}),legendgroup:u({},f.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:u({},f.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:o({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:u({},f.legendrank,{editType:"calc+arraydraw"}),legendwidth:u({},f.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:u({},a.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:u({},a.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:u({},s.color,{editType:"arraydraw"}),width:u({},s.width,{editType:"calc+arraydraw"}),dash:u({},l,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:h({},{keys:Object.keys(p)}),font:o({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(21459),l=i(30477);function u(r,n,i,o,u,c){var f=r/2;if("pixel"===n){var h=u?l.extractPathCoords(u,c?s.paramIsY:s.paramIsX):[i,o],p=a.aggNums(Math.max,null,h),d=a.aggNums(Math.min,null,h),v=d<0?Math.abs(d)+f:f,g=p>0?p+f:f;return{ppad:f,ppadplus:c?v:g,ppadminus:c?g:v}}return{ppad:f}}function c(r,n,i,a,o){var u="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==n)return[u(n),u(i)];if(a){var c,f,h,p,d=1/0,v=-1/0,g=a.match(s.segmentRE);for("date"===r.type&&(u=l.decodeDate(u)),c=0;c<g.length;c++)void 0===(f=o[g[c].charAt(0)].drawn)||(h=g[c].substr(1).match(s.paramRE))&&!(h.length<f)&&((p=u(h[f]))<d&&(d=p),p>v&&(v=p));return v>=d?[d,v]:void 0}}r.exports=function(r){var n=r._fullLayout,i=a.filterVisible(n.shapes);if(i.length&&r._fullData.length)for(var l=0;l<i.length;l++){var f,h,p=i[l];p._extremes={};var d=o.getRefType(p.xref),v=o.getRefType(p.yref);if("paper"!==p.xref&&"domain"!==d){var g="pixel"===p.xsizemode?p.xanchor:p.x0,y="pixel"===p.xsizemode?p.xanchor:p.x1;(h=c(f=o.getFromId(r,p.xref),g,y,p.path,s.paramIsX))&&(p._extremes[f._id]=o.findExtremes(f,h,u(p.line.width,p.xsizemode,p.x0,p.x1,p.path,!1)))}if("paper"!==p.yref&&"domain"!==v){var m="pixel"===p.ysizemode?p.yanchor:p.y0,x="pixel"===p.ysizemode?p.yanchor:p.y1;(h=c(f=o.getFromId(r,p.yref),m,x,p.path,s.paramIsY))&&(p._extremes[f._id]=o.findExtremes(f,h,u(p.line.width,p.ysizemode,p.y0,p.y1,p.path,!0)))}}}},21459:function(r){"use strict";r.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(85501),l=i(89827),u=i(30477);function c(r,n,i){function s(i,o){return a.coerce(r,n,l,i,o)}if(n._isShape=!0,s("visible")){s("showlegend")&&(s("legend"),s("legendwidth"),s("legendgroup"),s("legendgrouptitle.text"),a.coerceFont(s,"legendgrouptitle.font"),s("legendrank"));var c=s("path"),f=s("type",c?"path":"rect"),h="path"!==f;h&&delete n.path,s("editable"),s("layer"),s("opacity"),s("fillcolor"),s("fillrule"),s("line.width")&&(s("line.color"),s("line.dash"));for(var p=s("xsizemode"),d=s("ysizemode"),v=["x","y"],g=0;g<2;g++){var y,m,x,b=v[g],_=b+"anchor",w="x"===b?p:d,T={_fullLayout:i},k=o.coerceRef(r,n,T,b,void 0,"paper");if("range"===o.getRefType(k)?((y=o.getFromId(T,k))._shapeIndices.push(n._index),x=u.rangeToShapePosition(y),m=u.shapePositionToRange(y)):m=x=a.identity,h){var A=b+"0",M=b+"1",S=r[A],E=r[M];r[A]=m(r[A],!0),r[M]=m(r[M],!0),"pixel"===w?(s(A,0),s(M,10)):(o.coercePosition(n,T,s,k,A,.25),o.coercePosition(n,T,s,k,M,.75)),n[A]=x(n[A]),n[M]=x(n[M]),r[A]=S,r[M]=E}if("pixel"===w){var L=r[_];r[_]=m(r[_],!0),o.coercePosition(n,T,s,k,_,.25),n[_]=x(n[_]),r[_]=L}}h&&a.noneOrAll(r,n,["x0","x1","y0","y1"]);var C,O,P="line"===f;if(h&&(C=s("label.texttemplate")),C||(O=s("label.text")),O||C){s("label.textangle");var I=s("label.textposition",P?"middle":"middle center");s("label.xanchor"),s("label.yanchor",P?"bottom":-1!==I.indexOf("top")?"top":-1!==I.indexOf("bottom")?"bottom":"middle"),s("label.padding"),a.coerceFont(s,"label.font",i.font)}}}r.exports=function(r,n){s(r,n,{name:"shapes",handleItemDefaults:c})}},48100:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(63893),l=i(91424),u=i(60165).readPaths,c=i(30477),f=c.getPathString,h=i(37281),p=i(18783).FROM_TL;r.exports=function(r,n,i,d){if(d.selectAll(".shape-label").remove(),i.label.text||i.label.texttemplate){if(i.label.texttemplate){var v,g,y,m,x,b={};if("path"!==i.type){var _=o.getFromId(r,i.xref),w=o.getFromId(r,i.yref);for(var T in h){var k=h[T](i,_,w);void 0!==k&&(b[T]=k)}}A=a.texttemplateStringForShapes(i.label.texttemplate,{},r._fullLayout._d3locale,b)}else A=i.label.text;var A,M,S,E,L,C=i.label.font,O=d.append("g").attr({"data-index":n}).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(A);if(i.path){var P=u(f(r,i),r);M=1/0,E=1/0,S=-1/0,L=-1/0;for(var I=0;I<P.length;I++)for(var D=0;D<P[I].length;D++)for(var z=P[I][D],R=1;R<z.length;R+=2){var F=z[R],B=z[R+1];M=Math.min(M,F),S=Math.max(S,F),E=Math.min(E,B),L=Math.max(L,B)}}else{var N=o.getFromId(r,i.xref),j=o.getRefType(i.xref),U=o.getFromId(r,i.yref),V=o.getRefType(i.yref),H=c.getDataToPixel(r,N,!1,j),q=c.getDataToPixel(r,U,!0,V);M=H(i.x0),S=H(i.x1),E=q(i.y0),L=q(i.y1)}var G=i.label.textangle;"auto"===G&&(G="line"===i.type?(v=M,g=E,y=S,m=L,x=Math.abs(y-v),-180/Math.PI*Math.atan2(y>=v?g-m:m-g,x)):0),O.call(function(n){return n.call(l.font,C).attr({}),s.convertToTspans(n,r),n});var Z=function(r,n,i,a,o,s,l){var u,c,f,h,d=o.label.textposition,v=o.label.textangle,g=o.label.padding,y=o.type,m=Math.PI/180*s,x=Math.sin(m),b=Math.cos(m),_=o.label.xanchor,w=o.label.yanchor;if("line"===y){"start"===d?(u=r,c=n):"end"===d?(u=i,c=a):(u=(r+i)/2,c=(n+a)/2),"auto"===_&&(_="start"===d?"auto"===v?i>r?"left":i<r?"right":"center":i>r?"right":i<r?"left":"center":"end"===d?"auto"===v?i>r?"right":i<r?"left":"center":i>r?"left":i<r?"right":"center":"center");var T={bottom:-1,middle:0,top:1};if("auto"===v){var k=T[w];f=-g*x*k,h=g*b*k}else f=g*({left:1,center:0,right:-1})[_],h=g*T[w];u+=f,c+=h}else f=g+3,-1!==d.indexOf("right")?(u=Math.max(r,i)-f,"auto"===_&&(_="right")):-1!==d.indexOf("left")?(u=Math.min(r,i)+f,"auto"===_&&(_="left")):(u=(r+i)/2,"auto"===_&&(_="center")),c=-1!==d.indexOf("top")?Math.min(n,a):-1!==d.indexOf("bottom")?Math.max(n,a):(n+a)/2,h=g,"bottom"===w?c-=h:"top"===w&&(c+=h);var A=p[w],M=o.label.font.size,S=l.height;return{textx:u+(S*A-M)*x,texty:c+-(S*A-M)*b,xanchor:_}}(M,E,S,L,i,G,l.bBox(O.node())),Y=Z.textx,W=Z.texty,X=Z.xanchor;O.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[X],y:W,x:Y,transform:"rotate("+G+","+Y+","+W+")"}).call(s.positionText,Y,W)}}},42359:function(r,n,i){"use strict";var a=i(71828).strTranslate,o=i(28569),s=i(64505),l=s.drawMode,u=s.selectMode,c=i(73972),f=i(7901),h=i(89995),p=h.i000,d=h.i090,v=h.i180,g=h.i270,y=i(51873).clearOutlineControllers,m=i(60165),x=m.pointsOnRectangle,b=m.pointsOnEllipse,_=m.writePaths,w=i(90551).newShapes,T=i(90551).createShapeObj,k=i(35855),A=i(48100);function M(r,n){var i,a,o,s=r[n][1],l=r[n][2],u=r.length;return a=r[i=(n+1)%u][1],o=r[i][2],a===s&&o===l&&(a=r[i=(n+2)%u][1],o=r[i][2]),[i,a,o]}r.exports=function r(n,i,s,h){h||(h=0);var m=s.gd;function S(){r(n,i,s,h++),(b(n[0])||s.hasText)&&E({redrawing:!0})}function E(r){var n={};void 0!==s.isActiveShape&&(s.isActiveShape=!1,n=w(i,s)),void 0!==s.isActiveSelection&&(s.isActiveSelection=!1,n=k(i,s),m._fullLayout._reselect=!0),Object.keys(n).length&&c.call((r||{}).redrawing?"relayout":"_guiRelayout",m,n)}var L,C,O,P,I,D=m._fullLayout._zoomlayer,z=s.dragmode,R=l(z),F=u(z);if((R||F)&&(m._fullLayout._outlining=!0),y(m),i.attr("d",_(n)),!h&&(s.isActiveShape||s.isActiveSelection)&&(I=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];r[i]=[];for(var o=0;o<a.length;o++){r[i][o]=[];for(var s=0;s<a[o].length;s++)r[i][o][s]=a[o][s]}}return r}([],n),function(r){L=[];for(var i=0;i<n.length;i++){var l=n[i],u=x(l),c=!u&&b(l);L[i]=[];for(var h=l.length,y=0;y<h;y++)if("Z"!==l[y][0]&&(!c||y===p||y===d||y===v||y===g)){var _,w=u&&s.isActiveSelection;w&&(_=M(l,y));var T=l[y][1],k=l[y][2],A=r.append(w?"rect":"circle").attr("data-i",i).attr("data-j",y).style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(w){var S=_[1]-T,E=_[2]-k,C=E?5:Math.max(Math.min(25,Math.abs(S)-5),5),O=S?5:Math.max(Math.min(25,Math.abs(E)-5),5);A.classed(E?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",C).attr("height",O).attr("x",T-C/2).attr("y",k-O/2).attr("transform",a(S/2,E/2))}else A.classed("cursor-grab",!0).attr("r",5).attr("cx",T).attr("cy",k);L[i][y]={element:A.node(),gd:m,prepFn:N,doneFn:U,clickFn:V},o.init(L[i][y])}}}(D.append("g").attr("class","outline-controllers")),C=[],n.length&&(C[0]={element:i[0][0],gd:m,prepFn:function(r){(O=+r.srcElement.getAttribute("data-i"))||(O=0),C[O].moveFn=H},doneFn:function(){E()},clickFn:function(r){2===r&&function(r){if(u(r._fullLayout.dragmode)){y(r);var n=r._fullLayout._activeSelectionIndex,i=(r.layout||{}).selections||[];if(n<i.length){for(var a=[],o=0;o<i.length;o++)o!==n&&a.push(i[o]);delete r._fullLayout._activeSelectionIndex;var s=r._fullLayout.selections[n];r._fullLayout._deselect={xref:s.xref,yref:s.yref},c.call("_guiRelayout",r,{selections:a})}}}(m)}},o.init(C[0]))),R&&s.hasText){var B=D.select(".label-temp");A(m,"label-temp",T(i,s,s.dragmode),B)}function N(r){O=+r.srcElement.getAttribute("data-i"),P=+r.srcElement.getAttribute("data-j"),L[O][P].moveFn=j}function j(r,i){if(n.length){var a=I[O][P][1],o=I[O][P][2],l=n[O],u=l.length;if(x(l)){var c=r,f=i;s.isActiveSelection&&(M(l,P)[1]===l[P][1]?f=0:c=0);for(var h=0;h<u;h++)if(h!==P){var p=l[h];p[1]===l[P][1]&&(p[1]=a+c),p[2]===l[P][2]&&(p[2]=o+f)}if(l[P][1]=a+c,l[P][2]=o+f,!x(l))for(var d=0;d<u;d++)for(var v=0;v<l[d].length;v++)l[d][v]=I[O][d][v]}else l[P][1]=a+r,l[P][2]=o+i;S()}}function U(){E()}function V(r,i){if(2===r){O=+i.srcElement.getAttribute("data-i"),P=+i.srcElement.getAttribute("data-j");var a=n[O];x(a)||b(a)||function(){if(n.length&&n[O]&&n[O].length){for(var r=[],i=0;i<n[O].length;i++)i!==P&&r.push(n[O][i]);r.length>1&&(2!==r.length||"Z"!==r[1][0])&&(0===P&&(r[0][0]="M"),n[O]=r,S(),E())}}()}}function H(r,i){(function(r,i){if(n.length)for(var a=0;a<n.length;a++)for(var o=0;o<n[a].length;o++)for(var s=0;s+2<n[a][o].length;s+=2)n[a][o][s+1]=I[a][o][s+1]+r,n[a][o][s+2]=I[a][o][s+2]+i})(r,i),S()}}},34031:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(71828),l=i(89298),u=i(60165).readPaths,c=i(42359),f=i(48100),h=i(51873).clearOutlineControllers,p=i(7901),d=i(91424),v=i(44467).arrayEditor,g=i(28569),y=i(6964),m=i(21459),x=i(30477),b=x.getPathString;function _(r){var n=r._fullLayout;for(var i in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._shapeUpperLayer.selectAll("text").remove(),n._shapeLowerLayer.selectAll("text").remove(),n._plots){var a=n._plots[i].shapelayer;a&&(a.selectAll("path").remove(),a.selectAll("text").remove())}for(var o=0;o<n.shapes.length;o++)!0===n.shapes[o].visible&&k(r,o)}function w(r){return!!r._fullLayout._outlining}function T(r){return!r._context.edits.shapePosition}function k(r,n){r._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+n+'"]').remove();var i=x.makeShapesOptionsAndPlotinfo(r,n),h=i.options,k=i.plotinfo;h._input&&!0===h.visible&&function(i){var E=b(r,h),L={"data-index":n,"fill-rule":h.fillrule,d:E},C=h.opacity,O=h.fillcolor,P=h.line.width?h.line.color:"rgba(0,0,0,0)",I=h.line.width,D=h.line.dash;I||!0!==h.editable||(I=5,D="solid");var z="Z"!==E[E.length-1],R=T(r)&&h.editable&&r._fullLayout._activeShapeIndex===n;R&&(O=z?"rgba(0,0,0,0)":r._fullLayout.activeshape.fillcolor,C=r._fullLayout.activeshape.opacity);var F,B=i.append("g").classed("shape-group",!0).attr({"data-index":n}),N=B.append("path").attr(L).style("opacity",C).call(p.stroke,P).call(p.fill,O).call(d.dashLine,D,I);if(A(B,r,h),f(r,n,h,B),(R||r._context.edits.shapePosition)&&(F=v(r.layout,"shapes",h)),R){N.style({cursor:"move"});var j={element:N.node(),plotinfo:k,gd:r,editHelpers:F,hasText:h.label.text||h.label.texttemplate,isActiveShape:!0};c(u(E,r),N,j)}else r._context.edits.shapePosition?function(r,n,i,u,c,h){var p,v,_,T,k,S,E,L,C,O,P,I,D,z,R,F,B,N,j,U,V="pixel"===i.xsizemode,H="pixel"===i.ysizemode,q="line"===i.type,G="path"===i.type,Z=h.modifyItem,Y=a.select(n.node().parentNode),W=l.getFromId(r,i.xref),X=l.getRefType(i.xref),J=l.getFromId(r,i.yref),K=l.getRefType(i.yref),$=x.getDataToPixel(r,W,!1,X),Q=x.getDataToPixel(r,J,!0,K),tt=x.getPixelToData(r,W,!1,X),te=x.getPixelToData(r,J,!0,K),tr=q?(p=Math.max(i.line.width,10),(v=c.append("g").attr("data-index",u).attr("drag-helper",!0)).append("path").attr("d",n.attr("d")).style({cursor:"move","stroke-width":p,"stroke-opacity":"0"}),_={"fill-opacity":"0"},T=Math.max(p/2,10),v.append("circle").attr({"data-line-point":"start-point",cx:V?$(i.xanchor)+i.x0:$(i.x0),cy:H?Q(i.yanchor)-i.y0:Q(i.y0),r:T}).style(_).classed("cursor-grab",!0),v.append("circle").attr({"data-line-point":"end-point",cx:V?$(i.xanchor)+i.x1:$(i.x1),cy:H?Q(i.yanchor)-i.y1:Q(i.y1),r:T}).style(_).classed("cursor-grab",!0),v):n,tn={element:tr.node(),gd:r,prepFn:function(a){var o,s,u,f,h;w(r)||(V&&(C=$(i.xanchor)),H&&(O=Q(i.yanchor)),"path"===i.type?j=i.path:(k=V?i.x0:$(i.x0),S=H?i.y0:Q(i.y0),E=V?i.x1:$(i.x1),L=H?i.y1:Q(i.y1)),k<E?(D=k,B="x0",z=E,N="x1"):(D=E,B="x1",z=k,N="x0"),!H&&S<L||H&&S>L?(P=S,R="y0",I=L,F="y1"):(P=L,R="y1",I=S,F="y0"),ti(a),ts(c,i),o=i.xref,s=i.yref,u=l.getFromId(r,o),f=l.getFromId(r,s),h="","paper"===o||u.autorange||(h+=o),"paper"===s||f.autorange||(h+=s),d.setClipUrl(n,h?"clip"+r._fullLayout._uid+h:null,r),tn.moveFn="move"===U?ta:to,tn.altKey=a.altKey)},doneFn:function(){w(r)||(y(n),tl(c),A(n,r,i),o.call("_guiRelayout",r,h.getUpdateObj()))},clickFn:function(){w(r)||tl(c)}};function ti(i){if(w(r))U=null;else if(q)U="path"===i.target.tagName?"move":"start-point"===i.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var a=tn.element.getBoundingClientRect(),o=a.right-a.left,s=a.bottom-a.top,l=i.clientX-a.left,u=i.clientY-a.top,c=!G&&o>10&&s>10&&!i.shiftKey?g.getCursor(l/o,1-u/s):"move";y(n,c),U=c.split("-")[0]}}function ta(a,o){if("path"===i.type){var s=function(r){return r},l=s,h=s;V?Z("xanchor",i.xanchor=tt(C+a)):(l=function(r){return tt($(r)+a)},W&&"date"===W.type&&(l=x.encodeDate(l))),H?Z("yanchor",i.yanchor=te(O+o)):(h=function(r){return te(Q(r)+o)},J&&"date"===J.type&&(h=x.encodeDate(h))),Z("path",i.path=M(j,l,h))}else V?Z("xanchor",i.xanchor=tt(C+a)):(Z("x0",i.x0=tt(k+a)),Z("x1",i.x1=tt(E+a))),H?Z("yanchor",i.yanchor=te(O+o)):(Z("y0",i.y0=te(S+o)),Z("y1",i.y1=te(L+o)));n.attr("d",b(r,i)),ts(c,i),f(r,u,i,Y)}function to(a,o){if(G){var s=function(r){return r},l=s,h=s;V?Z("xanchor",i.xanchor=tt(C+a)):(l=function(r){return tt($(r)+a)},W&&"date"===W.type&&(l=x.encodeDate(l))),H?Z("yanchor",i.yanchor=te(O+o)):(h=function(r){return te(Q(r)+o)},J&&"date"===J.type&&(h=x.encodeDate(h))),Z("path",i.path=M(j,l,h))}else if(q){if("resize-over-start-point"===U){var p=k+a,d=H?S-o:S+o;Z("x0",i.x0=V?p:tt(p)),Z("y0",i.y0=H?d:te(d))}else if("resize-over-end-point"===U){var v=E+a,g=H?L-o:L+o;Z("x1",i.x1=V?v:tt(v)),Z("y1",i.y1=H?g:te(g))}}else{var y=function(r){return -1!==U.indexOf(r)},m=y("n"),_=y("s"),w=y("w"),T=y("e"),A=m?P+o:P,X=_?I+o:I,K=w?D+a:D,tr=T?z+a:z;H&&(m&&(A=P-o),_&&(X=I-o)),(!H&&X-A>10||H&&A-X>10)&&(Z(R,i[R]=H?A:te(A)),Z(F,i[F]=H?X:te(X))),tr-K>10&&(Z(B,i[B]=V?K:tt(K)),Z(N,i[N]=V?tr:tt(tr)))}n.attr("d",b(r,i)),ts(c,i),f(r,u,i,Y)}function ts(r,n){(V||H)&&function(){var i="path"!==n.type,a=r.selectAll(".visual-cue").data([0]);a.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var o=$(V?n.xanchor:s.midRange(i?[n.x0,n.x1]:x.extractPathCoords(n.path,m.paramIsX))),l=Q(H?n.yanchor:s.midRange(i?[n.y0,n.y1]:x.extractPathCoords(n.path,m.paramIsY)));if(o=x.roundPositionForSharpStrokeRendering(o,1),l=x.roundPositionForSharpStrokeRendering(l,1),V&&H){var u="M"+(o-1-1)+","+(l-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";a.attr("d",u)}else if(V){var c="M"+(o-1-1)+","+(l-9-1)+"v18 h2 v-18 Z";a.attr("d",c)}else{var f="M"+(o-9-1)+","+(l-1-1)+"h18 v2 h-18 Z";a.attr("d",f)}}()}function tl(r){r.selectAll(".visual-cue").remove()}g.init(tn),tr.node().onmousemove=ti}(r,N,h,n,i,F):!0===h.editable&&N.style("pointer-events",z||p.opacity(O)*C<=.5?"stroke":"all");N.node().addEventListener("click",function(){return function(r,n){if(T(r)){var i=+n.node().getAttribute("data-index");if(i>=0){if(i===r._fullLayout._activeShapeIndex)return void S(r);r._fullLayout._activeShapeIndex=i,r._fullLayout._deactivateShape=S,_(r)}}}(r,N)})}("below"!==h.layer?r._fullLayout._shapeUpperLayer:"paper"===h.xref||"paper"===h.yref?r._fullLayout._shapeLowerLayer:k._hadPlotinfo?(k.mainplotinfo||k).shapelayer:r._fullLayout._shapeLowerLayer)}function A(r,n,i){var a=(i.xref+i.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");d.setClipUrl(r,a?"clip"+n._fullLayout._uid+a:null,n)}function M(r,n,i){return r.replace(m.segmentRE,function(r){var a=0,o=r.charAt(0),s=m.paramIsX[o],l=m.paramIsY[o],u=m.numParams[o];return o+r.substr(1).replace(m.paramRE,function(r){return a>=u||(s[a]?r=n(r):l[a]&&(r=i(r)),a++),r})})}function S(r){T(r)&&r._fullLayout._activeShapeIndex>=0&&(h(r),delete r._fullLayout._activeShapeIndex,_(r))}r.exports={draw:_,drawOne:k,eraseActiveShape:function(r){if(T(r)){h(r);var n=r._fullLayout._activeShapeIndex,i=(r.layout||{}).shapes||[];if(n<i.length){for(var a=[],s=0;s<i.length;s++)s!==n&&a.push(i[s]);return delete r._fullLayout._activeShapeIndex,o.call("_guiRelayout",r,{shapes:a})}}},drawLabel:f}},29241:function(r,n,i){"use strict";var a=i(30962).overrideAll,o=i(9012),s=i(41940),l=i(79952).P,u=i(1426).extendFlat,c=i(5386).R,f=i(37281);r.exports=a({newshape:{visible:u({},o.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:u({},o.legend,{}),legendgroup:u({},o.legendgroup,{}),legendgrouptitle:{text:u({},o.legendgrouptitle.text,{}),font:s({})},legendrank:u({},o.legendrank,{}),legendwidth:u({},o.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:u({},l,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:u({},o.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:c({newshape:!0},{keys:Object.keys(f)}),font:s({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(r){"use strict";r.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(r,n,i){"use strict";var a=i(7901),o=i(71828);r.exports=function(r,n,i){if(i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),o.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity"),i("newshape.line.width")){var s=(r||{}).plot_bgcolor||"#FFF";i("newshape.line.color",a.contrast(s)),i("newshape.line.dash")}var l="drawline"===r.dragmode,u=i("newshape.label.text"),c=i("newshape.label.texttemplate");if(u||c){i("newshape.label.textangle");var f=i("newshape.label.textposition",l?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",l?"bottom":-1!==f.indexOf("top")?"top":-1!==f.indexOf("bottom")?"bottom":"middle"),i("newshape.label.padding"),o.coerceFont(i,"newshape.label.font",n.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}},60165:function(r,n,i){"use strict";var a=i(95616),o=i(89995),s=o.CIRCLE_SIDES,l=o.SQRT2,u=i(75549),c=u.p2r,f=u.r2p,h=[0,3,4,5,6,1,2],p=[0,3,4,1,2];function d(r,n){return 1e-6>=Math.abs(r-n)}function v(r,n){var i=n[1]-r[1],a=n[2]-r[2];return Math.sqrt(i*i+a*a)}n.writePaths=function(r){var n=r.length;if(!n)return"M0,0Z";for(var i="",a=0;a<n;a++)for(var o=r[a].length,s=0;s<o;s++){var l=r[a][s][0];if("Z"===l)i+="Z";else for(var u=r[a][s].length,c=0;c<u;c++){var f=c;"Q"===l||"S"===l?f=p[c]:"C"===l&&(f=h[c]),i+=r[a][s][f],c>0&&c<u-1&&(i+=",")}}return i},n.readPaths=function(r,n,i,o){var l,u,h,p=a(r),d=[],v=-1,g=0,y=0,m=function(){u=g,h=y};m();for(var x=0;x<p.length;x++){var b,_,w,T,k=[],A=p[x][0],M=A;switch(A){case"M":d[++v]=[],g=+p[x][1],y=+p[x][2],k.push([M,g,y]),m();break;case"Q":case"S":b=+p[x][1],w=+p[x][2],g=+p[x][3],y=+p[x][4],k.push([M,g,y,b,w]);break;case"C":b=+p[x][1],w=+p[x][2],_=+p[x][3],T=+p[x][4],g=+p[x][5],y=+p[x][6],k.push([M,g,y,b,w,_,T]);break;case"T":case"L":g=+p[x][1],y=+p[x][2],k.push([M,g,y]);break;case"H":M="L",g=+p[x][1],k.push([M,g,y]);break;case"V":M="L",y=+p[x][1],k.push([M,g,y]);break;case"A":M="L";var S=+p[x][1],E=+p[x][2];+p[x][4]||(S=-S,E=-E);var L=g-S,C=y;for(l=1;l<=s/2;l++){var O=2*Math.PI*l/s;k.push([M,L+S*Math.cos(O),C+E*Math.sin(O)])}break;case"Z":g===u&&y===h||(g=u,y=h,k.push([M,g,y]))}for(var P=(i||{}).domain,I=n._fullLayout._size,D=i&&"pixel"===i.xsizemode,z=i&&"pixel"===i.ysizemode,R=!1===o,F=0;F<k.length;F++){for(l=0;l+2<7;l+=2){var B=k[F][l+1],N=k[F][l+2];void 0!==B&&void 0!==N&&(g=B,y=N,i&&(i.xaxis&&i.xaxis.p2r?(R&&(B-=i.xaxis._offset),B=D?f(i.xaxis,i.xanchor)+B:c(i.xaxis,B)):(R&&(B-=I.l),P?B=P.x[0]+B/I.w:B/=I.w),i.yaxis&&i.yaxis.p2r?(R&&(N-=i.yaxis._offset),N=z?f(i.yaxis,i.yanchor)-N:c(i.yaxis,N)):(R&&(N-=I.t),N=P?P.y[1]-N/I.h:1-N/I.h)),k[F][l+1]=B,k[F][l+2]=N)}d[v].push(k[F].slice())}}return d},n.pointsOnRectangle=function(r){if(5!==r.length)return!1;for(var n=1;n<3;n++)if(!d(r[0][n]-r[1][n],r[3][n]-r[2][n])||!d(r[0][n]-r[3][n],r[1][n]-r[2][n]))return!1;return!(!d(r[0][1],r[1][1])&&!d(r[0][1],r[3][1])||!(v(r[0],r[1])*v(r[0],r[3])))},n.pointsOnEllipse=function(r){var n=r.length;if(n!==s+1)return!1;n=s;for(var i=0;i<n;i++){var a=(2*n-i)%n,o=(n/2+a)%n,l=(n/2+i)%n;if(!d(v(r[i],r[l]),v(r[a],r[o])))return!1}return!0},n.handleEllipse=function(r,i,a){if(!r)return[i,a];var o=n.ellipseOver({x0:i[0],y0:i[1],x1:a[0],y1:a[1]}),u=(o.x1+o.x0)/2,c=(o.y1+o.y0)/2,f=(o.x1-o.x0)/2,h=(o.y1-o.y0)/2;f||(f=h/=l),h||(h=f/=l);for(var p=[],d=0;d<s;d++){var v=2*d*Math.PI/s;p.push([u+f*Math.cos(v),c+h*Math.sin(v)])}return p},n.ellipseOver=function(r){var n=r.x0,i=r.y0,a=r.x1,o=r.y1,s=a-n,u=o-i,c=((n-=s)+a)/2,f=((i-=u)+o)/2;return{x0:c-(s*=l),y0:f-(u*=l),x1:c+s,y1:f+u}},n.fixDatesForPaths=function(r,n,i){var a="date"===n.type,o="date"===i.type;if(!a&&!o)return r;for(var s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++)for(var u=0;u+2<r[s][l].length;u+=2)a&&(r[s][l][u+1]=r[s][l][u+1].replace(" ","_")),o&&(r[s][l][u+2]=r[s][l][u+2].replace(" ","_"));return r}},90551:function(r,n,i){"use strict";var a=i(64505),o=a.drawMode,s=a.openMode,l=i(89995),u=l.i000,c=l.i090,f=l.i180,h=l.i270,p=l.cos45,d=l.sin45,v=i(75549),g=v.p2r,y=v.r2p,m=i(51873).clearOutline,x=i(60165),b=x.readPaths,_=x.writePaths,w=x.ellipseOver,T=x.fixDatesForPaths;function k(r,n,i){var a,o=r[0][0],l=n.gd,v=o.getAttribute("d"),m=l._fullLayout.newshape,x=n.plotinfo,k=n.isActiveShape,A=x.xaxis,M=x.yaxis,S=!!x.domain||!x.xaxis,E=!!x.domain||!x.yaxis,L=s(i),C=b(v,l,x,k),O={editable:!0,visible:m.visible,name:m.name,showlegend:m.showlegend,legend:m.legend,legendwidth:m.legendwidth,legendgroup:m.legendgroup,legendgrouptitle:{text:m.legendgrouptitle.text,font:m.legendgrouptitle.font},legendrank:m.legendrank,label:m.label,xref:S?"paper":A._id,yref:E?"paper":M._id,layer:m.layer,opacity:m.opacity,line:{color:m.line.color,width:m.line.width,dash:m.line.dash}};if(L||(O.fillcolor=m.fillcolor,O.fillrule=m.fillrule),1===C.length&&(a=C[0]),a&&5===a.length&&"drawrect"===i)O.type="rect",O.x0=a[0][1],O.y0=a[0][2],O.x1=a[2][1],O.y1=a[2][2];else if(a&&"drawline"===i)O.type="line",O.x0=a[0][1],O.y0=a[0][2],O.x1=a[1][1],O.y1=a[1][2];else if(a&&"drawcircle"===i){O.type="circle";var P=a[u][1],I=a[c][1],D=a[f][1],z=a[h][1],R=a[u][2],F=a[c][2],B=a[f][2],N=a[h][2],j=x.xaxis&&("date"===x.xaxis.type||"log"===x.xaxis.type),U=x.yaxis&&("date"===x.yaxis.type||"log"===x.yaxis.type);j&&(P=y(x.xaxis,P),I=y(x.xaxis,I),D=y(x.xaxis,D),z=y(x.xaxis,z)),U&&(R=y(x.yaxis,R),F=y(x.yaxis,F),B=y(x.yaxis,B),N=y(x.yaxis,N));var V=(I+z)/2,H=(R+B)/2,q=w({x0:V,y0:H,x1:V+(z-I+D-P)/2*p,y1:H+(N-F+B-R)/2*d});j&&(q.x0=g(x.xaxis,q.x0),q.x1=g(x.xaxis,q.x1)),U&&(q.y0=g(x.yaxis,q.y0),q.y1=g(x.yaxis,q.y1)),O.x0=q.x0,O.y0=q.y0,O.x1=q.x1,O.y1=q.y1}else O.type="path",A&&M&&T(C,A,M),O.path=_(C),a=null;return O}r.exports={newShapes:function(r,n){if(r.length&&r[0][0]){var i=n.gd,a=n.isActiveShape,s=n.dragmode,l=(i.layout||{}).shapes||[];if(!o(s)&&void 0!==a){var u=i._fullLayout._activeShapeIndex;if(u<l.length)switch(i._fullLayout.shapes[u].type){case"rect":s="drawrect";break;case"circle":s="drawcircle";break;case"line":s="drawline";break;case"path":var c=l[u].path||"";s="Z"===c[c.length-1]?"drawclosedpath":"drawopenpath"}}var f=k(r,n,s);m(i);for(var h=n.editHelpers,p=(h||{}).modifyItem,d=[],v=0;v<l.length;v++){var g=i._fullLayout.shapes[v];if(d[v]=g._input,void 0!==a&&v===i._fullLayout._activeShapeIndex)switch(g.type){case"line":case"rect":case"circle":p("x0",f.x0),p("x1",f.x1),p("y0",f.y0),p("y1",f.y1);break;case"path":p("path",f.path)}}return void 0===a?(d.push(f),d):h?h.getUpdateObj():{}}},createShapeObj:k}},51873:function(r){"use strict";r.exports={clearOutlineControllers:function(r){var n=r._fullLayout._zoomlayer;n&&n.selectAll(".outline-controllers").remove()},clearOutline:function(r){var n=r._fullLayout._zoomlayer;n&&n.selectAll(".select-outline").remove(),r._fullLayout._outlining=!1}}},30477:function(r,n,i){"use strict";var a=i(21459),o=i(71828),s=i(89298);n.rangeToShapePosition=function(r){return"log"===r.type?r.r2d:function(r){return r}},n.shapePositionToRange=function(r){return"log"===r.type?r.d2r:function(r){return r}},n.decodeDate=function(r){return function(n){return n.replace&&(n=n.replace("_"," ")),r(n)}},n.encodeDate=function(r){return function(n){return r(n).replace(" ","_")}},n.extractPathCoords=function(r,n,i){var s=[];return r.match(a.segmentRE).forEach(function(r){var l=n[r.charAt(0)].drawn;if(void 0!==l){var u=r.substr(1).match(a.paramRE);if(u&&!(u.length<l)){var c=u[l],f=i?c:o.cleanNumber(c);s.push(f)}}}),s},n.getDataToPixel=function(r,i,a,o){var s,l=r._fullLayout._size;if(i){if("domain"===o)s=function(r){return i._length*(a?1-r:r)+i._offset};else{var u=n.shapePositionToRange(i);s=function(r){return i._offset+i.r2p(u(r,!0))},"date"===i.type&&(s=n.decodeDate(s))}}else s=a?function(r){return l.t+l.h*(1-r)}:function(r){return l.l+l.w*r};return s},n.getPixelToData=function(r,i,a,o){var s,l=r._fullLayout._size;if(i){if("domain"===o)s=function(r){var n=(r-i._offset)/i._length;return a?1-n:n};else{var u=n.rangeToShapePosition(i);s=function(r){return u(i.p2r(r-i._offset))}}}else s=a?function(r){return 1-(r-l.t)/l.h}:function(r){return(r-l.l)/l.w};return s},n.roundPositionForSharpStrokeRendering=function(r,n){var i=Math.round(r);return 1===Math.round(n%2)?i+.5:i},n.makeShapesOptionsAndPlotinfo=function(r,n){var i=r._fullLayout.shapes[n]||{},a=r._fullLayout._plots[i.xref+i.yref];return a?a._hadPlotinfo=!0:(a={},i.xref&&"paper"!==i.xref&&(a.xaxis=r._fullLayout[i.xref+"axis"]),i.yref&&"paper"!==i.yref&&(a.yaxis=r._fullLayout[i.yref+"axis"])),a.xsizemode=i.xsizemode,a.ysizemode=i.ysizemode,a.xanchor=i.xanchor,a.yanchor=i.yanchor,{options:i,plotinfo:a}},n.makeSelectionsOptionsAndPlotinfo=function(r,n){var i=r._fullLayout.selections[n]||{},a=r._fullLayout._plots[i.xref+i.yref];return a?a._hadPlotinfo=!0:(a={},i.xref&&(a.xaxis=r._fullLayout[i.xref+"axis"]),i.yref&&(a.yaxis=r._fullLayout[i.yref+"axis"])),{options:i,plotinfo:a}},n.getPathString=function(r,i){var l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T=i.type,k=s.getRefType(i.xref),A=s.getRefType(i.yref),M=s.getFromId(r,i.xref),S=s.getFromId(r,i.yref),E=r._fullLayout._size;if(M?"domain"===k?g=function(r){return M._offset+M._length*r}:(v=n.shapePositionToRange(M),g=function(r){return M._offset+M.r2p(v(r,!0))}):g=function(r){return E.l+E.w*r},S?"domain"===A?m=function(r){return S._offset+S._length*(1-r)}:(y=n.shapePositionToRange(S),m=function(r){return S._offset+S.r2p(y(r,!0))}):m=function(r){return E.t+E.h*(1-r)},"path"===T)return M&&"date"===M.type&&(g=n.decodeDate(g)),S&&"date"===S.type&&(m=n.decodeDate(m)),l=g,u=m,c=i.path,f=i.xsizemode,h=i.ysizemode,p=i.xanchor,d=i.yanchor,c.replace(a.segmentRE,function(r){var n=0,i=r.charAt(0),s=a.paramIsX[i],c=a.paramIsY[i],v=a.numParams[i],g=r.substr(1).replace(a.paramRE,function(r){return s[n]?r="pixel"===f?l(p)+Number(r):l(r):c[n]&&(r="pixel"===h?u(d)-Number(r):u(r)),++n>v&&(r="X"),r});return n>v&&(g=g.replace(/[\s,]*X.*/,""),o.log("Ignoring extra params in segment "+r)),i+g});if("pixel"===i.xsizemode){var L=g(i.xanchor);x=L+i.x0,b=L+i.x1}else x=g(i.x0),b=g(i.x1);if("pixel"===i.ysizemode){var C=m(i.yanchor);_=C-i.y0,w=C-i.y1}else _=m(i.y0),w=m(i.y1);if("line"===T)return"M"+x+","+_+"L"+b+","+w;if("rect"===T)return"M"+x+","+_+"H"+b+"V"+w+"H"+x+"Z";var O=(x+b)/2,P=(_+w)/2,I=Math.abs(O-x),D=Math.abs(P-_),z="A"+I+","+D,R=O+I+","+P;return"M"+R+z+" 0 1,1 "+O+","+(P-D)+z+" 0 0,1 "+R+"Z"}},89853:function(r,n,i){"use strict";var a=i(34031);r.exports={moduleType:"component",name:"shapes",layoutAttributes:i(89827),supplyLayoutDefaults:i(84726),supplyDrawNewShapeDefaults:i(45547),includeBasePlot:i(76325)("shapes"),calcAutorange:i(5627),draw:a.draw,drawOne:a.drawOne}},37281:function(r){"use strict";function n(r,n){return n?n.d2l(r):r}function i(r,i){return n(r.x1,i)-n(r.x0,i)}function a(r,i,a){return n(r.y1,a)-n(r.y0,a)}r.exports={x0:function(r){return r.x0},x1:function(r){return r.x1},y0:function(r){return r.y0},y1:function(r){return r.y1},slope:function(r,n,o){return"line"!==r.type?void 0:a(r,0,o)/i(r,n)},dx:i,dy:a,width:function(r,n){return Math.abs(i(r,n))},height:function(r,n,i){return Math.abs(a(r,0,i))},length:function(r,n,o){return"line"!==r.type?void 0:Math.sqrt(Math.pow(i(r,n),2)+Math.pow(a(r,0,o),2))},xcenter:function(r,i){var a;return a=(n(r.x1,i)+n(r.x0,i))/2,i?i.l2d(a):a},ycenter:function(r,i,a){var o;return o=(n(r.y1,a)+n(r.y0,a))/2,a?a.l2d(o):o}}},75067:function(r,n,i){"use strict";var a=i(41940),o=i(35025),s=i(1426).extendDeepAll,l=i(30962).overrideAll,u=i(85594),c=i(44467).templatedArray,f=i(98292),h=c("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});r.exports=l(c("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:h,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:s(o({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:u.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:a({})},font:a({}),activebgcolor:{valType:"color",dflt:f.gripBgActiveColor},bgcolor:{valType:"color",dflt:f.railBgColor},bordercolor:{valType:"color",dflt:f.railBorderColor},borderwidth:{valType:"number",min:0,dflt:f.railBorderWidth},ticklen:{valType:"number",min:0,dflt:f.tickLength},tickcolor:{valType:"color",dflt:f.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:f.minorTickLength}}),"arraydraw","from-root")},98292:function(r){"use strict";r.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(r,n,i){"use strict";var a=i(71828),o=i(85501),s=i(75067),l=i(98292).name,u=s.steps;function c(r,n,i){function l(i,o){return a.coerce(r,n,s,i,o)}for(var u=o(r,n,{name:"steps",handleItemDefaults:f}),c=0,h=0;h<u.length;h++)u[h].visible&&c++;if(c<2?n.visible=!1:l("visible")){n._stepCount=c;var p=n._visibleSteps=a.filterVisible(u);(u[l("active")]||{}).visible||(n.active=p[0]._index),l("x"),l("y"),a.noneOrAll(r,n,["x","y"]),l("xanchor"),l("yanchor"),l("len"),l("lenmode"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),a.coerceFont(l,"font",i.font),l("currentvalue.visible")&&(l("currentvalue.xanchor"),l("currentvalue.prefix"),l("currentvalue.suffix"),l("currentvalue.offset"),a.coerceFont(l,"currentvalue.font",n.font)),l("transition.duration"),l("transition.easing"),l("bgcolor"),l("activebgcolor"),l("bordercolor"),l("borderwidth"),l("ticklen"),l("tickwidth"),l("tickcolor"),l("minorticklen")}}function f(r,n){function i(i,o){return a.coerce(r,n,u,i,o)}if("skip"===r.method||Array.isArray(r.args)?i("visible"):n.visible=!1){i("method"),i("args");var o=i("label","step-"+n._index);i("value",o),i("execute")}}r.exports=function(r,n){o(r,n,{name:l,handleItemDefaults:c})}},44504:function(r,n,i){"use strict";var a=i(39898),o=i(74875),s=i(7901),l=i(91424),u=i(71828),c=u.strTranslate,f=i(63893),h=i(44467).arrayEditor,p=i(98292),d=i(18783),v=d.LINE_SPACING,g=d.FROM_TL,y=d.FROM_BR;function m(r){return p.autoMarginIdRoot+r._index}function x(r){return r._index}function b(r,n,i){if(n.currentvalue.visible){var a,o,s=n._dims;switch(n.currentvalue.xanchor){case"right":a=s.inputAreaLength-p.currentValueInset-s.currentValueMaxWidth,o="left";break;case"center":a=.5*s.inputAreaLength,o="middle";break;default:a=p.currentValueInset,o="left"}var c=u.ensureSingle(r,"text",p.labelClass,function(r){r.attr({"text-anchor":o,"data-notex":1})}),h=n.currentvalue.prefix?n.currentvalue.prefix:"";if("string"==typeof i)h+=i;else{var d=n.steps[n.active].label,g=n._gd._fullLayout._meta;g&&(d=u.templateString(d,g)),h+=d}n.currentvalue.suffix&&(h+=n.currentvalue.suffix),c.call(l.font,n.currentvalue.font).text(h).call(f.convertToTspans,n._gd);var y=f.lineCount(c),m=(s.currentValueMaxLines+1-y)*n.currentvalue.font.size*v;return f.positionText(c,a,m),c}}function _(r,n,i){u.ensureSingle(r,"rect",p.gripRectClass,function(a){a.call(M,n,r,i).style("pointer-events","all")}).attr({width:p.gripWidth,height:p.gripHeight,rx:p.gripRadius,ry:p.gripRadius}).call(s.stroke,i.bordercolor).call(s.fill,i.bgcolor).style("stroke-width",i.borderwidth+"px")}function w(r,n,i){var a=u.ensureSingle(r,"text",p.labelClass,function(r){r.attr({"text-anchor":"middle","data-notex":1})}),o=n.step.label,s=i._gd._fullLayout._meta;return s&&(o=u.templateString(o,s)),a.call(l.font,i.font).text(o).call(f.convertToTspans,i._gd),a}function T(r,n){var i=u.ensureSingle(r,"g",p.labelsClass),o=n._dims,s=i.selectAll("g."+p.labelGroupClass).data(o.labelSteps);s.enter().append("g").classed(p.labelGroupClass,!0),s.exit().remove(),s.each(function(r){var i=a.select(this);i.call(w,r,n),l.setTranslate(i,L(n,r.fraction),p.tickOffset+n.ticklen+n.font.size*v+p.labelOffset+o.currentValueTotalHeight)})}function k(r,n,i,a,o){var s=Math.round(a*(i._stepCount-1)),l=i._visibleSteps[s]._index;l!==i.active&&A(r,n,i,l,!0,o)}function A(r,n,i,a,s,l){var u=i.active;i.active=a,h(r.layout,p.name,i).applyUpdate("active",a);var c=i.steps[i.active];n.call(E,i,l),n.call(b,i),r.emit("plotly_sliderchange",{slider:i,step:i.steps[i.active],interaction:s,previousActive:u}),c&&c.method&&s&&(n._nextMethod?(n._nextMethod.step=c,n._nextMethod.doCallback=s,n._nextMethod.doTransition=l):(n._nextMethod={step:c,doCallback:s,doTransition:l},n._nextMethodRaf=window.requestAnimationFrame(function(){var i=n._nextMethod.step;i.method&&(i.execute&&o.executeAPICommand(r,i.method,i.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function M(r,n,i){if(!n._context.staticPlot){var o=i.node(),l=a.select(n);r.on("mousedown",c),r.on("touchstart",c)}function u(){return i.data()[0]}function c(){var r=u();n.emit("plotly_sliderstart",{slider:r});var c=i.select("."+p.gripRectClass);a.event.stopPropagation(),a.event.preventDefault(),c.call(s.fill,r.activebgcolor);var f=C(r,a.mouse(o)[0]);function h(){var r=u(),s=C(r,a.mouse(o)[0]);k(n,i,r,s,!1)}function d(){var r=u();r._dragging=!1,c.call(s.fill,r.bgcolor),l.on("mouseup",null),l.on("mousemove",null),l.on("touchend",null),l.on("touchmove",null),n.emit("plotly_sliderend",{slider:r,step:r.steps[r.active]})}k(n,i,r,f,!0),r._dragging=!0,l.on("mousemove",h),l.on("touchmove",h),l.on("mouseup",d),l.on("touchend",d)}}function S(r,n){var i=r.selectAll("rect."+p.tickRectClass).data(n._visibleSteps),o=n._dims;i.enter().append("rect").classed(p.tickRectClass,!0),i.exit().remove(),i.attr({width:n.tickwidth+"px","shape-rendering":"crispEdges"}),i.each(function(r,i){var u=i%o.labelStride==0,c=a.select(this);c.attr({height:u?n.ticklen:n.minorticklen}).call(s.fill,n.tickcolor),l.setTranslate(c,L(n,i/(n._stepCount-1))-.5*n.tickwidth,(u?p.tickOffset:p.minorTickOffset)+o.currentValueTotalHeight)})}function E(r,n,i){for(var a=r.select("rect."+p.gripRectClass),o=0,s=0;s<n._stepCount;s++)if(n._visibleSteps[s]._index===n.active){o=s;break}var l=L(n,o/(n._stepCount-1));if(!n._invokingCommand){var u=a;i&&n.transition.duration>0&&(u=u.transition().duration(n.transition.duration).ease(n.transition.easing)),u.attr("transform",c(l-.5*p.gripWidth,n._dims.currentValueTotalHeight))}}function L(r,n){var i=r._dims;return i.inputAreaStart+p.stepInset+(i.inputAreaLength-2*p.stepInset)*Math.min(1,Math.max(0,n))}function C(r,n){var i=r._dims;return Math.min(1,Math.max(0,(n-p.stepInset-i.inputAreaStart)/(i.inputAreaLength-2*p.stepInset-2*i.inputAreaStart)))}function O(r,n,i){var a=i._dims,o=u.ensureSingle(r,"rect",p.railTouchRectClass,function(a){a.call(M,n,r,i).style("pointer-events","all")});o.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,p.tickOffset+i.ticklen+a.labelHeight)}).call(s.fill,i.bgcolor).attr("opacity",0),l.setTranslate(o,0,a.currentValueTotalHeight)}function P(r,n){var i=n._dims,a=i.inputAreaLength-2*p.railInset,o=u.ensureSingle(r,"rect",p.railRectClass);o.attr({width:a,height:p.railWidth,rx:p.railRadius,ry:p.railRadius,"shape-rendering":"crispEdges"}).call(s.stroke,n.bordercolor).call(s.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px"),l.setTranslate(o,p.railInset,.5*(i.inputAreaWidth-p.railWidth)+i.currentValueTotalHeight)}r.exports=function(r){var n=r._context.staticPlot,i=r._fullLayout,s=function(r,n){for(var i=r[p.name],a=[],o=0;o<i.length;o++){var s=i[o];s.visible&&(s._gd=n,a.push(s))}return a}(i,r),c=i._infolayer.selectAll("g."+p.containerClassName).data(s.length>0?[0]:[]);function h(n){n._commandObserver&&(n._commandObserver.remove(),delete n._commandObserver),o.autoMargin(r,m(n))}if(c.enter().append("g").classed(p.containerClassName,!0).style("cursor",n?null:"ew-resize"),c.exit().each(function(){a.select(this).selectAll("g."+p.groupClassName).each(h)}).remove(),0!==s.length){var d=c.selectAll("g."+p.groupClassName).data(s,x);d.enter().append("g").classed(p.groupClassName,!0),d.exit().each(h).remove();for(var v=0;v<s.length;v++)!function(r,n){var i=l.tester.selectAll("g."+p.labelGroupClass).data(n._visibleSteps);i.enter().append("g").classed(p.labelGroupClass,!0);var s=0,c=0;i.each(function(r){var i=w(a.select(this),{step:r},n).node();if(i){var o=l.bBox(i);c=Math.max(c,o.height),s=Math.max(s,o.width)}}),i.remove();var h=n._dims={};h.inputAreaWidth=Math.max(p.railWidth,p.gripHeight);var d=r._fullLayout._size;h.lx=d.l+d.w*n.x,h.ly=d.t+d.h*(1-n.y),"fraction"===n.lenmode?h.outerLength=Math.round(d.w*n.len):h.outerLength=n.len,h.inputAreaStart=0,h.inputAreaLength=Math.round(h.outerLength-n.pad.l-n.pad.r);var v=(h.inputAreaLength-2*p.stepInset)/(n._stepCount-1),x=s+p.labelPadding;if(h.labelStride=Math.max(1,Math.ceil(x/v)),h.labelHeight=c,h.currentValueMaxWidth=0,h.currentValueHeight=0,h.currentValueTotalHeight=0,h.currentValueMaxLines=1,n.currentvalue.visible){var _=l.tester.append("g");i.each(function(r){var i=b(_,n,r.label),a=i.node()&&l.bBox(i.node())||{width:0,height:0},o=f.lineCount(i);h.currentValueMaxWidth=Math.max(h.currentValueMaxWidth,Math.ceil(a.width)),h.currentValueHeight=Math.max(h.currentValueHeight,Math.ceil(a.height)),h.currentValueMaxLines=Math.max(h.currentValueMaxLines,o)}),h.currentValueTotalHeight=h.currentValueHeight+n.currentvalue.offset,_.remove()}h.height=h.currentValueTotalHeight+p.tickOffset+n.ticklen+p.labelOffset+h.labelHeight+n.pad.t+n.pad.b;var T="left";u.isRightAnchor(n)&&(h.lx-=h.outerLength,T="right"),u.isCenterAnchor(n)&&(h.lx-=h.outerLength/2,T="center");var k="top";u.isBottomAnchor(n)&&(h.ly-=h.height,k="bottom"),u.isMiddleAnchor(n)&&(h.ly-=h.height/2,k="middle"),h.outerLength=Math.ceil(h.outerLength),h.height=Math.ceil(h.height),h.lx=Math.round(h.lx),h.ly=Math.round(h.ly);var A={y:n.y,b:h.height*y[k],t:h.height*g[k]};"fraction"===n.lenmode?(A.l=0,A.xl=n.x-n.len*g[T],A.r=0,A.xr=n.x+n.len*y[T]):(A.x=n.x,A.l=h.outerLength*g[T],A.r=h.outerLength*y[T]),o.autoMargin(r,m(n),A)}(r,s[v]);d.each(function(n){var i,s,u=a.select(this);(function(r){var n=r._dims;n.labelSteps=[];for(var i=r._stepCount,a=0;a<i;a+=n.labelStride)n.labelSteps.push({fraction:a/(i-1),step:r._visibleSteps[a]})})(n),o.manageCommandObserver(r,n,n._visibleSteps,function(n){var i=u.data()[0];i.active!==n.index&&(i._dragging||A(r,u,i,n.index,!1,!0))}),i=a.select(this),(n.steps[n.active]||{}).visible||(n.active=n._visibleSteps[0]._index),i.call(b,n).call(P,n).call(T,n).call(S,n).call(O,r,n).call(_,r,n),s=n._dims,l.setTranslate(i,s.lx+n.pad.l,s.ly+n.pad.t),i.call(E,n,!1),i.call(b,n)})}}},23243:function(r,n,i){"use strict";var a=i(98292);r.exports={moduleType:"component",name:a.name,layoutAttributes:i(75067),supplyLayoutDefaults:i(12343),draw:i(44504)}},92998:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(74875),l=i(73972),u=i(71828),c=u.strTranslate,f=i(91424),h=i(7901),p=i(63893),d=i(37822),v=i(18783).OPPOSITE_SIDE,g=/ [XY][0-9]* /;r.exports={draw:function(r,n,i){var y,m=i.propContainer,x=i.propName,b=i.placeholder,_=i.traceIndex,w=i.avoid||{},T=i.attributes,k=i.transform,A=i.containerGroup,M=r._fullLayout,S=1,E=!1,L=m.title,C=(L&&L.text?L.text:"").trim(),O=L&&L.font?L.font:{},P=O.family,I=O.size,D=O.color;"title.text"===x?y="titleText":-1!==x.indexOf("axis")?y="axisTitleText":x.indexOf(!0)&&(y="colorbarTitleText");var z=r._context.edits[y];""===C?S=0:C.replace(g," % ")===b.replace(g," % ")&&(S=.2,E=!0,z||(C="")),i._meta?C=u.templateString(C,i._meta):M._meta&&(C=u.templateString(C,M._meta));var R,F=C||z;A||(A=u.ensureSingle(M._infolayer,"g","g-"+n),R=M._hColorbarMoveTitle);var B=A.selectAll("text").data(F?[0]:[]);if(B.enter().append("text"),B.text(C).attr("class",n),B.exit().remove(),!F)return A;function N(r){u.syncOrAsync([j,U],r)}function j(n){var i;return!k&&R&&(k={}),k?(i="",k.rotate&&(i+="rotate("+[k.rotate,T.x,T.y]+")"),(k.offset||R)&&(i+=c(0,(k.offset||0)-(R||0)))):i=null,n.attr("transform",i),n.style({"font-family":P,"font-size":a.round(I,2)+"px",fill:h.rgb(D),opacity:S*h.opacity(D),"font-weight":s.fontWeight}).attr(T).call(p.convertToTspans,r),s.previousPromises(r)}function U(n){var i=a.select(n.node().parentNode);if(w&&w.selection&&w.side&&C){i.attr("transform",null);var s=v[w.side],l="left"===w.side||"top"===w.side?-1:1,h=o(w.pad)?w.pad:2,p=f.bBox(i.node()),d={t:0,b:0,l:0,r:0},g=r._fullLayout._reservedMargin;for(var y in g)for(var x in g[y]){var b=g[y][x];d[x]=Math.max(d[x],b)}var _={left:d.l,top:d.t,right:M.width-d.r,bottom:M.height-d.b},T=w.maxShift||l*(_[w.side]-p[w.side]),k=0;if(T<0)k=T;else{var A=w.offsetLeft||0,S=w.offsetTop||0;p.left-=A,p.right-=A,p.top-=S,p.bottom-=S,w.selection.each(function(){var r=f.bBox(this);u.bBoxIntersect(p,r,h)&&(k=Math.max(k,l*(r[w.side]-p[s])+h))}),k=Math.min(T,k),m._titleScoot=Math.abs(k)}if(k>0||T<0){var E={left:[-k,0],right:[k,0],top:[0,-k],bottom:[0,k]}[w.side];i.attr("transform",c(E[0],E[1]))}}}return B.call(N),z&&(C?B.on(".opacity",null):(S=0,E=!0,B.text(b).on("mouseover.opacity",function(){a.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){a.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),B.call(p.makeEditable,{gd:r}).on("edit",function(n){void 0!==_?l.call("_guiRestyle",r,x,n,_):l.call("_guiRelayout",r,x,n)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(N)}).on("input",function(r){this.text(r||" ").call(p.positionText,T.x,T.y)})),B.classed("js-placeholder",E),A}}},7163:function(r,n,i){"use strict";var a=i(41940),o=i(22399),s=i(1426).extendFlat,l=i(30962).overrideAll,u=i(35025),c=i(44467).templatedArray,f=c("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});r.exports=l(c("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:f,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:s(u({editType:"arraydraw"}),{}),font:a({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:o.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(r){"use strict";r.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},64897:function(r,n,i){"use strict";var a=i(71828),o=i(85501),s=i(7163),l=i(75909).name,u=s.buttons;function c(r,n,i){function l(i,o){return a.coerce(r,n,s,i,o)}l("visible",o(r,n,{name:"buttons",handleItemDefaults:f}).length>0)&&(l("active"),l("direction"),l("type"),l("showactive"),l("x"),l("y"),a.noneOrAll(r,n,["x","y"]),l("xanchor"),l("yanchor"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),a.coerceFont(l,"font",i.font),l("bgcolor",i.paper_bgcolor),l("bordercolor"),l("borderwidth"))}function f(r,n){function i(i,o){return a.coerce(r,n,u,i,o)}i("visible","skip"===r.method||Array.isArray(r.args))&&(i("method"),i("args"),i("args2"),i("label"),i("execute"))}r.exports=function(r,n){o(r,n,{name:l,handleItemDefaults:c})}},13689:function(r,n,i){"use strict";var a=i(39898),o=i(74875),s=i(7901),l=i(91424),u=i(71828),c=i(63893),f=i(44467).arrayEditor,h=i(18783).LINE_SPACING,p=i(75909),d=i(25849);function v(r){return r._index}function g(r,n){return+r.attr(p.menuIndexAttrName)===n._index}function y(r,n,i,a,o,s,l,u){n.active=l,f(r.layout,p.name,n).applyUpdate("active",l),"buttons"===n.type?x(r,a,null,null,n):"dropdown"===n.type&&(o.attr(p.menuIndexAttrName,"-1"),m(r,a,o,s,n),u||x(r,a,o,s,n))}function m(r,n,i,a,o){var s=u.ensureSingle(n,"g",p.headerClassName,function(r){r.style("pointer-events","all")}),c=o._dims,f=o.active,h=o.buttons[f]||p.blankHeaderOpts,d={y:o.pad.t,yPad:0,x:o.pad.l,xPad:0,index:0},v={width:c.headerWidth,height:c.headerHeight};s.call(b,o,h,r).call(S,o,d,v),u.ensureSingle(n,"text",p.headerArrowClassName,function(r){r.attr("text-anchor","end").call(l.font,o.font).text(p.arrowSymbol[o.direction])}).attr({x:c.headerWidth-p.arrowOffsetX+o.pad.l,y:c.headerHeight/2+p.textOffsetY+o.pad.t}),s.on("click",function(){i.call(E,String(g(i,o)?-1:o._index)),x(r,n,i,a,o)}),s.on("mouseover",function(){s.call(k)}),s.on("mouseout",function(){s.call(A,o)}),l.setTranslate(n,c.lx,c.ly)}function x(r,n,i,s,l){i||(i=n).attr("pointer-events","all");var c,f,h=-1==+i.attr(p.menuIndexAttrName)&&"buttons"!==l.type?[]:l.buttons,d="dropdown"===l.type?p.dropdownButtonClassName:p.buttonClassName,v=i.selectAll("g."+d).data(u.filterVisible(h)),g=v.enter().append("g").classed(d,!0),m=v.exit();"dropdown"===l.type?(g.attr("opacity","0").transition().attr("opacity","1"),m.transition().attr("opacity","0").remove()):m.remove();var x=0,_=0,w=l._dims,M=-1!==["up","down"].indexOf(l.direction);"dropdown"===l.type&&(M?_=w.headerHeight+p.gapButtonHeader:x=w.headerWidth+p.gapButtonHeader),"dropdown"===l.type&&"up"===l.direction&&(_=-p.gapButtonHeader+p.gapButton-w.openHeight),"dropdown"===l.type&&"left"===l.direction&&(x=-p.gapButtonHeader+p.gapButton-w.openWidth);var E={x:w.lx+x+l.pad.l,y:w.ly+_+l.pad.t,yPad:p.gapButton,xPad:p.gapButton,index:0},L={l:E.x+l.borderwidth,t:E.y+l.borderwidth};v.each(function(u,c){var f=a.select(this);f.call(b,l,u,r).call(S,l,E),f.on("click",function(){a.event.defaultPrevented||(u.execute&&(u.args2&&l.active===c?(y(r,l,0,n,i,s,-1),o.executeAPICommand(r,u.method,u.args2)):(y(r,l,0,n,i,s,c),o.executeAPICommand(r,u.method,u.args))),r.emit("plotly_buttonclicked",{menu:l,button:u,active:l.active}))}),f.on("mouseover",function(){f.call(k)}),f.on("mouseout",function(){f.call(A,l),v.call(T,l)})}),v.call(T,l),M?(L.w=Math.max(w.openWidth,w.headerWidth),L.h=E.y-L.t):(L.w=E.x-L.l,L.h=Math.max(w.openHeight,w.headerHeight)),L.direction=l.direction,s&&(v.size()?function(r,n,i,a,o,s){var l,u,c,f=o.direction,h=o._dims,d=o.active;if("up"===f||"down"===f)for(u=0,c=0;c<d;c++)u+=h.heights[c]+p.gapButton;else for(l=0,c=0;c<d;c++)l+=h.widths[c]+p.gapButton;a.enable(s,l,u),a.hbar&&a.hbar.attr("opacity","0").transition().attr("opacity","1"),a.vbar&&a.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,s,l,L):(c=!!s.hbar,f=!!s.vbar,c&&s.hbar.transition().attr("opacity","0").each("end",function(){c=!1,f||s.disable()}),f&&s.vbar.transition().attr("opacity","0").each("end",function(){f=!1,c||s.disable()})))}function b(r,n,i,a){r.call(_,n).call(w,n,i,a)}function _(r,n){u.ensureSingle(r,"rect",p.itemRectClassName,function(r){r.attr({rx:p.rx,ry:p.ry,"shape-rendering":"crispEdges"})}).call(s.stroke,n.bordercolor).call(s.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function w(r,n,i,a){var o=u.ensureSingle(r,"text",p.itemTextClassName,function(r){r.attr({"text-anchor":"start","data-notex":1})}),s=i.label,f=a._fullLayout._meta;f&&(s=u.templateString(s,f)),o.call(l.font,n.font).text(s).call(c.convertToTspans,a)}function T(r,n){var i=n.active;r.each(function(r,o){var l=a.select(this);o===i&&n.showactive&&l.select("rect."+p.itemRectClassName).call(s.fill,p.activeColor)})}function k(r){r.select("rect."+p.itemRectClassName).call(s.fill,p.hoverColor)}function A(r,n){r.select("rect."+p.itemRectClassName).call(s.fill,n.bgcolor)}function M(r){return p.autoMarginIdRoot+r._index}function S(r,n,i,a){a=a||{};var o=r.select("."+p.itemRectClassName),s=r.select("."+p.itemTextClassName),u=n.borderwidth,f=i.index,d=n._dims;l.setTranslate(r,u+i.x,u+i.y);var v=-1!==["up","down"].indexOf(n.direction),g=a.height||(v?d.heights[f]:d.height1);o.attr({x:0,y:0,width:a.width||(v?d.width1:d.widths[f]),height:g});var y=n.font.size*h,m=(c.lineCount(s)-1)*y/2;c.positionText(s,p.textOffsetX,g/2-m+p.textOffsetY),v?i.y+=d.heights[f]+i.yPad:i.x+=d.widths[f]+i.xPad,i.index++}function E(r,n){r.attr(p.menuIndexAttrName,n||"-1").selectAll("g."+p.dropdownButtonClassName).remove()}r.exports=function(r){var n=r._fullLayout,i=u.filterVisible(n[p.name]);function s(n){o.autoMargin(r,M(n))}var f=n._menulayer.selectAll("g."+p.containerClassName).data(i.length>0?[0]:[]);if(f.enter().append("g").classed(p.containerClassName,!0).style("cursor","pointer"),f.exit().each(function(){a.select(this).selectAll("g."+p.headerGroupClassName).each(s)}).remove(),0!==i.length){var _=f.selectAll("g."+p.headerGroupClassName).data(i,v);_.enter().append("g").classed(p.headerGroupClassName,!0);for(var w=u.ensureSingle(f,"g",p.dropdownButtonGroupClassName,function(r){r.style("pointer-events","all")}),T=0;T<i.length;T++)!function(r,n){var i=n._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},s=l.tester.selectAll("g."+p.dropdownButtonClassName).data(u.filterVisible(n.buttons));s.enter().append("g").classed(p.dropdownButtonClassName,!0);var f=-1!==["up","down"].indexOf(n.direction);s.each(function(o,s){var u=a.select(this);u.call(b,n,o,r);var d=u.select("."+p.itemTextClassName),v=Math.max((d.node()&&l.bBox(d.node()).width)+p.textPadX,p.minWidth),g=Math.max(n.font.size*h*c.lineCount(d),p.minHeight)+p.textOffsetY;g=Math.ceil(g),v=Math.ceil(v),i.widths[s]=v,i.heights[s]=g,i.height1=Math.max(i.height1,g),i.width1=Math.max(i.width1,v),f?(i.totalWidth=Math.max(i.totalWidth,v),i.openWidth=i.totalWidth,i.totalHeight+=g+p.gapButton,i.openHeight+=g+p.gapButton):(i.totalWidth+=v+p.gapButton,i.openWidth+=v+p.gapButton,i.totalHeight=Math.max(i.totalHeight,g),i.openHeight=i.totalHeight)}),f?i.totalHeight-=p.gapButton:i.totalWidth-=p.gapButton,i.headerWidth=i.width1+p.arrowPadX,i.headerHeight=i.height1,"dropdown"===n.type&&(f?(i.width1+=p.arrowPadX,i.totalHeight=i.height1):i.totalWidth=i.width1,i.totalWidth+=p.arrowPadX),s.remove();var d=i.totalWidth+n.pad.l+n.pad.r,v=i.totalHeight+n.pad.t+n.pad.b,g=r._fullLayout._size;i.lx=g.l+g.w*n.x,i.ly=g.t+g.h*(1-n.y);var y="left";u.isRightAnchor(n)&&(i.lx-=d,y="right"),u.isCenterAnchor(n)&&(i.lx-=d/2,y="center");var m="top";u.isBottomAnchor(n)&&(i.ly-=v,m="bottom"),u.isMiddleAnchor(n)&&(i.ly-=v/2,m="middle"),i.totalWidth=Math.ceil(i.totalWidth),i.totalHeight=Math.ceil(i.totalHeight),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly),o.autoMargin(r,M(n),{x:n.x,y:n.y,l:d*(({right:1,center:.5})[y]||0),r:d*(({left:1,center:.5})[y]||0),b:v*(({top:1,middle:.5})[m]||0),t:v*(({bottom:1,middle:.5})[m]||0)})}(r,i[T]);var k=new d(r,w,"updatemenus"+n._uid);_.enter().size()&&(w.node().parentNode.appendChild(w.node()),w.call(E)),_.exit().each(function(r){w.call(E),s(r)}).remove(),_.each(function(n){var i=a.select(this),s="dropdown"===n.type?w:null;o.manageCommandObserver(r,n,n.buttons,function(a){y(r,n,n.buttons[a.index],i,s,k,a.index,!0)}),"dropdown"===n.type?(m(r,i,w,k,n),g(w,n)&&x(r,i,w,k,n)):x(r,i,null,null,n)})}}},20763:function(r,n,i){"use strict";var a=i(75909);r.exports={moduleType:"component",name:a.name,layoutAttributes:i(7163),supplyLayoutDefaults:i(64897),draw:i(13689)}},25849:function(r,n,i){"use strict";r.exports=u;var a=i(39898),o=i(7901),s=i(91424),l=i(71828);function u(r,n,i){this.gd=r,this.container=n,this.id=i,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}u.barWidth=2,u.barLength=20,u.barRadius=2,u.barPad=1,u.barColor="#808BA4",u.prototype.enable=function(r,n,i){var l=this.gd._fullLayout,c=l.width,f=l.height;this.position=r;var h,p,d,v,g=this.position.l,y=this.position.w,m=this.position.t,x=this.position.h,b=this.position.direction,_="down"===b,w="left"===b,T="up"===b,k=y,A=x;_||w||"right"===b||T||(this.position.direction="down",_=!0),_||T?(p=(h=g)+k,A=_?(v=Math.min((d=m)+A,f))-d:(v=m+A)-(d=Math.max(v-A,0))):(v=(d=m)+A,k=w?(p=g+k)-(h=Math.max(p-k,0)):(p=Math.min((h=g)+k,c))-h),this._box={l:h,t:d,w:k,h:A};var M=y>k,S=u.barLength+2*u.barPad,E=u.barWidth+2*u.barPad,L=m+x;L+E>f&&(L=f-E);var C=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);C.exit().on(".drag",null).remove(),C.enter().append("rect").classed("scrollbar-horizontal",!0).call(o.fill,u.barColor),M?(this.hbar=C.attr({rx:u.barRadius,ry:u.barRadius,x:g,y:L,width:S,height:E}),this._hbarXMin=g+S/2,this._hbarTranslateMax=k-S):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=x>A,P=u.barWidth+2*u.barPad,I=u.barLength+2*u.barPad,D=g+y;D+P>c&&(D=c-P);var z=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-vertical",!0).call(o.fill,u.barColor),O?(this.vbar=z.attr({rx:u.barRadius,ry:u.barRadius,x:D,y:m,width:P,height:I}),this._vbarYMin=m+I/2,this._vbarTranslateMax=A-I):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var R=this.id,F=h-.5,B=O?p+P+.5:p+.5,N=d-.5,j=M?v+E+.5:v+.5,U=l._topdefs.selectAll("#"+R).data(M||O?[0]:[]);if(U.exit().remove(),U.enter().append("clipPath").attr("id",R).append("rect"),M||O?(this._clipRect=U.select("rect").attr({x:Math.floor(F),y:Math.floor(N),width:Math.ceil(B)-Math.floor(F),height:Math.ceil(j)-Math.floor(N)}),this.container.call(s.setClipUrl,R,this.gd),this.bg.attr({x:g,y:m,width:y,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(s.setClipUrl,null),delete this._clipRect),M||O){var V=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(V);var H=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault(),a.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(H),O&&this.vbar.on(".drag",null).call(H)}this.setTranslate(n,i)},u.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(s.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},u.prototype._onBoxDrag=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r-=a.event.dx),this.vbar&&(n-=a.event.dy),this.setTranslate(r,n)},u.prototype._onBoxWheel=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r+=a.event.deltaY),this.vbar&&(n+=a.event.deltaY),this.setTranslate(r,n)},u.prototype._onBarDrag=function(){var r=this.translateX,n=this.translateY;if(this.hbar){var i=r+this._hbarXMin,o=i+this._hbarTranslateMax;r=(l.constrain(a.event.x,i,o)-i)/(o-i)*(this.position.w-this._box.w)}if(this.vbar){var s=n+this._vbarYMin,u=s+this._vbarTranslateMax;n=(l.constrain(a.event.y,s,u)-s)/(u-s)*(this.position.h-this._box.h)}this.setTranslate(r,n)},u.prototype.setTranslate=function(r,n){var i=this.position.w-this._box.w,a=this.position.h-this._box.h;if(r=l.constrain(r||0,0,i),n=l.constrain(n||0,0,a),this.translateX=r,this.translateY=n,this.container.call(s.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var o=r/i;this.hbar.call(s.setTranslate,r+o*this._hbarTranslateMax,n)}if(this.vbar){var u=n/a;this.vbar.call(s.setTranslate,r,n+u*this._vbarTranslateMax)}}},18783:function(r){"use strict";r.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(r){"use strict";r.exports={axisRefDescription:function(r,n,i){return["If set to a",r,"axis id (e.g. *"+r+"* or","*"+r+"2*), the `"+r+"` position refers to a",r,"coordinate. If set to *paper*, the `"+r+"`","position refers to the distance from the",n,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",n,"("+i+"). If set to a",r,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",n,"of the domain of that axis: e.g.,","*"+r+"2 domain* refers to the domain of the second",r," axis and a",r,"position of 0.5 refers to the","point between the",n,"and the",i,"of the domain of the","second",r,"axis."].join(" ")}}},22372:function(r){"use strict";r.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},31562:function(r){"use strict";r.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(r){"use strict";r.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(r){"use strict";r.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(r){"use strict";r.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},37822:function(r){"use strict";r.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(r){"use strict";r.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},32396:function(r,n){"use strict";n.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],n.STYLE=n.CSS_DECLARATIONS.map(function(r){return r.join(": ")+"; "}).join("")},77922:function(r,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},8729:function(r,n,i){"use strict";n.version=i(11506).version,i(7417),i(98847);for(var a=i(73972),o=n.register=a.register,s=i(10641),l=Object.keys(s),u=0;u<l.length;u++){var c=l[u];"_"!==c.charAt(0)&&(n[c]=s[c]),o({moduleType:"apiMethod",name:c,fn:s[c]})}o(i(67368)),o([i(32745),i(2468),i(47322),i(89853),i(68804),i(20763),i(23243),i(13137),i(97218),i(83312),i(37369),i(21081),i(12311),i(2199),i(30211),i(64168)]),o([i(92177),i(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(o(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=i(24255);var f=i(30211),h=i(74875);n.Plots={resize:h.resize,graphJson:h.graphJson,sendDataToCloud:h.sendDataToCloud},n.Fx={hover:f.hover,unhover:f.unhover,loneHover:f.loneHover,loneUnhover:f.loneUnhover},n.Snapshot=i(44511),n.PlotSchema=i(86281)},24255:function(r){"use strict";r.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs> <style>  .cls-0{fill:#000;}  .cls-1{fill:#FFF;}  .cls-2{fill:#F26;}  .cls-3{fill:#D69;}  .cls-4{fill:#BAC;}  .cls-5{fill:#9EF;} </style></defs> <title>plotly-logomark</title> <g id='symbol'>  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>  <circle class='cls-5' cx='102' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='54' r='6'/>  <circle class='cls-3' cx='54' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='54' r='6'/>  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/> </g></svg>"}}},99863:function(r,n){"use strict";n.isLeftAnchor=function(r){return"left"===r.xanchor||"auto"===r.xanchor&&r.x<=1/3},n.isCenterAnchor=function(r){return"center"===r.xanchor||"auto"===r.xanchor&&r.x>1/3&&r.x<2/3},n.isRightAnchor=function(r){return"right"===r.xanchor||"auto"===r.xanchor&&r.x>=2/3},n.isTopAnchor=function(r){return"top"===r.yanchor||"auto"===r.yanchor&&r.y>=2/3},n.isMiddleAnchor=function(r){return"middle"===r.yanchor||"auto"===r.yanchor&&r.y>1/3&&r.y<2/3},n.isBottomAnchor=function(r){return"bottom"===r.yanchor||"auto"===r.yanchor&&r.y<=1/3}},26348:function(r,n,i){"use strict";var a=i(64872),o=a.mod,s=a.modHalf,l=Math.PI,u=2*l;function c(r){return Math.abs(r[1]-r[0])>u-1e-14}function f(r,n){return s(n-r,u)}function h(r,n){if(c(n))return!0;n[0]<n[1]?(i=n[0],a=n[1]):(i=n[1],a=n[0]),(i=o(i,u))>(a=o(a,u))&&(a+=u);var i,a,s=o(r,u),l=s+u;return s>=i&&s<=a||l>=i&&l<=a}function p(r,n,i,a,o,s,f){o=o||0,s=s||0;var h,p,d,v,g,y=c([i,a]);function m(r,n){return[r*Math.cos(n)+o,s-r*Math.sin(n)]}y?(h=0,p=l,d=u):i<a?(h=i,d=a):(h=a,d=i),r<n?(v=r,g=n):(v=n,g=r);var x,b=Math.abs(d-h)<=l?0:1;function _(r,n,i){return"A"+[r,r]+" "+[0,b,i]+" "+m(r,n)}return y?x=null===v?"M"+m(g,h)+_(g,p,0)+_(g,d,0)+"Z":"M"+m(v,h)+_(v,p,0)+_(v,d,0)+"ZM"+m(g,h)+_(g,p,1)+_(g,d,1)+"Z":null===v?(x="M"+m(g,h)+_(g,d,0),f&&(x+="L0,0Z")):x="M"+m(v,h)+"L"+m(g,h)+_(g,d,0)+"L"+m(v,d)+_(v,h,1)+"Z",x}r.exports={deg2rad:function(r){return r/180*l},rad2deg:function(r){return r/l*180},angleDelta:f,angleDist:function(r,n){return Math.abs(f(r,n))},isFullCircle:c,isAngleInsideSector:h,isPtInsideSector:function(r,n,i,a){var o,s;return!!h(n,a)&&(i[0]<i[1]?(o=i[0],s=i[1]):(o=i[1],s=i[0]),r>=o&&r<=s)},pathArc:function(r,n,i,a,o){return p(null,r,n,i,a,o,0)},pathSector:function(r,n,i,a,o){return p(null,r,n,i,a,o,1)},pathAnnulus:function(r,n,i,a,o,s){return p(r,n,i,a,o,s,1)}}},73627:function(r,n,i){"use strict";var a=i(11631).decode,o=i(41965),s=Array.isArray,l=ArrayBuffer,u=DataView;function c(r){return l.isView(r)&&!(r instanceof u)}function f(r){return s(r)||c(r)}n.isTypedArray=c,n.isArrayOrTypedArray=f,n.isArray1D=function(r){return!f(r[0])},n.ensureArray=function(r,n){return s(r)||(r=[]),r.length=n,r};var h={u1c:"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,i1:"undefined"==typeof Int8Array?void 0:Int8Array,u1:"undefined"==typeof Uint8Array?void 0:Uint8Array,i2:"undefined"==typeof Int16Array?void 0:Int16Array,u2:"undefined"==typeof Uint16Array?void 0:Uint16Array,i4:"undefined"==typeof Int32Array?void 0:Int32Array,u4:"undefined"==typeof Uint32Array?void 0:Uint32Array,f4:"undefined"==typeof Float32Array?void 0:Float32Array,f8:"undefined"==typeof Float64Array?void 0:Float64Array};function p(r){return r.constructor===ArrayBuffer}function d(r,n,i){if(f(r)){if(f(r[0])){for(var a=i,o=0;o<r.length;o++)a=n(a,r[o].length);return a}return r.length}return 0}h.uint8c=h.u1c,h.uint8=h.u1,h.int8=h.i1,h.uint16=h.u2,h.int16=h.i2,h.uint32=h.u4,h.int32=h.i4,h.float32=h.f4,h.float64=h.f8,n.isArrayBuffer=p,n.decodeTypedArraySpec=function(r){var n=[],i={bdata:r.bdata,dtype:r.dtype,shape:r.shape},o=i.dtype,s=h[o];if(!s)throw Error('Error in dtype: "'+o+'"');var l=s.BYTES_PER_ELEMENT,u=i.bdata;p(u)||(u=a(u));var c=void 0===i.shape?[u.byteLength/l]:(""+i.shape).split(",");c.reverse();var f,d,v=c.length,g=+c[0],y=l*g,m=0;if(1===v)n=new s(u);else if(2===v)for(f=+c[1],d=0;d<f;d++)n[d]=new s(u,m,g),m+=y;else{if(3!==v)throw Error("ndim: "+v+'is not supported with the shape:"'+i.shape+'"');f=+c[1];for(var x=+c[2],b=0;b<x;b++)for(n[b]=[],d=0;d<f;d++)n[b][d]=new s(u,m,g),m+=y}return n.bdata=i.bdata,n.dtype=i.dtype,n.shape=c.reverse().join(","),r._inputArray=n,n},n.isTypedArraySpec=function(r){return o(r)&&r.hasOwnProperty("dtype")&&"string"==typeof r.dtype&&r.hasOwnProperty("bdata")&&("string"==typeof r.bdata||p(r.bdata))&&(void 0===r.shape||r.hasOwnProperty("shape")&&("string"==typeof r.shape||"number"==typeof r.shape))},n.concat=function(){var r,n,i,a,o,l,u,c,f=[],h=!0,p=0;for(i=0;i<arguments.length;i++)(l=(a=arguments[i]).length)&&(n?f.push(a):(n=a,o=l),s(a)?r=!1:(h=!1,p?r!==a.constructor&&(r=!1):r=a.constructor),p+=l);if(!p)return[];if(!f.length)return n;if(h)return n.concat.apply(n,f);if(r){for((u=new r(p)).set(n),i=0;i<f.length;i++)a=f[i],u.set(a,o),o+=a.length;return u}for(u=Array(p),c=0;c<n.length;c++)u[c]=n[c];for(i=0;i<f.length;i++){for(a=f[i],c=0;c<a.length;c++)u[o+c]=a[c];o+=c}return u},n.maxRowLength=function(r){return d(r,Math.max,0)},n.minRowLength=function(r){return d(r,Math.min,1/0)}},95218:function(r,n,i){"use strict";var a=i(92770),o=i(50606).BADNUM,s=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;r.exports=function(r){return"string"==typeof r&&(r=r.replace(s,"")),a(r)?Number(r):o}},33306:function(r){"use strict";r.exports=function(r){var n=r._fullLayout;n._glcanvas&&n._glcanvas.size()&&n._glcanvas.each(function(r){r.regl&&r.regl.clear({color:!0,depth:!0})})}},86367:function(r){"use strict";r.exports=function(r){r._responsiveChartHandler&&(window.removeEventListener("resize",r._responsiveChartHandler),delete r._responsiveChartHandler)}},96554:function(r,n,i){"use strict";var a=i(92770),o=i(84267),s=i(9012),l=i(63282),u=i(7901),c=i(37822).DESELECTDIM,f=i(65487),h=i(30587).counter,p=i(64872).modHalf,d=i(73627).isArrayOrTypedArray,v=i(73627).isTypedArraySpec,g=i(73627).decodeTypedArraySpec;function y(r,i){var a=n.valObjectMeta[i.valType];if(i.arrayOk&&d(r))return!0;if(a.validateFunction)return a.validateFunction(r,i);var o={},s=o;return a.coerceFunction(r,{set:function(r){s=r}},o,i),s!==o}n.valObjectMeta={data_array:{coerceFunction:function(r,n,i){n.set(d(r)?r:v(r)?g(r):i)}},enumerated:{coerceFunction:function(r,n,i,a){a.coerceNumber&&(r=+r),-1===a.values.indexOf(r)?n.set(i):n.set(r)},validateFunction:function(r,n){n.coerceNumber&&(r=+r);for(var i=n.values,a=0;a<i.length;a++){var o=String(i[a]);if("/"===o.charAt(0)&&"/"===o.charAt(o.length-1)){if(new RegExp(o.substr(1,o.length-2)).test(r))return!0}else if(r===i[a])return!0}return!1}},boolean:{coerceFunction:function(r,n,i){!0===r||!1===r?n.set(r):n.set(i)}},number:{coerceFunction:function(r,n,i,o){!a(r)||void 0!==o.min&&r<o.min||void 0!==o.max&&r>o.max?n.set(i):n.set(+r)}},integer:{coerceFunction:function(r,n,i,o){r%1||!a(r)||void 0!==o.min&&r<o.min||void 0!==o.max&&r>o.max?n.set(i):n.set(+r)}},string:{coerceFunction:function(r,n,i,a){if("string"!=typeof r){var o="number"==typeof r;!0!==a.strict&&o?n.set(String(r)):n.set(i)}else a.noBlank&&!r?n.set(i):n.set(r)}},color:{coerceFunction:function(r,n,i){o(r).isValid()?n.set(r):n.set(i)}},colorlist:{coerceFunction:function(r,n,i){Array.isArray(r)&&r.length&&r.every(function(r){return o(r).isValid()})?n.set(r):n.set(i)}},colorscale:{coerceFunction:function(r,n,i){n.set(l.get(r,i))}},angle:{coerceFunction:function(r,n,i){"auto"===r?n.set("auto"):a(r)?n.set(p(+r,360)):n.set(i)}},subplotid:{coerceFunction:function(r,n,i,a){var o=a.regex||h(i);"string"==typeof r&&o.test(r)?n.set(r):n.set(i)},validateFunction:function(r,n){var i=n.dflt;return r===i||"string"==typeof r&&!!h(i).test(r)}},flaglist:{coerceFunction:function(r,n,i,a){if(-1===(a.extras||[]).indexOf(r)){if("string"==typeof r){for(var o=r.split("+"),s=0;s<o.length;){var l=o[s];-1===a.flags.indexOf(l)||o.indexOf(l)<s?o.splice(s,1):s++}o.length?n.set(o.join("+")):n.set(i)}else n.set(i)}else n.set(r)}},any:{coerceFunction:function(r,n,i){void 0===r?n.set(i):n.set(v(r)?g(r):r)}},info_array:{coerceFunction:function(r,i,a,o){function s(r,i,a){var o;return void 0===a&&(a=i.dflt),n.valObjectMeta[i.valType].coerceFunction(r,{set:function(r){o=r}},a,i),o}if(v(r)&&(r=g(r)),d(r)){var l,u,c,f,h,p,y=2===o.dimensions||"1-2"===o.dimensions&&Array.isArray(r)&&d(r[0]),m=o.items,x=[],b=Array.isArray(m),_=b&&y&&d(m[0]),w=y&&b&&!_,T=b&&!w?m.length:r.length;if(a=Array.isArray(a)?a:[],y)for(l=0;l<T;l++)for(x[l]=[],c=d(r[l])?r[l]:[],h=w?m.length:b?m[l].length:c.length,u=0;u<h;u++)f=w?m[u]:b?m[l][u]:m,void 0!==(p=s(c[u],f,(a[l]||[])[u]))&&(x[l][u]=p);else for(l=0;l<T;l++)void 0!==(p=s(r[l],b?m[l]:m,a[l]))&&(x[l]=p);i.set(x)}else i.set(a)},validateFunction:function(r,n){if(!d(r))return!1;var i=n.items,a=Array.isArray(i),o=2===n.dimensions;if(!n.freeLength&&r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(o){if(!d(r[s])||!n.freeLength&&r[s].length!==i[s].length)return!1;for(var l=0;l<r[s].length;l++)if(!y(r[s][l],a?i[s][l]:i))return!1}else if(!y(r[s],a?i[s]:i))return!1;return!0}}},n.coerce=function(r,i,a,o,s){var l=f(a,o).get(),u=f(r,o),c=f(i,o),h=u.get(),p=i._template;if(void 0===h&&p&&(h=f(p,o).get(),p=0),void 0===s&&(s=l.dflt),l.arrayOk){if(d(h))return c.set(h),h;if(v(h))return h=g(h),c.set(h),h}var m=n.valObjectMeta[l.valType].coerceFunction;m(h,c,s,l);var x=c.get();return p&&x===s&&!y(h,l)&&(m(h=f(p,o).get(),c,s,l),x=c.get()),x},n.coerce2=function(r,i,a,o,s){var l=f(r,o),u=n.coerce(r,i,a,o,s);return null!=l.get()&&u},n.coerceFont=function(r,n,i){var a={};return i=i||{},a.family=r(n+".family",i.family),a.size=r(n+".size",i.size),a.color=r(n+".color",i.color),a},n.coercePattern=function(r,n,i,a){if(r(n+".shape")){r(n+".solidity"),r(n+".size");var o="overlay"===r(n+".fillmode");if(!a){var s=r(n+".bgcolor",o?i:void 0);r(n+".fgcolor",o?u.contrast(s):i)}r(n+".fgopacity",o?.5:1)}},n.coerceHoverinfo=function(r,i,a){var o,l=i._module.attributes,u=l.hoverinfo?l:s,c=u.hoverinfo;if(1===a._dataLength){var f="all"===c.dflt?c.flags.slice():c.dflt.split("+");f.splice(f.indexOf("name"),1),o=f.join("+")}return n.coerce(r,i,u,"hoverinfo",o)},n.coerceSelectionMarkerOpacity=function(r,n){if(r.marker){var i,a,o=r.marker.opacity;void 0!==o&&(d(o)||r.selected||r.unselected||(i=o,a=c*o),n("selected.marker.opacity",i),n("unselected.marker.opacity",a))}},n.validate=y},41631:function(r,n,i){"use strict";var a,o,s=i(84096).i$,l=i(92770),u=i(47769),c=i(64872).mod,f=i(50606),h=f.BADNUM,p=f.ONEDAY,d=f.ONEHOUR,v=f.ONEMIN,g=f.ONESEC,y=f.EPOCHJD,m=i(73972),x=i(84096).g0,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,_=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=(new Date).getFullYear()-70;function T(r){return r&&m.componentsRegistry.calendars&&"string"==typeof r&&"gregorian"!==r}function k(r,n){return String(r+Math.pow(10,n)).substr(1)}n.dateTick0=function(r,i){var a,o=(a=!!i,T(r)?a?m.getComponentMethod("calendars","CANONICAL_SUNDAY")[r]:m.getComponentMethod("calendars","CANONICAL_TICK")[r]:a?"2000-01-02":"2000-01-01");if(i<2)return o;var s=n.dateTime2ms(o,r);return s+=p*(i-1),n.ms2DateTime(s,0,r)},n.dfltRange=function(r){return T(r)?m.getComponentMethod("calendars","DFLTRANGE")[r]:["2000-01-01","2001-01-01"]},n.isJSDate=function(r){return"object"==typeof r&&null!==r&&"function"==typeof r.getTime},n.dateTime2ms=function(r,i){if(n.isJSDate(r)){var s=r.getTimezoneOffset()*v,l=(r.getUTCMinutes()-r.getMinutes())*v+(r.getUTCSeconds()-r.getSeconds())*g+(r.getUTCMilliseconds()-r.getMilliseconds());if(l){var u=3*v;s=s-u/2+c(l-s+u/2,u)}return(r=Number(r)-s)>=a&&r<=o?r:h}if("string"!=typeof r&&"number"!=typeof r)return h;r=String(r);var f=T(i),x=r.charAt(0);f&&("G"===x||"g"===x)&&(r=r.substr(1),i="");var k=f&&"chinese"===i.substr(0,7),A=r.match(k?_:b);if(!A)return h;var M=A[1],S=A[3]||"1",E=Number(A[5]||1),L=Number(A[7]||0),C=Number(A[9]||0),O=Number(A[11]||0);if(f){if(2===M.length)return h;M=Number(M);try{var P,I=m.getComponentMethod("calendars","getCal")(i);if(k){var D="i"===S.charAt(S.length-1);S=parseInt(S,10),P=I.newDate(M,I.toMonthIndex(M,S,D),E)}else P=I.newDate(M,Number(S),E)}catch(r){return h}return P?(P.toJD()-y)*p+L*d+C*v+O*g:h}M=2===M.length?(Number(M)+2e3-w)%100+w:Number(M);var z=new Date(Date.UTC(2e3,S-=1,E,L,C));return z.setUTCFullYear(M),z.getUTCMonth()!==S||z.getUTCDate()!==E?h:z.getTime()+O*g},a=n.MIN_MS=n.dateTime2ms("-9999"),o=n.MAX_MS=n.dateTime2ms("9999-12-31 23:59:59.9999"),n.isDateTime=function(r,i){return n.dateTime2ms(r,i)!==h};var A=90*p,M=3*d,S=5*v;function E(r,n,i,a,o){if((n||i||a||o)&&(r+=" "+k(n,2)+":"+k(i,2),(a||o)&&(r+=":"+k(a,2),o))){for(var s=4;o%10==0;)s-=1,o/=10;r+="."+k(o,s)}return r}n.ms2DateTime=function(r,n,i){if("number"!=typeof r||!(r>=a&&r<=o))return h;n||(n=0);var s,l,u,f,b,_,w=Math.floor(10*c(r+.05,1)),k=Math.round(r-w/10);if(T(i)){var L=Math.floor(k/p)+y,C=Math.floor(c(r,p));try{s=m.getComponentMethod("calendars","getCal")(i).fromJD(L).formatDate("yyyy-mm-dd")}catch(r){s=x("G%Y-%m-%d")(new Date(k))}if("-"===s.charAt(0))for(;s.length<11;)s="-0"+s.substr(1);else for(;s.length<10;)s="0"+s;l=n<A?Math.floor(C/d):0,u=n<A?Math.floor(C%d/v):0,f=n<M?Math.floor(C%v/g):0,b=n<S?C%g*10+w:0}else _=new Date(k),s=x("%Y-%m-%d")(_),l=n<A?_.getUTCHours():0,u=n<A?_.getUTCMinutes():0,f=n<M?_.getUTCSeconds():0,b=n<S?10*_.getUTCMilliseconds()+w:0;return E(s,l,u,f,b)},n.ms2DateTimeLocal=function(r){if(!(r>=a+p&&r<=o-p))return h;var n=Math.floor(10*c(r+.05,1)),i=new Date(Math.round(r-n/10));return E(s("%Y-%m-%d")(i),i.getHours(),i.getMinutes(),i.getSeconds(),10*i.getUTCMilliseconds()+n)},n.cleanDate=function(r,i,a){if(r===h)return i;if(n.isJSDate(r)||"number"==typeof r&&isFinite(r)){if(T(a))return u.error("JS Dates and milliseconds are incompatible with world calendars",r),i;if(!(r=n.ms2DateTimeLocal(+r))&&void 0!==i)return i}else if(!n.isDateTime(r,a))return u.error("unrecognized date",r),i;return r};var L=/%\d?f/g,C=/%h/g,O={1:"1",2:"1",3:"2",4:"2"};function P(r,n,i,a){r=r.replace(L,function(r){var i=Math.min(+r.charAt(1)||6,6);return(n/1e3%1+2).toFixed(i).substr(2).replace(/0+$/,"")||"0"});var o=new Date(Math.floor(n+.05));if(r=r.replace(C,function(){return O[i("%q")(o)]}),T(a))try{r=m.getComponentMethod("calendars","worldCalFmt")(r,n,a)}catch(r){return"Invalid"}return i(r)(o)}var I=[59,59.9,59.99,59.999,59.9999];n.formatDate=function(r,n,i,a,o,s){if(o=T(o)&&o,!n){if("y"===i)n=s.year;else if("m"===i)n=s.month;else{if("d"!==i)return function(r,n){var i=c(r+.05,p),a=k(Math.floor(i/d),2)+":"+k(c(Math.floor(i/v),60),2);if("M"!==n){l(n)||(n=0);var o=(100+Math.min(c(r/g,60),I[n])).toFixed(n).substr(1);n>0&&(o=o.replace(/0+$/,"").replace(/[\.]$/,"")),a+=":"+o}return a}(r,i)+"\n"+P(s.dayMonthYear,r,a,o);n=s.dayMonth+"\n"+s.year}}return P(n,r,a,o)};var D=3*p;n.incrementMonth=function(r,n,i){i=T(i)&&i;var a=c(r,p);if(r=Math.round(r-a),i)try{var o=Math.round(r/p)+y,s=m.getComponentMethod("calendars","getCal")(i),l=s.fromJD(o);return n%12?s.add(l,n,"m"):s.add(l,n/12,"y"),(l.toJD()-y)*p+a}catch(n){u.error("invalid ms "+r+" in calendar "+i)}var f=new Date(r+D);return f.setUTCMonth(f.getUTCMonth()+n)+a-D},n.findExactDates=function(r,n){for(var i,a,o=0,s=0,u=0,c=0,f=T(n)&&m.getComponentMethod("calendars","getCal")(n),h=0;h<r.length;h++)if(l(a=r[h])){if(!(a%p)){if(f)try{1===(i=f.fromJD(a/p+y)).day()?1===i.month()?o++:s++:u++}catch(r){}else 1===(i=new Date(a)).getUTCDate()?0===i.getUTCMonth()?o++:s++:u++}}else c++;u+=s+=o;var d=r.length-c;return{exactYears:o/d,exactMonths:s/d,exactDays:u/d}}},24401:function(r,n,i){"use strict";var a=i(39898),o=i(47769),s=i(35657),l=i(79576);function u(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function c(r,n,i){var a="plotly.js-style-"+r,s=document.getElementById(a);s||((s=document.createElement("style")).setAttribute("id",a),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var l=s.sheet;l.insertRule?l.insertRule(n+"{"+i+"}",0):l.addRule?l.addRule(n,i,0):o.warn("addStyleRule failed")}function f(r){var n=window.getComputedStyle(r,null),i=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(r){return+r})}function h(r){for(var n,i=[];(n=r)&&(n instanceof Element||n instanceof HTMLElement);)i.push(r),r=r.parentNode;return i}r.exports={getGraphDiv:function(r){var n;if("string"==typeof r){if(null===(n=document.getElementById(r)))throw Error("No DOM element with id '"+r+"' exists on the page.");return n}if(null==r)throw Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=a.select(r);return n.node() instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:u,addStyleRule:function(r,n){c("global",r,n)},addRelatedStyleRule:c,deleteRelatedStyleRule:function(r){var n=document.getElementById("plotly.js-style-"+r);n&&u(n)},getFullTransformMatrix:function(r){var n=h(r),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(r){var n=f(r);if(n){var a=s.convertCssMatrix(n);i=l.multiply(i,i,a)}}),i},getElementTransformMatrix:f,getElementAndAncestors:h,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function(r,n,i){"use strict";var a=i(15398).EventEmitter;r.exports={init:function(r){if(r._ev instanceof a)return r;var n=new a,i=new a;return r._ev=n,r._internalEv=i,r.on=n.on.bind(n),r.once=n.once.bind(n),r.removeListener=n.removeListener.bind(n),r.removeAllListeners=n.removeAllListeners.bind(n),r._internalOn=i.on.bind(i),r._internalOnce=i.once.bind(i),r._removeInternalListener=i.removeListener.bind(i),r._removeAllInternalListeners=i.removeAllListeners.bind(i),r.emit=function(a,o){"undefined"!=typeof jQuery&&jQuery(r).trigger(a,o),n.emit(a,o),i.emit(a,o)},r},triggerHandler:function(r,n,i){"undefined"!=typeof jQuery&&(o=jQuery(r).triggerHandler(n,i));var a=r._ev;if(!a)return o;var o,s,l,u=a._events[n];if(!u)return o;function c(r){return r.listener?(a.removeListener(n,r.listener),r.fired?void 0:(r.fired=!0,r.listener.apply(a,[i]))):r.apply(a,[i])}for(u=Array.isArray(u)?u:[u],l=0;l<u.length-1;l++)c(u[l]);return s=c(u[l]),void 0!==o?o:s},purge:function(r){return delete r._ev,delete r.on,delete r.once,delete r.removeListener,delete r.removeAllListeners,delete r.emit,delete r._ev,delete r._internalEv,delete r._internalOn,delete r._internalOnce,delete r._removeInternalListener,delete r._removeAllInternalListeners,r}}},1426:function(r,n,i){"use strict";var a=i(41965),o=Array.isArray;function s(r,n,i,l){var u,c,f,h,p,d,v=r[0],g=r.length;if(2===g&&o(v)&&o(r[1])&&0===v.length){if(function(r,n){var i,a;for(i=0;i<r.length;i++){if(null!==(a=r[i])&&"object"==typeof a)return!1;void 0!==a&&(n[i]=a)}return!0}(r[1],v))return v;v.splice(0,v.length)}for(var y=1;y<g;y++)for(c in u=r[y])f=v[c],h=u[c],l&&o(h)?v[c]=h:n&&h&&(a(h)||(p=o(h)))?(p?(p=!1,d=f&&o(f)?f:[]):d=f&&a(f)?f:{},v[c]=s([d,h],n,i,l)):(void 0!==h||i)&&(v[c]=h);return v}n.extendFlat=function(){return s(arguments,!1,!1,!1)},n.extendDeep=function(){return s(arguments,!0,!1,!1)},n.extendDeepAll=function(){return s(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return s(arguments,!0,!1,!0)}},75744:function(r){"use strict";r.exports=function(r){for(var n={},i=[],a=0,o=0;o<r.length;o++){var s=r[o];1!==n[s]&&(n[s]=1,i[a++]=s)}return i}},76756:function(r){"use strict";function n(r){return!0===r.visible}function i(r){var n=r[0].trace;return!0===n.visible&&0!==n._length}r.exports=function(r){for(var a=Array.isArray(r)&&Array.isArray(r[0])&&r[0][0]&&r[0][0].trace?i:n,o=[],s=0;s<r.length;s++){var l=r[s];a(l)&&o.push(l)}return o}},41327:function(r,n,i){"use strict";var a=i(39898),o=i(24138),s=i(30774),l=i(29261),u=i(85268),c=i(23389),f=i(47769),h=i(41965),p=i(65487),d=i(61082),v=Object.keys(o),g={"ISO-3":c,"USA-states":c,"country names":function(r){for(var n=0;n<v.length;n++){var i=v[n];if(new RegExp(o[i]).test(r.trim().toLowerCase()))return i}return f.log("Unrecognized country name: "+r+"."),!1}};function y(r){var n=r.geojson,i=window.PlotlyGeoAssets||{},a="string"==typeof n?i[n]:n;return h(a)?a:(f.error("Oops ... something went wrong when fetching "+n),!1)}r.exports={locationToFeature:function(r,n,i){if(!n||"string"!=typeof n)return!1;var a,o,s,l=g[r](n);if(l){if("USA-states"===r)for(a=[],s=0;s<i.length;s++)(o=i[s]).properties&&o.properties.gu&&"USA"===o.properties.gu&&a.push(o);else a=i;for(s=0;s<a.length;s++)if((o=a[s]).id===l)return o;f.log(["Location with id",l,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(r){var n,i,a,o,s=r.geometry,l=s.coordinates,u=r.id,c=[];function f(r){for(var n=0;n<r.length-1;n++)if(r[n][0]>0&&r[n+1][0]<0)return n;return null}switch(n="RUS"===u||"FJI"===u?function(r){var n;if(null===f(r))n=r;else for(n=Array(r.length),o=0;o<r.length;o++)n[o]=[r[o][0]<0?r[o][0]+360:r[o][0],r[o][1]];c.push(d.tester(n))}:"ATA"===u?function(r){var n=f(r);if(null===n)return c.push(d.tester(r));var i=Array(r.length+1),a=0;for(o=0;o<r.length;o++)o>n?i[a++]=[r[o][0]+360,r[o][1]]:o===n?(i[a++]=r[o],i[a++]=[r[o][0],-90]):i[a++]=r[o];var s=d.tester(i);s.pts.pop(),c.push(s)}:function(r){c.push(d.tester(r))},s.type){case"MultiPolygon":for(i=0;i<l.length;i++)for(a=0;a<l[i].length;a++)n(l[i][a]);break;case"Polygon":for(i=0;i<l.length;i++)n(l[i])}return c},getTraceGeojson:y,extractTraceFeature:function(r){var n=r[0].trace,i=y(n);if(!i)return!1;var a,o={},u=[];for(a=0;a<n._length;a++){var c=r[a];(c.loc||0===c.loc)&&(o[c.loc]=c)}function h(r){var i=p(r,n.featureidkey||"id").get(),a=o[i];if(a){var c=r.geometry;if("Polygon"===c.type||"MultiPolygon"===c.type){var h={type:"Feature",id:i,geometry:c,properties:{}};h.properties.ct=function(r){var n,i=r.geometry;if("MultiPolygon"===i.type)for(var a=i.coordinates,o=0,u=0;u<a.length;u++){var c={type:"Polygon",coordinates:a[u]},f=s.default(c);f>o&&(o=f,n=c)}else n=i;return l.default(n).geometry.coordinates}(h),a.fIn=r,a.fOut=h,u.push(h)}else f.log(["Location",a.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete o[i]}switch(i.type){case"FeatureCollection":var d=i.features;for(a=0;a<d.length;a++)h(d[a]);break;case"Feature":h(i);break;default:return f.warn(["Invalid GeoJSON type",(i.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var v in o)f.log(["Location *"+v+"*","does not have a matching feature with id-key","*"+n.featureidkey+"*."].join(" "));return u},fetchTraceGeoData:function(r){for(var n=window.PlotlyGeoAssets||{},i=[],o=0;o<r.length;o++){var s=r[o][0].trace.geojson;"string"==typeof s&&(n[s]?"pending"===n[s]&&i.push(function(r){return new Promise(function(i,a){var o=0,s=setInterval(function(){return n[r]&&"pending"!==n[r]?(clearInterval(s),i(n[r])):o>100?(clearInterval(s),a("Unexpected error while fetching from "+r)):void o++},50)})}(s)):(n[s]="pending",i.push(function(r){return new Promise(function(i,o){a.json(r,function(a,s){return a?(delete n[r],o(Error(404===a.status?'GeoJSON at URL "'+r+'" does not exist.':"Unexpected error while fetching from "+r))):(n[r]=s,i(s))})})}(s))))}return i},computeBbox:function(r){return u.default(r)}}},18214:function(r,n,i){"use strict";var a=i(50606).BADNUM;n.calcTraceToLineCoords=function(r){for(var n=r[0].trace.connectgaps,i=[],o=[],s=0;s<r.length;s++){var l=r[s].lonlat;l[0]!==a?o.push(l):!n&&o.length>0&&(i.push(o),o=[])}return o.length>0&&i.push(o),i},n.makeLine=function(r){return 1===r.length?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}},n.makePolygon=function(r){if(1===r.length)return{type:"Polygon",coordinates:r};for(var n=Array(r.length),i=0;i<r.length;i++)n[i]=[r[i]];return{type:"MultiPolygon",coordinates:n}},n.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(r,n,i){"use strict";var a,o,s,l=i(64872).mod;function u(r,n,i,a,o,s,l,u){var c=i-r,f=o-r,h=l-o,p=a-n,d=s-n,v=u-s,g=c*v-h*p;if(0===g)return null;var y=(f*v-h*d)/g,m=(f*p-c*d)/g;return m<0||m>1||y<0||y>1?null:{x:r+c*y,y:n+p*y}}function c(r,n,i,a,o){var s=a*r+o*n;if(s<0)return a*a+o*o;if(s>i){var l=a-r,u=o-n;return l*l+u*u}var c=a*n-o*r;return c*c/i}n.segmentsIntersect=u,n.segmentDistance=function(r,n,i,a,o,s,l,f){if(u(r,n,i,a,o,s,l,f))return 0;var h=i-r,p=a-n,d=l-o,v=f-s,g=h*h+p*p,y=d*d+v*v;return Math.sqrt(Math.min(c(h,p,g,o-r,s-n),c(h,p,g,l-r,f-n),c(d,v,y,r-o,n-s),c(d,v,y,i-o,a-s)))},n.getTextLocation=function(r,n,i,u){if(r===o&&u===s||(a={},o=r,s=u),a[i])return a[i];var c=r.getPointAtLength(l(i-u/2,n)),f=r.getPointAtLength(l(i+u/2,n)),h=Math.atan((f.y-c.y)/(f.x-c.x)),p=r.getPointAtLength(l(i,n)),d={x:(4*p.x+c.x+f.x)/6,y:(4*p.y+c.y+f.y)/6,theta:h};return a[i]=d,d},n.clearLocationCache=function(){o=null},n.getVisibleSegment=function(r,n,i){var a,o,s=n.left,l=n.right,u=n.top,c=n.bottom,f=0,h=r.getTotalLength(),p=h;function d(n){var i=r.getPointAtLength(n);0===n?a=i:n===h&&(o=i);var f=i.x<s?s-i.x:i.x>l?i.x-l:0,p=i.y<u?u-i.y:i.y>c?i.y-c:0;return Math.sqrt(f*f+p*p)}for(var v=d(f);v;){if((f+=v+i)>p)return;v=d(f)}for(v=d(p);v;){if(f>(p-=v+i))return;v=d(p)}return{min:f,max:p,len:p-f,total:h,isClosed:0===f&&p===h&&.1>Math.abs(a.x-o.x)&&.1>Math.abs(a.y-o.y)}},n.findPointOnPath=function(r,n,i,a){for(var o,s,l,u=(a=a||{}).pathLength||r.getTotalLength(),c=a.tolerance||.001,f=a.iterationLimit||30,h=r.getPointAtLength(0)[i]>r.getPointAtLength(u)[i]?-1:1,p=0,d=0,v=u;p<f&&(o=(d+v)/2,!(Math.abs(l=(s=r.getPointAtLength(o))[i]-n)<c));)h*l>0?v=o:d=o,p++;return s}},81697:function(r,n,i){"use strict";var a=i(92770),o=i(84267),s=i(25075),l=i(21081),u=i(22399).defaultLine,c=i(73627).isArrayOrTypedArray,f=s(u);function h(r){if(a(r))return f;var n=s(r);return n.length?n:f}function p(r){return a(r)?r:1}r.exports={formatColor:function(r,n,i){var a,o=r.color;o&&o._inputArray&&(o=o._inputArray);var u,d,v,g,y,m=c(o),x=c(n),b=l.extractOpts(r),_=[];if(u=void 0!==b.colorscale?l.makeColorScaleFuncFromTrace(r):h,d=m?function(r,n){return void 0===r[n]?f:s(u(r[n]))}:h,v=x?function(r,n){return void 0===r[n]?1:p(r[n])}:p,m||x)for(var w=0;w<i;w++)g=d(o,w),y=v(n,w),_[w]=(g[3]*=y,g);else a=s(o),a[3]*=n,_=a;return _},parseColorScale:function(r){var n=l.extractOpts(r),i=n.colorscale;return n.reversescale&&(i=l.flipScale(n.colorscale)),i.map(function(r){var n=r[0],i=o(r[1]).toRgb();return{index:n,rgb:[i.r,i.g,i.b,i.a]}})}}},28984:function(r,n,i){"use strict";var a=i(23389);function o(r){return[r]}r.exports={keyFun:function(r){return r.key},repeat:o,descend:a,wrap:o,unwrap:function(r){return r[0]}}},23389:function(r){"use strict";r.exports=function(r){return r}},39240:function(r){"use strict";r.exports=function(r,n){if(!n)return r;var i=1/Math.abs(n),a=i>1?(i*r+i*n)/i:r+n,o=String(a).length;if(o>16){var s=String(n).length;if(o>=String(r).length+s){var l=parseFloat(a).toPrecision(12);-1===l.indexOf("e+")&&(a=+l)}}return a}},71828:function(r,n,i){"use strict";var a=i(39898),o=i(84096).g0,s=i(60721).WU,l=i(92770),u=i(50606),c=u.FP_SAFE,f=-c,h=u.BADNUM,p=r.exports={};p.adjustFormat=function(r){return!r||/^\d[.]\df/.test(r)||/[.]\d%/.test(r)?r:"0.f"===r?"~f":/^\d%/.test(r)?"~%":/^\ds/.test(r)?"~s":!/^[~,.0$]/.test(r)&&/[&fps]/.test(r)?"~"+r:r};var d={};p.warnBadFormat=function(r){var n=String(r);d[n]||(d[n]=1,p.warn('encountered bad format: "'+n+'"'))},p.noFormat=function(r){return String(r)},p.numberFormat=function(r){var n;try{n=s(p.adjustFormat(r))}catch(n){return p.warnBadFormat(r),p.noFormat}return n},p.nestedProperty=i(65487),p.keyedContainer=i(66636),p.relativeAttr=i(6962),p.isPlainObject=i(41965),p.toLogRange=i(58163),p.relinkPrivateKeys=i(51332);var v=i(73627);p.isArrayBuffer=v.isArrayBuffer,p.isTypedArray=v.isTypedArray,p.isArrayOrTypedArray=v.isArrayOrTypedArray,p.isArray1D=v.isArray1D,p.ensureArray=v.ensureArray,p.concat=v.concat,p.maxRowLength=v.maxRowLength,p.minRowLength=v.minRowLength;var g=i(64872);p.mod=g.mod,p.modHalf=g.modHalf;var y=i(96554);p.valObjectMeta=y.valObjectMeta,p.coerce=y.coerce,p.coerce2=y.coerce2,p.coerceFont=y.coerceFont,p.coercePattern=y.coercePattern,p.coerceHoverinfo=y.coerceHoverinfo,p.coerceSelectionMarkerOpacity=y.coerceSelectionMarkerOpacity,p.validate=y.validate;var m=i(41631);p.dateTime2ms=m.dateTime2ms,p.isDateTime=m.isDateTime,p.ms2DateTime=m.ms2DateTime,p.ms2DateTimeLocal=m.ms2DateTimeLocal,p.cleanDate=m.cleanDate,p.isJSDate=m.isJSDate,p.formatDate=m.formatDate,p.incrementMonth=m.incrementMonth,p.dateTick0=m.dateTick0,p.dfltRange=m.dfltRange,p.findExactDates=m.findExactDates,p.MIN_MS=m.MIN_MS,p.MAX_MS=m.MAX_MS;var x=i(65888);p.findBin=x.findBin,p.sorterAsc=x.sorterAsc,p.sorterDes=x.sorterDes,p.distinctVals=x.distinctVals,p.roundUp=x.roundUp,p.sort=x.sort,p.findIndexOfMin=x.findIndexOfMin,p.sortObjectKeys=i(78607);var b=i(80038);p.aggNums=b.aggNums,p.len=b.len,p.mean=b.mean,p.median=b.median,p.midRange=b.midRange,p.variance=b.variance,p.stdev=b.stdev,p.interp=b.interp;var _=i(35657);p.init2dArray=_.init2dArray,p.transposeRagged=_.transposeRagged,p.dot=_.dot,p.translationMatrix=_.translationMatrix,p.rotationMatrix=_.rotationMatrix,p.rotationXYMatrix=_.rotationXYMatrix,p.apply3DTransform=_.apply3DTransform,p.apply2DTransform=_.apply2DTransform,p.apply2DTransform2=_.apply2DTransform2,p.convertCssMatrix=_.convertCssMatrix,p.inverseTransformMatrix=_.inverseTransformMatrix;var w=i(26348);p.deg2rad=w.deg2rad,p.rad2deg=w.rad2deg,p.angleDelta=w.angleDelta,p.angleDist=w.angleDist,p.isFullCircle=w.isFullCircle,p.isAngleInsideSector=w.isAngleInsideSector,p.isPtInsideSector=w.isPtInsideSector,p.pathArc=w.pathArc,p.pathSector=w.pathSector,p.pathAnnulus=w.pathAnnulus;var T=i(99863);p.isLeftAnchor=T.isLeftAnchor,p.isCenterAnchor=T.isCenterAnchor,p.isRightAnchor=T.isRightAnchor,p.isTopAnchor=T.isTopAnchor,p.isMiddleAnchor=T.isMiddleAnchor,p.isBottomAnchor=T.isBottomAnchor;var k=i(87642);p.segmentsIntersect=k.segmentsIntersect,p.segmentDistance=k.segmentDistance,p.getTextLocation=k.getTextLocation,p.clearLocationCache=k.clearLocationCache,p.getVisibleSegment=k.getVisibleSegment,p.findPointOnPath=k.findPointOnPath;var A=i(1426);p.extendFlat=A.extendFlat,p.extendDeep=A.extendDeep,p.extendDeepAll=A.extendDeepAll,p.extendDeepNoArrays=A.extendDeepNoArrays;var M=i(47769);p.log=M.log,p.warn=M.warn,p.error=M.error;var S=i(30587);p.counterRegex=S.counter;var E=i(79990);p.throttle=E.throttle,p.throttleDone=E.done,p.clearThrottle=E.clear;var L=i(24401);function C(r){var n={};for(var i in r)for(var a=r[i],o=0;o<a.length;o++)n[a[o]]=+i;return n}p.getGraphDiv=L.getGraphDiv,p.isPlotDiv=L.isPlotDiv,p.removeElement=L.removeElement,p.addStyleRule=L.addStyleRule,p.addRelatedStyleRule=L.addRelatedStyleRule,p.deleteRelatedStyleRule=L.deleteRelatedStyleRule,p.getFullTransformMatrix=L.getFullTransformMatrix,p.getElementTransformMatrix=L.getElementTransformMatrix,p.getElementAndAncestors=L.getElementAndAncestors,p.equalDomRects=L.equalDomRects,p.clearResponsive=i(86367),p.preserveDrawingBuffer=i(45142),p.makeTraceGroups=i(77310),p._=i(15867),p.notifier=i(75046),p.filterUnique=i(75744),p.filterVisible=i(76756),p.pushUnique=i(75138),p.increment=i(39240),p.cleanNumber=i(95218),p.ensureNumber=function(r){return l(r)?(r=Number(r))>c||r<f?h:r:h},p.isIndex=function(r,n){return!(void 0!==n&&r>=n)&&l(r)&&r>=0&&r%1==0},p.noop=i(64213),p.identity=i(23389),p.repeat=function(r,n){for(var i=Array(n),a=0;a<n;a++)i[a]=r;return i},p.swapAttrs=function(r,n,i,a){i||(i="x"),a||(a="y");for(var o=0;o<n.length;o++){var s=n[o],l=p.nestedProperty(r,s.replace("?",i)),u=p.nestedProperty(r,s.replace("?",a)),c=l.get();l.set(u.get()),u.set(c)}},p.raiseToTop=function(r){r.parentNode.appendChild(r)},p.cancelTransition=function(r){return r.transition().duration(0)},p.constrain=function(r,n,i){return n>i?Math.max(i,Math.min(n,r)):Math.max(n,Math.min(i,r))},p.bBoxIntersect=function(r,n,i){return i=i||0,r.left<=n.right+i&&n.left<=r.right+i&&r.top<=n.bottom+i&&n.top<=r.bottom+i},p.simpleMap=function(r,n,i,a,o){for(var s=r.length,l=Array(s),u=0;u<s;u++)l[u]=n(r[u],i,a,o);return l},p.randstr=function r(n,i,a,o){if(a||(a=16),void 0===i&&(i=24),i<=0)return"0";var s,l=Math.log(Math.pow(2,i))/Math.log(a),u="";for(s=2;l===1/0;s*=2)l=Math.log(Math.pow(2,i/s))/Math.log(a)*s;var c=l-Math.floor(l);for(s=0;s<Math.floor(l);s++)u=Math.floor(Math.random()*a).toString(a)+u;c&&(u=Math.floor(Math.random()*Math.pow(a,c)).toString(a)+u);var f=parseInt(u,a);return n&&n[u]||f!==1/0&&f>=Math.pow(2,i)?o>10?(p.warn("randstr failed uniqueness"),u):r(n,i,a,(o||0)+1):u},p.OptionControl=function(r,n){r||(r={}),n||(n="opt");var i={optionList:[],_newoption:function(a){a[n]=r,i[a.name]=a,i.optionList.push(a)}};return i["_"+n]=r,i},p.smooth=function(r,n){if((n=Math.round(n)||0)<2)return r;var i,a,o,s,l=r.length,u=2*l,c=2*n-1,f=Array(c),h=Array(l);for(i=0;i<c;i++)f[i]=(1-Math.cos(Math.PI*(i+1)/n))/(2*n);for(i=0;i<l;i++){for(s=0,a=0;a<c;a++)(o=i+a+1-n)<-l?o-=u*Math.round(o/u):o>=u&&(o-=u*Math.floor(o/u)),o<0?o=-1-o:o>=l&&(o=u-1-o),s+=r[o]*f[a];h[i]=s}return h},p.syncOrAsync=function(r,n,i){var a;function o(){return p.syncOrAsync(r,n,i)}for(;r.length;)if((a=(0,r.splice(0,1)[0])(n))&&a.then)return a.then(o);return i&&i(n)},p.stripTrailingSlash=function(r){return"/"===r.substr(-1)?r.substr(0,r.length-1):r},p.noneOrAll=function(r,n,i){if(r){var a,o=!1,s=!0;for(a=0;a<i.length;a++)null!=r[i[a]]?o=!0:s=!1;if(o&&!s)for(a=0;a<i.length;a++)r[i[a]]=n[i[a]]}},p.mergeArray=function(r,n,i,a){var o="function"==typeof a;if(p.isArrayOrTypedArray(r))for(var s=Math.min(r.length,n.length),l=0;l<s;l++){var u=r[l];n[l][i]=o?a(u):u}},p.mergeArrayCastPositive=function(r,n,i){return p.mergeArray(r,n,i,function(r){var n=+r;return isFinite(n)&&n>0?n:0})},p.fillArray=function(r,n,i,a){if(a=a||p.identity,p.isArrayOrTypedArray(r))for(var o=0;o<n.length;o++)n[o][i]=a(r[o])},p.castOption=function(r,n,i,a){a=a||p.identity;var o=p.nestedProperty(r,i).get();return p.isArrayOrTypedArray(o)?a(Array.isArray(n)&&p.isArrayOrTypedArray(o[n[0]])?o[n[0]][n[1]]:o[n]):o},p.extractOption=function(r,n,i,a){if(i in r)return r[i];var o=p.nestedProperty(n,a).get();return Array.isArray(o)?void 0:o},p.tagSelected=function(r,n,i){var a,o=n.selectedpoints,s=n._indexToPoints;s&&(a=C(s));for(var l=0;l<o.length;l++){var u=o[l];if(p.isIndex(u)||p.isArrayOrTypedArray(u)&&p.isIndex(u[0])&&p.isIndex(u[1])){var c=a?a[u]:u,f=i?i[c]:c;void 0!==f&&f<r.length&&(r[f].selected=1)}}},p.selIndices2selPoints=function(r){var n=r.selectedpoints,i=r._indexToPoints;if(i){for(var a=C(i),o=[],s=0;s<n.length;s++){var l=n[s];if(p.isIndex(l)){var u=a[l];p.isIndex(u)&&o.push(u)}}return o}return n},p.getTargetArray=function(r,n){var i=n.target;if("string"==typeof i&&i){var a=p.nestedProperty(r,i).get();return!!p.isArrayOrTypedArray(a)&&a}return!!p.isArrayOrTypedArray(i)&&i},p.minExtend=function r(n,i,a){var o={};"object"!=typeof i&&(i={});var s,l,u,c="pieLike"===a?-1:3,f=Object.keys(n);for(s=0;s<f.length;s++)u=n[l=f[s]],"_"!==l.charAt(0)&&"function"!=typeof u&&("module"===l?o[l]=u:Array.isArray(u)?o[l]="colorscale"===l||-1===c?u.slice():u.slice(0,c):p.isTypedArray(u)?o[l]=-1===c?u.subarray():u.subarray(0,c):o[l]=u&&"object"==typeof u?r(n[l],i[l],a):u);for(f=Object.keys(i),s=0;s<f.length;s++)"object"==typeof(u=i[l=f[s]])&&l in o&&"object"==typeof o[l]||(o[l]=u);return o},p.titleCase=function(r){return r.charAt(0).toUpperCase()+r.substr(1)},p.containsAny=function(r,n){for(var i=0;i<n.length;i++)if(-1!==r.indexOf(n[i]))return!0;return!1},p.isIE=function(){return void 0!==window.navigator.msSaveBlob};var O=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return O.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;p.isIOS=function(){return P.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;p.getFirefoxVersion=function(){var r=I.exec(window.navigator.userAgent);if(r&&2===r.length){var n=parseInt(r[1]);if(!isNaN(n))return n}return null},p.isD3Selection=function(r){return r instanceof a.selection},p.ensureSingle=function(r,n,i,a){var o=r.select(n+(i?"."+i:""));if(o.size())return o;var s=r.append(n);return i&&s.classed(i,!0),a&&s.call(a),s},p.ensureSingleById=function(r,n,i,a){var o=r.select(n+"#"+i);if(o.size())return o;var s=r.append(n).attr("id",i);return a&&s.call(a),s},p.objectFromPath=function(r,n){for(var i,a=r.split("."),o=i={},s=0;s<a.length;s++){var l=a[s],u=null,c=a[s].match(/(.*)\[([0-9]+)\]/);c?(l=c[1],u=c[2],i=i[l]=[],s===a.length-1?i[u]=n:i[u]={},i=i[u]):(s===a.length-1?i[l]=n:i[l]={},i=i[l])}return o};var D=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function R(r){return"__"===r.slice(0,2)}p.expandObjectPaths=function(r){var n,i,a,o,s,l,u;if("object"==typeof r&&!Array.isArray(r)){for(i in r)if(r.hasOwnProperty(i)){if(n=i.match(D)){if(o=r[i],R(a=n[1]))continue;delete r[i],r[a]=p.extendDeepNoArrays(r[a]||{},p.objectFromPath(i,p.expandObjectPaths(o))[a])}else if(n=i.match(z)){if(o=r[i],R(a=n[1]))continue;if(s=parseInt(n[2]),delete r[i],r[a]=r[a]||[],"."===n[3])u=n[4],l=r[a][s]=r[a][s]||{},p.extendDeepNoArrays(l,p.objectFromPath(u,p.expandObjectPaths(o)));else{if(R(a))continue;r[a][s]=p.expandObjectPaths(o)}}else{if(R(i))continue;r[i]=p.expandObjectPaths(r[i])}}}return r},p.numSeparate=function(r,n,i){if(i||(i=!1),"string"!=typeof n||0===n.length)throw Error("Separator string required for formatting!");"number"==typeof r&&(r=String(r));var a=/(\d+)(\d{3})/,o=n.charAt(0),s=n.charAt(1),l=r.split("."),u=l[0],c=l.length>1?o+l[1]:"";if(s&&(l.length>1||u.length>4||i))for(;a.test(u);)u=u.replace(a,"$1"+s+"$2");return u+c},p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var F=/^\w*$/;p.templateString=function(r,n){var i={};return r.replace(p.TEMPLATE_STRING_REGEX,function(r,a){var o;return F.test(a)?o=n[a]:(i[a]=i[a]||p.nestedProperty(n,a).get,o=i[a]()),p.isValidTextValue(o)?o:""})};var B={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return H.apply(B,arguments)};var N={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return H.apply(N,arguments)};var j=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,U={max:10,count:0,name:"texttemplate",parseMultDiv:!0};p.texttemplateStringForShapes=function(){return H.apply(U,arguments)};var V=/^[:|\|]/;function H(r,n,i){var a=this,s=arguments;n||(n={});var l={};return r.replace(p.TEMPLATE_STRING_REGEX,function(r,u,c){var f,h="_xother"===u||"_yother"===u,d="_xother_"===u||"_yother_"===u,v="xother_"===u||"yother_"===u,g="xother"===u||"yother"===u||h||v||d,y=u;(h||d)&&(y=y.substring(1)),(v||d)&&(y=y.substring(0,y.length-1));var m,x,b,_=null,w=null;if(a.parseMultDiv){var T,k,A=(k=(T=y).match(j))?{key:k[1],op:k[2],number:Number(k[3])}:{key:T,op:null,number:null};y=A.key,_=A.op,w=A.number}if(g){if(void 0===(m=n[y]))return""}else for(b=3;b<s.length;b++)if(x=s[b]){if(x.hasOwnProperty(y)){m=x[y];break}if(F.test(y)||(m=p.nestedProperty(x,y).get(),(m=l[y]||p.nestedProperty(x,y).get())&&(l[y]=m)),void 0!==m)break}if(void 0!==m&&("*"===_&&(m*=w),"/"===_&&(m/=w)),void 0===m&&a)return a.count<a.max&&(p.warn("Variable '"+y+"' in "+a.name+" could not be found!"),m=r),a.count===a.max&&p.warn("Too many "+a.name+" warnings - additional warnings will be suppressed"),a.count++,r;if(c){if(":"===c[0]&&(m=(f=i?i.numberFormat:p.numberFormat)(c.replace(V,""))(m)),"|"===c[0]){f=i?i.timeFormat:o;var M=p.dateTime2ms(m);m=p.formatDate(M,c.replace(V,""),!1,f)}}else{var S=y+"Label";n.hasOwnProperty(S)&&(m=n[S])}return g&&(m="("+m+")",(h||d)&&(m=" "+m),(v||d)&&(m+=" ")),m})}p.subplotSort=function(r,n){for(var i=Math.min(r.length,n.length)+1,a=0,o=0,s=0;s<i;s++){var l=r.charCodeAt(s)||0,u=n.charCodeAt(s)||0,c=l>=48&&l<=57,f=u>=48&&u<=57;if(c&&(a=10*a+l-48),f&&(o=10*o+u-48),!c||!f){if(a!==o)return a-o;if(l!==u)return l-u}}return o-a};var q=2e9;p.seedPseudoRandom=function(){q=2e9},p.pseudoRandom=function(){var r=q;return 429496729>Math.abs((q=(69069*q+1)%4294967296)-r)?p.pseudoRandom():q/4294967296},p.fillText=function(r,n,i){var a=Array.isArray(i)?function(r){i.push(r)}:function(r){i.text=r},o=p.extractOption(r,n,"htx","hovertext");if(p.isValidTextValue(o))return a(o);var s=p.extractOption(r,n,"tx","text");return p.isValidTextValue(s)?a(s):void 0},p.isValidTextValue=function(r){return r||0===r},p.formatPercent=function(r,n){n=n||0;for(var i=(Math.round(100*r*Math.pow(10,n))*Math.pow(.1,n)).toFixed(n)+"%",a=0;a<n;a++)-1!==i.indexOf(".")&&(i=(i=i.replace("0%","%")).replace(".%","%"));return i},p.isHidden=function(r){var n=window.getComputedStyle(r).display;return!n||"none"===n},p.strTranslate=function(r,n){return r||n?"translate("+r+","+n+")":""},p.strRotate=function(r){return r?"rotate("+r+")":""},p.strScale=function(r){return 1!==r?"scale("+r+")":""},p.getTextTransform=function(r){var n=r.noCenter,i=r.textX,a=r.textY,o=r.targetX,s=r.targetY,l=r.anchorX||0,u=r.anchorY||0,c=r.rotate,f=r.scale;return f?f>1&&(f=1):f=0,p.strTranslate(o-f*(i+l),s-f*(a+u))+p.strScale(f)+(c?"rotate("+c+(n?"":" "+i+" "+a)+")":"")},p.setTransormAndDisplay=function(r,n){r.attr("transform",p.getTextTransform(n)),r.style("display",n.scale?null:"none")},p.ensureUniformFontSize=function(r,n){var i=p.extendFlat({},n);return i.size=Math.max(n.size,r._fullLayout.uniformtext.minsize||0),i},p.join2=function(r,n,i){var a=r.length;return a>1?r.slice(0,-1).join(n)+i+r[a-1]:r.join(n)},p.bigFont=function(r){return Math.round(1.2*r)};var G=p.getFirefoxVersion(),Z=null!==G&&G<86;p.getPositionFromD3Event=function(){return Z?[a.event.layerX,a.event.layerY]:[a.event.offsetX,a.event.offsetY]}},41965:function(r){"use strict";r.exports=function(r){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(r):"[object Object]"===Object.prototype.toString.call(r)&&Object.getPrototypeOf(r).hasOwnProperty("hasOwnProperty")}},66636:function(r,n,i){"use strict";var a=i(65487),o=/^\w*$/;r.exports=function(r,n,i,s){i=i||"name",s=s||"value";var l,u,c,f={};u=n&&n.length?(c=a(r,n)).get():r,n=n||"";var h={};if(u)for(l=0;l<u.length;l++)h[u[l][i]]=l;var p=o.test(s),d={set:function(r,n){var o=null===n?4:0;if(!u){if(!c||4===o)return;u=[],c.set(u)}var l=h[r];if(void 0===l){if(4===o)return;o|=3,l=u.length,h[r]=l}else n!==(p?u[l][s]:a(u[l],s).get())&&(o|=2);var v=u[l]=u[l]||{};return v[i]=r,p?v[s]=n:a(v,s).set(n),null!==n&&(o&=-5),f[l]=f[l]|o,d},get:function(r){if(u){var n=h[r];return void 0===n?void 0:p?u[n][s]:a(u[n],s).get()}},rename:function(r,n){var a=h[r];return void 0===a||(f[a]=1|f[a],h[n]=a,delete h[r],u[a][i]=n),d},remove:function(r){var n=h[r];if(void 0===n)return d;var o=u[n];if(Object.keys(o).length>2)return f[n]=2|f[n],d.set(r,null);if(p){for(l=n;l<u.length;l++)f[l]=3|f[l];for(l=n;l<u.length;l++)h[u[l][i]]--;u.splice(n,1),delete h[r]}else a(o,s).set(null),f[n]=6|f[n];return d},constructUpdate:function(){for(var r,o,l={},c=Object.keys(f),h=0;h<c.length;h++)o=c[h],r=n+"["+o+"]",u[o]?(1&f[o]&&(l[r+"."+i]=u[o][i]),2&f[o]&&(l[r+"."+s]=p?4&f[o]?null:u[o][s]:4&f[o]?null:a(u[o],s).get())):l[r]=null;return l}};return d}},15867:function(r,n,i){"use strict";var a=i(73972);r.exports=function(r,n){for(var i=r._context.locale,o=0;o<2;o++){for(var s=r._context.locales,l=0;l<2;l++){var u=(s[i]||{}).dictionary;if(u){var c=u[n];if(c)return c}s=a.localeRegistry}var f=i.split("-")[0];if(f===i)break;i=f}return n}},47769:function(r,n,i){"use strict";var a=i(72075).dfltConfig,o=i(75046),s=r.exports={};s.log=function(){var r;if(a.logging>1){var n=["LOG:"];for(r=0;r<arguments.length;r++)n.push(arguments[r]);console.trace.apply(console,n)}if(a.notifyOnLogging>1){var i=[];for(r=0;r<arguments.length;r++)i.push(arguments[r]);o(i.join("<br>"),"long")}},s.warn=function(){var r;if(a.logging>0){var n=["WARN:"];for(r=0;r<arguments.length;r++)n.push(arguments[r]);console.trace.apply(console,n)}if(a.notifyOnLogging>0){var i=[];for(r=0;r<arguments.length;r++)i.push(arguments[r]);o(i.join("<br>"),"stick")}},s.error=function(){var r;if(a.logging>0){var n=["ERROR:"];for(r=0;r<arguments.length;r++)n.push(arguments[r]);console.error.apply(console,n)}if(a.notifyOnLogging>0){var i=[];for(r=0;r<arguments.length;r++)i.push(arguments[r]);o(i.join("<br>"),"stick")}}},77310:function(r,n,i){"use strict";var a=i(39898);r.exports=function(r,n,i){var o=r.selectAll("g."+i.replace(/\s/g,".")).data(n,function(r){return r[0].trace.uid});o.exit().remove(),o.enter().append("g").attr("class",i),o.order();var s=r.classed("rangeplot")?"nodeRangePlot3":"node3";return o.each(function(r){r[0][s]=a.select(this)}),o}},35657:function(r,n,i){"use strict";var a=i(79576);n.init2dArray=function(r,n){for(var i=Array(r),a=0;a<r;a++)i[a]=Array(n);return i},n.transposeRagged=function(r){var n,i,a=0,o=r.length;for(n=0;n<o;n++)a=Math.max(a,r[n].length);var s=Array(a);for(n=0;n<a;n++)for(s[n]=Array(o),i=0;i<o;i++)s[n][i]=r[i][n];return s},n.dot=function(r,i){if(!r.length||!i.length||r.length!==i.length)return null;var a,o,s=r.length;if(r[0].length)for(a=Array(s),o=0;o<s;o++)a[o]=n.dot(r[o],i);else if(i[0].length){var l=n.transposeRagged(i);for(a=Array(l.length),o=0;o<l.length;o++)a[o]=n.dot(r,l[o])}else for(a=0,o=0;o<s;o++)a+=r[o]*i[o];return a},n.translationMatrix=function(r,n){return[[1,0,r],[0,1,n],[0,0,1]]},n.rotationMatrix=function(r){var n=r*Math.PI/180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]},n.rotationXYMatrix=function(r,i,a){return n.dot(n.dot(n.translationMatrix(i,a),n.rotationMatrix(r)),n.translationMatrix(-i,-a))},n.apply3DTransform=function(r){return function(){var i=arguments,a=1==arguments.length?i[0]:[i[0],i[1],i[2]||0];return n.dot(r,[a[0],a[1],a[2],1]).slice(0,3)}},n.apply2DTransform=function(r){return function(){var i=arguments;3===i.length&&(i=i[0]);var a=1==arguments.length?i[0]:[i[0],i[1]];return n.dot(r,[a[0],a[1],1]).slice(0,2)}},n.apply2DTransform2=function(r){var i=n.apply2DTransform(r);return function(r){return i(r.slice(0,2)).concat(i(r.slice(2,4)))}},n.convertCssMatrix=function(r){if(r){var n=r.length;if(16===n)return r;if(6===n)return[r[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},n.inverseTransformMatrix=function(r){var n=[];return a.invert(n,r),[[n[0],n[1],n[2],n[3]],[n[4],n[5],n[6],n[7]],[n[8],n[9],n[10],n[11]],[n[12],n[13],n[14],n[15]]]}},64872:function(r){"use strict";r.exports={mod:function(r,n){var i=r%n;return i<0?i+n:i},modHalf:function(r,n){return Math.abs(r)>n/2?r-Math.round(r/n)*n:r}}},65487:function(r,n,i){"use strict";var a=i(92770),o=i(73627).isArrayOrTypedArray;r.exports=function(r,n){if(a(n))n=String(n);else if("string"!=typeof n||"[-1]"===n.substr(n.length-4))throw"bad property string";var i,s,c,f,h=n.split(".");for(f=0;f<h.length;f++)if("__"===String(h[f]).slice(0,2))throw"bad property string";for(f=0;f<h.length;){if(i=String(h[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])h[f]=i[1];else{if(0!==f)throw"bad property string";h.splice(0,1)}for(s=i[2].substr(1,i[2].length-2).split("]["),c=0;c<s.length;c++)f++,h.splice(f,0,Number(s[c]))}f++}return"object"!=typeof r?{set:function(){throw"bad container"},get:function(){},astr:n,parts:h,obj:r}:{set:function r(n,i,s){return function(c){var f,h,p=n,d="",v=[[n,d]],g=l(c,s);for(h=0;h<i.length-1;h++){if("number"==typeof(f=i[h])&&!o(p))throw"array index but container is not an array";if(-1===f){if(g=!function(n,i,a,s){var c,f=o(a),h=!0,p=a,d=s.replace("-1",0),v=!f&&l(a,d),g=i[0];for(c=0;c<n.length;c++)d=s.replace("-1",c),f&&(v=l(p=a[c%a.length],d)),v&&(h=!1),u(n,c,g,v)&&r(n[c],i,s.replace("-1",c))(p);return h}(p,i.slice(h+1),c,s))break;return}if(!u(p,f,i[h+1],g))break;if("object"!=typeof(p=p[f])||null===p)throw"container is not an object";d=function(r,n){var i=n;return a(n)?i="["+n+"]":r&&(i="."+n),r+i}(d,f),v.push([p,d])}if(g){if(h===i.length-1&&(delete p[i[h]],Array.isArray(p)&&+i[h]==p.length-1))for(;p.length&&void 0===p[p.length-1];)p.pop()}else p[i[h]]=c}}(r,h,n),get:function r(n,i){return function(){var a,s,l,u,c,f=n;for(u=0;u<i.length-1;u++){if(-1===(a=i[u])){for(s=!0,l=[],c=0;c<f.length;c++)l[c]=r(f[c],i.slice(u+1))(),l[c]!==l[0]&&(s=!1);return s?l[0]:l}if("number"==typeof a&&!o(f)||"object"!=typeof(f=f[a])||null===f)return}if("object"==typeof f&&null!==f&&null!==(l=f[i[u]]))return l}}(r,h),astr:n,parts:h,obj:r}};var s=/(^|\.)args\[/;function l(r,n){return void 0===r||null===r&&!n.match(s)}function u(r,n,i,a){if(void 0===r[n]){if(a)return!1;r[n]="number"==typeof i?[]:{}}return!0}},64213:function(r){"use strict";r.exports=function(){}},75046:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=[];r.exports=function(r,n){if(-1===s.indexOf(r)){s.push(r);var i=1e3;o(n)?i=n:"long"===n&&(i=3e3);var l=a.select("body").selectAll(".plotly-notifier").data([0]);l.enter().append("div").classed("plotly-notifier",!0),l.selectAll(".notifier-note").data(s).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var o=a.select(this);o.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){o.transition().call(u)});for(var s=o.append("p"),l=r.split(/<br\s*\/?>/g),c=0;c<l.length;c++)c&&s.append("br"),s.append("span").text(l[c]);"stick"===n?o.transition().duration(350).style("opacity",1):o.transition().duration(700).style("opacity",1).transition().delay(i).call(u)})}function u(r){r.duration(700).style("opacity",0).each("end",function(r){var n=s.indexOf(r);-1!==n&&s.splice(n,1),a.select(this).remove()})}}},39918:function(r,n,i){"use strict";var a=i(6964),o="data-savedcursor";r.exports=function(r,n){var i=r.attr(o);if(n){if(!i){for(var s=(r.attr("class")||"").split(" "),l=0;l<s.length;l++){var u=s[l];0===u.indexOf("cursor-")&&r.attr(o,u.substr(7)).classed(u,!1)}r.attr(o)||r.attr(o,"!!")}a(r,n)}else i&&(r.attr(o,null),"!!"===i?a(r):a(r,i))}},61082:function(r,n,i){"use strict";var a=i(35657).dot,o=i(50606).BADNUM,s=r.exports={};s.tester=function(r){var n,i=r.slice(),a=i[0][0],s=a,l=i[0][1],u=l;for(i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),n=1;n<i.length;n++)a=Math.min(a,i[n][0]),s=Math.max(s,i[n][0]),l=Math.min(l,i[n][1]),u=Math.max(u,i[n][1]);var c,f=!1;5===i.length&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(f=!0,c=function(r){return r[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(f=!0,c=function(r){return r[1]===i[0][1]}));var h=!0,p=i[0];for(n=1;n<i.length;n++)if(p[0]!==i[n][0]||p[1]!==i[n][1]){h=!1;break}return{xmin:a,xmax:s,ymin:l,ymax:u,pts:i,contains:f?function(r,n){var i=r[0],f=r[1];return!(i===o||i<a||i>s||f===o||f<l||f>u||n&&c(r))}:function(r,n){var c=r[0],f=r[1];if(c===o||c<a||c>s||f===o||f<l||f>u)return!1;var h,p,d,v,g,y=i.length,m=i[0][0],x=i[0][1],b=0;for(h=1;h<y;h++)if(p=m,d=x,m=i[h][0],x=i[h][1],!(c<(v=Math.min(p,m))||c>Math.max(p,m)||f>Math.max(d,x))){if(f<Math.min(d,x))c!==v&&b++;else{if(f===(g=m===p?f:d+(c-p)*(x-d)/(m-p)))return 1!==h||!n;f<=g&&c!==v&&b++}}return b%2==1},isRect:f,degenerate:h}},s.isSegmentBent=function(r,n,i,o){var s,l,u,c=r[n],f=[r[i][0]-c[0],r[i][1]-c[1]],h=a(f,f),p=Math.sqrt(h),d=[-f[1]/p,f[0]/p];for(s=n+1;s<i;s++)if((u=a(l=[r[s][0]-c[0],r[s][1]-c[1]],f))<0||u>h||Math.abs(a(l,d))>o)return!0;return!1},s.filter=function(r,n){var i=[r[0]],a=0,o=0;function l(l){r.push(l);var u=i.length,c=a;i.splice(o+1);for(var f=c+1;f<r.length;f++)(f===r.length-1||s.isSegmentBent(r,c,f+1,n))&&(i.push(r[f]),i.length<u-2&&(a=f,o=i.length-1),c=f)}return r.length>1&&l(r.pop()),{addPt:l,raw:r,filtered:i}}},79749:function(r,n,i){"use strict";var a=i(58617),o=i(98580);r.exports=function(r,n,s){var l=r._fullLayout,u=!0;return l._glcanvas.each(function(a){if(a.regl)a.regl.preloadCachedCode(s);else if(!a.pick||l._has("parcoords")){try{a.regl=o({canvas:this,attributes:{antialias:!a.pick,preserveDrawingBuffer:!0},pixelRatio:r._context.plotGlPixelRatio||i.g.devicePixelRatio,extensions:n||[],cachedCode:s||{}})}catch(r){u=!1}a.regl||(u=!1),u&&this.addEventListener("webglcontextlost",function(n){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:n,layer:a.key})},!1)}}),u||a({container:l._glcontainer.node()}),u}},45142:function(r,n,i){"use strict";var a=i(92770),o=i(35791);r.exports=function(r){if("string"!=typeof(i=r&&r.hasOwnProperty("userAgent")?r.userAgent:("undefined"!=typeof navigator&&(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),n)))return!0;var n,i,s=o({ua:{headers:{"user-agent":i}},tablet:!0,featureDetect:!1});if(!s){for(var l=i.split(" "),u=1;u<l.length;u++)if(-1!==l[u].indexOf("Safari"))for(var c=u-1;c>-1;c--){var f=l[c];if("Version/"===f.substr(0,8)){var h=f.substr(8).split(".")[0];if(a(h)&&(h=+h),h>=13)return!0}}}return s}},75138:function(r){"use strict";r.exports=function(r,n){if(n instanceof RegExp){for(var i=n.toString(),a=0;a<r.length;a++)if(r[a]instanceof RegExp&&r[a].toString()===i)return r;r.push(n)}else(n||0===n)&&-1===r.indexOf(n)&&r.push(n);return r}},10847:function(r,n,i){"use strict";var a=i(71828),o=i(72075).dfltConfig,s={add:function(r,n,i,a,s){var l,u;r.undoQueue=r.undoQueue||{index:0,queue:[],sequence:!1},u=r.undoQueue.index,r.autoplay?r.undoQueue.inSequence||(r.autoplay=!1):(!r.undoQueue.sequence||r.undoQueue.beginSequence?(l={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},r.undoQueue.queue.splice(u,r.undoQueue.queue.length-u,l),r.undoQueue.index+=1):l=r.undoQueue.queue[u-1],r.undoQueue.beginSequence=!1,l&&(l.undo.calls.unshift(n),l.undo.args.unshift(i),l.redo.calls.push(a),l.redo.args.push(s)),r.undoQueue.queue.length>o.queueLength&&(r.undoQueue.queue.shift(),r.undoQueue.index--))},startSequence:function(r){r.undoQueue=r.undoQueue||{index:0,queue:[],sequence:!1},r.undoQueue.sequence=!0,r.undoQueue.beginSequence=!0},stopSequence:function(r){r.undoQueue=r.undoQueue||{index:0,queue:[],sequence:!1},r.undoQueue.sequence=!1,r.undoQueue.beginSequence=!1},undo:function(r){var n,i;if(!(void 0===r.undoQueue||isNaN(r.undoQueue.index)||r.undoQueue.index<=0)){for(r.undoQueue.index--,n=r.undoQueue.queue[r.undoQueue.index],r.undoQueue.inSequence=!0,i=0;i<n.undo.calls.length;i++)s.plotDo(r,n.undo.calls[i],n.undo.args[i]);r.undoQueue.inSequence=!1,r.autoplay=!1}},redo:function(r){var n,i;if(!(void 0===r.undoQueue||isNaN(r.undoQueue.index)||r.undoQueue.index>=r.undoQueue.queue.length)){for(n=r.undoQueue.queue[r.undoQueue.index],r.undoQueue.inSequence=!0,i=0;i<n.redo.calls.length;i++)s.plotDo(r,n.redo.calls[i],n.redo.args[i]);r.undoQueue.inSequence=!1,r.autoplay=!1,r.undoQueue.index++}},plotDo:function(r,n,i){r.autoplay=!0,i=function(r,n){for(var i,o=[],s=0;s<n.length;s++)i=n[s],o[s]=i===r?i:"object"==typeof i?Array.isArray(i)?a.extendDeep([],i):a.extendDeepAll({},i):i;return o}(r,i),n.apply(null,i)}};r.exports=s},30587:function(r,n){"use strict";n.counter=function(r,n,i,a){var o=(n||"")+(i?"":"$"),s=!1===a?"":"^";return"xy"===r?RegExp(s+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+o):RegExp(s+r+"([2-9]|[1-9][0-9]+)?"+o)}},6962:function(r){"use strict";var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;r.exports=function(r,a){for(;a;){var o=r.match(n);if(o)r=o[1];else{if(!r.match(i))throw Error("bad relativeAttr call:"+[r,a]);r=""}if("^"!==a.charAt(0))break;a=a.slice(1)}return r&&"["!==a.charAt(0)?r+"."+a:r+a}},51332:function(r,n,i){"use strict";var a=i(73627).isArrayOrTypedArray,o=i(41965);r.exports=function r(n,i){for(var s in i){var l=i[s],u=n[s];if(u!==l){if("_"===s.charAt(0)||"function"==typeof l){if(s in n)continue;n[s]=l}else if(a(l)&&a(u)&&o(l[0])){if("customdata"===s||"ids"===s)continue;for(var c=Math.min(l.length,u.length),f=0;f<c;f++)u[f]!==l[f]&&o(l[f])&&o(u[f])&&r(u[f],l[f])}else o(l)&&o(u)&&(r(u,l),Object.keys(u).length||delete n[s])}}}},65888:function(r,n,i){"use strict";var a=i(92770),o=i(47769),s=i(23389),l=i(50606).BADNUM;function u(r,n){return r<n}function c(r,n){return r<=n}function f(r,n){return r>n}function h(r,n){return r>=n}n.findBin=function(r,n,i){if(a(n.start))return i?Math.ceil((r-n.start)/n.size-1e-9)-1:Math.floor((r-n.start)/n.size+1e-9);var s,l,p=0,d=n.length,v=0,g=d>1?(n[d-1]-n[0])/(d-1):1;for(l=g>=0?i?u:c:i?h:f,r+=1e-9*g*(i?-1:1)*(g>=0?1:-1);p<d&&v++<100;)l(n[s=Math.floor((p+d)/2)],r)?p=s+1:d=s;return v>90&&o.log("Long binary search..."),p-1},n.sorterAsc=function(r,n){return r-n},n.sorterDes=function(r,n){return n-r},n.distinctVals=function(r){var i,a=r.slice();for(a.sort(n.sorterAsc),i=a.length-1;i>-1&&a[i]===l;i--);for(var o,s=a[i]-a[0]||1,u=s/(i||1)/1e4,c=[],f=0;f<=i;f++){var h=a[f],p=h-o;void 0===o?(c.push(h),o=h):p>u&&(s=Math.min(s,p),c.push(h),o=h)}return{vals:c,minDiff:s}},n.roundUp=function(r,n,i){for(var a,o=0,s=n.length-1,l=0,u=i?0:1,c=i?1:0,f=i?Math.ceil:Math.floor;o<s&&l++<100;)n[a=f((o+s)/2)]<=r?o=a+u:s=a-c;return n[o]},n.sort=function(r,n){for(var i=0,a=0,o=1;o<r.length;o++){var s=n(r[o],r[o-1]);if(s<0?i=1:s>0&&(a=1),i&&a)return r.sort(n)}return a?r:r.reverse()},n.findIndexOfMin=function(r,n){n=n||s;for(var i,a=1/0,o=0;o<r.length;o++){var l=n(r[o]);l<a&&(a=l,i=o)}return i}},6964:function(r){"use strict";r.exports=function(r,n){(r.attr("class")||"").split(" ").forEach(function(n){0===n.indexOf("cursor-")&&r.classed(n,!1)}),n&&r.classed("cursor-"+n,!0)}},58617:function(r,n,i){"use strict";var a=i(7901),o=function(){};r.exports=function(r){for(var n in r)"function"==typeof r[n]&&(r[n]=o);r.destroy=function(){r.container.parentNode.removeChild(r.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=a.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=a.lightLine,i.style["z-index"]=30;var s=document.createElement("p");return s.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",s.style.position="relative",s.style.top="50%",s.style.left="50%",s.style.height="30%",s.style.width="50%",s.style.margin="-15% 0 0 -25%",i.appendChild(s),r.container.appendChild(i),r.container.style.background="#FFFFFF",r.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(r){"use strict";r.exports=function(r){return Object.keys(r).sort()}},80038:function(r,n,i){"use strict";var a=i(92770),o=i(73627).isArrayOrTypedArray;n.aggNums=function(r,i,s,l){var u,c;if((!l||l>s.length)&&(l=s.length),a(i)||(i=!1),o(s[0])){for(c=Array(l),u=0;u<l;u++)c[u]=n.aggNums(r,i,s[u]);s=c}for(u=0;u<l;u++)a(i)?a(s[u])&&(i=r(+i,+s[u])):i=s[u];return i},n.len=function(r){return n.aggNums(function(r){return r+1},0,r)},n.mean=function(r,i){return i||(i=n.len(r)),n.aggNums(function(r,n){return r+n},0,r)/i},n.midRange=function(r){if(void 0!==r&&0!==r.length)return(n.aggNums(Math.max,null,r)+n.aggNums(Math.min,null,r))/2},n.variance=function(r,i,o){return i||(i=n.len(r)),a(o)||(o=n.mean(r,i)),n.aggNums(function(r,n){return r+Math.pow(n-o,2)},0,r)/i},n.stdev=function(r,i,a){return Math.sqrt(n.variance(r,i,a))},n.median=function(r){var i=r.slice().sort();return n.interp(i,.5)},n.interp=function(r,n){if(!a(n))throw"n should be a finite number";if((n=n*r.length-.5)<0)return r[0];if(n>r.length-1)return r[r.length-1];var i=n%1;return i*r[Math.ceil(n)]+(1-i)*r[Math.floor(n)]}},78614:function(r,n,i){"use strict";var a=i(25075);r.exports=function(r){return r?a(r):[0,0,0,1]}},3883:function(r,n,i){"use strict";var a=i(32396),o=i(91424),s=i(71828),l=null;r.exports=function(){if(null!==l)return l;l=!1;var r=s.isIE()||s.isSafari()||s.isIOS();if(window.navigator.userAgent&&!r){var n=Array.from(a.CSS_DECLARATIONS).reverse(),i=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof i)l=n.some(function(r){return i.apply(null,r)});else{var u=o.tester.append("image").attr("style",a.STYLE),c=window.getComputedStyle(u.node()).imageRendering;l=n.some(function(r){var n=r[1];return c===n||c===n.toLowerCase()}),u.remove()}}return l}},63893:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=o.strTranslate,l=i(77922),u=i(18783).LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;n.convertToTspans=function(r,i,m){var L=r.text(),C=!r.attr("data-notex")&&i&&i._context.typesetMath&&"undefined"!=typeof MathJax&&L.match(c),I=a.select(r.node().parentNode);if(!I.empty()){var D=r.attr("class")?r.attr("class").split(" ")[0]:"text";return D+="-math",I.selectAll("svg."+D).remove(),I.selectAll("g."+D+"-group").remove(),r.style("display",null).attr({"data-unformatted":L,"data-math":"N"}),C?(i&&i._promises||[]).push(new Promise(function(n){r.style("display","none");var i=parseInt(r.node().style.fontSize,10);!function(r,n,i){var s,l,u,c,d=parseInt((MathJax.version||"").split(".")[0]);if(2===d||3===d){var v=function(){var i="math-output-"+o.randstr({},64),s=(c=a.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute","font-size":n.fontSize+"px"}).text(r.replace(f,"\\lt ").replace(h,"\\gt "))).node();return 2===d?MathJax.Hub.Typeset(s):MathJax.typeset([s])},g=function(){var n=c.select(2===d?".MathJax_SVG":".MathJax"),s=!n.empty()&&c.select("svg").node();if(s){var l,u=s.getBoundingClientRect();l=2===d?a.select("body").select("#MathJax_SVG_glyphs"):n.select("defs"),i(n,l,u)}else o.log("There was an error in the tex syntax.",r),i();c.remove()};2===d?MathJax.Hub.Queue(function(){return l=o.extendDeepAll({},MathJax.Hub.config),u=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:p},displayAlign:"left"})},function(){if("SVG"!==(s=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},v,g,function(){if("SVG"!==s)return MathJax.Hub.setRenderer(s)},function(){return void 0!==u&&(MathJax.Hub.processSectionDelay=u),MathJax.Hub.Config(l)}):3===d&&(l=o.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=p,"svg"!==(s=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){v(),g(),"svg"!==s&&(MathJax.config.startup.output=s),MathJax.config=l}))}else o.warn("No MathJax version:",MathJax.version)}(C[2],{fontSize:i},function(a,o,l){I.selectAll("svg."+D).remove(),I.selectAll("g."+D+"-group").remove();var u=a&&a.select("svg");if(!u||!u.node())return z(),void n();var c=I.append("g").classed(D+"-group",!0).attr({"pointer-events":"none","data-unformatted":L,"data-math":"Y"});c.node().appendChild(u.node()),o&&o.node()&&u.node().insertBefore(o.node().cloneNode(!0),u.node().firstChild);var f=l.width,h=l.height;u.attr({class:D,height:h,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var p=r.node().style.fill||"black",d=u.select("g");d.attr({fill:p,stroke:p});var v=d.node().getBoundingClientRect(),g=v.width,y=v.height;(g>f||y>h)&&(u.style("overflow","hidden"),g=(v=u.node().getBoundingClientRect()).width,y=v.height);var x=+r.attr("x"),b=+r.attr("y"),_=-(i||r.node().getBoundingClientRect().height)/4;if("y"===D[0])c.attr({transform:"rotate("+[-90,x,b]+")"+s(-g/2,_-y/2)});else if("l"===D[0])b=_-y/2;else if("a"===D[0]&&0!==D.indexOf("atitle"))x=0,b=_;else{var w=r.attr("text-anchor");x-=g*("middle"===w?.5:"end"===w?1:0),b=b+_-y/2}u.attr({x:x,y:b}),m&&m.call(r,c),n(c)})})):z(),r}function z(){I.empty()||(D=r.attr("class")+"-math",I.select("svg."+D).remove()),r.text("").style("white-space","pre"),function(r,n){n=n.replace(x," ");var i,s=!1,c=[],f=-1;function h(){f++;var n=document.createElementNS(l.svg,"tspan");a.select(n).attr({class:"line",dy:f*u+"em"}),r.appendChild(n),i=n;var o=c;if(c=[{node:n}],o.length>1)for(var s=1;s<o.length;s++)p(o[s])}function p(r){var n,o=r.type,s={};if("a"===o){n="a";var u=r.target,f=r.href,h=r.popup;f&&(s={"xlink:xlink:show":"_blank"===u||"_"!==u.charAt(0)?"new":"replace",target:u,"xlink:xlink:href":f},h&&(s.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+h+'");return false;'))}else n="tspan";r.style&&(s.style=r.style);var p=document.createElementNS(l.svg,n);if("sup"===o||"sub"===o){m(i,y),i.appendChild(p);var d=document.createElementNS(l.svg,"tspan");m(d,y),a.select(d).attr("dy",g[o]),s.dy=v[o],i.appendChild(p),i.appendChild(d)}else i.appendChild(p);a.select(p).attr(s),i=r.node=p,c.push(r)}function m(r,n){r.appendChild(document.createTextNode(n))}w.test(n)?h():(i=r,c=[{node:r}]);for(var L=n.split(b),C=0;C<L.length;C++){var I=L[C],D=I.match(_),z=D&&D[2].toLowerCase(),R=d[z];if("br"===z)h();else if(void 0===R)m(i,O(I));else if(D[1])!function(r){if(1!==c.length){var a=c.pop();r!==a.type&&o.log("Start tag <"+a.type+"> doesnt match end tag <"+r+">. Pretending it did match.",n),i=c[c.length-1].node}else o.log("Ignoring unexpected end tag </"+r+">.",n)}(z);else{var F=D[4],B={type:z},N=S(F,T);if(N?(N=N.replace(E,"$1 fill:"),R&&(N+=";"+R)):R&&(N=R),N&&(B.style=N),"a"===z){s=!0;var j=S(F,k);if(j){var U=P(j);U&&(B.href=U,B.target=S(F,A)||"_blank",B.popup=S(F,M))}}p(B)}}return s}(r.node(),L)&&r.style("pointer-events","all"),n.positionText(r),m&&m.call(r)}};var f=/(<|&lt;|&#60;)/g,h=/(>|&gt;|&#62;)/g,p=[["$","$"],["\\(","\\)"]],d={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},v={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},y="​",m=["http:","https:","mailto:","",void 0,":"],x=n.NEWLINES=/(\r\n?|\n)/g,b=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,w=/<br(\s+.*)?>/i;n.BR_TAG_ALL=/<br(\s+.*)?>/gi;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,A=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,M=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(r,n){if(!r)return null;var i=r.match(n),a=i&&(i[3]||i[4]);return a&&O(a)}var E=/(^|;)\s*color:/;n.plainText=function(r,n){for(var i=void 0!==(n=n||{}).len&&-1!==n.len?n.len:1/0,a=void 0!==n.allowedTags?n.allowedTags:["br"],o=r.split(b),s=[],l="",u=0,c=0;c<o.length;c++){var f=o[c],h=f.match(_),p=h&&h[2].toLowerCase();if(p)-1!==a.indexOf(p)&&(s.push(f),l=p);else{var d=f.length;if(u+d<i)s.push(f),u+=d;else if(u<i){var v=i-u;l&&("br"!==l||v<=3||d<=3)&&s.pop(),i>3?s.push(f.substr(0,v-3)+"..."):s.push(f.substr(0,v));break}l=""}}return s.join("")};var L={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function O(r){return r.replace(C,function(r,n){return("#"===n.charAt(0)?function(r){if(!(r>1114111)){var n=String.fromCodePoint;if(n)return n(r);var i=String.fromCharCode;return r<=65535?i(r):i(55232+(r>>10),r%1024+56320)}}("x"===n.charAt(1)?parseInt(n.substr(2),16):parseInt(n.substr(1),10)):L[n])||r})}function P(r){var n=encodeURI(decodeURI(r)),i=document.createElement("a"),a=document.createElement("a");i.href=r,a.href=n;var o=i.protocol,s=a.protocol;return -1!==m.indexOf(o)&&-1!==m.indexOf(s)?n:""}function I(r,n,i){var a,s,l,u=i.horizontalAlign,c=i.verticalAlign||"top",f=r.node().getBoundingClientRect(),h=n.node().getBoundingClientRect();return s="bottom"===c?function(){return f.bottom-a.height}:"middle"===c?function(){return f.top+(f.height-a.height)/2}:function(){return f.top},l="right"===u?function(){return f.right-a.width}:"center"===u?function(){return f.left+(f.width-a.width)/2}:function(){return f.left},function(){a=this.node().getBoundingClientRect();var r=l()-h.left,n=s()-h.top,u=i.gd||{};if(i.gd){u._fullLayout._calcInverseTransform(u);var c=o.apply3DTransform(u._fullLayout._invTransform)(r,n);r=c[0],n=c[1]}return this.style({top:n+"px",left:r+"px","z-index":1e3}),this}}n.convertEntities=O,n.sanitizeHTML=function(r){r=r.replace(x," ");for(var n=document.createElement("p"),i=n,o=[],s=r.split(b),l=0;l<s.length;l++){var u=s[l],c=u.match(_),f=c&&c[2].toLowerCase();if(f in d){if(c[1])o.length&&(i=o.pop());else{var h=c[4],p=S(h,T),v=p?{style:p}:{};if("a"===f){var g=S(h,k);if(g){var y=P(g);if(y){v.href=y;var m=S(h,A);m&&(v.target=m)}}}var w=document.createElement(f);i.appendChild(w),a.select(w).attr(v),i=w,o.push(w)}}else i.appendChild(document.createTextNode(O(u)))}return n.innerHTML},n.lineCount=function(r){return r.selectAll("tspan.line").size()||1},n.positionText=function(r,n,i){return r.each(function(){var r=a.select(this);function o(n,i){return void 0===i?null===(i=r.attr(n))&&(r.attr(n,0),i=0):r.attr(n,i),i}var s=o("x",n),l=o("y",i);"text"===this.nodeName&&r.selectAll("tspan.line").attr({x:s,y:l})})};var D="1px ";n.makeTextShadow=function(r){return D+D+D+r+", -"+D+"-"+D+D+r+", "+D+"-"+D+D+r+", -"+D+D+D+r},n.makeEditable=function(r,n){var i=n.gd,o=n.delegate,s=a.dispatch("edit","input","cancel"),l=o||r;if(r.style({"pointer-events":o?"none":"all"}),1!==r.size())throw Error("boo");function u(){u=(o=a.select(i).select(".svg-container")).append("div"),h=parseFloat((f=r.node().style).fontSize||12),void 0===(p=n.text)&&(p=r.attr("data-unformatted")),u.classed("plugin-editable editable",!0).style({position:"absolute","font-family":f.fontFamily||"Arial","font-size":h,color:n.fill||f.fill||"black",opacity:1,"background-color":n.background||"transparent",outline:"#ffffff33 1px solid",margin:[-h/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(p).call(I(r,o,n)).on("blur",function(){i._editing=!1,r.text(this.textContent).style({opacity:1});var n,o=a.select(this).attr("class");(n=o?"."+o.split(" ")[0]+"-math-group":"[class*=-math-group]")&&a.select(r.node().parentNode).select(n).style({opacity:0});var l=this.textContent;a.select(this).transition().duration(0).remove(),a.select(document).on("mouseup",null),s.edit.call(r,l)}).on("focus",function(){var r=this;i._editing=!0,a.select(document).on("mouseup",function(){if(a.event.target===r)return!1;document.activeElement===u.node()&&u.node().blur()})}).on("keyup",function(){27===a.event.which?(i._editing=!1,r.style({opacity:1}),a.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),s.cancel.call(r,this.textContent)):(s.input.call(r,this.textContent),a.select(this).call(I(r,o,n)))}).on("keydown",function(){13===a.event.which&&this.blur()}).call(c),r.style({opacity:0});var o,u,f,h,p,d,v=l.attr("class");(d=v?"."+v.split(" ")[0]+"-math-group":"[class*=-math-group]")&&a.select(r.node().parentNode).select(d).style({opacity:0})}function c(r){var n=r.node(),i=document.createRange();i.selectNodeContents(n);var a=window.getSelection();a.removeAllRanges(),a.addRange(i),n.focus()}return n.immediate?u():l.on("click",u),a.rebind(r,s,"on")}},79990:function(r,n){"use strict";var i={};function a(r){r&&null!==r.timer&&(clearTimeout(r.timer),r.timer=null)}n.throttle=function(r,n,o){var s=i[r],l=Date.now();if(!s){for(var u in i)i[u].ts<l-6e4&&delete i[u];s=i[r]={ts:0,timer:null}}function c(){o(),s.ts=Date.now(),s.onDone&&(s.onDone(),s.onDone=null)}a(s),l>s.ts+n?c():s.timer=setTimeout(function(){c(),s.timer=null},n)},n.done=function(r){var n=i[r];return n&&n.timer?new Promise(function(r){var i=n.onDone;n.onDone=function(){i&&i(),r(),n.onDone=null}}):Promise.resolve()},n.clear=function(r){if(r)a(i[r]),delete i[r];else for(var o in i)n.clear(o)}},58163:function(r,n,i){"use strict";var a=i(92770);r.exports=function(r,n){if(r>0)return Math.log(r)/Math.LN10;var i=Math.log(Math.min(n[0],n[1]))/Math.LN10;return a(i)||(i=Math.log(Math.max(n[0],n[1]))/Math.LN10-6),i}},90973:function(r,n,i){"use strict";var a=r.exports={},o=i(78776).locationmodeToLayer,s=i(96892).zL;a.getTopojsonName=function(r){return[r.scope.replace(/ /g,"-"),"_",r.resolution.toString(),"m"].join("")},a.getTopojsonPath=function(r,n){return r+n+".json"},a.getTopojsonFeatures=function(r,n){var i=o[r.locationmode],a=n.objects[i];return s(n,a).features}},37815:function(r){"use strict";r.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(r){"use strict";r.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(r,n,i){"use strict";var a=i(73972);r.exports=function(r){for(var n,i,o=a.layoutArrayContainers,s=a.layoutArrayRegexes,l=r.split("[")[0],u=0;u<s.length;u++)if((i=r.match(s[u]))&&0===i.index){n=i[0];break}if(n||(n=o[o.indexOf(l)]),!n)return!1;var c=r.substr(n.length);return c?!!(i=c.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:n,index:Number(i[1]),property:i[3]||""}:{array:n,index:"",property:""}}},30962:function(r,n,i){"use strict";var a=i(1426).extendFlat,o=i(41965),s={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},l={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},u=s.flags.slice().concat(["fullReplot"]),c=l.flags.slice().concat("layoutReplot");function f(r){for(var n={},i=0;i<r.length;i++)n[r[i]]=!1;return n}r.exports={traces:s,layout:l,traceFlags:function(){return f(u)},layoutFlags:function(){return f(c)},update:function(r,n){var i=n.editType;if(i&&"none"!==i)for(var a=i.split("+"),o=0;o<a.length;o++)r[a[o]]=!0},overrideAll:function r(n,i,s){var l=a({},n);for(var u in l){var c=l[u];o(c)&&(l[u]=function n(i,o,s,l){if(i.valType){var u=a({},i);if(u.editType=o,Array.isArray(i.items)){u.items=Array(i.items.length);for(var c=0;c<i.items.length;c++)u.items[c]=n(i.items[c],o)}return u}return r(i,o,"_"===l.charAt(0)?"nested":"from-root")}(c,i,0,u))}return"from-root"===s&&(l.editType=i),l}}},58377:function(r,n,i){"use strict";var a=i(92770),o=i(27812),s=i(73972),l=i(71828),u=i(74875),c=i(41675),f=i(7901),h=c.cleanId,p=c.getFromTrace,d=s.traceIs;function v(r,n){var i=r[n],a=n.charAt(0);i&&"paper"!==i&&(r[n]=h(i,a,!0))}function g(r){function n(n,i){var a=r[n],o=r.title&&r.title[i];a&&!o&&(r.title||(r.title={}),r.title[i]=r[n],delete r[n])}r&&("string"!=typeof r.title&&"number"!=typeof r.title||(r.title={text:r.title}),n("titlefont","font"),n("titleposition","position"),n("titleside","side"),n("titleoffset","offset"))}function y(r){if(!l.isPlainObject(r))return!1;var n=r.name;return delete r.name,delete r.showlegend,("string"==typeof n||"number"==typeof n)&&String(n)}function m(r){var n="middle",i="center";return"string"==typeof r&&(-1!==r.indexOf("top")?n="top":-1!==r.indexOf("bottom")&&(n="bottom"),-1!==r.indexOf("left")?i="left":-1!==r.indexOf("right")&&(i="right")),n+" "+i}function x(r,n){return n in r&&"object"==typeof r[n]&&0===Object.keys(r[n]).length}n.clearPromiseQueue=function(r){Array.isArray(r._promises)&&r._promises.length>0&&l.log("Clearing previous rejected promises from queue."),r._promises=[]},n.cleanLayout=function(r){r||(r={}),r.xaxis1&&(r.xaxis||(r.xaxis=r.xaxis1),delete r.xaxis1),r.yaxis1&&(r.yaxis||(r.yaxis=r.yaxis1),delete r.yaxis1),r.scene1&&(r.scene||(r.scene=r.scene1),delete r.scene1);var i,a,s=(u.subplotsRegistry.cartesian||{}).attrRegex,c=(u.subplotsRegistry.polar||{}).attrRegex,p=(u.subplotsRegistry.ternary||{}).attrRegex,d=(u.subplotsRegistry.gl3d||{}).attrRegex,y=Object.keys(r);for(i=0;i<y.length;i++){var m=y[i];if(s&&s.test(m)){var b=r[m];b.anchor&&"free"!==b.anchor&&(b.anchor=h(b.anchor)),b.overlaying&&(b.overlaying=h(b.overlaying)),b.type||(b.isdate?b.type="date":b.islog?b.type="log":!1===b.isdate&&!1===b.islog&&(b.type="linear")),"withzero"!==b.autorange&&"tozero"!==b.autorange||(b.autorange=!0,b.rangemode="tozero"),b.insiderange&&delete b.range,delete b.islog,delete b.isdate,delete b.categories,x(b,"domain")&&delete b.domain,void 0!==b.autotick&&(void 0===b.tickmode&&(b.tickmode=b.autotick?"auto":"linear"),delete b.autotick),g(b)}else if(c&&c.test(m))g(r[m].radialaxis);else if(p&&p.test(m)){var _=r[m];g(_.aaxis),g(_.baxis),g(_.caxis)}else if(d&&d.test(m)){var w=r[m],T=w.cameraposition;if(Array.isArray(T)&&4===T[0].length){var k=T[0],A=T[1],M=T[2],S=o([],k),E=[];for(a=0;a<3;++a)E[a]=A[a]+M*S[2+4*a];w.camera={eye:{x:E[0],y:E[1],z:E[2]},center:{x:A[0],y:A[1],z:A[2]},up:{x:0,y:0,z:1}},delete w.cameraposition}g(w.xaxis),g(w.yaxis),g(w.zaxis)}}var L=Array.isArray(r.annotations)?r.annotations.length:0;for(i=0;i<L;i++){var C=r.annotations[i];l.isPlainObject(C)&&(C.ref&&("paper"===C.ref?(C.xref="paper",C.yref="paper"):"data"===C.ref&&(C.xref="x",C.yref="y"),delete C.ref),v(C,"xref"),v(C,"yref"))}var O=Array.isArray(r.shapes)?r.shapes.length:0;for(i=0;i<O;i++){var P=r.shapes[i];l.isPlainObject(P)&&(v(P,"xref"),v(P,"yref"))}var I=Array.isArray(r.images)?r.images.length:0;for(i=0;i<I;i++){var D=r.images[i];l.isPlainObject(D)&&(v(D,"xref"),v(D,"yref"))}var z=r.legend;return z&&(z.x>3?(z.x=1.02,z.xanchor="left"):z.x<-2&&(z.x=-.02,z.xanchor="right"),z.y>3?(z.y=1.02,z.yanchor="bottom"):z.y<-2&&(z.y=-.02,z.yanchor="top")),g(r),"rotate"===r.dragmode&&(r.dragmode="orbit"),f.clean(r),r.template&&r.template.layout&&n.cleanLayout(r.template.layout),r},n.cleanData=function(r){for(var i=0;i<r.length;i++){var a,o=r[i];if("histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var c=f.defaults,p=o.error_y.color||(d(o,"bar")?f.defaultLine:c[i%c.length]);o.error_y.color=f.addOpacity(f.rgb(p),f.opacity(p)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"===o.bardir&&(d(o,"bar")||"histogram"===o.type.substr(0,9))&&(o.orientation="h",n.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&n.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&!("colorscale"in o)&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&!("reversescale"in o)&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=h(o.xaxis,"x")),o.yaxis&&(o.yaxis=h(o.yaxis,"y")),d(o,"gl3d")&&o.scene&&(o.scene=u.subplotsRegistry.gl3d.cleanId(o.scene)),!d(o,"pie-like")&&!d(o,"bar-like")){if(Array.isArray(o.textposition))for(a=0;a<o.textposition.length;a++)o.textposition[a]=m(o.textposition[a]);else o.textposition&&(o.textposition=m(o.textposition))}var v=s.getModule(o);if(v&&v.colorbar){var b=v.colorbar.container,_=b?o[b]:o;_&&_.colorscale&&("YIGnBu"===_.colorscale&&(_.colorscale="YlGnBu"),"YIOrRd"===_.colorscale&&(_.colorscale="YlOrRd"))}if("surface"===o.type&&l.isPlainObject(o.contours)){var w=["x","y","z"];for(a=0;a<w.length;a++){var T=o.contours[w[a]];l.isPlainObject(T)&&(T.highlightColor&&(T.highlightcolor=T.highlightColor,delete T.highlightColor),T.highlightWidth&&(T.highlightwidth=T.highlightWidth,delete T.highlightWidth))}}if("candlestick"===o.type||"ohlc"===o.type){var k=!1!==(o.increasing||{}).showlegend,A=!1!==(o.decreasing||{}).showlegend,M=y(o.increasing),S=y(o.decreasing);if(!1!==M&&!1!==S){var E=function(r,n,i,a){if(i&&!a)return r;if(a&&!i||!r.trim())return n;if(!n.trim())return r;var o,s=Math.min(r.length,n.length);for(o=0;o<s&&r.charAt(o)===n.charAt(o);o++);return r.substr(0,o).trim()}(M,S,k,A);E&&(o.name=E)}else(M||S)&&!o.name&&(o.name=M||S)}if(Array.isArray(o.transforms)){var L=o.transforms;for(a=0;a<L.length;a++){var C=L[a];if(l.isPlainObject(C))switch(C.type){case"filter":C.filtersrc&&(C.target=C.filtersrc,delete C.filtersrc),C.calendar&&(C.valuecalendar||(C.valuecalendar=C.calendar),delete C.calendar);break;case"groupby":if(C.styles=C.styles||C.style,C.styles&&!Array.isArray(C.styles)){var O=C.styles,P=Object.keys(O);C.styles=[];for(var I=0;I<P.length;I++)C.styles.push({target:P[I],value:O[P[I]]})}}}}x(o,"line")&&delete o.line,"marker"in o&&(x(o.marker,"line")&&delete o.marker.line,x(o,"marker")&&delete o.marker),f.clean(o),o.autobinx&&(delete o.autobinx,delete o.xbins),o.autobiny&&(delete o.autobiny,delete o.ybins),g(o),o.colorbar&&g(o.colorbar),o.marker&&o.marker.colorbar&&g(o.marker.colorbar),o.line&&o.line.colorbar&&g(o.line.colorbar),o.aaxis&&g(o.aaxis),o.baxis&&g(o.baxis)}},n.swapXYData=function(r){var n;if(l.swapAttrs(r,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(r.z)&&Array.isArray(r.z[0])&&(r.transpose?delete r.transpose:r.transpose=!0),r.error_x&&r.error_y){var i=r.error_y,a="copy_ystyle"in i?i.copy_ystyle:!(i.color||i.thickness||i.width);l.swapAttrs(r,["error_?.copy_ystyle"]),a&&l.swapAttrs(r,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof r.hoverinfo){var o=r.hoverinfo.split("+");for(n=0;n<o.length;n++)"x"===o[n]?o[n]="y":"y"===o[n]&&(o[n]="x");r.hoverinfo=o.join("+")}},n.coerceTraceIndices=function(r,n){if(a(n))return[n];if(!Array.isArray(n)||!n.length)return r.data.map(function(r,n){return n});if(Array.isArray(n)){for(var i=[],o=0;o<n.length;o++)l.isIndex(n[o],r.data.length)?i.push(n[o]):l.warn("trace index (",n[o],") is not a number or is out of bounds");return i}return n},n.manageArrayContainers=function(r,n,i){var o=r.obj,s=r.parts,u=s.length,c=s[u-1],f=a(c);if(f&&null===n){var h=s.slice(0,u-1).join(".");l.nestedProperty(o,h).get().splice(c,1)}else f&&void 0===r.get()&&void 0===r.get()&&(i[r.astr]=null),r.set(n)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function _(r){var n=r.search(b);if(n>0)return r.substr(0,n)}n.hasParent=function(r,n){for(var i=_(n);i;){if(i in r)return!0;i=_(i)}return!1};var w=["x","y","z"];n.clearAxisTypes=function(r,n,i){for(var a=0;a<n.length;a++)for(var o=r._fullData[a],s=0;s<3;s++){var u=p(r,o,w[s]);if(u&&"log"!==u.type){var c=u._name,f=u._id.substr(1);if("scene"===f.substr(0,5)){if(void 0!==i[f])continue;c=f+"."+c}var h=c+".type";void 0===i[c]&&void 0===i[h]&&l.nestedProperty(r.layout,h).set(null)}}}},10641:function(r,n,i){"use strict";var a=i(72391);n._doPlot=a._doPlot,n.newPlot=a.newPlot,n.restyle=a.restyle,n.relayout=a.relayout,n.redraw=a.redraw,n.update=a.update,n._guiRestyle=a._guiRestyle,n._guiRelayout=a._guiRelayout,n._guiUpdate=a._guiUpdate,n._storeDirectGUIEdit=a._storeDirectGUIEdit,n.react=a.react,n.extendTraces=a.extendTraces,n.prependTraces=a.prependTraces,n.addTraces=a.addTraces,n.deleteTraces=a.deleteTraces,n.moveTraces=a.moveTraces,n.purge=a.purge,n.addFrames=a.addFrames,n.deleteFrames=a.deleteFrames,n.animate=a.animate,n.setPlotConfig=a.setPlotConfig;var o=i(24401).getGraphDiv,s=i(34031).eraseActiveShape;n.deleteActiveShape=function(r){return s(o(r))},n.toImage=i(403),n.validate=i(84936),n.downloadImage=i(7239);var l=i(96318);n.makeTemplate=l.makeTemplate,n.validateTemplate=l.validateTemplate},6611:function(r,n,i){"use strict";var a=i(41965),o=i(64213),s=i(47769),l=i(65888).sorterAsc,u=i(73972);n.containerArrayMatch=i(14458);var c=n.isAddVal=function(r){return"add"===r||a(r)},f=n.isRemoveVal=function(r){return null===r||"remove"===r};n.applyContainerArrayChanges=function(r,n,i,a,h){var p,d=n.astr,v=u.getComponentMethod(d,"supplyLayoutDefaults"),g=u.getComponentMethod(d,"draw"),y=u.getComponentMethod(d,"drawOne"),m=a.replot||a.recalc||v===o||g===o,x=r.layout,b=r._fullLayout;if(i[""]){Object.keys(i).length>1&&s.warn("Full array edits are incompatible with other edits",d);var _=i[""][""];if(f(_))n.set(null);else{if(!Array.isArray(_))return s.warn("Unrecognized full array edit value",d,_),!0;n.set(_)}return!m&&(v(x,b),g(r),!0)}var w,T,k,A,M,S,E,L,C=Object.keys(i).map(Number).sort(l),O=n.get(),P=O||[],I=h(b,d).get(),D=[],z=-1,R=P.length;for(w=0;w<C.length;w++)if(M=Object.keys(A=i[k=C[w]]),E=c(S=A[""]),k<0||k>P.length-(E?0:1))s.warn("index out of range",d,k);else if(void 0!==S)M.length>1&&s.warn("Insertion & removal are incompatible with edits to the same index.",d,k),f(S)?D.push(k):E?("add"===S&&(S={}),P.splice(k,0,S),I&&I.splice(k,0,{})):s.warn("Unrecognized full object edit value",d,k,S),-1===z&&(z=k);else for(T=0;T<M.length;T++)L=d+"["+k+"].",h(P[k],M[T],L).set(A[M[T]]);for(w=D.length-1;w>=0;w--)P.splice(D[w],1),I&&I.splice(D[w],1);if(P.length?O||n.set(P):n.set(null),m)return!1;if(v(x,b),y!==o){if(-1===z)p=C;else{for(R=Math.max(P.length,R),p=[],w=0;w<C.length&&!((k=C[w])>=z);w++)p.push(k);for(w=z;w<R;w++)p.push(w)}for(w=0;w<p.length;w++)y(r,p[w])}else g(r);return!0}},72391:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(57035),l=i(71828),u=l.nestedProperty,c=i(11086),f=i(10847),h=i(73972),p=i(86281),d=i(74875),v=i(89298),g=i(23608),y=i(13838),m=i(91424),x=i(7901),b=i(4305).initInteractions,_=i(77922),w=i(47322).clearOutline,T=i(72075).dfltConfig,k=i(6611),A=i(58377),M=i(61549),S=i(30962),E=i(85555).AX_NAME_PATTERN,L=0;function C(r){var n=r._fullLayout;n._redrawFromAutoMarginCount?n._redrawFromAutoMarginCount--:r.emit("plotly_afterplot")}function O(r,n){try{r._fullLayout._paper.style("background",n)}catch(r){l.error(r)}}function P(r,n){O(r,x.combine(n,"white"))}function I(r,n){if(!r._context){r._context=l.extendDeep({},T);var i=a.select("base");r._context._baseUrl=i.size()&&i.attr("href")?window.location.href.split("#")[0]:""}var o,u,c,f=r._context;if(n){for(u=Object.keys(n),o=0;o<u.length;o++)"editable"!==(c=u[o])&&"edits"!==c&&c in f&&("setBackground"===c&&"opaque"===n[c]?f[c]=P:f[c]=n[c]);n.plot3dPixelRatio&&!f.plotGlPixelRatio&&(f.plotGlPixelRatio=f.plot3dPixelRatio);var h=n.editable;if(void 0!==h)for(f.editable=h,u=Object.keys(f.edits),o=0;o<u.length;o++)f.edits[u[o]]=h;if(n.edits)for(u=Object.keys(n.edits),o=0;o<u.length;o++)(c=u[o])in f.edits&&(f.edits[c]=n.edits[c]);f._exportedPlot=n._exportedPlot}f.staticPlot&&(f.editable=!1,f.edits={},f.autosizable=!1,f.scrollZoom=!1,f.doubleClick=!1,f.showTips=!1,f.showLink=!1,f.displayModeBar=!1),"hover"!==f.displayModeBar||s||(f.displayModeBar=!0),"transparent"!==f.setBackground&&"function"==typeof f.setBackground||(f.setBackground=O),f._hasZeroHeight=f._hasZeroHeight||0===r.clientHeight,f._hasZeroWidth=f._hasZeroWidth||0===r.clientWidth;var p=f.scrollZoom,d=f._scrollZoom={};if(!0===p)d.cartesian=1,d.gl3d=1,d.geo=1,d.mapbox=1;else if("string"==typeof p){var v=p.split("+");for(o=0;o<v.length;o++)d[v[o]]=1}else!1!==p&&(d.gl3d=1,d.geo=1,d.mapbox=1)}function D(r,n){var i,a,o=n+1,s=[];for(i=0;i<r.length;i++)(a=r[i])<0?s.push(o+a):s.push(a);return s}function z(r,n,i){var a,o;for(a=0;a<n.length;a++){if((o=n[a])!==parseInt(o,10))throw Error("all values in "+i+" must be integers");if(o>=r.data.length||o<-r.data.length)throw Error(i+" must be valid indices for gd.data.");if(n.indexOf(o,a+1)>-1||o>=0&&n.indexOf(-r.data.length+o)>-1||o<0&&n.indexOf(r.data.length+o)>-1)throw Error("each index in "+i+" must be unique.")}}function R(r,n,i){if(!Array.isArray(r.data))throw Error("gd.data must be an array.");if(void 0===n)throw Error("currentIndices is a required argument.");if(Array.isArray(n)||(n=[n]),z(r,n,"currentIndices"),void 0===i||Array.isArray(i)||(i=[i]),void 0!==i&&z(r,i,"newIndices"),void 0!==i&&n.length!==i.length)throw Error("current and new indices must be of equal length.")}function F(r,n,i,a,s){!function(r,n,i,a){var o=l.isPlainObject(a);if(!Array.isArray(r.data))throw Error("gd.data must be an array");if(!l.isPlainObject(n))throw Error("update must be a key:value object");if(void 0===i)throw Error("indices must be an integer or array of integers");for(var s in z(r,i,"indices"),n){if(!Array.isArray(n[s])||n[s].length!==i.length)throw Error("attribute "+s+" must be an array of length equal to indices array length");if(o&&(!(s in a)||!Array.isArray(a[s])||a[s].length!==n[s].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(r,n,i,a);for(var c=function(r,n,i,a){var s,c,f,h,p=l.isPlainObject(a),d=[];for(var v in Array.isArray(i)||(i=[i]),i=D(i,r.data.length-1),n)for(var g=0;g<i.length;g++){if(s=(c=u(r.data[i[g]],v)).get(),f=n[v][g],!l.isArrayOrTypedArray(f))throw Error("attribute: "+v+" index: "+g+" must be an array");if(!l.isArrayOrTypedArray(s))throw Error("cannot extend missing or non-array attribute: "+v);if(s.constructor!==f.constructor)throw Error("cannot extend array with an array of a different type: "+v);o(h=p?a[v][g]:a)||(h=-1),d.push({prop:c,target:s,insert:f,maxp:Math.floor(h)})}return d}(r,n,i,a),f={},h={},p=0;p<c.length;p++){var d=c[p].prop,v=c[p].maxp,g=s(c[p].target,c[p].insert,v);d.set(g[0]),Array.isArray(f[d.astr])||(f[d.astr]=[]),f[d.astr].push(g[1]),Array.isArray(h[d.astr])||(h[d.astr]=[]),h[d.astr].push(c[p].target.length)}return{update:f,maxPoints:h}}function B(r,n){var i=new r.constructor(r.length+n.length);return i.set(r),i.set(n,r.length),i}function N(r,i,a,o){r=l.getGraphDiv(r),A.clearPromiseQueue(r);var s={};if("string"==typeof i)s[i]=a;else{if(!l.isPlainObject(i))return l.warn("Restyle fail.",i,a,o),Promise.reject();s=l.extendFlat({},i),void 0===o&&(o=a)}Object.keys(s).length&&(r.changed=!0);var u=A.coerceTraceIndices(r,o),c=H(r,s,u),h=c.flags;h.calc&&(r.calcdata=void 0),h.clearAxisTypes&&A.clearAxisTypes(r,u,{});var p=[];h.fullReplot?p.push(n._doPlot):(p.push(d.previousPromises),d.supplyDefaults(r),h.markerSize&&(d.doCalcdata(r),Y(p)),h.style&&p.push(M.doTraceStyle),h.colorbars&&p.push(M.doColorBars),p.push(C)),p.push(d.rehover,d.redrag,d.reselect),f.add(r,N,[r,c.undoit,c.traces],N,[r,c.redoit,c.traces]);var v=l.syncOrAsync(p,r);return v&&v.then||(v=Promise.resolve()),v.then(function(){return r.emit("plotly_restyle",c.eventData),r})}function j(r){return void 0===r?null:r}function U(r,n){return n?function(n,i,a){var o=u(n,i),s=o.set;return o.set=function(n){V((a||"")+i,o.get(),n,r),s(n)},o}:u}function V(r,n,i,a){if(Array.isArray(n)||Array.isArray(i))for(var o=Array.isArray(n)?n:[],s=Array.isArray(i)?i:[],u=Math.max(o.length,s.length),c=0;c<u;c++)V(r+"["+c+"]",o[c],s[c],a);else if(l.isPlainObject(n)||l.isPlainObject(i)){var f=l.isPlainObject(n)?n:{},h=l.isPlainObject(i)?i:{},p=l.extendFlat({},f,h);for(var d in p)V(r+"."+d,f[d],h[d],a)}else void 0===a[r]&&(a[r]=j(n))}function H(r,n,i){var a,o=r._fullLayout,s=r._fullData,c=r.data,f=o._guiEditing,g=U(o._preGUI,f),y=l.extendDeepAll({},n);q(n);var m,x=S.traceFlags(),b={},_={};function w(){return i.map(function(){})}function T(r){var n=v.id2name(r);-1===m.indexOf(n)&&m.push(n)}function k(r){return"LAYOUT"+r+".autorange"}function M(r){return"LAYOUT"+r+".range"}function E(r){for(var n=r;n<s.length;n++)if(s[n]._input===c[r])return s[n]}function L(a,s,l){if(Array.isArray(a))a.forEach(function(r){L(r,s,l)});else if(!(a in n)&&!A.hasParent(n,a)){var u;if("LAYOUT"===a.substr(0,6))u=g(r.layout,a.replace("LAYOUT",""));else{var h=i[l];u=U(o._tracePreGUI[E(h)._fullInput.uid],f)(c[h],a)}a in _||(_[a]=w()),void 0===_[a][l]&&(_[a][l]=j(u.get())),void 0!==s&&u.set(s)}}for(var C in n){if(A.hasParent(n,C))throw Error("cannot set "+C+" and a parent attribute simultaneously");var O,P,I,D,z,R,F=n[C];if("autobinx"!==C&&"autobiny"!==C||(C=C.charAt(C.length-1)+"bins",F=Array.isArray(F)?F.map(function(r){return function(n,a){return!1===n?s[i[a]][r]:null}}(C)):!1===F?i.map(function(r){return function(n){return s[n][r]}}(C)):null),b[C]=F,"LAYOUT"!==C.substr(0,6)){for(_[C]=w(),a=0;a<i.length;a++)if(O=c[i[a]],P=E(i[a]),D=(I=U(o._tracePreGUI[P._fullInput.uid],f)(O,C)).get(),void 0!==(z=Array.isArray(F)?F[a%F.length]:F)){var B=I.parts[I.parts.length-1],N=C.substr(0,C.length-B.length-1),V=N?N+".":"",H=N?u(P,N).get():P;if((R=p.getTraceValObject(P,I.parts))&&R.impliedEdits&&null!==z)for(var G in R.impliedEdits)L(l.relativeAttr(C,G),R.impliedEdits[G],a);else if(("thicknessmode"===B||"lenmode"===B)&&D!==z&&("fraction"===z||"pixels"===z)&&H){var Z=o._size,Y=H.orient,W="top"===Y||"bottom"===Y;if("thicknessmode"===B){var X=W?Z.h:Z.w;L(V+"thickness",H.thickness*("fraction"===z?1/X:X),a)}else{var J=W?Z.w:Z.h;L(V+"len",H.len*("fraction"===z?1/J:J),a)}}else if("type"===C&&("pie"===z!=("pie"===D)||"funnelarea"===z!=("funnelarea"===D))){var K="x",$="y";"bar"!==z&&"bar"!==D||"h"!==O.orientation||(K="y",$="x"),l.swapAttrs(O,["?","?src"],"labels",K),l.swapAttrs(O,["d?","?0"],"label",K),l.swapAttrs(O,["?","?src"],"values",$),"pie"===D||"funnelarea"===D?(u(O,"marker.color").set(u(O,"marker.colors").get()),o._pielayer.selectAll("g.trace").remove()):h.traceIs(O,"cartesian")&&u(O,"marker.colors").set(u(O,"marker.color").get())}if(_[C][a]=j(D),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(C)){if("orientation"===C){I.set(z);var Q=O.x&&!O.y?"h":"v";if((I.get()||Q)===P.orientation)continue}else"orientationaxes"===C&&(O.orientation=({v:"h",h:"v"})[P.orientation]);A.swapXYData(O),x.calc=x.clearAxisTypes=!0}else -1!==d.dataArrayContainers.indexOf(I.parts[0])?(A.manageArrayContainers(I,z,_),x.calc=!0):(R?R.arrayOk&&!h.traceIs(P,"regl")&&(l.isArrayOrTypedArray(z)||l.isArrayOrTypedArray(D))?x.calc=!0:S.update(x,R):x.calc=!0,I.set(z))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(C)&&v.swap(r,i),"orientationaxes"===C){var tt=u(r.layout,"hovermode"),te=tt.get();"x"===te?tt.set("y"):"y"===te?tt.set("x"):"x unified"===te?tt.set("y unified"):"y unified"===te&&tt.set("x unified")}if(-1!==["orientation","type"].indexOf(C)){for(m=[],a=0;a<i.length;a++){var tr=c[i[a]];h.traceIs(tr,"cartesian")&&(T(tr.xaxis||"x"),T(tr.yaxis||"y"))}L(m.map(k),!0,0),L(m.map(M),[0,1],0)}}else I=g(r.layout,C.replace("LAYOUT","")),_[C]=[j(I.get())],I.set(Array.isArray(F)?F[0]:F),x.calc=!0}return(x.calc||x.plot)&&(x.fullReplot=!0),{flags:x,undoit:_,redoit:b,traces:i,eventData:l.extendDeepNoArrays([],[y,i])}}function q(r){var n,i,a,o=l.counterRegex("axis",".title",!1,!1),s=/colorbar\.title$/,u=Object.keys(r);for(n=0;n<u.length;n++)a=r[i=u[n]],("title"===i||o.test(i)||s.test(i))&&("string"==typeof a||"number"==typeof a)?c(i,i.replace("title","title.text")):i.indexOf("titlefont")>-1&&-1===i.indexOf("grouptitlefont")?c(i,i.replace("titlefont","title.font")):i.indexOf("titleposition")>-1?c(i,i.replace("titleposition","title.position")):i.indexOf("titleside")>-1?c(i,i.replace("titleside","title.side")):i.indexOf("titleoffset")>-1&&c(i,i.replace("titleoffset","title.offset"));function c(n,i){r[i]=r[n],delete r[n]}}function G(r,n,i){r=l.getGraphDiv(r),A.clearPromiseQueue(r);var a={};if("string"==typeof n)a[n]=i;else{if(!l.isPlainObject(n))return l.warn("Relayout fail.",n,i),Promise.reject();a=l.extendFlat({},n)}Object.keys(a).length&&(r.changed=!0);var o=K(r,a),s=o.flags;s.calc&&(r.calcdata=void 0);var u=[d.previousPromises];s.layoutReplot?u.push(M.layoutReplot):Object.keys(a).length&&(Z(r,s,o)||d.supplyDefaults(r),s.legend&&u.push(M.doLegend),s.layoutstyle&&u.push(M.layoutStyles),s.axrange&&Y(u,o.rangesAltered),s.ticks&&u.push(M.doTicksRelayout),s.modebar&&u.push(M.doModeBar),s.camera&&u.push(M.doCamera),s.colorbars&&u.push(M.doColorBars),u.push(C)),u.push(d.rehover,d.redrag,d.reselect),f.add(r,G,[r,o.undoit],G,[r,o.redoit]);var c=l.syncOrAsync(u,r);return c&&c.then||(c=Promise.resolve(r)),c.then(function(){return r.emit("plotly_relayout",o.eventData),r})}function Z(r,n,i){var a,o,s=r._fullLayout;if(!n.axrange)return!1;for(var u in n)if("axrange"!==u&&n[u])return!1;var c=function(r,n){return l.coerce(a,o,y,r,n)},f={};for(var h in i.rangesAltered){var p=v.id2name(h);if(a=r.layout[p],o=s[p],g(a,o,c,f),o._matchGroup){for(var d in o._matchGroup)if(d!==h){var m=s[v.id2name(d)];m.autorange=o.autorange,m.range=o.range.slice(),m._input.range=o.range.slice()}}}return!0}function Y(r,n){var i=n?function(r){var i=[];for(var a in n){var o=v.getFromId(r,a);if(i.push(a),-1!==(o.ticklabelposition||"").indexOf("inside")&&o._anchorAxis&&i.push(o._anchorAxis._id),o._matchGroup)for(var s in o._matchGroup)n[s]||i.push(s)}return v.draw(r,i,{skipTitle:!0})}:function(r){return v.draw(r,"redraw")};r.push(w,M.doAutoRangeAndConstraints,i,M.drawData,M.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,X=/^[xyz]axis[0-9]*\.autorange$/,J=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function K(r,n){var i,a,o,s=r.layout,c=r._fullLayout,f=c._guiEditing,d=U(c._preGUI,f),g=Object.keys(n),y=v.list(r),m=l.extendDeepAll({},n),x={};for(q(n),g=Object.keys(n),a=0;a<g.length;a++)if(0===g[a].indexOf("allaxes")){for(o=0;o<y.length;o++){var b=y[o]._id.substr(1),_=-1!==b.indexOf("scene")?b+".":"",w=g[a].replace("allaxes",_+y[o]._name);n[w]||(n[w]=n[g[a]])}delete n[g[a]]}var T=S.layoutFlags(),M={},L={};function C(r,i){if(Array.isArray(r))r.forEach(function(r){C(r,i)});else if(!(r in n)&&!A.hasParent(n,r)){var a=d(s,r);r in L||(L[r]=j(a.get())),void 0!==i&&a.set(i)}}var O,P={};function I(r){var n=v.name2id(r.split(".")[0]);return P[n]=1,n}for(var D in n){if(A.hasParent(n,D))throw Error("cannot set "+D+" and a parent attribute simultaneously");for(var z=d(s,D),R=n[D],F=z.parts.length-1;F>0&&"string"!=typeof z.parts[F];)F--;var B=z.parts[F],N=z.parts[F-1]+"."+B,V=z.parts.slice(0,F).join("."),H=u(r.layout,V).get(),G=u(c,V).get(),Z=z.get();if(void 0!==R){M[D]=R,L[D]="reverse"===B?R:j(Z);var Y=p.getLayoutValObject(c,z.parts);if(Y&&Y.impliedEdits&&null!==R)for(var K in Y.impliedEdits)C(l.relativeAttr(D,K),Y.impliedEdits[K]);if(-1!==["width","height"].indexOf(D)){if(R){C("autosize",null);var Q="height"===D?"width":"height";C(Q,c[Q])}else c[D]=r._initialAutoSize[D]}else if("autosize"===D)C("width",R?null:c.width),C("height",R?null:c.height);else if(N.match(W))I(N),u(c,V+"._inputRange").set(null);else if(N.match(X)){I(N),u(c,V+"._inputRange").set(null);var tt=u(c,V).get();tt._inputDomain&&(tt._input.domain=tt._inputDomain.slice())}else N.match(J)&&u(c,V+"._inputDomain").set(null);if("type"===B){O=H;var te="linear"===G.type&&"log"===R,tr="log"===G.type&&"linear"===R;if(te||tr){if(O&&O.range){if(G.autorange)te&&(O.range=O.range[1]>O.range[0]?[1,2]:[2,1]);else{var tn=O.range[0],ti=O.range[1];te?(tn<=0&&ti<=0&&C(V+".autorange",!0),tn<=0?tn=ti/1e6:ti<=0&&(ti=tn/1e6),C(V+".range[0]",Math.log(tn)/Math.LN10),C(V+".range[1]",Math.log(ti)/Math.LN10)):(C(V+".range[0]",Math.pow(10,tn)),C(V+".range[1]",Math.pow(10,ti)))}}else C(V+".autorange",!0);Array.isArray(c._subplots.polar)&&c._subplots.polar.length&&c[z.parts[0]]&&"radialaxis"===z.parts[1]&&delete c[z.parts[0]]._subplot.viewInitial["radialaxis.range"],h.getComponentMethod("annotations","convertCoords")(r,G,R,C),h.getComponentMethod("images","convertCoords")(r,G,R,C)}else C(V+".autorange",!0),C(V+".range",null);u(c,V+"._inputRange").set(null)}else if(B.match(E)){var ta=u(c,D).get(),to=(R||{}).type;to&&"-"!==to||(to="linear"),h.getComponentMethod("annotations","convertCoords")(r,ta,to,C),h.getComponentMethod("images","convertCoords")(r,ta,to,C)}var ts=k.containerArrayMatch(D);if(ts){i=ts.array,a=ts.index;var tl=ts.property,tu=Y||{editType:"calc"};""!==a&&""===tl&&(k.isAddVal(R)?L[D]=null:k.isRemoveVal(R)?L[D]=(u(s,i).get()||[])[a]:l.warn("unrecognized full object value",n)),S.update(T,tu),x[i]||(x[i]={});var tc=x[i][a];tc||(tc=x[i][a]={}),tc[tl]=R,delete n[D]}else"reverse"===B?(H.range?H.range.reverse():(C(V+".autorange",!0),H.range=[1,0]),G.autorange?T.calc=!0:T.plot=!0):("dragmode"===D&&(!1===R&&!1!==Z||!1!==R&&!1===Z)||c._has("scatter-like")&&c._has("regl")&&"dragmode"===D&&("lasso"===R||"select"===R)&&"lasso"!==Z&&"select"!==Z||c._has("gl2d")?T.plot=!0:Y?S.update(T,Y):T.calc=!0,z.set(R))}}for(i in x)k.applyContainerArrayChanges(r,d(s,i),x[i],T,d)||(T.plot=!0);for(var tf in P){var th=(O=v.getFromId(r,tf))&&O._constraintGroup;if(th)for(var tp in T.calc=!0,th)P[tp]||(v.getFromId(r,tp)._constraintShrinkable=!0)}($(r)||n.height||n.width)&&(T.plot=!0);var td=c.shapes;for(a=0;a<td.length;a++)if(td[a].showlegend){T.calc=!0;break}return(T.plot||T.calc)&&(T.layoutReplot=!0),{flags:T,rangesAltered:P,undoit:L,redoit:M,eventData:m}}function $(r){var n=r._fullLayout,i=n.width,a=n.height;return r.layout.autosize&&d.plotAutoSize(r,r.layout,n),n.width!==i||n.height!==a}function Q(r,i,a,o){r=l.getGraphDiv(r),A.clearPromiseQueue(r),l.isPlainObject(i)||(i={}),l.isPlainObject(a)||(a={}),Object.keys(i).length&&(r.changed=!0),Object.keys(a).length&&(r.changed=!0);var s=A.coerceTraceIndices(r,o),u=H(r,l.extendFlat({},i),s),c=u.flags,h=K(r,l.extendFlat({},a)),p=h.flags;(c.calc||p.calc)&&(r.calcdata=void 0),c.clearAxisTypes&&A.clearAxisTypes(r,s,a);var v=[];p.layoutReplot?v.push(M.layoutReplot):c.fullReplot?v.push(n._doPlot):(v.push(d.previousPromises),Z(r,p,h)||d.supplyDefaults(r),c.style&&v.push(M.doTraceStyle),(c.colorbars||p.colorbars)&&v.push(M.doColorBars),p.legend&&v.push(M.doLegend),p.layoutstyle&&v.push(M.layoutStyles),p.axrange&&Y(v,h.rangesAltered),p.ticks&&v.push(M.doTicksRelayout),p.modebar&&v.push(M.doModeBar),p.camera&&v.push(M.doCamera),v.push(C)),v.push(d.rehover,d.redrag,d.reselect),f.add(r,Q,[r,u.undoit,h.undoit,u.traces],Q,[r,u.redoit,h.redoit,u.traces]);var g=l.syncOrAsync(v,r);return g&&g.then||(g=Promise.resolve(r)),g.then(function(){return r.emit("plotly_update",{data:u.eventData,layout:h.eventData}),r})}function tt(r){return function(n){n._fullLayout._guiEditing=!0;var i=r.apply(null,arguments);return n._fullLayout._guiEditing=!1,i}}var te=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],tr=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function tn(r,n){for(var i=0;i<n.length;i++){var a=n[i],o=r.match(a.pattern);if(o){var s=o[1]||"";return{head:s,tail:r.substr(s.length+1),attr:a.attr}}}}function ti(r,n){var i=u(n,r).get();if(void 0!==i)return i;var a=r.split(".");for(a.pop();a.length>1;)if(a.pop(),void 0!==(i=u(n,a.join(".")+".uirevision").get()))return i;return n.uirevision}function ta(r,n){var i=l.isPlainObject(r),a=Array.isArray(r);return i||a?(i&&l.isPlainObject(n)||a&&Array.isArray(n))&&JSON.stringify(r)===JSON.stringify(n):r===n}function to(r,n,i,a){var o,s,c,f=a.getValObject,h=a.flags,p=a.immutable,d=a.inArray,v=a.arrayIndex;function g(){var r=o.editType;d&&-1!==r.indexOf("arraydraw")?l.pushUnique(h.arrays[d],v):(S.update(h,o),"none"!==r&&h.nChanges++,a.transition&&o.anim&&h.nChangesAnim++,(W.test(c)||X.test(c))&&(h.rangesAltered[i[0]]=1),J.test(c)&&u(n,"_inputDomain").set(null),"datarevision"===s&&(h.newDataRevision=1))}function y(r){return"data_array"===r.valType||r.arrayOk}for(s in r){if(h.calc&&!a.transition)return;var m=r[s],x=n[s],b=i.concat(s);if(c=b.join("."),"_"!==s.charAt(0)&&"function"!=typeof m&&m!==x){if(("tick0"===s||"dtick"===s)&&"geo"!==i[0]){var _=n.tickmode;if("auto"===_||"array"===_||!_)continue}if(("range"!==s||!n.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==n.type)&&(o=f(b))&&(!o._compareAsJSON||JSON.stringify(m)!==JSON.stringify(x))){var w,T=o.valType,k=y(o),A=Array.isArray(m),M=Array.isArray(x);if(A&&M){var E="_input_"+s,L=r[E],C=n[E];if(Array.isArray(L)&&L===C)continue}if(void 0===x)k&&A?h.calc=!0:g();else if(o._isLinkedToArray){var O=[],P=!1;d||(h.arrays[s]=O);var I=Math.min(m.length,x.length),D=Math.max(m.length,x.length);if(I!==D){if("arraydraw"!==o.editType){g();continue}P=!0}for(w=0;w<I;w++)to(m[w],x[w],b.concat(w),l.extendFlat({inArray:s,arrayIndex:w},a));if(P)for(w=I;w<D;w++)O.push(w)}else!T&&l.isPlainObject(m)?to(m,x,b,a):k?A&&M?(p&&(h.calc=!0),(p||a.newDataRevision)&&g()):A!==M?h.calc=!0:g():A&&M&&m.length===x.length&&String(m)===String(x)||g()}}}for(s in n)if(!(s in r)&&"_"!==s.charAt(0)&&"function"!=typeof n[s]){if(y(o=f(i.concat(s)))&&Array.isArray(n[s]))return void(h.calc=!0);g()}}function ts(r){var n=r._fullLayout,i=r.getBoundingClientRect();if(!l.equalDomRects(i,n._lastBBox)){var a=n._invTransform=l.inverseTransformMatrix(l.getFullTransformMatrix(r));n._invScaleX=Math.sqrt(a[0][0]*a[0][0]+a[0][1]*a[0][1]+a[0][2]*a[0][2]),n._invScaleY=Math.sqrt(a[1][0]*a[1][0]+a[1][1]*a[1][1]+a[1][2]*a[1][2]),n._lastBBox=i}}n.animate=function(r,n,i){if(r=l.getGraphDiv(r),!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var a=r._transitionData;a._frameQueue||(a._frameQueue=[]);var o=(i=d.supplyAnimationDefaults(i)).transition,s=i.frame;return void 0===a._frameWaitingCnt&&(a._frameWaitingCnt=0),new Promise(function(u,c){var f,h,p=0;function v(r){return Array.isArray(o)?p>=o.length?r.transitionOpts=o[p]:r.transitionOpts=o[0]:r.transitionOpts=o,p++,r}var g=[],y=null==n,m=Array.isArray(n);if(y||m||!l.isPlainObject(n)){if(y||-1!==["string","number"].indexOf(typeof n))for(f=0;f<a._frames.length;f++)(h=a._frames[f])&&(y||String(h.group)===String(n))&&g.push({type:"byname",name:String(h.name),data:v({name:h.name})});else if(m)for(f=0;f<n.length;f++){var x=n[f];-1!==["number","string"].indexOf(typeof x)?(x=String(x),g.push({type:"byname",name:x,data:v({name:x})})):l.isPlainObject(x)&&g.push({type:"object",data:v(l.extendFlat({},x))})}}else g.push({type:"object",data:v(l.extendFlat({},n))});for(f=0;f<g.length;f++)if("byname"===(h=g[f]).type&&!a._frameHash[h.data.name])return l.warn('animate failure: frame not found: "'+h.data.name+'"'),void c();-1!==["next","immediate"].indexOf(i.mode)&&function(){if(0!==a._frameQueue.length){for(;a._frameQueue.length;){var n=a._frameQueue.pop();n.onInterrupt&&n.onInterrupt()}r.emit("plotly_animationinterrupted",[])}}(),"reverse"===i.direction&&g.reverse();var b=r._fullLayout._currentFrame;if(b&&i.fromcurrent){var _=-1;for(f=0;f<g.length;f++)if("byname"===(h=g[f]).type&&h.name===b){_=f;break}if(_>0&&_<g.length-1){var w=[];for(f=0;f<g.length;f++)h=g[f],("byname"!==g[f].type||f>_)&&w.push(h);g=w}}g.length>0?function(n){if(0!==n.length){for(var l,f=0;f<n.length;f++){v="byname"===n[f].type?d.computeFrame(r,n[f].name):n[f].data;var h,p,v,g=(h=f,Array.isArray(s)?h>=s.length?s[0]:s[h]:s),y=(p=f,Array.isArray(o)?p>=o.length?o[0]:o[p]:o);y.duration=Math.min(y.duration,g.duration);var m={frame:v,name:n[f].name,frameOpts:g,transitionOpts:y};f===n.length-1&&(m.onComplete=function(r,n){var i=0;return function(){if(r&&2==++i)return r()}}(u,0),m.onInterrupt=c),a._frameQueue.push(m)}"immediate"===i.mode&&(a._lastFrameAt=-1/0),a._animationRaf||(r.emit("plotly_animating"),a._lastFrameAt=-1/0,a._timeToNext=0,a._runningTransitions=0,a._currentFrame=null,(l=function(){a._animationRaf=window.requestAnimationFrame(l),Date.now()-a._lastFrameAt>a._timeToNext&&function(){a._currentFrame&&a._currentFrame.onComplete&&a._currentFrame.onComplete();var n=a._currentFrame=a._frameQueue.shift();if(n){var i=n.name?n.name.toString():null;r._fullLayout._currentFrame=i,a._lastFrameAt=Date.now(),a._timeToNext=n.frameOpts.duration,d.transition(r,n.frame.data,n.frame.layout,A.coerceTraceIndices(r,n.frame.traces),n.frameOpts,n.transitionOpts).then(function(){n.onComplete&&n.onComplete()}),r.emit("plotly_animatingframe",{name:i,frame:n.frame,animation:{frame:n.frameOpts,transition:n.transitionOpts}})}else r.emit("plotly_animated"),window.cancelAnimationFrame(a._animationRaf),a._animationRaf=null}()})())}}(g):(r.emit("plotly_animated"),u())})},n.addFrames=function(r,n,i){if(r=l.getGraphDiv(r),null==n)return Promise.resolve();if(!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var a,o,s,u,c=r._transitionData._frames,h=r._transitionData._frameHash;if(!Array.isArray(n))throw Error("addFrames failure: frameList must be an Array of frame definitions"+n);var p=c.length+2*n.length,v=[],g={};for(a=n.length-1;a>=0;a--)if(l.isPlainObject(n[a])){var y=n[a].name,m=(h[y]||g[y]||{}).name,x=n[a].name,b=h[m]||g[m];m&&x&&"number"==typeof x&&b&&L<5&&(L++,l.warn('addFrames: overwriting frame "'+(h[m]||g[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===L&&l.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),g[y]={name:y},v.push({frame:d.supplyFrameDefaults(n[a]),index:i&&void 0!==i[a]&&null!==i[a]?i[a]:p+a})}v.sort(function(r,n){return r.index>n.index?-1:r.index<n.index?1:0});var _=[],w=[],T=c.length;for(a=v.length-1;a>=0;a--){if("number"==typeof(o=v[a].frame).name&&l.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!o.name)for(;h[o.name="frame "+r._transitionData._counter++];);if(h[o.name]){for(s=0;s<c.length&&(c[s]||{}).name!==o.name;s++);_.push({type:"replace",index:s,value:o}),w.unshift({type:"replace",index:s,value:c[s]})}else u=Math.max(0,Math.min(v[a].index,T)),_.push({type:"insert",index:u,value:o}),w.unshift({type:"delete",index:u}),T++}var k=d.modifyFrames,A=d.modifyFrames,M=[r,w],S=[r,_];return f&&f.add(r,k,M,A,S),d.modifyFrames(r,_)},n.deleteFrames=function(r,n){if(r=l.getGraphDiv(r),!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r);var i,a,o=r._transitionData._frames,s=[],u=[];if(!n)for(n=[],i=0;i<o.length;i++)n.push(i);for((n=n.slice()).sort(),i=n.length-1;i>=0;i--)a=n[i],s.push({type:"delete",index:a}),u.unshift({type:"insert",index:a,value:o[a]});var c=d.modifyFrames,h=d.modifyFrames,p=[r,u],v=[r,s];return f&&f.add(r,c,p,h,v),d.modifyFrames(r,s)},n.addTraces=function r(i,a,o){i=l.getGraphDiv(i);var s,u,c=[],h=n.deleteTraces,p=r,d=[i,c],v=[i,a];for(function(r,n,i){var a,o;if(!Array.isArray(r.data))throw Error("gd.data must be an array.");if(void 0===n)throw Error("traces must be defined.");for(Array.isArray(n)||(n=[n]),a=0;a<n.length;a++)if("object"!=typeof(o=n[a])||Array.isArray(o)||null===o)throw Error("all values in traces array must be non-array objects");if(void 0===i||Array.isArray(i)||(i=[i]),void 0!==i&&i.length!==n.length)throw Error("if indices is specified, traces.length must equal indices.length")}(i,a,o),Array.isArray(a)||(a=[a]),a=a.map(function(r){return l.extendFlat({},r)}),A.cleanData(a),s=0;s<a.length;s++)i.data.push(a[s]);for(s=0;s<a.length;s++)c.push(-a.length+s);if(void 0===o)return u=n.redraw(i),f.add(i,h,d,p,v),u;Array.isArray(o)||(o=[o]);try{R(i,c,o)}catch(r){throw i.data.splice(i.data.length-a.length,a.length),r}return f.startSequence(i),f.add(i,h,d,p,v),u=n.moveTraces(i,c,o),f.stopSequence(i),u},n.deleteTraces=function r(i,a){i=l.getGraphDiv(i);var o,s,u=[],c=n.addTraces,h=r,p=[i,u,a],d=[i,a];if(void 0===a)throw Error("indices must be an integer or array of integers.");for(Array.isArray(a)||(a=[a]),z(i,a,"indices"),(a=D(a,i.data.length-1)).sort(l.sorterDes),o=0;o<a.length;o+=1)s=i.data.splice(a[o],1)[0],u.push(s);var v=n.redraw(i);return f.add(i,c,p,h,d),v},n.extendTraces=function r(i,a,o,s){var u=F(i=l.getGraphDiv(i),a,o,s,function(r,n,i){var a,o;if(l.isTypedArray(r)){if(i<0){var s=new r.constructor(0),u=B(r,n);i<0?(a=u,o=s):(a=s,o=u)}else if(a=new r.constructor(i),o=new r.constructor(r.length+n.length-i),i===n.length)a.set(n),o.set(r);else if(i<n.length){var c=n.length-i;a.set(n.subarray(c)),o.set(r),o.set(n.subarray(0,c),r.length)}else{var f=i-n.length,h=r.length-f;a.set(r.subarray(h)),a.set(n,f),o.set(r.subarray(0,h))}}else a=r.concat(n),o=i>=0&&i<a.length?a.splice(0,a.length-i):[];return[a,o]}),c=n.redraw(i),h=[i,u.update,o,u.maxPoints];return f.add(i,n.prependTraces,h,r,arguments),c},n.moveTraces=function r(i,a,o){var s,u=[],c=[],h=r,p=r,d=[i=l.getGraphDiv(i),o,a],v=[i,a,o];if(R(i,a,o),a=Array.isArray(a)?a:[a],void 0===o)for(o=[],s=0;s<a.length;s++)o.push(-a.length+s);for(o=Array.isArray(o)?o:[o],a=D(a,i.data.length-1),o=D(o,i.data.length-1),s=0;s<i.data.length;s++)-1===a.indexOf(s)&&u.push(i.data[s]);for(s=0;s<a.length;s++)c.push({newIndex:o[s],trace:i.data[a[s]]});for(c.sort(function(r,n){return r.newIndex-n.newIndex}),s=0;s<c.length;s+=1)u.splice(c[s].newIndex,0,c[s].trace);i.data=u;var g=n.redraw(i);return f.add(i,h,d,p,v),g},n.prependTraces=function r(i,a,o,s){var u=F(i=l.getGraphDiv(i),a,o,s,function(r,n,i){var a,o;if(l.isTypedArray(r)){if(i<=0){var s=new r.constructor(0),u=B(n,r);i<0?(a=u,o=s):(a=s,o=u)}else if(a=new r.constructor(i),o=new r.constructor(r.length+n.length-i),i===n.length)a.set(n),o.set(r);else if(i<n.length){var c=n.length-i;a.set(n.subarray(0,c)),o.set(n.subarray(c)),o.set(r,c)}else{var f=i-n.length;a.set(n),a.set(r.subarray(0,f),n.length),o.set(r.subarray(f))}}else a=n.concat(r),o=i>=0&&i<a.length?a.splice(i,a.length):[];return[a,o]}),c=n.redraw(i),h=[i,u.update,o,u.maxPoints];return f.add(i,n.extendTraces,h,r,arguments),c},n.newPlot=function(r,i,a,o){return r=l.getGraphDiv(r),d.cleanPlot([],{},r._fullData||[],r._fullLayout||{}),d.purge(r),n._doPlot(r,i,a,o)},n._doPlot=function(r,i,o,s){if(r=l.getGraphDiv(r),c.init(r),l.isPlainObject(i)){var u,f=i;i=f.data,o=f.layout,s=f.config,u=f.frames}if(!1===c.triggerHandler(r,"plotly_beforeplot",[i,o,s]))return Promise.reject();i||o||l.isPlotDiv(r)||l.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",r),I(r,s),o||(o={}),a.select(r).classed("js-plotly-plot",!0),m.makeTester(),Array.isArray(r._promises)||(r._promises=[]);var p=0===(r.data||[]).length&&Array.isArray(i);Array.isArray(i)&&(A.cleanData(i),p?r.data=i:r.data.push.apply(r.data,i),r.empty=!1),r.layout&&!p||(r.layout=A.cleanLayout(o)),d.supplyDefaults(r);var g=r._fullLayout,y=g._has("cartesian");g._replotting=!0,(p||g._shouldCreateBgLayer)&&(function(r){var n=a.select(r),i=r._fullLayout;if(i._calcInverseTransform=ts,i._calcInverseTransform(r),i._container=n.selectAll(".plot-container").data([0]),i._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),i._paperdiv=i._container.selectAll(".svg-container").data([0]),i._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),i._glcontainer=i._paperdiv.selectAll(".gl-container").data([{}]),i._glcontainer.enter().append("div").classed("gl-container",!0),i._paperdiv.selectAll(".main-svg").remove(),i._paperdiv.select(".modebar-container").remove(),i._paper=i._paperdiv.insert("svg",":first-child").classed("main-svg",!0),i._toppaper=i._paperdiv.append("svg").classed("main-svg",!0),i._modebardiv=i._paperdiv.append("div"),delete i._modeBar,i._hoverpaper=i._paperdiv.append("svg").classed("main-svg",!0),!i._uid){var o={};a.selectAll("defs").each(function(){this.id&&(o[this.id.split("-")[1]]=1)}),i._uid=l.randstr(o)}i._paperdiv.selectAll(".main-svg").attr(_.svgAttrs),i._defs=i._paper.append("defs").attr("id","defs-"+i._uid),i._clips=i._defs.append("g").classed("clips",!0),i._topdefs=i._toppaper.append("defs").attr("id","topdefs-"+i._uid),i._topclips=i._topdefs.append("g").classed("clips",!0),i._bgLayer=i._paper.append("g").classed("bglayer",!0),i._draggers=i._paper.append("g").classed("draglayer",!0);var s=i._paper.append("g").classed("layer-below",!0);i._imageLowerLayer=s.append("g").classed("imagelayer",!0),i._shapeLowerLayer=s.append("g").classed("shapelayer",!0),i._cartesianlayer=i._paper.append("g").classed("cartesianlayer",!0),i._polarlayer=i._paper.append("g").classed("polarlayer",!0),i._smithlayer=i._paper.append("g").classed("smithlayer",!0),i._ternarylayer=i._paper.append("g").classed("ternarylayer",!0),i._geolayer=i._paper.append("g").classed("geolayer",!0),i._funnelarealayer=i._paper.append("g").classed("funnelarealayer",!0),i._pielayer=i._paper.append("g").classed("pielayer",!0),i._iciclelayer=i._paper.append("g").classed("iciclelayer",!0),i._treemaplayer=i._paper.append("g").classed("treemaplayer",!0),i._sunburstlayer=i._paper.append("g").classed("sunburstlayer",!0),i._indicatorlayer=i._toppaper.append("g").classed("indicatorlayer",!0),i._glimages=i._paper.append("g").classed("glimages",!0);var u=i._toppaper.append("g").classed("layer-above",!0);i._imageUpperLayer=u.append("g").classed("imagelayer",!0),i._shapeUpperLayer=u.append("g").classed("shapelayer",!0),i._selectionLayer=i._toppaper.append("g").classed("selectionlayer",!0),i._infolayer=i._toppaper.append("g").classed("infolayer",!0),i._menulayer=i._toppaper.append("g").classed("menulayer",!0),i._zoomlayer=i._toppaper.append("g").classed("zoomlayer",!0),i._hoverlayer=i._hoverpaper.append("g").classed("hoverlayer",!0),i._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),r.emit("plotly_framework")}(r),g._shouldCreateBgLayer&&delete g._shouldCreateBgLayer),m.initGradients(r),m.initPatterns(r),p&&v.saveShowSpikeInitial(r);var x=!r.calcdata||r.calcdata.length!==(r._fullData||[]).length;x&&d.doCalcdata(r);for(var w=0;w<r.calcdata.length;w++)r.calcdata[w][0].trace=r._fullData[w];r._context.responsive?r._responsiveChartHandler||(r._responsiveChartHandler=function(){l.isHidden(r)||d.resize(r)},window.addEventListener("resize",r._responsiveChartHandler)):l.clearResponsive(r);var T=l.extendFlat({},g._size),k=0;function S(){if(d.clearAutoMarginIds(r),M.drawMarginPushers(r),v.allowAutoMargin(r),r._fullLayout.title.text&&r._fullLayout.title.automargin&&d.allowAutoMargin(r,"title.automargin"),g._has("pie"))for(var n=r._fullData,i=0;i<n.length;i++){var a=n[i];"pie"===a.type&&a.automargin&&d.allowAutoMargin(r,"pie."+a.uid+".automargin")}return d.doAutoMargin(r),d.previousPromises(r)}function E(){r._transitioning||(M.doAutoRangeAndConstraints(r),p&&v.saveRangeInitial(r),h.getComponentMethod("rangeslider","calcAutorange")(r))}var L=[d.previousPromises,function(){if(u)return n.addFrames(r,u)},function n(){for(var i=g._basePlotModules,a=0;a<i.length;a++)i[a].drawFramework&&i[a].drawFramework(r);!g._glcanvas&&g._has("gl")&&(g._glcanvas=g._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(r){return r.key}),g._glcanvas.enter().append("canvas").attr("class",function(r){return"gl-canvas gl-canvas-"+r.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var o=r._context.plotGlPixelRatio;if(g._glcanvas){g._glcanvas.attr("width",g.width*o).attr("height",g.height*o).style("width",g.width+"px").style("height",g.height+"px");var s=g._glcanvas.data()[0].regl;if(s&&(Math.floor(g.width*o)!==s._gl.drawingBufferWidth||Math.floor(g.height*o)!==s._gl.drawingBufferHeight)){var u="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!k)return l.log(u+" Clearing graph and plotting again."),d.cleanPlot([],{},r._fullData,g),d.supplyDefaults(r),g=r._fullLayout,d.doCalcdata(r),k++,n();l.error(u)}}return"h"===g.modebar.orientation?g._modebardiv.style("height",null).style("width","100%"):g._modebardiv.style("width",null).style("height",g.height+"px"),d.previousPromises(r)},S,function(){if(d.didMarginChange(T,g._size))return l.syncOrAsync([S,M.layoutStyles],r)}];y&&L.push(function(){if(x)return l.syncOrAsync([h.getComponentMethod("shapes","calcAutorange"),h.getComponentMethod("annotations","calcAutorange"),E],r);E()}),L.push(M.layoutStyles),y&&L.push(function(){return v.draw(r,p?"":"redraw")},function(r){var n=r._fullLayout._insideTickLabelsUpdaterange;if(n)return r._fullLayout._insideTickLabelsUpdaterange=void 0,G(r,n).then(function(){v.saveRangeInitial(r,!0)})}),L.push(M.drawData,M.finalDraw,b,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,d.previousPromises);var O=l.syncOrAsync(L,r);return O&&O.then||(O=Promise.resolve()),O.then(function(){return C(r),r})},n.purge=function(r){var n=(r=l.getGraphDiv(r))._fullLayout||{},i=r._fullData||[];return d.cleanPlot([],{},i,n),d.purge(r),c.purge(r),n._container&&n._container.remove(),delete r._context,r},n.react=function(r,i,a,o){r=l.getGraphDiv(r),A.clearPromiseQueue(r);var s,c,f=r._fullData,v=r._fullLayout;if(l.isPlotDiv(r)&&f&&v){if(l.isPlainObject(i)){var g,y,m=i;i=m.data,a=m.layout,o=m.config,s=m.frames}var x=!1;if(o){var b=l.extendDeep({},r._context);r._context=void 0,I(r,o),x=function r(n,i){var a;for(a in n)if("_"!==a.charAt(0)){var o=n[a],s=i[a];if(o!==s){if(l.isPlainObject(o)&&l.isPlainObject(s)){if(r(o,s))return!0}else{if(!Array.isArray(o)||!Array.isArray(s)||o.length!==s.length)return!0;for(var u=0;u<o.length;u++)if(o[u]!==s[u]&&(!l.isPlainObject(o[u])||!l.isPlainObject(s[u])||r(o[u],s[u])))return!0}}}}(b,r._context)}r.data=i||[],A.cleanData(r.data),r.layout=a||{},A.cleanLayout(r.layout),function(r,n,i,a){var o,s,c,f,h,p,d,v,g,y,m=a._preGUI,x=[],b={},_={};for(o in m){if(h=tn(o,te)){if(g=h.head,y=h.tail,(f=(c=u(a,s=h.attr||g+".uirevision").get())&&ti(s,n))&&f===c){if(null===(p=m[o])&&(p=void 0),ta(v=(d=u(n,o)).get(),p)){void 0===v&&"autorange"===y&&x.push(g),d.set(j(u(a,o).get()));continue}if("autorange"===y||"range["===y.substr(0,6)){var w=m[g+".range[0]"],T=m[g+".range[1]"],k=m[g+".autorange"];if(k||null===k&&null===w&&null===T){if(!(g in b)){var A=u(n,g).get();b[g]=A&&(A.autorange||!1!==A.autorange&&(!A.range||2!==A.range.length))}if(b[g]){d.set(j(u(a,o).get()));continue}}}}}else l.warn("unrecognized GUI edit: "+o);delete m[o],h&&"range["===h.tail.substr(0,6)&&(_[h.head]=1)}for(var M=0;M<x.length;M++){var S=x[M];if(_[S]){var E=u(n,S).get();E&&delete E.autorange}}var L=a._tracePreGUI;for(var C in L){var O,P=L[C],I=null;for(o in P){if(!I){var D=function(r,n){for(var i=0;i<n.length;i++)if(n[i]._fullInput.uid===r)return i;return -1}(C,i);if(D<0){delete L[C];break}var z=function(r,n,i){for(var a=0;a<n.length;a++)if(n[a].uid===r)return a;return!n[i]||n[i].uid?-1:i}(C,r,(O=i[D]._fullInput).index);if(z<0){delete L[C];break}I=r[z]}if(h=tn(o,tr)){if(h.attr?f=(c=u(a,h.attr).get())&&ti(h.attr,n):(c=O.uirevision,void 0===(f=I.uirevision)&&(f=n.uirevision)),f&&f===c&&(null===(p=P[o])&&(p=void 0),ta(v=(d=u(I,o)).get(),p))){d.set(j(u(O,o).get()));continue}}else l.warn("unrecognized GUI edit: "+o+" in trace uid "+C);delete P[o]}}}(r.data,r.layout,f,v),d.supplyDefaults(r,{skipUpdateCalc:!0});var _=r._fullData,w=r._fullLayout,T=void 0===w.datarevision,k=w.transition,E=(g=r,(y=S.layoutFlags()).arrays={},y.rangesAltered={},y.nChanges=0,y.nChangesAnim=0,to(v,w,[],{getValObject:function(r){return p.getLayoutValObject(w,r)},flags:y,immutable:T,transition:k,gd:g}),(y.plot||y.calc)&&(y.layoutReplot=!0),k&&y.nChanges&&y.nChangesAnim&&(y.anim=y.nChanges===y.nChangesAnim?"all":"some"),y),L=E.newDataRevision,O=function(r,n,i,a,o,s){var l=n.length===i.length;if(!o&&!l)return{fullReplot:!0,calc:!0};var u,c,f=S.traceFlags();f.arrays={},f.nChanges=0,f.nChangesAnim=0;var h={getValObject:function(r){var n=p.getTraceValObject(c,r);return!c._module.animatable&&n.anim&&(n.anim=!1),n},flags:f,immutable:a,transition:o,newDataRevision:s,gd:r},v={};for(u=0;u<n.length;u++)if(i[u]){if(c=i[u]._fullInput,d.hasMakesDataTransform(c)&&(c=i[u]),v[c.uid])continue;v[c.uid]=1,to(n[u]._fullInput,c,[],h)}return(f.calc||f.plot)&&(f.fullReplot=!0),o&&f.nChanges&&f.nChangesAnim&&(f.anim=f.nChanges===f.nChangesAnim&&l?"all":"some"),f}(r,f,_,T,k,L);if($(r)&&(E.layoutReplot=!0),O.calc||E.calc){r.calcdata=void 0;for(var P=Object.getOwnPropertyNames(w),D=0;D<P.length;D++){var z=P[D],R=z.substring(0,5);if("xaxis"===R||"yaxis"===R){var F=w[z]._emptyCategories;F&&F()}}}else d.supplyDefaultsUpdateCalc(r.calcdata,_);var B=[];if(s&&(r._transitionData={},d.createTransitionData(r),B.push(function(){return n.addFrames(r,s)})),w.transition&&!x&&(O.anim||E.anim))E.ticks&&B.push(M.doTicksRelayout),d.doCalcdata(r),M.doAutoRangeAndConstraints(r),B.push(function(){return d.transitionFromReact(r,O,E,v)});else if(O.fullReplot||E.layoutReplot||x)r._fullLayout._skipDefaults=!0,B.push(n._doPlot);else{for(var N in E.arrays){var U=E.arrays[N];if(U.length){var V=h.getComponentMethod(N,"drawOne");if(V!==l.noop)for(var H=0;H<U.length;H++)V(r,U[H]);else{var q=h.getComponentMethod(N,"draw");if(q===l.noop)throw Error("cannot draw components: "+N);q(r)}}}B.push(d.previousPromises),O.style&&B.push(M.doTraceStyle),(O.colorbars||E.colorbars)&&B.push(M.doColorBars),E.legend&&B.push(M.doLegend),E.layoutstyle&&B.push(M.layoutStyles),E.axrange&&Y(B),E.ticks&&B.push(M.doTicksRelayout),E.modebar&&B.push(M.doModeBar),E.camera&&B.push(M.doCamera),B.push(C)}B.push(d.rehover,d.redrag,d.reselect),(c=l.syncOrAsync(B,r))&&c.then||(c=Promise.resolve(r))}else c=n.newPlot(r,i,a,o);return c.then(function(){return r.emit("plotly_react",{data:i,layout:a}),r})},n.redraw=function(r){if(r=l.getGraphDiv(r),!l.isPlotDiv(r))throw Error("This element is not a Plotly plot: "+r);return A.cleanData(r.data),A.cleanLayout(r.layout),r.calcdata=void 0,n._doPlot(r).then(function(){return r.emit("plotly_redraw"),r})},n.relayout=G,n.restyle=N,n.setPlotConfig=function(r){return l.extendFlat(T,r)},n.update=Q,n._guiRelayout=tt(G),n._guiRestyle=tt(N),n._guiUpdate=tt(Q),n._storeDirectGUIEdit=function(r,n,i){for(var a in i)V(a,u(r,a).get(),i[a],n)}},72075:function(r){"use strict";var n={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};(function r(n,i){for(var a in n){var o=n[a];o.valType?i[a]=o.dflt:(i[a]||(i[a]={}),r(o,i[a]))}})(n,i),r.exports={configAttributes:n,dfltConfig:i}},86281:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(9012),l=i(10820),u=i(31391),c=i(85594),f=i(72075).configAttributes,h=i(30962),p=o.extendDeepAll,d=o.isPlainObject,v=o.isArrayOrTypedArray,g=o.nestedProperty,y=o.valObjectMeta,m="_isSubplotObj",x="_isLinkedToArray",b="_deprecated",_=[m,x,"_arrayAttrRegexps",b];function w(r,n,i){if(!r)return!1;if(r._isLinkedToArray){if(T(n[i]))i++;else if(i<n.length)return!1}for(;i<n.length;i++){var a=r[n[i]];if(!d(a)||(r=a,i===n.length-1))break;if(r._isLinkedToArray){if(!T(n[++i]))return!1}else if("info_array"===r.valType){var o=n[++i];if(!T(o))return!1;var s=r.items;if(Array.isArray(s)){if(o>=s.length)return!1;if(2===r.dimensions){if(i++,n.length===i)return r;var l=n[i];if(!T(l))return!1;r=s[o][l]}else r=s[o]}else r=s}}return r}function T(r){return r===Math.round(r)&&r>=0}function k(r){return n.crawl(r,function(r,i,a){n.isValObject(r)?!0!==r.arrayOk&&"data_array"!==r.valType||(a[i+"src"]={valType:"string",editType:"none"}):d(r)&&(r.role="object")}),n.crawl(r,function(r,n,i){if(r){var a=r[x];a&&(delete r[x],i[n]={items:{}},i[n].items[a]=r,i[n].role="object")}}),function r(n){for(var i in n)if(d(n[i]))r(n[i]);else if(Array.isArray(n[i]))for(var a=0;a<n[i].length;a++)r(n[i][a]);else n[i]instanceof RegExp&&(n[i]=n[i].toString())}(r),r}function A(r,n,i){var a=g(r,i),o=p({},n.layoutAttributes);o[m]=!0,a.set(o)}function M(r,n,i){var a=g(r,i);a.set(p(a.get()||{},n))}n.IS_SUBPLOT_OBJ=m,n.IS_LINKED_TO_ARRAY=x,n.DEPRECATED=b,n.UNDERSCORE_ATTRS=_,n.get=function(){var r={};a.allTypes.forEach(function(i){r[i]=function(r){o=(i=a.modules[r]._module).basePlotModule;var i,o,l={type:null},u=p({},s),c=p({},i.attributes);n.crawl(c,function(r,n,i,a,o){g(u,o).set(void 0),void 0===r&&g(c,o).set(void 0)}),p(l,u),a.traceIs(r,"noOpacity")&&delete l.opacity,a.traceIs(r,"showLegend")||(delete l.showlegend,delete l.legendgroup),a.traceIs(r,"noHover")&&(delete l.hoverinfo,delete l.hoverlabel),i.selectPoints||delete l.selectedpoints,p(l,c),o.attributes&&p(l,o.attributes),l.type=r;var f={meta:i.meta||{},categories:i.categories||{},animatable:!!i.animatable,type:r,attributes:k(l)};if(i.layoutAttributes){var h={};p(h,i.layoutAttributes),f.layoutAttributes=k(h)}return i.animatable||n.crawl(f,function(r){n.isValObject(r)&&"anim"in r&&delete r.anim}),f}(i)});var i,o={};return Object.keys(a.transformsRegistry).forEach(function(r){var n;o[r]=(n=p({},a.transformsRegistry[r].attributes),Object.keys(a.componentsRegistry).forEach(function(i){var o=a.componentsRegistry[i];o.schema&&o.schema.transforms&&o.schema.transforms[r]&&Object.keys(o.schema.transforms[r]).forEach(function(i){M(n,o.schema.transforms[r][i],i)})}),{attributes:k(n)})}),{defs:{valObjects:y,metaKeys:_.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:r,layout:function(){var r,n,i={};for(r in p(i,l),a.subplotsRegistry)if((n=a.subplotsRegistry[r]).layoutAttributes){if(Array.isArray(n.attr))for(var o=0;o<n.attr.length;o++)A(i,n,n.attr[o]);else A(i,n,"subplot"===n.attr?n.name:n.attr)}for(r in a.componentsRegistry){var s=(n=a.componentsRegistry[r]).schema;if(s&&(s.subplots||s.layout)){var u=s.subplots;if(u&&u.xaxis&&!u.yaxis)for(var c in u.xaxis)delete i.yaxis[c];delete i.xaxis.shift,delete i.xaxis.autoshift}else"colorscale"===n.name?p(i,n.layoutAttributes):n.layoutAttributes&&M(i,n.layoutAttributes,n.name)}return{layoutAttributes:k(i)}}(),transforms:o,frames:(k(i={frames:p({},u)}),i.frames),animation:k(c),config:k(f)}},n.crawl=function(r,i,a,o){var s=a||0;o=o||"",Object.keys(r).forEach(function(a){var l=r[a];if(-1===_.indexOf(a)){var u=(o?o+".":"")+a;i(l,a,r,s,u),n.isValObject(l)||d(l)&&"impliedEdits"!==a&&n.crawl(l,i,s+1,u)}})},n.isValObject=function(r){return r&&void 0!==r.valType},n.findArrayAttributes=function(r){var i,a,o=[],l=[],u=[];function c(r,n,s,c){l=l.slice(0,c).concat([n]),u=u.slice(0,c).concat([r&&r._isLinkedToArray]),r&&("data_array"===r.valType||!0===r.arrayOk)&&("colorbar"!==l[c-1]||"ticktext"!==n&&"tickvals"!==n)&&function r(n,i,s){var c=n[l[i]],f=s+l[i];if(i===l.length-1)v(c)&&o.push(a+f);else if(u[i]){if(Array.isArray(c))for(var h=0;h<c.length;h++)d(c[h])&&r(c[h],i+1,f+"["+h+"].")}else d(c)&&r(c,i+1,f+".")}(i,0,"")}i=r,a="",n.crawl(s,c),r._module&&r._module.attributes&&n.crawl(r._module.attributes,c);var f=r.transforms;if(f)for(var h=0;h<f.length;h++){var p=f[h],g=p._module;g&&(a="transforms["+h+"].",i=p,n.crawl(g.attributes,c))}return o},n.getTraceValObject=function(r,n){var i,o,l=n[0],u=1;if("transforms"===l){if(1===n.length)return s.transforms;var c=r.transforms;if(!Array.isArray(c)||!c.length)return!1;var f=n[1];if(!T(f)||f>=c.length)return!1;o=(i=(a.transformsRegistry[c[f].type]||{}).attributes)&&i[n[2]],u=3}else{var h=r._module;if(h||(h=(a.modules[r.type||s.type.dflt]||{})._module),!h)return!1;if(!(o=(i=h.attributes)&&i[l])){var p=h.basePlotModule;p&&p.attributes&&(o=p.attributes[l])}o||(o=s[l])}return w(o,n,u)},n.getLayoutValObject=function(r,n){return w(function(r,n){var i,o,s,u,c,f=r._basePlotModules;if(f){for(o=0;o<f.length;o++){if((u=f[o]).attrRegex&&u.attrRegex.test(n)){if(u.layoutAttrOverrides)return u.layoutAttrOverrides;!i&&u.layoutAttributes&&(i=u.layoutAttributes)}var h=u.baseLayoutAttrOverrides;if(h&&n in h)return h[n]}if(i)return i}var p=r._modules;if(p){for(o=0;o<p.length;o++)if((c=p[o].layoutAttributes)&&n in c)return c[n]}for(s in a.componentsRegistry){if("colorscale"===(u=a.componentsRegistry[s]).name&&0===n.indexOf("coloraxis"))return u.layoutAttributes[n];if(!u.schema&&n===u.name)return u.layoutAttributes}return n in l&&l[n]}(r,n[0]),n,1)}},44467:function(r,n,i){"use strict";var a=i(71828),o=i(9012),s="templateitemname",l={name:{valType:"string",editType:"none"}};function u(r){return r&&"string"==typeof r}function c(r){var n=r.length-1;return"s"!==r.charAt(n)&&a.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}l[s]={valType:"string",editType:"calc"},n.templatedArray=function(r,n){return n._isLinkedToArray=r,n.name=l.name,n[s]=l[s],n},n.traceTemplater=function(r){var n,i,s={};for(n in r)Array.isArray(i=r[n])&&i.length&&(s[n]=0);return{newTrace:function(l){var u={type:n=a.coerce(l,{},o,"type"),_template:null};if(n in s){i=r[n];var c=s[n]%i.length;s[n]++,u._template=i[c]}return u}}},n.newContainer=function(r,n,i){var o=r._template,s=o&&(o[n]||i&&o[i]);return a.isPlainObject(s)||(s=null),r[n]={_template:s}},n.arrayTemplater=function(r,n,i){var a=r._template,o=a&&a[c(n)],l=a&&a[n];Array.isArray(l)&&l.length||(l=[]);var f={};return{newItem:function(r){var n={name:r.name,_input:r},a=n[s]=r[s];if(!u(a))return n._template=o,n;for(var c=0;c<l.length;c++){var h=l[c];if(h.name===a)return f[a]=1,n._template=h,n}return n[i]=r[i]||!1,n._template=!1,n},defaultItems:function(){for(var r=[],n=0;n<l.length;n++){var i=l[n],a=i.name;if(u(a)&&!f[a]){var o={_template:i,name:a,_input:{_templateitemname:a}};o[s]=i[s],r.push(o),f[a]=1}}return r}}},n.arrayDefaultKey=c,n.arrayEditor=function(r,n,i){var o=(a.nestedProperty(r,n).get()||[]).length,l=i._index,u=l>=o&&(i._input||{})._templateitemname;u&&(l=o);var c,f=n+"["+l+"]";function h(){c={},u&&(c[f]={},c[f][s]=u)}function p(r,n){u?a.nestedProperty(c[f],r).set(n):c[f+"."+r]=n}function d(){var r=c;return h(),r}return h(),{modifyBase:function(r,n){c[r]=n},modifyItem:p,getUpdateObj:d,applyUpdate:function(n,i){n&&p(n,i);var o=d();for(var s in o)a.nestedProperty(r,s).set(o[s])}}}},61549:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(74875),l=i(71828),u=i(63893),c=i(33306),f=i(7901),h=i(91424),p=i(92998),d=i(64168),v=i(89298),g=i(18783),y=i(99082),m=y.enforce,x=y.clean,b=i(71739).doAutoRange,_="start";function w(r){var i,o,u,c,p,y,m=r._fullLayout,x=m._size,b=x.p,_=v.list(r,"",!0);if(m._paperdiv.style({width:r._context.responsive&&m.autosize&&!r._context._hasZeroWidth&&!r.layout.width?"100%":m.width+"px",height:r._context.responsive&&m.autosize&&!r._context._hasZeroHeight&&!r.layout.height?"100%":m.height+"px"}).selectAll(".main-svg").call(h.setSize,m.width,m.height),r._context.setBackground(r,m.paper_bgcolor),n.drawMainTitle(r),d.manage(r),!m._has("cartesian"))return s.previousPromises(r);function w(r,n,i){var a=r._lw/2;return"x"===r._id.charAt(0)?n?"top"===i?n._offset-b-a:n._offset+n._length+b+a:x.t+x.h*(1-(r.position||0))+a%1:n?"right"===i?n._offset+n._length+b+a:n._offset-b-a:x.l+x.w*(r.position||0)+a%1}for(i=0;i<_.length;i++){var k=(c=_[i])._anchorAxis;c._linepositions={},c._lw=h.crispRound(r,c.linewidth,1),c._mainLinePosition=w(c,k,c.side),c._mainMirrorPosition=c.mirror&&k?w(c,k,g.OPPOSITE_SIDE[c.side]):null}var M=[],S=[],E=[],L=1===f.opacity(m.paper_bgcolor)&&1===f.opacity(m.plot_bgcolor)&&m.paper_bgcolor===m.plot_bgcolor;for(o in m._plots)if((u=m._plots[o]).mainplot)u.bg&&u.bg.remove(),u.bg=void 0;else{var C=u.xaxis.domain,O=u.yaxis.domain,P=u.plotgroup;if(function(r,n,i){for(var a=0;a<i.length;a++){var o=i[a][0],s=i[a][1];if(!(o[0]>=r[1]||o[1]<=r[0])&&s[0]<n[1]&&s[1]>n[0])return!0}return!1}(C,O,E)){var I=P.node(),D=u.bg=l.ensureSingle(P,"rect","bg");I.insertBefore(D.node(),I.childNodes[0]),S.push(o)}else P.select("rect.bg").remove(),E.push([C,O]),L||(M.push(o),S.push(o))}var z,R,F,B,N,j,U,V,H,q,G,Z,Y,W=m._bgLayer.selectAll(".bg").data(M);for(W.enter().append("rect").classed("bg",!0),W.exit().remove(),W.each(function(r){m._plots[r].bg=a.select(this)}),i=0;i<S.length;i++)p=(u=m._plots[S[i]]).xaxis,y=u.yaxis,u.bg&&void 0!==p._offset&&void 0!==y._offset&&u.bg.call(h.setRect,p._offset-b,y._offset-b,p._length+2*b,y._length+2*b).call(f.fill,m.plot_bgcolor).style("stroke-width",0);if(!m._hasOnlyLargeSploms)for(o in m._plots){p=(u=m._plots[o]).xaxis,y=u.yaxis;var X,J,K=u.clipId="clip"+m._uid+o+"plot",$=l.ensureSingleById(m._clips,"clipPath",K,function(r){r.classed("plotclip",!0).append("rect")});u.clipRect=$.select("rect").attr({width:p._length,height:y._length}),h.setTranslate(u.plot,p._offset,y._offset),u._hasClipOnAxisFalse?(X=null,J=K):(X=K,J=null),h.setClipUrl(u.plot,X,r),u.layerClipId=J}function Q(r){return"M"+z+","+r+"H"+R}function tt(r){return"M"+p._offset+","+r+"h"+p._length}function te(r){return"M"+r+","+V+"V"+U}function tr(r){return void 0!==y._shift&&(r+=y._shift),"M"+r+","+y._offset+"v"+y._length}function tn(r,n,i){if(!r.showline||o!==r._mainSubplot)return"";if(!r._anchorAxis)return i(r._mainLinePosition);var a=n(r._mainLinePosition);return r.mirror&&(a+=n(r._mainMirrorPosition)),a}for(o in m._plots){p=(u=m._plots[o]).xaxis,y=u.yaxis;var ti="M0,0";T(p,o)&&(N=A(p,"left",y,_),z=p._offset-(N?b+N:0),j=A(p,"right",y,_),R=p._offset+p._length+(j?b+j:0),F=w(p,y,"bottom"),B=w(p,y,"top"),(Y=!p._anchorAxis||o!==p._mainSubplot)&&("allticks"===p.mirror||"all"===p.mirror)&&(p._linepositions[o]=[F,B]),ti=tn(p,Q,tt),Y&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(ti+=Q(F)+Q(B)),u.xlines.style("stroke-width",p._lw+"px").call(f.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),u.xlines.attr("d",ti);var ta="M0,0";T(y,o)&&(G=A(y,"bottom",p,_),U=y._offset+y._length+(G?b:0),Z=A(y,"top",p,_),V=y._offset-(Z?b:0),H=w(y,p,"left"),q=w(y,p,"right"),(Y=!y._anchorAxis||o!==y._mainSubplot)&&("allticks"===y.mirror||"all"===y.mirror)&&(y._linepositions[o]=[H,q]),ta=tn(y,te,tr),Y&&y.showline&&("all"===y.mirror||"allticks"===y.mirror)&&(ta+=te(H)+te(q)),u.ylines.style("stroke-width",y._lw+"px").call(f.stroke,y.showline?y.linecolor:"rgba(0,0,0,0)")),u.ylines.attr("d",ta)}return v.makeClipPaths(r),s.previousPromises(r)}function T(r,n){return(r.ticks||r.showline)&&(n===r._mainSubplot||"all"===r.mirror||"allticks"===r.mirror)}function k(r,n,i){if(!i.showline||!i._lw)return!1;if("all"===i.mirror||"allticks"===i.mirror)return!0;var a=i._anchorAxis;if(!a)return!1;var o=g.FROM_BL[n];return i.side===n?a.domain[o]===r.domain[o]:i.mirror&&a.domain[1-o]===r.domain[1-o]}function A(r,n,i,a){if(k(r,n,i))return i._lw;for(var o=0;o<a.length;o++){var s=a[o];if(s._mainAxis===i._mainAxis&&k(r,n,s))return s._lw}return 0}n.layoutStyles=function(r){return l.syncOrAsync([s.doAutoMargin,w],r)},n.drawMainTitle=function(r){var n,i,o,c,f,d,v,y,m,x,b,w=r._fullLayout.title,T=r._fullLayout,k=(n=T.title,i="middle",l.isRightAnchor(n)?i="end":l.isLeftAnchor(n)&&(i=_),i),A=(o=T.title,c="0em",l.isTopAnchor(o)?c=g.CAP_SHIFT+"em":l.isMiddleAnchor(o)&&(c=g.MID_SHIFT+"em"),c),M=(f=T.title,d=T._size,v=0,"0em"!==A&&A?A===g.CAP_SHIFT+"em"&&(v=f.pad.t):v=-f.pad.b,"auto"===f.y?d.t/2:"paper"===f.yref?d.t+d.h-d.h*f.y+v:T.height-T.height*f.y+v),S=(y=T.title,m=T._size,x=0,k===_?x=y.pad.l:"end"===k&&(x=-y.pad.r),"paper"===y.xref?m.l+m.w*y.x+x:T.width*y.x+x);if(p.draw(r,"gtitle",{propContainer:T,propName:"title.text",placeholder:T._dfltTitle.plot,attributes:{x:S,y:M,"text-anchor":k,dy:A}}),w.text&&w.automargin){var E=a.selectAll(".gtitle"),L=h.bBox(E.node()).height,C=(O=w.y,P=w.yanchor,I=O>.5?"t":"b",D=r._fullLayout.margin[I],z=0,"paper"===w.yref?z=L+w.pad.t+w.pad.b:"container"===w.yref&&(R=r._fullLayout.height,F=0,"middle"===P&&(F+=L/2),"t"===I?("top"===P&&(F+=L),F+=R-O*R):("bottom"===P&&(F+=L),F+=O*R),z=F+w.pad.t+w.pad.b),z>D?z:0);if(C>0){B="title.automargin",j=(N=r._fullLayout.title).y>.5?"t":"b",U={x:N.x,y:N.y,t:0,b:0},V={},"paper"===N.yref&&(H="paper"===N.yref?r._fullLayout._size.h:r._fullLayout.height,q=l.isTopAnchor(N)?M:M-L,!(l.isTopAnchor(N)&&"t"===j||l.isBottomAnchor(N)&&"b"===j)&&("b"===j?H-q:q)<L)?U[j]=C:"container"===N.yref&&(V[j]=C,r._fullLayout._reservedMargin[B]=V),s.allowAutoMargin(r,B),s.autoMargin(r,B,U),E.attr({x:S,y:M,"text-anchor":k,dy:"top"===(b=w.yanchor)?g.CAP_SHIFT+.3+"em":"bottom"===b?"-0.3em":g.MID_SHIFT+"em"}).call(u.positionText,S,M);var O,P,I,D,z,R,F,B,N,j,U,V,H,q,G=(w.text.match(u.BR_TAG_ALL)||[]).length;if(G){var Z=g.LINE_SPACING*G+g.MID_SHIFT;0===w.y&&(Z=-Z),E.selectAll(".line").each(function(){var r=+this.getAttribute("dy").slice(0,-2)-Z+"em";this.setAttribute("dy",r)})}}}},n.doTraceStyle=function(r){var i,a=r.calcdata,l=[];for(i=0;i<a.length;i++){var u=a[i],f=u[0]||{},h=f.trace||{},p=h._module||{},d=p.arraysToCalcdata;d&&d(u,h);var v=p.editStyle;v&&l.push({fn:v,cd0:f})}if(l.length){for(i=0;i<l.length;i++){var g=l[i];g.fn(r,g.cd0)}c(r),n.redrawReglTraces(r)}return s.style(r),o.getComponentMethod("legend","draw")(r),s.previousPromises(r)},n.doColorBars=function(r){return o.getComponentMethod("colorbar","draw")(r),s.previousPromises(r)},n.layoutReplot=function(r){var n=r.layout;return r.layout=void 0,o.call("_doPlot",r,"",n)},n.doLegend=function(r){return o.getComponentMethod("legend","draw")(r),s.previousPromises(r)},n.doTicksRelayout=function(r){return v.draw(r,"redraw"),r._fullLayout._hasOnlyLargeSploms&&(o.subplotsRegistry.splom.updateGrid(r),c(r),n.redrawReglTraces(r)),n.drawMainTitle(r),s.previousPromises(r)},n.doModeBar=function(r){var n=r._fullLayout;d.manage(r);for(var i=0;i<n._basePlotModules.length;i++){var a=n._basePlotModules[i].updateFx;a&&a(r)}return s.previousPromises(r)},n.doCamera=function(r){for(var n=r._fullLayout,i=n._subplots.gl3d,a=0;a<i.length;a++){var o=n[i[a]];o._scene.setViewport(o)}},n.drawData=function(r){var i=r._fullLayout;c(r);for(var a=i._basePlotModules,l=0;l<a.length;l++)a[l].plot(r);return n.redrawReglTraces(r),s.style(r),o.getComponentMethod("selections","draw")(r),o.getComponentMethod("shapes","draw")(r),o.getComponentMethod("annotations","draw")(r),o.getComponentMethod("images","draw")(r),i._replotting=!1,s.previousPromises(r)},n.redrawReglTraces=function(r){var n=r._fullLayout;if(n._has("regl")){var i,a,o=r._fullData,s=[],u=[];for(n._hasOnlyLargeSploms&&n._splomGrid.draw(),i=0;i<o.length;i++){var c=o[i];!0===c.visible&&0!==c._length&&("splom"===c.type?n._splomScenes[c.uid].draw():"scattergl"===c.type?l.pushUnique(s,c.xaxis+c.yaxis):"scatterpolargl"===c.type&&l.pushUnique(u,c.subplot))}for(i=0;i<s.length;i++)(a=n._plots[s[i]])._scene&&a._scene.draw();for(i=0;i<u.length;i++)(a=n[u[i]]._subplot)._scene&&a._scene.draw()}},n.doAutoRangeAndConstraints=function(r){for(var n,i=v.list(r,"",!0),a={},o=0;o<i.length;o++)if(!a[(n=i[o])._id]){a[n._id]=1,x(r,n),b(r,n);var s=n._matchGroup;if(s)for(var l in s){var u=v.getFromId(r,l);b(r,u,n.range),a[l]=1}}m(r)},n.finalDraw=function(r){o.getComponentMethod("rangeslider","draw")(r),o.getComponentMethod("rangeselector","draw")(r)},n.drawMarginPushers=function(r){o.getComponentMethod("legend","draw")(r),o.getComponentMethod("rangeselector","draw")(r),o.getComponentMethod("sliders","draw")(r),o.getComponentMethod("updatemenus","draw")(r),o.getComponentMethod("colorbar","draw")(r)}},96318:function(r,n,i){"use strict";var a=i(71828),o=a.isPlainObject,s=i(86281),l=i(74875),u=i(9012),c=i(44467),f=i(72075).dfltConfig;function h(r,n){var i,s,l=Object.keys(r=a.extendDeep({},r)).sort();function u(n,i,a){if(o(i)&&o(n))h(n,i);else if(Array.isArray(i)&&Array.isArray(n)){var l=c.arrayTemplater({_template:r},a);for(s=0;s<i.length;s++){var u=i[s],f=l.newItem(u)._template;f&&h(f,u)}var p=l.defaultItems();for(s=0;s<p.length;s++)i.push(p[s]._template);for(s=0;s<i.length;s++)delete i[s].templateitemname}}for(i=0;i<l.length;i++){var f=l[i],d=r[f];if(f in n?u(d,n[f],f):n[f]=d,p(f)===f)for(var v in n){var g=p(v);v===g||g!==f||v in r||u(d,n[v],f)}}}function p(r){return r.replace(/[0-9]+$/,"")}function d(r,n,i,s,l){var u=l&&i(l);for(var f in r){var h=r[f],v=y(r,f,s),g=y(r,f,l),m=i(g);if(!m){var x=p(f);x!==f&&(m=i(g=y(r,x,l)))}if(!(u&&u===m||!m||m._noTemplating||"data_array"===m.valType||m.arrayOk&&Array.isArray(h))){if(!m.valType&&o(h))d(h,n,i,v,g);else if(m._isLinkedToArray&&Array.isArray(h))for(var b=!1,_=0,w={},T=0;T<h.length;T++){var k=h[T];if(o(k)){var A=k.name;if(A)w[A]||(d(k,n,i,y(h,_,v),y(h,_,g)),_++,w[A]=1);else if(!b){var M=y(r,c.arrayDefaultKey(f),s),S=y(h,_,v);d(k,n,i,S,y(h,_,g));var E=a.nestedProperty(n,S);a.nestedProperty(n,M).set(E.get()),E.set(null),b=!0}}}else a.nestedProperty(n,v).set(h)}}}function v(r,n){return s.getLayoutValObject(r,a.nestedProperty({},n).parts)}function g(r,n){return s.getTraceValObject(r,a.nestedProperty({},n).parts)}function y(r,n,i){return i?Array.isArray(r)?i+"["+n+"]":i+"."+n:n}function m(r){var n;switch(r.code){case"data":n="The template has no key data.";break;case"layout":n="The template has no key layout.";break;case"missing":n=r.path?"There are no templates for item "+r.path+" with name "+r.templateitemname:"There are no templates for trace "+r.index+", of type "+r.traceType+".";break;case"unused":n=r.path?"The template item at "+r.path+" was not used in constructing the plot.":r.dataCount?"Some of the templates of type "+r.traceType+" were not used. The template has "+r.templateCount+" traces, the data only has "+r.dataCount+" of this type.":"The template has "+r.templateCount+" traces of type "+r.traceType+" but there are none in the data.";break;case"reused":n="Some of the templates of type "+r.traceType+" were used more than once. The template has "+r.templateCount+" traces, the data has "+r.dataCount+" of this type."}return r.msg=n,r}n.makeTemplate=function(r){r=a.isPlainObject(r)?r:a.getGraphDiv(r),r=a.extendDeep({_context:f},{data:r.data,layout:r.layout}),l.supplyDefaults(r);var n=r.data||[],i=r.layout||{};i._basePlotModules=r._fullLayout._basePlotModules,i._modules=r._fullLayout._modules;var s={data:{},layout:{}};n.forEach(function(r){var n={};d(r,n,g.bind(null,r));var i=a.coerce(r,{},u,"type"),o=s.data[i];o||(o=s.data[i]=[]),o.push(n)}),d(i,s.layout,v.bind(null,i)),delete s.layout.template;var c=i.template;if(o(c)){var p,y,m,x,b,_,w=c.layout;o(w)&&h(w,s.layout);var T=c.data;if(o(T)){for(y in s.data)if(Array.isArray(m=T[y])){for(_=(b=s.data[y]).length,x=m.length,p=0;p<_;p++)h(m[p%x],b[p]);for(p=_;p<x;p++)b.push(a.extendDeep({},m[p]))}for(y in T)y in s.data||(s.data[y]=a.extendDeep([],T[y]))}}return s},n.validateTemplate=function(r,n){var i=a.extendDeep({},{_context:f,data:r.data,layout:r.layout}),s=i.layout||{};o(n)||(n=s.template||{});var u=n.layout,c=n.data,h=[];i.layout=s,i.layout.template=n,l.supplyDefaults(i);var d=i._fullLayout,v=i._fullData,g={};if(o(u)?(function r(n,i){for(var a in n)if("_"!==a.charAt(0)&&o(n[a])){var s,l=p(a),u=[];for(s=0;s<i.length;s++)u.push(y(n,a,i[s])),l!==a&&u.push(y(n,l,i[s]));for(s=0;s<u.length;s++)g[u[s]]=1;r(n[a],u)}}(d,["layout"]),function r(n,i){for(var a in n)if(-1===a.indexOf("defaults")&&o(n[a])){var s=y(n,a,i);g[s]?r(n[a],s):h.push({code:"unused",path:s})}}(u,"layout")):h.push({code:"layout"}),o(c)){for(var x,b={},_=0;_<v.length;_++){var w=v[_];b[x=w.type]=(b[x]||0)+1,w._fullInput._template||h.push({code:"missing",index:w._fullInput.index,traceType:x})}for(x in c){var T=c[x].length,k=b[x]||0;T>k?h.push({code:"unused",traceType:x,templateCount:T,dataCount:k}):k>T&&h.push({code:"reused",traceType:x,templateCount:T,dataCount:k})}}else h.push({code:"data"});if(function r(n,i){for(var a in n)if("_"!==a.charAt(0)){var s=n[a],l=y(n,a,i);o(s)?(Array.isArray(n)&&!1===s._template&&s.templateitemname&&h.push({code:"missing",path:l,templateitemname:s.templateitemname}),r(s,l)):Array.isArray(s)&&function(r){for(var n=0;n<r.length;n++)if(o(r[n]))return!0}(s)&&r(s,l)}}({data:v,layout:d},""),h.length)return h.map(m)}},403:function(r,n,i){"use strict";var a=i(92770),o=i(72391),s=i(74875),l=i(71828),u=i(25095),c=i(5900),f=i(70942),h=i(11506).version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};r.exports=function(r,n){function i(r){return!(r in n)||l.validate(n[r],p[r])}if(n=n||{},l.isPlainObject(r)?(d=r.data||[],v=r.layout||{},g=r.config||{},y={}):(r=l.getGraphDiv(r),d=l.extendDeep([],r.data),v=l.extendDeep({},r.layout),g=r._context,y=r._fullLayout||{}),!i("width")&&null!==n.width||!i("height")&&null!==n.height)throw Error("Height and width should be pixel values.");if(!i("format"))throw Error("Export format is not "+l.join2(p.format.values,", "," or ")+".");var d,v,g,y,m={};function x(r,i){return l.coerce(n,m,p,r,i)}var b=x("format"),_=x("width"),w=x("height"),T=x("scale"),k=x("setBackground"),A=x("imageDataOnly"),M=document.createElement("div");M.style.position="absolute",M.style.left="-5000px",document.body.appendChild(M);var S=l.extendFlat({},v);_?S.width=_:null===n.width&&a(y.width)&&(S.width=y.width),w?S.height=w:null===n.height&&a(y.height)&&(S.height=y.height);var E=l.extendFlat({},g,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),L=u.getRedrawFunc(M);function C(){return new Promise(function(r){setTimeout(r,u.getDelay(M._fullLayout))})}function O(){return new Promise(function(r,n){var i=c(M,b,T),a=M._fullLayout.width,p=M._fullLayout.height;function d(){o.purge(M),document.body.removeChild(M)}if("full-json"===b){var v=s.graphJson(M,!1,"keepdata","object",!0,!0);return v.version=h,v=JSON.stringify(v),d(),r(A?v:u.encodeJSON(v))}if(d(),"svg"===b)return r(A?i:u.encodeSVG(i));var g=document.createElement("canvas");g.id=l.randstr(),f({format:b,width:a,height:p,scale:T,canvas:g,svg:i,promise:!0}).then(r).catch(n)})}return new Promise(function(r,n){o.newPlot(M,d,S,E).then(L).then(C).then(O).then(function(n){r(A?n.replace(u.IMAGE_URL_PREFIX,""):n)}).catch(function(r){n(r)})})}},84936:function(r,n,i){"use strict";var a=i(71828),o=i(74875),s=i(86281),l=i(72075).dfltConfig,u=a.isPlainObject,c=Array.isArray,f=a.isArrayOrTypedArray;function h(r,n,i,o,s,l){l=l||[];for(var p=Object.keys(r),d=0;d<p.length;d++){var g=p[d];if("transforms"!==g){var m=l.slice();m.push(g);var x=r[g],b=n[g],_=g in i?i[g]:i[y(g).keyMinusId],w=(_||{}).valType,T="info_array"===w,k="colorscale"===w,A=(_||{}).items;if(function(r,n){var i=y(n),a=i.keyMinusId,o=i.id;return!!(a in r&&r[a]._isSubplotObj&&o)||n in r}(i,g)){if(u(x)&&u(b)&&"any"!==w)h(x,b,_,o,s,m);else if(T&&c(x)){x.length>b.length&&o.push(v("unused",s,m.concat(b.length)));var M,S,E,L,C,O=b.length,P=Array.isArray(A);if(P&&(O=Math.min(O,A.length)),2===_.dimensions)for(S=0;S<O;S++)if(c(x[S])){x[S].length>b[S].length&&o.push(v("unused",s,m.concat(S,b[S].length)));var I=b[S].length;for(M=0;M<(P?Math.min(I,A[S].length):I);M++)E=P?A[S][M]:A,L=x[S][M],C=b[S][M],a.validate(L,E)?C!==L&&C!==+L&&o.push(v("dynamic",s,m.concat(S,M),L,C)):o.push(v("value",s,m.concat(S,M),L))}else o.push(v("array",s,m.concat(S),x[S]));else for(S=0;S<O;S++)E=P?A[S]:A,L=x[S],C=b[S],a.validate(L,E)?C!==L&&C!==+L&&o.push(v("dynamic",s,m.concat(S),L,C)):o.push(v("value",s,m.concat(S),L))}else if(_.items&&!T&&c(x)){var D,z,R=A[Object.keys(A)[0]],F=[];for(D=0;D<b.length;D++){var B=b[D]._index||D;if((z=m.slice()).push(B),u(x[B])&&u(b[D])){F.push(B);var N=x[B],j=b[D];u(N)&&!1!==N.visible&&!1===j.visible?o.push(v("invisible",s,z)):h(N,j,R,o,s,z)}}for(D=0;D<x.length;D++)(z=m.slice()).push(D),u(x[D])?-1===F.indexOf(D)&&o.push(v("unused",s,z)):o.push(v("object",s,z,x[D]))}else!u(x)&&u(b)?o.push(v("object",s,m,x)):f(x)||!f(b)||T||k?g in n?a.validate(x,_)?"enumerated"===_.valType&&(_.coerceNumber&&x!==+b||x!==b)&&o.push(v("dynamic",s,m,x,b)):o.push(v("value",s,m,x)):o.push(v("unused",s,m,x)):o.push(v("array",s,m,x))}else o.push(v("schema",s,m))}}return o}r.exports=function(r,n){void 0===r&&(r=[]),void 0===n&&(n={});var i,f,p=s.get(),d=[],g={_context:a.extendFlat({},l)};c(r)?(g.data=a.extendDeep([],r),i=r):(g.data=[],i=[],d.push(v("array","data"))),u(n)?(g.layout=a.extendDeep({},n),f=n):(g.layout={},f={},arguments.length>1&&d.push(v("object","layout"))),o.supplyDefaults(g);for(var y=g._fullData,m=i.length,x=0;x<m;x++){var b=i[x],_=["data",x];if(u(b)){var w=y[x],T=w.type,k=p.traces[T].attributes;k.type={valType:"enumerated",values:[T]},!1===w.visible&&!1!==b.visible&&d.push(v("invisible",_)),h(b,w,k,d,_);var A=b.transforms,M=w.transforms;if(A){c(A)||d.push(v("array",_,["transforms"])),_.push("transforms");for(var S=0;S<A.length;S++){var E=["transforms",S],L=A[S].type;if(u(A[S])){var C=p.transforms[L]?p.transforms[L].attributes:{};C.type={valType:"enumerated",values:Object.keys(p.transforms)},h(A[S],M[S],C,d,_,E)}else d.push(v("object",_,E))}}}else d.push(v("object",_))}return h(f,g._fullLayout,function(r,n){for(var i=r.layout.layoutAttributes,o=0;o<n.length;o++){var s=n[o],l=r.traces[s.type],u=l.layoutAttributes;u&&(s.subplot?a.extendFlat(i[l.attributes.subplot.dflt],u):a.extendFlat(i,u))}return i}(p,y),d,"layout"),0===d.length?void 0:d};var p={object:function(r,n){return("layout"===r&&""===n?"The layout argument":"data"===r[0]&&""===n?"Trace "+r[1]+" in the data argument":d(r)+"key "+n)+" must be linked to an object container"},array:function(r,n){return("data"===r?"The data argument":d(r)+"key "+n)+" must be linked to an array container"},schema:function(r,n){return d(r)+"key "+n+" is not part of the schema"},unused:function(r,n,i){var a=u(i)?"container":"key";return d(r)+a+" "+n+" did not get coerced"},dynamic:function(r,n,i,a){return[d(r)+"key",n,"(set to '"+i+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(r,n){return(n?d(r)+"item "+n:"Trace "+r[1])+" got defaulted to be not visible"},value:function(r,n,i){return[d(r)+"key "+n,"is set to an invalid value ("+i+")"].join(" ")}};function d(r){return c(r)?"In data trace "+r[1]+", ":"In "+r+", "}function v(r,n,i,o,s){i=i||"",c(n)?(l=n[0],u=n[1]):(l=n,u=null);var l,u,f=function(r){if(!c(r))return String(r);for(var n="",i=0;i<r.length;i++){var a=r[i];"number"==typeof a?n=n.substr(0,n.length-1)+"["+a+"]":n+=a,i<r.length-1&&(n+=".")}return n}(i),h=p[r](n,f,o,s);return a.log(h),{code:r,container:l,trace:u,path:i,astr:f,msg:h}}var g=a.counterRegex("([a-z]+)");function y(r){var n=r.match(g);return{keyMinusId:n&&n[1],id:n&&n[2]}}},85594:function(r){"use strict";r.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(r,n,i){"use strict";var a=i(71828),o=i(44467);r.exports=function(r,n,i){var s,l,u=i.name,c=i.inclusionAttr||"visible",f=n[u],h=a.isArrayOrTypedArray(r[u])?r[u]:[],p=n[u]=[],d=o.arrayTemplater(n,u,c);for(s=0;s<h.length;s++){var v=h[s];a.isPlainObject(v)?l=d.newItem(v):(l=d.newItem({}))[c]=!1,l._index=s,!1!==l[c]&&i.handleItemDefaults(v,l,n,i),p.push(l)}var g=d.defaultItems();for(s=0;s<g.length;s++)(l=g[s])._index=p.length,i.handleItemDefaults({},l,n,i,{}),p.push(l);if(a.isArrayOrTypedArray(f)){var y=Math.min(f.length,p.length);for(s=0;s<y;s++)a.relinkPrivateKeys(p[s],f[s])}return p}},9012:function(r,n,i){"use strict";var a=i(41940),o=i(77914);r.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:a({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:o.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=o.dateTime2ms,l=o.incrementMonth,u=i(50606).ONEAVGMONTH;r.exports=function(r,n,i,o){if("date"!==n.type)return{vals:o};var c=r[i+"periodalignment"];if(!c)return{vals:o};var f,h=r[i+"period"];if(a(h)){if((h=+h)<=0)return{vals:o}}else if("string"==typeof h&&"M"===h.charAt(0)){var p=+h.substring(1);if(!(p>0&&Math.round(p)===p))return{vals:o};f=p}for(var d=n.calendar,v="start"===c,g="end"===c,y=r[i+"period0"],m=s(y,d)||0,x=[],b=[],_=[],w=o.length,T=0;T<w;T++){var k,A,M,S=o[T];if(f){for(k=Math.round((S-m)/(f*u)),M=l(m,f*k,d);M>S;)M=l(M,-f,d);for(;M<=S;)M=l(M,f,d);A=l(M,-f,d)}else{for(M=m+(k=Math.round((S-m)/h))*h;M>S;)M-=h;for(;M<=S;)M+=h;A=M-h}x[T]=v?A:g?M:(A+M)/2,b[T]=A,_[T]=M}return{vals:x,starts:b,ends:_}}},89502:function(r){"use strict";r.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(71828),l=i(50606).FP_SAFE,u=i(73972),c=i(91424),f=i(41675),h=f.getFromId,p=f.isLinked;function d(r,n){var i,a,o=[],l=r._fullLayout,u=g(l,n,0),c=g(l,n,1),f=m(r,n),h=f.min,p=f.max;if(0===h.length||0===p.length)return s.simpleMap(n.range,n.r2l);var d=h[0].val,y=p[0].val;for(i=1;i<h.length&&d===y;i++)d=Math.min(d,h[i].val);for(i=1;i<p.length&&d===y;i++)y=Math.max(y,p[i].val);var x=n.autorange,b="reversed"===x||"min reversed"===x||"max reversed"===x;if(!b&&n.range){var _=s.simpleMap(n.range,n.r2l);b=_[1]<_[0]}"reversed"===n.autorange&&(n.autorange=!0);var w,T,A,M,S,E,L=n.rangemode,C="tozero"===L,O="nonnegative"===L,P=n._length,I=P/10,D=0;for(i=0;i<h.length;i++)for(w=h[i],a=0;a<p.length;a++)(E=(T=p[a]).val-w.val-v(n,w.val,T.val))>0&&((S=P-u(w)-c(T))>I?E/S>D&&(A=w,M=T,D=E/S):E/P>D&&(A={val:w.val,nopad:1},M={val:T.val,nopad:1},D=E/P));if(d===y){var z=d-1,R=d+1;if(C){if(0===d)o=[0,1];else{var F=(d>0?p:h).reduce(function(r,n){return Math.max(r,c(n))},0),B=d/(1-Math.min(.5,F/P));o=d>0?[0,B]:[B,0]}}else o=O?[Math.max(0,z),Math.max(1,R)]:[z,R]}else C?(A.val>=0&&(A={val:0,nopad:1}),M.val<=0&&(M={val:0,nopad:1})):O&&(A.val-D*u(A)<0&&(A={val:0,nopad:1}),M.val<=0&&(M={val:1,nopad:1})),D=(M.val-A.val-v(n,w.val,T.val))/(P-u(A)-c(M)),o=[A.val-D*u(A),M.val+D*c(M)];return o=k(o,n),n.limitRange&&n.limitRange(),b&&o.reverse(),s.simpleMap(o,n.l2r||Number)}function v(r,n,i){var a=0;if(r.rangebreaks)for(var o=r.locateBreaks(n,i),s=0;s<o.length;s++){var l=o[s];a+=l.max-l.min}return a}function g(r,n,i){var o=.05*n._length,l=n._anchorAxis||{};if(-1!==(n.ticklabelposition||"").indexOf("inside")||-1!==(l.ticklabelposition||"").indexOf("inside")){var u=n.isReversed();if(!u){var f=s.simpleMap(n.range,n.r2l);u=f[1]<f[0]}u&&(i=!i)}var h=0;return p(r,n._id)||(h=function(r,n,i){var o=0,l="x"===n._id.charAt(0);for(var u in r._plots){var f=r._plots[u];if(n._id===f.xaxis._id||n._id===f.yaxis._id){var h=(l?f.yaxis:f.xaxis)||{};if(-1!==(h.ticklabelposition||"").indexOf("inside")&&(!i&&("left"===h.side||"bottom"===h.side)||i&&("top"===h.side||"right"===h.side))){if(h._vals){var p=s.deg2rad(h._tickAngles[h._id+"tick"]||0),d=Math.abs(Math.cos(p)),v=Math.abs(Math.sin(p));if(!h._vals[0].bb){var g=h._id+"tick";h._selections[g].each(function(r){var n=a.select(this);n.select(".text-math-group").empty()&&(r.bb=c.bBox(n.node()))})}for(var m=0;m<h._vals.length;m++){var x=h._vals[m].bb;if(x){var b=2*y+x.width,_=2*y+x.height;o=Math.max(o,l?Math.max(b*d,_*v):Math.max(_*d,b*v))}}}"inside"===h.ticks&&"inside"===h.ticklabelposition&&(o+=h.ticklen||0)}}}return o}(r,n,i)),o=Math.max(h,o),"domain"===n.constrain&&n._inputDomain&&(o*=(n._inputDomain[1]-n._inputDomain[0])/(n.domain[1]-n.domain[0])),function(r){return r.nopad?0:r.pad+(r.extrapad?o:h)}}r.exports={applyAutorangeOptions:k,getAutoRange:d,makePadFn:g,doAutoRange:function(r,n,i){if(n.setScale(),n.autorange){n.range=i?i.slice():d(r,n),n._r=n.range.slice(),n._rl=s.simpleMap(n._r,n.r2l);var a=n._input,o={};o[n._attr+".range"]=n.range,o[n._attr+".autorange"]=n.autorange,u.call("_storeDirectGUIEdit",r.layout,r._fullLayout._preGUI,o),a.range=n.range.slice(),a.autorange=n.autorange}var l=n._anchorAxis;if(l&&l.rangeslider){var c=l.rangeslider[n._name];c&&"auto"===c.rangemode&&(c.range=d(r,n)),l._input.rangeslider[n._name]=s.extendFlat({},c)}},findExtremes:function(r,n,i){i||(i={}),r._m||r.setScale();var a,s,u,c,f,h,p,d,v,g=[],y=[],m=n.length,T=i.padded||!1,k=i.tozero&&("linear"===r.type||"-"===r.type),A="log"===r.type,M=!1,S=i.vpadLinearized||!1;function E(r){if(Array.isArray(r))return M=!0,function(n){return Math.max(Number(r[n]||0),0)};var n=Math.max(Number(r||0),0);return function(){return n}}var L=E((r._m>0?i.ppadplus:i.ppadminus)||i.ppad||0),C=E((r._m>0?i.ppadminus:i.ppadplus)||i.ppad||0),O=E(i.vpadplus||i.vpad),P=E(i.vpadminus||i.vpad);if(!M){if(d=1/0,v=-1/0,A)for(a=0;a<m;a++)(s=n[a])<d&&s>0&&(d=s),s>v&&s<l&&(v=s);else for(a=0;a<m;a++)(s=n[a])<d&&s>-l&&(d=s),s>v&&s<l&&(v=s);n=[d,v],m=2}var I={tozero:k,extrapad:T};function D(i){o(u=n[i])&&(h=L(i),p=C(i),S?(c=r.c2l(u)-P(i),f=r.c2l(u)+O(i)):(d=u-P(i),v=u+O(i),A&&d<v/10&&(d=v/10),c=r.c2l(d),f=r.c2l(v)),k&&(c=Math.min(0,c),f=Math.max(0,f)),b(c)&&x(g,c,p,I,_),b(f)&&x(y,f,h,I,w))}var z=Math.min(6,m);for(a=0;a<z;a++)D(a);for(a=m-1;a>=z;a--)D(a);return{min:g,max:y,opts:i}},concatExtremes:m};var y=3;function m(r,n,i){var a,o,s,l=n._id,u=r._fullData,c=r._fullLayout,f=[],p=[];function d(r,n){for(a=0;a<n.length;a++){var i,u,c=r[n[a]],h=(c._extremes||{})[l];if(!0===c.visible&&h){for(o=0;o<h.min.length;o++)i=(s=h.min[o]).val,x(f,i,s.pad,{extrapad:s.extrapad},_);for(o=0;o<h.max.length;o++)u=(s=h.max[o]).val,x(p,u,s.pad,{extrapad:s.extrapad},w)}}}if(d(u,n._traceIndices),d(c.annotations||[],n._annIndices||[]),d(c.shapes||[],n._shapeIndices||[]),n._matchGroup&&!i){for(var v in n._matchGroup)if(v!==n._id){var g,y,b=h(r,v),T=m(r,b,!0),k=n._length/b._length;for(o=0;o<T.min.length;o++)g=(s=T.min[o]).val,x(f,g,s.pad*k,{extrapad:s.extrapad},_);for(o=0;o<T.max.length;o++)y=(s=T.max[o]).val,x(p,y,s.pad*k,{extrapad:s.extrapad},w)}}return{min:f,max:p}}function x(r,n,i,a,o){for(var s=a.tozero,l=a.extrapad,u=!0,c=0;c<r.length&&u;c++){var f=r[c];if(o(f.val,n)&&f.pad>=i&&(f.extrapad||!l)){u=!1;break}o(n,f.val)&&f.pad<=i&&(l||!f.extrapad)&&(r.splice(c,1),c--)}if(u){var h=s&&0===n;r.push({val:n,pad:h?0:i,extrapad:!h&&l})}}function b(r){return o(r)&&Math.abs(r)<l}function _(r,n){return r<=n}function w(r,n){return r>=n}function T(r,n,i){return void 0===n||void 0===i||(n=r.d2l(n))<r.d2l(i)}function k(r,n){if(!n||!n.autorangeoptions)return r;var i,a,o,l,u=r[0],c=r[1],f=n.autorangeoptions.include;if(void 0!==f){var h=n.d2l(u),p=n.d2l(c);s.isArrayOrTypedArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var v=n.d2l(f[d]);h>=v&&(h=v,u=v),p<=v&&(p=v,c=v)}}return i=u,u=(a=n.autorangeoptions)&&void 0!==a.minallowed&&T(n,a.minallowed,a.maxallowed)?a.minallowed:a&&void 0!==a.clipmin&&T(n,a.clipmin,a.clipmax)?Math.max(i,n.d2l(a.clipmin)):i,o=c,[u,c=(l=n.autorangeoptions)&&void 0!==l.maxallowed&&T(n,l.minallowed,l.maxallowed)?l.maxallowed:l&&void 0!==l.clipmax&&T(n,l.clipmin,l.clipmax)?Math.min(o,n.d2l(l.clipmax)):o]}},23074:function(r){"use strict";r.exports=function(r,n,i){if(i){var a,o,s="reversed"===n||"min reversed"===n||"max reversed"===n;a=i[s?1:0],o=i[s?0:1]}var l=r("autorangeoptions.minallowed",null===o?a:void 0),u=r("autorangeoptions.maxallowed",null===a?o:void 0);void 0===l&&r("autorangeoptions.clipmin"),void 0===u&&r("autorangeoptions.clipmax"),r("autorangeoptions.include")}},89298:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(74875),l=i(73972),u=i(71828),c=u.strTranslate,f=i(63893),h=i(92998),p=i(7901),d=i(91424),v=i(13838),g=i(66287),y=i(50606),m=y.ONEMAXYEAR,x=y.ONEAVGYEAR,b=y.ONEMINYEAR,_=y.ONEMAXQUARTER,w=y.ONEAVGQUARTER,T=y.ONEMINQUARTER,k=y.ONEMAXMONTH,A=y.ONEAVGMONTH,M=y.ONEMINMONTH,S=y.ONEWEEK,E=y.ONEDAY,L=E/2,C=y.ONEHOUR,O=y.ONEMIN,P=y.ONESEC,I=y.MINUS_SIGN,D=y.BADNUM,z={K:"zeroline"},R={K:"gridline",L:"path"},F={K:"minor-gridline",L:"path"},B={K:"tick",L:"path"},N={K:"tick",L:"text"},j={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},U=i(18783),V=U.MID_SHIFT,H=U.CAP_SHIFT,q=U.LINE_SPACING,G=U.OPPOSITE_SIDE,Z=r.exports={};Z.setConvert=i(21994);var Y=i(4322),W=i(41675),X=W.idSort,J=W.isLinked;Z.id2name=W.id2name,Z.name2id=W.name2id,Z.cleanId=W.cleanId,Z.list=W.list,Z.listIds=W.listIds,Z.getFromId=W.getFromId,Z.getFromTrace=W.getFromTrace;var K=i(71739);function $(r){var n=(r[1]-r[0])*1e-4;return[r[0]-n,r[1]+n]}Z.getAutoRange=K.getAutoRange,Z.findExtremes=K.findExtremes,Z.coerceRef=function(r,n,i,a,o,s){var l=a.charAt(a.length-1),c=i._fullLayout._subplots[l+"axis"],f=a+"ref",h={};return o||(o=c[0]||("string"==typeof s?s:s[0])),s||(s=o),c=c.concat(c.map(function(r){return r+" domain"})),h[f]={valType:"enumerated",values:c.concat(s?"string"==typeof s?[s]:s:[]),dflt:o},u.coerce(r,n,h,f)},Z.getRefType=function(r){return void 0===r?r:"paper"===r?"paper":"pixel"===r?"pixel":/( domain)$/.test(r)?"domain":"range"},Z.coercePosition=function(r,n,i,a,o,s){var l,c;if("range"!==Z.getRefType(a))l=u.ensureNumber,c=i(o,s);else{var f=Z.getFromId(n,a);c=i(o,s=f.fraction2r(s)),l=f.cleanPos}r[o]=l(c)},Z.cleanPosition=function(r,n,i){return("paper"===i||"pixel"===i?u.ensureNumber:Z.getFromId(n,i).cleanPos)(r)},Z.redrawComponents=function(r,n){n=n||Z.listIds(r);var i=r._fullLayout;function a(a,o,s,u){for(var c=l.getComponentMethod(a,o),f={},h=0;h<n.length;h++)for(var p=i[Z.id2name(n[h])][s],d=0;d<p.length;d++){var v=p[d];if(!f[v]&&(c(r,v),f[v]=1,u))return}}a("annotations","drawOne","_annIndices"),a("shapes","drawOne","_shapeIndices"),a("images","draw","_imgIndices",!0),a("selections","drawOne","_selectionIndices")};var Q=Z.getDataConversions=function(r,n,i,a){var o,s="x"===i||"y"===i||"z"===i?i:a;if(u.isArrayOrTypedArray(s)){if(o={type:Y(a,void 0,{autotypenumbers:r._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert(o),"category"===o.type)for(var l=0;l<a.length;l++)o.d2c(a[l])}else o=Z.getFromTrace(r,n,s);return o?{d2c:o.d2c,c2d:o.c2d}:"ids"===s?{d2c:te,c2d:te}:{d2c:tt,c2d:tt}};function tt(r){return+r}function te(r){return String(r)}function tr(r,n){return .001>Math.abs((r/n+.5)%1-.5)}function tn(r,n){return .001>Math.abs(r/n-1)}function ti(r){return+r.substring(1)}function ta(r,n){return r.rangebreaks&&(n=n.filter(function(n){return r.maskBreaks(n.x)!==D})),n}function to(r,n){var i=$(u.simpleMap(r.range,r.r2l)),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]),s="category"===r.type?r.d2l_noadd:r.d2l;"log"===r.type&&"L"!==String(r.dtick).charAt(0)&&(r.dtick="L"+Math.pow(10,Math.floor(Math.min(r.range[0],r.range[1]))-1));for(var l=[],c=0;c<=1;c++)if((void 0===n||!(n&&c||!1===n&&!c))&&(!c||r.minor)){var f=c?r.minor.tickvals:r.tickvals,h=c?[]:r.ticktext;if(f){u.isArrayOrTypedArray(h)||(h=[]);for(var p=0;p<f.length;p++){var d=s(f[p]);if(d>a&&d<o){var v=void 0===h[p]?Z.tickText(r,d):tg(r,d,String(h[p]));c&&(v.minor=!0,v.text=""),l.push(v)}}}}return ta(r,l)}Z.getDataToCoordFunc=function(r,n,i,a){return Q(r,n,i,a).d2c},Z.counterLetter=function(r){var n=r.charAt(0);return"x"===n?"y":"y"===n?"x":void 0},Z.minDtick=function(r,n,i,a){-1===["log","category","multicategory"].indexOf(r.type)&&a?void 0===r._minDtick?(r._minDtick=n,r._forceTick0=i):r._minDtick&&((r._minDtick/n+1e-6)%1<2e-6&&((i-r._forceTick0)/n%1+1.000001)%1<2e-6?(r._minDtick=n,r._forceTick0=i):((n/r._minDtick+1e-6)%1>2e-6||((i-r._forceTick0)/r._minDtick%1+1.000001)%1>2e-6)&&(r._minDtick=0)):r._minDtick=0},Z.saveRangeInitial=function(r,n){for(var i=Z.list(r,"",!0),a=!1,o=0;o<i.length;o++){var s=i[o],l=void 0===s._rangeInitial0&&void 0===s._rangeInitial1,u=l||s.range[0]!==s._rangeInitial0||s.range[1]!==s._rangeInitial1,c=s.autorange;(l&&!0!==c||n&&u)&&(s._rangeInitial0="min"===c||"max reversed"===c?void 0:s.range[0],s._rangeInitial1="max"===c||"min reversed"===c?void 0:s.range[1],s._autorangeInitial=c,a=!0)}return a},Z.saveShowSpikeInitial=function(r,n){for(var i=Z.list(r,"",!0),a=!1,o="on",s=0;s<i.length;s++){var l=i[s],u=void 0===l._showSpikeInitial,c=u||l.showspikes!==l._showspikes;(u||n&&c)&&(l._showSpikeInitial=l.showspikes,a=!0),"on"!==o||l.showspikes||(o="off")}return r._fullLayout._cartesianSpikesEnabled=o,a},Z.autoBin=function(r,n,i,a,s,l){var c,f=u.aggNums(Math.min,null,r),h=u.aggNums(Math.max,null,r);if("category"===n.type||"multicategory"===n.type)return{start:f-.5,end:h+.5,size:Math.max(1,Math.round(l)||1),_dataSpan:h-f};if(s||(s=n.calendar),c="log"===n.type?{type:"linear",range:[f,h]}:{type:n.type,range:u.simpleMap([f,h],n.c2r,0,s),calendar:s},Z.setConvert(c),l=l&&g.dtick(l,c.type))c.dtick=l,c.tick0=g.tick0(void 0,c.type,s);else{if(i)v=(h-f)/i;else{var p=u.distinctVals(r),d=Math.pow(10,Math.floor(Math.log(p.minDiff)/Math.LN10));o(v=Math.max(d*u.roundUp(p.minDiff/d,[.9,1.9,4.9,9.9],!0),2*u.stdev(r)/Math.pow(r.length,a?.25:.4)))||(v=1)}Z.autoTicks(c,v)}var v,y,m=c.dtick,x=Z.tickIncrement(Z.tickFirst(c),m,"reverse",s);if("number"==typeof m)y=(x=function(r,n,i,a,s){var l=0,u=0,c=0,f=0;function h(n){return(1+100*(n-r)/i.dtick)%100<2}for(var p=0;p<n.length;p++)n[p]%1==0?c++:o(n[p])||f++,h(n[p])&&l++,h(n[p]+i.dtick/2)&&u++;var d=n.length-f;if(c===d&&"date"!==i.type)i.dtick<1?r=a-.5*i.dtick:(r-=.5)+i.dtick<a&&(r+=i.dtick);else if(u<.1*d&&(l>.3*d||h(a)||h(s))){var v=i.dtick/2;r+=r+v<a?v:-v}return r}(x,r,c,f,h))+(1+Math.floor((h-x)/m))*m;else for("M"===c.dtick.charAt(0)&&(x=function(r,n,i,a,o){var s=u.findExactDates(n,o);if(s.exactDays>.8){var l=Number(i.substr(1));s.exactYears>.8&&l%12==0?r=Z.tickIncrement(r,"M6","reverse")+1.5*E:s.exactMonths>.8?r=Z.tickIncrement(r,"M1","reverse")+15.5*E:r-=L;var c=Z.tickIncrement(r,i);if(c<=a)return c}return r}(x,r,m,f,s)),y=x;y<=h;)y=Z.tickIncrement(y,m,!1,s);return{start:n.c2r(x,0,s),end:n.c2r(y,0,s),size:m,_dataSpan:h-f}},Z.prepMinorTicks=function(r,n,i){if(!n.minor.dtick){delete r.dtick;var a,s=n.dtick&&o(n._tmin);if(s){var l=Z.tickIncrement(n._tmin,n.dtick,!0);a=[n._tmin,.99*l+.01*n._tmin]}else{var c=u.simpleMap(n.range,n.r2l);a=[c[0],.8*c[0]+.2*c[1]]}if(r.range=u.simpleMap(a,n.l2r),r._isMinor=!0,Z.prepTicks(r,i),s){var f=o(n.dtick),h=o(r.dtick),p=f?n.dtick:+n.dtick.substring(1),d=h?r.dtick:+r.dtick.substring(1);f&&h?tr(p,d)?p===2*S&&d===2*E&&(r.dtick=S):p===2*S&&d===3*E?r.dtick=S:p!==S||(n._input.minor||{}).nticks?tn(p/d,2.5)?r.dtick=p/2:r.dtick=p:r.dtick=E:"M"===String(n.dtick).charAt(0)?h?r.dtick="M1":tr(p,d)?p>=12&&2===d&&(r.dtick="M3"):r.dtick=n.dtick:"L"===String(r.dtick).charAt(0)?"L"===String(n.dtick).charAt(0)?tr(p,d)||(r.dtick=tn(p/d,2.5)?n.dtick/2:n.dtick):r.dtick="D1":"D2"===r.dtick&&+n.dtick>1&&(r.dtick=1)}r.range=n.range}void 0===n.minor._tick0Init&&(r.tick0=n.tick0)},Z.prepTicks=function(r,n){var i=u.simpleMap(r.range,r.r2l,void 0,void 0,n);if("auto"===r.tickmode||!r.dtick){var a,s=r.nticks;s||("category"===r.type||"multicategory"===r.type?(a=r.tickfont?u.bigFont(r.tickfont.size||12):15,s=r._length/a):(a="y"===r._id.charAt(0)?40:80,s=u.constrain(r._length/a,4,9)+1),"radialaxis"===r._name&&(s*=2)),r.minor&&"array"!==r.minor.tickmode||"array"===r.tickmode&&(s*=100),r._roughDTick=Math.abs(i[1]-i[0])/s,Z.autoTicks(r,r._roughDTick),r._minDtick>0&&r.dtick<2*r._minDtick&&(r.dtick=r._minDtick,r.tick0=r.l2r(r._forceTick0))}"period"===r.ticklabelmode&&function(r){function n(){return!(o(r.dtick)||"M"!==r.dtick.charAt(0))}var i,a=n(),s=Z.getTickFormat(r);if(s){var l=r._dtickInit!==r.dtick;/%[fLQsSMX]/.test(s)||(/%[HI]/.test(s)?(i=C,l&&!a&&r.dtick<C&&(r.dtick=C)):/%p/.test(s)?(i=L,l&&!a&&r.dtick<L&&(r.dtick=L)):/%[Aadejuwx]/.test(s)?(i=E,l&&!a&&r.dtick<E&&(r.dtick=E)):/%[UVW]/.test(s)?(i=S,l&&!a&&r.dtick<S&&(r.dtick=S)):/%[Bbm]/.test(s)?(i=A,l&&(a?1>ti(r.dtick):r.dtick<M)&&(r.dtick="M1")):/%[q]/.test(s)?(i=w,l&&(a?3>ti(r.dtick):r.dtick<T)&&(r.dtick="M3")):/%[Yy]/.test(s)&&(i=x,l&&(a?12>ti(r.dtick):r.dtick<b)&&(r.dtick="M12")))}(a=n())&&r.tick0===r._dowTick0&&(r.tick0=r._rawTick0),r._definedDelta=i}(r),r.tick0||(r.tick0="date"===r.type?"2000-01-01":0),"date"===r.type&&r.dtick<.1&&(r.dtick=.1),tv(r)},Z.calcTicks=function(r,n){for(var i,a,s=r.type,l=r.calendar,c=r.ticklabelstep,f="period"===r.ticklabelmode,h=u.simpleMap(r.range,r.r2l,void 0,void 0,n),p=h[1]<h[0],d=Math.min(h[0],h[1]),v=Math.max(h[0],h[1]),g=Math.max(1e3,r._length||0),y=[],O=[],P=[],I=[],z=r.minor&&(r.minor.ticks||r.minor.showgrid),R=1;R>=(z?0:1);R--){var F=!R;R?(r._dtickInit=r.dtick,r._tick0Init=r.tick0):(r.minor._dtickInit=r.minor.dtick,r.minor._tick0Init=r.minor.tick0);var B=R?r:u.extendFlat({},r,r.minor);if(F?Z.prepMinorTicks(B,r,n):Z.prepTicks(B,n),"array"!==B.tickmode){if("sync"!==B.tickmode){var N=$(h),j=N[0],U=N[1],V=o(B.dtick),H="log"===s&&!(V||"L"===B.dtick.charAt(0)),q=Z.tickFirst(B,n);if(R){if(r._tmin=q,q<j!==p)break;"category"!==s&&"multicategory"!==s||(U=p?Math.max(-.5,U):Math.min(r._categories.length-.5,U))}var G,Y,W=null,X=q;R&&(V?Y=r.dtick:"date"===s?"string"==typeof r.dtick&&"M"===r.dtick.charAt(0)&&(Y=A*r.dtick.substring(1)):Y=r._roughDTick,G=Math.round((r.r2l(X)-r.r2l(r.tick0))/Y)-1);var J=B.dtick;for(B.rangebreaks&&B._tick0Init!==B.tick0&&(X=tP(X,r),p||(X=Z.tickIncrement(X,J,!p,l))),R&&f&&(X=Z.tickIncrement(X,J,!p,l),G--);p?X>=U:X<=U;X=Z.tickIncrement(X,J,p,l)){if(R&&G++,B.rangebreaks&&!p){if(X<j)continue;if(B.maskBreaks(X)===D&&tP(X,B)>=v)break}if(P.length>g||X===W)break;W=X;var K={value:X};R?(H&&X!==(0|X)&&(K.simpleLabel=!0),c>1&&G%c&&(K.skipLabel=!0),P.push(K)):(K.minor=!0,I.push(K))}}else P=[],y=function(r){var n=r._mainAxis,i=[];if(n._vals){for(var a=0;a<n._vals.length;a++)if(!n._vals[a].noTick){var o=n.l2p(n._vals[a].x),s=r.p2l(o),l=Z.tickText(r,s);n._vals[a].minor&&(l.minor=!0,l.text=""),i.push(l)}}return ta(r,i)}(r)}else R?(P=[],y=to(r,!F)):(I=[],O=to(r,!F))}if(z&&!("inside"===r.minor.ticks&&"outside"===r.ticks||"outside"===r.minor.ticks&&"inside"===r.ticks)){for(var Q=P.map(function(r){return r.value}),tt=[],te=0;te<I.length;te++){var tr=I[te],tn=tr.value;if(-1===Q.indexOf(tn)){for(var ti=!1,ts=0;!ti&&ts<P.length;ts++)1e7+P[ts].value===1e7+tn&&(ti=!0);ti||tt.push(tr)}}I=tt}if(f&&function(r,n,i){for(var a=0;a<r.length;a++){var o=r[a].value,s=a,l=a+1;a<r.length-1?(s=a,l=a+1):(s=a>0?a-1:a,l=a);var u,c=r[s].value,f=Math.abs(r[l].value-c),h=i||f,p=0;h>=b?p=f>=b&&f<=m?f:x:i===w&&h>=T?p=f>=T&&f<=_?f:w:h>=M?p=f>=M&&f<=k?f:A:i===S&&h>=S?p=S:h>=E?p=E:i===L&&h>=L?p=L:i===C&&h>=C&&(p=C),p>=f&&(p=f,u=!0);var d=o+p;if(n.rangebreaks&&p>0){for(var v=0,g=0;g<84;g++){var y=(g+.5)/84;n.maskBreaks(o*(1-y)+y*d)!==D&&v++}(p*=v/84)||(r[a].drop=!0),u&&f>S&&(p=f)}(p>0||0===a)&&(r[a].periodX=o+p/2)}}(P,r,r._definedDelta),r.rangebreaks){var tl="y"===r._id.charAt(0),tu=1;"auto"===r.tickmode&&(tu=r.tickfont?r.tickfont.size:12);var tc=NaN;for(i=P.length-1;i>-1;i--)if(P[i].drop)P.splice(i,1);else{P[i].value=tP(P[i].value,r);var tf=r.c2p(P[i].value);(tl?tc>tf-tu:tc<tf+tu)?P.splice(p?i+1:i,1):tc=tf}}tO(r)&&360===Math.abs(h[1]-h[0])&&P.pop(),r._tmax=(P[P.length-1]||{}).value,r._prevDateHead="",r._inCalcTicks=!0;var th,tp,td=function(n){n.text="",r._prevDateHead=a};for(P=P.concat(I),i=0;i<P.length;i++){var tv=P[i].minor,tg=P[i].value;tv?O.push({x:tg,minor:!0}):(a=r._prevDateHead,th=Z.tickText(r,tg,!1,P[i].simpleLabel),void 0!==(tp=P[i].periodX)&&(th.periodX=tp,(tp>v||tp<d)&&(tp>v&&(th.periodX=v),tp<d&&(th.periodX=d),td(th))),P[i].skipLabel&&td(th),y.push(th))}return y=y.concat(O),r._inCalcTicks=!1,f&&y.length&&(y[0].noTick=!0),y};var ts=[2,5,10],tl=[1,2,3,6,12],tu=[1,2,5,10,15,30],tc=[1,2,3,7,14],tf=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],th=[-.301,0,.301,.699,1],tp=[15,30,45,90,180];function td(r,n,i){return n*u.roundUp(r/n,i)}function tv(r){var n=r.dtick;if(r._tickexponent=0,o(n)||"string"==typeof n||(n=1),"category"!==r.type&&"multicategory"!==r.type||(r._tickround=null),"date"===r.type){var i=r.r2l(r.tick0),a=r.l2r(i).replace(/(^-|i)/g,""),s=a.length;if("M"===String(n).charAt(0))s>10||"01-01"!==a.substr(5)?r._tickround="d":r._tickround=+n.substr(1)%12==0?"y":"m";else if(n>=E&&s<=10||n>=15*E)r._tickround="d";else if(n>=O&&s<=16||n>=C)r._tickround="M";else if(n>=P&&s<=19||n>=O)r._tickround="S";else{var l=r.l2r(i+n).replace(/^-/,"").length;r._tickround=Math.max(s,l)-20,r._tickround<0&&(r._tickround=4)}}else if(o(n)||"L"===n.charAt(0)){var u=r.range.map(r.r2d||Number);o(n)||(n=Number(n.substr(1))),r._tickround=2-Math.floor(Math.log(n)/Math.LN10+.01);var c=Math.floor(Math.log(Math.max(Math.abs(u[0]),Math.abs(u[1])))/Math.LN10+.01);Math.abs(c)>(void 0===r.minexponent?3:r.minexponent)&&(tm(r.exponentformat)&&!tx(c)?r._tickexponent=3*Math.round((c-1)/3):r._tickexponent=c)}else r._tickround=null}function tg(r,n,i){var a=r.tickfont||{};return{x:n,dx:0,dy:0,text:i||"",fontSize:a.size,font:a.family,fontColor:a.color}}Z.autoTicks=function(r,n,i){var a;function s(r){return Math.pow(r,Math.floor(Math.log(n)/Math.LN10))}if("date"===r.type){r.tick0=u.dateTick0(r.calendar,0);var l=2*n;if(l>x)n/=x,a=s(10),r.dtick="M"+12*td(n,a,ts);else if(l>A)n/=A,r.dtick="M"+td(n,1,tl);else if(l>E){if(r.dtick=td(n,E,r._hasDayOfWeekBreaks?[1,2,7,14]:tc),!i){var c=Z.getTickFormat(r),f="period"===r.ticklabelmode;f&&(r._rawTick0=r.tick0),/%[uVW]/.test(c)?r.tick0=u.dateTick0(r.calendar,2):r.tick0=u.dateTick0(r.calendar,1),f&&(r._dowTick0=r.tick0)}}else l>C?r.dtick=td(n,C,tl):l>O?r.dtick=td(n,O,tu):l>P?r.dtick=td(n,P,tu):(a=s(10),r.dtick=td(n,a,ts))}else if("log"===r.type){r.tick0=0;var h=u.simpleMap(r.range,r.r2l);if(r._isMinor&&(n*=1.5),n>.7)r.dtick=Math.ceil(n);else if(1>Math.abs(h[1]-h[0])){var p=1.5*Math.abs((h[1]-h[0])/n);n=Math.abs(Math.pow(10,h[1])-Math.pow(10,h[0]))/p,a=s(10),r.dtick="L"+td(n,a,ts)}else r.dtick=n>.3?"D2":"D1"}else"category"===r.type||"multicategory"===r.type?(r.tick0=0,r.dtick=Math.ceil(Math.max(n,1))):tO(r)?(r.tick0=0,a=1,r.dtick=td(n,a,tp)):(r.tick0=0,a=s(10),r.dtick=td(n,a,ts));if(0===r.dtick&&(r.dtick=1),!o(r.dtick)&&"string"!=typeof r.dtick){var d=r.dtick;throw r.dtick=1,"ax.dtick error: "+String(d)}},Z.tickIncrement=function(r,n,i,s){var l=i?-1:1;if(o(n))return u.increment(r,l*n);var c=n.charAt(0),f=l*Number(n.substr(1));if("M"===c)return u.incrementMonth(r,f,s);if("L"===c)return Math.log(Math.pow(10,r)+f)/Math.LN10;if("D"===c){var h="D2"===n?th:tf,p=r+.01*l,d=u.roundUp(u.mod(p,1),h,i);return Math.floor(p)+Math.log(a.round(Math.pow(10,d),1))/Math.LN10}throw"unrecognized dtick "+String(n)},Z.tickFirst=function(r,n){var i=r.r2l||Number,s=u.simpleMap(r.range,i,void 0,void 0,n),l=s[1]<s[0],c=l?Math.floor:Math.ceil,f=$(s)[0],h=r.dtick,p=i(r.tick0);if(o(h)){var d=c((f-p)/h)*h+p;return"category"!==r.type&&"multicategory"!==r.type||(d=u.constrain(d,0,r._categories.length-1)),d}var v=h.charAt(0),g=Number(h.substr(1));if("M"===v){for(var y,m,x,b=0,_=p;b<10;){if(((y=Z.tickIncrement(_,h,l,r.calendar))-f)*(_-f)<=0)return l?Math.min(_,y):Math.max(_,y);x=v+(Math.abs(Math.round(m=(f-(_+y)/2)/(y-_)))||1)*g,_=Z.tickIncrement(_,x,m<0?!l:l,r.calendar),b++}return u.error("tickFirst did not converge",r),_}if("L"===v)return Math.log(c((Math.pow(10,f)-p)/g)*g+p)/Math.LN10;if("D"===v){var w="D2"===h?th:tf,T=u.roundUp(u.mod(f,1),w,l);return Math.floor(f)+Math.log(a.round(Math.pow(10,T),1))/Math.LN10}throw"unrecognized dtick "+String(h)},Z.tickText=function(r,n,i,a){var s,l,c,f,h,p,d,v=tg(r,n),g="array"===r.tickmode,y=i||g,m=r.type,x="category"===m?r.d2l_noadd:r.d2l;if(g&&u.isArrayOrTypedArray(r.ticktext)){var b=u.simpleMap(r.range,r.r2l),_=(Math.abs(b[1]-b[0])-(r._lBreaks||0))/1e4;for(d=0;d<r.ticktext.length&&!(Math.abs(n-x(r.tickvals[d]))<_);d++);if(d<r.ticktext.length)return v.text=String(r.ticktext[d]),v}function w(a){if(void 0===a)return!0;if(i)return"none"===a;var o={first:r._tmin,last:r._tmax}[a];return"all"!==a&&n!==o}var T=i?"never":"none"!==r.exponentformat&&w(r.showexponent)?"hide":"";if("date"===m?function(r,n,i,a){var s=r._tickround,l=i&&r.hoverformat||Z.getTickFormat(r);(a=!l&&a)&&(s=o(s)?4:({y:"m",m:"d",d:"M",M:"S",S:4})[s]);var c,f=u.formatDate(n.x,l,s,r._dateFormat,r.calendar,r._extraFormat),h=f.indexOf("\n");if(-1!==h&&(c=f.substr(h+1),f=f.substr(0,h)),a&&(void 0===c||"00:00:00"!==f&&"00:00"!==f?8===f.length&&(f=f.replace(/:00$/,"")):(f=c,c="")),c){if(i)"d"===s?f+=", "+c:f=c+(f?", "+f:"");else if(r._inCalcTicks&&r._prevDateHead===c){var p=tI(r),d=r._trueSide||r.side;(!p&&"top"===d||p&&"bottom"===d)&&(f+="<br> ")}else r._prevDateHead=c,f+="<br>"+c}n.text=f}(r,v,i,y):"log"===m?function(r,n,i,a,s){var l=r.dtick,c=n.x,f=r.tickformat,h="string"==typeof l&&l.charAt(0);if("never"===s&&(s=""),a&&"L"!==h&&(l="L3",h="L"),f||"L"===h)n.text=tb(Math.pow(10,c),r,s,a);else if(o(l)||"D"===h&&.1>u.mod(c+.01,1)){var p=Math.round(c),d=Math.abs(p),v=r.exponentformat;"power"===v||tm(v)&&tx(p)?(n.text=0===p?1:1===p?"10":"10<sup>"+(p>1?"":I)+d+"</sup>",n.fontSize*=1.25):("e"===v||"E"===v)&&d>2?n.text="1"+v+(p>0?"+":I)+d:(n.text=tb(Math.pow(10,c),r,"","fakehover"),"D1"===l&&"y"===r._id.charAt(0)&&(n.dy-=n.fontSize/6))}else{if("D"!==h)throw"unrecognized dtick "+String(l);n.text=String(Math.round(Math.pow(10,u.mod(c,1)))),n.fontSize*=.75}if("D1"===r.dtick){var g=String(n.text).charAt(0);"0"!==g&&"1"!==g||("y"===r._id.charAt(0)?n.dx-=n.fontSize/4:(n.dy+=n.fontSize/2,n.dx+=(r.range[1]>r.range[0]?1:-1)*n.fontSize*(c<0?.5:.25)))}}(r,v,0,y,T):"category"===m?(void 0===(s=r._categories[Math.round(v.x)])&&(s=""),v.text=String(s)):"multicategory"===m?(l=Math.round(v.x),f=void 0===(c=r._categories[l]||[])[1]?"":String(c[1]),h=void 0===c[0]?"":String(c[0]),i?v.text=h+" - "+f:(v.text=f,v.text2=h)):tO(r)?function(r,n,i,a,o){if("radians"!==r.thetaunit||i)n.text=tb(n.x,r,o,a);else{var s=n.x/180;if(0===s)n.text="0";else{var l=function(r){function n(r,n){return 1e-6>=Math.abs(r-n)}var i=function(r){for(var i=1;!n(Math.round(r*i)/i,r);)i*=10;return i}(r),a=r*i,o=Math.abs(function r(i,a){return n(a,0)?i:r(a,i%a)}(a,i));return[Math.round(a/o),Math.round(i/o)]}(s);if(l[1]>=100)n.text=tb(u.deg2rad(n.x),r,o,a);else{var c=n.x<0;1===l[1]?1===l[0]?n.text="π":n.text=l[0]+"π":n.text=["<sup>",l[0],"</sup>","⁄","<sub>",l[1],"</sub>","π"].join(""),c&&(n.text=I+n.text)}}}}(r,v,i,y,T):("never"===(p=T)?p="":"all"===r.showexponent&&1e-6>Math.abs(v.x/r.dtick)&&(p="hide"),v.text=tb(v.x,r,p,y)),a||(r.tickprefix&&!w(r.showtickprefix)&&(v.text=r.tickprefix+v.text),r.ticksuffix&&!w(r.showticksuffix)&&(v.text+=r.ticksuffix)),r.labelalias&&r.labelalias.hasOwnProperty(v.text)){var k=r.labelalias[v.text];"string"==typeof k&&(v.text=k)}if("boundaries"===r.tickson||r.showdividers){var A=function(n){var i=r.l2p(n);return i>=0&&i<=r._length?n:null};v.xbnd=[A(v.x-.5),A(v.x+r.dtick-.5)]}return v},Z.hoverLabelText=function(r,n,i){i&&(r=u.extendFlat({},r,{hoverformat:i}));var a=u.isArrayOrTypedArray(n)?n[0]:n,o=u.isArrayOrTypedArray(n)?n[1]:void 0;if(void 0!==o&&o!==a)return Z.hoverLabelText(r,a,i)+" - "+Z.hoverLabelText(r,o,i);var s="log"===r.type&&a<=0,l=Z.tickText(r,r.c2l(s?-a:a),"hover").text;return s?0===a?"0":I+l:l};var ty=["f","p","n","μ","m","","k","M","G","T"];function tm(r){return"SI"===r||"B"===r}function tx(r){return r>14||r<-15}function tb(r,n,i,a){var s=r<0,l=n._tickround,c=i||n.exponentformat||"B",f=n._tickexponent,h=Z.getTickFormat(n),p=n.separatethousands;if(a){var d={exponentformat:c,minexponent:n.minexponent,dtick:"none"===n.showexponent?n.dtick:o(r)&&Math.abs(r)||1,range:"none"===n.showexponent?n.range.map(n.r2d):[0,r||1]};tv(d),l=(Number(d._tickround)||0)+4,f=d._tickexponent,n.hoverformat&&(h=n.hoverformat)}if(h)return n._numFormat(h)(r).replace(/-/g,I);var v,g=Math.pow(10,-l)/2;if("none"===c&&(f=0),(r=Math.abs(r))<g)r="0",s=!1;else{if(r+=g,f&&(r*=Math.pow(10,-f),l+=f),0===l)r=String(Math.floor(r));else if(l<0){r=(r=String(Math.round(r))).substr(0,r.length+l);for(var y=l;y<0;y++)r+="0"}else{var m=(r=String(r)).indexOf(".")+1;m&&(r=r.substr(0,m+l).replace(/\.?0+$/,""))}r=u.numSeparate(r,n._separators,p)}return f&&"hide"!==c&&(tm(c)&&tx(f)&&(c="power"),v=f<0?I+-f:"power"!==c?"+"+f:String(f),"e"===c||"E"===c?r+=c+v:"power"===c?r+="\xd710<sup>"+v+"</sup>":"B"===c&&9===f?r+="B":tm(c)&&(r+=ty[f/3+5])),s?I+r:r}function t_(r,n){if(r){var i=Object.keys(j).reduce(function(r,i){return -1!==n.indexOf(i)&&j[i].forEach(function(n){r[n]=1}),r},{});Object.keys(r).forEach(function(n){i[n]||(1===n.length?r[n]=0:delete r[n])})}}function tw(r){return void 0!==r.periodX?r.periodX:r.x}function tT(r){return[r.text,r.x,r.axInfo,r.font,r.fontSize,r.fontColor].join("_")}function tk(r){var n=r.title.font.size,i=(r.title.text.match(f.BR_TAG_ALL)||[]).length;return r.title.hasOwnProperty("standoff")?i?n*(H+i*q):n*H:i?n*(i+1)*q:n}function tA(r,n){var i=r.l2p(n);return i>1&&i<r._length-1}function tM(r){var n=a.select(r),i=n.select(".text-math-group");return i.empty()?n.select("text"):i}function tS(r){return r._id+".automargin"}function tE(r){return tS(r)+".mirror"}function tL(r){return r._id+".rangeslider"}function tC(r,n){for(var i=0;i<n.length;i++)-1===r.indexOf(n[i])&&r.push(n[i])}function tO(r){return"angularaxis"===r._id}function tP(r,n){for(var i=n._rangebreaks.length,a=0;a<i;a++){var o=n._rangebreaks[a];if(r>=o.min&&r<o.max)return o.max}return r}function tI(r){return -1!==(r.ticklabelposition||"").indexOf("inside")}function tD(r,n){tI(r._anchorAxis||{})&&r._hideCounterAxisInsideTickLabels&&r._hideCounterAxisInsideTickLabels(n)}function tz(r,n,i,a){var o,s="free"===r.anchor||void 0!==r.overlaying&&!1!==r.overlaying?r.overlaying:r._id;o=a?"right"===r.side?n:-n:n,s in i||(i[s]={}),r.side in i[s]||(i[s][r.side]=0),i[s][r.side]+=o}Z.getTickFormat=function(r){var n,i,a,o,s,l,u,c;function f(r){return"string"!=typeof r?r:Number(r.replace("M",""))*A}function h(r,n){var i=["L","D"];if(typeof r==typeof n){if("number"==typeof r)return r-n;var a=i.indexOf(r.charAt(0)),o=i.indexOf(n.charAt(0));return a===o?Number(r.replace(/(L|D)/g,""))-Number(n.replace(/(L|D)/g,"")):a-o}return"number"==typeof r?1:-1}if(r.tickformatstops&&r.tickformatstops.length>0)switch(r.type){case"date":case"linear":for(n=0;n<r.tickformatstops.length;n++)if((a=r.tickformatstops[n]).enabled&&(o=r.dtick,s=a.dtickrange,l=void 0,u=void 0,c=void 0,l=f||function(r){return r},u=s[0],c=s[1],(!u&&"number"!=typeof u||l(u)<=l(o))&&(!c&&"number"!=typeof c||l(c)>=l(o)))){i=a;break}break;case"log":for(n=0;n<r.tickformatstops.length;n++)if((a=r.tickformatstops[n]).enabled&&function(r,n){var i=null===n[0],a=null===n[1],o=h(r,n[0])>=0,s=0>=h(r,n[1]);return(i||o)&&(a||s)}(r.dtick,a.dtickrange)){i=a;break}}return i?i.value:r.tickformat},Z.getSubplots=function(r,n){var i=r._fullLayout._subplots,a=i.cartesian.concat(i.gl2d||[]),o=n?Z.findSubplotsWithAxis(a,n):a;return o.sort(function(r,n){var i=r.substr(1).split("y"),a=n.substr(1).split("y");return i[0]===a[0]?+i[1]-+a[1]:+i[0]-+a[0]}),o},Z.findSubplotsWithAxis=function(r,n){for(var i=new RegExp("x"===n._id.charAt(0)?"^"+n._id+"y":n._id+"$"),a=[],o=0;o<r.length;o++){var s=r[o];i.test(s)&&a.push(s)}return a},Z.makeClipPaths=function(r){var n=r._fullLayout;if(!n._hasOnlyLargeSploms){var i,o,s={_offset:0,_length:n.width,_id:""},l={_offset:0,_length:n.height,_id:""},u=Z.list(r,"x",!0),c=Z.list(r,"y",!0),f=[];for(i=0;i<u.length;i++)for(f.push({x:u[i],y:l}),o=0;o<c.length;o++)0===i&&f.push({x:s,y:c[o]}),f.push({x:u[i],y:c[o]});var h=n._clips.selectAll(".axesclip").data(f,function(r){return r.x._id+r.y._id});h.enter().append("clipPath").classed("axesclip",!0).attr("id",function(r){return"clip"+n._uid+r.x._id+r.y._id}).append("rect"),h.exit().remove(),h.each(function(r){a.select(this).select("rect").attr({x:r.x._offset||0,y:r.y._offset||0,width:r.x._length||1,height:r.y._length||1})})}},Z.draw=function(r,n,i){var a=r._fullLayout;"redraw"===n&&a._paper.selectAll("g.subplot").each(function(r){var n=r[0],i=a._plots[n];if(i){var o=i.xaxis,s=i.yaxis;i.xaxislayer.selectAll("."+o._id+"tick").remove(),i.yaxislayer.selectAll("."+s._id+"tick").remove(),i.xaxislayer.selectAll("."+o._id+"tick2").remove(),i.yaxislayer.selectAll("."+s._id+"tick2").remove(),i.xaxislayer.selectAll("."+o._id+"divider").remove(),i.yaxislayer.selectAll("."+s._id+"divider").remove(),i.minorGridlayer&&i.minorGridlayer.selectAll("path").remove(),i.gridlayer&&i.gridlayer.selectAll("path").remove(),i.zerolinelayer&&i.zerolinelayer.selectAll("path").remove(),a._infolayer.select(".g-"+o._id+"title").remove(),a._infolayer.select(".g-"+s._id+"title").remove()}});var o=n&&"redraw"!==n?n:Z.listIds(r),s=Z.list(r).filter(function(r){return r.autoshift}).map(function(r){return r.overlaying});o.map(function(n){var i=Z.getFromId(r,n);if("sync"===i.tickmode&&i.overlaying){var a=o.findIndex(function(r){return r===i.overlaying});a>=0&&o.unshift(o.splice(a,1).shift())}});var l={false:{left:0,right:0}};return u.syncOrAsync(o.map(function(n){return function(){if(n){var a=Z.getFromId(r,n);i||(i={}),i.axShifts=l,i.overlayingShiftedAx=s;var o=Z.drawOne(r,a,i);return a._shiftPusher&&tz(a,a._fullDepth||0,l,!0),a._r=a.range.slice(),a._rl=u.simpleMap(a._r,a.r2l),o}}}))},Z.drawOne=function(r,n,i){var a,o,c,f=(i=i||{}).axShifts||{},v=i.overlayingShiftedAx||[];n.setScale();var g=r._fullLayout,y=n._id,m=y.charAt(0),x=Z.counterLetter(y),b=g._plots[n._mainSubplot];if(b){if(n._shiftPusher=n.autoshift||-1!==v.indexOf(n._id)||-1!==v.indexOf(n.overlaying),n._shiftPusher&"free"===n.anchor){var _=n.linewidth/2||0;"inside"===n.ticks&&(_+=n.ticklen),tz(n,_,f,!0),tz(n,n.shift||0,f,!1)}!0===i.skipTitle&&void 0!==n._shift||(n._shift=n.autoshift?f[n.overlaying][n.side]:n.shift||0);var w=b[m+"axislayer"],T=n._mainLinePosition,k=T+=n._shift,A=n._mainMirrorPosition,M=n._vals=Z.calcTicks(n),S=[n.mirror,k,A].join("_");for(a=0;a<M.length;a++)M[a].axInfo=S;n._selections={},n._tickAngles&&(n._prevTickAngles=n._tickAngles),n._tickAngles={},n._depth=null;var E={};if(n.visible){var L,C,O=Z.makeTransTickFn(n),P=Z.makeTransTickLabelFn(n),I="inside"===n.ticks,D="outside"===n.ticks;if("boundaries"===n.tickson){var z=function(r,n){var i,a=[],o=function(r,n){var i=r.xbnd[n];null!==i&&a.push(u.extendFlat({},r,{x:i}))};if(n.length){for(i=0;i<n.length;i++)o(n[i],0);o(n[i-1],1)}return a}(0,M);C=Z.clipEnds(n,z),L=I?C:z}else C=Z.clipEnds(n,M),L=I&&"period"!==n.ticklabelmode?C:M;var R,F=n._gridVals=C,B=function(r,n){var i,a,o=[],s=n.length&&n[n.length-1].x<n[0].x,l=function(r,n){var i=r.xbnd[n];null!==i&&o.push(u.extendFlat({},r,{x:i}))};if(r.showdividers&&n.length){for(i=0;i<n.length;i++){var c=n[i];c.text2!==a&&l(c,s?1:0),a=c.text2}l(n[i-1],s?0:1)}return o}(n,M);if(!g._hasOnlyLargeSploms){var N=n._subplotsWith,j={};for(a=0;a<N.length;a++){o=N[a];var U=(c=g._plots[o])[x+"axis"],V=U._mainAxis._id;if(!j[V]){j[V]=1;var H="x"===m?"M0,"+U._offset+"v"+U._length:"M"+U._offset+",0h"+U._length;Z.drawGrid(r,n,{vals:F,counterAxis:U,layer:c.gridlayer.select("."+y),minorLayer:c.minorGridlayer.select("."+y),path:H,transFn:O}),Z.drawZeroLine(r,n,{counterAxis:U,layer:c.zerolinelayer,path:H,transFn:O})}}}var Y=Z.getTickSigns(n),W=Z.getTickSigns(n,"minor");if(n.ticks||n.minor&&n.minor.ticks){var X,J,K,$,Q=Z.makeTickPath(n,k,Y[2]),tt=Z.makeTickPath(n,k,W[2],{minor:!0});if(n._anchorAxis&&n.mirror&&!0!==n.mirror?(X=Z.makeTickPath(n,A,Y[3]),J=Z.makeTickPath(n,A,W[3],{minor:!0}),K=Q+X,$=tt+J):(X="",J="",K=Q,$=tt),n.showdividers&&D&&"boundaries"===n.tickson){var te={};for(a=0;a<B.length;a++)te[B[a].x]=1;R=function(r){return te[r.x]?X:K}}else R=function(r){return r.minor?$:K}}if(Z.drawTicks(r,n,{vals:L,layer:w,path:R,transFn:O}),"allticks"===n.mirror){var tr=Object.keys(n._linepositions||{});for(a=0;a<tr.length;a++){o=tr[a],c=g._plots[o];var tn=n._linepositions[o]||[],ti=tn[0],ta=tn[1],to=tn[2],ts=Z.makeTickPath(n,ti,to?Y[0]:W[0],{minor:to})+Z.makeTickPath(n,ta,to?Y[1]:W[1],{minor:to});Z.drawTicks(r,n,{vals:L,layer:c[m+"axislayer"],path:ts,transFn:O})}}var tl=[];if(tl.push(function(){return Z.drawLabels(r,n,{vals:M,layer:w,plotinfo:c,transFn:P,labelFns:Z.makeLabelFns(n,k)})}),"multicategory"===n.type){var tu={x:2,y:10}[m];tl.push(function(){var i=tf()[({x:"height",y:"width"})[m]]+tu+(n._tickAngles[y+"tick"]?n.tickfont.size*q:0);return Z.drawLabels(r,n,{vals:function(r,n){for(var i=[],a={},o=0;o<n.length;o++){var s=n[o];a[s.text2]?a[s.text2].push(s.x):a[s.text2]=[s.x]}for(var l in a)i.push(tg(r,u.interp(a[l],.5),l));return i}(n,M),layer:w,cls:y+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:O,labelFns:Z.makeLabelFns(n,k+i*Y[4])})}),tl.push(function(){var i,a,o,s;return n._depth=Y[4]*(tf("tick2")[n.side]-k),i={vals:B,layer:w,path:Z.makeTickPath(n,k,Y[4],{len:n._depth}),transFn:O},a=n._id+"divider",o=i.vals,void((s=i.layer.selectAll("path."+a).data(o,tT)).exit().remove(),s.enter().insert("path",":first-child").classed(a,1).classed("crisp",1).call(p.stroke,n.dividercolor).style("stroke-width",d.crispRound(r,n.dividerwidth,1)+"px"),s.attr("transform",i.transFn).attr("d",i.path))})}else n.title.hasOwnProperty("standoff")&&tl.push(function(){n._depth=Y[4]*(tf()[n.side]-k)});var tc=l.getComponentMethod("rangeslider","isVisible")(n);return i.skipTitle||tc&&"bottom"===n.side||tl.push(function(){return function(r,n){var i,a=r._fullLayout,o=n._id,s=o.charAt(0),l=n.title.font.size;if(n.title.hasOwnProperty("standoff"))i=n._depth+n.title.standoff+tk(n);else{var u=tI(n);if("multicategory"===n.type)i=n._depth;else{var c=1.5*l;u&&(c=.5*l,"outside"===n.ticks&&(c+=n.ticklen)),i=10+c+(n.linewidth?n.linewidth-1:0)}u||(i+="x"===s?"top"===n.side?l*(n.showticklabels?1:0):l*(n.showticklabels?1.5:.5):"right"===n.side?l*(n.showticklabels?1:.5):l*(n.showticklabels?.5:0))}var f,p,v,g,y=Z.getPxPosition(r,n);if("x"===s?(p=n._offset+n._length/2,v="top"===n.side?y-i:y+i):(v=n._offset+n._length/2,p="right"===n.side?y+i:y-i,f={rotate:"-90",offset:0}),"multicategory"!==n.type){var m=n._selections[n._id+"tick"];if(g={selection:m,side:n.side},m&&m.node()&&m.node().parentNode){var x=d.getTranslate(m.node().parentNode);g.offsetLeft=x.x,g.offsetTop=x.y}n.title.hasOwnProperty("standoff")&&(g.pad=0)}return n._titleStandoff=i,h.draw(r,o+"title",{propContainer:n,propName:n._name+".title.text",placeholder:a._dfltTitle[s],avoid:g,transform:f,attributes:{x:p,y:v,"text-anchor":"middle"}})}(r,n)}),tl.push(function(){var i,a,o,u,c=n.side.charAt(0),f=G[n.side].charAt(0),h=Z.getPxPosition(r,n),p=D?n.ticklen:0;(n.automargin||tc||n._shiftPusher)&&("multicategory"===n.type?i=tf("tick2"):(i=tf(),"x"===m&&"b"===c&&(n._depth=Math.max(i.width>0?i.bottom-h:0,p))));var d=0,v=0;if(n._shiftPusher&&(d=Math.max(p,i.height>0?"l"===c?h-i.left:i.right-h:0),n.title.text!==g._dfltTitle[m]&&(v=(n._titleStandoff||0)+(n._titleScoot||0),"l"===c&&(v+=tk(n))),n._fullDepth=Math.max(d,v)),n.automargin){a={x:0,y:0,r:0,l:0,t:0,b:0};var y=[0,1],b="number"==typeof n._shift?n._shift:0;if("x"===m){if("b"===c?a[c]=n._depth:(a[c]=n._depth=Math.max(i.width>0?h-i.top:0,p),y.reverse()),i.width>0){var _=i.right-(n._offset+n._length);_>0&&(a.xr=1,a.r=_);var w=n._offset-i.left;w>0&&(a.xl=0,a.l=w)}}else if("l"===c?(n._depth=Math.max(i.height>0?h-i.left:0,p),a[c]=n._depth-b):(n._depth=Math.max(i.height>0?i.right-h:0,p),a[c]=n._depth+b,y.reverse()),i.height>0){var T=i.bottom-(n._offset+n._length);T>0&&(a.yb=0,a.b=T);var k=n._offset-i.top;k>0&&(a.yt=1,a.t=k)}a[x]="free"===n.anchor?n.position:n._anchorAxis.domain[y[0]],n.title.text!==g._dfltTitle[m]&&(a[c]+=tk(n)+(n.title.standoff||0)),n.mirror&&"free"!==n.anchor&&((o={x:0,y:0,r:0,l:0,t:0,b:0})[f]=n.linewidth,n.mirror&&!0!==n.mirror&&(o[f]+=p),!0===n.mirror||"ticks"===n.mirror?o[x]=n._anchorAxis.domain[y[1]]:"all"!==n.mirror&&"allticks"!==n.mirror||(o[x]=[n._counterDomainMin,n._counterDomainMax][y[1]]))}tc&&(u=l.getComponentMethod("rangeslider","autoMarginOpts")(r,n)),"string"==typeof n.automargin&&(t_(a,n.automargin),t_(o,n.automargin)),s.autoMargin(r,tS(n),a),s.autoMargin(r,tE(n),o),s.autoMargin(r,tL(n),u)}),u.syncOrAsync(tl)}}function tf(r){var i,a,o,s,l=y+(r||"tick");return E[l]||(E[l]=(n._selections[l].size()?(i=1/0,a=-1/0,o=1/0,s=-1/0,n._selections[l].each(function(){var r=tM(this),n=d.bBox(r.node().parentNode);i=Math.min(i,n.top),a=Math.max(a,n.bottom),o=Math.min(o,n.left),s=Math.max(s,n.right)})):(i=0,a=0,o=0,s=0),{top:i,bottom:a,left:o,right:s,height:a-i,width:s-o})),E[l]}},Z.getTickSigns=function(r,n){var i=r._id.charAt(0),a=r.side===({x:"top",y:"right"})[i]?1:-1,o=[-1,1,a,-a];return"inside"!==(n?(r.minor||{}).ticks:r.ticks)==("x"===i)&&(o=o.map(function(r){return-r})),r.side&&o.push({l:-1,t:-1,r:1,b:1}[r.side.charAt(0)]),o},Z.makeTransTickFn=function(r){return"x"===r._id.charAt(0)?function(n){return c(r._offset+r.l2p(n.x),0)}:function(n){return c(0,r._offset+r.l2p(n.x))}},Z.makeTransTickLabelFn=function(r){var n=function(r){var n=r.ticklabelposition||"",i=function(r){return -1!==n.indexOf(r)},a=i("top"),o=i("left"),s=i("right"),l=i("bottom"),u=i("inside"),c=l||o||a||s;if(!c&&!u)return[0,0];var f=r.side,h=c?(r.tickwidth||0)/2:0,p=3,d=r.tickfont?r.tickfont.size:12;return(l||a)&&(h+=d*H,p+=(r.linewidth||0)/2),(o||s)&&(h+=(r.linewidth||0)/2,p+=3),u&&"top"===f&&(p-=d*(1-H)),(o||a)&&(h=-h),"bottom"!==f&&"right"!==f||(p=-p),[c?h:0,u?p:0]}(r),i=n[0],a=n[1];return"x"===r._id.charAt(0)?function(n){return c(i+r._offset+r.l2p(tw(n)),a)}:function(n){return c(a,i+r._offset+r.l2p(tw(n)))}},Z.makeTickPath=function(r,n,i,a){a||(a={});var o=a.minor;if(o&&!r.minor)return"";var s=void 0!==a.len?a.len:o?r.minor.ticklen:r.ticklen,l=r._id.charAt(0),u=(r.linewidth||1)/2;return"x"===l?"M0,"+(n+u*i)+"v"+s*i:"M"+(n+u*i)+",0h"+s*i},Z.makeLabelFns=function(r,n,i){var a=r.ticklabelposition||"",s=function(r){return -1!==a.indexOf(r)},l=s("top"),c=s("left"),f=s("right"),h=s("bottom")||c||l||f,p=s("inside"),d="inside"===a&&"inside"===r.ticks||!p&&"outside"===r.ticks&&"boundaries"!==r.tickson,v=0,g=0,y=d?r.ticklen:0;if(p?y*=-1:h&&(y=0),d&&(v+=y,i)){var m=u.deg2rad(i);v=y*Math.cos(m)+1,g=y*Math.sin(m)}r.showticklabels&&(d||r.showline)&&(v+=.2*r.tickfont.size);var x,b,_,w,T,k={labelStandoff:v+=(r.linewidth||1)/2*(p?-1:1),labelShift:g},A=0,M=r.side,S=r._id.charAt(0),E=r.tickangle;if("x"===S)w=(T=!p&&"bottom"===M||p&&"top"===M)?1:-1,p&&(w*=-1),x=g*w,b=n+v*w,_=T?1:-.2,90===Math.abs(E)&&(p?_+=V:_=-90===E&&"bottom"===M?H:90===E&&"top"===M?V:.5,A=V/2*(E/90)),k.xFn=function(r){return r.dx+x+A*r.fontSize},k.yFn=function(r){return r.dy+b+r.fontSize*_},k.anchorFn=function(r,n){if(h){if(c)return"end";if(f)return"start"}return o(n)&&0!==n&&180!==n?n*w<0!==p?"end":"start":"middle"},k.heightFn=function(n,i,a){return i<-60||i>60?-.5*a:"top"===r.side!==p?-a:0};else if("y"===S){if(w=(T=!p&&"left"===M||p&&"right"===M)?1:-1,p&&(w*=-1),x=v,b=g*w,_=0,p||90!==Math.abs(E)||(_=-90===E&&"left"===M||90===E&&"right"===M?H:.5),p){var L=o(E)?+E:0;0!==L&&(A=Math.abs(Math.sin(u.deg2rad(L)))*H*w,_=0)}k.xFn=function(r){return r.dx+n-(x+r.fontSize*_)*w+A*r.fontSize},k.yFn=function(r){return r.dy+b+r.fontSize*V},k.anchorFn=function(r,n){return o(n)&&90===Math.abs(n)?"middle":T?"end":"start"},k.heightFn=function(n,i,a){return"right"===r.side&&(i*=-1),i<-30?-a:i<30?-.5*a:0}}return k},Z.drawTicks=function(r,n,i){i=i||{};var o=n._id+"tick",s=[].concat(n.minor&&n.minor.ticks?i.vals.filter(function(r){return r.minor&&!r.noTick}):[]).concat(n.ticks?i.vals.filter(function(r){return!r.minor&&!r.noTick}):[]),l=i.layer.selectAll("path."+o).data(s,tT);l.exit().remove(),l.enter().append("path").classed(o,1).classed("ticks",1).classed("crisp",!1!==i.crisp).each(function(r){return p.stroke(a.select(this),r.minor?n.minor.tickcolor:n.tickcolor)}).style("stroke-width",function(i){return d.crispRound(r,i.minor?n.minor.tickwidth:n.tickwidth,1)+"px"}).attr("d",i.path).style("display",null),tD(n,[B]),l.attr("transform",i.transFn)},Z.drawGrid=function(r,n,i){if(i=i||{},"sync"!==n.tickmode){var o=n._id+"grid",s=n.minor&&n.minor.showgrid,l=s?i.vals.filter(function(r){return r.minor}):[],u=n.showgrid?i.vals.filter(function(r){return!r.minor}):[],c=i.counterAxis;if(c&&Z.shouldShowZeroLine(r,n,c))for(var f="array"===n.tickmode,h=0;h<u.length;h++){var v=u[h].x;if(f?!v:Math.abs(v)<n.dtick/100){if(u=u.slice(0,h).concat(u.slice(h+1)),!f)break;h--}}n._gw=d.crispRound(r,n.gridwidth,1);for(var g=s?d.crispRound(r,n.minor.gridwidth,1):0,y=i.layer,m=i.minorLayer,x=1;x>=0;x--){var b=x?y:m;if(b){var _=b.selectAll("path."+o).data(x?u:l,tT);_.exit().remove(),_.enter().append("path").classed(o,1).classed("crisp",!1!==i.crisp),_.attr("transform",i.transFn).attr("d",i.path).each(function(r){return p.stroke(a.select(this),r.minor?n.minor.gridcolor:n.gridcolor||"#ddd")}).style("stroke-dasharray",function(r){return d.dashStyle(r.minor?n.minor.griddash:n.griddash,r.minor?n.minor.gridwidth:n.gridwidth)}).style("stroke-width",function(r){return(r.minor?g:n._gw)+"px"}).style("display",null),"function"==typeof i.path&&_.attr("d",i.path)}}tD(n,[R,F])}},Z.drawZeroLine=function(r,n,i){i=i||i;var a=n._id+"zl",o=Z.shouldShowZeroLine(r,n,i.counterAxis),s=i.layer.selectAll("path."+a).data(o?[{x:0,id:n._id}]:[]);s.exit().remove(),s.enter().append("path").classed(a,1).classed("zl",1).classed("crisp",!1!==i.crisp).each(function(){i.layer.selectAll("path").sort(function(r,n){return X(r.id,n.id)})}),s.attr("transform",i.transFn).attr("d",i.path).call(p.stroke,n.zerolinecolor||p.defaultLine).style("stroke-width",d.crispRound(r,n.zerolinewidth,n._gw||1)+"px").style("display",null),tD(n,[z])},Z.drawLabels=function(r,n,i){i=i||{};var s=r._fullLayout,l=n._id,h=l.charAt(0),p=i.cls||l+"tick",v=i.vals.filter(function(r){return r.text}),g=i.labelFns,y=i.secondary?0:n.tickangle,m=(n._prevTickAngles||{})[p],x=i.layer.selectAll("g."+p).data(n.showticklabels?v:[],tT),b=[];function _(r,s){r.each(function(r){var l=a.select(this),u=l.select(".text-math-group"),h=g.anchorFn(r,s),p=i.transFn.call(l.node(),r)+(o(s)&&0!=+s?" rotate("+s+","+g.xFn(r)+","+(g.yFn(r)-r.fontSize/2)+")":""),v=f.lineCount(l),y=q*r.fontSize,m=g.heightFn(r,o(s)?+s:0,(v-1)*y);if(m&&(p+=c(0,m)),u.empty()){var x=l.select("text");x.attr({transform:p,"text-anchor":h}),x.style("opacity",1),n._adjustTickLabelsOverflow&&n._adjustTickLabelsOverflow()}else{var b=d.bBox(u.node()).width*({end:-.5,start:.5})[h];u.attr("transform",p+c(b,0))}})}x.enter().append("g").classed(p,1).append("text").attr("text-anchor","middle").each(function(n){var i=a.select(this),o=r._promises.length;i.call(f.positionText,g.xFn(n),g.yFn(n)).call(d.font,n.font,n.fontSize,n.fontColor).text(n.text).call(f.convertToTspans,r),r._promises[o]?b.push(r._promises.pop().then(function(){_(i,y)})):_(i,y)}),tD(n,[N]),x.exit().remove(),i.repositionOnUpdate&&x.each(function(r){a.select(this).select("text").call(f.positionText,g.xFn(r),g.yFn(r))}),n._adjustTickLabelsOverflow=function(){var i=n.ticklabeloverflow;if(i&&"allow"!==i){var o=-1!==i.indexOf("hide"),l="x"===n._id.charAt(0),c=0,f=l?r._fullLayout.width:r._fullLayout.height;if(-1!==i.indexOf("domain")){var h=u.simpleMap(n.range,n.r2l);c=n.l2p(h[0])+n._offset,f=n.l2p(h[1])+n._offset}var p=Math.min(c,f),v=Math.max(c,f),g=n.side,y=1/0,m=-1/0;for(var b in x.each(function(r){var i=a.select(this);if(i.select(".text-math-group").empty()){var s=d.bBox(i.node()),u=0;l?(s.right>v||s.left<p)&&(u=1):(s.bottom>v||s.top+(n.tickangle?0:r.fontSize/4)<p)&&(u=1);var c=i.select("text");u?o&&c.style("opacity",0):(c.style("opacity",1),y="bottom"===g||"right"===g?Math.min(y,l?s.top:s.left):-1/0,m="top"===g||"left"===g?Math.max(m,l?s.bottom:s.right):1/0)}}),s._plots){var _=s._plots[b];if(n._id===_.xaxis._id||n._id===_.yaxis._id){var w=l?_.yaxis:_.xaxis;w&&(w["_visibleLabelMin_"+n._id]=y,w["_visibleLabelMax_"+n._id]=m)}}}},n._hideCounterAxisInsideTickLabels=function(r){var i="x"===n._id.charAt(0),o=[];for(var l in s._plots){var u=s._plots[l];n._id!==u.xaxis._id&&n._id!==u.yaxis._id||o.push(i?u.yaxis:u.xaxis)}o.forEach(function(i,o){i&&tI(i)&&(r||[z,F,R,B,N]).forEach(function(r){var l="tick"===r.K&&"text"===r.L&&"period"===n.ticklabelmode,u=s._plots[n._mainSubplot];(r.K===z.K?u.zerolinelayer.selectAll("."+n._id+"zl"):r.K===F.K?u.minorGridlayer.selectAll("."+n._id):r.K===R.K?u.gridlayer.selectAll("."+n._id):u[n._id.charAt(0)+"axislayer"]).each(function(){var s=a.select(this);r.L&&(s=s.selectAll(r.L)),s.each(function(s){var u=n.l2p(l?tw(s):s.x)+n._offset,c=a.select(this);u<n["_visibleLabelMax_"+i._id]&&u>n["_visibleLabelMin_"+i._id]?c.style("display","none"):"tick"!==r.K||o||c.style("display",null)})})})})},_(x,m+1?m:y);var w=null;n._selections&&(n._selections[p]=x);var T=[function(){return b.length&&Promise.all(b)}];n.automargin&&s._redrawFromAutoMarginCount&&90===m?(w=90,T.push(function(){_(x,m)})):T.push(function(){if(_(x,y),v.length&&"x"===h&&!o(y)&&("log"!==n.type||"D"!==String(n.dtick).charAt(0))){w=0;var r,a=0,s=[];if(x.each(function(r){a=Math.max(a,r.fontSize);var i=n.l2p(r.x),o=tM(this),l=d.bBox(o.node());s.push({top:0,bottom:10,height:10,left:i-l.width/2,right:i+l.width/2+2,width:l.width+2})}),"boundaries"!==n.tickson&&!n.showdividers||i.secondary){var l=v.length,c=Math.abs((v[l-1].x-v[0].x)*n._m)/(l-1),f=n.ticklabelposition||"",p=function(r){return -1!==f.indexOf(r)},g=p("top"),m=p("left"),b=p("right"),T=p("bottom")||m||g||b?(n.tickwidth||0)+6:0,k=c<2.5*a||"multicategory"===n.type||"realaxis"===n._name;for(r=0;r<s.length-1;r++)if(u.bBoxIntersect(s[r],s[r+1],T)){w=k?90:30;break}}else{var A=2;for(n.ticks&&(A+=n.tickwidth/2),r=0;r<s.length;r++){var M=v[r].xbnd,S=s[r];if(null!==M[0]&&S.left-n.l2p(M[0])<A||null!==M[1]&&n.l2p(M[1])-S.right<A){w=90;break}}}w&&_(x,w)}}),n._tickAngles&&T.push(function(){n._tickAngles[p]=null===w?o(y)?y:0:w});var k=function(){var r=0,i=0;return x.each(function(a,o){var s,l=tM(this);l.select(".text-math-group").empty()&&(n._vals[o]&&(s=n._vals[o].bb||d.bBox(l.node()),n._vals[o].bb=s),r=Math.max(r,s.width),i=Math.max(i,s.height))}),{labelsMaxW:r,labelsMaxH:i}},A=n._anchorAxis;if(A&&(A.autorange||A.insiderange)&&tI(n)&&!J(s,n._id)&&(s._insideTickLabelsUpdaterange||(s._insideTickLabelsUpdaterange={}),A.autorange&&(s._insideTickLabelsUpdaterange[A._name+".autorange"]=A.autorange,T.push(k)),A.insiderange)){var M=k(),S="y"===n._id.charAt(0)?M.labelsMaxW:M.labelsMaxH;S+=6,"inside"===n.ticklabelposition&&(S+=n.ticklen||0);var E="right"===n.side||"top"===n.side?1:-1,L=1===E?1:0,C=1===E?0:1,O=[];O[C]=A.range[C];var P=A.d2p(A.range[L]),I=Math.abs(A.d2p(A.range[C])-P);I-S>0?S*=1+S/(I-=S):S=0,"y"!==n._id.charAt(0)&&(S=-S),O[L]=A.p2d(A.d2p(A.range[L])+E*S),"min"===A.autorange||"max reversed"===A.autorange?(O[0]=null,A._rangeInitial0=void 0,A._rangeInitial1=void 0):"max"!==A.autorange&&"min reversed"!==A.autorange||(O[1]=null,A._rangeInitial0=void 0,A._rangeInitial1=void 0),s._insideTickLabelsUpdaterange[A._name+".range"]=O}var D=u.syncOrAsync(T);return D&&D.then&&r._promises.push(D),D},Z.getPxPosition=function(r,n){var i,a=r._fullLayout._size,o=n._id.charAt(0),s=n.side;return"free"!==n.anchor?i=n._anchorAxis:"x"===o?i={_offset:a.t+(1-(n.position||0))*a.h,_length:0}:"y"===o&&(i={_offset:a.l+(n.position||0)*a.w+n._shift,_length:0}),"top"===s||"left"===s?i._offset:"bottom"===s||"right"===s?i._offset+i._length:void 0},Z.shouldShowZeroLine=function(r,n,i){var a=u.simpleMap(n.range,n.r2l);return a[0]*a[1]<=0&&n.zeroline&&("linear"===n.type||"-"===n.type)&&!(n.rangebreaks&&n.maskBreaks(0)===D)&&(tA(n,0)||!function(r,n,i,a){var o=i._mainAxis;if(o){var s=r._fullLayout,l=n._id.charAt(0),u=Z.counterLetter(n._id),c=n._offset+(Math.abs(a[0])<Math.abs(a[1])==("x"===l)?0:n._length),f=s._plots[i._mainSubplot];if(!(f.mainplotinfo||f).overlays.length)return v(i);for(var h=Z.list(r,u),p=0;p<h.length;p++){var d=h[p];if(d._mainAxis===o&&v(d))return!0}}function v(r){if(!r.showline||!r.linewidth)return!1;var i=Math.max((r.linewidth+n.zerolinewidth)/2,1);function a(r){return"number"==typeof r&&Math.abs(r-c)<i}if(a(r._mainLinePosition)||a(r._mainMirrorPosition))return!0;var o=r._linepositions||{};for(var s in o)if(a(o[s][0])||a(o[s][1]))return!0}}(r,n,i,a)||function(r,n){for(var i=r._fullData,a=n._mainSubplot,o=n._id.charAt(0),s=0;s<i.length;s++){var u=i[s];if(!0===u.visible&&u.xaxis+u.yaxis===a&&(l.traceIs(u,"bar-like")&&u.orientation===({x:"h",y:"v"})[o]||u.fill&&u.fill.charAt(u.fill.length-1)===o))return!0}return!1}(r,n))},Z.clipEnds=function(r,n){return n.filter(function(n){return tA(r,n.x)})},Z.allowAutoMargin=function(r){for(var n=Z.list(r,"",!0),i=0;i<n.length;i++){var a=n[i];a.automargin&&(s.allowAutoMargin(r,tS(a)),a.mirror&&s.allowAutoMargin(r,tE(a))),l.getComponentMethod("rangeslider","isVisible")(a)&&s.allowAutoMargin(r,tL(a))}},Z.swap=function(r,n){for(var i=function(r,n){var i,a,o=[];for(i=0;i<n.length;i++){var s=[],l=r._fullData[n[i]].xaxis,u=r._fullData[n[i]].yaxis;if(l&&u){for(a=0;a<o.length;a++)-1===o[a].x.indexOf(l)&&-1===o[a].y.indexOf(u)||s.push(a);if(s.length){var c,f=o[s[0]];if(s.length>1)for(a=1;a<s.length;a++)c=o[s[a]],tC(f.x,c.x),tC(f.y,c.y);tC(f.x,[l]),tC(f.y,[u])}else o.push({x:[l],y:[u]})}}return o}(r,n),a=0;a<i.length;a++)(function(r,n,i){var a,o,s=[],l=[],c=r.layout;for(a=0;a<n.length;a++)s.push(Z.getFromId(r,n[a]));for(a=0;a<i.length;a++)l.push(Z.getFromId(r,i[a]));var f=Object.keys(v),h=["anchor","domain","overlaying","position","side","tickangle","editType"],p=["linear","log"];for(a=0;a<f.length;a++){var d=f[a],g=s[0][d],y=l[0][d],m=!0,x=!1,b=!1;if("_"!==d.charAt(0)&&"function"!=typeof g&&-1===h.indexOf(d)){for(o=1;o<s.length&&m;o++){var _=s[o][d];"type"===d&&-1!==p.indexOf(g)&&-1!==p.indexOf(_)&&g!==_?x=!0:_!==g&&(m=!1)}for(o=1;o<l.length&&m;o++){var w=l[o][d];"type"===d&&-1!==p.indexOf(y)&&-1!==p.indexOf(w)&&y!==w?b=!0:l[o][d]!==y&&(m=!1)}m&&(x&&(c[s[0]._name].type="linear"),b&&(c[l[0]._name].type="linear"),function(r,n,i,a,o){var s,l=u.nestedProperty,c=l(r[i[0]._name],n).get(),f=l(r[a[0]._name],n).get();for("title"===n&&(c&&c.text===o.x&&(c.text=o.y),f&&f.text===o.y&&(f.text=o.x)),s=0;s<i.length;s++)l(r,i[s]._name+"."+n).set(f);for(s=0;s<a.length;s++)l(r,a[s]._name+"."+n).set(c)}(c,d,s,l,r._fullLayout._dfltTitle))}}for(a=0;a<r._fullLayout.annotations.length;a++){var T=r._fullLayout.annotations[a];-1!==n.indexOf(T.xref)&&-1!==i.indexOf(T.yref)&&u.swapAttrs(c.annotations[a],["?"])}})(r,i[a].x,i[a].y)}},4322:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(50606).BADNUM,l=o.isArrayOrTypedArray,u=o.isDateTime,c=o.cleanNumber,f=Math.round;function h(r){return Math.max(1,(r-1)/1e3)}r.exports=function(r,n,i){var o,p=r,d=i.noMultiCategory;if(l(p)&&!p.length)return"-";if(!d&&l((o=p)[0])&&l(o[1]))return"multicategory";if(d&&Array.isArray(p[0])){for(var v=[],g=0;g<p.length;g++)if(l(p[g]))for(var y=0;y<p[g].length;y++)v.push(p[g][y]);p=v}if(function(r,n){for(var i=r.length,o=h(i),s=0,l=0,c={},p=0;p<i;p+=o){var d=r[f(p)],v=String(d);c[v]||(c[v]=1,u(d,n)&&s++,a(d)&&l++)}return s>2*l}(p,n))return"date";var m="strict"!==i.autotypenumbers;return!function(r,n){for(var i=r.length,a=h(i),o=0,l=0,u={},p=0;p<i;p+=a){var d=r[f(p)],v=String(d);if(!u[v]){u[v]=1;var g=typeof d;"boolean"===g?l++:(n?c(d)!==s:"number"===g)?o++:"string"===g&&l++}}return l>2*o}(p,m)?!function(r,n){for(var i,o=r.length,s=0;s<o;s++)if(i=r[s],n?a(i):"number"==typeof i)return!0;return!1}(p,m)?"-":"linear":"category"}},71453:function(r,n,i){"use strict";var a=i(92770),o=i(73972),s=i(71828),l=i(44467),u=i(85501),c=i(13838),f=i(26218),h=i(38701),p=i(96115),d=i(89426),v=i(15258),g=i(92128),y=i(23608),m=i(21994),x=i(85555).WEEKDAY_PATTERN,b=i(85555).HOUR_PATTERN;function _(r,n,i){function o(i,a){return s.coerce(r,n,c.rangebreaks,i,a)}if(o("enabled")){var l=o("bounds");if(l&&l.length>=2){var u,f,h="";if(2===l.length){for(u=0;u<2;u++)if(f=T(l[u])){h=x;break}}var p=o("pattern",h);if(p===x)for(u=0;u<2;u++)(f=T(l[u]))&&(n.bounds[u]=l[u]=f-1);if(p)for(u=0;u<2;u++)switch(f=l[u],p){case x:if(!a(f)||(f=+f)!==Math.floor(f)||f<0||f>=7)return void(n.enabled=!1);n.bounds[u]=l[u]=f;break;case b:if(!a(f)||(f=+f)<0||f>24)return void(n.enabled=!1);n.bounds[u]=l[u]=f}if(!1===i.autorange){var d=i.range;if(d[0]<d[1]){if(l[0]<d[0]&&l[1]>d[1])return void(n.enabled=!1)}else if(l[0]>d[0]&&l[1]<d[1])return void(n.enabled=!1)}}else{var v=o("values");if(!v||!v.length)return void(n.enabled=!1);o("dvalue")}}}r.exports=function(r,n,i,a,b){var w,T=a.letter,k=a.font||{},A=a.splomStash||{},M=i("visible",!a.visibleDflt),S=n._template||{},E=n.type||S.type||"-";"date"===E&&(o.getComponentMethod("calendars","handleDefaults")(r,n,"calendar",a.calendar),a.noTicklabelmode||(w=i("ticklabelmode")));var L="";a.noTicklabelposition&&"multicategory"!==E||(L=s.coerce(r,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===w?["outside","inside"]:"x"===T?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),a.noTicklabeloverflow||i("ticklabeloverflow",-1!==L.indexOf("inside")?"hide past domain":"category"===E||"multicategory"===E?"allow":"hide past div"),m(n,b),y(r,n,i,a),v(r,n,i,a),"category"===E||a.noHover||i("hoverformat");var C=i("color"),O=C!==c.color.dflt?C:k.color,P=A.label||b._dfltTitle[T];if(d(r,n,i,E,a),!M)return n;i("title.text",P),s.coerceFont(i,"title.font",{family:k.family,size:s.bigFont(k.size),color:O}),f(r,n,i,E);var I=a.hasMinor;if(I&&(l.newContainer(n,"minor"),f(r,n,i,E,{isMinor:!0})),p(r,n,i,E,a),h(r,n,i,a),I){var D=a.isMinor;a.isMinor=!0,h(r,n,i,a),a.isMinor=D}g(r,n,i,{dfltColor:C,bgColor:a.bgColor,showGrid:a.showGrid,hasMinor:I,attributes:c}),!I||n.minor.ticks||n.minor.showgrid||delete n.minor,(n.showline||n.ticks)&&i("mirror");var z,R="multicategory"===E;if(!a.noTickson&&("category"===E||R)&&(n.ticks||n.showgrid)&&(R&&(z="boundaries"),"boundaries"!==i("tickson",z)||delete n.ticklabelposition),R&&i("showdividers")&&(i("dividercolor"),i("dividerwidth")),"date"===E){if(u(r,n,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:_}),n.rangebreaks.length){for(var F=0;F<n.rangebreaks.length;F++)if(n.rangebreaks[F].pattern===x){n._hasDayOfWeekBreaks=!0;break}if(m(n,b),b._has("scattergl")||b._has("splom"))for(var B=0;B<a.data.length;B++){var N=a.data[B];"scattergl"!==N.type&&"splom"!==N.type||(N.visible=!1,s.warn(N.type+" traces do not work on axes with rangebreaks. Setting trace "+N.index+" to `visible: false`."))}}else delete n.rangebreaks}return n};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function T(r){if("string"==typeof r)return w[r.substr(0,3).toLowerCase()]}},12663:function(r,n,i){"use strict";var a=i(31562),o=a.FORMAT_LINK,s=a.DATE_FORMAT_LINK;function l(r,n){return["Sets the "+r+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+o+"."].join(" ")}function u(r,n){return l(r,n)+[" And for dates see: "+s+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}r.exports={axisHoverFormat:function(r,n){return{valType:"string",dflt:"",editType:"none",description:(n?l:u)("hover text",r)+["By default the values are formatted using "+(n?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:l,descriptionWithDates:u}},41675:function(r,n,i){"use strict";var a=i(73972),o=i(85555);function s(r,n){if(n&&n.length){for(var i=0;i<n.length;i++)if(n[i][r])return!0}return!1}n.id2name=function(r){if("string"==typeof r&&r.match(o.AX_ID_PATTERN)){var n=r.split(" ")[0].substr(1);return"1"===n&&(n=""),r.charAt(0)+"axis"+n}},n.name2id=function(r){if(r.match(o.AX_NAME_PATTERN)){var n=r.substr(5);return"1"===n&&(n=""),r.charAt(0)+n}},n.cleanId=function(r,n,i){var a=/( domain)$/.test(r);if("string"==typeof r&&r.match(o.AX_ID_PATTERN)&&(!n||r.charAt(0)===n)&&(!a||i)){var s=r.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===s&&(s=""),r.charAt(0)+s+(a&&i?" domain":"")}},n.list=function(r,i,a){var o=r._fullLayout;if(!o)return[];var s,l=n.listIds(r,i),u=Array(l.length);for(s=0;s<l.length;s++){var c=l[s];u[s]=o[c.charAt(0)+"axis"+c.substr(1)]}if(!a){var f=o._subplots.gl3d||[];for(s=0;s<f.length;s++){var h=o[f[s]];i?u.push(h[i+"axis"]):u.push(h.xaxis,h.yaxis,h.zaxis)}}return u},n.listIds=function(r,n){var i=r._fullLayout;if(!i)return[];var a=i._subplots;return n?a[n+"axis"]:a.xaxis.concat(a.yaxis)},n.getFromId=function(r,i,a){var o=r._fullLayout;return i=void 0===i||"string"!=typeof i?i:i.replace(" domain",""),"x"===a?i=i.replace(/y[0-9]*/,""):"y"===a&&(i=i.replace(/x[0-9]*/,"")),o[n.id2name(i)]},n.getFromTrace=function(r,i,o){var s=r._fullLayout,l=null;if(a.traceIs(i,"gl3d")){var u=i.scene;"scene"===u.substr(0,5)&&(l=s[u][o+"axis"])}else l=n.getFromId(r,i[o+"axis"]||o);return l},n.idSort=function(r,n){var i=r.charAt(0),a=n.charAt(0);return i!==a?i>a?1:-1:+(r.substr(1)||1)-+(n.substr(1)||1)},n.ref2id=function(r){return!!/^[xyz]/.test(r)&&r.split(" ")[0]},n.isLinked=function(r,n){return s(n,r._axisMatchGroups)||s(n,r._axisConstraintGroups)}},15258:function(r,n,i){"use strict";var a=i(73627).isTypedArraySpec;r.exports=function(r,n,i,o){if("category"===n.type){var s,l=r.categoryarray,u=Array.isArray(l)&&l.length>0||a(l);u&&(s="array");var c,f=i("categoryorder",s);"array"===f&&(c=i("categoryarray")),u||"array"!==f||(f=n.categoryorder="trace"),"trace"===f?n._initialCategories=[]:"array"===f?n._initialCategories=c.slice():(c=(function(r,n){var i,a,o,s=n.dataAttr||r._id.charAt(0),l={};if(n.axData)i=n.axData;else for(i=[],a=0;a<n.data.length;a++){var u=n.data[a];u[s+"axis"]===r._id&&i.push(u)}for(a=0;a<i.length;a++){var c=i[a][s];for(o=0;o<c.length;o++){var f=c[o];null!=f&&(l[f]=1)}}return Object.keys(l)})(n,o).sort(),"category ascending"===f?n._initialCategories=c:"category descending"===f&&(n._initialCategories=c.reverse()))}}},66287:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(50606),l=s.ONEDAY,u=s.ONEWEEK;n.dtick=function(r,n){var i="log"===n,o="date"===n,s=o?l:1;if(!r)return s;if(a(r))return(r=Number(r))<=0?s:"category"===n?Math.max(1,Math.round(r)):o?Math.max(.1,r):r;if("string"!=typeof r||!o&&!i)return s;var u=r.charAt(0),c=r.substr(1);return(c=a(c)?Number(c):0)<=0||!(o&&"M"===u&&c===Math.round(c)||i&&"L"===u||i&&"D"===u&&(1===c||2===c))?s:r},n.tick0=function(r,n,i,s){return"date"===n?o.cleanDate(r,o.dateTick0(i,s%u==0?1:0)):"D1"!==s&&"D2"!==s?a(r)?Number(r):0:void 0}},85555:function(r,n,i){"use strict";var a=i(30587).counter;r.exports={idRegex:{x:a("x","( domain)?"),y:a("y","( domain)?")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(r,n,i){"use strict";var a=i(71828),o=i(71739),s=i(41675).id2name,l=i(13838),u=i(42449),c=i(21994),f=i(50606).ALMOST_EQUAL,h=i(18783).FROM_BL;function p(r,n){var i=n.domain;return i||(i=r[s(n.overlaying)].domain),i[1]-i[0]}function d(r,n){for(var i=0;i<r.length;i++)if(r[i][n])return r[i];return null}function v(r,n,i,a){var o,s,l,u,c,f=d(r,n);null===f?((f={})[n]=1,c=r.length,r.push(f)):c=r.indexOf(f);var h=Object.keys(f);for(o=0;o<r.length;o++)if(l=r[o],o!==c&&l[i]){var p=l[i];for(s=0;s<h.length;s++)l[u=h[s]]=g(p,g(a,f[u]));return void r.splice(c,1)}if(1!==a)for(s=0;s<h.length;s++){var v=h[s];f[v]=g(a,f[v])}f[i]=1}function g(r,n){var i,a,o="",s="";"string"==typeof r&&(i=(o=r.match(/^[xy]*/)[0]).length,r=+r.substr(i)),"string"==typeof n&&(a=(s=n.match(/^[xy]*/)[0]).length,n=+n.substr(a));var l=r*n;return i||a?i&&a&&o.charAt(0)!==s.charAt(0)?i===a?l:(i>a?o.substr(a):s.substr(i))+l:o+s+r*n:l}function y(r,n){var i=r._inputDomain,a=h[r.constraintoward],o=i[0]+(i[1]-i[0])*a;r.domain=r._input.domain=[o+(i[0]-o)/n,o+(i[1]-o)/n],r.setScale()}n.handleDefaults=function(r,n,i){var o,u,f,h,g,y,m,x,b=i.axIds,_=i.axHasImage,w=n._axisConstraintGroups=[],T=n._axisMatchGroups=[];for(o=0;o<b.length;o++)(function(r,n,i){var o=i.axIds,u=i.layoutOut,c=i.hasImage,f=u._axisConstraintGroups,h=u._axisMatchGroups,g=n._id,y=g.charAt(0),m=((u._splomAxes||{})[y]||{})[g]||{},x=n._id,b="x"===x.charAt(0);function _(i,o){return a.coerce(r,n,l,i,o)}n._matchGroup=null,n._constraintGroup=null,_("constrain",c?"domain":"range"),a.coerce(r,n,{constraintoward:{valType:"enumerated",values:b?["left","center","right"]:["bottom","middle","top"],dflt:b?"center":"middle"}},"constraintoward");var w,T,k=n.type,A=[];for(w=0;w<o.length;w++)(T=o[w])!==x&&u[s(T)].type===k&&A.push(T);var M=d(f,x);if(M){var S=[];for(w=0;w<A.length;w++)M[T=A[w]]||S.push(T);A=S}var E,L,C=A.length;C&&(r.matches||m.matches)&&(E=a.coerce(r,n,{matches:{valType:"enumerated",values:A,dflt:-1!==A.indexOf(m.matches)?m.matches:void 0}},"matches"));var O=c&&!b?n.anchor:void 0;if(C&&!E&&(r.scaleanchor||O)&&(L=a.coerce(r,n,{scaleanchor:{valType:"enumerated",values:A.concat([!1])}},"scaleanchor",O)),E){n._matchGroup=v(h,x,E,1);var P=u[s(E)],I=p(u,n)/p(u,P);b!==("x"===E.charAt(0))&&(I=(b?"x":"y")+I),v(f,x,E,I)}else r.matches&&-1!==o.indexOf(r.matches)&&a.warn("ignored "+n._name+'.matches: "'+r.matches+'" to avoid an infinite loop');if(L){var D=_("scaleratio");D||(D=n.scaleratio=1),v(f,x,L,D)}else r.scaleanchor&&-1!==o.indexOf(r.scaleanchor)&&a.warn("ignored "+n._name+'.scaleanchor: "'+r.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')})(g=r[h=s(b[o])],y=n[h],{axIds:b,layoutOut:n,hasImage:_[h]});function k(r,i){for(o=0;o<r.length;o++)for(f in u=r[o])n[s(f)][i]=u}for(k(T,"_matchGroup"),o=0;o<w.length;o++)for(f in u=w[o])if((y=n[s(f)]).fixedrange){for(var A in u){var M=s(A);!1===(r[M]||{}).fixedrange&&a.warn("fixedrange was specified as false for axis "+M+" but was overridden because another axis in its constraint group has fixedrange true"),n[M].fixedrange=!0}break}for(o=0;o<w.length;){for(f in u=w[o]){(y=n[s(f)])._matchGroup&&Object.keys(y._matchGroup).length===Object.keys(u).length&&(w.splice(o,1),o--);break}o++}k(w,"_constraintGroup");var S=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],E=!1,L=!1;function C(){x=y[m],"rangebreaks"===m&&(L=y._hasDayOfWeekBreaks)}for(o=0;o<T.length;o++){u=T[o];for(var O,P=0;P<S.length;P++){for(f in m=S[P],x=null,u)if(g=r[h=s(f)],y=n[h],m in y){if(!y.matches&&(O=y,m in g)){C();break}null===x&&m in g&&C()}if("range"===m&&x&&g.range&&2===g.range.length&&null!==g.range[0]&&null!==g.range[1]&&(E=!0),"autorange"===m&&null===x&&E&&(x=!1),null===x&&m in O&&(x=O[m]),null!==x)for(f in u)(y=n[s(f)])[m]="range"===m?x.slice():x,"rangebreaks"===m&&(y._hasDayOfWeekBreaks=L,c(y,n))}}},n.enforce=function(r){var n,i,a,l,c,h,p,d,v=r._fullLayout,g=v._axisConstraintGroups||[];for(n=0;n<g.length;n++){var m=Object.keys(a=function(r,n){for(var i=n._size,a=i.h/i.w,o={},s=Object.keys(r),l=0;l<s.length;l++){var u=s[l],c=r[u];if("string"==typeof c){var f=c.match(/^[xy]*/)[0],h=f.length;c=+c.substr(h);for(var p="y"===f.charAt(0)?a:1/a,d=0;d<h;d++)c*=p}o[u]=c}return o}(g[n],v)),x=1/0,b=0,_=1/0,w={},T={},k=!1;for(i=0;i<m.length;i++)T[l=m[i]]=c=v[s(l)],c._inputDomain?c.domain=c._inputDomain.slice():c._inputDomain=c.domain.slice(),c._inputRange||(c._inputRange=c.range.slice()),c.setScale(),w[l]=h=Math.abs(c._m)/a[l],x=Math.min(x,h),"domain"!==c.constrain&&c._constraintShrinkable||(_=Math.min(_,h)),delete c._constraintShrinkable,b=Math.max(b,h),"domain"===c.constrain&&(k=!0);if(!(x>f*b)||k){for(i=0;i<m.length;i++)if(h=w[l=m[i]],p=(c=T[l]).constrain,h!==_||"domain"===p){if(d=h/_,"range"===p)u(c,d);else{var A=c._inputDomain,M=(c.domain[1]-c.domain[0])/(A[1]-A[0]),S=(c.r2l(c.range[1])-c.r2l(c.range[0]))/(c.r2l(c._inputRange[1])-c.r2l(c._inputRange[0]));if((d/=M)*S<1){c.domain=c._input.domain=A.slice(),u(c,d);continue}if(S<1&&(c.range=c._input.range=c._inputRange.slice(),d*=S),c.autorange){var E=c.r2l(c.range[0]),L=c.r2l(c.range[1]),C=(E+L)/2,O=C,P=C,I=Math.abs(L-C),D=C-I*d*1.0001,z=C+I*d*1.0001,R=o.makePadFn(v,c,0),F=o.makePadFn(v,c,1);y(c,d);var B,N,j=Math.abs(c._m),U=o.concatExtremes(r,c),V=U.min,H=U.max;for(N=0;N<V.length;N++)(B=V[N].val-R(V[N])/j)>D&&B<O&&(O=B);for(N=0;N<H.length;N++)(B=H[N].val+F(H[N])/j)<z&&B>P&&(P=B);d/=(P-O)/(2*I),O=c.l2r(O),P=c.l2r(P),c.range=c._input.range=E<L?[O,P]:[P,O]}y(c,d)}}}}},n.getAxisGroup=function(r,n){for(var i=r._axisMatchGroups,a=0;a<i.length;a++)if(i[a][n])return"g"+a;return n},n.clean=function(r,n){if(n._inputDomain){for(var i=!1,a=n._id,o=r._fullLayout._axisConstraintGroups,s=0;s<o.length;s++)if(o[s][a]){i=!0;break}i&&"domain"===n.constrain||(n._input.domain=n.domain=n._inputDomain,delete n._inputDomain)}}},29323:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=o.numberFormat,l=i(84267),u=i(38520),c=i(73972),f=o.strTranslate,h=i(63893),p=i(7901),d=i(91424),v=i(30211),g=i(89298),y=i(6964),m=i(28569),x=i(64505),b=x.selectingOrDrawing,_=x.freeMode,w=i(18783).FROM_TL,T=i(33306),k=i(61549).redrawReglTraces,A=i(74875),M=i(41675).getFromId,S=i(47322).prepSelect,E=i(47322).clearOutline,L=i(47322).selectOnClick,C=i(42449),O=i(85555),P=O.MINDRAG,I=O.MINZOOM,D=!0;function z(r,n,i,a){var s=o.ensureSingle(r.draglayer,n,i,function(n){n.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",r.id)});return s.call(y,a),s.node()}function R(r,n,i,o,s,l,u){var c=z(r,"rect",n,i);return a.select(c).call(d.setRect,o,s,l,u),c}function F(r,n){for(var i=0;i<r.length;i++)if(!r[i].fixedrange)return n;return""}function B(r,n,i,a,o){for(var s=0;s<r.length;s++){var l=r[s];if(!l.fixedrange){if(l.rangebreaks){var u="y"===l._id.charAt(0),c=u?1-n:n,f=u?1-i:i;a[l._name+".range[0]"]=l.l2r(l.p2l(c*l._length)),a[l._name+".range[1]"]=l.l2r(l.p2l(f*l._length))}else{var h=l._rl[0],p=l._rl[1]-h;a[l._name+".range[0]"]=l.l2r(h+p*n),a[l._name+".range[1]"]=l.l2r(h+p*i)}}}if(o&&o.length){var d=(n+(1-i))/2;B(o,d,1-d,a,[])}}function N(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(!a.fixedrange){if(a.rangebreaks){var o=a._length,s=(a.p2l(0+n)-a.p2l(0)+(a.p2l(o+n)-a.p2l(o)))/2;a.range=[a.l2r(a._rl[0]-s),a.l2r(a._rl[1]-s)]}else a.range=[a.l2r(a._rl[0]-n/a._m),a.l2r(a._rl[1]-n/a._m)];a.limitRange&&a.limitRange()}}}function j(r,n,i,a,o){return r.append("path").attr("class","zoombox").style({fill:n>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",f(i,a)).attr("d",o+"Z")}function U(r,n,i){return r.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("transform",f(n,i)).attr("d","M0,0Z")}function V(r,n,i,a,o,s){r.attr("d",a+"M"+i.l+","+i.t+"v"+i.h+"h"+i.w+"v-"+i.h+"h-"+i.w+"Z"),H(r,n,o,s)}function H(r,n,i,a){i||(r.transition().style("fill",a>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),n.transition().style("opacity",1).duration(200))}function q(r){a.select(r).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(r){D&&r.data&&r._context.showTips&&(o.notifier(o._(r,"Double-click to zoom back out"),"long"),D=!1)}function Z(r){var n=Math.floor(Math.min(r.b-r.t,r.r-r.l,I)/2);return"M"+(r.l-3.5)+","+(r.t-.5+n)+"h3v"+-n+"h"+n+"v-3h-"+(n+3)+"ZM"+(r.r+3.5)+","+(r.t-.5+n)+"h-3v"+-n+"h"+-n+"v-3h"+(n+3)+"ZM"+(r.r+3.5)+","+(r.b+.5-n)+"h-3v"+n+"h"+-n+"v3h"+(n+3)+"ZM"+(r.l-3.5)+","+(r.b+.5-n)+"h3v"+n+"h"+n+"v3h-"+(n+3)+"Z"}function Y(r,n,i,a,s){for(var l,u,c,f,h=!1,p={},d={},v=(s||{}).xaHash,g=(s||{}).yaHash,y=0;y<n.length;y++){var m=n[y];for(l in i)if(m[l]){for(c in m)s&&(v[c]||g[c])||("x"===c.charAt(0)?i:a)[c]||(p[c]=l);for(u in a)s&&(v[u]||g[u])||!m[u]||(h=!0)}for(u in a)if(m[u])for(f in m)s&&(v[f]||g[f])||("x"===f.charAt(0)?i:a)[f]||(d[f]=u)}h&&(o.extendFlat(p,d),d={});var x={},b=[];for(c in p){var _=M(r,c);b.push(_),x[_._id]=_}var w={},T=[];for(f in d){var k=M(r,f);T.push(k),w[k._id]=k}return{xaHash:x,yaHash:w,xaxes:b,yaxes:T,xLinks:p,yLinks:d,isSubplotConstrained:h}}function W(r,n){if(u){var i=void 0!==r.onwheel?"wheel":"mousewheel";r._onwheel&&r.removeEventListener(i,r._onwheel),r._onwheel=n,r.addEventListener(i,n,{passive:!1})}else void 0!==r.onwheel?r.onwheel=n:void 0!==r.onmousewheel?r.onmousewheel=n:r.isAddedWheelEvent||(r.isAddedWheelEvent=!0,r.addEventListener("wheel",n,{passive:!1}))}function X(r){var n=[];for(var i in r)n.push(r[i]);return n}r.exports={makeDragBox:function(r,n,i,u,f,p,y,x){var D,z,H,J,K,$,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tu,tc,tf,th,tp,td,tv,tg=r._fullLayout._zoomlayer,ty=y+x==="nsew",tm=1===(y+x).length;function tx(){if(D=n.xaxis,z=n.yaxis,te=D._length,tr=z._length,Q=D._offset,tt=z._offset,(H={})[D._id]=D,(J={})[z._id]=z,y&&x)for(var i=n.overlays,a=0;a<i.length;a++){var o=i[a].xaxis;H[o._id]=o;var s=i[a].yaxis;J[s._id]=s}K=X(H),$=X(J),ta=F(K,x),ts=!(to=F($,y))&&!ta,ti=Y(r,r._fullLayout._axisMatchGroups,H,J);var l=(tn=Y(r,r._fullLayout._axisConstraintGroups,H,J,ti)).isSubplotConstrained||ti.isSubplotConstrained;tl=x||l,tu=y||l;var u=r._fullLayout;tc=u._has("scattergl"),tf=u._has("splom"),th=u._has("svg")}i+=n.yaxis._shift,tx();var tb=R(n,y+x+"drag",(t_=to+ta,tw=r._fullLayout.dragmode,t_?"nsew"===t_?ty?"":"pan"===tw?"move":"crosshair":t_.toLowerCase()+"-resize":"pointer"),i,u,f,p);if(ts&&!ty)return tb.onmousedown=null,tb.style.pointerEvents="none",tb;var t_,tw,tT,tk,tA,tM,tS,tE,tL,tC,tO,tP,tI={element:tb,gd:r,plotinfo:n};function tD(){tI.plotinfo.selection=!1,E(r)}function tz(i,o){var l=tI.gd;if(l._fullLayout._activeShapeIndex>=0)l._fullLayout._deactivateShape(l);else{var u=l._fullLayout.clickmode;if(q(l),2!==i||tm||function(){if(!r._transitioningWithDuration){var n=r._context.doubleClick,i=[];ta&&(i=i.concat(K)),to&&(i=i.concat($)),ti.xaxes&&(i=i.concat(ti.xaxes)),ti.yaxes&&(i=i.concat(ti.yaxes));var a,o,s={};if("reset+autosize"===n)for(n="autosize",o=0;o<i.length;o++){var l=(a=i[o])._rangeInitial0,u=a._rangeInitial1,f=void 0!==l||void 0!==u;if(f&&(void 0!==l&&l!==a.range[0]||void 0!==u&&u!==a.range[1])||!f&&!0!==a.autorange){n="reset";break}}if("autosize"===n)for(o=0;o<i.length;o++)(a=i[o]).fixedrange||(s[a._name+".autorange"]=!0);else if("reset"===n){for((ta||tn.isSubplotConstrained)&&(i=i.concat(tn.xaxes)),to&&!tn.isSubplotConstrained&&(i=i.concat(tn.yaxes)),tn.isSubplotConstrained&&(ta?to||(i=i.concat($)):i=i.concat(K)),o=0;o<i.length;o++)if(!(a=i[o]).fixedrange){var h=a._name,p=a._autorangeInitial;void 0===a._rangeInitial0&&void 0===a._rangeInitial1?s[h+".autorange"]=!0:void 0===a._rangeInitial0?(s[h+".autorange"]=p,s[h+".range"]=[null,a._rangeInitial1]):void 0===a._rangeInitial1?(s[h+".range"]=[a._rangeInitial0,null],s[h+".autorange"]=p):s[h+".range"]=[a._rangeInitial0,a._rangeInitial1]}}r.emit("plotly_doubleclick",null),c.call("_guiRelayout",r,s)}}(),ty)u.indexOf("select")>-1&&L(o,l,K,$,n.id,tI),u.indexOf("event")>-1&&v.click(l,o,n.id);else if(1===i&&tm){var f,p,d=y?z:D,g="s"===y||"w"===x?0:1,m=d._name+".range["+g+"]",b=(p=Math.abs((f=d.range[g])-d.range[1-g]),"date"===d.type?f:"log"===d.type?s("."+(Math.ceil(Math.max(0,-Math.log(p)/Math.LN10))+3)+"g")(Math.pow(10,f)):s("."+String(Math.floor(Math.log(Math.abs(f))/Math.LN10)-Math.floor(Math.log(p)/Math.LN10)+4)+"g")(f)),_="left",w="middle";if(d.fixedrange)return;y?(w="n"===y?"top":"bottom","right"===d.side&&(_="right")):"e"===x&&(_="right"),l._context.showAxisRangeEntryBoxes&&a.select(tb).call(h.makeEditable,{gd:l,immediate:!0,background:l._fullLayout.paper_bgcolor,text:String(b),fill:d.tickfont?d.tickfont.color:"#444",horizontalAlign:_,verticalAlign:w}).on("edit",function(r){var n=d.d2r(r);void 0!==n&&c.call("_guiRelayout",l,m,n)})}}}function tR(n,i){if(r._transitioningWithDuration)return!1;var a,o,s,l,u=Math.max(0,Math.min(te,td*n+tT)),c=Math.max(0,Math.min(tr,tv*i+tk)),f=Math.abs(u-tT),h=Math.abs(c-tk);function p(){tL="",tA.r=tA.l,tA.t=tA.b,tO.attr("d","M0,0Z")}if(tA.l=Math.min(tT,u),tA.r=Math.max(tT,u),tA.t=Math.min(tk,c),tA.b=Math.max(tk,c),tn.isSubplotConstrained)f>I||h>I?(tL="xy",f/te>h/tr?(h=f*tr/te,tk>c?tA.t=tk-h:tA.b=tk+h):(f=h*te/tr,tT>u?tA.l=tT-f:tA.r=tT+f),tO.attr("d",Z(tA))):p();else if(ti.isSubplotConstrained){if(f>I||h>I){tL="xy";var d=Math.min(tA.l/te,(tr-tA.b)/tr),v=Math.max(tA.r/te,(tr-tA.t)/tr);tA.l=d*te,tA.r=v*te,tA.b=(1-d)*tr,tA.t=(1-v)*tr,tO.attr("d",Z(tA))}else p()}else!to||h<Math.min(Math.max(.6*f,P),I)?f<P||!ta?p():(tA.t=0,tA.b=tr,tL="x",tO.attr("d",(a=tA,o=tk,"M"+(a.l-.5)+","+(o-I-.5)+"h-3v"+(2*I+1)+"h3ZM"+(a.r+.5)+","+(o-I-.5)+"h3v"+(2*I+1)+"h-3Z"))):!ta||f<Math.min(.6*h,I)?(tA.l=0,tA.r=te,tL="y",tO.attr("d",(s=tA,"M"+((l=tT)-I-.5)+","+(s.t-.5)+"v-3h"+(2*I+1)+"v3ZM"+(l-I-.5)+","+(s.b+.5)+"v3h"+(2*I+1)+"v-3Z"))):(tL="xy",tO.attr("d",Z(tA)));tA.w=tA.r-tA.l,tA.h=tA.b-tA.t,tL&&(tP=!0),r._dragged=tP,V(tC,tO,tA,tS,tE,tM),tF(),r.emit("plotly_relayouting",tp),tE=!0}function tF(){tp={},"xy"!==tL&&"x"!==tL||(B(K,tA.l/te,tA.r/te,tp,tn.xaxes),tq("x",tp)),"xy"!==tL&&"y"!==tL||(B($,(tr-tA.b)/tr,(tr-tA.t)/tr,tp,tn.yaxes),tq("y",tp))}function tB(){tF(),q(r),tZ(),G(r)}tI.prepFn=function(n,i,a){var s,u,c=tI.dragmode,f=r._fullLayout.dragmode;f!==c&&(tI.dragmode=f),tx(),td=r._fullLayout._invScaleX,tv=r._fullLayout._invScaleY,ts||(ty?n.shiftKey?"pan"===f?f="zoom":b(f)||(f="pan"):n.ctrlKey&&(f="pan"):f="pan"),_(f)?tI.minDrag=1:tI.minDrag=void 0,b(f)?(tI.xaxes=K,tI.yaxes=$,S(n,i,a,tI,f)):(tI.clickFn=tz,b(c)&&tD(),ts||("zoom"===f?(tI.moveFn=tR,tI.doneFn=tB,tI.minDrag=1,tT=i-(s=tb.getBoundingClientRect()).left,tk=a-s.top,r._fullLayout._calcInverseTransform(r),tT=(u=o.apply3DTransform(r._fullLayout._invTransform)(tT,tk))[0],tk=u[1],tA={l:tT,r:tT,w:0,t:tk,b:tk,h:0},tM=r._hmpixcount?r._hmlumcount/r._hmpixcount:l(r._fullLayout.plot_bgcolor).getLuminance(),tE=!1,tL="xy",tP=!1,tC=j(tg,tM,Q,tt,tS="M0,0H"+te+"V"+tr+"H0V0"),tO=U(tg,Q,tt)):"pan"===f&&(tI.moveFn=tH,tI.doneFn=tZ))),r._fullLayout._redrag=function(){var n=r._dragdata;n&&n.element===tb&&(b(r._fullLayout.dragmode)||(tx(),tY([0,0,te,tr]),tI.moveFn(n.dx,n.dy)))}},m.init(tI);var tN=[0,0,te,tr],tj=null,tU=O.REDRAWDELAY,tV=n.mainplot?r._fullLayout._plots[n.mainplot]:n;function tH(n,i){if(n*=td,i*=tv,!r._transitioningWithDuration){if(r._fullLayout._replotting=!0,"ew"===ta||"ns"===to){var a,o=ta?-n:0,s=to?-i:0;if(ti.isSubplotConstrained){if(ta&&to){var l=(n/te-i/tr)/2;o=-(n=l*te),s=-(i=-l*tr)}to?o=-s*te/tr:s=-o*tr/te}return ta&&(N(K,n),tq("x")),to&&(N($,i),tq("y")),tY([o,s,te,tr]),tG(),void r.emit("plotly_relayouting",tp)}var u,c,f="w"===ta==("n"===to)?1:-1;if(ta&&to&&(tn.isSubplotConstrained||ti.isSubplotConstrained)){var h=(n/te+f*i/tr)/2;n=h*te,i=f*h*tr}if("w"===ta?n=v(K,0,n):"e"===ta?n=v(K,1,-n):ta||(n=0),"n"===to?i=v($,1,i):"s"===to?i=v($,0,-i):to||(i=0),u="w"===ta?n:0,c="n"===to?i:0,tn.isSubplotConstrained&&!ti.isSubplotConstrained||ti.isSubplotConstrained&&ta&&to&&f>0){if(ti.isSubplotConstrained||!ta&&1===to.length){for(a=0;a<K.length;a++)K[a].range=K[a]._r.slice(),C(K[a],1-i/tr);u=(n=i*te/tr)/2}if(ti.isSubplotConstrained||!to&&1===ta.length){for(a=0;a<$.length;a++)$[a].range=$[a]._r.slice(),C($[a],1-n/te);c=(i=n*tr/te)/2}}ti.isSubplotConstrained&&to||tq("x"),ti.isSubplotConstrained&&ta||tq("y");var p=te-n,d=tr-i;!ti.isSubplotConstrained||ta&&to||(ta?(c=u?0:n*tr/te,d=p*tr/te):(u=c?0:i*te/tr,p=d*te/tr)),tY([u,c,p,d]),tG(),r.emit("plotly_relayouting",tp)}function v(r,n,i){for(var a,o,s=1-n,l=0;l<r.length;l++){var u=r[l];if(!u.fixedrange){a=u,o=u._rl[s]+(u._rl[n]-u._rl[s])/(1-((c=i/u._length)>=0?Math.min(c,.9):1/(1/Math.max(c,-.3)+3.222)));var c,f=u.l2r(o);!1!==f&&void 0!==f&&(u.range[n]=f)}}return a._length*(a._rl[n]-o)/(a._rl[n]-a._rl[s])}}function tq(r,n){for(var i=ti.isSubplotConstrained?({x:$,y:K})[r]:ti[r+"axes"],a=ti.isSubplotConstrained?({x:K,y:$})[r]:[],o=0;o<i.length;o++){var s=i[o],l=s._id,u=ti.xLinks[l]||ti.yLinks[l],c=a[0]||H[u]||J[u];c&&(n?(n[s._name+".range[0]"]=n[c._name+".range[0]"],n[s._name+".range[1]"]=n[c._name+".range[1]"]):s.range=c.range.slice())}}function tG(){var i,a=[];function o(r){for(i=0;i<r.length;i++)r[i].fixedrange||a.push(r[i]._id)}function s(r,n){for(i=0;i<r.length;i++){var o=r[i],s=o[n];o.fixedrange||"sync"!==s.tickmode||a.push(s._id)}}for(tl&&(o(K),o(tn.xaxes),o(ti.xaxes),s(n.overlays,"xaxis")),tu&&(o($),o(tn.yaxes),o(ti.yaxes),s(n.overlays,"yaxis")),tp={},i=0;i<a.length;i++){var l=M(r,a[i]);g.drawOne(r,l,{skipTitle:!0}),tp[l._name+".range[0]"]=l.range[0],tp[l._name+".range[1]"]=l.range[1]}g.redrawComponents(r,a)}function tZ(){tY([0,0,te,tr]),o.syncOrAsync([A.previousPromises,function(){r._fullLayout._replotting=!1,c.call("_guiRelayout",r,tp)}],r)}function tY(n){var i,a,s,l,u=r._fullLayout,f=u._plots,h=u._subplots.cartesian;if(tf&&c.subplotsRegistry.splom.drag(r),tc){for(i=0;i<h.length;i++)if(s=(a=f[h[i]]).xaxis,l=a.yaxis,a._scene){var p=o.simpleMap(s.range,s.r2l),v=o.simpleMap(l.range,l.r2l);s.limitRange&&s.limitRange(),l.limitRange&&l.limitRange(),p=s.range,v=l.range,a._scene.update({range:[p[0],v[0],p[1],v[1]]})}}if((tf||tc)&&(T(r),k(r)),th){var g=n[2]/D._length,m=n[3]/z._length;for(i=0;i<h.length;i++){s=(a=f[h[i]]).xaxis,l=a.yaxis;var b,_,w,A,M=(tl||ti.isSubplotConstrained)&&!s.fixedrange&&H[s._id],S=(tu||ti.isSubplotConstrained)&&!l.fixedrange&&J[l._id];if(M?(b=g,w=x||ti.isSubplotConstrained?n[0]:tJ(s,b)):ti.xaHash[s._id]?(b=g,w=n[0]*s._length/D._length):ti.yaHash[s._id]?(b=m,w="ns"===to?-n[1]*s._length/z._length:tJ(s,b,{n:"top",s:"bottom"}[to])):w=tX(s,b=tW(s,g,m)),b>1&&(void 0!==s.maxallowed&&tl===(s.range[0]<s.range[1]?"e":"w")||void 0!==s.minallowed&&tl===(s.range[0]<s.range[1]?"w":"e"))&&(b=1,w=0),S?(_=m,A=y||ti.isSubplotConstrained?n[1]:tJ(l,_)):ti.yaHash[l._id]?(_=m,A=n[1]*l._length/z._length):ti.xaHash[l._id]?(_=g,A="ew"===ta?-n[0]*l._length/D._length:tJ(l,_,{e:"right",w:"left"}[ta])):A=tX(l,_=tW(l,g,m)),_>1&&(void 0!==l.maxallowed&&tu===(l.range[0]<l.range[1]?"n":"s")||void 0!==l.minallowed&&tu===(l.range[0]<l.range[1]?"s":"n"))&&(_=1,A=0),b||_){b||(b=1),_||(_=1);var E=s._offset-w/b,L=l._offset-A/_;a.clipRect.call(d.setTranslate,w,A).call(d.setScale,b,_),a.plot.call(d.setTranslate,E,L).call(d.setScale,1/b,1/_),b===a.xScaleFactor&&_===a.yScaleFactor||(d.setPointGroupScale(a.zoomScalePts,b,_),d.setTextPointsScale(a.zoomScaleTxt,b,_)),d.hideOutsideRangePoints(a.clipOnAxisFalseTraces,a),a.xScaleFactor=b,a.yScaleFactor=_}}}}function tW(r,n,i){return r.fixedrange?0:tl&&tn.xaHash[r._id]?n:tu&&(tn.isSubplotConstrained?tn.xaHash:tn.yaHash)[r._id]?i:0}function tX(r,n){return n?(r.range=r._r.slice(),C(r,n),tJ(r,n)):0}function tJ(r,n,i){return r._length*(1-n)*w[i||r.constraintoward||"middle"]}return y.length*x.length!=1&&W(tb,function(n){if(r._context._scrollZoom.cartesian||r._fullLayout._enablescrollzoom){if(tD(),r._transitioningWithDuration)return n.preventDefault(),void n.stopPropagation();tx(),clearTimeout(tj);var i=-n.deltaY;if(isFinite(i)||(i=n.wheelDelta/10),isFinite(i)){var a,s=Math.exp(-Math.min(Math.max(i,-20),20)/200),l=tV.draglayer.select(".nsewdrag").node().getBoundingClientRect(),u=(n.clientX-l.left)/l.width,c=(l.bottom-n.clientY)/l.height;if(tl){for(x||(u=.5),a=0;a<K.length;a++)f(K[a],u,s);tq("x"),tN[2]*=s,tN[0]+=tN[2]*u*(1/s-1)}if(tu){for(y||(c=.5),a=0;a<$.length;a++)f($[a],c,s);tq("y"),tN[3]*=s,tN[1]+=tN[3]*(1-c)*(1/s-1)}tY(tN),tG(),r.emit("plotly_relayouting",tp),tj=setTimeout(function(){r._fullLayout&&(tN=[0,0,te,tr],tZ())},tU),n.preventDefault()}else o.log("Did not find wheel motion attributes: ",n)}function f(r,n,i){if(!r.fixedrange){var a=o.simpleMap(r.range,r.r2l),s=a[0]+(a[1]-a[0])*n;r.range=a.map(function(n){return r.l2r(s+(n-s)*i)})}}}),tb},makeDragger:z,makeRectDragger:R,makeZoombox:j,makeCorners:U,updateZoombox:V,xyCorners:Z,transitionZoombox:H,removeZoombox:q,showDoubleClickNotifier:G,attachWheelEventHandler:W}},4305:function(r,n,i){"use strict";var a=i(39898),o=i(30211),s=i(28569),l=i(6964),u=i(29323).makeDragBox,c=i(85555).DRAGGERSIZE;n.initInteractions=function(r){var i=r._fullLayout;if(r._context.staticPlot)a.select(r).selectAll(".drag").remove();else if(i._has("cartesian")||i._has("splom")){Object.keys(i._plots||{}).sort(function(r,n){if((i._plots[r].mainplot&&!0)===(i._plots[n].mainplot&&!0)){var a=r.split("y"),o=n.split("y");return a[0]===o[0]?Number(a[1]||1)-Number(o[1]||1):Number(a[0]||1)-Number(o[0]||1)}return i._plots[r].mainplot?1:-1}).forEach(function(n){var a=i._plots[n],l=a.xaxis,f=a.yaxis;if(!a.mainplot){var h=u(r,a,l._offset,f._offset,l._length,f._length,"ns","ew");h.onmousemove=function(i){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===n&&r._fullLayout._plots[n]&&o.hover(r,i,n)},o.hover(r,i,n),r._fullLayout._lasthover=h,r._fullLayout._hoversubplot=n},h.onmouseout=function(n){r._dragging||(r._fullLayout._hoversubplot=null,s.unhover(r,n))},r._context.showAxisDragHandles&&(u(r,a,l._offset-c,f._offset-c,c,c,"n","w"),u(r,a,l._offset+l._length,f._offset-c,c,c,"n","e"),u(r,a,l._offset-c,f._offset+f._length,c,c,"s","w"),u(r,a,l._offset+l._length,f._offset+f._length,c,c,"s","e"))}if(r._context.showAxisDragHandles){if(n===l._mainSubplot){var p=l._mainLinePosition;"top"===l.side&&(p-=c),u(r,a,l._offset+.1*l._length,p,.8*l._length,c,"","ew"),u(r,a,l._offset,p,.1*l._length,c,"","w"),u(r,a,l._offset+.9*l._length,p,.1*l._length,c,"","e")}if(n===f._mainSubplot){var d=f._mainLinePosition;"right"!==f.side&&(d-=c),u(r,a,d,f._offset+.1*f._length,c,.8*f._length,"ns",""),u(r,a,d,f._offset+.9*f._length,c,.1*f._length,"s",""),u(r,a,d,f._offset,c,.1*f._length,"n","")}}});var l=i._hoverlayer.node();l.onmousemove=function(n){n.target=r._fullLayout._lasthover,o.hover(r,n,i._hoversubplot)},l.onclick=function(n){n.target=r._fullLayout._lasthover,o.click(r,n)},l.onmousedown=function(n){r._fullLayout._lasthover.onmousedown(n)},n.updateFx(r)}},n.updateFx=function(r){var n=r._fullLayout,i="pan"===n.dragmode?"move":"crosshair";l(n._draggers,i)}},76325:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(41675);r.exports=function(r){return function(n,i){var l=n[r];if(Array.isArray(l))for(var u=a.subplotsRegistry.cartesian,c=u.idRegex,f=i._subplots,h=f.xaxis,p=f.yaxis,d=f.cartesian,v=i._has("cartesian")||i._has("gl2d"),g=0;g<l.length;g++){var y=l[g];if(o.isPlainObject(y)){var m=s.cleanId(y.xref,"x",!1),x=s.cleanId(y.yref,"y",!1),b=c.x.test(m),_=c.y.test(x);if(b||_){v||o.pushUnique(i._basePlotModules,u);var w=!1;b&&-1===h.indexOf(m)&&(h.push(m),w=!0),_&&-1===p.indexOf(x)&&(p.push(x),w=!0),w&&b&&_&&d.push(m+x)}}}}}},93612:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(71828),l=i(74875),u=i(91424),c=i(27659).a0,f=i(41675),h=i(85555),p=i(77922),d=s.ensureSingle;function v(r,n,i){return s.ensureSingle(r,n,i,function(r){r.datum(i)})}function g(r,n,i,s,l){for(var f,p,d,v=h.traceLayerClasses,g=r._fullLayout,y=g._modules,m=[],x=[],b=0;b<y.length;b++){var _=(f=y[b]).name,w=o.modules[_].categories;if(w.svg){var T=f.layerName||_+"layer",k=f.plot;d=(p=c(i,k))[0],i=p[1],d.length&&m.push({i:v.indexOf(T),className:T,plotMethod:k,cdModule:d}),w.zoomScale&&x.push("."+T)}}m.sort(function(r,n){return r.i-n.i});var A=n.plot.selectAll("g.mlayer").data(m,function(r){return r.className});if(A.enter().append("g").attr("class",function(r){return r.className}).classed("mlayer",!0).classed("rangeplot",n.isRangePlot),A.exit().remove(),A.order(),A.each(function(i){var o=a.select(this),c=i.className;i.plotMethod(r,n,i.cdModule,o,s,l),-1===h.clipOnAxisFalseQuery.indexOf("."+c)&&u.setClipUrl(o,n.layerClipId,r)}),g._has("scattergl")&&(d=c(i,f=o.getModule("scattergl"))[0],f.plot(r,n,d)),!r._context.staticPlot&&(n._hasClipOnAxisFalse&&(n.clipOnAxisFalseTraces=n.plot.selectAll(h.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),x.length)){var M=n.plot.selectAll(x.join(",")).selectAll(".trace");n.zoomScalePts=M.selectAll("path.point"),n.zoomScaleTxt=M.selectAll(".textpoint")}}function y(r,n){var i=n.plotgroup,a=n.id,o=h.layerValue2layerClass[n.xaxis.layer],s=h.layerValue2layerClass[n.yaxis.layer],l=r._fullLayout._hasOnlyLargeSploms;if(n.mainplot){var u=n.mainplotinfo,c=u.plotgroup,p=a+"-x",g=a+"-y";n.minorGridlayer=u.minorGridlayer,n.gridlayer=u.gridlayer,n.zerolinelayer=u.zerolinelayer,d(u.overlinesBelow,"path",p),d(u.overlinesBelow,"path",g),d(u.overaxesBelow,"g",p),d(u.overaxesBelow,"g",g),n.plot=d(u.overplot,"g",a),d(u.overlinesAbove,"path",p),d(u.overlinesAbove,"path",g),d(u.overaxesAbove,"g",p),d(u.overaxesAbove,"g",g),n.xlines=c.select(".overlines-"+o).select("."+p),n.ylines=c.select(".overlines-"+s).select("."+g),n.xaxislayer=c.select(".overaxes-"+o).select("."+p),n.yaxislayer=c.select(".overaxes-"+s).select("."+g)}else if(l)n.xlines=d(i,"path","xlines-above"),n.ylines=d(i,"path","ylines-above"),n.xaxislayer=d(i,"g","xaxislayer-above"),n.yaxislayer=d(i,"g","yaxislayer-above");else{var y=d(i,"g","layer-subplot");n.shapelayer=d(y,"g","shapelayer"),n.imagelayer=d(y,"g","imagelayer"),n.minorGridlayer=d(i,"g","minor-gridlayer"),n.gridlayer=d(i,"g","gridlayer"),n.zerolinelayer=d(i,"g","zerolinelayer"),d(i,"path","xlines-below"),d(i,"path","ylines-below"),n.overlinesBelow=d(i,"g","overlines-below"),d(i,"g","xaxislayer-below"),d(i,"g","yaxislayer-below"),n.overaxesBelow=d(i,"g","overaxes-below"),n.plot=d(i,"g","plot"),n.overplot=d(i,"g","overplot"),n.xlines=d(i,"path","xlines-above"),n.ylines=d(i,"path","ylines-above"),n.overlinesAbove=d(i,"g","overlines-above"),d(i,"g","xaxislayer-above"),d(i,"g","yaxislayer-above"),n.overaxesAbove=d(i,"g","overaxes-above"),n.xlines=i.select(".xlines-"+o),n.ylines=i.select(".ylines-"+s),n.xaxislayer=i.select(".xaxislayer-"+o),n.yaxislayer=i.select(".yaxislayer-"+s)}l||(v(n.minorGridlayer,"g",n.xaxis._id),v(n.minorGridlayer,"g",n.yaxis._id),n.minorGridlayer.selectAll("g").map(function(r){return r[0]}).sort(f.idSort),v(n.gridlayer,"g",n.xaxis._id),v(n.gridlayer,"g",n.yaxis._id),n.gridlayer.selectAll("g").map(function(r){return r[0]}).sort(f.idSort)),n.xlines.style("fill","none").classed("crisp",!0),n.ylines.style("fill","none").classed("crisp",!0)}function m(r,n){if(r){var i={};for(var o in r.each(function(r){var o=r[0];a.select(this).remove(),x(o,n),i[o]=!0}),n._plots)for(var s=n._plots[o].overlays||[],l=0;l<s.length;l++){var u=s[l];i[u.id]&&u.plot.selectAll(".trace").remove()}}}function x(r,n){n._draggers.selectAll("g."+r).remove(),n._defs.select("#clip"+n._uid+r+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=h.idRegex,n.attrRegex=h.attrRegex,n.attributes=i(89502),n.layoutAttributes=i(13838),n.supplyLayoutDefaults=i(86763),n.transitionAxes=i(66847),n.finalizeSubplots=function(r,n){var i,a,o,l=n._subplots,u=l.xaxis,c=l.yaxis,p=l.cartesian,d=p.concat(l.gl2d||[]),v={},g={};for(i=0;i<d.length;i++){var y=d[i].split("y");v[y[0]]=1,g["y"+y[1]]=1}for(i=0;i<u.length;i++)v[a=u[i]]||(o=(r[f.id2name(a)]||{}).anchor,h.idRegex.y.test(o)||(o="y"),p.push(a+o),d.push(a+o),g[o]||(g[o]=1,s.pushUnique(c,o)));for(i=0;i<c.length;i++)g[o=c[i]]||(a=(r[f.id2name(o)]||{}).anchor,h.idRegex.x.test(a)||(a="x"),p.push(a+o),d.push(a+o),v[a]||(v[a]=1,s.pushUnique(u,a)));if(!d.length){for(var m in a="",o="",r)h.attrRegex.test(m)&&("x"===m.charAt(0)?(!a||+m.substr(5)<+a.substr(5))&&(a=m):(!o||+m.substr(5)<+o.substr(5))&&(o=m));a=a?f.name2id(a):"x",o=o?f.name2id(o):"y",u.push(a),c.push(o),p.push(a+o)}},n.plot=function(r,n,i,a){var o,s=r._fullLayout,l=s._subplots.cartesian,u=r.calcdata;if(!Array.isArray(n))for(n=[],o=0;o<u.length;o++)n.push(o);for(o=0;o<l.length;o++){for(var c,f=l[o],h=s._plots[f],p=[],d=0;d<u.length;d++){var v=u[d],y=v[0].trace;y.xaxis+y.yaxis===f&&((-1!==n.indexOf(y.index)||y.carpet)&&(c&&c[0].trace.xaxis+c[0].trace.yaxis===f&&-1!==["tonextx","tonexty","tonext"].indexOf(y.fill)&&-1===p.indexOf(c)&&p.push(c),p.push(v)),c=v)}g(r,h,p,i,a)}},n.clean=function(r,n,i,a){var o,s,l,u=a._plots||{},c=n._plots||{},h=a._subplots||{};if(a._hasOnlyLargeSploms&&!n._hasOnlyLargeSploms)for(l in u)(o=u[l]).plotgroup&&o.plotgroup.remove();var p=a._has&&a._has("gl"),d=n._has&&n._has("gl");if(p&&!d)for(l in u)(o=u[l])._scene&&o._scene.destroy();if(h.xaxis&&h.yaxis){var v=f.listIds({_fullLayout:a});for(s=0;s<v.length;s++){var g=v[s];n[f.id2name(g)]||a._infolayer.selectAll(".g-"+g+"title").remove()}}var y=a._has&&a._has("cartesian"),b=n._has&&n._has("cartesian");if(y&&!b)m(a._cartesianlayer.selectAll(".subplot"),a),a._defs.selectAll(".axesclip").remove(),delete a._axisConstraintGroups,delete a._axisMatchGroups;else if(h.cartesian)for(s=0;s<h.cartesian.length;s++){var _=h.cartesian[s];if(!c[_]){var w="."+_+",."+_+"-x,."+_+"-y";a._cartesianlayer.selectAll(w).remove(),x(_,a)}}},n.drawFramework=function(r){var n=r._fullLayout,i=function(r){var n,i,a,o,s,l,u=r._fullLayout,c=u._subplots.cartesian,f=c.length,h=[],p=[];for(n=0;n<f;n++){a=c[n],s=(o=u._plots[a]).xaxis,l=o.yaxis;var d=s._mainAxis,v=l._mainAxis,g=d._id+v._id,y=u._plots[g];o.overlays=[],g!==a&&y?(o.mainplot=g,o.mainplotinfo=y,p.push(a)):(o.mainplot=void 0,o.mainplotinfo=void 0,h.push(a))}for(n=0;n<p.length;n++)a=p[n],(o=u._plots[a]).mainplotinfo.overlays.push(o);var m=h.concat(p),x=Array(f);for(n=0;n<f;n++){a=m[n],s=(o=u._plots[a]).xaxis,l=o.yaxis;var b=[a,s.layer,l.layer,s.overlaying||"",l.overlaying||""];for(i=0;i<o.overlays.length;i++)b.push(o.overlays[i].id);x[n]=b}return x}(r),o=n._cartesianlayer.selectAll(".subplot").data(i,String);o.enter().append("g").attr("class",function(r){return"subplot "+r[0]}),o.order(),o.exit().call(m,n),o.each(function(i){var o=i[0],s=n._plots[o];s.plotgroup=a.select(this),y(r,s),s.draglayer=d(n._draggers,"g",o)})},n.rangePlot=function(r,n,i){y(r,n),g(r,n,i),l.style(r)},n.toSVG=function(r){var n=r._fullLayout._glimages,i=a.select(r).selectAll(".svg-container");i.filter(function(r,n){return n===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var r=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:p.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},n.updateFx=i(4305).updateFx},13838:function(r,n,i){"use strict";var a=i(41940),o=i(22399),s=i(79952).P,l=i(1426).extendFlat,u=i(44467).templatedArray,c=i(12663).descriptionWithDates,f=i(50606).ONEDAY,h=i(85555),p=h.HOUR_PATTERN,d=h.WEEKDAY_PATTERN,v={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},g=l({},v,{values:v.values.slice().concat(["sync"])});function y(r){return{valType:"integer",min:0,dflt:r?5:0,editType:"ticks"}}var m={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},x={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},b={valType:"data_array",editType:"ticks"},_={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function w(r){var n={valType:"number",min:0,editType:"ticks"};return r||(n.dflt=5),n}function T(r){var n={valType:"number",min:0,editType:"ticks"};return r||(n.dflt=1),n}var k={valType:"color",dflt:o.defaultLine,editType:"ticks"},A={valType:"color",dflt:o.lightLine,editType:"ticks"};function M(r){var n={valType:"number",min:0,editType:"ticks"};return r||(n.dflt=1),n}var S=l({},s,{editType:"ticks"}),E={valType:"boolean",editType:"ticks"};r.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:o.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:a({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[h.idRegex.x.toString(),h.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"calc"},rangebreaks:u("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,p,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:f},editType:"calc"}),tickmode:g,nticks:y(),tick0:m,dtick:x,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:b,ticktext:{valType:"data_array",editType:"ticks"},ticks:_,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:w(),tickwidth:T(),tickcolor:k,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:l({},s,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:a({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:c("tick label")},tickformatstops:u("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:c("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:E,gridcolor:A,gridwidth:M(),griddash:S,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",h.idRegex.x.toString(),h.idRegex.y.toString()],editType:"plot"},minor:{tickmode:v,nticks:y("minor"),tick0:m,dtick:x,tickvals:b,ticks:_,ticklen:w("minor"),tickwidth:T("minor"),tickcolor:k,gridcolor:A,gridwidth:M("minor"),griddash:S,showgrid:E,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:a({editType:"ticks"})}}},86763:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(23469).isUnifiedHover,l=i(98212),u=i(44467),c=i(10820),f=i(13838),h=i(951),p=i(71453),d=i(99082),v=i(52830),g=i(41675),y=g.id2name,m=g.name2id,x=i(85555).AX_ID_PATTERN,b=i(73972),_=b.traceIs,w=b.getComponentMethod;function T(r,n,i){Array.isArray(r[n])?r[n].push(i):r[n]=[i]}r.exports=function(r,n,i){var b,k,A=n.autotypenumbers,M={},S={},E={},L={},C={},O={},P={},I={},D={},z={};for(b=0;b<i.length;b++){var R,F,B=i[b];if(_(B,"cartesian")||_(B,"gl2d")){if(B.xaxis)T(M,R=y(B.xaxis),B);else if(B.xaxes)for(k=0;k<B.xaxes.length;k++)T(M,y(B.xaxes[k]),B);if(B.yaxis)T(M,F=y(B.yaxis),B);else if(B.yaxes)for(k=0;k<B.yaxes.length;k++)T(M,y(B.yaxes[k]),B);"funnel"===B.type?"h"===B.orientation?(R&&(S[R]=!0),F&&(P[F]=!0)):F&&(E[F]=!0):"image"===B.type?(F&&(I[F]=!0),R&&(I[R]=!0)):(F&&(C[F]=!0,O[F]=!0),_(B,"carpet")&&("carpet"!==B.type||B._cheater)||R&&(L[R]=!0)),"carpet"===B.type&&B._cheater&&R&&(S[R]=!0),_(B,"2dMap")&&(D[R]=!0,D[F]=!0),_(B,"oriented")&&(z["h"===B.orientation?F:R]=!0)}}var N=n._subplots,j=N.xaxis,U=N.yaxis,V=a.simpleMap(j,y),H=a.simpleMap(U,y),q=V.concat(H),G=o.background;j.length&&U.length&&(G=a.coerce(r,n,c,"plot_bgcolor"));var Z,Y,W,X,J,K=o.combine(G,n.paper_bgcolor);function $(){var r=M[Z]||[];J._traceIndices=r.map(function(r){return r._expandedIndex}),J._annIndices=[],J._shapeIndices=[],J._selectionIndices=[],J._imgIndices=[],J._subplotsWith=[],J._counterAxes=[],J._name=J._attr=Z,J._id=Y}function Q(r,n){return a.coerce(X,J,f,r,n)}function tt(r,n){return a.coerce2(X,J,f,r,n)}function te(n,i){for(var a="x"===n?V:H,o=[],s=0;s<a.length;s++){var l=a[s];l===i||(r[l]||{}).overlaying||o.push(m(l))}return o}var tr={x:U,y:j},tn=tr.x.concat(tr.y),ti={},ta=[];function to(){var r=X.matches;x.test(r)&&-1===tn.indexOf(r)&&(ti[r]=X.type,ta=Object.keys(ti))}var ts=l(r,n),tl=s(ts);for(b=0;b<q.length;b++){Y=m(Z=q[b]),W=Z.charAt(0),a.isPlainObject(r[Z])||(r[Z]={}),X=r[Z],J=u.newContainer(n,Z,W+"axis"),$();var tu="x"===W&&!L[Z]&&S[Z]||"y"===W&&!C[Z]&&E[Z],tc="y"===W&&(!O[Z]&&P[Z]||I[Z]),tf={hasMinor:!0,letter:W,font:n.font,outerTicks:D[Z],showGrid:!z[Z],data:M[Z]||[],bgColor:K,calendar:n.calendar,automargin:!0,visibleDflt:tu,reverseDflt:tc,autotypenumbersDflt:A,splomStash:((n._splomAxes||{})[W]||{})[Y]};Q("uirevision",n.uirevision),h(X,J,Q,tf),p(X,J,Q,tf,n);var th=tl&&W===ts.charAt(0),tp=tt("spikecolor",tl?J.color:void 0),td=tt("spikethickness",tl?1.5:void 0),tv=tt("spikedash",tl?"dot":void 0),tg=tt("spikemode",tl?"across":void 0),ty=tt("spikesnap");Q("showspikes",!!(th||tp||td||tv||tg||ty))||(delete J.spikecolor,delete J.spikethickness,delete J.spikedash,delete J.spikemode,delete J.spikesnap);var tm=y(X.overlaying),tx=[0,1];if(void 0!==n[tm]){var tb=y(n[tm].anchor);void 0!==n[tb]&&(tx=n[tb].domain)}v(X,J,Q,{letter:W,counterAxes:tr[W],overlayableAxes:te(W,Z),grid:n.grid,overlayingDomain:tx}),Q("title.standoff"),to(),J._input=X}for(b=0;b<ta.length;){W=(Z=y(Y=ta[b++])).charAt(0),a.isPlainObject(r[Z])||(r[Z]={}),X=r[Z],J=u.newContainer(n,Z,W+"axis"),$();var t_={letter:W,font:n.font,outerTicks:D[Z],showGrid:!z[Z],data:[],bgColor:K,calendar:n.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:A,splomStash:((n._splomAxes||{})[W]||{})[Y]};Q("uirevision",n.uirevision),J.type=ti[Y]||"linear",p(X,J,Q,t_,n),v(X,J,Q,{letter:W,counterAxes:tr[W],overlayableAxes:te(W,Z),grid:n.grid}),Q("fixedrange"),to(),J._input=X}var tw=w("rangeslider","handleDefaults"),tT=w("rangeselector","handleDefaults");for(b=0;b<V.length;b++)X=r[Z=V[b]],J=n[Z],tw(r,n,Z),"date"===J.type&&tT(X,J,n,H,J.calendar),Q("fixedrange");for(b=0;b<H.length;b++){X=r[Z=H[b]],J=n[Z];var tk=n[y(J.anchor)];Q("fixedrange",w("rangeslider","isVisible")(tk))}d.handleDefaults(r,n,{axIds:tn.concat(ta).sort(g.idSort),axHasImage:I})}},92128:function(r,n,i){"use strict";var a=i(84267).mix,o=i(22399),s=i(71828);r.exports=function(r,n,i,l){var u=(l=l||{}).dfltColor;function c(i,a){return s.coerce2(r,n,l.attributes,i,a)}var f=c("linecolor",u),h=c("linewidth");i("showline",l.showLine||!!f||!!h)||(delete n.linecolor,delete n.linewidth);var p=c("gridcolor",a(u,l.bgColor,l.blend||o.lightFraction).toRgbString()),d=c("gridwidth"),v=c("griddash");if(i("showgrid",l.showGrid||!!p||!!d||!!v)||(delete n.gridcolor,delete n.gridwidth,delete n.griddash),l.hasMinor){var g=c("minor.gridcolor",a(n.gridcolor,l.bgColor,67).toRgbString()),y=c("minor.gridwidth",n.gridwidth||1),m=c("minor.griddash",n.griddash||"solid");i("minor.showgrid",!!g||!!y||!!m)||(delete n.minor.gridcolor,delete n.minor.gridwidth,delete n.minor.griddash)}if(!l.noZeroLine){var x=c("zerolinecolor",u),b=c("zerolinewidth");i("zeroline",l.showGrid||!!x||!!b)||(delete n.zerolinecolor,delete n.zerolinewidth)}}},52830:function(r,n,i){"use strict";var a=i(92770),o=i(71828);r.exports=function(r,n,i,s){var l,u,c,f,h,p,d=s.counterAxes||[],v=s.overlayableAxes||[],g=s.letter,y=s.grid,m=s.overlayingDomain;y&&(u=y._domains[g][y._axisMap[n._id]],l=y._anchors[n._id],u&&(c=y[g+"side"].split(" ")[0],f=y.domain[g]["right"===c||"top"===c?1:0])),u=u||[0,1],l=l||(a(r.position)?"free":d[0]||"free"),c=c||("x"===g?"bottom":"left"),f=f||0,h=0,p=!1;var x=o.coerce(r,n,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:l}},"anchor"),b=o.coerce(r,n,{side:{valType:"enumerated",values:"x"===g?["bottom","top"]:["left","right"],dflt:c}},"side");"free"===x&&("y"===g&&(i("autoshift")&&(f="left"===b?m[0]:m[1],p=!n.automargin||n.automargin,h="left"===b?-3:3),i("shift",h)),i("position",f)),i("automargin",p);var _=!1;if(v.length&&(_=o.coerce(r,n,{overlaying:{valType:"enumerated",values:[!1].concat(v),dflt:!1}},"overlaying")),!_){var w=i("domain",u);w[0]>w[1]-1/4096&&(n.domain=u),o.noneOrAll(r.domain,n.domain,u),"sync"===n.tickmode&&(n.tickmode="auto")}return i("layer"),n}},89426:function(r,n,i){"use strict";var a=i(59652);r.exports=function(r,n,i,o,s){s||(s={});var l=s.tickSuffixDflt,u=a(r);i("tickprefix")&&i("showtickprefix",u),i("ticksuffix",l)&&i("showticksuffix",u)}},23608:function(r,n,i){"use strict";var a=i(23074);r.exports=function(r,n,i,o){var s=n._template||{},l=n.type||s.type||"-";i("minallowed"),i("maxallowed");var u,c=i("range");c||o.noInsiderange||"log"===l||((u=i("insiderange"))&&(null===u[0]||null===u[1])&&(n.insiderange=!1,u=void 0),u&&(c=i("range",u)));var f,h=n.getAutorangeDflt(c,o),p=i("autorange",h);c&&(null===c[0]&&null===c[1]||(null===c[0]||null===c[1])&&("reversed"===p||!0===p)||null!==c[0]&&("min"===p||"max reversed"===p)||null!==c[1]&&("max"===p||"min reversed"===p))&&(c=void 0,delete n.range,n.autorange=!0,f=!0),f||(p=i("autorange",h=n.getAutorangeDflt(c,o))),p&&(a(i,p,c),"linear"!==l&&"-"!==l||i("rangemode")),n.cleanRange()}},42449:function(r,n,i){"use strict";var a=i(18783).FROM_BL;r.exports=function(r,n,i){void 0===i&&(i=a[r.constraintoward||"center"]);var o=[r.r2l(r.range[0]),r.r2l(r.range[1])],s=o[0]+(o[1]-o[0])*i;r.range=r._input.range=[r.l2r(s+(o[0]-s)*n),r.l2r(s+(o[1]-s)*n)],r.setScale()}},21994:function(r,n,i){"use strict";var a=i(39898),o=i(84096).g0,s=i(71828),l=s.numberFormat,u=i(92770),c=s.cleanNumber,f=s.ms2DateTime,h=s.dateTime2ms,p=s.ensureNumber,d=s.isArrayOrTypedArray,v=i(50606),g=v.FP_SAFE,y=v.BADNUM,m=v.LOG_CLIP,x=v.ONEWEEK,b=v.ONEDAY,_=v.ONEHOUR,w=v.ONEMIN,T=v.ONESEC,k=i(41675),A=i(85555),M=A.HOUR_PATTERN,S=A.WEEKDAY_PATTERN;function E(r){return Math.pow(10,r)}r.exports=function(r,n){n=n||{};var i=r._id||"x",v=i.charAt(0);function L(n,i){if(n>0)return Math.log(n)/Math.LN10;if(n<=0&&i&&r.range&&2===r.range.length){var a=r.range[0],o=r.range[1];return .5*(a+o-2*m*Math.abs(a-o))}return y}function C(n,i,a,o){if((o||{}).msUTC&&u(n))return+n;var l=h(n,a||r.calendar);if(l===y){if(!u(n))return y;n=+n;var c=Math.floor(10*s.mod(n+.05,1));l=h(new Date(Math.round(n-c/10)))+c/10}return l}function O(n,i,a){return f(n,i,a||r.calendar)}function P(n){return r._categories[Math.round(n)]}function I(n){if(null!=n){if(void 0===r._categoriesMap&&(r._categoriesMap={}),void 0!==r._categoriesMap[n])return r._categoriesMap[n];r._categories.push("number"==typeof n?String(n):n);var i=r._categories.length-1;return r._categoriesMap[n]=i,i}return y}function D(n){if(r._categoriesMap)return r._categoriesMap[n]}function z(r){var n=D(r);return void 0!==n?n:u(r)?+r:void 0}function R(r){return u(r)?+r:D(r)}function F(r,n,i){return a.round(i+n*r,2)}var B=function(n){return u(n)?F(n,r._m,r._b):y},N=function(n){var i;return i=r._m,(n-r._b)/i};if(r.rangebreaks){var j="y"===v;B=function(n){if(!u(n))return y;var i=r._rangebreaks.length;if(!i)return F(n,r._m,r._b);var a=j;r.range[0]>r.range[1]&&(a=!a);for(var o=a?-1:1,s=o*n,l=0,c=0;c<i;c++){var f=o*r._rangebreaks[c].min,h=o*r._rangebreaks[c].max;if(s<f)break;if(!(s>h)){l=s<(f+h)/2?c:c+1;break}l=c+1}var p=r._B[l]||0;return isFinite(p)?F(n,r._m2,p):0},N=function(n){var i,a,o=r._rangebreaks.length;if(!o)return i=r._m,(n-r._b)/i;for(var s=0,l=0;l<o&&!(n<r._rangebreaks[l].pmin);l++)n>r._rangebreaks[l].pmax&&(s=l+1);return a=r._m2,(n-r._B[s])/a}}r.c2l="log"===r.type?L:p,r.l2c="log"===r.type?E:p,r.l2p=B,r.p2l=N,r.c2p="log"===r.type?function(r,n){return B(L(r,n))}:B,r.p2c="log"===r.type?function(r){return E(N(r))}:N,-1!==["linear","-"].indexOf(r.type)?(r.d2r=r.r2d=r.d2c=r.r2c=r.d2l=r.r2l=c,r.c2d=r.c2r=r.l2d=r.l2r=p,r.d2p=r.r2p=function(n){return r.l2p(c(n))},r.p2d=r.p2r=N,r.cleanPos=p):"log"===r.type?(r.d2r=r.d2l=function(r,n){return L(c(r),n)},r.r2d=r.r2c=function(r){return E(c(r))},r.d2c=r.r2l=c,r.c2d=r.l2r=p,r.c2r=L,r.l2d=E,r.d2p=function(n,i){return r.l2p(r.d2r(n,i))},r.p2d=function(r){return E(N(r))},r.r2p=function(n){return r.l2p(c(n))},r.p2r=N,r.cleanPos=p):"date"===r.type?(r.d2r=r.r2d=s.identity,r.d2c=r.r2c=r.d2l=r.r2l=C,r.c2d=r.c2r=r.l2d=r.l2r=O,r.d2p=r.r2p=function(n,i,a){return r.l2p(C(n,0,a))},r.p2d=r.p2r=function(r,n,i){return O(N(r),n,i)},r.cleanPos=function(n){return s.cleanDate(n,y,r.calendar)}):"category"===r.type?(r.d2c=r.d2l=I,r.r2d=r.c2d=r.l2d=P,r.d2r=r.d2l_noadd=z,r.r2c=function(n){var i=R(n);return void 0!==i?i:r.fraction2r(.5)},r.l2r=r.c2r=p,r.r2l=R,r.d2p=function(n){return r.l2p(r.r2c(n))},r.p2d=function(r){return P(N(r))},r.r2p=r.d2p,r.p2r=N,r.cleanPos=function(r){return"string"==typeof r&&""!==r?r:p(r)}):"multicategory"===r.type&&(r.r2d=r.c2d=r.l2d=P,r.d2r=r.d2l_noadd=z,r.r2c=function(n){var i=z(n);return void 0!==i?i:r.fraction2r(.5)},r.r2c_just_indices=D,r.l2r=r.c2r=p,r.r2l=z,r.d2p=function(n){return r.l2p(r.r2c(n))},r.p2d=function(r){return P(N(r))},r.r2p=r.d2p,r.p2r=N,r.cleanPos=function(r){return Array.isArray(r)||"string"==typeof r&&""!==r?r:p(r)},r.setupMultiCategory=function(a){var o,l,u=r._traceIndices,c=r._matchGroup;if(c&&0===r._categories.length){for(var f in c)if(f!==i){var h=n[k.id2name(f)];u=u.concat(h._traceIndices)}}var p=[[0,{}],[0,{}]],g=[];for(o=0;o<u.length;o++){var y=a[u[o]];if(v in y){var m=y[v],x=y._length||s.minRowLength(m);if(d(m[0])&&d(m[1]))for(l=0;l<x;l++){var b=m[0][l],_=m[1][l];null!=b&&null!=_&&(g.push([b,_]),b in p[0][1]||(p[0][1][b]=p[0][0]++),_ in p[1][1]||(p[1][1][_]=p[1][0]++))}}}for(g.sort(function(r,n){var i=p[0][1],a=i[r[0]]-i[n[0]];if(a)return a;var o=p[1][1];return o[r[1]]-o[n[1]]}),o=0;o<g.length;o++)I(g[o])}),r.fraction2r=function(n){var i=r.r2l(r.range[0]),a=r.r2l(r.range[1]);return r.l2r(i+n*(a-i))},r.r2fraction=function(n){var i=r.r2l(r.range[0]),a=r.r2l(r.range[1]);return(r.r2l(n)-i)/(a-i)},r.limitRange=function(n){var i=r.minallowed,a=r.maxallowed;if(void 0!==i||void 0!==a){n||(n="range");var o=s.nestedProperty(r,n).get(),l=s.simpleMap(o,r.r2l),u=l[1]<l[0];u&&l.reverse();var c=s.simpleMap([i,a],r.r2l);if(void 0!==i&&l[0]<c[0]&&(o[u?1:0]=i),void 0!==a&&l[1]>c[1]&&(o[u?0:1]=a),o[0]===o[1]){var f=r.l2r(i),h=r.l2r(a);if(void 0!==i){var p=f+1;void 0!==a&&(p=Math.min(p,h)),o[u?1:0]=p}if(void 0!==a){var d=h+1;void 0!==i&&(d=Math.max(d,f)),o[u?0:1]=d}}}},r.cleanRange=function(n,i){r._cleanRange(n,i),r.limitRange(n)},r._cleanRange=function(n,i){i||(i={}),n||(n="range");var a,o,l=s.nestedProperty(r,n).get();if(o=(o="date"===r.type?s.dfltRange(r.calendar):"y"===v?A.DFLTRANGEY:"realaxis"===r._name?[0,1]:i.dfltRange||A.DFLTRANGEX).slice(),"tozero"!==r.rangemode&&"nonnegative"!==r.rangemode||(o[0]=0),l&&2===l.length){var c=null===l[0],f=null===l[1];for("date"!==r.type||r.autorange||(l[0]=s.cleanDate(l[0],y,r.calendar),l[1]=s.cleanDate(l[1],y,r.calendar)),a=0;a<2;a++)if("date"===r.type){if(!s.isDateTime(l[a],r.calendar)){r[n]=o;break}if(r.r2l(l[0])===r.r2l(l[1])){var h=s.constrain(r.r2l(l[0]),s.MIN_MS+1e3,s.MAX_MS-1e3);l[0]=r.l2r(h-1e3),l[1]=r.l2r(h+1e3);break}}else{if(!u(l[a])){if(c||f||!u(l[1-a])){r[n]=o;break}l[a]=l[1-a]*(a?10:.1)}if(l[a]<-g?l[a]=-g:l[a]>g&&(l[a]=g),l[0]===l[1]){var p=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=p,l[1]+=p}}}else s.nestedProperty(r,n).set(o)},r.setScale=function(i){var a=n._size;if(r.overlaying){var o=k.getFromId({_fullLayout:n},r.overlaying);r.domain=o.domain}var s=i&&r._r?"_r":"range",l=r.calendar;r.cleanRange(s);var u,c,f=r.r2l(r[s][0],l),h=r.r2l(r[s][1],l),p="y"===v;if(p?(r._offset=a.t+(1-r.domain[1])*a.h,r._length=a.h*(r.domain[1]-r.domain[0]),r._m=r._length/(f-h),r._b=-r._m*h):(r._offset=a.l+r.domain[0]*a.w,r._length=a.w*(r.domain[1]-r.domain[0]),r._m=r._length/(h-f),r._b=-r._m*f),r._rangebreaks=[],r._lBreaks=0,r._m2=0,r._B=[],r.rangebreaks&&(r._rangebreaks=r.locateBreaks(Math.min(f,h),Math.max(f,h)),r._rangebreaks.length)){for(u=0;u<r._rangebreaks.length;u++)c=r._rangebreaks[u],r._lBreaks+=Math.abs(c.max-c.min);var d=p;f>h&&(d=!d),d&&r._rangebreaks.reverse();var g=d?-1:1;for(r._m2=g*r._length/(Math.abs(h-f)-r._lBreaks),r._B.push(-r._m2*(p?h:f)),u=0;u<r._rangebreaks.length;u++)c=r._rangebreaks[u],r._B.push(r._B[r._B.length-1]-g*r._m2*(c.max-c.min));for(u=0;u<r._rangebreaks.length;u++)(c=r._rangebreaks[u]).pmin=B(c.min),c.pmax=B(c.max)}if(!isFinite(r._m)||!isFinite(r._b)||r._length<0)throw n._replotting=!1,Error("Something went wrong with axis scaling")},r.maskBreaks=function(n){var i,a,o,l,u,f=r.rangebreaks||[];f._cachedPatterns||(f._cachedPatterns=f.map(function(n){return n.enabled&&n.bounds?s.simpleMap(n.bounds,n.pattern?c:r.d2c):null})),f._cachedValues||(f._cachedValues=f.map(function(n){return n.enabled&&n.values?s.simpleMap(n.values,r.d2c).sort(s.sorterAsc):null}));for(var h=0;h<f.length;h++){var p=f[h];if(p.enabled){if(p.bounds){var d=p.pattern;switch(a=(i=f._cachedPatterns[h])[0],o=i[1],d){case S:l=(u=new Date(n)).getUTCDay(),a>o&&(o+=7,l<a&&(l+=7));break;case M:l=(u=new Date(n)).getUTCHours()+(u.getUTCMinutes()/60+u.getUTCSeconds()/3600+u.getUTCMilliseconds()/36e5),a>o&&(o+=24,l<a&&(l+=24));break;case"":l=n}if(l>=a&&l<o)return y}else for(var v=f._cachedValues[h],g=0;g<v.length;g++)if(o=(a=v[g])+p.dvalue,n>=a&&n<o)return y}}return n},r.locateBreaks=function(n,i){var a,o,l,u,f=[];if(!r.rangebreaks)return f;var h=r.rangebreaks.slice().sort(function(r,n){return r.pattern===S&&n.pattern===M?-1:n.pattern===S&&r.pattern===M?1:0}),p=function(r,a){if((r=s.constrain(r,n,i))!==(a=s.constrain(a,n,i))){for(var o=!0,l=0;l<f.length;l++){var u=f[l];r<u.max&&a>=u.min&&(r<u.min&&(u.min=r),a>u.max&&(u.max=a),o=!1)}o&&f.push({min:r,max:a})}};for(a=0;a<h.length;a++){var d=h[a];if(d.enabled){if(d.bounds){var v=n,g=i;d.pattern&&(v=Math.floor(v)),l=(o=s.simpleMap(d.bounds,d.pattern?c:r.r2l))[0],u=o[1];var y,m,k=new Date(v);switch(d.pattern){case S:m=x,y=(u-l+(u<l?7:0))*b,v+=l*b-(k.getUTCDay()*b+k.getUTCHours()*_+k.getUTCMinutes()*w+k.getUTCSeconds()*T+k.getUTCMilliseconds());break;case M:m=b,y=(u-l+(u<l?24:0))*_,v+=l*_-(k.getUTCHours()*_+k.getUTCMinutes()*w+k.getUTCSeconds()*T+k.getUTCMilliseconds());break;default:v=Math.min(o[0],o[1]),y=m=(g=Math.max(o[0],o[1]))-v}for(var A=v;A<g;A+=m)p(A,A+y)}else for(var E=s.simpleMap(d.values,r.d2c),L=0;L<E.length;L++)p(l=E[L],u=l+d.dvalue)}}return f.sort(function(r,n){return r.min-n.min}),f},r.makeCalcdata=function(n,i,a){var o,l,u,c,f=r.type,h="date"===f&&n[i+"calendar"];if(i in n){if(o=n[i],c=n._length||s.minRowLength(o),s.isTypedArray(o)&&("linear"===f||"log"===f)){if(c===o.length)return o;if(o.subarray)return o.subarray(0,c)}if("multicategory"===f)return function(r,n){for(var i=Array(n),a=0;a<n;a++){var o=(r[0]||[])[a],s=(r[1]||[])[a];i[a]=D([o,s])}return i}(o,c);for(l=Array(c),u=0;u<c;u++)l[u]=r.d2c(o[u],0,h,a)}else{var p=i+"0" in n?r.d2c(n[i+"0"],0,h):0,d=n["d"+i]?Number(n["d"+i]):1;for(o=n[({x:"y",y:"x"})[i]],l=Array(c=n._length||o.length),u=0;u<c;u++)l[u]=p+u*d}if(r.rangebreaks)for(u=0;u<c;u++)l[u]=r.maskBreaks(l[u]);return l},r.isValidRange=function(n,i){return Array.isArray(n)&&2===n.length&&(i&&null===n[0]||u(r.r2l(n[0])))&&(i&&null===n[1]||u(r.r2l(n[1])))},r.getAutorangeDflt=function(n,i){var a=!r.isValidRange(n,"nullOk");return a&&i&&i.reverseDflt?a="reversed":n&&(null===n[0]&&null===n[1]?a=!0:null===n[0]&&null!==n[1]?a="min":null!==n[0]&&null===n[1]&&(a="max")),a},r.isReversed=function(){var n=r.autorange;return"reversed"===n||"min reversed"===n||"max reversed"===n},r.isPtWithinRange=function(n,i){var a=r.c2l(n[v],null,i),o=r.r2l(r.range[0]),s=r.r2l(r.range[1]);return o<s?o<=a&&a<=s:s<=a&&a<=o},r._emptyCategories=function(){r._categories=[],r._categoriesMap={}},r.clearCalc=function(){var i=r._matchGroup;if(i){var a=null,o=null;for(var s in i){var l=n[k.id2name(s)];if(l._categories){a=l._categories,o=l._categoriesMap;break}}a&&o?(r._categories=a,r._categoriesMap=o):r._emptyCategories()}else r._emptyCategories();if(r._initialCategories)for(var u=0;u<r._initialCategories.length;u++)I(r._initialCategories[u])},r.sortByInitialCategories=function(){var a=[];if(r._emptyCategories(),r._initialCategories)for(var o=0;o<r._initialCategories.length;o++)I(r._initialCategories[o]);a=a.concat(r._traceIndices);var s=r._matchGroup;for(var l in s)if(i!==l){var u=n[k.id2name(l)];u._categories=r._categories,u._categoriesMap=r._categoriesMap,a=a.concat(u._traceIndices)}return a};var U=n._d3locale;"date"===r.type&&(r._dateFormat=U?U.timeFormat:o,r._extraFormat=n._extraFormat),r._separators=n.separators,r._numFormat=U?U.numberFormat:l,delete r._minDtick,delete r._forceTick0}},59652:function(r){"use strict";r.exports=function(r){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(n){return void 0!==r[n]});if(n.every(function(i){return r[i]===r[n[0]]})||1===n.length)return r[n[0]]}},96115:function(r,n,i){"use strict";var a=i(71828),o=i(7901).contrast,s=i(13838),l=i(59652),u=i(85501);function c(r,n){function i(i,o){return a.coerce(r,n,s.tickformatstops,i,o)}i("enabled")&&(i("dtickrange"),i("value"))}r.exports=function(r,n,i,f,h){h||(h={});var p=i("labelalias");a.isPlainObject(p)||delete n.labelalias;var d=l(r);if(i("showticklabels")){var v=h.font||{},g=n.color,y=-1!==(n.ticklabelposition||"").indexOf("inside")?o(h.bgColor):g&&g!==s.color.dflt?g:v.color;if(a.coerceFont(i,"tickfont",{family:v.family,size:v.size,color:y}),h.noTicklabelstep||"multicategory"===f||"log"===f||i("ticklabelstep"),h.noAng||i("tickangle"),"category"!==f){var m=i("tickformat");u(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:c}),n.tickformatstops.length||delete n.tickformatstops,h.noExp||m||"date"===f||(i("showexponent",d),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},38701:function(r,n,i){"use strict";var a=i(71828),o=i(13838);r.exports=function(r,n,i,s){var l=s.isMinor,u=l?r.minor||{}:r,c=l?n.minor:n,f=l?o.minor:o,h=a.coerce2(u,c,f,"ticklen",l?.6*(n.ticklen||5):void 0),p=a.coerce2(u,c,f,"tickwidth",l?n.tickwidth||1:void 0),d=a.coerce2(u,c,f,"tickcolor",(l?n.tickcolor:void 0)||c.color);i((l?"minor.":"")+"ticks",!l&&s.outerTicks||h||p||d?"outside":"")||(delete c.ticklen,delete c.tickwidth,delete c.tickcolor)}},26218:function(r,n,i){"use strict";var a=i(66287),o=i(71828).isArrayOrTypedArray,s=i(73627).isTypedArraySpec,l=i(73627).decodeTypedArraySpec;r.exports=function(r,n,i,u,c){c||(c={});var f=c.isMinor,h=f?r.minor||{}:r,p=f?n.minor:n,d=f?"minor.":"";function v(r){var n=h[r];return s(n)&&(n=l(n)),void 0!==n?n:(p._template||{})[r]}var g=v("tick0"),y=v("dtick"),m=i(d+"tickmode",o(v("tickvals"))?"array":y?"linear":"auto");if("auto"===m||"sync"===m)i(d+"nticks");else if("linear"===m){var x=p.dtick=a.dtick(y,u);p.tick0=a.tick0(g,u,n.calendar,x)}else"multicategory"!==u&&(void 0===i(d+"tickvals")?p.tickmode="auto":f||i("ticktext"))}},66847:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(71828),l=i(91424),u=i(89298);r.exports=function(r,n,i,c){var f=r._fullLayout;if(0!==n.length){c&&(h=c());var h,p,d,v,g=a.ease(i.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(v),v=null,function(){for(var i={},a=0;a<n.length;a++){var s=n[a],l=s.plotinfo.xaxis,u=s.plotinfo.yaxis;s.xr0&&(i[l._name+".range"]=s.xr0.slice()),s.yr0&&(i[u._name+".range"]=s.yr0.slice())}return o.call("relayout",r,i).then(function(){for(var r=0;r<n.length;r++)y(n[r].plotinfo)})}()}),p=Date.now(),v=window.requestAnimationFrame(function a(){d=Date.now();for(var c=Math.min(1,(d-p)/i.duration),f=g(c),m=0;m<n.length;m++)(function(n,i){var a=n.plotinfo,o=a.xaxis,c=a.yaxis,f=o._length,h=c._length,p=!!n.xr1,d=!!n.yr1,v=[];if(p){var g=s.simpleMap(n.xr0,o.r2l),y=s.simpleMap(n.xr1,o.r2l),m=g[1]-g[0],x=y[1]-y[0];v[0]=(g[0]*(1-i)+i*y[0]-g[0])/(g[1]-g[0])*f,v[2]=f*(1-i+i*x/m),o.range[0]=o.l2r(g[0]*(1-i)+i*y[0]),o.range[1]=o.l2r(g[1]*(1-i)+i*y[1])}else v[0]=0,v[2]=f;if(d){var b=s.simpleMap(n.yr0,c.r2l),_=s.simpleMap(n.yr1,c.r2l),w=b[1]-b[0],T=_[1]-_[0];v[1]=(b[1]*(1-i)+i*_[1]-b[1])/(b[0]-b[1])*h,v[3]=h*(1-i+i*T/w),c.range[0]=o.l2r(b[0]*(1-i)+i*_[0]),c.range[1]=c.l2r(b[1]*(1-i)+i*_[1])}else v[1]=0,v[3]=h;u.drawOne(r,o,{skipTitle:!0}),u.drawOne(r,c,{skipTitle:!0}),u.redrawComponents(r,[o._id,c._id]);var k=p?f/v[2]:1,A=d?h/v[3]:1,M=p?v[0]:0,S=d?v[1]:0,E=p?v[0]/v[2]*f:0,L=d?v[1]/v[3]*h:0,C=o._offset-E,O=c._offset-L;a.clipRect.call(l.setTranslate,M,S).call(l.setScale,1/k,1/A),a.plot.call(l.setTranslate,C,O).call(l.setScale,k,A),l.setPointGroupScale(a.zoomScalePts,1/k,1/A),l.setTextPointsScale(a.zoomScaleTxt,1/k,1/A)})(n[m],f);d-p>i.duration?(function(){for(var i={},a=0;a<n.length;a++){var s=n[a],l=s.plotinfo.xaxis,u=s.plotinfo.yaxis;s.xr1&&(i[l._name+".range"]=s.xr1.slice()),s.yr1&&(i[u._name+".range"]=s.yr1.slice())}h&&h(),o.call("relayout",r,i).then(function(){for(var r=0;r<n.length;r++)y(n[r].plotinfo)})}(),v=window.cancelAnimationFrame(a)):v=window.requestAnimationFrame(a)}),Promise.resolve()}function y(r){var n=r.xaxis,i=r.yaxis;f._defs.select("#"+r.clipId+"> rect").call(l.setTranslate,0,0).call(l.setScale,1,1),r.plot.call(l.setTranslate,n._offset,i._offset).call(l.setScale,1,1);var a=r.plot.selectAll(".scatterlayer .trace");a.selectAll(".point").call(l.setPointGroupScale,1,1),a.selectAll(".textpoint").call(l.setTextPointsScale,1,1),a.call(l.hideOutsideRangePoints,r)}u.redrawComponents(r)}},951:function(r,n,i){"use strict";var a=i(73972).traceIs,o=i(4322);function s(r){return({v:"x",h:"y"})[r.orientation||"v"]}function l(r,n){var i=s(r),o=a(r,"box-violin"),l=a(r._fullInput||{},"candlestick");return o&&!l&&n===i&&void 0===r[i]&&void 0===r[i+"0"]}r.exports=function(r,n,i,u){i("autotypenumbers",u.autotypenumbersDflt),"-"===i("type",(u.splomStash||{}).type)&&(function(r,n){if("-"===r.type){var i,u=r._id,c=u.charAt(0);-1!==u.indexOf("scene")&&(u=c);var f=function(r,n,i){for(var a=0;a<r.length;a++){var o=r[a];if("splom"===o.type&&o._length>0&&(o["_"+i+"axes"]||{})[n]||(o[i+"axis"]||i)===n&&(l(o,i)||(o[i]||[]).length||o[i+"0"]))return o}}(n,u,c);if(f){if("histogram"!==f.type||c!==({v:"y",h:"x"})[f.orientation||"v"]){var h=c+"calendar",p=f[h],d={noMultiCategory:!a(f,"cartesian")||a(f,"noMultiCategory")};if("box"===f.type&&f._hasPreCompStats&&c===({h:"x",v:"y"})[f.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=r.autotypenumbers,l(f,c)){var v=s(f),g=[];for(i=0;i<n.length;i++){var y=n[i];a(y,"box-violin")&&(y[c+"axis"]||c)===u&&(void 0!==y[v]?g.push(y[v][0]):void 0!==y.name?g.push(y.name):g.push("text"),y[h]!==p&&(p=void 0))}r.type=o(g,p,d)}else if("splom"===f.type){var m=f.dimensions[f._axesDim[u]];m.visible&&(r.type=o(m.values,p,d))}else r.type=o(f[c]||[f[c+"0"]],p,d)}else r.type="linear"}}}(n,u.data),"-"===n.type?n.type="linear":r.type=n.type)}},31137:function(r,n,i){"use strict";var a=i(73972),o=i(71828);function s(r,n,i){var a,s,l,u=!1;if("data"===n.type)a=r._fullData[null!==n.traces?n.traces[0]:0];else{if("layout"!==n.type)return!1;a=r._fullLayout}return s=o.nestedProperty(a,n.prop).get(),(l=i[n.type]=i[n.type]||{}).hasOwnProperty(n.prop)&&l[n.prop]!==s&&(u=!0),l[n.prop]=s,{changed:u,value:s}}function l(r,n){var i=[],a=n[0],s={};if("string"==typeof a)s[a]=n[1];else{if(!o.isPlainObject(a))return i;s=a}return c(s,function(r,n,a){i.push({type:"layout",prop:r,value:a})},"",0),i}function u(r,n){var i,a,s,l,u=[];if(a=n[0],s=n[1],i=n[2],l={},"string"==typeof a)l[a]=s;else{if(!o.isPlainObject(a))return u;l=a,void 0===i&&(i=s)}return void 0===i&&(i=null),c(l,function(n,a,o){var s,l;if(Array.isArray(o)){var c=Math.min((l=o.slice()).length,r.data.length);i&&(c=Math.min(c,i.length)),s=[];for(var f=0;f<c;f++)s[f]=i?i[f]:f}else l=o,s=i?i.slice():null;if(null===s)Array.isArray(l)&&(l=l[0]);else if(Array.isArray(s)){if(!Array.isArray(l)){var h=l;l=[];for(var p=0;p<s.length;p++)l[p]=h}l.length=Math.min(s.length,l.length)}u.push({type:"data",prop:n,traces:s,value:l})},"",0),u}function c(r,n,i,a){Object.keys(r).forEach(function(s){var l=r[s];if("_"!==s[0]){var u=i+(a>0?".":"")+s;o.isPlainObject(l)?c(l,n,u,a+1):n(u,s,l)}})}n.manageCommandObserver=function(r,i,a,l){var u={},c=!0;i&&i._commandObserver&&(u=i._commandObserver),u.cache||(u.cache={}),u.lookupTable={};var f=n.hasSimpleAPICommandBindings(r,a,u.lookupTable);if(i&&i._commandObserver){if(f)return u;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,u}if(f){s(r,f,u.cache),u.check=function(){if(c){var n=s(r,f,u.cache);return n.changed&&l&&void 0!==u.lookupTable[n.value]&&(u.disable(),Promise.resolve(l({value:n.value,type:f.type,prop:f.prop,traces:f.traces,index:u.lookupTable[n.value]})).then(u.enable,u.enable)),n.changed}};for(var h=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<h.length;p++)r._internalOn(h[p],u.check);u.remove=function(){for(var n=0;n<h.length;n++)r._removeInternalListener(h[n],u.check)}}else o.log("Unable to automatically bind plot updates to API command"),u.lookupTable={},u.remove=function(){};return u.disable=function(){c=!1},u.enable=function(){c=!0},i&&(i._commandObserver=u),u},n.hasSimpleAPICommandBindings=function(r,i,a){var o,s,l=i.length;for(o=0;o<l;o++){var u,c=i[o],f=c.method,h=c.args;if(Array.isArray(h)||(h=[]),!f)return!1;var p=n.computeAPICommandBindings(r,f,h);if(1!==p.length)return!1;if(s){if((u=p[0]).type!==s.type||u.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var d=0;d<s.traces.length;d++)if(s.traces[d]!==u.traces[d])return!1}else if(u.prop!==s.prop)return!1}else Array.isArray((s=p[0]).traces)&&s.traces.sort();var v=(u=p[0]).value;if(Array.isArray(v)){if(1!==v.length)return!1;v=v[0]}a&&(a[v]=o)}return s},n.executeAPICommand=function(r,n,i){if("skip"===n)return Promise.resolve();var s=a.apiMethodRegistry[n],l=[r];Array.isArray(i)||(i=[]);for(var u=0;u<i.length;u++)l.push(i[u]);return s.apply(null,l).catch(function(r){return o.warn("API call to Plotly."+n+" rejected.",r),Promise.reject(r)})},n.computeAPICommandBindings=function(r,n,i){var a,o;switch(Array.isArray(i)||(i=[]),n){case"restyle":a=u(r,i);break;case"relayout":a=l(0,i);break;case"update":a=u(r,[i[0],i[2]]).concat(l(0,[i[1]]));break;case"animate":a=Array.isArray((o=i)[0])&&1===o[0].length&&-1!==["string","number"].indexOf(typeof o[0][0])?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[];break;default:a=[]}return a}},27670:function(r,n,i){"use strict";var a=i(1426).extendFlat;n.Y=function(r,n){n=n||{};var i={valType:"info_array",editType:(r=r||{}).editType,items:[{valType:"number",min:0,max:1,editType:r.editType},{valType:"number",min:0,max:1,editType:r.editType}],dflt:[0,1]},o=(r.name&&r.name,r.trace,n.description&&n.description,{x:a({},i,{}),y:a({},i,{}),editType:r.editType});return r.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:r.editType},o.column={valType:"integer",min:0,dflt:0,editType:r.editType}),o},n.c=function(r,n,i,a){var o=a&&a.x||[0,1],s=a&&a.y||[0,1],l=n.grid;if(l){var u=i("domain.column");void 0!==u&&(u<l.columns?o=l._domains.x[u]:delete r.domain.column);var c=i("domain.row");void 0!==c&&(c<l.rows?s=l._domains.y[c]:delete r.domain.row)}var f=i("domain.x",o),h=i("domain.y",s);f[0]<f[1]||(r.domain.x=o.slice()),h[0]<h[1]||(r.domain.y=s.slice())}},41940:function(r){"use strict";r.exports=function(r){var n=r.editType,i=r.colorEditType;void 0===i&&(i=n);var a={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:i},editType:n};return r.autoSize&&(a.size.dflt="auto"),r.autoColor&&(a.color.dflt="auto"),r.arrayOk&&(a.family.arrayOk=!0,a.size.arrayOk=!0,a.color.arrayOk=!0),a}},31391:function(r){"use strict";r.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(r,n){"use strict";n.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},n.axesNames=["lonaxis","lataxis"],n.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},n.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},n.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},n.clipPad=.001,n.precision=.1,n.landColor="#F0DC82",n.waterColor="#3399FF",n.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},n.sphereSVG={type:"Sphere"},n.fillLayers={ocean:1,land:1,lakes:1},n.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},n.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],n.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],n.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(r,n,i){"use strict";var a=i(39898),o=i(27362),s=o.geoPath,l=o.geoDistance,u=i(65704),c=i(73972),f=i(71828),h=f.strTranslate,p=i(7901),d=i(91424),v=i(30211),g=i(74875),y=i(89298),m=i(71739).getAutoRange,x=i(28569),b=i(47322).prepSelect,_=i(47322).clearOutline,w=i(47322).selectOnClick,T=i(74455),k=i(78776),A=i(41327),M=i(90973),S=i(96892).zL;function E(r){this.id=r.id,this.graphDiv=r.graphDiv,this.container=r.container,this.topojsonURL=r.topojsonURL,this.isStatic=r.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=E.prototype;function C(r,n){var i=k.clipPad,a=r[0]+i,o=r[1]-i,s=n[0]+i,l=n[1]-i;a>0&&o<0&&(o+=360);var u=(o-a)/4;return{type:"Polygon",coordinates:[[[a,s],[a,l],[a+u,l],[a+2*u,l],[a+3*u,l],[o,l],[o,s],[o-u,s],[o-2*u,s],[o-3*u,s],[a,s]]]}}r.exports=function(r){return new E(r)},L.plot=function(r,n,i,a){var o=this;if(a)return o.update(r,n,!0);o._geoCalcData=r,o._fullLayout=n;var s=n[this.id],l=[],u=!1;for(var c in k.layerNameToAdjective)if("frame"!==c&&s["show"+c]){u=!0;break}for(var f=!1,h=0;h<r.length;h++){var p=r[0][0].trace;p._geo=o,p.locationmode&&(u=!0);var d=p.marker;if(d){var v=d.angle,g=d.angleref;(v||"north"===g||"previous"===g)&&(f=!0)}}if(this._hasMarkerAngles=f,u){var y=M.getTopojsonName(s);null!==o.topojson&&y===o.topojsonName||(o.topojsonName=y,void 0===PlotlyGeoAssets.topojson[o.topojsonName]&&l.push(o.fetchTopojson()))}l=l.concat(A.fetchTraceGeoData(r)),i.push(new Promise(function(i,a){Promise.all(l).then(function(){o.topojson=PlotlyGeoAssets.topojson[o.topojsonName],o.update(r,n),i()}).catch(a)}))},L.fetchTopojson=function(){var r=this,n=M.getTopojsonPath(r.topojsonURL,r.topojsonName);return new Promise(function(i,o){a.json(n,function(a,s){if(a)return 404===a.status?o(Error(["plotly.js could not find topojson file at",n+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):o(Error(["unexpected error while fetching topojson file at",n].join(" ")));PlotlyGeoAssets.topojson[r.topojsonName]=s,i()})})},L.update=function(r,n,i){var a=n[this.id];this.hasChoropleth=!1;for(var o=0;o<r.length;o++){var s=r[o],l=s[0].trace;"choropleth"===l.type&&(this.hasChoropleth=!0),!0===l.visible&&l._length>0&&l._module.calcGeoJSON(s,n)}if(!i){if(this.updateProjection(r,n))return;this.viewInitial&&this.scope===a.scope||this.saveViewInitial(a)}this.scope=a.scope,this.updateBaseLayers(n,a),this.updateDims(n,a),this.updateFx(n,a),g.generalUpdatePerTraceModule(this.graphDiv,this,r,a);var u=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=u.selectAll(".point"),this.dataPoints.text=u.selectAll("text"),this.dataPaths.line=u.selectAll(".js-line");var c=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=c.selectAll("path"),this._render()},L.updateProjection=function(r,n){var i=this.graphDiv,a=n[this.id],c=n._size,h=a.domain,p=a.projection,d=a.lonaxis,v=a.lataxis,g=d._ax,y=v._ax,x=this.projection=function(r){var n=r.projection,i=n.type,a=k.projNames[i];a="geo"+f.titleCase(a);for(var c=(o[a]||u[a])(),h=r._isSatellite?180*Math.acos(1/n.distance)/Math.PI:r._isClipped?k.lonaxisSpan[i]/2:null,p=["center","rotate","parallels","clipExtent"],d=function(r){return r?c:[]},v=0;v<p.length;v++){var g=p[v];"function"!=typeof c[g]&&(c[g]=d)}return c.isLonLatOverEdges=function(r){if(null===c(r))return!0;if(h){var n=c.rotate();return l(r,[-n[0],-n[1]])>h*Math.PI/180}return!1},c.getPath=function(){return s().projection(c)},c.getBounds=function(r){return c.getPath().bounds(r)},c.precision(k.precision),r._isSatellite&&c.tilt(n.tilt).distance(n.distance),h&&c.clipAngle(h-k.clipPad),c}(a),b=[[c.l+c.w*h.x[0],c.t+c.h*(1-h.y[1])],[c.l+c.w*h.x[1],c.t+c.h*(1-h.y[0])]],_=a.center||{},w=p.rotation||{},T=d.range||[],A=v.range||[];if(a.fitbounds){g._length=b[1][0]-b[0][0],y._length=b[1][1]-b[0][1],g.range=m(i,g),y.range=m(i,y);var M=(g.range[0]+g.range[1])/2,S=(y.range[0]+y.range[1])/2;if(a._isScoped)_={lon:M,lat:S};else if(a._isClipped){_={lon:M,lat:S},w={lon:M,lat:S,roll:w.roll};var E=p.type,L=k.lonaxisSpan[E]/2||180,O=k.lataxisSpan[E]/2||90;T=[M-L,M+L],A=[S-O,S+O]}else _={lon:M,lat:S},w={lon:M,lat:w.lat,roll:w.roll}}x.center([_.lon-w.lon,_.lat-w.lat]).rotate([-w.lon,-w.lat,w.roll]).parallels(p.parallels);var P=C(T,A);x.fitExtent(b,P);var I=this.bounds=x.getBounds(P),D=this.fitScale=x.scale(),z=x.translate();if(a.fitbounds){var R=x.getBounds(C(g.range,y.range)),F=Math.min((I[1][0]-I[0][0])/(R[1][0]-R[0][0]),(I[1][1]-I[0][1])/(R[1][1]-R[0][1]));isFinite(F)?x.scale(F*D):f.warn("Something went wrong during"+this.id+"fitbounds computations.")}else x.scale(p.scale*D);var B=this.midPt=[(I[0][0]+I[1][0])/2,(I[0][1]+I[1][1])/2];if(x.translate([z[0]+(B[0]-z[0]),z[1]+(B[1]-z[1])]).clipExtent(I),a._isAlbersUsa){var N=x([_.lon,_.lat]),j=x.translate();x.translate([j[0]-(N[0]-j[0]),j[1]-(N[1]-j[1])])}},L.updateBaseLayers=function(r,n){var i=this,o=i.topojson,s=i.layers,l=i.basePaths;function u(r){return"lonaxis"===r||"lataxis"===r}function c(r){return!!k.lineLayers[r]}function f(r){return!!k.fillLayers[r]}var h=(this.hasChoropleth?k.layersForChoropleth:k.layers).filter(function(r){return c(r)||f(r)?n["show"+r]:!u(r)||n[r].showgrid}),v=i.framework.selectAll(".layer").data(h,String);v.exit().each(function(r){delete s[r],delete l[r],a.select(this).remove()}),v.enter().append("g").attr("class",function(r){return"layer "+r}).each(function(r){var n=s[r]=a.select(this);"bg"===r?i.bgRect=n.append("rect").style("pointer-events","all"):u(r)?l[r]=n.append("path").style("fill","none"):"backplot"===r?n.append("g").classed("choroplethlayer",!0):"frontplot"===r?n.append("g").classed("scatterlayer",!0):c(r)?l[r]=n.append("path").style("fill","none").style("stroke-miterlimit",2):f(r)&&(l[r]=n.append("path").style("stroke","none"))}),v.order(),v.each(function(i){var a=l[i],s=k.layerNameToAdjective[i];"frame"===i?a.datum(k.sphereSVG):c(i)||f(i)?a.datum(S(o,o.objects[i])):u(i)&&a.datum(function(r,n,i){var a,o,s,l=n[r],u=k.scopeDefaults[n.scope];"lonaxis"===r?(a=u.lonaxisRange,o=u.lataxisRange,s=function(r,n){return[r,n]}):"lataxis"===r&&(a=u.lataxisRange,o=u.lonaxisRange,s=function(r,n){return[n,r]});var c={type:"linear",range:[a[0],a[1]-1e-6],tick0:l.tick0,dtick:l.dtick};y.setConvert(c,i);var f=y.calcTicks(c);n.isScoped||"lonaxis"!==r||f.pop();for(var h=f.length,p=Array(h),d=0;d<h;d++)for(var v=f[d].x,g=p[d]=[],m=o[0];m<o[1]+2.5;m+=2.5)g.push(s(v,m));return{type:"MultiLineString",coordinates:p}}(i,n,r)).call(p.stroke,n[i].gridcolor).call(d.dashLine,n[i].griddash,n[i].gridwidth),c(i)?a.call(p.stroke,n[s+"color"]).call(d.dashLine,"",n[s+"width"]):f(i)&&a.call(p.fill,n[s+"color"])})},L.updateDims=function(r,n){var i=this.bounds,a=(n.framewidth||0)/2,o=i[0][0]-a,s=i[0][1]-a,l=i[1][0]-o+a,u=i[1][1]-s+a;d.setRect(this.clipRect,o,s,l,u),this.bgRect.call(d.setRect,o,s,l,u).call(p.fill,n.bgcolor),this.xaxis._offset=o,this.xaxis._length=l,this.yaxis._offset=s,this.yaxis._length=u},L.updateFx=function(r,n){var i=this,o=i.graphDiv,s=i.bgRect,l=r.dragmode,u=r.clickmode;if(!i.isStatic){var h={element:i.bgRect.node(),gd:o,plotinfo:{id:i.id,xaxis:i.xaxis,yaxis:i.yaxis,fillRangeItems:function(r,n){n.isRect?(r.range={})[i.id]=[p([n.xmin,n.ymin]),p([n.xmax,n.ymax])]:(r.lassoPoints={})[i.id]=n.map(p)}},xaxes:[i.xaxis],yaxes:[i.yaxis],subplot:i.id,clickFn:function(r){2===r&&_(o)}};"pan"===l?(s.node().onmousedown=null,s.call(T(i,n)),s.on("dblclick.zoom",function(){var r=i.viewInitial,n={};for(var a in r)n[i.id+"."+a]=r[a];c.call("_guiRelayout",o,n),o.emit("plotly_doubleclick",null)}),o._context._scrollZoom.geo||s.on("wheel.zoom",null)):"select"!==l&&"lasso"!==l||(s.on(".zoom",null),h.prepFn=function(r,n,i){b(r,n,i,h,l)},x.init(h)),s.on("mousemove",function(){var r=i.projection.invert(f.getPositionFromD3Event());if(!r)return x.unhover(o,a.event);i.xaxis.p2c=function(){return r[0]},i.yaxis.p2c=function(){return r[1]},v.hover(o,a.event,i.id)}),s.on("mouseout",function(){o._dragging||x.unhover(o,a.event)}),s.on("click",function(){"select"!==l&&"lasso"!==l&&(u.indexOf("select")>-1&&w(a.event,o,[i.xaxis],[i.yaxis],i.id,h),u.indexOf("event")>-1&&v.click(o,a.event))})}function p(r){return i.projection.invert([r[0]+i.xaxis._offset,r[1]+i.yaxis._offset])}},L.makeFramework=function(){var r=this,n=r.graphDiv,i=n._fullLayout,o="clip"+i._uid+r.id;r.clipDef=i._clips.append("clipPath").attr("id",o),r.clipRect=r.clipDef.append("rect"),r.framework=a.select(r.container).append("g").attr("class","geo "+r.id).call(d.setClipUrl,o,n),r.project=function(n){var i=r.projection(n);return i?[i[0]-r.xaxis._offset,i[1]-r.yaxis._offset]:[null,null]},r.xaxis={_id:"x",c2p:function(n){return r.project(n)[0]}},r.yaxis={_id:"y",c2p:function(n){return r.project(n)[1]}},r.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},y.setConvert(r.mockAxis,i)},L.saveViewInitial=function(r){var n,i=r.center||{},a=r.projection,o=a.rotation||{};this.viewInitial={fitbounds:r.fitbounds,"projection.scale":a.scale},n=r._isScoped?{"center.lon":i.lon,"center.lat":i.lat}:r._isClipped?{"projection.rotation.lon":o.lon,"projection.rotation.lat":o.lat}:{"center.lon":i.lon,"center.lat":i.lat,"projection.rotation.lon":o.lon},f.extendFlat(this.viewInitial,n)},L.render=function(r){this._hasMarkerAngles&&r?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},L._render=function(){var r,n=this.projection,i=n.getPath();function a(r){var i=n(r.lonlat);return i?h(i[0],i[1]):null}function o(r){return n.isLonLatOverEdges(r.lonlat)?"none":null}for(r in this.basePaths)this.basePaths[r].attr("d",i);for(r in this.dataPaths)this.dataPaths[r].attr("d",function(r){return i(r.geojson)});for(r in this.dataPoints)this.dataPoints[r].attr("display",o).attr("transform",a)}},44622:function(r,n,i){"use strict";var a=i(27659).AU,o=i(71828).counterRegex,s=i(69082),l=o("geo"),u={};u.geo={valType:"subplotid",dflt:"geo",editType:"calc"},r.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:l,attrRegex:l,attributes:u,layoutAttributes:i(77519),supplyLayoutDefaults:i(82161),plot:function(r){for(var n=r._fullLayout,i=r.calcdata,o=n._subplots.geo,l=0;l<o.length;l++){var u=o[l],c=a(i,"geo",u),f=n[u]._subplot;f||(f=s({id:u,graphDiv:r,container:n._geolayer.node(),topojsonURL:r._context.topojsonURL,staticPlot:r._context.staticPlot}),n[u]._subplot=f),f.plot(c,n,r._promises)}},updateFx:function(r){for(var n=r._fullLayout,i=n._subplots.geo,a=0;a<i.length;a++){var o=n[i[a]];o._subplot.updateFx(n,o)}},clean:function(r,n,i,a){for(var o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],u=a[l]._subplot;!n[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function(r,n,i){"use strict";var a=i(22399),o=i(27670).Y,s=i(79952).P,l=i(78776),u=i(30962).overrideAll,c=i(78607),f={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:a.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:s};(r.exports=u({domain:o({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:c(l.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:c(l.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:a.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:l.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:l.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:l.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:l.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:a.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:a.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:a.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:a.background},lonaxis:f,lataxis:f},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(r,n,i){"use strict";var a=i(71828),o=i(49119),s=i(27659).NG,l=i(78776),u=i(77519),c=l.axesNames;function f(r,n,i,o){var u=s(o.fullData,"geo",o.id).map(function(r){return r._expandedIndex}),f=i("resolution"),h=i("scope"),p=l.scopeDefaults[h],d=i("projection.type",p.projType),v=n._isAlbersUsa="albers usa"===d;v&&(h=n.scope="usa");var g=n._isScoped="world"!==h,y=n._isSatellite="satellite"===d,m=n._isConic=-1!==d.indexOf("conic")||"albers"===d,x=n._isClipped=!!l.lonaxisSpan[d];if(!1===r.visible){var b=a.extendDeep({},n._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),n._template=b}for(var _=i("visible"),w=0;w<c.length;w++){var T,k=c[w],A=[30,10][w];if(g)T=p[k+"Range"];else{var M=l[k+"Span"],S=(M[d]||M["*"])/2,E=i("projection.rotation."+k.substr(0,3),p.projRotate[w]);T=[E-S,E+S]}var L=i(k+".range",T);i(k+".tick0"),i(k+".dtick",A),i(k+".showgrid",!!_&&void 0)&&(i(k+".gridcolor"),i(k+".gridwidth"),i(k+".griddash")),n[k]._ax={type:"linear",_id:k.slice(0,3),_traceIndices:u,setScale:a.identity,c2l:a.identity,r2l:a.identity,autorange:!0,range:L.slice(),_m:1,_input:{}}}var C=n.lonaxis.range,O=n.lataxis.range,P=C[0],I=C[1];P>0&&I<0&&(I+=360);var D,z,R,F=(P+I)/2;if(!v){var B=g?p.projRotate:[F,0,0];D=i("projection.rotation.lon",B[0]),i("projection.rotation.lat",B[1]),i("projection.rotation.roll",B[2]),i("showcoastlines",!g&&_)&&(i("coastlinecolor"),i("coastlinewidth")),i("showocean",!!_&&void 0)&&i("oceancolor")}v?(z=-96.6,R=38.7):(z=g?F:D,R=(O[0]+O[1])/2),i("center.lon",z),i("center.lat",R),y&&(i("projection.tilt"),i("projection.distance")),m&&i("projection.parallels",p.projParallels||[0,60]),i("projection.scale"),i("showland",!!_&&void 0)&&i("landcolor"),i("showlakes",!!_&&void 0)&&i("lakecolor"),i("showrivers",!!_&&void 0)&&(i("rivercolor"),i("riverwidth")),i("showcountries",g&&"usa"!==h&&_)&&(i("countrycolor"),i("countrywidth")),("usa"===h||"north america"===h&&50===f)&&(i("showsubunits",_),i("subunitcolor"),i("subunitwidth")),g||i("showframe",_)&&(i("framecolor"),i("framewidth")),i("bgcolor"),i("fitbounds")&&(delete n.projection.scale,g?(delete n.center.lon,delete n.center.lat):x?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}r.exports=function(r,n,i){o(r,n,i,{type:"geo",attributes:u,handleDefaults:f,fullData:i,partition:"y"})}},74455:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(73972),l=Math.PI/180,u=180/Math.PI,c={cursor:"pointer"},f={cursor:"auto"};function h(r,n){return a.behavior.zoom().translate(n.translate()).scale(n.scale())}function p(r,n,i){var a=r.id,l=r.graphDiv,u=l.layout,c=u[a],f=l._fullLayout,h=f[a],p={},d={};function v(r,n){p[a+"."+r]=o.nestedProperty(c,r).get(),s.call("_storeDirectGUIEdit",u,f._preGUI,p);var i=o.nestedProperty(h,r);i.get()!==n&&(i.set(n),o.nestedProperty(c,r).set(n),d[a+"."+r]=n)}i(v),v("projection.scale",n.scale()/r.fitScale),v("fitbounds",!1),l.emit("plotly_relayout",d)}function d(r,n){var i,a,o,s=r.invert(n);return s&&isFinite(s[0])&&isFinite(s[1])&&(i=s[0]*l,[(o=Math.cos(a=s[1]*l))*Math.cos(i),o*Math.sin(i),Math.sin(a)])}function v(r,n,i,a){var o=g(i-r),s=g(a-n);return Math.sqrt(o*o+s*s)}function g(r){return(r%360+540)%360-180}function y(r,n,i){var a=i*l,o=r.slice(),s=0===n?1:0,u=2===n?1:2,c=Math.cos(a),f=Math.sin(a);return o[s]=r[s]*c-r[u]*f,o[u]=r[u]*c+r[s]*f,o}function m(r,n){for(var i=0,a=0,o=r.length;a<o;++a)i+=r[a]*n[a];return i}r.exports=function(r,n){var i=r.projection;return(n._isScoped?function(r,n){var i=h(0,n);function o(i){var a=n.invert(r.midPt);i("center.lon",a[0]),i("center.lat",a[1])}return i.on("zoomstart",function(){a.select(this).style(c)}).on("zoom",function(){n.scale(a.event.scale).translate(a.event.translate),r.render(!0);var i=n.invert(r.midPt);r.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":n.scale()/r.fitScale,"geo.center.lon":i[0],"geo.center.lat":i[1]})}).on("zoomend",function(){a.select(this).style(f),p(r,n,o)}),i}:n._isClipped?function(r,n){var i,o={r:n.rotate(),k:n.scale()},s=h(0,n),g=function(r){for(var n=0,i=arguments.length,o=[];++n<i;)o.push(arguments[n]);var s=a.dispatch.apply(null,o);return s.of=function(n,i){return function(o){var l;try{l=o.sourceEvent=a.event,o.target=r,a.event=o,s[o.type].apply(n,i)}finally{a.event=l}}},s}(s,"zoomstart","zoom","zoomend"),x=0,b=s.on;function _(r){var i=n.rotate();r("projection.rotation.lon",-i[0]),r("projection.rotation.lat",-i[1])}return s.on("zoomstart",function(){a.select(this).style(c);var r,f,h,p,_,w,T,k,A,M,S=a.mouse(this),E=n.rotate(),L=E,C=n.translate(),O=(r=.5*E[0]*l,f=.5*E[1]*l,h=.5*E[2]*l,p=Math.sin(r),_=Math.cos(r),w=Math.sin(f),T=Math.cos(f),k=Math.sin(h),[_*T*(A=Math.cos(h))+p*w*k,p*T*A-_*w*k,_*w*A+p*T*k,_*T*k-p*w*A]);i=d(n,S),b.call(s,"zoom",function(){var r,s,l,c,f,h,p,x,b=a.mouse(this);if(n.scale(o.k=a.event.scale),i){if(d(n,b)){n.rotate(E).translate(C);var _,w,T,k,A,M,P,I,D,z,R,F,B,N,j,U,V,H=d(n,b),q=function(r,n){if(r&&n){var i=[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]],a=Math.sqrt(m(i,i)),o=.5*Math.acos(Math.max(-1,Math.min(1,m(r,n)))),s=Math.sin(o)/a;return a&&[Math.cos(o),i[2]*s,-i[1]*s,i[0]*s]}}(i,H),G=[Math.atan2(2*((r=O[0],s=O[1],l=O[2],c=O[3],_=[r*(f=q[0])-s*(h=q[1])-l*(p=q[2])-c*(x=q[3]),r*h+s*f+l*x-c*p,r*p-s*x+l*f+c*h,r*x+s*p-l*h+c*f])[0]*_[1]+_[2]*_[3]),1-2*(_[1]*_[1]+_[2]*_[2]))*u,Math.asin(Math.max(-1,Math.min(1,2*(_[0]*_[2]-_[3]*_[1]))))*u,Math.atan2(2*(_[0]*_[3]+_[1]*_[2]),1-2*(_[2]*_[2]+_[3]*_[3]))*u],Z=o.r=(w=i,T=L,k=y(w,2,G[0]),k=y(k,1,G[1]),k=y(k,0,G[2]-T[2]),P=w[0],I=w[1],D=w[2],z=k[0],R=k[1],F=k[2],B=Math.atan2(I,P)*u,Math.abs(R)>(N=Math.sqrt(P*P+I*I))?(M=(R>0?90:-90)-B,A=0):(M=Math.asin(R/N)*u-B,A=Math.sqrt(N*N-R*R)),j=180-M-2*B,U=(Math.atan2(F,z)-Math.atan2(D,A))*u,V=(Math.atan2(F,z)-Math.atan2(D,-A))*u,v(T[0],T[1],M,U)<=v(T[0],T[1],j,V)?[M,U,T[2]]:[j,V,T[2]]);isFinite(Z[0])&&isFinite(Z[1])&&isFinite(Z[2])||(Z=L),n.rotate(Z),L=Z}}else i=d(n,S=b);g.of(this,arguments)({type:"zoom"})}),M=g.of(this,arguments),x++||M({type:"zoomstart"})}).on("zoomend",function(){var i;a.select(this).style(f),b.call(s,"zoom",null),i=g.of(this,arguments),--x||i({type:"zoomend"}),p(r,n,_)}).on("zoom.redraw",function(){r.render(!0);var i=n.rotate();r.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":n.scale()/r.fitScale,"geo.projection.rotation.lon":-i[0],"geo.projection.rotation.lat":-i[1]})}),a.rebind(s,g,"on")}:function(r,n){var i,o,s,l,u,d,v,g,y,m=h(0,n);function x(r){return n.invert(r)}function b(i){var a=n.rotate(),o=n.invert(r.midPt);i("projection.rotation.lon",-a[0]),i("center.lon",o[0]),i("center.lat",o[1])}return m.on("zoomstart",function(){a.select(this).style(c),i=a.mouse(this),o=n.rotate(),s=n.translate(),l=o,u=x(i)}).on("zoom",function(){if(d=a.mouse(this),function(r){var i=x(r);if(!i)return!0;var a=n(i);return Math.abs(a[0]-r[0])>2||Math.abs(a[1]-r[1])>2}(i))return m.scale(n.scale()),void m.translate(n.translate());n.scale(a.event.scale),n.translate([s[0],a.event.translate[1]]),u?x(d)&&(g=x(d),v=[l[0]+(g[0]-u[0]),o[1],o[2]],n.rotate(v),l=v):u=x(i=d),y=!0,r.render(!0);var c=n.rotate(),f=n.invert(r.midPt);r.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":n.scale()/r.fitScale,"geo.center.lon":f[0],"geo.center.lat":f[1],"geo.projection.rotation.lon":-c[0]})}).on("zoomend",function(){a.select(this).style(f),y&&p(r,n,b)}),m})(r,i)}},27659:function(r,n,i){"use strict";var a=i(73972),o=i(85555).SUBPLOT_PATTERN;n.AU=function(r,n,i){var o=a.subplotsRegistry[n];if(!o)return[];for(var s=o.attr,l=[],u=0;u<r.length;u++){var c=r[u];c[0].trace[s]===i&&l.push(c)}return l},n.a0=function(r,n){var i,o=[],s=[];if(!(i="string"==typeof n?a.getModule(n).plot:"function"==typeof n?n:n.plot))return[o,r];for(var l=0;l<r.length;l++){var u=r[l],c=u[0].trace;!0===c.visible&&0!==c._length&&(c._module&&c._module.plot===i?o.push(u):s.push(u))}return[o,s]},n.NG=function(r,n,i){if(!a.subplotsRegistry[n])return[];var s,l,u,c=a.subplotsRegistry[n].attr,f=[];if("gl2d"===n){var h=i.match(o);l="x"+h[1],u="y"+h[2]}for(var p=0;p<r.length;p++)s=r[p],"gl2d"===n&&a.traceIs(s,"gl2d")?s[c[0]]===l&&s[c[1]]===u&&f.push(s):s[c]===i&&f.push(s);return f}},75071:function(r,n,i){"use strict";var a=i(16825),o=i(1195),s=i(48956),l=i(85555),u=i(38520);function c(r,n){this.element=r,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}r.exports=function(r){var n=r.mouseContainer,i=r.glplot,f=new c(n,i);function h(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function p(n,a,o){var s,u,c=r.calcDataBox(),p=i.viewBox,d=f.lastPos[0],v=f.lastPos[1],g=l.MINDRAG*i.pixelRatio,y=l.MINZOOM*i.pixelRatio;function m(n,i,a){var o=Math.min(i,a),s=Math.max(i,a);o!==s?(c[n]=o,c[n+2]=s,f.dataBox=c,r.setRanges(c)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(a*=i.pixelRatio,o*=i.pixelRatio,o=p[3]-p[1]-o,r.fullLayout.dragmode){case"zoom":if(n){var x=a/(p[2]-p[0])*(c[2]-c[0])+c[0],b=o/(p[3]-p[1])*(c[3]-c[1])+c[1];f.boxInited||(f.boxStart[0]=x,f.boxStart[1]=b,f.dragStart[0]=a,f.dragStart[1]=o),f.boxEnd[0]=x,f.boxEnd[1]=b,f.boxInited=!0,f.boxEnabled||f.boxStart[0]===f.boxEnd[0]&&f.boxStart[1]===f.boxEnd[1]||(f.boxEnabled=!0);var _=Math.abs(f.dragStart[0]-a)<y,w=Math.abs(f.dragStart[1]-o)<y;if(!function(){for(var n=r.graphDiv._fullLayout._axisConstraintGroups,i=r.xaxis._id,a=r.yaxis._id,o=0;o<n.length;o++)if(-1!==n[o][i]){if(-1!==n[o][a])return!0;break}return!1}()||_&&w)_&&(f.boxEnd[0]=f.boxStart[0]),w&&(f.boxEnd[1]=f.boxStart[1]);else{s=f.boxEnd[0]-f.boxStart[0],u=f.boxEnd[1]-f.boxStart[1];var T=(c[3]-c[1])/(c[2]-c[0]);Math.abs(s*T)>Math.abs(u)?(f.boxEnd[1]=f.boxStart[1]+Math.abs(s)*T*(u>=0?1:-1),f.boxEnd[1]<c[1]?(f.boxEnd[1]=c[1],f.boxEnd[0]=f.boxStart[0]+(c[1]-f.boxStart[1])/Math.abs(T)):f.boxEnd[1]>c[3]&&(f.boxEnd[1]=c[3],f.boxEnd[0]=f.boxStart[0]+(c[3]-f.boxStart[1])/Math.abs(T))):(f.boxEnd[0]=f.boxStart[0]+Math.abs(u)/T*(s>=0?1:-1),f.boxEnd[0]<c[0]?(f.boxEnd[0]=c[0],f.boxEnd[1]=f.boxStart[1]+(c[0]-f.boxStart[0])*Math.abs(T)):f.boxEnd[0]>c[2]&&(f.boxEnd[0]=c[2],f.boxEnd[1]=f.boxStart[1]+(c[2]-f.boxStart[0])*Math.abs(T)))}}else f.boxEnabled?(s=f.boxStart[0]!==f.boxEnd[0],u=f.boxStart[1]!==f.boxEnd[1],s||u?(s&&(m(0,f.boxStart[0],f.boxEnd[0]),r.xaxis.autorange=!1),u&&(m(1,f.boxStart[1],f.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),f.boxEnabled=!1,f.boxInited=!1):f.boxInited&&(f.boxInited=!1);break;case"pan":f.boxEnabled=!1,f.boxInited=!1,n?(f.panning||(f.dragStart[0]=a,f.dragStart[1]=o),Math.abs(f.dragStart[0]-a)<g&&(a=f.dragStart[0]),Math.abs(f.dragStart[1]-o)<g&&(o=f.dragStart[1]),s=(d-a)*(c[2]-c[0])/(i.viewBox[2]-i.viewBox[0]),u=(v-o)*(c[3]-c[1])/(i.viewBox[3]-i.viewBox[1]),c[0]+=s,c[2]+=s,c[1]+=u,c[3]+=u,r.setRanges(c),f.panning=!0,f.lastInputTime=Date.now(),h(),r.cameraChanged(),r.handleAnnotations()):f.panning&&(f.panning=!1,r.relayoutCallback())}f.lastPos[0]=a,f.lastPos[1]=o}return f.mouseListener=a(n,p),n.addEventListener("touchstart",function(r){var i=s(r.changedTouches[0],n);p(0,i[0],i[1]),p(1,i[0],i[1]),r.preventDefault()},!!u&&{passive:!1}),n.addEventListener("touchmove",function(r){r.preventDefault();var i=s(r.changedTouches[0],n);p(1,i[0],i[1]),r.preventDefault()},!!u&&{passive:!1}),n.addEventListener("touchend",function(r){p(0,f.lastPos[0],f.lastPos[1]),r.preventDefault()},!!u&&{passive:!1}),f.wheelListener=o(n,function(n,a){if(!r.scrollZoom)return!1;var o=r.calcDataBox(),s=i.viewBox,l=f.lastPos[0],u=f.lastPos[1],c=Math.exp(5*a/(s[3]-s[1])),p=l/(s[2]-s[0])*(o[2]-o[0])+o[0],d=u/(s[3]-s[1])*(o[3]-o[1])+o[1];return o[0]=(o[0]-p)*c+p,o[2]=(o[2]-p)*c+p,o[1]=(o[1]-d)*c+d,o[3]=(o[3]-d)*c+d,r.setRanges(o),f.lastInputTime=Date.now(),h(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),f}},82961:function(r,n,i){"use strict";var a=i(89298),o=i(78614);function s(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var l=s.prototype,u=["xaxis","yaxis"];l.merge=function(r){var n,i,a,s,l,c,f,h,p,d,v;for(this.titleEnable=!1,this.backgroundColor=o(r.plot_bgcolor),d=0;d<2;++d){var g=(n=u[d]).charAt(0);for(a=(i=r[this.scene[n]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":i.title.text,v=0;v<=2;v+=2)this.labelEnable[d+v]=!1,this.labels[d+v]=a,this.labelColor[d+v]=o(i.title.font.color),this.labelFont[d+v]=i.title.font.family,this.labelSize[d+v]=i.title.font.size,this.labelPad[d+v]=this.getLabelPad(n,i),this.tickEnable[d+v]=!1,this.tickColor[d+v]=o((i.tickfont||{}).color),this.tickAngle[d+v]="auto"===i.tickangle?0:-(Math.PI*i.tickangle)/180,this.tickPad[d+v]=this.getTickPad(i),this.tickMarkLength[d+v]=0,this.tickMarkWidth[d+v]=i.tickwidth||0,this.tickMarkColor[d+v]=o(i.tickcolor),this.borderLineEnable[d+v]=!1,this.borderLineColor[d+v]=o(i.linecolor),this.borderLineWidth[d+v]=i.linewidth||0;f=this.hasSharedAxis(i),l=this.hasAxisInDfltPos(n,i)&&!f,c=this.hasAxisInAltrPos(n,i)&&!f,s=i.mirror||!1,h=f?-1!==String(s).indexOf("all"):!!s,p=f?"allticks"===s:-1!==String(s).indexOf("ticks"),l?this.labelEnable[d]=!0:c&&(this.labelEnable[d+2]=!0),l?this.tickEnable[d]=i.showticklabels:c&&(this.tickEnable[d+2]=i.showticklabels),(l||h)&&(this.borderLineEnable[d]=i.showline),(c||h)&&(this.borderLineEnable[d+2]=i.showline),(l||p)&&(this.tickMarkLength[d]=this.getTickMarkLength(i)),(c||p)&&(this.tickMarkLength[d+2]=this.getTickMarkLength(i)),this.gridLineEnable[d]=i.showgrid,this.gridLineColor[d]=o(i.gridcolor),this.gridLineWidth[d]=i.gridwidth,this.zeroLineEnable[d]=i.zeroline,this.zeroLineColor[d]=o(i.zerolinecolor),this.zeroLineWidth[d]=i.zerolinewidth}},l.hasSharedAxis=function(r){var n=this.scene,i=n.fullLayout._subplots.gl2d;return 0!==a.findSubplotsWithAxis(i,r).indexOf(n.id)},l.hasAxisInDfltPos=function(r,n){var i=n.side;return"xaxis"===r?"bottom"===i:"yaxis"===r?"left"===i:void 0},l.hasAxisInAltrPos=function(r,n){var i=n.side;return"xaxis"===r?"top"===i:"yaxis"===r?"right"===i:void 0},l.getLabelPad=function(r,n){var i=n.title.font.size,a=n.showticklabels;return"xaxis"===r?"top"===n.side?i*(1.5+(a?1:0))-10:i*(1.5+(a?.5:0))-10:"yaxis"===r?"right"===n.side?10+i*(1.5+(a?1:.5)):10+i*(1.5+(a?.5:0)):void 0},l.getTickPad=function(r){return"outside"===r.ticks?10+r.ticklen:15},l.getTickMarkLength=function(r){if(!r.ticks)return 0;var n=r.ticklen;return"inside"===r.ticks?-n:n},r.exports=function(r){return new s(r)}},4796:function(r,n,i){"use strict";var a=i(30962).overrideAll,o=i(92918),s=i(10820),l=i(77922),u=i(85555),c=i(93612),f=i(528),h=i(27659).NG;n.name="gl2d",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=u.idRegex,n.attrRegex=u.attrRegex,n.attributes=i(89502),n.supplyLayoutDefaults=function(r,n,i){n._has("cartesian")||c.supplyLayoutDefaults(r,n,i)},n.layoutAttrOverrides=a(c.layoutAttributes,"plot","from-root"),n.baseLayoutAttrOverrides=a({plot_bgcolor:s.plot_bgcolor,hoverlabel:f.hoverlabel},"plot","nested"),n.plot=function(r){for(var n=r._fullLayout,i=r._fullData,a=n._subplots.gl2d,s=0;s<a.length;s++){var l=a[s],u=n._plots[l],c=h(i,"gl2d",l),f=u._scene2d;void 0===f&&(f=new o({id:l,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},n),u._scene2d=f),f.plot(c,r.calcdata,n,r.layout)}},n.clean=function(r,n,i,a){for(var o=a._subplots.gl2d||[],s=0;s<o.length;s++){var l=o[s],u=a._plots[l];u._scene2d&&0===h(r,"gl2d",l).length&&(u._scene2d.destroy(),delete a._plots[l])}c.clean.apply(this,arguments)},n.drawFramework=function(r){r._context.staticPlot||c.drawFramework(r)},n.toSVG=function(r){for(var n=r._fullLayout,i=n._subplots.gl2d,a=0;a<i.length;a++){var o=n._plots[i[a]]._scene2d,s=o.toImage("png");n._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),o.destroy()}},n.updateFx=function(r){for(var n=r._fullLayout,i=n._subplots.gl2d,a=0;a<i.length;a++)n._plots[i[a]]._scene2d.updateFx(n.dragmode)}},92918:function(r,n,i){"use strict";var a,o,s=i(73972),l=i(89298),u=i(30211),c=i(9330).gl_plot2d,f=i(9330).gl_spikes2d,h=i(9330).gl_select_box,p=i(40372),d=i(82961),v=i(75071),g=i(58617),y=i(99082),m=y.enforce,x=y.clean,b=i(71739).doAutoRange,_=i(64505),w=_.drawMode,T=_.selectMode,k=["xaxis","yaxis"],A=i(85555).SUBPLOT_PATTERN;function M(r,n){this.container=r.container,this.graphDiv=r.graphDiv,this.pixelRatio=r.plotGlPixelRatio||window.devicePixelRatio,this.id=r.id,this.staticPlot=!!r.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(n),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(n),this.glplot=c(this.glplotOptions),this.camera=v(this),this.traces={},this.spikes=f(this.glplot),this.selectBox=h(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}r.exports=M;var S=M.prototype;S.makeFramework=function(){if(this.staticPlot){if(!(o||(o=p({canvas:a=document.createElement("canvas"),preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw Error("Error creating static canvas/context for image server");this.canvas=a,this.gl=o}else{var r=this.container.querySelector(".gl-canvas-focus"),n=p({canvas:r,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!n)return g(this),void(this.stopped=!0);this.canvas=r,this.gl=n}var i=this.canvas;i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",this.updateSize(i);var s=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",s.style["z-index"]=20,s.style["pointer-events"]="none";var l=this.mouseContainer=document.createElement("div");l.style.position="absolute",l.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var u=this.container;u.appendChild(s),u.appendChild(l);var c=this;l.addEventListener("mouseout",function(){c.isMouseOver=!1,c.unhover()}),l.addEventListener("mouseover",function(){c.isMouseOver=!0})},S.toImage=function(r){r||(r="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(a),this.updateSize(this.canvas);var n=this.glplot.gl,i=n.drawingBufferWidth,o=n.drawingBufferHeight;n.clearColor(1,1,1,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),n.bindFramebuffer(n.FRAMEBUFFER,null);var s=new Uint8Array(i*o*4);n.readPixels(0,0,i,o,n.RGBA,n.UNSIGNED_BYTE,s);for(var l=0,u=o-1;l<u;++l,--u)for(var c=0;c<i;++c)for(var f=0;f<4;++f){var h=s[4*(i*l+c)+f];s[4*(i*l+c)+f]=s[4*(i*u+c)+f],s[4*(i*u+c)+f]=h}var p=document.createElement("canvas");p.width=i,p.height=o;var d,v=p.getContext("2d",{willReadFrequently:!0}),g=v.createImageData(i,o);switch(g.data.set(s),v.putImageData(g,0,0),r){case"jpeg":d=p.toDataURL("image/jpeg");break;case"webp":d=p.toDataURL("image/webp");break;default:d=p.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(a),d},S.updateSize=function(r){r||(r=this.canvas);var n=this.pixelRatio,i=this.fullLayout,a=i.width,o=i.height,s=0|Math.ceil(n*a),l=0|Math.ceil(n*o);return r.width===s&&r.height===l||(r.width=s,r.height=l),r},S.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var r=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],n=0;n<2;++n)for(var i=0;i<r[n].length;++i)r[n][i].text=r[n][i].text+"";return r},S.updateRefs=function(r){this.fullLayout=r;var n=this.id.match(A),i="xaxis"+n[1],a="yaxis"+n[2];this.xaxis=this.fullLayout[i],this.yaxis=this.fullLayout[a]},S.relayoutCallback=function(){var r=this.graphDiv,n=this.xaxis,i=this.yaxis,a=r.layout,o={},l=o[n._name+".range"]=n.range.slice(),u=o[i._name+".range"]=i.range.slice();o[n._name+".autorange"]=n.autorange,o[i._name+".autorange"]=i.autorange,s.call("_storeDirectGUIEdit",r.layout,r._fullLayout._preGUI,o);var c=a[n._name];c.range=l,c.autorange=n.autorange;var f=a[i._name];f.range=u,f.autorange=i.autorange,o.lastInputTime=this.camera.lastInputTime,r.emit("plotly_relayout",o)},S.cameraChanged=function(){var r=this.camera;this.glplot.setDataBox(this.calcDataBox());var n=this.computeTickMarks();(function(r,n){for(var i=0;i<2;++i){var a=r[i],o=n[i];if(a.length!==o.length)return!0;for(var s=0;s<a.length;++s)if(a[s].x!==o[s].x)return!0}return!1})(n,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=n,this.glplotOptions.dataBox=r.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},S.handleAnnotations=function(){for(var r=this.graphDiv,n=this.fullLayout.annotations,i=0;i<n.length;i++){var a=n[i];a.xref===this.xaxis._id&&a.yref===this.yaxis._id&&s.getComponentMethod("annotations","drawOne")(r,i)}},S.destroy=function(){if(this.glplot){var r=this.traces;r&&Object.keys(r).map(function(n){r[n].dispose(),delete r[n]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},S.plot=function(r,n,i){var a=this.glplot;this.updateRefs(i),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(r,n),this.updateFx(i.dragmode);var o=i.width,s=i.height;this.updateSize(this.canvas);var l=this.glplotOptions;l.merge(i),l.screenBox=[0,0,o,s];var u={_fullLayout:{_axisConstraintGroups:i._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:i._size}};x(u,this.xaxis),x(u,this.yaxis);var c,f,h=i._size,p=this.xaxis.domain,d=this.yaxis.domain;for(l.viewBox=[h.l+p[0]*h.w,h.b+d[0]*h.h,o-h.r-(1-p[1])*h.w,s-h.t-(1-d[1])*h.h],this.mouseContainer.style.width=h.w*(p[1]-p[0])+"px",this.mouseContainer.style.height=h.h*(d[1]-d[0])+"px",this.mouseContainer.height=h.h*(d[1]-d[0]),this.mouseContainer.style.left=h.l+p[0]*h.w+"px",this.mouseContainer.style.top=h.t+(1-d[1])*h.h+"px",f=0;f<2;++f)(c=this[k[f]])._length=l.viewBox[f+2]-l.viewBox[f],b(this.graphDiv,c),c.setScale();m(u),l.ticks=this.computeTickMarks(),l.dataBox=this.calcDataBox(),l.merge(i),a.update(l),this.glplot.draw()},S.calcDataBox=function(){var r=this.xaxis,n=this.yaxis,i=r.range,a=n.range,o=r.r2l,s=n.r2l;return[o(i[0]),s(a[0]),o(i[1]),s(a[1])]},S.setRanges=function(r){var n=this.xaxis,i=this.yaxis,a=n.l2r,o=i.l2r;n.range=[a(r[0]),a(r[2])],i.range=[o(r[1]),o(r[3])]},S.updateTraces=function(r,n){var i,a,o,s=Object.keys(this.traces);this.fullData=r;t:for(i=0;i<s.length;i++){var l=s[i],u=this.traces[l];for(a=0;a<r.length;a++)if((o=r[a]).uid===l&&o.type===u.type)continue t;u.dispose(),delete this.traces[l]}for(i=0;i<r.length;i++){o=r[i];var c=n[i],f=this.traces[o.uid];f?f.update(o,c):(f=o._module.plot(this,o,c),this.traces[o.uid]=f)}this.glplot.objects.sort(function(r,n){return r._trace.index-n._trace.index})},S.updateFx=function(r){T(r)||w(r)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===r?"move":"zoom"===r?"crosshair":null},S.emitPointAction=function(r,n){for(var i,a=r.trace.uid,o=r.pointIndex,s=0;s<this.fullData.length;s++)this.fullData[s].uid===a&&(i=this.fullData[s]);var l={x:r.traceCoord[0],y:r.traceCoord[1],curveNumber:i.index,pointNumber:o,data:i._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};u.appendArrayPointValue(l,i,o),this.graphDiv.emit(n,{points:[l]})},S.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var r=this.glplot,n=this.camera,i=n.mouseListener,a=1===this.lastButtonState&&0===i.buttons,o=this.fullLayout;this.lastButtonState=i.buttons,this.cameraChanged();var s,l=i.x*r.pixelRatio,c=this.canvas.height-r.pixelRatio*i.y;if(n.boxEnabled&&"zoom"===o.dragmode){this.selectBox.enabled=!0;for(var f=this.selectBox.selectBox=[Math.min(n.boxStart[0],n.boxEnd[0]),Math.min(n.boxStart[1],n.boxEnd[1]),Math.max(n.boxStart[0],n.boxEnd[0]),Math.max(n.boxStart[1],n.boxEnd[1])],h=0;h<2;h++)n.boxStart[h]===n.boxEnd[h]&&(f[h]=r.dataBox[h],f[h+2]=r.dataBox[h+2]);r.setDirty()}else if(!n.panning&&this.isMouseOver){this.selectBox.enabled=!1;var p=o._size,d=this.xaxis.domain,v=this.yaxis.domain,g=(s=r.pick(l/r.pixelRatio+p.l+d[0]*p.w,c/r.pixelRatio-(p.t+(1-v[1])*p.h)))&&s.object._trace.handlePick(s);if(g&&a&&this.emitPointAction(g,"plotly_click"),s&&"skip"!==s.object._trace.hoverinfo&&o.hovermode&&g&&(!this.lastPickResult||this.lastPickResult.traceUid!==g.trace.uid||this.lastPickResult.dataCoord[0]!==g.dataCoord[0]||this.lastPickResult.dataCoord[1]!==g.dataCoord[1])){this.lastPickResult={traceUid:g.trace?g.trace.uid:null,dataCoord:g.dataCoord.slice()},this.spikes.update({center:s.dataCoord}),g.screenCoord=[((r.viewBox[2]-r.viewBox[0])*(s.dataCoord[0]-r.dataBox[0])/(r.dataBox[2]-r.dataBox[0])+r.viewBox[0])/r.pixelRatio,(this.canvas.height-(r.viewBox[3]-r.viewBox[1])*(s.dataCoord[1]-r.dataBox[1])/(r.dataBox[3]-r.dataBox[1])-r.viewBox[1])/r.pixelRatio],this.emitPointAction(g,"plotly_hover");var y=this.fullData[g.trace.index]||{},m=g.pointIndex,x=u.castHoverinfo(y,o,m);if(x&&"all"!==x){var b=x.split("+");-1===b.indexOf("x")&&(g.traceCoord[0]=void 0),-1===b.indexOf("y")&&(g.traceCoord[1]=void 0),-1===b.indexOf("z")&&(g.traceCoord[2]=void 0),-1===b.indexOf("text")&&(g.textLabel=void 0),-1===b.indexOf("name")&&(g.name=void 0)}u.loneHover({x:g.screenCoord[0],y:g.screenCoord[1],xLabel:this.hoverFormatter("xaxis",g.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",g.traceCoord[1]),zLabel:g.traceCoord[2],text:g.textLabel,name:g.name,color:u.castHoverOption(y,m,"bgcolor")||g.color,borderColor:u.castHoverOption(y,m,"bordercolor"),fontFamily:u.castHoverOption(y,m,"font.family"),fontSize:u.castHoverOption(y,m,"font.size"),fontColor:u.castHoverOption(y,m,"font.color"),nameLength:u.castHoverOption(y,m,"namelength"),textAlign:u.castHoverOption(y,m,"align")},{container:this.svgContainer,gd:this.graphDiv})}}s||this.unhover(),r.draw()}},S.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),u.loneUnhover(this.svgContainer))},S.hoverFormatter=function(r,n){if(void 0!==n){var i=this[r];return l.tickText(i,i.c2l(n),"hover").text}}},58547:function(r,n,i){"use strict";var a=i(30962).overrideAll,o=i(528),s=i(33539),l=i(27659).NG,u=i(71828),c=i(77922),f="gl3d",h="scene";n.name=f,n.attr=h,n.idRoot=h,n.idRegex=n.attrRegex=u.counterRegex("scene"),n.attributes=i(59084),n.layoutAttributes=i(65500),n.baseLayoutAttrOverrides=a({hoverlabel:o.hoverlabel},"plot","nested"),n.supplyLayoutDefaults=i(24682),n.plot=function(r){for(var n=r._fullLayout,i=r._fullData,a=n._subplots[f],o=0;o<a.length;o++){var u=a[o],c=l(i,f,u),h=n[u],p=h.camera,d=h._scene;d||(d=new s({id:u,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio,camera:p},n),h._scene=d),d.viewInitial||(d.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),d.plot(c,n,r.layout)}},n.clean=function(r,n,i,a){for(var o=a._subplots[f]||[],s=0;s<o.length;s++){var l=o[s];!n[l]&&a[l]._scene&&(a[l]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+l).remove())}},n.toSVG=function(r){for(var n=r._fullLayout,i=n._subplots[f],a=n._size,o=0;o<i.length;o++){var s=n[i[o]],l=s.domain,u=s._scene,h=u.toImage("png");n._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":h,x:a.l+a.w*l.x[0],y:a.t+a.h*(1-l.y[1]),width:a.w*(l.x[1]-l.x[0]),height:a.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"}),u.destroy()}},n.cleanId=function(r){if(r.match(/^scene[0-9]*$/)){var n=r.substr(5);return"1"===n&&(n=""),h+n}},n.updateFx=function(r){for(var n=r._fullLayout,i=n._subplots[f],a=0;a<i.length;a++)n[i[a]]._scene.updateFx(n.dragmode,n.hovermode)}},59084:function(r){"use strict";r.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(r,n,i){"use strict";var a=i(7901),o=i(13838),s=i(1426).extendFlat,l=i(30962).overrideAll;r.exports=l({visible:o.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:a.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:o.color,categoryorder:o.categoryorder,categoryarray:o.categoryarray,title:{text:o.title.text,font:o.title.font},type:s({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorange:o.autorange,autorangeoptions:{minallowed:o.autorangeoptions.minallowed,maxallowed:o.autorangeoptions.maxallowed,clipmin:o.autorangeoptions.clipmin,clipmax:o.autorangeoptions.clipmax,include:o.autorangeoptions.include,editType:"plot"},rangemode:o.rangemode,minallowed:o.minallowed,maxallowed:o.maxallowed,range:s({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,mirror:o.mirror,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,labelalias:o.labelalias,tickfont:o.tickfont,tickangle:o.tickangle,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:o.showline,linecolor:o.linecolor,linewidth:o.linewidth,showgrid:o.showgrid,gridcolor:s({},o.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:o.gridwidth,zeroline:o.zeroline,zerolinecolor:o.zerolinecolor,zerolinewidth:o.zerolinewidth,_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},"plot","from-root")},3277:function(r,n,i){"use strict";var a=i(84267).mix,o=i(71828),s=i(44467),l=i(77894),u=i(951),c=i(71453),f=["xaxis","yaxis","zaxis"];r.exports=function(r,n,i){var h,p;function d(r,n){return o.coerce(h,p,l,r,n)}for(var v=0;v<f.length;v++){var g=f[v];h=r[g]||{},(p=s.newContainer(n,g))._id=g[0]+i.scene,p._name=g,u(h,p,d,i),c(h,p,d,{font:i.font,letter:g[0],data:i.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),d("gridcolor",a(p.color,i.bgColor,72.72727272727273).toRgbString()),d("title.text",g[0]),p.setScale=o.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",p.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},30422:function(r,n,i){"use strict";var a=i(78614),o=i(71828),s=["xaxis","yaxis","zaxis"];function l(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}l.prototype.merge=function(r,n){for(var i=0;i<3;++i){var l=n[s[i]];l.visible?(this.labels[i]=r._meta?o.templateString(l.title.text,r._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[i]=a(l.title.font.color)),l.title.font.family&&(this.labelFont[i]=l.title.font.family),l.title.font.size&&(this.labelSize[i]=l.title.font.size)),"showline"in l&&(this.lineEnable[i]=l.showline),"linecolor"in l&&(this.lineColor[i]=a(l.linecolor)),"linewidth"in l&&(this.lineWidth[i]=l.linewidth),"showgrid"in l&&(this.gridEnable[i]=l.showgrid),"gridcolor"in l&&(this.gridColor[i]=a(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[i]=l.gridwidth),"log"===l.type?this.zeroEnable[i]=!1:"zeroline"in l&&(this.zeroEnable[i]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[i]=a(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[i]=l.zerolinewidth),"ticks"in l&&l.ticks?this.lineTickEnable[i]=!0:this.lineTickEnable[i]=!1,"ticklen"in l&&(this.lineTickLength[i]=this._defaultLineTickLength[i]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[i]=a(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[i]=l.tickwidth),"tickangle"in l&&(this.tickAngle[i]="auto"===l.tickangle?-3600:-(Math.PI*l.tickangle)/180),"showticklabels"in l&&(this.tickEnable[i]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[i]=a(l.tickfont.color)),l.tickfont.family&&(this.tickFont[i]=l.tickfont.family),l.tickfont.size&&(this.tickSize[i]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[i]=!0,this.lineMirror[i]=!0):!0===l.mirror?(this.lineTickMirror[i]=!1,this.lineMirror[i]=!0):(this.lineTickMirror[i]=!1,this.lineMirror[i]=!1):this.lineMirror[i]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[i]=!0,this.backgroundColor[i]=a(l.backgroundcolor)):this.backgroundEnable[i]=!1):(this.tickEnable[i]=!1,this.labelEnable[i]=!1,this.lineEnable[i]=!1,this.lineTickEnable[i]=!1,this.gridEnable[i]=!1,this.zeroEnable[i]=!1,this.backgroundEnable[i]=!1)}},r.exports=function(r,n){var i=new l;return i.merge(r,n),i}},24682:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(73972),l=i(49119),u=i(3277),c=i(65500),f=i(27659).NG,h="gl3d";function p(r,n,i,a){for(var l=i("bgcolor"),c=o.combine(l,a.paper_bgcolor),p=["up","center","eye"],d=0;d<p.length;d++)i("camera."+p[d]+".x"),i("camera."+p[d]+".y"),i("camera."+p[d]+".z");i("camera.projection.type");var v=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),g=i("aspectmode",v?"manual":"auto");v||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},"manual"===g&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var y=f(a.fullData,h,a.id);u(r,n,{font:a.font,scene:a.id,data:y,bgColor:c,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),s.getComponentMethod("annotations3d","handleDefaults")(r,n,a);var m=a.getDfltFromLayout("dragmode");if(!1!==m&&!m){if(m="orbit",r.camera&&r.camera.up){var x=r.camera.up.x,b=r.camera.up.y,_=r.camera.up.z;0!==_&&(x&&b&&_?_/Math.sqrt(x*x+b*b+_*_)>.999&&(m="turntable"):m="turntable")}else m="turntable"}i("dragmode",m),i("hovermode",a.getDfltFromLayout("hovermode"))}r.exports=function(r,n,i){var o=n._basePlotModules.length>1;l(r,n,i,{type:h,attributes:c,handleDefaults:p,fullLayout:n,font:n.font,fullData:i,getDfltFromLayout:function(n){if(!o)return a.validate(r[n],c[n])?r[n]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function(r,n,i){"use strict";var a=i(77894),o=i(27670).Y,s=i(1426).extendFlat,l=i(71828).counterRegex;function u(r,n,i){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:i,editType:"camera"},editType:"camera"}}r.exports={_arrayAttrRegexps:[l("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:s(u(0,0,1),{}),center:s(u(0,0,0),{}),eye:s(u(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:o({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:a,yaxis:a,zaxis:a,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(r,n,i){"use strict";var a=i(78614),o=["xaxis","yaxis","zaxis"];function s(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}s.prototype.merge=function(r){for(var n=0;n<3;++n){var i=r[o[n]];i.visible?(this.enabled[n]=i.showspikes,this.colors[n]=a(i.spikecolor),this.drawSides[n]=i.spikesides,this.lineWidth[n]=i.spikethickness):(this.enabled[n]=!1,this.drawSides[n]=!1)}},r.exports=function(r){var n=new s;return n.merge(r),n}},96085:function(r,n,i){"use strict";r.exports=function(r){for(var n=r.axesOptions,i=r.glplot.axesPixels,u=r.fullSceneLayout,c=[[],[],[]],f=0;f<3;++f){var h=u[s[f]];if(h._length=(i[f].hi-i[f].lo)*i[f].pixelsPerDataUnit/r.dataScale[f],Math.abs(h._length)===1/0||isNaN(h._length))c[f]=[];else{h._input_range=h.range.slice(),h.range[0]=i[f].lo/r.dataScale[f],h.range[1]=i[f].hi/r.dataScale[f],h._m=1/(r.dataScale[f]*i[f].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var p=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var d=h.nticks||o.constrain(h._length/40,4,9);a.autoTicks(h,Math.abs(h.range[1]-h.range[0])/d)}for(var v=a.calcTicks(h,{msUTC:!0}),g=0;g<v.length;++g)v[g].x=v[g].x*r.dataScale[f],"date"===h.type&&(v[g].text=v[g].text.replace(/\<br\>/g," "));c[f]=v,h.tickmode=p}}for(n.ticks=c,f=0;f<3;++f)for(l[f]=.5*(r.glplot.bounds[0][f]+r.glplot.bounds[1][f]),g=0;g<2;++g)n.bounds[g][f]=r.glplot.bounds[g][f];r.contourLevels=function(r){for(var n=[,,,],i=0;i<3;++i){for(var a=r[i],o=Array(a.length),s=0;s<a.length;++s)o[s]=a[s].x;n[i]=o}return n}(c)};var a=i(89298),o=i(71828),s=["xaxis","yaxis","zaxis"],l=[0,0,0]},63538:function(r){"use strict";function n(r,n){var i,a,o=[0,0,0,0];for(i=0;i<4;++i)for(a=0;a<4;++a)o[a]+=r[4*i+a]*n[i];return o}r.exports=function(r,i){return n(r.projection,n(r.view,n(r.model,[i[0],i[1],i[2],1])))}},33539:function(r,n,i){"use strict";var a,o,s=i(9330).gl_plot3d,l=s.createCamera,u=s.createScene,c=i(40372),f=i(38520),h=i(73972),p=i(71828),d=p.preserveDrawingBuffer(),v=i(89298),g=i(30211),y=i(78614),m=i(58617),x=i(63538),b=i(30422),_=i(13133),w=i(96085),T=i(71739).applyAutorangeOptions,k=!1;function A(r,n){var i=document.createElement("div"),a=r.container;this.graphDiv=r.graphDiv;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.position="absolute",o.style.top=o.style.left="0px",o.style.width=o.style.height="100%",o.style["z-index"]=20,o.style["pointer-events"]="none",i.appendChild(o),this.svgContainer=o,i.id=r.id,i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",a.appendChild(i),this.fullLayout=n,this.id=r.id||"scene",this.fullSceneLayout=n[this.id],this.plotArgs=[[],{},{}],this.axesOptions=b(n,n[this.id]),this.spikeOptions=_(n[this.id]),this.container=i,this.staticMode=!!r.staticPlot,this.pixelRatio=this.pixelRatio||r.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=h.getComponentMethod("annotations3d","convert"),this.drawAnnotations=h.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var M=A.prototype;M.prepareOptions=function(){var r={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(o||(o=c({canvas:a=document.createElement("canvas"),preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw Error("error creating static canvas/context for image server");r.gl=o,r.canvas=a}return r};var S=!0;M.tryCreatePlot=function(){var r=this.prepareOptions(),n=!0;try{this.glplot=u(r)}catch(i){if(this.staticMode||!S||d)n=!1;else{p.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");try{d=r.glOptions.preserveDrawingBuffer=!0,this.glplot=u(r)}catch(i){d=r.glOptions.preserveDrawingBuffer=!1,n=!1}}}return S=!1,n},M.initializeGLCamera=function(){var r=this.fullSceneLayout.camera,n="orthographic"===r.projection.type;this.camera=l(this.container,{center:[r.center.x,r.center.y,r.center.z],eye:[r.eye.x,r.eye.y,r.eye.z],up:[r.up.x,r.up.y,r.up.z],_ortho:n,zoomMin:.01,zoomMax:100,mode:"orbit"})},M.initializeGLPlot=function(){var r=this;if(r.initializeGLCamera(),!r.tryCreatePlot())return m(r);r.traces={},r.make4thDimension();var n=r.graphDiv,i=n.layout,a=function(){var n={};return r.isCameraChanged(i)&&(n[r.id+".camera"]=r.getCamera()),r.isAspectChanged(i)&&(n[r.id+".aspectratio"]=r.glplot.getAspectratio(),"manual"!==i[r.id].aspectmode&&(r.fullSceneLayout.aspectmode=i[r.id].aspectmode=n[r.id+".aspectmode"]="manual")),n},o=function(r){if(!1!==r.fullSceneLayout.dragmode){var n=a();r.saveLayout(i),r.graphDiv.emit("plotly_relayout",n)}};return r.glplot.canvas&&(r.glplot.canvas.addEventListener("mouseup",function(){o(r)}),r.glplot.canvas.addEventListener("touchstart",function(){k=!0}),r.glplot.canvas.addEventListener("wheel",function(i){if(n._context._scrollZoom.gl3d){if(r.camera._ortho){var a=i.deltaX>i.deltaY?1.1:1/1.1,s=r.glplot.getAspectratio();r.glplot.setAspectratio({x:a*s.x,y:a*s.y,z:a*s.z})}o(r)}},!!f&&{passive:!1}),r.glplot.canvas.addEventListener("mousemove",function(){if(!1!==r.fullSceneLayout.dragmode&&0!==r.camera.mouseListener.buttons){var n=a();r.graphDiv.emit("plotly_relayouting",n)}}),r.staticMode||r.glplot.canvas.addEventListener("webglcontextlost",function(i){n&&n.emit&&n.emit("plotly_webglcontextlost",{event:i,layer:r.id})},!1)),r.glplot.oncontextloss=function(){r.recoverContext()},r.glplot.onrender=function(){r.render()},!0},M.render=function(){var r,n=this,i=n.graphDiv,a=n.svgContainer,o=n.container.getBoundingClientRect();i._fullLayout._calcInverseTransform(i);var s=i._fullLayout._invScaleX,l=i._fullLayout._invScaleY,u=o.width*s,c=o.height*l;a.setAttributeNS(null,"viewBox","0 0 "+u+" "+c),a.setAttributeNS(null,"width",u),a.setAttributeNS(null,"height",c),w(n),n.glplot.axes.update(n.axesOptions);for(var f=Object.keys(n.traces),h=null,d=n.glplot.selection,y=0;y<f.length;++y)"skip"!==(r=n.traces[f[y]]).data.hoverinfo&&r.handlePick(d)&&(h=r),r.setContourLevels&&r.setContourLevels();function m(r,i,a){var o=n.fullSceneLayout[r+"axis"];return"log"!==o.type&&(i=o.d2l(i)),v.hoverLabelText(o,i,a)}if(null!==h){var b=x(n.glplot.cameraParams,d.dataCoordinate);r=h.data;var _,T=i._fullData[r.index],A=d.index,M={xLabel:m("x",d.traceCoordinate[0],r.xhoverformat),yLabel:m("y",d.traceCoordinate[1],r.yhoverformat),zLabel:m("z",d.traceCoordinate[2],r.zhoverformat)},S=g.castHoverinfo(T,n.fullLayout,A),E=(S||"").split("+"),L=S&&"all"===S;T.hovertemplate||L||(-1===E.indexOf("x")&&(M.xLabel=void 0),-1===E.indexOf("y")&&(M.yLabel=void 0),-1===E.indexOf("z")&&(M.zLabel=void 0),-1===E.indexOf("text")&&(d.textLabel=void 0),-1===E.indexOf("name")&&(h.name=void 0));var C=[];"cone"===r.type||"streamtube"===r.type?(M.uLabel=m("x",d.traceCoordinate[3],r.uhoverformat),(L||-1!==E.indexOf("u"))&&C.push("u: "+M.uLabel),M.vLabel=m("y",d.traceCoordinate[4],r.vhoverformat),(L||-1!==E.indexOf("v"))&&C.push("v: "+M.vLabel),M.wLabel=m("z",d.traceCoordinate[5],r.whoverformat),(L||-1!==E.indexOf("w"))&&C.push("w: "+M.wLabel),M.normLabel=d.traceCoordinate[6].toPrecision(3),(L||-1!==E.indexOf("norm"))&&C.push("norm: "+M.normLabel),"streamtube"===r.type&&(M.divergenceLabel=d.traceCoordinate[7].toPrecision(3),(L||-1!==E.indexOf("divergence"))&&C.push("divergence: "+M.divergenceLabel)),d.textLabel&&C.push(d.textLabel),_=C.join("<br>")):"isosurface"===r.type||"volume"===r.type?(M.valueLabel=v.hoverLabelText(n._mockAxis,n._mockAxis.d2l(d.traceCoordinate[3]),r.valuehoverformat),C.push("value: "+M.valueLabel),d.textLabel&&C.push(d.textLabel),_=C.join("<br>")):_=d.textLabel;var O={x:d.traceCoordinate[0],y:d.traceCoordinate[1],z:d.traceCoordinate[2],data:T._input,fullData:T,curveNumber:T.index,pointNumber:A};g.appendArrayPointValue(O,T,A),r._module.eventData&&(O=T._module.eventData(O,d,T,{},A));var P={points:[O]};if(n.fullSceneLayout.hovermode){var I=[];g.loneHover({trace:T,x:(.5+.5*b[0]/b[3])*u,y:(.5-.5*b[1]/b[3])*c,xLabel:M.xLabel,yLabel:M.yLabel,zLabel:M.zLabel,text:_,name:h.name,color:g.castHoverOption(T,A,"bgcolor")||h.color,borderColor:g.castHoverOption(T,A,"bordercolor"),fontFamily:g.castHoverOption(T,A,"font.family"),fontSize:g.castHoverOption(T,A,"font.size"),fontColor:g.castHoverOption(T,A,"font.color"),nameLength:g.castHoverOption(T,A,"namelength"),textAlign:g.castHoverOption(T,A,"align"),hovertemplate:p.castOption(T,A,"hovertemplate"),hovertemplateLabels:p.extendFlat({},O,M),eventData:[O]},{container:a,gd:i,inOut_bbox:I}),O.bbox=I[0]}d.distance<5&&(d.buttons||k)?i.emit("plotly_click",P):i.emit("plotly_hover",P),this.oldEventData=P}else g.loneUnhover(a),this.oldEventData&&i.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;n.drawAnnotations(n)},M.recoverContext=function(){var r=this;r.glplot.dispose();var n=function(){r.glplot.gl.isContextLost()?requestAnimationFrame(n):r.initializeGLPlot()?r.plot.apply(r,r.plotArgs):p.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(n)};var E=["xaxis","yaxis","zaxis"];M.plot=function(r,n,i){if(this.plotArgs=[r,n,i],!this.glplot.contextLost){var a,o,s,l,u,c,f,h=n[this.id],d=i[this.id];this.fullLayout=n,this.fullSceneLayout=h,this.axesOptions.merge(n,h),this.spikeOptions.merge(h),this.setViewport(h),this.updateFx(h.dragmode,h.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(y(h.bgcolor)),this.setConvert(c),r?Array.isArray(r)||(r=[r]):r=[];var v=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(l=0;l<r.length;++l)!0===(o=r[l]).visible&&0!==o._length&&function(r,n,i){for(var a=r.fullSceneLayout,o=0;o<3;o++){var s=E[o],l=s.charAt(0),u=a[s],c=n[l],f=n[l+"calendar"],h=n["_"+l+"length"];if(p.isArrayOrTypedArray(c))for(var d,v=0;v<(h||c.length);v++)if(p.isArrayOrTypedArray(c[v]))for(var g=0;g<c[v].length;++g)!isNaN(d=u.d2l(c[v][g],0,f))&&isFinite(d)&&(i[0][o]=Math.min(i[0][o],d),i[1][o]=Math.max(i[1][o],d));else!isNaN(d=u.d2l(c[v],0,f))&&isFinite(d)&&(i[0][o]=Math.min(i[0][o],d),i[1][o]=Math.max(i[1][o],d));else i[0][o]=Math.min(i[0][o],0),i[1][o]=Math.max(i[1][o],h-1)}}(this,o,v);!function(r,n){for(var i=r.fullSceneLayout,a=i.annotations||[],o=0;o<3;o++)for(var s=E[o],l=s.charAt(0),u=i[s],c=0;c<a.length;c++){var f=a[c];if(f.visible){var h=u.r2l(f[l]);!isNaN(h)&&isFinite(h)&&(n[0][o]=Math.min(n[0][o],h),n[1][o]=Math.max(n[1][o],h))}}}(this,v);var g=[1,1,1];for(u=0;u<3;++u)v[1][u]===v[0][u]?g[u]=1:g[u]=1/(v[1][u]-v[0][u]);for(this.dataScale=g,this.convertAnnotations(this),l=0;l<r.length;++l)!0===(o=r[l]).visible&&0!==o._length&&((s=this.traces[o.uid])?s.data.type===o.type?s.update(o):(s.dispose(),s=o._module.plot(this,o),this.traces[o.uid]=s):(s=o._module.plot(this,o),this.traces[o.uid]=s),s.name=o.name);var m=Object.keys(this.traces);t:for(l=0;l<m.length;++l){for(u=0;u<r.length;++u)if(r[u].uid===m[l]&&!0===r[u].visible&&0!==r[u]._length)continue t;(s=this.traces[m[l]]).dispose(),delete this.traces[m[l]]}this.glplot.objects.sort(function(r,n){return r._trace.data.index-n._trace.data.index});var x,b=[[0,0,0],[0,0,0]],_=[],w={};for(l=0;l<3;++l){if((f=(c=h[E[l]]).type)in w?(w[f].acc*=g[l],w[f].count+=1):w[f]={acc:g[l],count:1},c.autorange){b[0][l]=1/0,b[1][l]=-1/0;var k=this.glplot.objects,A=this.fullSceneLayout.annotations||[],M=c._name.charAt(0);for(u=0;u<k.length;u++){var S=k[u],L=S.bounds,C=S._trace.data._pad||0;"ErrorBars"===S.constructor.name&&c._lowerLogErrorBound?b[0][l]=Math.min(b[0][l],c._lowerLogErrorBound):b[0][l]=Math.min(b[0][l],L[0][l]/g[l]-C),b[1][l]=Math.max(b[1][l],L[1][l]/g[l]+C)}for(u=0;u<A.length;u++){var O=A[u];if(O.visible){var P=c.r2l(O[M]);b[0][l]=Math.min(b[0][l],P),b[1][l]=Math.max(b[1][l],P)}}if("rangemode"in c&&"tozero"===c.rangemode&&(b[0][l]=Math.min(b[0][l],0),b[1][l]=Math.max(b[1][l],0)),b[0][l]>b[1][l])b[0][l]=-1,b[1][l]=1;else{var I=b[1][l]-b[0][l];b[0][l]-=I/32,b[1][l]+=I/32}if(a=T(a=[b[0][l],b[1][l]],c),b[0][l]=a[0],b[1][l]=a[1],c.isReversed()){var D=b[0][l];b[0][l]=b[1][l],b[1][l]=D}}else a=c.range,b[0][l]=c.r2l(a[0]),b[1][l]=c.r2l(a[1]);b[0][l]===b[1][l]&&(b[0][l]-=1,b[1][l]+=1),_[l]=b[1][l]-b[0][l],c.range=[b[0][l],b[1][l]],c.limitRange(),this.glplot.setBounds(l,{min:c.range[0]*g[l],max:c.range[1]*g[l]})}var z=h.aspectmode;if("cube"===z)x=[1,1,1];else if("manual"===z){var R=h.aspectratio;x=[R.x,R.y,R.z]}else{if("auto"!==z&&"data"!==z)throw Error("scene.js aspectRatio was not one of the enumerated types");var F=[1,1,1];for(l=0;l<3;++l){var B=w[f=(c=h[E[l]]).type];F[l]=Math.pow(B.acc,1/B.count)/g[l]}x="data"===z||Math.max.apply(null,F)/Math.min.apply(null,F)<=4?F:[1,1,1]}h.aspectratio.x=d.aspectratio.x=x[0],h.aspectratio.y=d.aspectratio.y=x[1],h.aspectratio.z=d.aspectratio.z=x[2],this.glplot.setAspectratio(h.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:h.aspectratio.x,y:h.aspectratio.y,z:h.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=h.aspectmode);var N=h.domain||null,j=n._size||null;if(N&&j){var U=this.container.style;U.position="absolute",U.left=j.l+N.x[0]*j.w+"px",U.top=j.t+(1-N.y[1])*j.h+"px",U.width=j.w*(N.x[1]-N.x[0])+"px",U.height=j.h*(N.y[1]-N.y[0])+"px"}this.glplot.redraw()}},M.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},M.getCamera=function(){var r;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(r=this.camera).up[0],y:r.up[1],z:r.up[2]},center:{x:r.center[0],y:r.center[1],z:r.center[2]},eye:{x:r.eye[0],y:r.eye[1],z:r.eye[2]},projection:{type:!0===r._ortho?"orthographic":"perspective"}}},M.setViewport=function(r){var n=r.camera;this.camera.lookAt.apply(this,[[n.eye.x,n.eye.y,n.eye.z],[n.center.x,n.center.y,n.center.z],[n.up.x,n.up.y,n.up.z]]),this.glplot.setAspectratio(r.aspectratio),"orthographic"===n.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},M.isCameraChanged=function(r){var n=this.getCamera(),i=p.nestedProperty(r,this.id+".camera").get(),a=!1;if(void 0===i)a=!0;else{for(var o=0;o<3;o++)for(var s=0;s<3;s++)if(!function(r,n,i,a){var o=["up","center","eye"],s=["x","y","z"];return n[o[i]]&&r[o[i]][s[a]]===n[o[i]][s[a]]}(n,i,o,s)){a=!0;break}(!i.projection||n.projection&&n.projection.type!==i.projection.type)&&(a=!0)}return a},M.isAspectChanged=function(r){var n=this.glplot.getAspectratio(),i=p.nestedProperty(r,this.id+".aspectratio").get();return void 0===i||i.x!==n.x||i.y!==n.y||i.z!==n.z},M.saveLayout=function(r){var n,i,a,o,s,l,u=this.fullLayout,c=this.isCameraChanged(r),f=this.isAspectChanged(r),d=c||f;if(d){var v={};c&&(n=this.getCamera(),a=(i=p.nestedProperty(r,this.id+".camera")).get(),v[this.id+".camera"]=a),f&&(o=this.glplot.getAspectratio(),l=(s=p.nestedProperty(r,this.id+".aspectratio")).get(),v[this.id+".aspectratio"]=l),h.call("_storeDirectGUIEdit",r,u._preGUI,v),c&&(i.set(n),p.nestedProperty(u,this.id+".camera").set(n)),f&&(s.set(o),p.nestedProperty(u,this.id+".aspectratio").set(o),this.glplot.redraw())}return d},M.updateFx=function(r,n){var i=this.camera;if(i){if("orbit"===r)i.mode="orbit",i.keyBindingMode="rotate";else if("turntable"===r){i.up=[0,0,1],i.mode="turntable",i.keyBindingMode="rotate";var a=this.graphDiv,o=a._fullLayout,s=this.fullSceneLayout.camera,l=s.up.x,u=s.up.y,c=s.up.z;if(c/Math.sqrt(l*l+u*u+c*c)<.999){var f=this.id+".camera.up",d={x:0,y:0,z:1},v={};v[f]=d;var g=a.layout;h.call("_storeDirectGUIEdit",g,o._preGUI,v),s.up=d,p.nestedProperty(g,f).set(d)}}else i.keyBindingMode=r}this.fullSceneLayout.hovermode=n},M.toImage=function(r){r||(r="png"),this.staticMode&&this.container.appendChild(a),this.glplot.redraw();var n=this.glplot.gl,i=n.drawingBufferWidth,o=n.drawingBufferHeight;n.bindFramebuffer(n.FRAMEBUFFER,null);var s=new Uint8Array(i*o*4);n.readPixels(0,0,i,o,n.RGBA,n.UNSIGNED_BYTE,s),function(r,n,i){for(var a=0,o=i-1;a<o;++a,--o)for(var s=0;s<n;++s)for(var l=0;l<4;++l){var u=4*(n*a+s)+l,c=4*(n*o+s)+l,f=r[u];r[u]=r[c],r[c]=f}}(s,i,o),function(r,n,i){for(var a=0;a<i;++a)for(var o=0;o<n;++o){var s=4*(n*a+o),l=r[s+3];if(l>0)for(var u=255/l,c=0;c<3;++c)r[s+c]=Math.min(u*r[s+c],255)}}(s,i,o);var l=document.createElement("canvas");l.width=i,l.height=o;var u,c=l.getContext("2d",{willReadFrequently:!0}),f=c.createImageData(i,o);switch(f.data.set(s),c.putImageData(f,0,0),r){case"jpeg":u=l.toDataURL("image/jpeg");break;case"webp":u=l.toDataURL("image/webp");break;default:u=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(a),u},M.setConvert=function(){for(var r=0;r<3;r++){var n=this.fullSceneLayout[E[r]];v.setConvert(n,this.fullLayout),n.setScale=p.noop}},M.make4thDimension=function(){var r=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},v.setConvert(this._mockAxis,r)},r.exports=A},90060:function(r){"use strict";r.exports=function(r,n,i,a){a=a||r.length;for(var o=Array(a),s=0;s<a;s++)o[s]=[r[s],n[s],i[s]];return o}},10820:function(r,n,i){"use strict";var a=i(41940),o=i(85594),s=i(22399),l=i(29241),u=i(53777),c=i(35025),f=i(1426).extendFlat,h=a({editType:"calc"});h.family.dflt='"Open Sans", verdana, arial, sans-serif',h.size.dflt=12,h.color.dflt=s.defaultLine,r.exports={font:h,title:{text:{valType:"string",editType:"layoutstyle"},font:a({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:f(c({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:s.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:s.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:s.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:l.newshape,activeshape:l.activeshape,newselection:u.newselection,activeselection:u.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:f({},o.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:a({editType:"layoutstyle"})}}},77734:function(r,n,i){"use strict";var a=i(78607),o="1.13.4",s='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',l=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',s].join(" "),u='Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>',c={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:s,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:l,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:u,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:u,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>',tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},f=a(c);r.exports={requiredVersion:o,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:c,styleValuesNonMapbox:f,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+o+"."].join("\n"),noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",f.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){var i=r.split(" "),o=i[0],s=i[1],l=a.isArrayOrTypedArray(n)?a.mean(n):n,u=.5+l/100,c=1.5+l/100,f=["",""],h=[0,0];switch(o){case"top":f[0]="top",h[1]=-c;break;case"bottom":f[0]="bottom",h[1]=c}switch(s){case"left":f[1]="right",h[0]=-u;break;case"right":f[1]="left",h[0]=u}return{anchor:f[0]&&f[1]?f.join("-"):f[0]?f[0]:f[1]?f[1]:"center",offset:h}}},50101:function(r,n,i){"use strict";var a=i(97433),o=i(71828),s=o.strTranslate,l=o.strScale,u=i(27659).AU,c=i(77922),f=i(39898),h=i(91424),p=i(63893),d=i(10481),v="mapbox",g=n.constants=i(77734);function y(r){return"string"==typeof r&&(-1!==g.styleValuesMapbox.indexOf(r)||0===r.indexOf("mapbox://")||0===r.indexOf("stamen"))}n.name=v,n.attr="subplot",n.idRoot=v,n.idRegex=n.attrRegex=o.counterRegex(v),n.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},n.layoutAttributes=i(23585),n.supplyLayoutDefaults=i(77882),n.plot=function(r){var n=r._fullLayout,i=r.calcdata,s=n._subplots[v];if(a.version!==g.requiredVersion)throw Error(g.wrongVersionErrorMsg);var l=function(r,n){var i=r._fullLayout;if(""===r._context.mapboxAccessToken)return"";for(var a=[],s=[],l=!1,u=!1,c=0;c<n.length;c++){var f=i[n[c]],h=f.accesstoken;y(f.style)&&(h?o.pushUnique(a,h):(y(f._input.style)&&(o.error("Uses Mapbox map style, but did not set an access token."),l=!0),u=!0)),h&&o.pushUnique(s,h)}if(u){var p=l?g.noAccessTokenErrorMsg:g.missingStyleErrorMsg;throw o.error(p),Error(p)}return a.length?(a.length>1&&o.warn(g.multipleTokensErrorMsg),a[0]):(s.length&&o.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(r,s);a.accessToken=l;for(var c=0;c<s.length;c++){var f=s[c],h=u(i,v,f),p=n[f],m=p._subplot;m||(m=new d(r,f),n[f]._subplot=m),m.viewInitial||(m.viewInitial={center:o.extendFlat({},p.center),zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),m.plot(h,n,r._promises)}},n.clean=function(r,n,i,a){for(var o=a._subplots[v]||[],s=0;s<o.length;s++){var l=o[s];!n[l]&&a[l]._subplot&&a[l]._subplot.destroy()}},n.toSVG=function(r){for(var n=r._fullLayout,i=n._subplots[v],a=n._size,o=0;o<i.length;o++){var u=n[i[o]],d=u.domain,y=u._subplot.toImage("png");n._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":y,x:a.l+a.w*d.x[0],y:a.t+a.h*(1-d.y[1]),width:a.w*(d.x[1]-d.x[0]),height:a.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});var m=f.select(u._subplot.div);if(null!==m.select(".mapboxgl-ctrl-logo").node().offsetParent){var x=n._glimages.append("g");x.attr("transform",s(a.l+a.w*d.x[0]+10,a.t+a.h*(1-d.y[0])-31)),x.append("path").attr("d",g.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),x.append("path").attr("d",g.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),x.append("path").attr("d",g.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),x.append("polygon").attr("points",g.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var b=m.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),_=n._glimages.append("g"),w=_.append("text");w.text(b).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":b});var T=h.bBox(w.node()),k=a.w*(d.x[1]-d.x[0]);if(T.width>k/2){var A=b.split("|").join("<br>");w.text(A).attr("data-unformatted",A).call(p.convertToTspans,r),T=h.bBox(w.node())}w.attr("transform",s(-3,8-T.height)),_.insert("rect",".static-attribution").attr({x:-T.width-6,y:-T.height-3,width:T.width+6,height:T.height+3,fill:"rgba(255, 255, 255, 0.75)"});var M=1;T.width+6>k&&(M=k/(T.width+6));var S=[a.l+a.w*d.x[1],a.t+a.h*(1-d.y[0])];_.attr("transform",s(S[0],S[1])+l(M))}},n.updateFx=function(r){for(var n=r._fullLayout,i=n._subplots[v],a=0;a<i.length;a++)n[i[a]]._subplot.updateFx(n)}},67911:function(r,n,i){"use strict";var a=i(71828),o=i(63893).sanitizeHTML,s=i(13056),l=i(77734);function u(r,n){this.subplot=r,this.uid=r.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=l.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var c=u.prototype;function f(r){if(!r.visible)return!1;var n=r.source;if(Array.isArray(n)&&n.length>0){for(var i=0;i<n.length;i++)if("string"!=typeof n[i]||0===n[i].length)return!1;return!0}return a.isPlainObject(n)||"string"==typeof n&&n.length>0}function h(r){var n={},i={};switch(r.type){case"circle":a.extendFlat(i,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case"line":a.extendFlat(i,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case"fill":a.extendFlat(i,{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case"symbol":var o=r.symbol,l=s(o.textposition,o.iconsize);a.extendFlat(n,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":o.placement}),a.extendFlat(i,{"icon-color":r.color,"text-color":o.textfont.color,"text-opacity":r.opacity});break;case"raster":a.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":r.opacity})}return{layout:n,paint:i}}c.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r)),this.visible=f(r)},c.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))},c.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type},c.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},c.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},c.updateImage=function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());null!==n&&this.subplot.map.moveLayer(this.idLayer,n)},c.updateSource=function(r){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=r.sourcetype,this.source=r.source,f(r)){var i,a,s,l,u=(a=r.sourcetype,s=r.source,l={type:a},"geojson"===a?i="data":"vector"===a?i="string"==typeof s?"url":"tiles":"raster"===a?(i="tiles",l.tileSize=256):"image"===a&&(i="url",l.coordinates=r.coordinates),l[i]=s,r.sourceattribution&&(l.attribution=o(r.sourceattribution)),l);n.addSource(this.idSource,u)}},c.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var n=this.subplot.getMapLayers(),i=0;i<n.length;i++){var a=n[i].id;if("string"==typeof a&&0===a.indexOf(l.traceLayerPrefix)){r=a;break}}return r},c.updateLayer=function(r){var n=this.subplot,i=h(r),a=this.lookupBelow(),o=this.findFollowingMapboxLayerId(a);this.removeLayer(),f(r)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:i.layout,paint:i.paint},o),this.layerType=r.type,this.below=a},c.updateStyle=function(r){if(f(r)){var n=h(r);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},c.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)},c.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer),r.getSource(this.idSource)&&r.removeSource(this.idSource)},r.exports=function(r,n,i){var a=new u(r,n);return a.update(i),a}},23585:function(r,n,i){"use strict";var a=i(71828),o=i(7901).defaultLine,s=i(27670).Y,l=i(41940),u=i(82196).textposition,c=i(30962).overrideAll,f=i(44467).templatedArray,h=i(77734),p=l({});p.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(r.exports=c({_arrayAttrRegexps:[a.counterRegex("mapbox",".layers",!0)],domain:s({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:h.styleValuesMapbox.concat(h.styleValuesNonMapbox),dflt:h.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:f("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:o},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:o}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:p,textposition:a.extendFlat({},u,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(r,n,i){"use strict";var a=i(71828),o=i(49119),s=i(85501),l=i(23585);function u(r,n,i,a){i("accesstoken",a.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var o=i("bounds.west"),l=i("bounds.east"),u=i("bounds.south"),f=i("bounds.north");void 0!==o&&void 0!==l&&void 0!==u&&void 0!==f||delete n.bounds,s(r,n,{name:"layers",handleItemDefaults:c}),n._input=r}function c(r,n){function i(i,o){return a.coerce(r,n,l.layers,i,o)}if(i("visible")){var o,s=i("sourcetype"),u="raster"===s||"image"===s;i("source"),i("sourceattribution"),"vector"===s&&i("sourcelayer"),"image"===s&&i("coordinates"),u&&(o="raster");var c=i("type",o);u&&"raster"!==c&&(c=n.type="raster",a.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===c&&i("circle.radius"),"line"===c&&(i("line.width"),i("line.dash")),"fill"===c&&i("fill.outlinecolor"),"symbol"===c&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),a.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}r.exports=function(r,n,i){o(r,n,i,{type:"mapbox",attributes:l,handleDefaults:u,partition:"y",accessToken:n._mapboxAccessToken})}},10481:function(r,n,i){"use strict";var a=i(97433),o=i(71828),s=i(41327),l=i(73972),u=i(89298),c=i(28569),f=i(30211),h=i(64505),p=h.drawMode,d=h.selectMode,v=i(47322).prepSelect,g=i(47322).clearOutline,y=i(47322).clearSelectionsCache,m=i(47322).selectOnClick,x=i(77734),b=i(67911);function _(r,n){this.id=n,this.gd=r;var i=r._fullLayout,a=r._context;this.container=i._glcontainer.node(),this.isStatic=a.staticPlot,this.uid=i._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(i),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=_.prototype;w.plot=function(r,n,i){var a,o=this,s=n[o.id];o.map&&s.accesstoken!==o.accessToken&&(o.map.remove(),o.map=null,o.styleObj=null,o.traceHash={},o.layerList=[]),a=new Promise(o.map?function(i,a){o.updateMap(r,n,i,a)}:function(i,a){o.createMap(r,n,i,a)}),i.push(a)},w.createMap=function(r,n,i,o){var l=this,u=n[l.id],c=l.styleObj=k(u.style,n);l.accessToken=u.accesstoken;var f=u.bounds,h=f?[[f.west,f.south],[f.east,f.north]]:null,p=l.map=new a.Map({container:l.div,style:c.style,center:M(u.center),zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,maxBounds:h,interactive:!l.isStatic,preserveDrawingBuffer:l.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new a.AttributionControl({compact:!0}));p._canvas.style.left="0px",p._canvas.style.top="0px",l.rejectOnError(o),l.isStatic||l.initFx(r,n);var d=[];d.push(new Promise(function(r){p.once("load",r)})),Promise.all(d=d.concat(s.fetchTraceGeoData(r))).then(function(){l.fillBelowLookup(r,n),l.updateData(r),l.updateLayout(n),l.resolveOnRender(i)}).catch(o)},w.updateMap=function(r,n,i,a){var o=this,l=o.map,u=n[this.id];o.rejectOnError(a);var c=[],f=k(u.style,n);JSON.stringify(o.styleObj)!==JSON.stringify(f)&&(o.styleObj=f,l.setStyle(f.style),o.traceHash={},c.push(new Promise(function(r){l.once("styledata",r)}))),Promise.all(c=c.concat(s.fetchTraceGeoData(r))).then(function(){o.fillBelowLookup(r,n),o.updateData(r),o.updateLayout(n),o.resolveOnRender(i)}).catch(a)},w.fillBelowLookup=function(r,n){var i,a,o=n[this.id].layers,s=this.belowLookup={},l=!1;for(i=0;i<r.length;i++){var u=r[i][0].trace,c=u._module;"string"==typeof u.below?a=u.below:c.getBelow&&(a=c.getBelow(u,this)),""===a&&(l=!0),s["trace-"+u.uid]=a||""}for(i=0;i<o.length;i++){var f=o[i];a="string"==typeof f.below?f.below:l?"traces":"",s["layout-"+i]=a}var h,p,d={};for(h in s)d[a=s[h]]?d[a].push(h):d[a]=[h];for(a in d){var v=d[a];if(v.length>1)for(i=0;i<v.length;i++)0===(h=v[i]).indexOf("trace-")?(p=h.split("trace-")[1],this.traceHash[p]&&(this.traceHash[p].below=null)):0===h.indexOf("layout-")&&(p=h.split("layout-")[1],this.layerList[p]&&(this.layerList[p].below=null))}};var T={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function k(r,n){var i={};if(o.isPlainObject(r))i.id=r.id,i.style=r;else if("string"==typeof r){if(i.id=r,-1!==x.styleValuesMapbox.indexOf(r))i.style=A(r);else if(x.stylesNonMapbox[r]){i.style=x.stylesNonMapbox[r];var a=i.style.sources["plotly-"+r],s=a?a.tiles:void 0;s&&s[0]&&"?api_key="===s[0].slice(-9)&&(s[0]+=n._mapboxAccessToken)}else i.style=r}else i.id=x.styleValueDflt,i.style=A(x.styleValueDflt);return i.transition={duration:0,delay:0},i}function A(r){return x.styleUrlPrefix+r+"-"+x.styleUrlSuffix}function M(r){return[r.lon,r.lat]}w.updateData=function(r){var n,i,a,o,s=this.traceHash,l=r.slice().sort(function(r,n){return T[r[0].trace.type]-T[n[0].trace.type]});for(a=0;a<l.length;a++){var u=l[a],c=!1;(n=s[(i=u[0].trace).uid])&&(n.type===i.type?(n.update(u),c=!0):n.dispose()),!c&&i._module&&(s[i.uid]=i._module.plot(this,u))}var f=Object.keys(s);t:for(a=0;a<f.length;a++){var h=f[a];for(o=0;o<r.length;o++)if(h===(i=r[o][0].trace).uid)continue t;(n=s[h]).dispose(),delete s[h]}},w.updateLayout=function(r){var n=this.map,i=r[this.id];this.dragging||this.wheeling||(n.setCenter(M(i.center)),n.setZoom(i.zoom),n.setBearing(i.bearing),n.setPitch(i.pitch)),this.updateLayers(r),this.updateFramework(r),this.updateFx(r),this.map.resize(),this.gd._context._scrollZoom.mapbox?n.scrollZoom.enable():n.scrollZoom.disable()},w.resolveOnRender=function(r){var n=this.map;n.on("render",function i(){n.loaded()&&(n.off("render",i),setTimeout(r,10))})},w.rejectOnError=function(r){var n=this.map;function i(){r(Error(x.mapOnErrorMsg))}n.once("error",i),n.once("style.error",i),n.once("source.error",i),n.once("tile.error",i),n.once("layer.error",i)},w.createFramework=function(r){var n=this,i=n.div=document.createElement("div");i.id=n.uid,i.style.position="absolute",n.container.appendChild(i),n.xaxis={_id:"x",c2p:function(r){return n.project(r).x}},n.yaxis={_id:"y",c2p:function(r){return n.project(r).y}},n.updateFramework(r),n.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(n.mockAxis,r)},w.initFx=function(r,n){var i=this,a=i.gd,o=i.map;function s(){f.loneUnhover(n._hoverlayer)}function u(){var r=i.getView();a.emit("plotly_relayouting",i.getViewEditsWithDerived(r))}o.on("moveend",function(r){if(i.map){var n=a._fullLayout;if(r.originalEvent||i.wheeling){var o=n[i.id];l.call("_storeDirectGUIEdit",a.layout,n._preGUI,i.getViewEdits(o));var s=i.getView();o._input.center=o.center=s.center,o._input.zoom=o.zoom=s.zoom,o._input.bearing=o.bearing=s.bearing,o._input.pitch=o.pitch=s.pitch,a.emit("plotly_relayout",i.getViewEditsWithDerived(s))}r.originalEvent&&"mouseup"===r.originalEvent.type?i.dragging=!1:i.wheeling&&(i.wheeling=!1),n._rehover&&n._rehover()}}),o.on("wheel",function(){i.wheeling=!0}),o.on("mousemove",function(r){var n=i.div.getBoundingClientRect(),s=[r.originalEvent.offsetX,r.originalEvent.offsetY];r.target.getBoundingClientRect=function(){return n},i.xaxis.p2c=function(){return o.unproject(s).lng},i.yaxis.p2c=function(){return o.unproject(s).lat},a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===i.id&&a._fullLayout[i.id]&&f.hover(a,r,i.id)},f.hover(a,r,i.id),a._fullLayout._hoversubplot=i.id}),o.on("dragstart",function(){i.dragging=!0,s()}),o.on("zoomstart",s),o.on("mouseout",function(){a._fullLayout._hoversubplot=null}),o.on("drag",u),o.on("zoom",u),o.on("dblclick",function(){var r=a._fullLayout[i.id];l.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,i.getViewEdits(r));var n=i.viewInitial;o.setCenter(M(n.center)),o.setZoom(n.zoom),o.setBearing(n.bearing),o.setPitch(n.pitch);var s=i.getView();r._input.center=r.center=s.center,r._input.zoom=r.zoom=s.zoom,r._input.bearing=r.bearing=s.bearing,r._input.pitch=r.pitch=s.pitch,a.emit("plotly_doubleclick",null),a.emit("plotly_relayout",i.getViewEditsWithDerived(s))}),i.clearOutline=function(){y(i.dragOptions),g(i.dragOptions.gd)},i.onClickInPanFn=function(r){return function(n){var o=a._fullLayout.clickmode;o.indexOf("select")>-1&&m(n.originalEvent,a,[i.xaxis],[i.yaxis],i.id,r),o.indexOf("event")>-1&&f.click(a,n.originalEvent)}}},w.updateFx=function(r){var n=this,i=n.map,a=n.gd;if(!n.isStatic){var s,l=r.dragmode;s=function(r,i){i.isRect?(r.range={})[n.id]=[f([i.xmin,i.ymin]),f([i.xmax,i.ymax])]:(r.lassoPoints={})[n.id]=i.map(f)};var u=n.dragOptions;n.dragOptions=o.extendDeep(u||{},{dragmode:r.dragmode,element:n.div,gd:a,plotinfo:{id:n.id,domain:r[n.id].domain,xaxis:n.xaxis,yaxis:n.yaxis,fillRangeItems:s},xaxes:[n.xaxis],yaxes:[n.yaxis],subplot:n.id}),i.off("click",n.onClickInPanHandler),d(l)||p(l)?(i.dragPan.disable(),i.on("zoomstart",n.clearOutline),n.dragOptions.prepFn=function(r,i,a){v(r,i,a,n.dragOptions,l)},c.init(n.dragOptions)):(i.dragPan.enable(),i.off("zoomstart",n.clearOutline),n.div.onmousedown=null,n.div.ontouchstart=null,n.div.removeEventListener("touchstart",n.div._ontouchstart),n.onClickInPanHandler=n.onClickInPanFn(n.dragOptions),i.on("click",n.onClickInPanHandler))}function f(r){var i=n.map.unproject(r);return[i.lng,i.lat]}},w.updateFramework=function(r){var n=r[this.id].domain,i=r._size,a=this.div.style;a.width=i.w*(n.x[1]-n.x[0])+"px",a.height=i.h*(n.y[1]-n.y[0])+"px",a.left=i.l+n.x[0]*i.w+"px",a.top=i.t+(1-n.y[1])*i.h+"px",this.xaxis._offset=i.l+n.x[0]*i.w,this.xaxis._length=i.w*(n.x[1]-n.x[0]),this.yaxis._offset=i.t+(1-n.y[1])*i.h,this.yaxis._length=i.h*(n.y[1]-n.y[0])},w.updateLayers=function(r){var n,i=r[this.id].layers,a=this.layerList;if(i.length!==a.length){for(n=0;n<a.length;n++)a[n].dispose();for(a=this.layerList=[],n=0;n<i.length;n++)a.push(b(this,n,i[n]))}else for(n=0;n<i.length;n++)a[n].update(i[n])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(r,n,i){for(var a in i)this.map[n](r,a,i[a])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(r,n){var i=this.map;if("string"==typeof n){if(""===n)return void i.addLayer(r,n);for(var a=this.getMapLayers(),s=0;s<a.length;s++)if(n===a[s].id)return void i.addLayer(r,n);o.warn(["Trying to add layer with *below* value",n,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}i.addLayer(r)},w.project=function(r){return this.map.project(new a.LngLat(r[0],r[1]))},w.getView=function(){var r=this.map,n=r.getCenter(),i={lon:n.lng,lat:n.lat},a=r.getCanvas(),o=parseInt(a.style.width),s=parseInt(a.style.height);return{center:i,zoom:r.getZoom(),bearing:r.getBearing(),pitch:r.getPitch(),_derived:{coordinates:[r.unproject([0,0]).toArray(),r.unproject([o,0]).toArray(),r.unproject([o,s]).toArray(),r.unproject([0,s]).toArray()]}}},w.getViewEdits=function(r){for(var n=this.id,i=["center","zoom","bearing","pitch"],a={},o=0;o<i.length;o++){var s=i[o];a[n+"."+s]=r[s]}return a},w.getViewEditsWithDerived=function(r){var n=this.id,i=this.getViewEdits(r);return i[n+"._derived"]=r._derived,i},r.exports=_},35025:function(r){"use strict";r.exports=function(r){var n=r.editType;return{t:{valType:"number",dflt:0,editType:n},r:{valType:"number",dflt:0,editType:n},b:{valType:"number",dflt:0,editType:n},l:{valType:"number",dflt:0,editType:n},editType:n}}},74875:function(r,n,i){"use strict";var a=i(39898),o=i(84096).Dq,s=i(60721).FF,l=i(92770),u=i(11631),c=i(73972),f=i(86281),h=i(44467),p=i(71828),d=i(7901),v=i(50606).BADNUM,g=i(41675),y=i(51873).clearOutline,m=i(21479),x=i(85594),b=i(31391),_=i(27659).a0,w=p.relinkPrivateKeys,T=p._,k=r.exports={};p.extendFlat(k,c),k.attributes=i(9012),k.attributes.type.values=k.allTypes,k.fontAttrs=i(41940),k.layoutAttributes=i(10820),k.fontWeight="normal";var A=k.transformsRegistry,M=i(31137);k.executeAPICommand=M.executeAPICommand,k.computeAPICommandBindings=M.computeAPICommandBindings,k.manageCommandObserver=M.manageCommandObserver,k.hasSimpleAPICommandBindings=M.hasSimpleAPICommandBindings,k.redrawText=function(r){return r=p.getGraphDiv(r),new Promise(function(n){setTimeout(function(){r._fullLayout&&(c.getComponentMethod("annotations","draw")(r),c.getComponentMethod("legend","draw")(r),c.getComponentMethod("colorbar","draw")(r),n(k.previousPromises(r)))},300)})},k.resize=function(r){r=p.getGraphDiv(r);var n,i=new Promise(function(i,a){r&&!p.isHidden(r)||a(Error("Resize must be passed a displayed plot div element.")),r._redrawTimer&&clearTimeout(r._redrawTimer),r._resolveResize&&(n=r._resolveResize),r._resolveResize=i,r._redrawTimer=setTimeout(function(){if(!r.layout||r.layout.width&&r.layout.height||p.isHidden(r))i(r);else{delete r.layout.width,delete r.layout.height;var n=r.changed;r.autoplay=!0,c.call("relayout",r,{autosize:!0}).then(function(){r.changed=n,r._resolveResize===i&&(delete r._resolveResize,i(r))})}},100)});return n&&n(i),i},k.previousPromises=function(r){if((r._promises||[]).length)return Promise.all(r._promises).then(function(){r._promises=[]})},k.addLinks=function(r){if(r._context.showLink||r._context.showSources){var n=r._fullLayout,i=p.ensureSingle(n._paper,"text","js-plot-link-container",function(r){r.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:d.defaultLine,"pointer-events":"all"}).each(function(){var r=a.select(this);r.append("tspan").classed("js-link-to-tool",!0),r.append("tspan").classed("js-link-spacer",!0),r.append("tspan").classed("js-sourcelinks",!0)})}),o=i.node(),s={y:n._paper.attr("height")-9};document.body.contains(o)&&o.getComputedTextLength()>=n.width-20?(s["text-anchor"]="start",s.x=5):(s["text-anchor"]="end",s.x=n._paper.attr("width")-7),i.attr(s);var l=i.select(".js-link-to-tool"),u=i.select(".js-link-spacer"),c=i.select(".js-sourcelinks");r._context.showSources&&r._context.showSources(r),r._context.showLink&&function(r,n){n.text("");var i=n.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(r._context.linkText+" "+String.fromCharCode(187));if(r._context.sendData)i.on("click",function(){k.sendDataToCloud(r)});else{var a=window.location.pathname.split("/"),o=window.location.search;i.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+a[2].split(".")[0]+"/"+a[1]+o})}}(r,l),u.text(l.text()&&c.text()?" - ":"")}},k.sendDataToCloud=function(r){var n=(window.PLOTLYENV||{}).BASE_URL||r._context.plotlyServerURL;if(n){r.emit("plotly_beforeexport");var i=a.select(r).append("div").attr("id","hiddenform").style("display","none"),o=i.append("form").attr({action:n+"/external",method:"post",target:"_blank"});return o.append("input").attr({type:"text",name:"data"}).node().value=k.graphJson(r,!1,"keepdata"),o.node().submit(),i.remove(),r.emit("plotly_afterexport"),!1}};var S=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],E=["year","month","dayMonth","dayMonthYear"];function L(r,n){var i=r._context.locale;i||(i="en-US");var a=!1,o={};function s(r){for(var i=!0,s=0;s<n.length;s++){var l=n[s];o[l]||(r[l]?o[l]=r[l]:i=!1)}i&&(a=!0)}for(var l=0;l<2;l++){for(var u=r._context.locales,f=0;f<2;f++){var h=(u[i]||{}).format;if(h&&(s(h),a))break;u=c.localeRegistry}var p=i.split("-")[0];if(a||p===i)break;i=p}return a||s(c.localeRegistry.en.format),o}function C(r){var n=r.transforms;if(Array.isArray(n)&&n.length)for(var i=0;i<n.length;i++){var a=n[i],o=a._module||A[a.type];if(o&&o.makesData)return!0}return!1}function O(r){return"string"==typeof r&&"px"===r.substr(r.length-2)&&parseFloat(r)}function P(r){var n=r.margin;if(!r._size){var i=r._size={l:Math.round(n.l),r:Math.round(n.r),t:Math.round(n.t),b:Math.round(n.b),p:Math.round(n.pad)};i.w=Math.round(r.width)-i.l-i.r,i.h=Math.round(r.height)-i.t-i.b}r._pushmargin||(r._pushmargin={}),r._pushmarginIds||(r._pushmarginIds={}),r._reservedMargin||(r._reservedMargin={})}k.supplyDefaults=function(r,n){var i=n&&n.skipUpdateCalc,a=r._fullLayout||{};if(a._skipDefaults)delete a._skipDefaults;else{var l,u=r._fullLayout={},f=r.layout||{},h=r._fullData||[],d=r._fullData=[],v=r.data||[],g=r.calcdata||[],m=r._context||{};r._transitionData||k.createTransitionData(r),u._dfltTitle={plot:T(r,"Click to enter Plot title"),x:T(r,"Click to enter X axis title"),y:T(r,"Click to enter Y axis title"),colorbar:T(r,"Click to enter Colorscale title"),annotation:T(r,"new text")},u._traceWord=T(r,"trace");var x=L(r,S);if(u._mapboxAccessToken=m.mapboxAccessToken,a._initialAutoSizeIsDone){var b=a.width,_=a.height;k.supplyLayoutGlobalDefaults(f,u,x),f.width||(u.width=b),f.height||(u.height=_),k.sanitizeMargins(u)}else{k.supplyLayoutGlobalDefaults(f,u,x);var A=!f.width||!f.height,M=u.autosize,C=m.autosizable;A&&(M||C)?k.plotAutoSize(r,f,u):A&&k.sanitizeMargins(u),!M&&A&&(f.width=u.width,f.height=u.height)}u._d3locale=(G=u.separators,x.decimal=G.charAt(0),x.thousands=G.charAt(1),{numberFormat:function(r){try{r=s(x).format(p.adjustFormat(r))}catch(n){return p.warnBadFormat(r),p.noFormat}return r},timeFormat:o(x).utcFormat}),u._extraFormat=L(r,E),u._initialAutoSizeIsDone=!0,u._dataLength=v.length,u._modules=[],u._visibleModules=[],u._basePlotModules=[];var O=u._subplots=function(){var r,n,i=c.collectableSubplotTypes,a={};if(!i){i=[];var o=c.subplotsRegistry;for(var s in o){var l=o[s].attr;if(l&&(i.push(s),Array.isArray(l)))for(n=0;n<l.length;n++)p.pushUnique(i,l[n])}}for(r=0;r<i.length;r++)a[i[r]]=[];return a}(),I=u._splomAxes={x:{},y:{}},D=u._splomSubplots={};u._splomGridDflt={},u._scatterStackOpts={},u._firstScatter={},u._alignmentOpts={},u._colorAxes={},u._requestRangeslider={},u._traceUids=function(r,n){var i,a,o=n.length,s=[];for(i=0;i<r.length;i++){var l=r[i]._fullInput;l!==a&&s.push(l),a=l}var u=s.length,c=Array(o),f={};function h(r,n){if(r&&"string"==typeof r&&!f[r])return c[n]=r,f[r]=1,!0}for(i=0;i<o;i++){var d,v=n[i].uid;"number"==typeof v&&(v=String(v)),h(v,i)||i<u&&h(s[i].uid,i)||(d=p.randstr(f),c[i]=d,f[d]=1)}return c}(h,v),u._globalTransforms=(r._context||{}).globalTransforms,k.supplyDataDefaults(v,d,f,u);var z=Object.keys(I.x),R=Object.keys(I.y);if(z.length>1&&R.length>1){for(c.getComponentMethod("grid","sizeDefaults")(f,u),l=0;l<z.length;l++)p.pushUnique(O.xaxis,z[l]);for(l=0;l<R.length;l++)p.pushUnique(O.yaxis,R[l]);for(var F in D)p.pushUnique(O.cartesian,F)}if(u._has=k._hasPlotType.bind(u),h.length===d.length)for(l=0;l<d.length;l++)w(d[l],h[l]);k.supplyLayoutModuleDefaults(f,u,d,r._transitionData);var B=u._visibleModules,N=[];for(l=0;l<B.length;l++){var j=B[l].crossTraceDefaults;j&&p.pushUnique(N,j)}for(l=0;l<N.length;l++)N[l](d,u);u._hasOnlyLargeSploms=1===u._basePlotModules.length&&"splom"===u._basePlotModules[0].name&&z.length>15&&R.length>15&&0===u.shapes.length&&0===u.images.length,k.linkSubplots(d,u,h,a),k.cleanPlot(d,u,h,a);var U=!(!a._has||!a._has("gl2d")),V=!(!u._has||!u._has("gl2d")),H=!(!a._has||!a._has("cartesian"))||U,q=!(!u._has||!u._has("cartesian"))||V;H&&!q?a._bgLayer.remove():q&&!H&&(u._shouldCreateBgLayer=!0),a._zoomlayer&&!r._dragging&&y({_fullLayout:a}),function(r,n){var i,a=[];n.meta&&(i=n._meta={meta:n.meta,layout:{meta:n.meta}});for(var o=0;o<r.length;o++){var s=r[o];s.meta?a[s.index]=s._meta={meta:s.meta}:n.meta&&(s._meta={meta:n.meta}),n.meta&&(s._meta.layout={meta:n.meta})}a.length&&(i||(i=n._meta={}),i.data=a)}(d,u),w(u,a),c.getComponentMethod("colorscale","crossTraceDefaults")(d,u),u._preGUI||(u._preGUI={}),u._tracePreGUI||(u._tracePreGUI={});var G,Z,Y=u._tracePreGUI,W={};for(Z in Y)W[Z]="old";for(l=0;l<d.length;l++)W[Z=d[l]._fullInput.uid]||(Y[Z]={}),W[Z]="new";for(Z in W)"old"===W[Z]&&delete Y[Z];P(u),c.getComponentMethod("rangeslider","makeData")(u),i||g.length!==d.length||k.supplyDefaultsUpdateCalc(g,d)}},k.supplyDefaultsUpdateCalc=function(r,n){for(var i=0;i<n.length;i++){var a=n[i],o=(r[i]||[])[0];if(o&&o.trace){var s=o.trace;if(s._hasCalcTransform){var l,u,c,f=s._arrayAttrs;for(l=0;l<f.length;l++)u=f[l],c=p.nestedProperty(s,u).get().slice(),p.nestedProperty(a,u).set(c)}o.trace=a}}},k.createTransitionData=function(r){r._transitionData||(r._transitionData={}),r._transitionData._frames||(r._transitionData._frames=[]),r._transitionData._frameHash||(r._transitionData._frameHash={}),r._transitionData._counter||(r._transitionData._counter=0),r._transitionData._interruptCallbacks||(r._transitionData._interruptCallbacks=[])},k._hasPlotType=function(r){var n,i=this._basePlotModules||[];for(n=0;n<i.length;n++)if(i[n].name===r)return!0;var a=this._modules||[];for(n=0;n<a.length;n++){var o=a[n].name;if(o===r)return!0;var s=c.modules[o];if(s&&s.categories[r])return!0}return!1},k.cleanPlot=function(r,n,i,a){var o,s,l=a._basePlotModules||[];for(o=0;o<l.length;o++){var u=l[o];u.clean&&u.clean(r,n,i,a)}var c=a._has&&a._has("gl"),f=n._has&&n._has("gl");c&&!f&&void 0!==a._glcontainer&&(a._glcontainer.selectAll(".gl-canvas").remove(),a._glcontainer.selectAll(".no-webgl").remove(),a._glcanvas=null);var h=!!a._infolayer;t:for(o=0;o<i.length;o++){var p=i[o].uid;for(s=0;s<r.length;s++)if(p===r[s].uid)continue t;h&&a._infolayer.select(".cb"+p).remove()}},k.linkSubplots=function(r,n,i,a){var o,s,l=a._plots||{},u=n._plots={},f=n._subplots,h={_fullData:r,_fullLayout:n},d=f.cartesian.concat(f.gl2d||[]);for(o=0;o<d.length;o++){var v,y=d[o],m=l[y],x=g.getFromId(h,y,"x"),b=g.getFromId(h,y,"y");for(m?v=u[y]=m:(v=u[y]={}).id=y,x._counterAxes.push(b._id),b._counterAxes.push(x._id),x._subplotsWith.push(y),b._subplotsWith.push(y),v.xaxis=x,v.yaxis=b,v._hasClipOnAxisFalse=!1,s=0;s<r.length;s++){var _=r[s];if(_.xaxis===v.xaxis._id&&_.yaxis===v.yaxis._id&&!1===_.cliponaxis){v._hasClipOnAxisFalse=!0;break}}}var w,T=g.list(h,null,!0);for(o=0;o<T.length;o++){var k=null;(w=T[o]).overlaying&&(k=g.getFromId(h,w.overlaying))&&k.overlaying&&(w.overlaying=!1,k=null),w._mainAxis=k||w,k&&(w.domain=k.domain.slice()),w._anchorAxis="free"===w.anchor?null:g.getFromId(h,w.anchor)}for(o=0;o<T.length;o++)if((w=T[o])._counterAxes.sort(g.idSort),w._subplotsWith.sort(p.subplotSort),w._mainSubplot=function(r,n){var i={_fullLayout:n},a="x"===r._id.charAt(0),o=r._mainAxis._anchorAxis,s="",l="",u="";if(o&&(u=o._mainAxis._id,s=a?r._id+u:u+r._id),!s||!n._plots[s]){s="";for(var c=r._counterAxes,f=0;f<c.length;f++){var h=c[f],p=a?r._id+h:h+r._id;l||(l=p);var d=g.getFromId(i,h);if(u&&d.overlaying===u){s=p;break}}}return s||l}(w,n),w._counterAxes.length&&(w.spikemode&&-1!==w.spikemode.indexOf("across")||w.automargin&&w.mirror&&"free"!==w.anchor||c.getComponentMethod("rangeslider","isVisible")(w))){var A=1,M=0;for(s=0;s<w._counterAxes.length;s++){var S=g.getFromId(h,w._counterAxes[s]);A=Math.min(A,S.domain[0]),M=Math.max(M,S.domain[1])}A<M&&(w._counterDomainMin=A,w._counterDomainMax=M)}},k.clearExpandedTraceDefaultColors=function(r){var n,i,a;for(i=[],(n=r._module._colorAttrs)||(r._module._colorAttrs=n=[],f.crawl(r._module.attributes,function(r,a,o,s){i[s]=a,i.length=s+1,"color"===r.valType&&void 0===r.dflt&&n.push(i.join("."))})),a=0;a<n.length;a++)p.nestedProperty(r,"_input."+n[a]).get()||p.nestedProperty(r,n[a]).set(null)},k.supplyDataDefaults=function(r,n,i,a){var o,s,l,u=a._modules,f=a._visibleModules,d=a._basePlotModules,v=0,g=0;function y(r){n.push(r);var i=r._module;i&&(p.pushUnique(u,i),!0===r.visible&&p.pushUnique(f,i),p.pushUnique(d,r._module.basePlotModule),v++,!1!==r._input.visible&&g++)}a._transformModules=[];var m={},x=[],b=(i.template||{}).data||{},_=h.traceTemplater(b);for(o=0;o<r.length;o++){if(l=r[o],(s=_.newTrace(l)).uid=a._traceUids[o],k.supplyTraceDefaults(l,s,g,a,o),s.index=o,s._input=l,s._expandedIndex=v,s.transforms&&s.transforms.length)for(var T=!1!==l.visible&&!1===s.visible,M=function(r,n,i,a){for(var o=r.transforms,s=[r],l=0;l<o.length;l++){var u=o[l],c=A[u.type];c&&c.transform&&(s=c.transform(s,{transform:u,fullTrace:r,fullData:n,layout:i,fullLayout:a,transformIndex:l}))}return s}(s,n,i,a),S=0;S<M.length;S++){var E=M[S],L={_template:s._template,type:s.type,uid:s.uid+S};T&&!1===E.visible&&delete E.visible,k.supplyTraceDefaults(E,L,v,a,o),w(L,E),L.index=o,L._input=l,L._fullInput=s,L._expandedIndex=v,L._expandedInput=E,y(L)}else s._fullInput=s,s._expandedInput=s,y(s);c.traceIs(s,"carpetAxis")&&(m[s.carpet]=s),c.traceIs(s,"carpetDependent")&&x.push(o)}for(o=0;o<x.length;o++)if((s=n[x[o]]).visible){var C=m[s.carpet];s._carpet=C,C&&C.visible?(s.xaxis=C.xaxis,s.yaxis=C.yaxis):s.visible=!1}},k.supplyAnimationDefaults=function(r){r=r||{};var n,i={};function a(n,a){return p.coerce(r||{},i,x,n,a)}if(a("mode"),a("direction"),a("fromcurrent"),Array.isArray(r.frame))for(i.frame=[],n=0;n<r.frame.length;n++)i.frame[n]=k.supplyAnimationFrameDefaults(r.frame[n]||{});else i.frame=k.supplyAnimationFrameDefaults(r.frame||{});if(Array.isArray(r.transition))for(i.transition=[],n=0;n<r.transition.length;n++)i.transition[n]=k.supplyAnimationTransitionDefaults(r.transition[n]||{});else i.transition=k.supplyAnimationTransitionDefaults(r.transition||{});return i},k.supplyAnimationFrameDefaults=function(r){var n={};function i(i,a){return p.coerce(r||{},n,x.frame,i,a)}return i("duration"),i("redraw"),n},k.supplyAnimationTransitionDefaults=function(r){var n={};function i(i,a){return p.coerce(r||{},n,x.transition,i,a)}return i("duration"),i("easing"),n},k.supplyFrameDefaults=function(r){var n={};function i(i,a){return p.coerce(r,n,b,i,a)}return i("group"),i("name"),i("traces"),i("baseframe"),i("data"),i("layout"),n},k.supplyTraceDefaults=function(r,n,i,a,o){var s,l=a.colorway||d.defaults,u=l[i%l.length];function f(i,a){return p.coerce(r,n,k.attributes,i,a)}var h=f("visible");f("type"),f("name",a._traceWord+" "+o),f("uirevision",a.uirevision);var v=k.getModule(n);if(n._module=v,v){var g=v.basePlotModule,y=g.attr,m=g.attributes;if(y&&m){var x=a._subplots,b="";if(h||"gl2d"!==g.name){if(Array.isArray(y))for(s=0;s<y.length;s++){var _=y[s],w=p.coerce(r,n,m,_);x[_]&&p.pushUnique(x[_],w),b+=w}else b=p.coerce(r,n,m,y);x[g.name]&&p.pushUnique(x[g.name],b)}}}if(h){if(f("customdata"),f("ids"),f("meta"),c.traceIs(n,"showLegend")?(p.coerce(r,n,v.attributes.showlegend?v.attributes:k.attributes,"showlegend"),f("legend"),f("legendwidth"),f("legendgroup"),f("legendgrouptitle.text"),f("legendrank"),n._dfltShowLegend=!0):n._dfltShowLegend=!1,v&&v.supplyDefaults(r,n,u,a),c.traceIs(n,"noOpacity")||f("opacity"),c.traceIs(n,"notLegendIsolatable")&&(n.visible=!!n.visible),c.traceIs(n,"noHover")||(n.hovertemplate||p.coerceHoverinfo(r,n,a),"parcats"!==n.type&&c.getComponentMethod("fx","supplyDefaults")(r,n,u,a)),v&&v.selectPoints){var T=f("selectedpoints");p.isTypedArray(T)&&(n.selectedpoints=Array.from(T))}k.supplyTransformDefaults(r,n,a)}return n},k.hasMakesDataTransform=C,k.supplyTransformDefaults=function(r,n,i){if(n._length||C(r)){var a=i._globalTransforms||[],o=i._transformModules||[];if(Array.isArray(r.transforms)||0!==a.length)for(var s=r.transforms||[],l=a.concat(s),u=n.transforms=[],c=0;c<l.length;c++){var f,h=l[c],d=h.type,v=A[d],g=!(h._module&&h._module===v),y=v&&"function"==typeof v.transform;v||p.warn("Unrecognized transform type "+d+"."),v&&v.supplyDefaults&&(g||y)?((f=v.supplyDefaults(h,n,i,r)).type=d,f._module=v,p.pushUnique(o,v)):f=p.extendFlat({},h),u.push(f)}}},k.supplyLayoutGlobalDefaults=function(r,n,i){function a(i,a){return p.coerce(r,n,k.layoutAttributes,i,a)}var o=r.template;p.isPlainObject(o)&&(n.template=o,n._template=o.layout,n._dataTemplate=o.data),a("autotypenumbers");var s=p.coerceFont(a,"font"),l=s.size;p.coerceFont(a,"title.font",p.extendFlat({},s,{size:Math.round(1.4*l)})),a("title.text",n._dfltTitle.plot),a("title.xref");var u=a("title.yref");a("title.pad.t"),a("title.pad.r"),a("title.pad.b"),a("title.pad.l");var f=a("title.automargin");a("title.x"),a("title.xanchor"),a("title.y"),a("title.yanchor"),f&&("paper"===u&&(0!==n.title.y&&(n.title.y=1),"auto"===n.title.yanchor&&(n.title.yanchor=0===n.title.y?"top":"bottom")),"container"===u&&("auto"===n.title.y&&(n.title.y=1),"auto"===n.title.yanchor&&(n.title.yanchor=n.title.y<.5?"bottom":"top"))),a("uniformtext.mode")&&a("uniformtext.minsize"),a("autosize",!(r.width&&r.height)),a("width"),a("height"),a("minreducedwidth"),a("minreducedheight"),a("margin.l"),a("margin.r"),a("margin.t"),a("margin.b"),a("margin.pad"),a("margin.autoexpand"),r.width&&r.height&&k.sanitizeMargins(n),c.getComponentMethod("grid","sizeDefaults")(r,n),a("paper_bgcolor"),a("separators",i.decimal+i.thousands),a("hidesources"),a("colorway"),a("datarevision");var h=a("uirevision");a("editrevision",h),a("selectionrevision",h),c.getComponentMethod("modebar","supplyLayoutDefaults")(r,n),c.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(r,n,a),c.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(r,n,a),a("meta"),p.isPlainObject(r.transition)&&(a("transition.duration"),a("transition.easing"),a("transition.ordering")),c.getComponentMethod("calendars","handleDefaults")(r,n,"calendar"),c.getComponentMethod("fx","supplyLayoutGlobalDefaults")(r,n,a),p.coerce(r,n,m,"scattermode")},k.plotAutoSize=function(r,n,i){var a,o,s=r._context||{},u=s.frameMargins,c=p.isPlotDiv(r);if(c&&r.emit("plotly_autosize"),s.fillFrame)a=window.innerWidth,o=window.innerHeight,document.body.style.overflow="hidden";else{var f=c?window.getComputedStyle(r):{};if(a=O(f.width)||O(f.maxWidth)||i.width,o=O(f.height)||O(f.maxHeight)||i.height,l(u)&&u>0){var h=1-2*u;a=Math.round(h*a),o=Math.round(h*o)}}var d=k.layoutAttributes.width.min,v=k.layoutAttributes.height.min;a<d&&(a=d),o<v&&(o=v);var g=!n.width&&Math.abs(i.width-a)>1,y=!n.height&&Math.abs(i.height-o)>1;(y||g)&&(g&&(i.width=a),y&&(i.height=o)),r._initialAutoSize||(r._initialAutoSize={width:a,height:o}),k.sanitizeMargins(i)},k.supplyLayoutModuleDefaults=function(r,n,i,a){var o,s,l,u=c.componentsRegistry,f=n._basePlotModules,h=c.subplotsRegistry.cartesian;for(o in u)(l=u[o]).includeBasePlot&&l.includeBasePlot(r,n);for(var d in f.length||f.push(h),n._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")(r,n),h.finalizeSubplots(r,n)),n._subplots)n._subplots[d].sort(p.subplotSort);for(s=0;s<f.length;s++)(l=f[s]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i);var v=n._modules;for(s=0;s<v.length;s++)(l=v[s]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i);var g=n._transformModules;for(s=0;s<g.length;s++)(l=g[s]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i,a);for(o in u)(l=u[o]).supplyLayoutDefaults&&l.supplyLayoutDefaults(r,n,i)},k.purge=function(r){var n=r._fullLayout||{};void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcontainer.remove(),n._glcanvas=null),n._modeBar&&n._modeBar.destroy(),r._transitionData&&(r._transitionData._interruptCallbacks&&(r._transitionData._interruptCallbacks.length=0),r._transitionData._animationRaf&&window.cancelAnimationFrame(r._transitionData._animationRaf)),p.clearThrottle(),p.clearResponsive(r),delete r.data,delete r.layout,delete r._fullData,delete r._fullLayout,delete r.calcdata,delete r.empty,delete r.fid,delete r.undoqueue,delete r.undonum,delete r.autoplay,delete r.changed,delete r._promises,delete r._redrawTimer,delete r._hmlumcount,delete r._hmpixcount,delete r._transitionData,delete r._transitioning,delete r._initialAutoSize,delete r._transitioningWithDuration,delete r._dragging,delete r._dragged,delete r._dragdata,delete r._hoverdata,delete r._snapshotInProgress,delete r._editing,delete r._mouseDownTime,delete r._legendMouseDownTime,r.removeAllListeners&&r.removeAllListeners()},k.style=function(r){var n,i=r._fullLayout._visibleModules,a=[];for(n=0;n<i.length;n++){var o=i[n];o.style&&p.pushUnique(a,o.style)}for(n=0;n<a.length;n++)a[n](r)},k.sanitizeMargins=function(r){if(r&&r.margin){var n,i=r.width,a=r.height,o=r.margin,s=i-(o.l+o.r),l=a-(o.t+o.b);s<0&&(n=(i-1)/(o.l+o.r),o.l=Math.floor(n*o.l),o.r=Math.floor(n*o.r)),l<0&&(n=(a-1)/(o.t+o.b),o.t=Math.floor(n*o.t),o.b=Math.floor(n*o.b))}},k.clearAutoMarginIds=function(r){r._fullLayout._pushmarginIds={}},k.allowAutoMargin=function(r,n){r._fullLayout._pushmarginIds[n]=1},k.autoMargin=function(r,n,i){var a=r._fullLayout,o=a.width,s=a.height,l=a.margin,u=a.minreducedwidth,c=a.minreducedheight,f=p.constrain(o-l.l-l.r,2,u),h=p.constrain(s-l.t-l.b,2,c),d=Math.max(0,o-f),v=Math.max(0,s-h),g=a._pushmargin,y=a._pushmarginIds;if(!1!==l.autoexpand){if(i){var m=i.pad;if(void 0===m&&(m=Math.min(12,l.l,l.r,l.t,l.b)),d){var x=(i.l+i.r)/d;x>1&&(i.l/=x,i.r/=x)}if(v){var b=(i.t+i.b)/v;b>1&&(i.t/=b,i.b/=b)}var _=void 0!==i.xl?i.xl:i.x,w=void 0!==i.xr?i.xr:i.x,T=void 0!==i.yt?i.yt:i.y,A=void 0!==i.yb?i.yb:i.y;g[n]={l:{val:_,size:i.l+m},r:{val:w,size:i.r+m},b:{val:A,size:i.b+m},t:{val:T,size:i.t+m}},y[n]=1}else delete g[n],delete y[n];if(!a._replotting)return k.doAutoMargin(r)}},k.doAutoMargin=function(r){var n,i=r._fullLayout,a=i.width,o=i.height;i._size||(i._size={}),P(i);var s=i._size,u=i.margin,f={t:0,b:0,l:0,r:0},h=p.extendFlat({},s),d=u.l,v=u.r,y=u.t,m=u.b,x=i._pushmargin,b=i._pushmarginIds,_=i.minreducedwidth,w=i.minreducedheight;if(!1!==u.autoexpand){for(var T in x)b[T]||delete x[T];var A=r._fullLayout._reservedMargin;for(var M in A)for(var S in A[M]){var E=A[M][S];f[S]=Math.max(f[S],E)}for(var L in x.base={l:{val:0,size:d},r:{val:1,size:v},t:{val:1,size:y},b:{val:0,size:m}},f){var C=0;for(var O in x)"base"!==O&&l(x[O][L].size)&&(C=x[O][L].size>C?x[O][L].size:C);var I=Math.max(0,u[L]-C);f[L]=Math.max(0,f[L]-I)}for(var D in x){var z=x[D].l||{},R=x[D].b||{},F=z.val,B=z.size,N=R.val,j=R.size,U=a-f.r-f.l,V=o-f.t-f.b;for(var H in x){if(l(B)&&x[H].r){var q=x[H].r.val,G=x[H].r.size;if(q>F){var Z=(B*q+(G-U)*F)/(q-F),Y=(G*(1-F)+(B-U)*(1-q))/(q-F);Z+Y>d+v&&(d=Z,v=Y)}}if(l(j)&&x[H].t){var W=x[H].t.val,X=x[H].t.size;if(W>N){var J=(j*W+(X-V)*N)/(W-N),K=(X*(1-N)+(j-V)*(1-W))/(W-N);J+K>m+y&&(m=J,y=K)}}}}}var $=p.constrain(a-u.l-u.r,2,_),Q=p.constrain(o-u.t-u.b,2,w),tt=Math.max(0,a-$),te=Math.max(0,o-Q);if(tt){var tr=(d+v)/tt;tr>1&&(d/=tr,v/=tr)}if(te){var tn=(m+y)/te;tn>1&&(m/=tn,y/=tn)}if(s.l=Math.round(d)+f.l,s.r=Math.round(v)+f.r,s.t=Math.round(y)+f.t,s.b=Math.round(m)+f.b,s.p=Math.round(u.pad),s.w=Math.round(a)-s.l-s.r,s.h=Math.round(o)-s.t-s.b,!i._replotting&&(k.didMarginChange(h,s)||function(r){if("_redrawFromAutoMarginCount"in r._fullLayout)return!1;var n=g.list(r,"",!0);for(var i in n)if(n[i].autoshift||n[i].shift)return!0;return!1}(r))){"_redrawFromAutoMarginCount"in i?i._redrawFromAutoMarginCount++:i._redrawFromAutoMarginCount=1;var ti=3*(1+Object.keys(b).length);if(i._redrawFromAutoMarginCount<ti)return c.call("_doPlot",r);i._size=h,p.warn("Too many auto-margin redraws.")}n=g.list(r,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<n.length;i++){var a=n[i][r];a&&a()}})};var I=["l","r","t","b","p","w","h"];function D(r,n,i){var a=!1,o=[k.previousPromises,function(){if(r._transitionData)return r._transitioning=!1,function(r){var n=Promise.resolve();if(!r)return n;for(;r.length;)n=n.then(r.shift());return n}(r._transitionData._interruptCallbacks)},i.prepareFn,k.rehover,k.reselect,function(){return r.emit("plotly_transitioning",[]),new Promise(function(o){r._transitioning=!0,n.duration>0&&(r._transitioningWithDuration=!0),r._transitionData._interruptCallbacks.push(function(){a=!0}),i.redraw&&r._transitionData._interruptCallbacks.push(function(){return c.call("redraw",r)}),r._transitionData._interruptCallbacks.push(function(){r.emit("plotly_transitioninterrupted",[])});var s=0,l=0;function u(){return s++,function(){l++,a||l!==s||r._transitionData&&(function(r){if(r)for(;r.length;)r.shift()}(r._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return c.call("redraw",r)}).then(function(){r._transitioning=!1,r._transitioningWithDuration=!1,r.emit("plotly_transitioned",[])}).then(o))}}i.runFn(u),setTimeout(u())})}],s=p.syncOrAsync(o,r);return s&&s.then||(s=Promise.resolve()),s.then(function(){return r})}k.didMarginChange=function(r,n){for(var i=0;i<I.length;i++){var a=I[i],o=r[a],s=n[a];if(!l(o)||Math.abs(s-o)>1)return!0}return!1},k.graphJson=function(r,n,i,a,o,s){(o&&n&&!r._fullData||o&&!n&&!r._fullLayout)&&k.supplyDefaults(r);var l=o?r._fullData:r.data,c=o?r._fullLayout:r.layout,f=(r._transitionData||{})._frames;function h(r,n){if("function"==typeof r)return n?"_function_":null;if(p.isPlainObject(r)){var a,o={};return Object.keys(r).sort().forEach(function(s){if(-1===["_","["].indexOf(s.charAt(0))){if("function"!=typeof r[s]){if("keepdata"===i){if("src"===s.substr(s.length-3))return}else if("keepstream"===i){if("string"==typeof(a=r[s+"src"])&&a.indexOf(":")>0&&!p.isPlainObject(r.stream))return}else if("keepall"!==i&&"string"==typeof(a=r[s+"src"])&&a.indexOf(":")>0)return;o[s]=h(r[s],n)}else n&&(o[s]="_function")}}),o}var s=Array.isArray(r),l=p.isTypedArray(r);if((s||l)&&r.dtype&&r.shape){var c=r.bdata;return h({dtype:r.dtype,shape:r.shape,bdata:p.isArrayBuffer(c)?u.encode(c):c},n)}return s?r.map(function(r){return h(r,n)}):l?p.simpleMap(r,p.identity):p.isJSDate(r)?p.ms2DateTimeLocal(+r):r}var d={data:(l||[]).map(function(r){var i=h(r);return n&&delete i.fit,i})};if(!n&&(d.layout=h(c),o)){var v=c._size;d.layout.computed={margin:{b:v.b,l:v.l,r:v.r,t:v.t}}}return f&&(d.frames=h(f)),s&&(d.config=h(r._context,!0)),"object"===a?d:JSON.stringify(d)},k.modifyFrames=function(r,n){var i,a,o,s=r._transitionData._frames,l=r._transitionData._frameHash;for(i=0;i<n.length;i++)switch((a=n[i]).type){case"replace":o=a.value;var u=(s[a.index]||{}).name,c=o.name;s[a.index]=l[c]=o,c!==u&&(delete l[u],l[c]=o);break;case"insert":l[(o=a.value).name]=o,s.splice(a.index,0,o);break;case"delete":delete l[(o=s[a.index]).name],s.splice(a.index,1)}return Promise.resolve()},k.computeFrame=function(r,n){var i,a,o,s,l=r._transitionData._frameHash;if(!n)throw Error("computeFrame must be given a string frame name");var u=l[n.toString()];if(!u)return!1;for(var c=[u],f=[u.name];u.baseframe&&(u=l[u.baseframe.toString()])&&-1===f.indexOf(u.name);)c.push(u),f.push(u.name);for(var h={};u=c.pop();)if(u.layout&&(h.layout=k.extendLayout(h.layout,u.layout)),u.data){if(h.data||(h.data=[]),!(a=u.traces))for(a=[],i=0;i<u.data.length;i++)a[i]=i;for(h.traces||(h.traces=[]),i=0;i<u.data.length;i++)null!=(o=a[i])&&(-1===(s=h.traces.indexOf(o))&&(s=h.data.length,h.traces[s]=o),h.data[s]=k.extendTrace(h.data[s],u.data[i]))}return h},k.recomputeFrameHash=function(r){for(var n=r._transitionData._frameHash={},i=r._transitionData._frames,a=0;a<i.length;a++){var o=i[a];o&&o.name&&(n[o.name]=o)}},k.extendObjectWithContainers=function(r,n,i){var a,o,s,l,u,c,f,h=p.extendDeepNoArrays({},n||{}),d=p.expandObjectPaths(h),v={};if(i&&i.length)for(s=0;s<i.length;s++)void 0===(o=(a=p.nestedProperty(d,i[s])).get())?p.nestedProperty(v,i[s]).set(null):(a.set(null),p.nestedProperty(v,i[s]).set(o));if(r=p.extendDeepNoArrays(r||{},d),i&&i.length){for(s=0;s<i.length;s++)if(c=p.nestedProperty(v,i[s]).get()){for(Array.isArray(f=(u=p.nestedProperty(r,i[s])).get())||(f=[],u.set(f)),l=0;l<c.length;l++){var g=c[l];f[l]=null===g?null:k.extendObjectWithContainers(f[l],g)}u.set(f)}}return r},k.dataArrayContainers=["transforms","dimensions"],k.layoutArrayContainers=c.layoutArrayContainers,k.extendTrace=function(r,n){return k.extendObjectWithContainers(r,n,k.dataArrayContainers)},k.extendLayout=function(r,n){return k.extendObjectWithContainers(r,n,k.layoutArrayContainers)},k.transition=function(r,n,i,a,o,s){var l={redraw:o.redraw},u={},c=[];return l.prepareFn=function(){for(var o=Array.isArray(n)?n.length:0,s=a.slice(0,o),l=0;l<s.length;l++){var f=s[l],h=r._fullData[f]._module;if(h){if(h.animatable){var d=h.basePlotModule.name;u[d]||(u[d]=[]),u[d].push(f)}r.data[s[l]]=k.extendTrace(r.data[s[l]],n[l])}}var v=p.expandObjectPaths(p.extendDeepNoArrays({},i)),g=/^[xy]axis[0-9]*$/;for(var y in v)g.test(y)&&delete v[y].range;k.extendLayout(r.layout,v),delete r.calcdata,k.supplyDefaults(r),k.doCalcdata(r);var m=p.expandObjectPaths(i);if(m){var x=r._fullLayout._plots;for(var b in x){var _=x[b],w=_.xaxis,T=_.yaxis,A=w.range.slice(),M=T.range.slice(),S=null,E=null,L=null,C=null;Array.isArray(m[w._name+".range"])?S=m[w._name+".range"].slice():Array.isArray((m[w._name]||{}).range)&&(S=m[w._name].range.slice()),Array.isArray(m[T._name+".range"])?E=m[T._name+".range"].slice():Array.isArray((m[T._name]||{}).range)&&(E=m[T._name].range.slice()),A&&S&&(w.r2l(A[0])!==w.r2l(S[0])||w.r2l(A[1])!==w.r2l(S[1]))&&(L={xr0:A,xr1:S}),M&&E&&(T.r2l(M[0])!==T.r2l(E[0])||T.r2l(M[1])!==T.r2l(E[1]))&&(C={yr0:M,yr1:E}),(L||C)&&c.push(p.extendFlat({plotinfo:_},L,C))}}return Promise.resolve()},l.runFn=function(n){var a,o,l=r._fullLayout._basePlotModules,f=c.length;if(i)for(o=0;o<l.length;o++)l[o].transitionAxes&&l[o].transitionAxes(r,c,s,n);for(var h in f?((a=p.extendFlat({},s)).duration=0,delete u.cartesian):a=s,u){var d=u[h];r._fullData[d[0]]._module.basePlotModule.plot(r,d,a,n)}},D(r,s,l)},k.transitionFromReact=function(r,n,i,a){var o=r._fullLayout,s=o.transition,l={},u=[];return l.prepareFn=function(){var r=o._plots;for(var s in l.redraw=!1,"some"===n.anim&&(l.redraw=!0),"some"===i.anim&&(l.redraw=!0),r){var c=r[s],f=c.xaxis,h=c.yaxis,d=a[f._name].range.slice(),v=a[h._name].range.slice(),g=f.range.slice(),y=h.range.slice();f.setScale(),h.setScale();var m=null,x=null;f.r2l(d[0])===f.r2l(g[0])&&f.r2l(d[1])===f.r2l(g[1])||(m={xr0:d,xr1:g}),h.r2l(v[0])===h.r2l(y[0])&&h.r2l(v[1])===h.r2l(y[1])||(x={yr0:v,yr1:y}),(m||x)&&u.push(p.extendFlat({plotinfo:c},m,x))}return Promise.resolve()},l.runFn=function(i){for(var a,o,l,c=r._fullData,f=r._fullLayout._basePlotModules,h=[],d=0;d<c.length;d++)h.push(d);function v(){if(r._fullLayout)for(var n=0;n<f.length;n++)f[n].transitionAxes&&f[n].transitionAxes(r,u,a,i)}function g(){if(r._fullLayout)for(var n=0;n<f.length;n++)f[n].plot(r,l,o,i)}u.length&&n.anim?"traces first"===s.ordering?(a=p.extendFlat({},s,{duration:0}),l=h,o=s,setTimeout(v,s.duration),g()):(a=s,l=null,o=p.extendFlat({},s,{duration:0}),setTimeout(g,a.duration),v()):u.length?(a=s,v()):n.anim&&(l=h,o=s,g())},D(r,s,l)},k.doCalcdata=function(r,n){var i,a,o,s,l=g.list(r),u=r._fullData,h=r._fullLayout,d=Array(u.length),y=(r.calcdata||[]).slice();for(r.calcdata=d,h._numBoxes=0,h._numViolins=0,h._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,h._piecolormap={},h._sunburstcolormap={},h._treemapcolormap={},h._iciclecolormap={},h._funnelareacolormap={},o=0;o<u.length;o++)Array.isArray(n)&&-1===n.indexOf(o)&&(d[o]=y[o]);for(o=0;o<u.length;o++)(i=u[o])._arrayAttrs=f.findArrayAttributes(i),i._extremes={};var m=h._subplots.polar||[];for(o=0;o<m.length;o++)l.push(h[m[o]].radialaxis,h[m[o]].angularaxis);for(var x in h._colorAxes){var b=h[x];!1!==b.cauto&&(delete b.cmin,delete b.cmax)}var _=!1;function w(n,o){if(!!(a=(i=u[n])._module).isContainer===o){var l=[];if(!0===i.visible&&0!==i._length){delete i._indexToPoints;var c=i.transforms||[];for(s=c.length-1;s>=0;s--)if(c[s].enabled){i._indexToPoints=c[s]._indexToPoints;break}a&&a.calc&&(l=a.calc(r,i))}Array.isArray(l)&&l[0]||(l=[{x:v,y:v}]),l[0].t||(l[0].t={}),l[0].trace=i,d[n]=l}}for(R(l,u,h),o=0;o<u.length;o++)w(o,!0);for(o=0;o<u.length;o++)(function(n){if(a=(i=u[n])._module,!0===i.visible&&i.transforms){if(a&&a.calc){var o=a.calc(r,i);o[0]&&o[0].t&&o[0].t._scene&&delete o[0].t._scene.dirty}for(s=0;s<i.transforms.length;s++){var l=i.transforms[s];(a=A[l.type])&&a.calcTransform&&(i._hasCalcTransform=!0,_=!0,a.calcTransform(r,i,l))}}})(o);for(_&&R(l,u,h),o=0;o<u.length;o++)w(o,!0);for(o=0;o<u.length;o++)w(o,!1);F(r);var T=function(r,n){var i,a,o,s,l,u=[],f={min:function(r){return p.aggNums(Math.min,null,r)},max:function(r){return p.aggNums(Math.max,null,r)},sum:function(r){return p.aggNums(function(r,n){return r+n},null,r)},total:function(r){return p.aggNums(function(r,n){return r+n},null,r)},mean:function(r){return p.mean(r)},median:function(r){return p.median(r)}};function h(r,n){return r[1]-n[1]}function d(r,n){return n[1]-r[1]}for(i=0;i<r.length;i++){var v=r[i];if("category"===v.type){var y=v.categoryorder.match(z);if(y){var m=y[1],x=y[2],b=v._id.charAt(0),_="x"===b,w=[];for(a=0;a<v._categories.length;a++)w.push([v._categories[a],[]]);for(a=0;a<v._traceIndices.length;a++){var T=v._traceIndices[a],k=n._fullData[T];if(!0===k.visible){var A=k.type;c.traceIs(k,"histogram")&&(delete k._xautoBinFinished,delete k._yautoBinFinished);var M="splom"===A,S="scattergl"===A,E=n.calcdata[T];for(o=0;o<E.length;o++){var L,C,O=E[o];if(M){var P=k._axesDim[v._id];if(!_){var I=k._diag[P][0];I&&(v=n._fullLayout[g.id2name(I)])}var D=O.trace.dimensions[P].values;for(s=0;s<D.length;s++)for(L=v._categoriesMap[D[s]],l=0;l<O.trace.dimensions.length;l++)if(l!==P){var R=O.trace.dimensions[l];w[L][1].push(R.values[s])}}else if(S){for(s=0;s<O.t.x.length;s++)_?(L=O.t.x[s],C=O.t.y[s]):(L=O.t.y[s],C=O.t.x[s]),w[L][1].push(C);O.t&&O.t._scene&&delete O.t._scene.dirty}else if(O.hasOwnProperty("z")){C=O.z;var F=function(r,i,a){var o=i._id.charAt(0);if("histogram2dcontour"===r){var s=i._counterAxes[0],l=g.getFromId(n,s),u="x"===o||"x"===s&&"category"===l.type,c="y"===o||"y"===s&&"category"===l.type;return function(r,n){return 0===r||0===n||u&&r===a[n].length-1||c&&n===a.length-1?-1:("y"===o?n:r)-1}}return function(r,n){return"y"===o?n:r}}(k.type,v,C);for(s=0;s<C.length;s++)for(l=0;l<C[s].length;l++)(L=F(l,s))+1&&w[L][1].push(C[s][l])}else for(void 0===(L=O.p)&&(L=O[b]),void 0===(C=O.s)&&(C=O.v),void 0===C&&(C=_?O.y:O.x),Array.isArray(C)||(C=void 0===C?[]:[C]),s=0;s<C.length;s++)w[L][1].push(C[s])}}}v._categoriesValue=w;var B=[];for(a=0;a<w.length;a++)B.push([w[a][0],f[m](w[a][1])]);B.sort("descending"===x?d:h),v._categoriesAggregatedValue=B,v._initialCategories=B.map(function(r){return r[0]}),u=u.concat(v.sortByInitialCategories())}}}return u}(l,r);if(T.length){for(h._numBoxes=0,h._numViolins=0,o=0;o<T.length;o++)w(T[o],!0);for(o=0;o<T.length;o++)w(T[o],!1);F(r)}c.getComponentMethod("fx","calc")(r),c.getComponentMethod("errorbars","calc")(r)};var z=/(total|sum|min|max|mean|median) (ascending|descending)/;function R(r,n,i){var a={};function o(r){r.clearCalc(),"multicategory"===r.type&&r.setupMultiCategory(n),a[r._id]=1}p.simpleMap(r,o);for(var s=i._axisMatchGroups||[],l=0;l<s.length;l++)for(var u in s[l])a[u]||o(i[g.id2name(u)])}function F(r){var n,i,a,o=r._fullLayout,s=o._visibleModules,l={};for(i=0;i<s.length;i++){var u=s[i],c=u.crossTraceCalc;if(c){var f=u.basePlotModule.name;l[f]?p.pushUnique(l[f],c):l[f]=[c]}}for(a in l){var h=l[a],d=o._subplots[a];if(Array.isArray(d))for(n=0;n<d.length;n++){var v=d[n],g="cartesian"===a?o._plots[v]:o[v];for(i=0;i<h.length;i++)h[i](r,g,v)}else for(i=0;i<h.length;i++)h[i](r)}}k.rehover=function(r){r._fullLayout._rehover&&r._fullLayout._rehover()},k.redrag=function(r){r._fullLayout._redrag&&r._fullLayout._redrag()},k.reselect=function(r){var n=r._fullLayout,i=(r.layout||{}).selections,a=n._previousSelections;n._previousSelections=i;var o=n._reselect||JSON.stringify(i)!==JSON.stringify(a);c.getComponentMethod("selections","reselect")(r,o)},k.generalUpdatePerTraceModule=function(r,n,i,a){var o,s=n.traceHash,l={};for(o=0;o<i.length;o++){var u=i[o],c=u[0].trace;c.visible&&(l[c.type]=l[c.type]||[],l[c.type].push(u))}for(var f in s)if(!l[f]){var h=s[f][0];h[0].trace.visible=!1,l[f]=[h]}for(var d in l){var v=l[d];v[0][0].trace._module.plot(r,n,p.filterVisible(v),a)}n.traceHash=l},k.plotBasePlot=function(r,n,i,a,o){var s=c.getModule(r),l=_(n.calcdata,s)[0];s.plot(n,l,a,o)},k.cleanBasePlot=function(r,n,i,a,o){var s=o._has&&o._has(r),l=i._has&&i._has(r);s&&!l&&o["_"+r+"layer"].selectAll("g.trace").remove()}},9813:function(r){"use strict";r.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(r,n,i){"use strict";var a=i(71828),o=i(61082).tester,s=a.findIndexOfMin,l=a.isAngleInsideSector,u=a.angleDelta,c=a.angleDist;function f(r,n,i,a){var o,s,l=a[0],u=a[1],c=p(Math.sin(n)-Math.sin(r)),f=p(Math.cos(n)-Math.cos(r)),h=Math.tan(i),d=p(1/h),v=c/f,g=u-v*l;return d?c&&f?s=h*(o=g/(h-v)):f?(o=u*d,s=u):(o=l,s=l*h):c&&f?(o=0,s=g):f?(o=0,s=u):o=s=NaN,[o,s]}function h(r,n,i,o){return a.isFullCircle([n,i])?function(r,n){var i,a=n.length,o=Array(a+1);for(i=0;i<a;i++){var s=n[i];o[i]=[r*Math.cos(s),r*Math.sin(s)]}return o[i]=o[0].slice(),o}(r,o):function(r,n,i,o){var u,h,p,d,v=o.length,g=[];function y(n){return[r*Math.cos(n),r*Math.sin(n)]}function m(r){return a.mod(r,v)}function x(r){return l(r,[n,i])}var b=s(o,function(r){return x(r)?c(r,n):1/0}),_=f(u=o[b],o[m(b-1)],n,y(u));for(g.push(_),p=b,d=0;d<v;p++,d++){var w=o[m(p)];if(!x(w))break;g.push(y(w))}var T=s(o,function(r){return x(r)?c(r,i):1/0}),k=f(h=o[T],o[m(T+1)],i,y(h));return g.push(k),g.push([0,0]),g.push(g[0].slice()),g}(r,n,i,o)}function p(r){return Math.abs(r)>1e-10?r:0}function d(r,n,i){n=n||0,i=i||0;for(var a=r.length,o=Array(a),s=0;s<a;s++){var l=r[s];o[s]=[n+l[0],i-l[1]]}return o}r.exports={isPtInsidePolygon:function(r,n,i,a,s){if(!l(n,a))return!1;i[0]<i[1]?(u=i[0],c=i[1]):(u=i[1],c=i[0]);var u,c,f=o(h(u,a[0],a[1],s)),p=o(h(c,a[0],a[1],s)),d=[r*Math.cos(n),r*Math.sin(n)];return p.contains(d)&&!f.contains(d)},findPolygonOffset:function(r,n,i,a){for(var o=1/0,s=1/0,l=h(r,n,i,a),u=0;u<l.length;u++){var c=l[u];o=Math.min(o,c[0]),s=Math.min(s,-c[1])}return[o,s]},findEnclosingVertexAngles:function(r,n){var i=s(n,function(n){var i=u(n,r);return i>0?i:1/0}),o=a.mod(i+1,n.length);return[n[i],n[o]]},findIntersectionXY:f,findXYatLength:function(r,n,i,a){var o=-n*i,s=n*n+1,l=2*(n*o-i),u=Math.sqrt(l*l-4*s*(o*o+i*i-r*r)),c=(-l+u)/(2*s),f=(-l-u)/(2*s);return[[c,n*c+o+a],[f,n*f+o+a]]},clampTiny:p,pathPolygon:function(r,n,i,a,o,s){return"M"+d(h(r,n,i,a),o,s).join("L")},pathPolygonAnnulus:function(r,n,i,a,o,s,l){r<n?(u=r,c=n):(u=n,c=r);var u,c,f=d(h(u,i,a,o),s,l);return"M"+d(h(c,i,a,o),s,l).reverse().join("L")+"M"+f.join("L")}}},23580:function(r,n,i){"use strict";var a=i(27659).AU,o=i(71828).counterRegex,s=i(77997),l=i(9813),u=l.attr,c=l.name,f=o(c),h={};h[u]={valType:"subplotid",dflt:c,editType:"calc"},r.exports={attr:u,name:c,idRoot:c,idRegex:f,attrRegex:f,attributes:h,layoutAttributes:i(73812),supplyLayoutDefaults:i(68993),plot:function(r){for(var n=r._fullLayout,i=r.calcdata,o=n._subplots[c],l=0;l<o.length;l++){var u=o[l],f=a(i,c,u),h=n[u]._subplot;h||(h=s(r,u),n[u]._subplot=h),h.plot(f,n,r._promises)}},clean:function(r,n,i,a){for(var o=a._subplots[c]||[],s=a._has&&a._has("gl"),l=n._has&&n._has("gl"),u=s&&!l,f=0;f<o.length;f++){var h=o[f],p=a[h]._subplot;if(!n[h]&&p)for(var d in p.framework.remove(),p.layers["radial-axis-title"].remove(),p.clipPaths)p.clipPaths[d].remove();u&&p._scene&&(p._scene.destroy(),p._scene=null)}},toSVG:i(93612).toSVG}},73812:function(r,n,i){"use strict";var a=i(22399),o=i(13838),s=i(27670).Y,l=i(71828).extendFlat,u=i(30962).overrideAll,c=u({color:o.color,showline:l({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:l({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash},"plot","from-root"),f=u({tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,layer:o.layer},"plot","from-root"),h={visible:l({},o.visible,{dflt:!0}),type:l({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorangeoptions:{minallowed:o.autorangeoptions.minallowed,maxallowed:o.autorangeoptions.maxallowed,clipmin:o.autorangeoptions.clipmin,clipmax:o.autorangeoptions.clipmax,include:o.autorangeoptions.include,editType:"plot"},autorange:l({},o.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:l({},o.minallowed,{editType:"plot"}),maxallowed:l({},o.maxallowed,{editType:"plot"}),range:l({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:o.categoryorder,categoryarray:o.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:l({},o.title.text,{editType:"plot",dflt:""}),font:l({},o.title.font,{editType:"plot"}),editType:"plot"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}};l(h,c,f);var p={visible:l({},o.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:o.autotypenumbers,categoryorder:o.categoryorder,categoryarray:o.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};l(p,c,f),r.exports={domain:s({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:a.background},radialaxis:h,angularaxis:p,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(44467),l=i(49119),u=i(27659).NG,c=i(26218),f=i(38701),h=i(96115),p=i(89426),d=i(15258),v=i(92128),g=i(23074),y=i(4322),m=i(73812),x=i(12101),b=i(9813),_=b.axisNames;function w(r,n,i,l){var w=i("bgcolor");l.bgColor=o.combine(w,l.paper_bgcolor);var T=i("sector");i("hole");var k,A=u(l.fullData,b.name,l.id),M=l.layoutOut;function S(r,n){return i(k+"."+r,n)}for(var E=0;E<_.length;E++){k=_[E],a.isPlainObject(r[k])||(r[k]={});var L=r[k],C=s.newContainer(n,k);C._id=C._name=k,C._attr=l.id+"."+k,C._traceIndices=A.map(function(r){return r._expandedIndex});var O=b.axisName2dataArray[k],P=function(r,n,i,a,o,s){var l=i("autotypenumbers",s.autotypenumbersDflt);if("-"===i("type")){for(var u,c=0;c<a.length;c++)if(a[c].visible){u=a[c];break}u&&u[o]&&(n.type=y(u[o],"gregorian",{noMultiCategory:!0,autotypenumbers:l})),"-"===n.type?n.type="linear":r.type=n.type}return n.type}(L,C,S,A,O,l);d(L,C,S,{axData:A,dataAttr:O});var I=S("visible");switch(x(C,n,M),S("uirevision",n.uirevision),C._m=1,k){case"radialaxis":S("minallowed"),S("maxallowed");var D,z=S("range"),R=C.getAutorangeDflt(z),F=S("autorange",R);z&&(null===z[0]&&null===z[1]||(null===z[0]||null===z[1])&&("reversed"===F||!0===F)||null!==z[0]&&("min"===F||"max reversed"===F)||null!==z[1]&&("max"===F||"min reversed"===F))&&(z=void 0,delete C.range,C.autorange=!0,D=!0),D||(F=S("autorange",R=C.getAutorangeDflt(z))),L.autorange=F,F&&(g(S,F,z),"linear"!==P&&"-"!==P||S("rangemode"),C.isReversed()&&(C._m=-1)),C.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===P){a.log("Polar plots do not support date angular axes yet.");for(var B=0;B<A.length;B++)A[B].visible=!1;P=L.type=C.type="linear"}S("linear"===P?"thetaunit":"period");var N=S("direction");S("rotation",{counterclockwise:0,clockwise:90}[N])}if(p(L,C,S,C.type,{tickSuffixDflt:"degrees"===C.thetaunit?"\xb0":void 0}),I){var j,U,V,H,q=l.font||{};U=(j=S("color"))===L.color?j:q.color,V=q.size,H=q.family,c(L,C,S,C.type),h(L,C,S,C.type,{font:{color:U,size:V,family:H}}),f(L,C,S,{outerTicks:!0}),v(L,C,S,{dfltColor:j,bgColor:l.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:m[k]}),S("layer"),"radialaxis"===k&&(S("side"),S("angle",T[0]),S("title.text"),a.coerceFont(S,"title.font",{color:U,size:a.bigFont(V),family:H}))}"category"!==P&&S("hoverformat"),C._input=L}"category"===n.angularaxis.type&&i("gridshape")}r.exports=function(r,n,i){l(r,n,i,{type:b.name,attributes:m,handleDefaults:w,font:n.font,autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,fullData:i,layoutOut:n})}},77997:function(r,n,i){"use strict";var a=i(39898),o=i(84267),s=i(73972),l=i(71828),u=l.strRotate,c=l.strTranslate,f=i(7901),h=i(91424),p=i(74875),d=i(89298),v=i(21994),g=i(12101),y=i(71739).doAutoRange,m=i(29323),x=i(28569),b=i(30211),_=i(92998),w=i(47322).prepSelect,T=i(47322).selectOnClick,k=i(47322).clearOutline,A=i(6964),M=i(33306),S=i(61549).redrawReglTraces,E=i(18783).MID_SHIFT,L=i(9813),C=i(10869),O=i(23893),P=O.smith,I=O.reactanceArc,D=O.resistanceArc,z=O.smithTransform,R=l._,F=l.mod,B=l.deg2rad,N=l.rad2deg;function j(r,n,i){this.isSmith=i||!1,this.id=n,this.gd=r,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var a=r._fullLayout,o="clip"+a._uid+n;this.clipIds.forTraces=o+"-for-traces",this.clipPaths.forTraces=a._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=a["_"+(i?"smith":"polar")+"layer"].append("g").attr("class",n),this.getHole=function(r){return this.isSmith?0:r.hole},this.getSector=function(r){return this.isSmith?[0,360]:r.sector},this.getRadial=function(r){return this.isSmith?r.realaxis:r.radialaxis},this.getAngular=function(r){return this.isSmith?r.imaginaryaxis:r.angularaxis},i||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=j.prototype;function V(r){var n=r.ticks+String(r.ticklen)+String(r.showticklabels);return"side"in r&&(n+=r.side),n}function H(r,n){return n[l.findIndexOfMin(n,function(n){return l.angleDist(r,n)})]}function q(r,n,i){return n?(r.attr("display",null),r.attr(i)):r&&r.attr("display","none"),r}r.exports=function(r,n,i){return new j(r,n,i)},U.plot=function(r,n){for(var i=n[this.id],a=!1,o=0;o<r.length;o++)if(!1===r[o][0].trace.cliponaxis){a=!0;break}this._hasClipOnAxisFalse=a,this.updateLayers(n,i),this.updateLayout(n,i),p.generalUpdatePerTraceModule(this.gd,this,r,i),this.updateFx(n,i),this.isSmith&&(delete i.realaxis.range,delete i.imaginaryaxis.range)},U.updateLayers=function(r,n){var i=this.isSmith,o=this.layers,s=this.getRadial(n),l=this.getAngular(n),u=L.layerNames,c=u.indexOf("frontplot"),f=u.slice(0,c),h="below traces"===l.layer,p="below traces"===s.layer;h&&f.push("angular-line"),p&&f.push("radial-line"),h&&f.push("angular-axis"),p&&f.push("radial-axis"),f.push("frontplot"),h||f.push("angular-line"),p||f.push("radial-line"),h||f.push("angular-axis"),p||f.push("radial-axis");var d=(i?"smith":"polar")+"sublayer",v=this.framework.selectAll("."+d).data(f,String);v.enter().append("g").attr("class",function(r){return d+" "+r}).each(function(r){var n=o[r]=a.select(this);switch(r){case"frontplot":i||n.append("g").classed("barlayer",!0),n.append("g").classed("scatterlayer",!0);break;case"backplot":n.append("g").classed("maplayer",!0);break;case"plotbg":o.bg=n.append("path");break;case"radial-grid":case"angular-grid":n.style("fill","none");break;case"radial-line":n.append("line").style("fill","none");break;case"angular-line":n.append("path").style("fill","none")}}),v.order()},U.updateLayout=function(r,n){var i=this.layers,a=r._size,o=this.getRadial(n),s=this.getAngular(n),l=n.domain.x,u=n.domain.y;this.xOffset=a.l+a.w*l[0],this.yOffset=a.t+a.h*(1-u[1]);var p=this.xLength=a.w*(l[1]-l[0]),d=this.yLength=a.h*(u[1]-u[0]),v=this.getSector(n);this.sectorInRad=v.map(B);var g,y,m,x,b,_,w,T,k,A,M,S,E,L,C=this.sectorBBox=(y=v[0],m=v[1]-y,b=(x=F(y,360))+m,_=Math.cos(B(x)),w=Math.sin(B(x)),T=Math.cos(B(b)),k=Math.sin(B(b)),g=x<=90&&b>=90||x>90&&b>=450?1:w<=0&&k<=0?0:Math.max(w,k),[x<=180&&b>=180||x>180&&b>=540?-1:_>=0&&T>=0?0:Math.min(_,T),x<=270&&b>=270||x>270&&b>=630?-1:w>=0&&k>=0?0:Math.min(w,k),b>=360?1:_<=0&&T<=0?0:Math.max(_,T),g]),O=C[2]-C[0],P=Math.abs((C[3]-C[1])/O);d/p>P?(A=p,L=(d-(M=p*P))/a.h/2,S=[l[0],l[1]],E=[u[0]+L,u[1]-L]):(M=d,L=(p-(A=d/P))/a.w/2,S=[l[0]+L,l[1]-L],E=[u[0],u[1]]),this.xLength2=A,this.yLength2=M,this.xDomain2=S,this.yDomain2=E;var I,D=this.xOffset2=a.l+a.w*S[0],z=this.yOffset2=a.t+a.h*(1-E[1]),R=this.radius=A/O,N=this.innerRadius=this.getHole(n)*R,j=this.cx=D-R*C[0],U=this.cy=z+R*C[3],V=this.cxx=j-D,H=this.cyy=U-z,q=o.side;"counterclockwise"===q?(I=q,q="top"):"clockwise"===q&&(I=q,q="bottom"),this.radialAxis=this.mockAxis(r,n,o,{_id:"x",side:q,_trueSide:I,domain:[N/a.w,R/a.w]}),this.angularAxis=this.mockAxis(r,n,s,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(r,n),this.updateAngularAxis(r,n),this.updateRadialAxis(r,n),this.updateRadialAxisTitle(r,n),this.xaxis=this.mockCartesianAxis(r,n,{_id:"x",domain:S}),this.yaxis=this.mockCartesianAxis(r,n,{_id:"y",domain:E});var G=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",G).attr("transform",c(V,H)),i.frontplot.attr("transform",c(D,z)).call(h.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),i.bg.attr("d",G).attr("transform",c(j,U)).call(f.fill,n.bgcolor)},U.mockAxis=function(r,n,i,a){var o=l.extendFlat({},i,a);return g(o,n,r),o},U.mockCartesianAxis=function(r,n,i){var a=this,o=a.isSmith,s=i._id,u=l.extendFlat({type:"linear"},i);v(u,r);var c={x:[0,2],y:[1,3]};return u.setRange=function(){var r=a.sectorBBox,i=c[s],o=a.radialAxis._rl,l=(o[1]-o[0])/(1-a.getHole(n));u.range=[r[i[0]]*l,r[i[1]]*l]},u.isPtWithinRange="x"!==s||o?function(){return!0}:function(r){return a.isPtInside(r)},u.setRange(),u.setScale(),u},U.doAutoRange=function(r,n){var i=this.gd,a=this.radialAxis,o=this.getRadial(n);y(i,a);var s=a.range;if(o.range=s.slice(),o._input.range=s.slice(),a._rl=[a.r2l(s[0],null,"gregorian"),a.r2l(s[1],null,"gregorian")],void 0!==a.minallowed){var l=a.r2l(a.minallowed);a._rl[0]>a._rl[1]?a._rl[1]=Math.max(a._rl[1],l):a._rl[0]=Math.max(a._rl[0],l)}if(void 0!==a.maxallowed){var u=a.r2l(a.maxallowed);a._rl[0]<a._rl[1]?a._rl[1]=Math.min(a._rl[1],u):a._rl[0]=Math.min(a._rl[0],u)}},U.updateRadialAxis=function(r,n){var i=this,a=i.gd,o=i.layers,s=i.radius,h=i.innerRadius,p=i.cx,v=i.cy,g=i.getRadial(n),y=F(i.getSector(n)[0],360),m=i.radialAxis,x=h<s,b=i.isSmith;b||(i.fillViewInitialKey("radialaxis.angle",g.angle),i.fillViewInitialKey("radialaxis.range",m.range.slice()),m.setGeometry()),"auto"===m.tickangle&&y>90&&y<=270&&(m.tickangle=180);var _=b?function(r){var n=z(i,P([r.x,0]));return c(n[0]-p,n[1]-v)}:function(r){return c(m.l2p(r.x)+h,0)},w=b?function(r){return D(i,r.x,-1/0,1/0)}:function(r){return i.pathArc(m.r2p(r.x)+h)},T=V(g);if(i.radialTickLayout!==T&&(o["radial-axis"].selectAll(".xtick").remove(),i.radialTickLayout=T),x){m.setScale();var k=0,A=b?(m.tickvals||[]).filter(function(r){return r>=0}).map(function(r){return d.tickText(m,r,!0,!1)}):d.calcTicks(m),M=b?A:d.clipEnds(m,A),S=d.getTickSigns(m)[2];b&&(("top"===m.ticks&&"bottom"===m.side||"bottom"===m.ticks&&"top"===m.side)&&(S=-S),"top"===m.ticks&&"top"===m.side&&(k=-m.ticklen),"bottom"===m.ticks&&"bottom"===m.side&&(k=m.ticklen)),d.drawTicks(a,m,{vals:A,layer:o["radial-axis"],path:d.makeTickPath(m,0,S),transFn:_,crisp:!1}),d.drawGrid(a,m,{vals:M,layer:o["radial-grid"],path:w,transFn:l.noop,crisp:!1}),d.drawLabels(a,m,{vals:A,layer:o["radial-axis"],transFn:_,labelFns:d.makeLabelFns(m,k)})}var E=i.radialAxisAngle=i.vangles?N(H(B(g.angle),i.vangles)):g.angle,L=c(p,v),C=L+u(-E);q(o["radial-axis"],x&&(g.showticklabels||g.ticks),{transform:C}),q(o["radial-grid"],x&&g.showgrid,{transform:b?"":L}),q(o["radial-line"].select("line"),x&&g.showline,{x1:b?-s:h,y1:0,x2:s,y2:0,transform:C}).attr("stroke-width",g.linewidth).call(f.stroke,g.linecolor)},U.updateRadialAxisTitle=function(r,n,i){if(!this.isSmith){var a=this.gd,o=this.radius,s=this.cx,l=this.cy,u=this.getRadial(n),c=this.id+"title",f=0;if(u.title){var p=h.bBox(this.layers["radial-axis"].node()).height,d=u.title.font.size,v=u.side;f="top"===v?d:"counterclockwise"===v?-(p+.4*d):p+.8*d}var g=void 0!==i?i:this.radialAxisAngle,y=B(g),m=Math.cos(y),x=Math.sin(y),b=s+o/2*m+f*x,w=l-o/2*x+f*m;this.layers["radial-axis-title"]=_.draw(a,c,{propContainer:u,propName:this.id+".radialaxis.title",placeholder:R(a,"Click to enter radial axis title"),attributes:{x:b,y:w,"text-anchor":"middle"},transform:{rotate:-g}})}},U.updateAngularAxis=function(r,n){var i=this,a=i.gd,o=i.layers,s=i.radius,h=i.innerRadius,p=i.cx,v=i.cy,g=i.getAngular(n),y=i.angularAxis,m=i.isSmith;m||(i.fillViewInitialKey("angularaxis.rotation",g.rotation),y.setGeometry(),y.setScale());var x=m?function(r){var n=z(i,P([0,r.x]));return Math.atan2(n[0]-p,n[1]-v)-Math.PI/2}:function(r){return y.t2g(r.x)};"linear"===y.type&&"radians"===y.thetaunit&&(y.tick0=N(y.tick0),y.dtick=N(y.dtick));var b=function(r){return c(p+s*Math.cos(r),v-s*Math.sin(r))},_=m?function(r){var n=z(i,P([0,r.x]));return c(n[0],n[1])}:function(r){return b(x(r))},w=m?function(r){var n=z(i,P([0,r.x])),a=Math.atan2(n[0]-p,n[1]-v)-Math.PI/2;return c(n[0],n[1])+u(-N(a))}:function(r){var n=x(r);return b(n)+u(-N(n))},T=m?function(r){return I(i,r.x,0,1/0)}:function(r){var n=x(r),i=Math.cos(n),a=Math.sin(n);return"M"+[p+h*i,v-h*a]+"L"+[p+s*i,v-s*a]},k=d.makeLabelFns(y,0).labelStandoff,A=V(g);i.angularTickLayout!==A&&(o["angular-axis"].selectAll("."+y._id+"tick").remove(),i.angularTickLayout=A);var M,S=m?[1/0].concat(y.tickvals||[]).map(function(r){return d.tickText(y,r,!0,!1)}):d.calcTicks(y);if(m&&(S[0].text="∞",S[0].fontSize*=1.75),"linear"===n.gridshape?(M=S.map(x),0>l.angleDelta(M[0],M[1])&&(M=M.slice().reverse())):M=null,i.vangles=M,"category"===y.type&&(S=S.filter(function(r){return l.isAngleInsideSector(x(r),i.sectorInRad)})),y.visible){var L="inside"===y.ticks?-1:1,C=(y.linewidth||1)/2;d.drawTicks(a,y,{vals:S,layer:o["angular-axis"],path:"M"+L*C+",0h"+L*y.ticklen,transFn:w,crisp:!1}),d.drawGrid(a,y,{vals:S,layer:o["angular-grid"],path:T,transFn:l.noop,crisp:!1}),d.drawLabels(a,y,{vals:S,layer:o["angular-axis"],repositionOnUpdate:!0,transFn:_,labelFns:{xFn:function(r){return Math.cos(x(r))*k},yFn:function(r){var n=x(r),i=Math.sin(n)>0?.2:1;return-Math.sin(n)*(k+r.fontSize*i)+r.fontSize*E*Math.abs(Math.cos(n))},anchorFn:function(r){var n=Math.cos(x(r));return .1>Math.abs(n)?"middle":n>0?"start":"end"},heightFn:function(r,n,i){return -.5*(1+Math.sin(x(r)))*i}}})}q(o["angular-line"].select("path"),g.showline,{d:i.pathSubplot(),transform:c(p,v)}).attr("stroke-width",g.linewidth).call(f.stroke,g.linecolor)},U.updateFx=function(r,n){this.gd._context.staticPlot||(this.isSmith||(this.updateAngularDrag(r),this.updateRadialDrag(r,n,0),this.updateRadialDrag(r,n,1)),this.updateHoverAndMainDrag(r))},U.updateHoverAndMainDrag=function(r){var n,i,u=this,f=u.isSmith,h=u.gd,p=u.layers,d=r._zoomlayer,v=L.MINZOOM,g=L.OFFEDGE,y=u.radius,_=u.innerRadius,A=u.cx,M=u.cy,S=u.cxx,E=u.cyy,O=u.sectorInRad,P=u.vangles,I=u.radialAxis,D=C.clampTiny,z=C.findXYatLength,R=C.findEnclosingVertexAngles,F=L.cornerHalfWidth,B=L.cornerLen/2,N=m.makeDragger(p,"path","maindrag",!1===r.dragmode?"none":"crosshair");a.select(N).attr("d",u.pathSubplot()).attr("transform",c(A,M)),N.onmousemove=function(r){b.hover(h,r,u.id),h._fullLayout._lasthover=N,h._fullLayout._hoversubplot=u.id},N.onmouseout=function(r){h._dragging||x.unhover(h,r)};var j,U,V,H,q,G,Z,Y,W,X={element:N,gd:h,subplot:u.id,plotinfo:{id:u.id,xaxis:u.xaxis,yaxis:u.yaxis},xaxes:[u.xaxis],yaxes:[u.yaxis]};function J(r,n){return Math.sqrt(r*r+n*n)}function K(r,n){return Math.atan2(E-n,r-S)}function $(r,n){return[r*Math.cos(n),r*Math.sin(-n)]}function Q(r,n){if(0===r)return u.pathSector(2*F);var i=B/r,a=n-i,o=n+i,s=Math.max(0,Math.min(r,y)),l=s-F,c=s+F;return"M"+$(l,a)+"A"+[l,l]+" 0,0,0 "+$(l,o)+"L"+$(c,o)+"A"+[c,c]+" 0,0,1 "+$(c,a)+"Z"}function tt(r,n,i){if(0===r)return u.pathSector(2*F);var a,o,s,l,c=$(r,n),f=$(r,i),h=D((c[0]+f[0])/2),p=D((c[1]+f[1])/2);if(h&&p){var d=p/h,v=-1/d,g=z(F,d,h,p);s=z(B,v,g[0][0],g[0][1]),l=z(B,v,g[1][0],g[1][1])}else p?(a=B,o=F):(a=F,o=B),s=[[h-a,p-o],[h+a,p-o]],l=[[h-a,p+o],[h+a,p+o]];return"M"+s.join("L")+"L"+l.reverse().join("L")+"Z"}function te(r,n){return n=Math.max(Math.min(n,y),_),r<g?r=0:y-r<g?r=y:n<g?n=0:y-n<g&&(n=y),Math.abs(n-r)>v?(r<n?(V=r,H=n):(V=n,H=r),!0):(V=null,H=null,!1)}function tr(r,n){r=r||q,n=n||"M0,0Z",Y.attr("d",r),W.attr("d",n),m.transitionZoombox(Y,W,G,Z),G=!0;var i={};ts(i),h.emit("plotly_relayouting",i)}function tn(r,a){var o,s,l=j+(r*=n),c=U+(a*=i),f=J(j-S,U-E),h=Math.min(J(l-S,c-E),y),p=K(j,U);te(f,h)&&(o=q+u.pathSector(H),V&&(o+=u.pathSector(V)),s=Q(V,p)+Q(H,p)),tr(o,s)}function ti(r,n,i,a){var o=C.findIntersectionXY(i,a,i,[r-S,E-n]);return J(o[0],o[1])}function ta(r,n){var i,a,o=j+r,s=U+n,l=K(j,U),c=K(o,s),f=R(l,P),h=R(c,P);te(ti(j,U,f[0],f[1]),Math.min(ti(o,s,h[0],h[1]),y))&&(i=q+u.pathSector(H),V&&(i+=u.pathSector(V)),a=[tt(V,f[0],f[1]),tt(H,f[0],f[1])].join(" ")),tr(i,a)}function to(){if(m.removeZoombox(h),null!==V&&null!==H){var r={};ts(r),m.showDoubleClickNotifier(h),s.call("_guiRelayout",h,r)}}function ts(r){var n=I._rl,i=(n[1]-n[0])/(1-_/y)/y,a=[n[0]+(V-_)*i,n[0]+(H-_)*i];r[u.id+".radialaxis.range"]=a}function tl(r,n){var i=h._fullLayout.clickmode;if(m.removeZoombox(h),2===r){var a={};for(var o in u.viewInitial)a[u.id+"."+o]=u.viewInitial[o];h.emit("plotly_doubleclick",null),s.call("_guiRelayout",h,a)}i.indexOf("select")>-1&&1===r&&T(n,h,[u.xaxis],[u.yaxis],u.id,X),i.indexOf("event")>-1&&b.click(h,n,u.id)}X.prepFn=function(r,a,s){var c=h._fullLayout.dragmode,p=N.getBoundingClientRect();h._fullLayout._calcInverseTransform(h);var v=h._fullLayout._invTransform;n=h._fullLayout._invScaleX,i=h._fullLayout._invScaleY;var g=l.apply3DTransform(v)(a-p.left,s-p.top);if(j=g[0],U=g[1],P){var x=C.findPolygonOffset(y,O[0],O[1],P);j+=S+x[0],U+=E+x[1]}switch(c){case"zoom":X.clickFn=tl,f||(X.moveFn=P?ta:tn,X.doneFn=to,V=null,H=null,q=u.pathSubplot(),G=!1,Z=o(h._fullLayout[u.id].bgcolor).getLuminance(),(Y=m.makeZoombox(d,Z,A,M,q)).attr("fill-rule","evenodd"),W=m.makeCorners(d,A,M),k(h));break;case"select":case"lasso":w(r,a,s,X,c)}},x.init(X)},U.updateRadialDrag=function(r,n,i){var o=this,f=o.gd,h=o.layers,p=o.radius,d=o.innerRadius,v=o.cx,g=o.cy,y=o.radialAxis,b=L.radialDragBoxSize,_=b/2;if(y.visible){var w,T,A,E=B(o.radialAxisAngle),C=y._rl,O=C[0],P=C[1],I=C[i],D=.75*(C[1]-C[0])/(1-o.getHole(n))/p;i?(w=v+(p+_)*Math.cos(E),T=g-(p+_)*Math.sin(E),A="radialdrag"):(w=v+(d-_)*Math.cos(E),T=g-(d-_)*Math.sin(E),A="radialdrag-inner");var z,R,F,j=m.makeRectDragger(h,A,"crosshair",-_,-_,b,b),U={element:j,gd:f};!1===r.dragmode&&(U.dragmode=!1),q(a.select(j),y.visible&&d<p,{transform:c(w,T)}),U.prepFn=function(){z=null,R=null,F=null,U.moveFn=V,U.doneFn=G,k(f)},U.clampFn=function(r,n){return Math.sqrt(r*r+n*n)<L.MINDRAG&&(r=0,n=0),[r,n]},x.init(U)}function V(r,n){if(z)z(r,n);else{var a=[r,-n],s=[Math.cos(E),Math.sin(E)],u=Math.abs(l.dot(a,s)/Math.sqrt(l.dot(a,a)));isNaN(u)||(z=u<.5?Z:Y)}var c={};null!==R?c[o.id+".radialaxis.angle"]=R:null!==F&&(c[o.id+".radialaxis.range["+i+"]"]=F),f.emit("plotly_relayouting",c)}function G(){null!==R?s.call("_guiRelayout",f,o.id+".radialaxis.angle",R):null!==F&&s.call("_guiRelayout",f,o.id+".radialaxis.range["+i+"]",F)}function Z(r,n){if(0!==i){R=Math.atan2(g-(T+n),w+r-v),o.vangles&&(R=H(R,o.vangles)),R=N(R);var a=c(v,g)+u(-R);h["radial-axis"].attr("transform",a),h["radial-line"].select("line").attr("transform",a);var s=o.gd._fullLayout,l=s[o.id];o.updateRadialAxisTitle(s,l,R)}}function Y(r,n){var a=l.dot([r,-n],[Math.cos(E),Math.sin(E)]);if(F=I-D*a,D>0==(i?F>O:F<P)){var u=f._fullLayout,c=u[o.id];y.range[i]=F,y._rl[i]=F,o.updateRadialAxis(u,c),o.xaxis.setRange(),o.xaxis.setScale(),o.yaxis.setRange(),o.yaxis.setScale();var h=!1;for(var p in o.traceHash){var d=o.traceHash[p],v=l.filterVisible(d);d[0][0].trace._module.plot(f,o,v,c),s.traceIs(p,"gl")&&v.length&&(h=!0)}h&&(M(f),S(f))}else F=null}},U.updateAngularDrag=function(r){var n=this,i=n.gd,o=n.layers,f=n.radius,p=n.angularAxis,d=n.cx,v=n.cy,g=n.cxx,y=n.cyy,b=L.angularDragBoxSize,_=m.makeDragger(o,"path","angulardrag",!1===r.dragmode?"none":"move"),w={element:_,gd:i};function T(r,n){return Math.atan2(y+b-n,r-g-b)}!1===r.dragmode?w.dragmode=!1:a.select(_).attr("d",n.pathAnnulus(f,f+b)).attr("transform",c(d,v)).call(A,"move");var E,C,O,P,I,D,z=o.frontplot.select(".scatterlayer").selectAll(".trace"),R=z.selectAll(".point"),F=z.selectAll(".textpoint");function B(f,m){var x=n.gd._fullLayout,b=x[n.id],_=N(T(E+f*r._invScaleX,C+m*r._invScaleY)-D);if(P=O+_,o.frontplot.attr("transform",c(n.xOffset2,n.yOffset2)+u([-_,g,y])),n.vangles){I=n.radialAxisAngle+_;var w=c(d,v)+u(-_),k=c(d,v)+u(-I);o.bg.attr("transform",w),o["radial-grid"].attr("transform",w),o["radial-axis"].attr("transform",k),o["radial-line"].select("line").attr("transform",k),n.updateRadialAxisTitle(x,b,I)}else n.clipPaths.forTraces.select("path").attr("transform",c(g,y)+u(_));R.each(function(){var r=a.select(this),n=h.getTranslate(r);r.attr("transform",c(n.x,n.y)+u([_]))}),F.each(function(){var r=a.select(this),n=r.select("text"),i=h.getTranslate(r);r.attr("transform",u([_,n.attr("x"),n.attr("y")])+c(i.x,i.y))}),p.rotation=l.modHalf(P,360),n.updateAngularAxis(x,b),n._hasClipOnAxisFalse&&!l.isFullCircle(n.sectorInRad)&&z.call(h.hideOutsideRangePoints,n);var A=!1;for(var L in n.traceHash)if(s.traceIs(L,"gl")){var B=n.traceHash[L],U=l.filterVisible(B);B[0][0].trace._module.plot(i,n,U,b),U.length&&(A=!0)}A&&(M(i),S(i));var V={};j(V),i.emit("plotly_relayouting",V)}function j(r){r[n.id+".angularaxis.rotation"]=P,n.vangles&&(r[n.id+".radialaxis.angle"]=I)}function U(){F.select("text").attr("transform",null);var r={};j(r),s.call("_guiRelayout",i,r)}w.prepFn=function(a,o,s){O=r[n.id].angularaxis.rotation;var u=_.getBoundingClientRect();E=o-u.left,C=s-u.top,i._fullLayout._calcInverseTransform(i);var c=l.apply3DTransform(r._invTransform)(E,C);E=c[0],C=c[1],D=T(E,C),w.moveFn=B,w.doneFn=U,k(i)},n.vangles&&!l.isFullCircle(n.sectorInRad)&&(w.prepFn=l.noop,A(a.select(_),null)),x.init(w)},U.isPtInside=function(r){if(this.isSmith)return!0;var n=this.sectorInRad,i=this.vangles,a=this.angularAxis.c2g(r.theta),o=this.radialAxis,s=o.c2l(r.r),u=o._rl;return(i?C.isPtInsidePolygon:l.isPtInsideSector)(s,a,u,n,i)},U.pathArc=function(r){var n=this.sectorInRad,i=this.vangles;return(i?C.pathPolygon:l.pathArc)(r,n[0],n[1],i)},U.pathSector=function(r){var n=this.sectorInRad,i=this.vangles;return(i?C.pathPolygon:l.pathSector)(r,n[0],n[1],i)},U.pathAnnulus=function(r,n){var i=this.sectorInRad,a=this.vangles;return(a?C.pathPolygonAnnulus:l.pathAnnulus)(r,n,i[0],i[1],a)},U.pathSubplot=function(){var r=this.innerRadius,n=this.radius;return r?this.pathAnnulus(r,n):this.pathSector(n)},U.fillViewInitialKey=function(r,n){r in this.viewInitial||(this.viewInitial[r]=n)}},12101:function(r,n,i){"use strict";var a=i(71828),o=i(21994),s=a.deg2rad,l=a.rad2deg;r.exports=function(r,n,i){switch(o(r,i),r._id){case"x":case"radialaxis":var u;u=n._subplot,r.setGeometry=function(){var n=r._rl[0],i=r._rl[1],a=u.innerRadius,o=(u.radius-a)/(i-n),s=a/o,l=n>i?function(r){return r<=0}:function(r){return r>=0};r.c2g=function(i){var a=r.c2l(i)-n;return(l(a)?a:0)+s},r.g2c=function(i){return r.l2c(i+n-s)},r.g2p=function(r){return r*o},r.c2p=function(n){return r.g2p(r.c2g(n))}};break;case"angularaxis":!function(r,n){var i=r.type;if("linear"===i){var o=r.d2c,u=r.c2d;r.d2c=function(r,n){var i;return i=o(r),"degrees"===n?s(i):i},r.c2d=function(r,n){return u("degrees"===n?l(r):r)}}r.makeCalcdata=function(n,i){var a,o,s=n[i],l=n._length,u=function(i){return r.d2c(i,n.thetaunit)};if(s)for(a=Array(l),o=0;o<l;o++)a[o]=u(s[o]);else{var c=i+"0",f="d"+i,h=c in n?u(n[c]):0,p=n[f]?u(n[f]):(r.period||2*Math.PI)/l;for(a=Array(l),o=0;o<l;o++)a[o]=h+o*p}return a},r.setGeometry=function(){var o,u,c,f,h=n.sector,p=h.map(s),d={clockwise:-1,counterclockwise:1}[r.direction],v=s(r.rotation),g=function(r){return d*r+v},y=function(r){return(r-v)/d};switch(i){case"linear":u=o=a.identity,f=s,c=l,r.range=a.isFullCircle(p)?[h[0],h[0]+360]:p.map(y).map(l);break;case"category":var m=r._categories.length,x=r.period?Math.max(r.period,m):m;0===x&&(x=1),u=f=function(r){return 2*r*Math.PI/x},o=c=function(r){return r*x/Math.PI/2},r.range=[0,x]}r.c2g=function(r){return g(u(r))},r.g2c=function(r){return o(y(r))},r.t2g=function(r){return g(f(r))},r.g2t=function(r){return c(y(r))}}}(r,n)}}},39779:function(r){"use strict";r.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(r){"use strict";function n(r){return r<0?-1:r>0?1:0}function i(r){var n=r[0],i=r[1];if(!isFinite(n)||!isFinite(i))return[1,0];var a=(n+1)*(n+1)+i*i;return[(n*n+i*i-1)/a,2*i/a]}function a(r,n){var i=n[0],a=n[1];return[i*r.radius+r.cx,-a*r.radius+r.cy]}r.exports={smith:i,reactanceArc:function(r,n,o,s){var l=a(r,i([o,n])),u=l[0],c=l[1],f=a(r,i([s,n])),h=f[0],p=f[1];if(0===n)return["M"+u+","+c,"L"+h+","+p].join(" ");var d=1/Math.abs(n)*r.radius;return["M"+u+","+c,"A"+d+","+d+" 0 0,"+(n<0?1:0)+" "+h+","+p].join(" ")},resistanceArc:function(r,o,s,l){var u=1/(o+1)*r.radius,c=a(r,i([o,s])),f=c[0],h=c[1],p=a(r,i([o,l])),d=p[0],v=p[1];if(n(s)!==n(l)){var g=a(r,i([o,0]));return["M"+f+","+h,"A"+u+","+u+" 0 0,"+(0<s?0:1)+" "+g[0]+","+g[1],"A"+u+","+u+" 0 0,"+(l<0?0:1)+d+","+v].join(" ")}return["M"+f+","+h,"A"+u+","+u+" 0 0,"+(l<s?0:1)+" "+d+","+v].join(" ")},smithTransform:a}},7504:function(r,n,i){"use strict";var a=i(27659).AU,o=i(71828).counterRegex,s=i(77997),l=i(39779),u=l.attr,c=l.name,f=o(c),h={};h[u]={valType:"subplotid",dflt:c,editType:"calc"},r.exports={attr:u,name:c,idRoot:c,idRegex:f,attrRegex:f,attributes:h,layoutAttributes:i(33419),supplyLayoutDefaults:i(9558),plot:function(r){for(var n=r._fullLayout,i=r.calcdata,o=n._subplots[c],l=0;l<o.length;l++){var u=o[l],f=a(i,c,u),h=n[u]._subplot;h||(h=s(r,u,!0),n[u]._subplot=h),h.plot(f,n,r._promises)}},clean:function(r,n,i,a){for(var o=a._subplots[c]||[],s=0;s<o.length;s++){var l=o[s],u=a[l]._subplot;if(!n[l]&&u)for(var f in u.framework.remove(),u.clipPaths)u.clipPaths[f].remove()}},toSVG:i(93612).toSVG}},33419:function(r,n,i){"use strict";var a=i(22399),o=i(13838),s=i(27670).Y,l=i(71828).extendFlat,u=i(30962).overrideAll,c=u({color:o.color,showline:l({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:l({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash},"plot","from-root"),f=u({ticklen:o.ticklen,tickwidth:l({},o.tickwidth,{dflt:2}),tickcolor:o.tickcolor,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,tickfont:o.tickfont,tickformat:o.tickformat,hoverformat:o.hoverformat,layer:o.layer},"plot","from-root"),h=l({visible:l({},o.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:l({},o.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},c,f),p=l({visible:l({},o.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:o.ticks,editType:"calc"},c,f);r.exports={domain:s({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:a.background},realaxis:h,imaginaryaxis:p,editType:"calc"}},9558:function(r,n,i){"use strict";var a,o,s,l=i(71828),u=i(7901),c=i(44467),f=i(49119),h=i(27659).NG,p=i(89426),d=i(96115),v=i(92128),g=i(21994),y=i(33419),m=i(39779),x=m.axisNames,b=(a=function(r){return l.isTypedArray(r)&&(r=Array.from(r)),r.slice().reverse().map(function(r){return-r}).concat([0]).concat(r)},o=String,s={},function(r){var n=o?o(r):r;if(n in s)return s[n];var i=a(r);return s[n]=i,i});function _(r,n,i,a){var o=i("bgcolor");a.bgColor=u.combine(o,a.paper_bgcolor);var s,f=h(a.fullData,m.name,a.id),_=a.layoutOut;function w(r,n){return i(s+"."+r,n)}for(var T=0;T<x.length;T++){s=x[T],l.isPlainObject(r[s])||(r[s]={});var k=r[s],A=c.newContainer(n,s);A._id=A._name=s,A._attr=a.id+"."+s,A._traceIndices=f.map(function(r){return r._expandedIndex});var M=w("visible");if(A.type="linear",g(A,_),p(k,A,w,A.type),M){var S,E,L,C,O="realaxis"===s;O&&w("side"),O?w("tickvals"):w("tickvals",b(n.realaxis.tickvals||y.realaxis.tickvals.dflt)),l.isTypedArray(A.tickvals)&&(A.tickvals=Array.from(A.tickvals));var P=a.font||{};M&&(E=(S=w("color"))===k.color?S:P.color,L=P.size,C=P.family),d(k,A,w,A.type,{noTicklabelstep:!0,noAng:!O,noExp:!0,font:{color:E,size:L,family:C}}),l.coerce2(r,n,y,s+".ticklen"),l.coerce2(r,n,y,s+".tickwidth"),l.coerce2(r,n,y,s+".tickcolor",n.color),w("ticks")||(delete n[s].ticklen,delete n[s].tickwidth,delete n[s].tickcolor),v(k,A,w,{dfltColor:S,bgColor:a.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y[s]}),w("layer")}w("hoverformat"),delete A.type,A._input=k}}r.exports=function(r,n,i){f(r,n,i,{noUirevision:!0,type:m.name,attributes:y,handleDefaults:_,font:n.font,paper_bgcolor:n.paper_bgcolor,fullData:i,layoutOut:n})}},49119:function(r,n,i){"use strict";var a=i(71828),o=i(44467),s=i(27670).c;r.exports=function(r,n,i,l){var u,c,f=l.type,h=l.attributes,p=l.handleDefaults,d=l.partition||"x",v=n._subplots[f],g=v.length,y=g&&v[0].replace(/\d+$/,"");function m(r,n){return a.coerce(u,c,h,r,n)}for(var x=0;x<g;x++){var b=v[x];u=r[b]?r[b]:r[b]={},c=o.newContainer(n,b,y),l.noUirevision||m("uirevision",n.uirevision);var _={};_[d]=[x/g,(x+1)/g],s(c,n,m,_),l.id=b,p(u,c,m,l)}}},5386:function(r,n,i){"use strict";var a=i(31562);function o(r){var n=r.description?" "+r.description:"",i=r.keys||[];if(i.length>0){for(var a=[],o=0;o<i.length;o++)a[o]="`"+i[o]+"`";n+="Finally, the template string has access to ",n=1===i.length?n+"variable "+a[0]:n+"variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return n}a.FORMAT_LINK,a.DATE_FORMAT_LINK,n.fF=function(r,n){r=r||{},o(n=n||{});var i={valType:"string",dflt:"",editType:r.editType||"none"};return!1!==r.arrayOk&&(i.arrayOk=!0),i},n.si=function(r,n){r=r||{},o(n=n||{});var i={valType:"string",dflt:"",editType:r.editType||"calc"};return!1!==r.arrayOk&&(i.arrayOk=!0),i},n.R=function(r,n){return n=n||{},(r=r||{}).newshape,o(n),{valType:"string",dflt:"",editType:r.editType||"arraydraw"}}},61639:function(r,n,i){"use strict";var a=i(64380),o=i(27659).AU,s=i(71828).counterRegex,l="ternary";n.name=l;var u=n.attr="subplot";n.idRoot=l,n.idRegex=n.attrRegex=s(l),(n.attributes={})[u]={valType:"subplotid",dflt:"ternary",editType:"calc"},n.layoutAttributes=i(81367),n.supplyLayoutDefaults=i(25369),n.plot=function(r){for(var n=r._fullLayout,i=r.calcdata,s=n._subplots[l],u=0;u<s.length;u++){var c=s[u],f=o(i,l,c),h=n[c]._subplot;h||(h=new a({id:c,graphDiv:r,container:n._ternarylayer.node()},n),n[c]._subplot=h),h.plot(f,n,r._promises)}},n.clean=function(r,n,i,a){for(var o=a._subplots[l]||[],s=0;s<o.length;s++){var u=o[s],c=a[u]._subplot;!n[u]&&c&&(c.plotContainer.remove(),c.clipDef.remove(),c.clipDefRelative.remove(),c.layers["a-title"].remove(),c.layers["b-title"].remove(),c.layers["c-title"].remove())}}},81367:function(r,n,i){"use strict";var a=i(22399),o=i(27670).Y,s=i(13838),l=i(30962).overrideAll,u=i(1426).extendFlat,c={title:{text:s.title.text,font:s.title.font},color:s.color,tickmode:s.minor.tickmode,nticks:u({},s.nticks,{dflt:6,min:1}),tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:u({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:u({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth,griddash:s.griddash,layer:s.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},f=r.exports=l({domain:o({name:"ternary"}),bgcolor:{valType:"color",dflt:a.background},sum:{valType:"number",dflt:1,min:0},aaxis:c,baxis:c,caxis:c},"plot","from-root");f.uirevision={valType:"any",editType:"none"},f.aaxis.uirevision=f.baxis.uirevision=f.caxis.uirevision={valType:"any",editType:"none"}},25369:function(r,n,i){"use strict";var a=i(7901),o=i(44467),s=i(71828),l=i(49119),u=i(96115),c=i(89426),f=i(38701),h=i(26218),p=i(92128),d=i(81367),v=["aaxis","baxis","caxis"];function g(r,n,i,l){var g,y,m,x=i("bgcolor"),b=i("sum");l.bgColor=a.combine(x,l.paper_bgcolor);for(var _=0;_<v.length;_++)y=r[g=v[_]]||{},(m=o.newContainer(n,g))._name=g,function(r,n,i,a){var o=d[n._name];function l(i,a){return s.coerce(r,n,o,i,a)}l("uirevision",a.uirevision),n.type="linear";var v=l("color"),g=v!==o.color.dflt?v:i.font.color,y=n._name.charAt(0).toUpperCase(),m="Component "+y,x=l("title.text",m);n._hovertitle=x===m?x:y,s.coerceFont(l,"title.font",{family:i.font.family,size:s.bigFont(i.font.size),color:g}),l("min"),h(r,n,l,"linear"),c(r,n,l,"linear"),u(r,n,l,"linear"),f(r,n,l,{outerTicks:!0}),l("showticklabels")&&(s.coerceFont(l,"tickfont",{family:i.font.family,size:i.font.size,color:g}),l("tickangle"),l("tickformat")),p(r,n,l,{dfltColor:v,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o}),l("hoverformat"),l("layer")}(y,m,l,n);var w=n.aaxis,T=n.baxis,k=n.caxis;w.min+T.min+k.min>=b&&(w.min=0,T.min=0,k.min=0,r.aaxis&&delete r.aaxis.min,r.baxis&&delete r.baxis.min,r.caxis&&delete r.caxis.min)}r.exports=function(r,n,i){l(r,n,i,{type:"ternary",attributes:d,handleDefaults:g,font:n.font,paper_bgcolor:n.paper_bgcolor})}},64380:function(r,n,i){"use strict";var a=i(39898),o=i(84267),s=i(73972),l=i(71828),u=l.strTranslate,c=l._,f=i(7901),h=i(91424),p=i(21994),d=i(1426).extendFlat,v=i(74875),g=i(89298),y=i(28569),m=i(30211),x=i(64505),b=x.freeMode,_=x.rectMode,w=i(92998),T=i(47322).prepSelect,k=i(47322).selectOnClick,A=i(47322).clearOutline,M=i(47322).clearSelectionsCache,S=i(85555);function E(r,n){this.id=r.id,this.graphDiv=r.graphDiv,this.init(n),this.makeFramework(n),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}r.exports=E;var L=E.prototype;L.init=function(r){this.container=r._ternarylayer,this.defs=r._defs,this.layoutId=r._uid,this.traceHash={},this.layers={}},L.plot=function(r,n){var i=n[this.id],a=n._size;this._hasClipOnAxisFalse=!1;for(var o=0;o<r.length;o++)if(!1===r[o][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(i),this.adjustLayout(i,a),v.generalUpdatePerTraceModule(this.graphDiv,this,r,i),this.layers.plotbg.select("path").call(f.fill,i.bgcolor)},L.makeFramework=function(r){var n=this.graphDiv,i=r[this.id],a=this.clipId="clip"+this.layoutId+this.id,o=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=l.ensureSingleById(r._clips,"clipPath",a,function(r){r.append("path").attr("d","M0,0Z")}),this.clipDefRelative=l.ensureSingleById(r._clips,"clipPath",o,function(r){r.append("path").attr("d","M0,0Z")}),this.plotContainer=l.ensureSingle(this.container,"g",this.id),this.updateLayers(i),h.setClipUrl(this.layers.backplot,a,n),h.setClipUrl(this.layers.grids,a,n)},L.updateLayers=function(r){var n=this.layers,i=["draglayer","plotbg","backplot","grids"];"below traces"===r.aaxis.layer&&i.push("aaxis","aline"),"below traces"===r.baxis.layer&&i.push("baxis","bline"),"below traces"===r.caxis.layer&&i.push("caxis","cline"),i.push("frontplot"),"above traces"===r.aaxis.layer&&i.push("aaxis","aline"),"above traces"===r.baxis.layer&&i.push("baxis","bline"),"above traces"===r.caxis.layer&&i.push("caxis","cline");var o=this.plotContainer.selectAll("g.toplevel").data(i,String),s=["agrid","bgrid","cgrid"];o.enter().append("g").attr("class",function(r){return"toplevel "+r}).each(function(r){var i=a.select(this);n[r]=i,"frontplot"===r?i.append("g").classed("scatterlayer",!0):"backplot"===r?i.append("g").classed("maplayer",!0):"plotbg"===r?i.append("path").attr("d","M0,0Z"):"aline"===r||"bline"===r||"cline"===r?i.append("path"):"grids"===r&&s.forEach(function(r){n[r]=i.append("g").classed("grid "+r,!0)})}),o.order()};var C=Math.sqrt(4/3);L.adjustLayout=function(r,n){var i,a,o,s,l,c,v=this,g=r.domain,y=(g.x[0]+g.x[1])/2,m=(g.y[0]+g.y[1])/2,x=g.x[1]-g.x[0],b=g.y[1]-g.y[0],_=x*n.w,w=b*n.h,T=r.sum,k=r.aaxis.min,A=r.baxis.min,M=r.caxis.min;_>C*w?o=(s=w)*C:s=(o=_)/C,l=x*o/_,c=b*s/w,i=n.l+n.w*y-o/2,a=n.t+n.h*(1-m)-s/2,v.x0=i,v.y0=a,v.w=o,v.h=s,v.sum=T,v.xaxis={type:"linear",range:[k+2*M-T,T-k-2*A],domain:[y-l/2,y+l/2],_id:"x"},p(v.xaxis,v.graphDiv._fullLayout),v.xaxis.setScale(),v.xaxis.isPtWithinRange=function(r){return r.a>=v.aaxis.range[0]&&r.a<=v.aaxis.range[1]&&r.b>=v.baxis.range[1]&&r.b<=v.baxis.range[0]&&r.c>=v.caxis.range[1]&&r.c<=v.caxis.range[0]},v.yaxis={type:"linear",range:[k,T-A-M],domain:[m-c/2,m+c/2],_id:"y"},p(v.yaxis,v.graphDiv._fullLayout),v.yaxis.setScale(),v.yaxis.isPtWithinRange=function(){return!0};var S=v.yaxis.domain[0],E=v.aaxis=d({},r.aaxis,{range:[k,T-A-M],side:"left",tickangle:(+r.aaxis.tickangle||0)-30,domain:[S,S+c*C],anchor:"free",position:0,_id:"y",_length:o});p(E,v.graphDiv._fullLayout),E.setScale();var L=v.baxis=d({},r.baxis,{range:[T-k-M,A],side:"bottom",domain:v.xaxis.domain,anchor:"free",position:0,_id:"x",_length:o});p(L,v.graphDiv._fullLayout),L.setScale();var O=v.caxis=d({},r.caxis,{range:[T-k-A,M],side:"right",tickangle:(+r.caxis.tickangle||0)+30,domain:[S,S+c*C],anchor:"free",position:0,_id:"y",_length:o});p(O,v.graphDiv._fullLayout),O.setScale();var P="M"+i+","+(a+s)+"h"+o+"l-"+o/2+",-"+s+"Z";v.clipDef.select("path").attr("d",P),v.layers.plotbg.select("path").attr("d",P);var I="M0,"+s+"h"+o+"l-"+o/2+",-"+s+"Z";v.clipDefRelative.select("path").attr("d",I);var D=u(i,a);v.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",D),v.clipDefRelative.select("path").attr("transform",null);var z=u(i-L._offset,a+s);v.layers.baxis.attr("transform",z),v.layers.bgrid.attr("transform",z);var R=u(i+o/2,a)+"rotate(30)"+u(0,-E._offset);v.layers.aaxis.attr("transform",R),v.layers.agrid.attr("transform",R);var F=u(i+o/2,a)+"rotate(-30)"+u(0,-O._offset);v.layers.caxis.attr("transform",F),v.layers.cgrid.attr("transform",F),v.drawAxes(!0),v.layers.aline.select("path").attr("d",E.showline?"M"+i+","+(a+s)+"l"+o/2+",-"+s:"M0,0").call(f.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px"),v.layers.bline.select("path").attr("d",L.showline?"M"+i+","+(a+s)+"h"+o:"M0,0").call(f.stroke,L.linecolor||"#000").style("stroke-width",(L.linewidth||0)+"px"),v.layers.cline.select("path").attr("d",O.showline?"M"+(i+o/2)+","+a+"l"+o/2+","+s:"M0,0").call(f.stroke,O.linecolor||"#000").style("stroke-width",(O.linewidth||0)+"px"),v.graphDiv._context.staticPlot||v.initInteractions(),h.setClipUrl(v.layers.frontplot,v._hasClipOnAxisFalse?null:v.clipId,v.graphDiv)},L.drawAxes=function(r){var n=this.graphDiv,i=this.id.substr(7)+"title",a=this.layers,o=this.aaxis,s=this.baxis,l=this.caxis;if(this.drawAx(o),this.drawAx(s),this.drawAx(l),r){var u=Math.max(o.showticklabels?o.tickfont.size/2:0,(l.showticklabels?.75*l.tickfont.size:0)+("outside"===l.ticks?.87*l.ticklen:0)),f=(s.showticklabels?s.tickfont.size:0)+("outside"===s.ticks?s.ticklen:0)+3;a["a-title"]=w.draw(n,"a"+i,{propContainer:o,propName:this.id+".aaxis.title",placeholder:c(n,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-o.title.font.size/3-u,"text-anchor":"middle"}}),a["b-title"]=w.draw(n,"b"+i,{propContainer:s,propName:this.id+".baxis.title",placeholder:c(n,"Click to enter Component B title"),attributes:{x:this.x0-f,y:this.y0+this.h+.83*s.title.font.size+f,"text-anchor":"middle"}}),a["c-title"]=w.draw(n,"c"+i,{propContainer:l,propName:this.id+".caxis.title",placeholder:c(n,"Click to enter Component C title"),attributes:{x:this.x0+this.w+f,y:this.y0+this.h+.83*l.title.font.size+f,"text-anchor":"middle"}})}},L.drawAx=function(r){var n=this.graphDiv,i=r._name,a=i.charAt(0),o=r._id,s=this.layers[i],u=a+"tickLayout",c=r.ticks+String(r.ticklen)+String(r.showticklabels);this[u]!==c&&(s.selectAll("."+o+"tick").remove(),this[u]=c),r.setScale();var f=g.calcTicks(r),h=g.clipEnds(r,f),p=g.makeTransTickFn(r),d=g.getTickSigns(r)[2],v=l.deg2rad(30),y=d*(r.linewidth||1)/2,m=d*r.ticklen,x=this.w,b=this.h,_="b"===a?"M0,"+y+"l"+Math.sin(v)*m+","+Math.cos(v)*m:"M"+y+",0l"+Math.cos(v)*m+","+-Math.sin(v)*m;g.drawTicks(n,r,{vals:"inside"===r.ticks?h:f,layer:s,path:_,transFn:p,crisp:!1}),g.drawGrid(n,r,{vals:h,layer:this.layers[a+"grid"],path:{a:"M0,0l"+b+",-"+x/2,b:"M0,0l-"+x/2+",-"+b,c:"M0,0l-"+b+","+x/2}[a],transFn:p,crisp:!1}),g.drawLabels(n,r,{vals:f,layer:s,transFn:p,labelFns:g.makeLabelFns(r,0,30)})};var O=S.MINZOOM/2+.87,P="m-0.87,.5h"+O+"v3h-"+(O+5.2)+"l"+(O/2+2.6)+",-"+(.87*O+4.5)+"l2.6,1.5l-"+O/2+","+.87*O+"Z",I="m0.87,.5h-"+O+"v3h"+(O+5.2)+"l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-2.6,1.5l"+O/2+","+.87*O+"Z",D="m0,1l"+O/2+","+.87*O+"l2.6,-1.5l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-"+(O/2+2.6)+","+(.87*O+4.5)+"l2.6,1.5l"+O/2+",-"+.87*O+"Z",z=!0;function R(r){a.select(r).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}L.clearOutline=function(){M(this.dragOptions),A(this.dragOptions.gd)},L.initInteractions=function(){var r,n,i,a,p,d,v,g,x,w,A,M,E=this,L=E.layers.plotbg.select("path").node(),O=E.graphDiv,F=O._fullLayout._zoomlayer;function B(r){var n={};return n[E.id+".aaxis.min"]=r.a,n[E.id+".baxis.min"]=r.b,n[E.id+".caxis.min"]=r.c,n}function N(r,n){var i=O._fullLayout.clickmode;R(O),2===r&&(O.emit("plotly_doubleclick",null),s.call("_guiRelayout",O,B({a:0,b:0,c:0}))),i.indexOf("select")>-1&&1===r&&k(n,O,[E.xaxis],[E.yaxis],E.id,E.dragOptions),i.indexOf("event")>-1&&m.click(O,n,E.id)}function j(r,n){return 1-(r+(E.h-n)/Math.sqrt(3))/E.w}function U(r,n){return(r-(E.h-n)/Math.sqrt(3))/E.w}function V(o,s){var l=i+o*r,u=a+s*n,c=Math.max(0,Math.min(1,1-a/E.h,1-u/E.h)),f=Math.max(0,Math.min(1,j(i,a),j(l,u))),h=Math.max(0,Math.min(1,U(i,a),U(l,u))),y=(c/2+h)*E.w,m=(1-c/2-f)*E.w,b=(y+m)/2,_=m-y,T=(1-c)*E.h,k=T-_/C;_<S.MINZOOM?(v=p,A.attr("d",x),M.attr("d","M0,0Z")):(v={a:p.a+c*d,b:p.b+f*d,c:p.c+h*d},A.attr("d",x+"M"+y+","+T+"H"+m+"L"+b+","+k+"L"+y+","+T+"Z"),M.attr("d","M"+i+","+a+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+y+","+T+P+"M"+m+","+T+I+"M"+b+","+k+D)),w||(A.transition().style("fill",g>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),M.transition().style("opacity",1).duration(200),w=!0),O.emit("plotly_relayouting",B(v))}function H(){R(O),v!==p&&(s.call("_guiRelayout",O,B(v)),z&&O.data&&O._context.showTips&&(l.notifier(c(O,"Double-click to zoom back out"),"long"),z=!1))}function q(r,n){var i=r/E.xaxis._m,a=n/E.yaxis._m,o=[(v={a:p.a-a,b:p.b+(i+a)/2,c:p.c-(i-a)/2}).a,v.b,v.c].sort(l.sorterAsc),s=o.indexOf(v.a),c=o.indexOf(v.b),f=o.indexOf(v.c);o[0]<0&&(o[1]+o[0]/2<0?(o[2]+=o[0]+o[1],o[0]=o[1]=0):(o[2]+=o[0]/2,o[1]+=o[0]/2,o[0]=0),v={a:o[s],b:o[c],c:o[f]},n=(p.a-v.a)*E.yaxis._m,r=(p.c-v.c-p.b+v.b)*E.xaxis._m);var d=u(E.x0+r,E.y0+n);E.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",d);var g=u(-r,-n);E.clipDefRelative.select("path").attr("transform",g),E.aaxis.range=[v.a,E.sum-v.b-v.c],E.baxis.range=[E.sum-v.a-v.c,v.b],E.caxis.range=[E.sum-v.a-v.b,v.c],E.drawAxes(!1),E._hasClipOnAxisFalse&&E.plotContainer.select(".scatterlayer").selectAll(".trace").call(h.hideOutsideRangePoints,E),O.emit("plotly_relayouting",B(v))}function G(){s.call("_guiRelayout",O,B(v))}this.dragOptions={element:L,gd:O,plotinfo:{id:E.id,domain:O._fullLayout[E.id].domain,xaxis:E.xaxis,yaxis:E.yaxis},subplot:E.id,prepFn:function(s,c,h){E.dragOptions.xaxes=[E.xaxis],E.dragOptions.yaxes=[E.yaxis],r=O._fullLayout._invScaleX,n=O._fullLayout._invScaleY;var y,m,k,S=E.dragOptions.dragmode=O._fullLayout.dragmode;b(S)?E.dragOptions.minDrag=1:E.dragOptions.minDrag=void 0,"zoom"===S?(E.dragOptions.moveFn=V,E.dragOptions.clickFn=N,E.dragOptions.doneFn=H,i=c-(y=L.getBoundingClientRect()).left,a=h-y.top,O._fullLayout._calcInverseTransform(O),m=O._fullLayout._invTransform,i=(k=l.apply3DTransform(m)(i,a))[0],a=k[1],v=p={a:E.aaxis.range[0],b:E.baxis.range[1],c:E.caxis.range[1]},d=E.aaxis.range[1]-p.a,g=o(E.graphDiv._fullLayout[E.id].bgcolor).getLuminance(),x="M0,"+E.h+"L"+E.w/2+", 0L"+E.w+","+E.h+"Z",w=!1,A=F.append("path").attr("class","zoombox").attr("transform",u(E.x0,E.y0)).style({fill:g>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",x),M=F.append("path").attr("class","zoombox-corners").attr("transform",u(E.x0,E.y0)).style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),E.clearOutline(O)):"pan"===S?(E.dragOptions.moveFn=q,E.dragOptions.clickFn=N,E.dragOptions.doneFn=G,v=p={a:E.aaxis.range[0],b:E.baxis.range[1],c:E.caxis.range[1]},E.clearOutline(O)):(_(S)||b(S))&&T(s,c,h,E.dragOptions,S)}},L.onmousemove=function(r){m.hover(O,r,E.id),O._fullLayout._lasthover=L,O._fullLayout._hoversubplot=E.id},L.onmouseout=function(r){O._dragging||y.unhover(O,r)},y.init(this.dragOptions)}},73972:function(r,n,i){"use strict";var a=i(47769),o=i(64213),s=i(75138),l=i(41965),u=i(24401).addStyleRule,c=i(1426),f=i(9012),h=i(10820),p=c.extendFlat,d=c.extendDeepAll;function v(r){if(r.layoutAttributes){var i=r.layoutAttributes._arrayAttrRegexps;if(i)for(var a=0;a<i.length;a++)s(n.layoutArrayRegexes,i[a])}}function g(r,i){var a=n.componentsRegistry[r].schema;if(a&&a.traces){var o=a.traces[i];o&&d(n.modules[i]._module.attributes,o)}}function y(r,i){var a=n.componentsRegistry[r].schema;if(a&&a.transforms){var o=a.transforms[i];o&&d(n.transformsRegistry[i].attributes,o)}}function m(r,i){var a=n.componentsRegistry[r].schema;if(a&&a.subplots){var o=n.subplotsRegistry[i],s=o.layoutAttributes,l="subplot"===o.attr?o.name:o.attr;Array.isArray(l)&&(l=l[0]);var u=a.subplots[l];s&&u&&d(s,u)}}function x(r){return"object"==typeof r&&(r=r.type),r}n.modules={},n.allCategories={},n.allTypes=[],n.subplotsRegistry={},n.transformsRegistry={},n.componentsRegistry={},n.layoutArrayContainers=[],n.layoutArrayRegexes=[],n.traceLayoutAttributes={},n.localeRegistry={},n.apiMethodRegistry={},n.collectableSubplotTypes=null,n.register=function(r){if(n.collectableSubplotTypes=null,!r)throw Error("No argument passed to Plotly.register.");r&&!Array.isArray(r)&&(r=[r]);for(var i=0;i<r.length;i++){var o=r[i];if(!o)throw Error("Invalid module was attempted to be registered!");switch(o.moduleType){case"trace":(function(r){var i=r.name,o=r.categories,s=r.meta;if(n.modules[i])a.log("Type "+i+" already registered");else{n.subplotsRegistry[r.basePlotModule.name]||function(r){var i=r.name;if(n.subplotsRegistry[i])a.log("Plot type "+i+" already registered.");else for(var o in v(r),n.subplotsRegistry[i]=r,n.componentsRegistry)m(o,r.name)}(r.basePlotModule);for(var l={},c=0;c<o.length;c++)l[o[c]]=!0,n.allCategories[o[c]]=!0;for(var f in n.modules[i]={_module:r,categories:l},s&&Object.keys(s).length&&(n.modules[i].meta=s),n.allTypes.push(i),n.componentsRegistry)g(f,i);r.layoutAttributes&&p(n.traceLayoutAttributes,r.layoutAttributes);var h=r.basePlotModule,d=h.name;if("mapbox"===d){var y=h.constants.styleRules;for(var x in y)u(".js-plotly-plot .plotly .mapboxgl-"+x,y[x])}"geo"!==d&&"mapbox"!==d||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}})(o);break;case"transform":(function(r){if("string"!=typeof r.name)throw Error("Transform module *name* must be a string.");var i="Transform module "+r.name,o="function"==typeof r.transform,s="function"==typeof r.calcTransform;if(!o&&!s)throw Error(i+" is missing a *transform* or *calcTransform* method.");for(var u in o&&s&&a.log([i+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),l(r.attributes)||a.log(i+" registered without an *attributes* object."),"function"!=typeof r.supplyDefaults&&a.log(i+" registered without a *supplyDefaults* method."),n.transformsRegistry[r.name]=r,n.componentsRegistry)y(u,r.name)})(o);break;case"component":(function(r){if("string"!=typeof r.name)throw Error("Component module *name* must be a string.");var i=r.name;for(var a in n.componentsRegistry[i]=r,r.layoutAttributes&&(r.layoutAttributes._isLinkedToArray&&s(n.layoutArrayContainers,i),v(r)),n.modules)g(i,a);for(var o in n.subplotsRegistry)m(i,o);for(var l in n.transformsRegistry)y(i,l);r.schema&&r.schema.layout&&d(h,r.schema.layout)})(o);break;case"locale":(function(r){var i=r.name,a=i.split("-")[0],o=r.dictionary,s=r.format,l=o&&Object.keys(o).length,u=s&&Object.keys(s).length,c=n.localeRegistry,f=c[i];if(f||(c[i]=f={}),a!==i){var h=c[a];h||(c[a]=h={}),l&&h.dictionary===f.dictionary&&(h.dictionary=o),u&&h.format===f.format&&(h.format=s)}l&&(f.dictionary=o),u&&(f.format=s)})(o);break;case"apiMethod":var c=o.name;n.apiMethodRegistry[c]=o.fn;break;default:throw Error("Invalid module was attempted to be registered!")}}},n.getModule=function(r){var i=n.modules[x(r)];return!!i&&i._module},n.traceIs=function(r,i){if("various"===(r=x(r)))return!1;var o=n.modules[r];return o||(r&&a.log("Unrecognized trace type "+r+"."),o=n.modules[f.type.dflt]),!!o.categories[i]},n.getTransformIndices=function(r,n){for(var i=[],a=r.transforms||[],o=0;o<a.length;o++)a[o].type===n&&i.push(o);return i},n.hasTransform=function(r,n){for(var i=r.transforms||[],a=0;a<i.length;a++)if(i[a].type===n)return!0;return!1},n.getComponentMethod=function(r,i){var a=n.componentsRegistry[r];return a&&a[i]||o},n.call=function(){var r=arguments[0],i=[].slice.call(arguments,1);return n.apiMethodRegistry[r].apply(null,i)}},61914:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=o.extendFlat,l=o.extendDeep;function u(r){var n;switch(r){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}r.exports=function(r,n){var i,o=r.data,c=r.layout,f=l([],o),h=l({},c,u(n.tileClass)),p=r._context||{};if(n.width&&(h.width=n.width),n.height&&(h.height=n.height),"thumbnail"===n.tileClass||"themes__thumb"===n.tileClass){h.annotations=[];var d=Object.keys(h);for(i=0;i<d.length;i++)["xaxis","yaxis","zaxis"].indexOf(d[i].slice(0,5))>-1&&(h[d[i]].title={text:""});for(i=0;i<f.length;i++){var v=f[i];v.showscale=!1,v.marker&&(v.marker.showscale=!1),a.traceIs(v,"pie-like")&&(v.textposition="none")}}if(Array.isArray(n.annotations))for(i=0;i<n.annotations.length;i++)h.annotations.push(n.annotations[i]);var g=Object.keys(h).filter(function(r){return r.match(/^scene\d*$/)});if(g.length){var y={};for("thumbnail"===n.tileClass&&(y={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<g.length;i++){var m=h[g[i]];m.xaxis||(m.xaxis={}),m.yaxis||(m.yaxis={}),m.zaxis||(m.zaxis={}),s(m.xaxis,y),s(m.yaxis,y),s(m.zaxis,y),m._scene=null}}var x=document.createElement("div");n.tileClass&&(x.className=n.tileClass);var b={gd:x,td:x,layout:h,data:f,config:{staticPlot:void 0===n.staticPlot||n.staticPlot,plotGlPixelRatio:void 0===n.plotGlPixelRatio?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return"transparent"!==n.setBackground&&(b.config.setBackground=n.setBackground||"opaque"),b.gd.defaultLayout=u(n.tileClass),b}},7239:function(r,n,i){"use strict";var a=i(71828),o=i(403),s=i(22435),l=i(25095);r.exports=function(r,n){var i;return a.isPlainObject(r)||(i=a.getGraphDiv(r)),(n=n||{}).format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(u,c){i&&i._snapshotInProgress&&c(Error("Snapshotting already in progress.")),a.isIE()&&"svg"!==n.format&&c(Error(l.MSG_IE_BAD_FORMAT)),i&&(i._snapshotInProgress=!0);var f=o(r,n),h=n.filename||r.fn||"newplot";h+="."+n.format.replace("-","."),f.then(function(r){return i&&(i._snapshotInProgress=!1),s(r,h,n.format)}).then(function(r){u(r)}).catch(function(r){i&&(i._snapshotInProgress=!1),c(r)})})}},22435:function(r,n,i){"use strict";var a=i(71828),o=i(25095);r.exports=function(r,n,i){var s=document.createElement("a"),l="download"in s;return new Promise(function(u,c){var f,h;if(a.isIE())return f=o.createBlob(r,"svg"),window.navigator.msSaveBlob(f,n),f=null,u(n);if(l)return f=o.createBlob(r,i),h=o.createObjectURL(f),s.href=h,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),o.revokeObjectURL(h),f=null,u(n);if(a.isSafari()){var p="svg"===i?",":";base64,";return o.octetStream(p+encodeURIComponent(r)),u(n)}c(Error("download error"))})}},25095:function(r,n,i){"use strict";var a=i(73972);n.getDelay=function(r){return r._has&&(r._has("gl3d")||r._has("gl2d")||r._has("mapbox"))?500:0},n.getRedrawFunc=function(r){return function(){a.getComponentMethod("colorbar","draw")(r)}},n.encodeSVG=function(r){return"data:image/svg+xml,"+encodeURIComponent(r)},n.encodeJSON=function(r){return"data:application/json,"+encodeURIComponent(r)};var o=window.URL||window.webkitURL;n.createObjectURL=function(r){return o.createObjectURL(r)},n.revokeObjectURL=function(r){return o.revokeObjectURL(r)},n.createBlob=function(r,n){if("svg"===n)return new window.Blob([r],{type:"image/svg+xml;charset=utf-8"});if("full-json"===n)return new window.Blob([r],{type:"application/json;charset=utf-8"});var i=function(r){for(var n=r.length,i=new ArrayBuffer(n),a=new Uint8Array(i),o=0;o<n;o++)a[o]=r.charCodeAt(o);return i}(window.atob(r));return new window.Blob([i],{type:"image/"+n})},n.octetStream=function(r){document.location.href="data:application/octet-stream"+r},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(r,n,i){"use strict";var a=i(25095),o={getDelay:a.getDelay,getRedrawFunc:a.getRedrawFunc,clone:i(61914),toSVG:i(5900),svgToImg:i(70942),toImage:i(56395),downloadImage:i(7239)};r.exports=o},70942:function(r,n,i){"use strict";var a=i(71828),o=i(15398).EventEmitter,s=i(25095);r.exports=function(r){var n=r.emitter||new o,i=new Promise(function(o,l){var u=window.Image,c=r.svg,f=r.format||"png";if(a.isIE()&&"svg"!==f){var h=Error(s.MSG_IE_BAD_FORMAT);return l(h),r.promise?i:n.emit("error",h)}var p,d,v=r.canvas,g=r.scale||1,y=r.width||300,m=r.height||150,x=g*y,b=g*m,_=v.getContext("2d",{willReadFrequently:!0}),w=new u;"svg"===f||a.isSafari()?d=s.encodeSVG(c):(p=s.createBlob(c,"svg"),d=s.createObjectURL(p)),v.width=x,v.height=b,w.onload=function(){var i;switch(p=null,s.revokeObjectURL(d),"svg"!==f&&_.drawImage(w,0,0,x,b),f){case"jpeg":i=v.toDataURL("image/jpeg");break;case"png":i=v.toDataURL("image/png");break;case"webp":i=v.toDataURL("image/webp");break;case"svg":i=d;break;default:var a="Image format is not jpeg, png, svg or webp.";if(l(Error(a)),!r.promise)return n.emit("error",a)}o(i),r.promise||n.emit("success",i)},w.onerror=function(i){if(p=null,s.revokeObjectURL(d),l(i),!r.promise)return n.emit("error",i)},w.src=d});return r.promise?i:n}},56395:function(r,n,i){"use strict";var a=i(15398).EventEmitter,o=i(73972),s=i(71828),l=i(25095),u=i(61914),c=i(5900),f=i(70942);r.exports=function(r,n){var i=new a,h=u(r,{format:"png"}),p=h.gd;p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var d=l.getRedrawFunc(p);return o.call("_doPlot",p,h.data,h.layout,h.config).then(d).then(function(){setTimeout(function(){var r=c(p),a=document.createElement("canvas");a.id=s.randstr(),(i=f({format:n.format,width:p._fullLayout.width,height:p._fullLayout.height,canvas:a,emitter:i,svg:r})).clean=function(){p&&document.body.removeChild(p)}},l.getDelay(p._fullLayout))}).catch(function(r){i.emit("error",r)}),i}},5900:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(7901),u=i(77922),c=/"/g,f="TOBESTRIPPED",h=RegExp('("'+f+")|("+f+'")',"g");r.exports=function(r,n,i){var p,d,v,g,y=r._fullLayout,m=y._paper,x=y._toppaper,b=y.width,_=y.height;m.insert("rect",":first-child").call(s.setRect,0,0,b,_).call(l.fill,y.paper_bgcolor);var w=y._basePlotModules||[];for(g=0;g<w.length;g++){var T=w[g];T.toSVG&&T.toSVG(r)}if(x){var k=x.node().childNodes,A=Array.prototype.slice.call(k);for(g=0;g<A.length;g++){var M=A[g];M.childNodes.length&&m.node().appendChild(M)}}y._draggers&&y._draggers.remove(),m.node().style.background="",m.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var r=a.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){r.style({visibility:null,display:null});var n=this.style.fontFamily;n&&-1!==n.indexOf('"')&&r.style("font-family",n.replace(c,f))}else r.remove()}),m.selectAll(".gradient_filled,.pattern_filled").each(function(){var r=a.select(this),n=this.style.fill;n&&-1!==n.indexOf("url(")&&r.style("fill",n.replace(c,f));var i=this.style.stroke;i&&-1!==i.indexOf("url(")&&r.style("stroke",i.replace(c,f))}),"pdf"!==n&&"eps"!==n||m.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),m.node().setAttributeNS(u.xmlns,"xmlns",u.svg),m.node().setAttributeNS(u.xmlns,"xmlns:xlink",u.xlink),"svg"===n&&i&&(m.attr("width",i*b),m.attr("height",i*_),m.attr("viewBox","0 0 "+b+" "+_));var S=(new window.XMLSerializer).serializeToString(m.node());return S=(S=(p=S,d=a.select("body").append("div").style({display:"none"}).html(""),v=p.replace(/(&[^;]*;)/gi,function(r){return"&lt;"===r?"&#60;":"&rt;"===r?"&#62;":-1!==r.indexOf("<")||-1!==r.indexOf(">")?"":d.html(r).text()}),d.remove(),S=v).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(h,"'"),o.isIE()&&(S=(S=(S=S.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),S}},75341:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;a.mergeArray(n.text,r,"tx"),a.mergeArray(n.hovertext,r,"htx");var o=n.marker;if(o){a.mergeArray(o.opacity,r,"mo",!0),a.mergeArray(o.color,r,"mc");var s=o.line;s&&(a.mergeArray(s.color,r,"mlc"),a.mergeArrayCastPositive(s.width,r,"mlw"))}}},1486:function(r,n,i){"use strict";var a=i(82196),o=i(12663).axisHoverFormat,s=i(5386).fF,l=i(5386).si,u=i(50693),c=i(41940),f=i(97313),h=i(79952).u,p=i(1426).extendFlat,d=c({editType:"calc",arrayOk:!0,colorEditType:"style"}),v=p({},a.marker.line.width,{dflt:0}),g=p({width:v,editType:"calc"},u("marker.line")),y=p({line:g,editType:"calc"},u("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:h});r.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),text:a.text,texttemplate:l({editType:"plot"},{keys:f.eventDataKeys}),hovertext:a.hovertext,hovertemplate:s({},{keys:f.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:p({},d,{}),insidetextfont:p({},d,{}),outsidetextfont:p({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:p({},a.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:y,offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(r,n,i){"use strict";var a=i(89298),o=i(42973),s=i(52075).hasColorscale,l=i(78803),u=i(75341),c=i(66279);r.exports=function(r,n){var i,f,h,p,d,v,g=a.getFromId(r,n.xaxis||"x"),y=a.getFromId(r,n.yaxis||"y"),m={msUTC:!(!n.base&&0!==n.base)};"h"===n.orientation?(i=g.makeCalcdata(n,"x",m),h=y.makeCalcdata(n,"y"),p=o(n,y,"y",h),d=!!n.yperiodalignment,v="y"):(i=y.makeCalcdata(n,"y",m),h=g.makeCalcdata(n,"x"),p=o(n,g,"x",h),d=!!n.xperiodalignment,v="x"),f=p.vals;for(var x=Math.min(f.length,i.length),b=Array(x),_=0;_<x;_++)b[_]={p:f[_],s:i[_]},d&&(b[_].orig_p=h[_],b[_][v+"End"]=p.ends[_],b[_][v+"Start"]=p.starts[_]),n.ids&&(b[_].id=String(n.ids[_]));return s(n,"marker")&&l(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),s(n,"marker.line")&&l(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),u(b,n),c(b,n),b}},97313:function(r){"use strict";r.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(r,n,i){"use strict";var a=i(92770),o=i(71828).isArrayOrTypedArray,s=i(50606).BADNUM,l=i(73972),u=i(89298),c=i(99082).getAxisGroup,f=i(61546);function h(r,n,i,l,h){if(l.length){var w,T,k,A,M;switch(function(r,n){var i,s;for(i=0;i<n.length;i++){var l,u=n[i],c=u[0].trace,f="funnel"===c.type?c._base:c.base,h="h"===c.orientation?c.xcalendar:c.ycalendar,p="category"===r.type||"multicategory"===r.type?function(){return null}:r.d2c;if(o(f)){for(s=0;s<Math.min(f.length,u.length);s++)a(l=p(f[s],0,h))?(u[s].b=+l,u[s].hasB=1):u[s].b=0;for(;s<u.length;s++)u[s].b=0}else{var d=a(l=p(f,0,h));for(l=d?l:0,s=0;s<u.length;s++)u[s].b=l,d&&(u[s].hasB=1)}}}(i,l),h.mode){case"overlay":p(n,i,l,h);break;case"group":for(w=[],T=[],k=0;k<l.length;k++)void 0===(A=l[k])[0].trace.offset?T.push(A):w.push(A);T.length&&(M=new f(T,{posAxis:n,sepNegVal:!1,overlapNoMerge:!h.norm}),function(r,n,i,a){for(var o=r._fullLayout,s=i.positions,l=i.distinctPositions,u=i.minDiff,f=i.traces,h=f.length,p=s.length!==l.length,d=u*(1-a.gap),m=c(o,n._id)+f[0][0].trace.orientation,x=o._alignmentOpts[m]||{},b=0;b<h;b++){var _,w,T=f[b],k=T[0].trace,A=Object.keys((x[k.alignmentgroup]||{}).offsetGroups||{}).length,M=(_=A?d/A:p?d/h:d)*(1-(a.groupgap||0));w=A?((2*k._offsetIndex+1-A)*_-M)/2:p?((2*b+1-h)*_-M)/2:-M/2;var S=T[0].t;S.barwidth=M,S.poffset=w,S.bargroupwidth=d,S.bardelta=u}i.binWidth=f[0][0].t.barwidth/100,v(i),g(n,i),y(n,i,p)}(r,n,M,h),function(r,n){for(var i=r.traces,a=0;a<i.length;a++){var o=i[a];if(void 0===o[0].trace.base)for(var l=new f([o],{posAxis:n,sepNegVal:!0,overlapNoMerge:!0}),u=0;u<o.length;u++){var c=o[u];if(c.p!==s){var h=l.put(c.p,c.b+c.s);h&&(c.b=h)}}}}(M,n),h.norm?(x(M),b(i,M,h)):m(i,M)),w.length&&p(n,i,w,h);break;case"stack":case"relative":for(w=[],T=[],k=0;k<l.length;k++)void 0===(A=l[k])[0].trace.base?T.push(A):w.push(A);T.length&&function(r,n,i,a,o){var l=new f(a,{posAxis:n,sepNegVal:"relative"===o.mode,overlapNoMerge:!(o.norm||"stack"===o.mode||"relative"===o.mode)});d(n,l,o),function(r,n,i){var a,o,l,c,f,h,p=_(r),d=n.traces;for(c=0;c<d.length;c++)if("funnel"===(o=(a=d[c])[0].trace).type)for(f=0;f<a.length;f++)(h=a[f]).s!==s&&n.put(h.p,-.5*h.s);for(c=0;c<d.length;c++){l="funnel"===(o=(a=d[c])[0].trace).type;var v=[];for(f=0;f<a.length;f++)if((h=a[f]).s!==s){g=l?h.s:h.s+h.b;var g,y=n.put(h.p,g),m=y+g;h.b=y,h[p]=m,i.norm||(v.push(m),h.hasB&&v.push(y))}i.norm||(o._extremes[r._id]=u.findExtremes(r,v,{tozero:!0,padded:!0}))}}(i,l,o);for(var c=0;c<a.length;c++)for(var h=a[c],p=0;p<h.length;p++){var v=h[p];v.s!==s&&v.b+v.s===l.get(v.p,v.s)&&(v._outmost=!0)}o.norm&&b(i,l,o)}(0,n,i,T,h),w.length&&p(n,i,w,h)}!function(r,n){var i,s,l,u=_(n),c={},f=1/0,h=-1/0;for(i=0;i<r.length;i++)for(l=r[i],s=0;s<l.length;s++){var p=l[s].p;a(p)&&(f=Math.min(f,p),h=Math.max(h,p))}var d=1e4/(h-f),v=c.round=function(r){return String(Math.round(d*(r-f)))};for(i=0;i<r.length;i++){(l=r[i])[0].t.extents=c;var g=l[0].t.poffset,y=o(g);for(s=0;s<l.length;s++){var m=l[s],x=m[u]-m.w/2;if(a(x)){var b=m[u]+m.w/2,w=v(m.p);c[w]?c[w]=[Math.min(x,c[w][0]),Math.max(b,c[w][1])]:c[w]=[x,b]}m.p0=m.p+(y?g[s]:g),m.p1=m.p0+m.w,m.s0=m.b,m.s1=m.s0+m.s}}}(l,n)}}function p(r,n,i,a){for(var o=0;o<i.length;o++){var s=new f([i[o]],{posAxis:r,sepNegVal:!1,overlapNoMerge:!a.norm});d(r,s,a),a.norm?(x(s),b(n,s,a)):m(n,s)}}function d(r,n,i){for(var a=n.minDiff,o=n.traces,s=a*(1-i.gap),l=s*(1-(i.groupgap||0)),u=-l/2,c=0;c<o.length;c++){var f=o[c][0].t;f.barwidth=l,f.poffset=u,f.bargroupwidth=s,f.bardelta=a}n.binWidth=o[0][0].t.barwidth/100,v(n),g(r,n),y(r,n)}function v(r){var n,i,s=r.traces;for(n=0;n<s.length;n++){var l,u=s[n],c=u[0],f=c.trace,h=c.t,p=f._offset||f.offset,d=h.poffset;if(o(p)){for(l=Array.prototype.slice.call(p,0,u.length),i=0;i<l.length;i++)a(l[i])||(l[i]=d);for(i=l.length;i<u.length;i++)l.push(d);h.poffset=l}else void 0!==p&&(h.poffset=p);var v=f._width||f.width,g=h.barwidth;if(o(v)){var y=Array.prototype.slice.call(v,0,u.length);for(i=0;i<y.length;i++)a(y[i])||(y[i]=g);for(i=y.length;i<u.length;i++)y.push(g);if(h.barwidth=y,void 0===p){for(l=[],i=0;i<u.length;i++)l.push(d+(g-y[i])/2);h.poffset=l}}else void 0!==v&&(h.barwidth=v,void 0===p&&(h.poffset=d+(g-v)/2))}}function g(r,n){for(var i=n.traces,a=_(r),s=0;s<i.length;s++)for(var l=i[s],u=l[0].t,c=u.poffset,f=o(c),h=u.barwidth,p=o(h),d=0;d<l.length;d++){var v=l[d],g=v.w=p?h[d]:h;void 0===v.p&&(v.p=v[a],v["orig_"+a]=v[a]);var y=(f?c[d]:c)+g/2;v[a]=v.p+y}}function y(r,n,i){var a=n.traces,s=n.minDiff/2;u.minDtick(r,n.minDiff,n.distinctPositions[0],i);for(var l=0;l<a.length;l++){var c,f,h,p,d=a[l],v=d[0],g=v.trace,y=[];for(p=0;p<d.length;p++)f=(c=d[p]).p-s,h=c.p+s,y.push(f,h);if(g.width||g.offset){var m=v.t,x=m.poffset,b=m.barwidth,_=o(x),w=o(b);for(p=0;p<d.length;p++){c=d[p];var T=_?x[p]:x,k=w?b[p]:b;h=(f=c.p+T)+k,y.push(f,h)}}g._extremes[r._id]=u.findExtremes(r,y,{padded:!1})}}function m(r,n){for(var i=n.traces,a=_(r),o=0;o<i.length;o++){for(var s=i[o],l=s[0].trace,c="scatter"===l.type,f="v"===l.orientation,h=[],p=!1,d=0;d<s.length;d++){var v=s[d],g=c?0:v.b,y=c?f?v.y:v.x:g+v.s;v[a]=y,h.push(y),v.hasB&&h.push(g),v.hasB&&v.b||(p=!0)}l._extremes[r._id]=u.findExtremes(r,h,{tozero:p,padded:!0})}}function x(r){for(var n=r.traces,i=0;i<n.length;i++)for(var a=n[i],o=0;o<a.length;o++){var l=a[o];l.s!==s&&r.put(l.p,l.b+l.s)}}function b(r,n,i){var o=n.traces,l=_(r),c="fraction"===i.norm?1:100,f=c/1e9,h=r.l2c(r.c2l(0)),p="stack"===i.mode?c:h;function d(n){return a(r.c2l(n))&&(n<h-f||n>p+f||!a(h))}for(var v=0;v<o.length;v++){for(var g=o[v],y=g[0].trace,m=[],x=!1,b=!1,w=0;w<g.length;w++){var T=g[w];if(T.s!==s){var k=Math.abs(c/n.get(T.p,T.s));T.b*=k,T.s*=k;var A=T.b,M=A+T.s;T[l]=M,m.push(M),b=b||d(M),T.hasB&&(m.push(A),b=b||d(A)),T.hasB&&T.b||(x=!0)}}y._extremes[r._id]=u.findExtremes(r,m,{tozero:x,padded:b})}}function _(r){return r._id.charAt(0)}r.exports={crossTraceCalc:function(r,n){for(var i=n.xaxis,a=n.yaxis,o=r._fullLayout,s=r._fullData,u=r.calcdata,c=[],f=[],p=0;p<s.length;p++){var d=s[p];if(!0===d.visible&&l.traceIs(d,"bar")&&d.xaxis===i._id&&d.yaxis===a._id&&("h"===d.orientation?c.push(u[p]):f.push(u[p]),d._computePh))for(var v=r.calcdata[p],g=0;g<v.length;g++)"function"==typeof v[g].ph0&&(v[g].ph0=v[g].ph0()),"function"==typeof v[g].ph1&&(v[g].ph1=v[g].ph1())}var y={xCat:"category"===i.type||"multicategory"===i.type,yCat:"category"===a.type||"multicategory"===a.type,mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap};h(r,i,a,f,y),h(r,a,i,c,y)},setGroupPositions:h}},90769:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(73972),l=i(67513),u=i(73927),c=i(98340),f=i(26125),h=i(1486),p=a.coerceFont;function d(r,n,i,o,s,l){var u=!1!==(l=l||{}).moduleHasSelected,c=!1!==l.moduleHasUnselected,f=!1!==l.moduleHasConstrain,h=!1!==l.moduleHasCliponaxis,d=!1!==l.moduleHasTextangle,v=!1!==l.moduleHasInsideanchor,g=!!l.hasPathbar,y=Array.isArray(s)||"auto"===s,m=y||"inside"===s,x=y||"outside"===s;if(m||x){var b=p(o,"textfont",i.font),_=a.extendFlat({},b),w=!(r.textfont&&r.textfont.color);if(w&&delete _.color,p(o,"insidetextfont",_),g){var T=a.extendFlat({},b);w&&delete T.color,p(o,"pathbar.textfont",T)}x&&p(o,"outsidetextfont",b),u&&o("selected.textfont.color"),c&&o("unselected.textfont.color"),f&&o("constraintext"),h&&o("cliponaxis"),d&&o("textangle"),o("texttemplate")}m&&v&&o("insidetextanchor")}r.exports={supplyDefaults:function(r,n,i,f){function p(i,o){return a.coerce(r,n,h,i,o)}if(l(r,n,f,p)){u(r,n,f,p),p("xhoverformat"),p("yhoverformat"),p("orientation",n.x&&!n.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var v=p("textposition");d(r,0,f,p,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c(r,n,p,i,f);var g=(n.marker.line||{}).color,y=s.getComponentMethod("errorbars","supplyDefaults");y(r,n,g||o.defaultLine,{axis:"y"}),y(r,n,g||o.defaultLine,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(n,p)}else n.visible=!1},crossTraceDefaults:function(r,n){var i;function o(r){return a.coerce(i._input,i,h,r)}if("group"===n.barmode)for(var s=0;s<r.length;s++)"bar"===(i=r[s]).type&&f(i._input,i,n,o)},handleText:d}},58065:function(r){"use strict";r.exports=function(r,n,i){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),"h"===i.orientation?(r.label=r.y,r.value=r.x):(r.label=r.x,r.value=r.y),r}},69383:function(r,n,i){"use strict";var a=i(92770),o=i(84267),s=i(71828).isArrayOrTypedArray;n.coerceString=function(r,n,i){if("string"==typeof n){if(n||!r.noBlank)return n}else if(("number"==typeof n||!0===n)&&!r.strict)return String(n);return void 0!==i?i:r.dflt},n.coerceNumber=function(r,n,i){if(a(n)){n=+n;var o=r.min,s=r.max;if(!(void 0!==o&&n<o||void 0!==s&&n>s))return n}return void 0!==i?i:r.dflt},n.coerceColor=function(r,n,i){return o(n).isValid()?n:void 0!==i?i:r.dflt},n.coerceEnumerated=function(r,n,i){return r.coerceNumber&&(n=+n),-1!==r.values.indexOf(n)?n:void 0!==i?i:r.dflt},n.getValue=function(r,n){var i;return s(r)?n<r.length&&(i=r[n]):i=r,i},n.getLineWidth=function(r,n){return 0<n.mlw?n.mlw:s(r.marker.line.width)?0:r.marker.line.width}},95423:function(r,n,i){"use strict";var a=i(30211),o=i(73972),s=i(7901),l=i(71828).fillText,u=i(69383).getLineWidth,c=i(89298).hoverLabelText,f=i(50606).BADNUM;function h(r,n,i,o,s){var u,h,p,d,v,g,y,m=r.cd,x=m[0].trace,b=m[0].t,_="closest"===o,w="waterfall"===x.type,T=r.maxHoverDistance,k=r.maxSpikeDistance;"h"===x.orientation?(u=i,h=n,p="y",d="x",v=z,g=I):(u=n,h=i,p="x",d="y",g=z,v=I);var A=x[p+"period"];function M(r){return E(r,-1)}function S(r){return E(r,1)}function E(r,n){var i=r.w;return r[p]+n*i/2}function L(r){return r[p+"End"]-r[p+"Start"]}var C=_?M:A?function(r){return r.p-L(r)/2}:function(r){return Math.min(M(r),r.p-b.bardelta/2)},O=_?S:A?function(r){return r.p+L(r)/2}:function(r){return Math.max(S(r),r.p+b.bardelta/2)};function P(r,n,i){return s.finiteRange&&(i=0),a.inbox(r-u,n-u,i+Math.min(1,Math.abs(n-r)/y)-1)}function I(r){return P(C(r),O(r),T)}function D(r){var n=r[d];if(w){var i=Math.abs(r.rawS)||0;h>0?n+=i:h<0&&(n-=i)}return n}function z(r){var n=h,i=r.b,o=D(r);return a.inbox(i-n,o-n,T+(o-n)/(o-i)-1)}var R=r[p+"a"],F=r[d+"a"];y=Math.abs(R.r2c(R.range[1])-R.r2c(R.range[0]));var B=a.getDistanceFunction(o,v,g,function(r){return(v(r)+g(r))/2});if(a.getClosest(m,B,r),!1!==r.index&&m[r.index].p!==f){_||A||(C=function(r){return Math.min(M(r),r.p-b.bargroupwidth/2)},O=function(r){return Math.max(S(r),r.p+b.bargroupwidth/2)});var N,j,U,V=m[r.index],H=x.base?V.b+V.s:V.s;r[d+"0"]=r[d+"1"]=F.c2p(V[d],!0),r[d+"LabelVal"]=H;var q=b.extents[b.extents.round(V.p)];r[p+"0"]=R.c2p(_?C(V):q[0],!0),r[p+"1"]=R.c2p(_?O(V):q[1],!0);var G=void 0!==V.orig_p;return r[p+"LabelVal"]=G?V.orig_p:V.p,r.labelLabel=c(R,r[p+"LabelVal"],x[p+"hoverformat"]),r.valueLabel=c(F,r[d+"LabelVal"],x[d+"hoverformat"]),r.baseLabel=c(F,V.b,x[d+"hoverformat"]),r.spikeDistance=(N=h,j=V.b,U=D(V),(a.inbox(j-N,U-N,k+(U-N)/(U-j)-1)+P(M(V),S(V),k))/2),r[p+"Spike"]=R.c2p(V.p,!0),l(V,x,r),r.hovertemplate=x.hovertemplate,r}}function p(r,n){var i=n.mcc||r.marker.color,a=n.mlcc||r.marker.line.color,o=u(r,n);return s.opacity(i)?i:s.opacity(a)&&o?a:void 0}r.exports={hoverPoints:function(r,n,i,a,s){var l=h(r,n,i,a,s);if(l){var u=l.cd,c=u[0].trace,f=u[l.index];return l.color=p(c,f),o.getComponentMethod("errorbars","hoverInfo")(f,c,l),[l]}},hoverOnBars:h,getTraceColor:p}},60822:function(r,n,i){"use strict";r.exports={attributes:i(1486),layoutAttributes:i(43641),supplyDefaults:i(90769).supplyDefaults,crossTraceDefaults:i(90769).crossTraceDefaults,supplyLayoutDefaults:i(13957),calc:i(92290),crossTraceCalc:i(11661).crossTraceCalc,colorbar:i(4898),arraysToCalcdata:i(75341),plot:i(17295).plot,style:i(16688).style,styleOnSelect:i(16688).styleOnSelect,hoverPoints:i(95423).hoverPoints,eventData:i(58065),selectPoints:i(81974),moduleType:"trace",name:"bar",basePlotModule:i(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(r){"use strict";r.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(r,n,i){"use strict";var a=i(73972),o=i(89298),s=i(71828),l=i(43641);r.exports=function(r,n,i){function u(i,a){return s.coerce(r,n,l,i,a)}for(var c=!1,f=!1,h=!1,p={},d=u("barmode"),v=0;v<i.length;v++){var g=i[v];if(a.traceIs(g,"bar")&&g.visible){if(c=!0,"group"===d){var y=g.xaxis+g.yaxis;p[y]&&(h=!0),p[y]=!0}g.visible&&"histogram"===g.type&&"category"!==o.getFromId({_fullLayout:n},g["v"===g.orientation?"xaxis":"yaxis"]).type&&(f=!0)}}c?("overlay"!==d&&u("barnorm"),u("bargap",f&&!h?0:.2),u("bargroupgap")):delete n.barmode}},17295:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(71828),l=i(63893),u=i(7901),c=i(91424),f=i(73972),h=i(89298).tickText,p=i(72597),d=p.recordMinTextSize,v=p.clearMinTextSize,g=i(16688),y=i(69383),m=i(97313),x=i(1486),b=x.text,_=x.textposition,w=i(23469).appendArrayPointValue,T=m.TEXTPAD;function k(r){return r.id}function A(r,n,i,a){var o;return!n.uniformtext.mode&&M(i)?(a&&(o=a()),r.transition().duration(i.duration).ease(i.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()})):r}function M(r){return r&&r.duration>0}function S(r){return"auto"===r?0:r}function E(r,n){var i=Math.PI/180*n,a=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i));return{x:r.width*o+r.height*a,y:r.width*a+r.height*o}}function L(r,n,i,a,o,s){var l=!!s.isHorizontal,u=!!s.constrained,c=s.angle||0,f=s.anchor||"end",h="start"===f,p=((s.leftToRight||0)+1)/2,d=1-p,v=o.width,g=o.height,y=Math.abs(n-r),m=Math.abs(a-i),x=y>2*T&&m>2*T?T:0;y-=2*x,m-=2*x;var b=S(c);"auto"!==c||v<=y&&g<=m||!(v>y||g>m)||(v>m||g>y)&&v<g==y<m||(b+=90);var _=E(o,b),w=1;u&&(w=Math.min(1,y/_.x,m/_.y));var k=o.left*d+o.right*p,A=(o.top+o.bottom)/2,M=(r+T)*d+(n-T)*p,L=(i+a)/2,C=0,O=0;if(h||"end"===f){var P=(l?_.x:_.y)/2,I=l?r<n?1:-1:i<a?1:-1;l?h?(M=r+I*x,C=-I*P):(M=n-I*x,C=I*P):h?(L=i+I*x,O=-I*P):(L=a-I*x,O=I*P)}return{textX:k,textY:A,targetX:M,targetY:L,anchorX:C,anchorY:O,scale:w,rotate:b}}r.exports={plot:function(r,n,i,p,m,x){var C=n.xaxis,O=n.yaxis,P=r._fullLayout,I=r._context.staticPlot;m||(m={mode:P.barmode,norm:P.barmode,gap:P.bargap,groupgap:P.bargroupgap},v("bar",P));var D=s.makeTraceGroups(p,i,"trace bars").each(function(i){var f=a.select(this),p=i[0].trace,v="waterfall"===p.type,D="funnel"===p.type,z="bar"===p.type||D,R=0;v&&p.connector.visible&&"between"===p.connector.mode&&(R=p.connector.line.width/2);var F="h"===p.orientation,B=M(m),N=s.ensureSingle(f,"g","points"),j=function(r){if(r.ids)return k}(p),U=N.selectAll("g.point").data(s.identity,j);U.enter().append("g").classed("point",!0),U.exit().remove(),U.each(function(f,v){var k,M,D,N,j,U,V=a.select(this),H=(k=[],M=[],D=F?C:O,N=F?O:C,k[0]=D.c2p(f.s0,!0),M[0]=N.c2p(f.p0,!0),k[1]=D.c2p(f.s1,!0),M[1]=N.c2p(f.p1,!0),F?[k,M]:[M,k]),q=H[0][0],G=H[0][1],Z=H[1][0],Y=H[1][1],W=0==(F?G-q:Y-Z);if(W&&z&&y.getLineWidth(p,f)&&(W=!1),W||(W=!(o(q)&&o(G)&&o(Z)&&o(Y))),f.isBlank=W,W&&(F?G=q:Y=Z),R&&!W&&(F?(q-=(q<G?1:-1)*R,G+=(q<G?1:-1)*R):(Z-=(Z<Y?1:-1)*R,Y+=(Z<Y?1:-1)*R)),"waterfall"===p.type){if(!W){var X=p[f.dir].marker;j=X.line.width,U=X.color}}else j=y.getLineWidth(p,f),U=f.mc||p.marker.color;function J(r){var n=a.round(j/2%1,2);return 0===m.gap&&0===m.groupgap?a.round(Math.round(r)-n,2):r}if(!r._context.staticPlot){var K=1>u.opacity(U)||j>.01?J:function(r,n,i){return i&&r===n?r:Math.abs(r-n)>=2?J(r):r>n?Math.ceil(r):Math.floor(r)};q=K(q,G,F),G=K(G,q,F),Z=K(Z,Y,!F),Y=K(Y,Z,!F)}var $=A(s.ensureSingle(V,"path"),P,m,x);if($.style("vector-effect",I?"none":"non-scaling-stroke").attr("d",isNaN((G-q)*(Y-Z))||W&&r._context.staticPlot?"M0,0Z":"M"+q+","+Z+"V"+Y+"H"+G+"V"+Z+"Z").call(c.setClipUrl,n.layerClipId,r),!P.uniformtext.mode&&B){var Q=c.makePointStyleFns(p);c.singlePointStyle(f,$,p,Q,r)}(function(r,n,i,a,o,u,f,p,v,m,x){var k,M=n.xaxis,C=n.yaxis,O=r._fullLayout;function P(n,i,a){return s.ensureSingle(n,"text").text(i).attr({class:"bartext bartext-"+k,"text-anchor":"middle","data-notex":1}).call(c.font,a).call(l.convertToTspans,r)}var I=a[0].trace,D="h"===I.orientation,z=(N=(j=a[0].trace).texttemplate?function(r,n,i,a,o){var l=n[0].trace,u=s.castOption(l,i,"texttemplate");if(!u)return"";var c,f,p,d,v="histogram"===l.type,g="waterfall"===l.type,y="funnel"===l.type,m="h"===l.orientation;function x(r){return h(d,d.c2l(r),!0).text}m?(c="y",f=o,p="x",d=a):(c="x",f=a,p="y",d=o);var b,_=n[i],T={};T.label=_.p,T.labelLabel=T[c+"Label"]=(b=_.p,h(f,f.c2l(b),!0).text);var k=s.castOption(l,_.i,"text");(0===k||k)&&(T.text=k),T.value=_.s,T.valueLabel=T[p+"Label"]=x(_.s);var A={};w(A,l,_.i),(v||void 0===A.x)&&(A.x=m?T.value:T.label),(v||void 0===A.y)&&(A.y=m?T.label:T.value),(v||void 0===A.xLabel)&&(A.xLabel=m?T.valueLabel:T.labelLabel),(v||void 0===A.yLabel)&&(A.yLabel=m?T.labelLabel:T.valueLabel),g&&(T.delta=+_.rawS||_.s,T.deltaLabel=x(T.delta),T.final=_.v,T.finalLabel=x(T.final),T.initial=T.final-T.delta,T.initialLabel=x(T.initial)),y&&(T.value=_.s,T.valueLabel=x(T.value),T.percentInitial=_.begR,T.percentInitialLabel=s.formatPercent(_.begR),T.percentPrevious=_.difR,T.percentPreviousLabel=s.formatPercent(_.difR),T.percentTotal=_.sumR,T.percenTotalLabel=s.formatPercent(_.sumR));var M=s.castOption(l,_.i,"customdata");return M&&(T.customdata=M),s.texttemplateString(u,T,r._d3locale,A,T,l._meta||{})}(O,a,o,M,C):j.textinfo?function(r,n,i,a){var o=r[0].trace,l="h"===o.orientation,u="waterfall"===o.type,c="funnel"===o.type;function f(r){return h(l?i:a,+r,!0).text}var p,d=o.textinfo,v=r[n],g=d.split("+"),y=[],m=function(r){return -1!==g.indexOf(r)};if(m("label")&&y.push(h(l?a:i,r[n].p,!0).text),m("text")&&(0===(p=s.castOption(o,v.i,"text"))||p)&&y.push(p),u){var x=+v.rawS||v.s,b=v.v;m("initial")&&y.push(f(b-x)),m("delta")&&y.push(f(x)),m("final")&&y.push(f(b))}if(c){m("value")&&y.push(f(v.s));var _=0;m("percent initial")&&_++,m("percent previous")&&_++,m("percent total")&&_++;var w=_>1;m("percent initial")&&(p=s.formatPercent(v.begR),w&&(p+=" of initial"),y.push(p)),m("percent previous")&&(p=s.formatPercent(v.difR),w&&(p+=" of previous"),y.push(p)),m("percent total")&&(p=s.formatPercent(v.sumR),w&&(p+=" of total"),y.push(p))}return y.join("<br>")}(a,o,M,C):y.getValue(j.text,o),y.coerceString(b,N));U=y.getValue(I.textposition,o),k=y.coerceEnumerated(_,U);var R="stack"===m.mode||"relative"===m.mode,F=a[o],B=!R||F._outmost;if(z&&"none"!==k&&(!F.isBlank&&u!==f&&p!==v||"auto"!==k&&"inside"!==k)){var N,j,U,V,H,q,G,Z,Y,W,X,J,K,$,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tu,tc,tf=O.font,th=g.getBarColor(a[o],I),tp=g.getInsideTextFont(I,o,tf,th),td=g.getOutsideTextFont(I,o,tf),tv=i.datum();D?"log"===M.type&&tv.s0<=0&&(u=M.range[0]<M.range[1]?0:M._length):"log"===C.type&&tv.s0<=0&&(p=C.range[0]<C.range[1]?C._length:0);var tg,ty,tm,tx,tb,t_=Math.abs(f-u)-2*T,tw=Math.abs(v-p)-2*T;if("outside"===k&&(B||F.hasB||(k="inside")),"auto"===k&&(B?(k="inside",tg=P(i,z,tb=s.ensureUniformFontSize(r,tp)),tm=(ty=c.bBox(tg.node())).width,tx=ty.height,tm>0&&tx>0&&(tm<=t_&&tx<=tw||tm<=tw&&tx<=t_||(D?t_>=tw/tx*tm:tw>=t_/tm*tx))?k="inside":(k="outside",tg.remove(),tg=null)):k="inside"),!tg){var tT=(tg=P(i,z,tb=s.ensureUniformFontSize(r,"outside"===k?td:tp))).attr("transform");if(tg.attr("transform",""),tm=(ty=c.bBox(tg.node())).width,tx=ty.height,tg.attr("transform",tT),tm<=0||tx<=0)return void tg.remove()}var tk,tA=I.textangle;(tk="outside"===k?(V=u,H=p,q=ty,Y=!!(G={isHorizontal:D,constrained:"both"===I.constraintext||"outside"===I.constraintext,angle:tA}).isHorizontal,W=!!G.constrained,X=G.angle||0,J=q.width,K=q.height,$=Math.abs(f-V),Q=Math.abs(v-H),Z=Y?Q>2*T?T:0:$>2*T?T:0,tt=1,W&&(tt=Y?Math.min(1,Q/K):Math.min(1,$/J)),tr=E(q,te=S(X)),tn=(Y?tr.x:tr.y)/2,ti=(q.left+q.right)/2,ta=(q.top+q.bottom)/2,to=(V+f)/2,ts=(H+v)/2,tl=0,tu=0,tc=Y?f<V?1:-1:H<v?1:-1,Y?(to=f-tc*Z,tl=tc*tn):(ts=v+tc*Z,tu=-tc*tn),{textX:ti,textY:ta,targetX:to,targetY:ts,anchorX:tl,anchorY:tu,scale:tt,rotate:te}):L(u,f,p,v,ty,{isHorizontal:D,constrained:"both"===I.constraintext||"inside"===I.constraintext,angle:tA,anchor:I.insidetextanchor})).fontSize=tb.size,d("histogram"===I.type?"bar":I.type,tk,O),F.transform=tk;var tM=A(tg,O,m,x);s.setTransormAndDisplay(tM,tk)}else i.select("text").remove()})(r,n,V,i,v,q,G,Z,Y,m,x),n.layerClipId&&c.hideOutsideRangePoint(f,V.select("text"),C,O,p.xcalendar,p.ycalendar)});var V=!1===p.cliponaxis;c.setClipUrl(f,V?null:n.layerClipId,r)});f.getComponentMethod("errorbars","plot")(r,D,n,m)},toMoveInsideBar:L}},81974:function(r){"use strict";r.exports=function(r,n){var i,a=r.cd,o=r.xaxis,s=r.yaxis,l=a[0].trace,u="funnel"===l.type,c="h"===l.orientation,f=[];if(!1===n)for(i=0;i<a.length;i++)a[i].selected=0;else for(i=0;i<a.length;i++){var h=a[i],p="ct"in h?h.ct:function(r,n,i,a,o){var s=n.c2p(a?r.s0:r.p0,!0),l=n.c2p(a?r.s1:r.p1,!0),u=i.c2p(a?r.p0:r.s0,!0),c=i.c2p(a?r.p1:r.s1,!0);return o?[(s+l)/2,(u+c)/2]:a?[l,(u+c)/2]:[(s+l)/2,c]}(h,o,s,c,u);n.contains(p,!1,i,r)?(f.push({pointNumber:i,x:o.c2d(h.x),y:s.c2d(h.y)}),h.selected=1):h.selected=0}return f}},61546:function(r,n,i){"use strict";r.exports=o;var a=i(71828).distinctVals;function o(r,n){this.traces=r,this.sepNegVal=n.sepNegVal,this.overlapNoMerge=n.overlapNoMerge;for(var i=1/0,o=n.posAxis._id.charAt(0),s=[],l=0;l<r.length;l++){for(var u=r[l],c=0;c<u.length;c++){var f=u[c],h=f.p;void 0===h&&(h=f[o]),void 0!==h&&s.push(h)}u[0]&&u[0].width1&&(i=Math.min(u[0].width1,i))}this.positions=s;var p=a(s);this.distinctPositions=p.vals,1===p.vals.length&&i!==1/0?this.minDiff=i:this.minDiff=Math.min(p.minDiff,i);var d=(n.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}o.prototype.put=function(r,n){var i=this.getLabel(r,n),a=this.bins[i]||0;return this.bins[i]=a+n,a},o.prototype.get=function(r,n){var i=this.getLabel(r,n);return this.bins[i]||0},o.prototype.getLabel=function(r,n){return(n<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?r:Math.round(r/this.binWidth))}},16688:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(91424),l=i(71828),u=i(73972),c=i(72597).resizeText,f=i(1486),h=f.textfont,p=f.insidetextfont,d=f.outsidetextfont,v=i(69383);function g(r,n,i){s.pointStyle(r.selectAll("path"),n,i),y(r,n,i)}function y(r,n,i){r.selectAll("text").each(function(r){var o=a.select(this),u=l.ensureUniformFontSize(i,m(o,r,n,i));s.font(o,u)})}function m(r,n,i,a){var o=a._fullLayout.font,s=i.textfont;if(r.classed("bartext-inside")){var l=T(n,i);s=b(i,n.i,o,l)}else r.classed("bartext-outside")&&(s=_(i,n.i,o));return s}function x(r,n,i){return w(h,r.textfont,n,i)}function b(r,n,i,a){var s=x(r,n,i);return(void 0===r._input.textfont||void 0===r._input.textfont.color||Array.isArray(r.textfont.color)&&void 0===r.textfont.color[n])&&(s={color:o.contrast(a),family:s.family,size:s.size}),w(p,r.insidetextfont,n,s)}function _(r,n,i){var a=x(r,n,i);return w(d,r.outsidetextfont,n,a)}function w(r,n,i,a){n=n||{};var o=v.getValue(n.family,i),s=v.getValue(n.size,i),l=v.getValue(n.color,i);return{family:v.coerceString(r.family,o,a.family),size:v.coerceNumber(r.size,s,a.size),color:v.coerceColor(r.color,l,a.color)}}function T(r,n){return"waterfall"===n.type?n[r.dir].marker.color:r.mcc||r.mc||n.marker.color}r.exports={style:function(r){var n=a.select(r).selectAll("g.barlayer").selectAll("g.trace");c(r,n,"bar");var i=n.size(),o=r._fullLayout;n.style("opacity",function(r){return r[0].trace.opacity}).each(function(r){("stack"===o.barmode&&i>1||0===o.bargap&&0===o.bargroupgap&&!r[0].trace.marker.line.width)&&a.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(n){g(a.select(this),n[0].trace,r)}),u.getComponentMethod("errorbars","style")(n)},styleTextPoints:y,styleOnSelect:function(r,n,i){var o=n[0].trace;o.selectedpoints?(s.selectedPointStyle(i.selectAll("path"),o),function(r,n,i){r.each(function(r){var o,u=a.select(this);if(r.selected){o=l.ensureUniformFontSize(i,m(u,r,n,i));var c=n.selected.textfont&&n.selected.textfont.color;c&&(o.color=c),s.font(u,o)}else s.selectedTextStyle(u,n)})}(i.selectAll("text"),o,r)):(g(i,o,r),u.getComponentMethod("errorbars","style")(i))},getInsideTextFont:b,getOutsideTextFont:_,getBarColor:T,resizeText:c}},98340:function(r,n,i){"use strict";var a=i(7901),o=i(52075).hasColorscale,s=i(1586),l=i(71828).coercePattern;r.exports=function(r,n,i,u,c){var f=i("marker.color",u),h=o(r,"marker");h&&s(r,n,c,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",a.defaultLine),o(r,"marker.line")&&s(r,n,c,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),l(i,"marker.pattern",f,h),i("selected.marker.color"),i("unselected.marker.color")}},72597:function(r,n,i){"use strict";var a=i(39898),o=i(71828);function s(r){return"_"+r+"Text_minsize"}r.exports={recordMinTextSize:function(r,n,i){if(i.uniformtext.mode){var a=s(r),o=i.uniformtext.minsize,l=n.scale*n.fontSize;n.hide=l<o,i[a]=i[a]||1/0,n.hide||(i[a]=Math.min(i[a],Math.max(l,o)))}},clearMinTextSize:function(r,n){n[s(r)]=void 0},resizeText:function(r,n,i){var s=r._fullLayout,l=s["_"+i+"Text_minsize"];if(l){var u,c="hide"===s.uniformtext.mode;switch(i){case"funnelarea":case"pie":case"sunburst":u="g.slice";break;case"treemap":case"icicle":u="g.slice, g.pathbar";break;default:u="g.points > g.point"}n.selectAll(u).each(function(r){var n=r.transform;if(n){n.scale=c&&n.hide?0:l/n.fontSize;var i=a.select(this).select("text");o.setTransormAndDisplay(i,n)}})}}}},55023:function(r,n,i){"use strict";var a=i(5386).fF,o=i(1426).extendFlat,s=i(81245),l=i(1486);r.exports={r:s.r,theta:s.theta,r0:s.r0,dr:s.dr,theta0:s.theta0,dtheta:s.dtheta,thetaunit:s.thetaunit,base:o({},l.base,{}),offset:o({},l.offset,{}),width:o({},l.width,{}),text:o({},l.text,{}),hovertext:o({},l.hovertext,{}),marker:l.marker,hoverinfo:s.hoverinfo,hovertemplate:a(),selected:l.selected,unselected:l.unselected}},74692:function(r,n,i){"use strict";var a=i(52075).hasColorscale,o=i(78803),s=i(71828).isArrayOrTypedArray,l=i(75341),u=i(11661).setGroupPositions,c=i(66279),f=i(73972).traceIs,h=i(71828).extendFlat;r.exports={calc:function(r,n){for(var i=r._fullLayout,u=n.subplot,f=i[u].radialaxis,h=i[u].angularaxis,p=f.makeCalcdata(n,"r"),d=h.makeCalcdata(n,"theta"),v=n._length,g=Array(v),y=0;y<v;y++)g[y]={p:d[y],s:p[y]};function m(r){var i=n[r];void 0!==i&&(n["_"+r]=s(i)?h.makeCalcdata(n,r):h.d2c(i,n.thetaunit))}return"linear"===h.type&&(m("width"),m("offset")),a(n,"marker")&&o(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),a(n,"marker.line")&&o(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(g,n),c(g,n),g},crossTraceCalc:function(r,n,i){for(var a=r.calcdata,o=[],s=0;s<a.length;s++){var l=a[s],c=l[0].trace;!0===c.visible&&f(c,"bar")&&c.subplot===i&&o.push(l)}var p=h({},n.radialaxis,{_id:"x"});u(r,n.angularaxis,p,o,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},6135:function(r,n,i){"use strict";var a=i(71828),o=i(22184).handleRThetaDefaults,s=i(98340),l=i(55023);r.exports=function(r,n,i,u){function c(i,o){return a.coerce(r,n,l,i,o)}o(r,n,u,c)?(c("thetaunit"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate"),s(r,n,c,i,u),a.coerceSelectionMarkerOpacity(n,c)):n.visible=!1}},27379:function(r,n,i){"use strict";var a=i(30211),o=i(71828),s=i(95423).getTraceColor,l=o.fillText,u=i(59150).makeHoverPointText,c=i(10869).isPtInsidePolygon;r.exports=function(r,n,i){var f=r.cd,h=f[0].trace,p=r.subplot,d=p.radialAxis,v=p.angularAxis,g=p.vangles,y=g?c:o.isPtInsideSector,m=r.maxHoverDistance,x=v._period||2*Math.PI,b=Math.abs(d.g2p(Math.sqrt(n*n+i*i))),_=Math.atan2(i,n);if(d.range[0]>d.range[1]&&(_+=Math.PI),a.getClosest(f,function(r){return y(b,_,[r.rp0,r.rp1],[r.thetag0,r.thetag1],g)?m+Math.min(1,Math.abs(r.thetag1-r.thetag0)/x)-1+(r.rp1-b)/(r.rp1-r.rp0)-1:1/0},r),!1!==r.index){var w=f[r.index];r.x0=r.x1=w.ct[0],r.y0=r.y1=w.ct[1];var T=o.extendFlat({},w,{r:w.s,theta:w.p});return l(w,h,r),u(T,h,p,r),r.hovertemplate=h.hovertemplate,r.color=s(h,w),r.xLabelVal=r.yLabelVal=void 0,w.s<0&&(r.idealAlign="left"),[r]}}},23381:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"barpolar",basePlotModule:i(23580),categories:["polar","bar","showLegend"],attributes:i(55023),layoutAttributes:i(40151),supplyDefaults:i(6135),supplyLayoutDefaults:i(19860),calc:i(74692).calc,crossTraceCalc:i(74692).crossTraceCalc,plot:i(60173),colorbar:i(4898),formatLabels:i(98608),style:i(16688).style,styleOnSelect:i(16688).styleOnSelect,hoverPoints:i(27379),selectPoints:i(81974),meta:{}}},40151:function(r){"use strict";r.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(r,n,i){"use strict";var a=i(71828),o=i(40151);r.exports=function(r,n,i){var s,l={};function u(i,l){return a.coerce(r[s]||{},n[s],o,i,l)}for(var c=0;c<i.length;c++){var f=i[c];"barpolar"===f.type&&!0===f.visible&&(l[s=f.subplot]||(u("barmode"),u("bargap"),l[s]=1))}}},60173:function(r,n,i){"use strict";var a=i(39898),o=i(92770),s=i(71828),l=i(91424),u=i(10869);r.exports=function(r,n,i){var c,f,h=r._context.staticPlot,p=n.xaxis,d=n.yaxis,v=n.radialAxis,g=n.angularAxis,y=(c=n.cxx,f=n.cyy,n.vangles?function(r,i,a,o){s.angleDelta(a,o)>0?(l=a,h=o):(l=o,h=a);var l,h,p=[u.findEnclosingVertexAngles(l,n.vangles)[0],(l+h)/2,u.findEnclosingVertexAngles(h,n.vangles)[1]];return u.pathPolygonAnnulus(r,i,l,h,p,c,f)}:function(r,n,i,a){return s.pathAnnulus(r,n,i,a,c,f)}),m=n.layers.frontplot.select("g.barlayer");s.makeTraceGroups(m,i,"trace bars").each(function(){var i=a.select(this),u=s.ensureSingle(i,"g","points").selectAll("g.point").data(s.identity);u.enter().append("g").style("vector-effect",h?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),u.exit().remove(),u.each(function(r){var n,i=a.select(this),l=r.rp0=v.c2p(r.s0),u=r.rp1=v.c2p(r.s1),c=r.thetag0=g.c2g(r.p0),f=r.thetag1=g.c2g(r.p1);if(o(l)&&o(u)&&o(c)&&o(f)&&l!==u&&c!==f){var h=v.c2g(r.s1),m=(c+f)/2;r.ct=[p.c2p(h*Math.cos(m)),d.c2p(h*Math.sin(m))],n=y(l,u,c,f)}else n="M0,0Z";s.ensureSingle(i,"path").attr("d",n)}),l.setClipUrl(i,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})}},53522:function(r,n,i){"use strict";var a=i(82196),o=i(1486),s=i(22399),l=i(12663).axisHoverFormat,u=i(5386).fF,c=i(1426).extendFlat,f=a.marker,h=f.line;r.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:c({},f.symbol,{arrayOk:!1,editType:"plot"}),opacity:c({},f.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:c({},f.angle,{arrayOk:!1,editType:"calc"}),size:c({},f.size,{arrayOk:!1,editType:"calc"}),color:c({},f.color,{arrayOk:!1,editType:"style"}),line:{color:c({},h.color,{arrayOk:!1,dflt:s.defaultLine,editType:"style"}),width:c({},h.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:a.selected.marker,editType:"style"},unselected:{marker:a.unselected.marker,editType:"style"},text:c({},a.text,{}),hovertext:c({},a.hovertext,{}),hovertemplate:u({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(r,n,i){"use strict";var a=i(92770),o=i(89298),s=i(42973),l=i(71828),u=i(50606).BADNUM,c=l._;r.exports=function(r,n){var i,f,b,_,w,T,k,A=r._fullLayout,M=o.getFromId(r,n.xaxis||"x"),S=o.getFromId(r,n.yaxis||"y"),E=[],L="violin"===n.type?"_numViolins":"_numBoxes";"h"===n.orientation?(b=M,_="x",w=S,T="y",k=!!n.yperiodalignment):(b=S,_="y",w=M,T="x",k=!!n.xperiodalignment);var C,O,P,I,D,z,R=function(r,n,i,o){var u,c=n+"0" in r;if(n in r||c&&"d"+n in r){var f=i.makeCalcdata(r,n);return[s(r,i,n,f).vals,f]}u=c?r[n+"0"]:"name"in r&&("category"===i.type||a(r.name)&&-1!==["linear","log"].indexOf(i.type)||l.isDateTime(r.name)&&"date"===i.type)?r.name:o;for(var h="multicategory"===i.type?i.r2c_just_indices(u):i.d2c(u,0,r[n+"calendar"]),p=r._length,d=Array(p),v=0;v<p;v++)d[v]=h;return[d]}(n,T,w,A[L]),F=R[0],B=R[1],N=l.distinctVals(F,w),j=N.vals,U=N.minDiff/2,V="all"===(n.boxpoints||n.points)?l.identity:function(r){return r.v<C.lf||r.v>C.uf};if(n._hasPreCompStats){var H=n[_],q=function(r){return b.d2c((n[r]||[])[i])},G=1/0,Z=-1/0;for(i=0;i<n._length;i++){var Y=F[i];if(a(Y)){if((C={}).pos=C[T]=Y,k&&B&&(C.orig_p=B[i]),C.q1=q("q1"),C.med=q("median"),C.q3=q("q3"),O=[],H&&l.isArrayOrTypedArray(H[i]))for(f=0;f<H[i].length;f++)(z=b.d2c(H[i][f]))!==u&&(h(D={v:z,i:[i,f]},n,[i,f]),O.push(D));if(C.pts=O.sort(p),I=(P=C[_]=O.map(d)).length,C.med!==u&&C.q1!==u&&C.q3!==u&&C.med>=C.q1&&C.q3>=C.med){var W,X=q("lowerfence");C.lf=X!==u&&X<=C.q1?X:v(C,P,I);var J=q("upperfence");C.uf=J!==u&&J>=C.q3?J:g(C,P,I);var K=q("mean");C.mean=K!==u?K:I?l.mean(P,I):(C.q1+C.q3)/2;var $=q("sd");C.sd=K!==u&&$>=0?$:I?l.stdev(P,I,C.mean):C.q3-C.q1,C.lo=y(C),C.uo=m(C);var Q=q("notchspan");Q=Q!==u&&Q>0?Q:x(C,I),C.ln=C.med-Q,C.un=C.med+Q;var tt=C.lf,te=C.uf;n.boxpoints&&P.length&&(tt=Math.min(tt,P[0]),te=Math.max(te,P[I-1])),n.notched&&(tt=Math.min(tt,C.ln),te=Math.max(te,C.un)),C.min=tt,C.max=te}else l.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+C.q1,"median = "+C.med,"q3 = "+C.q3].join("\n")),W=C.med!==u?C.med:C.q1!==u?C.q3!==u?(C.q1+C.q3)/2:C.q1:C.q3!==u?C.q3:0,C.med=W,C.q1=C.q3=W,C.lf=C.uf=W,C.mean=C.sd=W,C.ln=C.un=W,C.min=C.max=W;G=Math.min(G,C.min),Z=Math.max(Z,C.max),C.pts2=O.filter(V),E.push(C)}}n._extremes[b._id]=o.findExtremes(b,[G,Z],{padded:!0})}else{var tr=b.makeCalcdata(n,_),tn=function(r,n){for(var i=r.length,a=Array(i+1),o=0;o<i;o++)a[o]=r[o]-n;return a[i]=r[i-1]+n,a}(j,U),ti=j.length,ta=function(r){for(var n=Array(r),i=0;i<r;i++)n[i]=[];return n}(ti);for(i=0;i<n._length;i++)if(a(z=tr[i])){var to=l.findBin(F[i],tn);to>=0&&to<ti&&(h(D={v:z,i:i},n,i),ta[to].push(D))}var ts=1/0,tl=-1/0,tu=n.quartilemethod,tc="exclusive"===tu,tf="inclusive"===tu;for(i=0;i<ti;i++)if(ta[i].length>0){(C={}).pos=C[T]=j[i],O=C.pts=ta[i].sort(p),I=(P=C[_]=O.map(d)).length,C.min=P[0],C.max=P[I-1],C.mean=l.mean(P,I),C.sd=l.stdev(P,I,C.mean)*n.sdmultiple,C.med=l.interp(P,.5),I%2&&(tc||tf)?(tc?(th=P.slice(0,I/2),tp=P.slice(I/2+1)):tf&&(th=P.slice(0,I/2+1),tp=P.slice(I/2)),C.q1=l.interp(th,.5),C.q3=l.interp(tp,.5)):(C.q1=l.interp(P,.25),C.q3=l.interp(P,.75)),C.lf=v(C,P,I),C.uf=g(C,P,I),C.lo=y(C),C.uo=m(C);var th,tp,td=x(C,I);C.ln=C.med-td,C.un=C.med+td,ts=Math.min(ts,C.ln),tl=Math.max(tl,C.un),C.pts2=O.filter(V),E.push(C)}n.notched&&l.isTypedArray(tr)&&(tr=Array.from(tr)),n._extremes[b._id]=o.findExtremes(b,n.notched?tr.concat([ts,tl]):tr,{padded:!0})}return function(r,n){if(l.isArrayOrTypedArray(n.selectedpoints))for(var i=0;i<r.length;i++){for(var a=r[i].pts||[],o={},s=0;s<a.length;s++)o[a[s].i]=s;l.tagSelected(a,n,o)}}(E,n),E.length>0?(E[0].t={num:A[L],dPos:U,posLetter:T,valLetter:_,labels:{med:c(r,"median:"),min:c(r,"min:"),q1:c(r,"q1:"),q3:c(r,"q3:"),max:c(r,"max:"),mean:"sd"===n.boxmean||"sd"===n.sizemode?c(r,"mean \xb1 σ:").replace("σ",1===n.sdmultiple?"σ":n.sdmultiple+"σ"):c(r,"mean:"),lf:c(r,"lower fence:"),uf:c(r,"upper fence:")}},A[L]++,E):[{t:{empty:!0}}]};var f={text:"tx",hovertext:"htx"};function h(r,n,i){for(var a in f)l.isArrayOrTypedArray(n[a])&&(Array.isArray(i)?l.isArrayOrTypedArray(n[a][i[0]])&&(r[f[a]]=n[a][i[0]][i[1]]):r[f[a]]=n[a][i])}function p(r,n){return r.v-n.v}function d(r){return r.v}function v(r,n,i){return 0===i?r.q1:Math.min(r.q1,n[Math.min(l.findBin(2.5*r.q1-1.5*r.q3,n,!0)+1,i-1)])}function g(r,n,i){return 0===i?r.q3:Math.max(r.q3,n[Math.max(l.findBin(2.5*r.q3-1.5*r.q1,n),0)])}function y(r){return 4*r.q1-3*r.q3}function m(r){return 4*r.q3-3*r.q1}function x(r,n){return 0===n?0:1.57*(r.q3-r.q1)/Math.sqrt(n)}},37188:function(r,n,i){"use strict";var a=i(89298),o=i(71828),s=i(99082).getAxisGroup,l=["v","h"];function u(r,n,i,l){var u,c,f,h=n.calcdata,p=n._fullLayout,d=l._id,v=d.charAt(0),g=[],y=0;for(u=0;u<i.length;u++)for(f=h[i[u]],c=0;c<f.length;c++)g.push(l.c2l(f[c].pos,!0)),y+=(f[c].pts2||[]).length;if(g.length){var m=o.distinctVals(g);"category"!==l.type&&"multicategory"!==l.type||(m.minDiff=1);var x=m.minDiff/2;a.minDtick(l,m.minDiff,m.vals[0],!0);var b=p["violin"===r?"_numViolins":"_numBoxes"],_="group"===p[r+"mode"]&&b>1,w=1-p[r+"gap"],T=1-p[r+"groupgap"];for(u=0;u<i.length;u++){var k,A,M,S,E,L,C=(f=h[i[u]])[0].trace,O=f[0].t,P=C.width,I=C.side;if(P)k=A=S=P/2,M=0;else if(k=x,_){var D=s(p,l._id)+C.orientation,z=Object.keys(((p._alignmentOpts[D]||{})[C.alignmentgroup]||{}).offsetGroups||{}).length,R=z||b;A=k*w*T/R,M=2*k*(((z?C._offsetIndex:O.num)+.5)/R-.5)*w,S=k*w/R}else A=k*w*T,M=0,S=k;O.dPos=k,O.bPos=M,O.bdPos=A,O.wHover=S;var F,B,N,j,U,V,H=M+A,q=!!P;if("positive"===I?(E=k*(P?1:.5),F=H,L=F=M):"negative"===I?(E=F=M,L=k*(P?1:.5),B=H):(E=L=k,F=B=H),(C.boxpoints||C.points)&&y>0){var G=C.pointpos,Z=C.jitter,Y=C.marker.size/2,W=0;G+Z>=0&&((W=H*(G+Z))>E?(q=!0,U=Y,N=W):W>F&&(U=Y,N=E)),W<=E&&(N=E);var X=0;G-Z<=0&&((X=-H*(G-Z))>L?(q=!0,V=Y,j=X):X>B&&(V=Y,j=L)),X<=L&&(j=L)}else N=E,j=L;var J=Array(f.length);for(c=0;c<f.length;c++)J[c]=f[c].pos;C._extremes[d]=a.findExtremes(l,J,{padded:q,vpadminus:j,vpadplus:N,vpadLinearized:!0,ppadminus:{x:V,y:U}[v],ppadplus:{x:U,y:V}[v]})}}}r.exports={crossTraceCalc:function(r,n){for(var i=r.calcdata,a=n.xaxis,o=n.yaxis,s=0;s<l.length;s++){for(var c=l[s],f="h"===c?o:a,h=[],p=0;p<i.length;p++){var d=i[p],v=d[0].t,g=d[0].trace;!0!==g.visible||"box"!==g.type&&"candlestick"!==g.type||v.empty||(g.orientation||"v")!==c||g.xaxis!==a._id||g.yaxis!==o._id||h.push(p)}u("box",r,h,f)}},setPositionOffset:u}},36411:function(r,n,i){"use strict";var a=i(71828),o=i(73972),s=i(7901),l=i(73927),u=i(26125),c=i(4322),f=i(53522);function h(r,n,i,s){function l(r){var n=0;return r&&r.length&&(n+=1,a.isArrayOrTypedArray(r[0])&&r[0].length&&(n+=1)),n}function u(n){return a.validate(r[n],f[n])}var h,p=i("y"),d=i("x");if("box"===n.type){var v=i("q1"),g=i("median"),y=i("q3");n._hasPreCompStats=v&&v.length&&g&&g.length&&y&&y.length,h=Math.min(a.minRowLength(v),a.minRowLength(g),a.minRowLength(y))}var m,x,b=l(p),_=l(d),w=b&&a.minRowLength(p),T=_&&a.minRowLength(d),k=s.calendar,A={autotypenumbers:s.autotypenumbers};if(n._hasPreCompStats)switch(String(_)+String(b)){case"00":var M=u("x0")||u("dx");m=(u("y0")||u("dy"))&&!M?"h":"v",x=h;break;case"10":m="v",x=Math.min(h,T);break;case"20":m="h",x=Math.min(h,d.length);break;case"01":m="h",x=Math.min(h,w);break;case"02":m="v",x=Math.min(h,p.length);break;case"12":m="v",x=Math.min(h,T,p.length);break;case"21":m="h",x=Math.min(h,d.length,w);break;case"11":x=0;break;case"22":var S,E=!1;for(S=0;S<d.length;S++)if("category"===c(d[S],k,A)){E=!0;break}if(E)m="v",x=Math.min(h,T,p.length);else{for(S=0;S<p.length;S++)if("category"===c(p[S],k,A)){E=!0;break}E?(m="h",x=Math.min(h,d.length,w)):(m="v",x=Math.min(h,T,p.length))}}else b>0?(m="v",x=_>0?Math.min(T,w):Math.min(w)):_>0?(m="h",x=Math.min(T)):x=0;if(x){n._length=x;var L=i("orientation",m);n._hasPreCompStats?"v"===L&&0===_?(i("x0",0),i("dx",1)):"h"===L&&0===b&&(i("y0",0),i("dy",1)):"v"===L&&0===_?i("x0"):"h"===L&&0===b&&i("y0"),o.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],s)}else n.visible=!1}function p(r,n,i,o){var s=o.prefix,l=a.coerce2(r,n,f,"marker.outliercolor"),u=i("marker.line.outliercolor"),c="outliers";n._hasPreCompStats?c="all":(l||u)&&(c="suspectedoutliers");var h=i(s+"points",c);h?(i("jitter","all"===h?.3:0),i("pointpos","all"===h?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.angle"),i("marker.color",n.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===h&&(i("marker.line.outliercolor",n.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete n.marker;var p=i("hoveron");"all"!==p&&-1===p.indexOf("points")||i("hovertemplate"),a.coerceSelectionMarkerOpacity(n,i)}r.exports={supplyDefaults:function(r,n,i,o){function u(i,o){return a.coerce(r,n,f,i,o)}if(h(r,n,u,o),!1!==n.visible){l(r,n,o,u),u("xhoverformat"),u("yhoverformat");var c=n._hasPreCompStats;c&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||i),u("line.width"),u("fillcolor",s.addOpacity(n.line.color,.5));var d=!1;if(c){var v=u("mean"),g=u("sd");v&&v.length&&(d=!0,g&&g.length&&(d="sd"))}u("whiskerwidth");var y,m=u("sizemode");"quartiles"===m&&(y=u("boxmean",d)),u("showwhiskers","quartiles"===m),"sd"!==m&&"sd"!==y||u("sdmultiple"),u("width"),u("quartilemethod");var x=!1;if(c){var b=u("notchspan");b&&b.length&&(x=!0)}else a.validate(r.notchwidth,f.notchwidth)&&(x=!0);u("notched",x)&&u("notchwidth"),p(r,n,u,{prefix:"box"})}},crossTraceDefaults:function(r,n){var i,o;function s(r){return a.coerce(o._input,o,f,r)}for(var l=0;l<r.length;l++){var c=(o=r[l]).type;"box"!==c&&"violin"!==c||(i=o._input,"group"===n[c+"mode"]&&u(i,o,n,s))}},handleSampleDefaults:h,handlePointsDefaults:p}},74907:function(r){"use strict";r.exports=function(r,n){return n.hoverOnBox&&(r.hoverOnBox=n.hoverOnBox),"xVal"in n&&(r.x=n.xVal),"yVal"in n&&(r.y=n.yVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r}},41868:function(r,n,i){"use strict";var a=i(89298),o=i(71828),s=i(30211),l=i(7901),u=o.fillText;function c(r,n,i,u){var c,f,h,p,d,v,g,y,m,x,b,_,w,T,k=r.cd,A=r.xa,M=r.ya,S=k[0].trace,E=k[0].t,L="violin"===S.type,C=E.bdPos,O=E.wHover,P=function(r){return h.c2l(r.pos)+E.bPos-h.c2l(v)};L&&"both"!==S.side?("positive"===S.side&&(m=function(r){var n=P(r);return s.inbox(n,n+O,x)},_=C,w=0),"negative"===S.side&&(m=function(r){var n=P(r);return s.inbox(n-O,n,x)},_=0,w=C)):(m=function(r){var n=P(r);return s.inbox(n-O,n+O,x)},_=w=C),T=L?function(r){return s.inbox(r.span[0]-d,r.span[1]-d,x)}:function(r){return s.inbox(r.min-d,r.max-d,x)},"h"===S.orientation?(d=n,v=i,g=T,y=m,c="y",h=M,f="x",p=A):(d=i,v=n,g=m,y=T,c="x",h=A,f="y",p=M);var I=Math.min(1,C/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));function D(r){return(g(r)+y(r))/2}x=r.maxHoverDistance-I,b=r.maxSpikeDistance-I;var z=s.getDistanceFunction(u,g,y,D);if(s.getClosest(k,z,r),!1===r.index)return[];var R=k[r.index],F=S.line.color,B=(S.marker||{}).color;l.opacity(F)&&S.line.width?r.color=F:l.opacity(B)&&S.boxpoints?r.color=B:r.color=S.fillcolor,r[c+"0"]=h.c2p(R.pos+E.bPos-w,!0),r[c+"1"]=h.c2p(R.pos+E.bPos+_,!0),r[c+"LabelVal"]=void 0!==R.orig_p?R.orig_p:R.pos;var N=c+"Spike";r.spikeDistance=D(R)*b/x,r[N]=h.c2p(R.pos,!0);var j=S.boxmean||"sd"===S.sizemode||(S.meanline||{}).visible,U=S.boxpoints||S.points,V=U&&j?["max","uf","q3","med","mean","q1","lf","min"]:U&&!j?["max","uf","q3","med","q1","lf","min"]:!U&&j?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=p.range[1]<p.range[0];S.orientation===(H?"v":"h")&&V.reverse();for(var q=r.spikeDistance,G=r[N],Z=[],Y=0;Y<V.length;Y++){var W=V[Y];if(W in R){var X=R[W],J=p.c2p(X,!0),K=o.extendFlat({},r);K.attr=W,K[f+"0"]=K[f+"1"]=J,K[f+"LabelVal"]=X,K[f+"Label"]=(E.labels?E.labels[W]+" ":"")+a.hoverLabelText(p,X,S[f+"hoverformat"]),K.hoverOnBox=!0,"mean"===W&&"sd"in R&&("sd"===S.boxmean||"sd"===S.sizemode)&&(K[f+"err"]=R.sd),K.hovertemplate=!1,Z.push(K)}}r.name="",r.spikeDistance=void 0,r[N]=void 0;for(var $=0;$<Z.length;$++)"med"!==Z[$].attr?(Z[$].name="",Z[$].spikeDistance=void 0,Z[$][N]=void 0):(Z[$].spikeDistance=q,Z[$][N]=G);return Z}function f(r,n,i){for(var a,l,c,f=r.cd,h=r.xa,p=r.ya,d=f[0].trace,v=h.c2p(n),g=p.c2p(i),y=s.quadrature(function(r){var n=Math.max(3,r.mrc||0);return Math.max(Math.abs(h.c2p(r.x)-v)-n,1-3/n)},function(r){var n=Math.max(3,r.mrc||0);return Math.max(Math.abs(p.c2p(r.y)-g)-n,1-3/n)}),m=!1,x=0;x<f.length;x++){l=f[x];for(var b=0;b<(l.pts||[]).length;b++){var _=y(c=l.pts[b]);_<=r.distance&&(r.distance=_,m=[x,b])}}if(!m)return!1;c=(l=f[m[0]]).pts[m[1]];var w=h.c2p(c.x,!0),T=p.c2p(c.y,!0),k=c.mrc||1;a=o.extendFlat({},r,{index:c.i,color:(d.marker||{}).color,name:d.name,x0:w-k,x1:w+k,y0:T-k,y1:T+k,spikeDistance:r.distance,hovertemplate:d.hovertemplate});var A,M=l.orig_p,S=void 0!==M?M:l.pos;return"h"===d.orientation?(A=p,a.xLabelVal=c.x,a.yLabelVal=S):(A=h,a.xLabelVal=S,a.yLabelVal=c.y),a[A._id.charAt(0)+"Spike"]=A.c2p(l.pos,!0),u(c,d,a),a}r.exports={hoverPoints:function(r,n,i,a){var o,s=r.cd[0].trace.hoveron,l=[];return -1!==s.indexOf("boxes")&&(l=l.concat(c(r,n,i,a))),-1!==s.indexOf("points")&&(o=f(r,n,i)),"closest"===a?o?[o]:l:(o&&l.push(o),l)},hoverOnBoxes:c,hoverOnPoints:f}},83832:function(r,n,i){"use strict";r.exports={attributes:i(53522),layoutAttributes:i(40094),supplyDefaults:i(36411).supplyDefaults,crossTraceDefaults:i(36411).crossTraceDefaults,supplyLayoutDefaults:i(4199).supplyLayoutDefaults,calc:i(48518),crossTraceCalc:i(37188).crossTraceCalc,plot:i(86047).plot,style:i(58063).style,styleOnSelect:i(58063).styleOnSelect,hoverPoints:i(41868).hoverPoints,eventData:i(74907),selectPoints:i(24626),moduleType:"trace",name:"box",basePlotModule:i(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(r){"use strict";r.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(40094);function l(r,n,i,o,s){for(var l=s+"Layout",u=!1,c=0;c<i.length;c++){var f=i[c];if(a.traceIs(f,l)){u=!0;break}}u&&(o(s+"mode"),o(s+"gap"),o(s+"groupgap"))}r.exports={supplyLayoutDefaults:function(r,n,i){l(0,0,i,function(i,a){return o.coerce(r,n,s,i,a)},"box")},_supply:l}},86047:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424);function l(r,n,i,s,l){var u,c,f="h"===i.orientation,h=n.val,p=n.pos,d=!!p.rangebreaks,v=s.bPos,g=s.wdPos||0,y=s.bPosPxOffset||0,m=i.whiskerwidth||0,x=!1!==i.showwhiskers,b=i.notched||!1,_=b?1-2*i.notchwidth:1;Array.isArray(s.bdPos)?(u=s.bdPos[0],c=s.bdPos[1]):(u=s.bdPos,c=s.bdPos);var w=r.selectAll("path.box").data("violin"!==i.type||i.box.visible?o.identity:[]);w.enter().append("path").style("vector-effect",l?"none":"non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(r){if(r.empty)return a.select(this).attr("d","M0,0Z");var n=p.c2l(r.pos+v,!0),s=p.l2p(n-u)+y,l=p.l2p(n+c)+y,w=d?(s+l)/2:p.l2p(n)+y,T=i.whiskerwidth,k=d?s*T+(1-T)*w:p.l2p(n-g)+y,A=d?l*T+(1-T)*w:p.l2p(n+g)+y,M=p.l2p(n-u*_)+y,S=p.l2p(n+c*_)+y,E="sd"===i.sizemode,L=h.c2p(E?r.mean-r.sd:r.q1,!0),C=E?h.c2p(r.mean+r.sd,!0):h.c2p(r.q3,!0),O=o.constrain(E?h.c2p(r.mean,!0):h.c2p(r.med,!0),Math.min(L,C)+1,Math.max(L,C)-1),P=void 0===r.lf||!1===i.boxpoints||E,I=h.c2p(P?r.min:r.lf,!0),D=h.c2p(P?r.max:r.uf,!0),z=h.c2p(r.ln,!0),R=h.c2p(r.un,!0);f?a.select(this).attr("d","M"+O+","+M+"V"+S+"M"+L+","+s+"V"+l+(b?"H"+z+"L"+O+","+S+"L"+R+","+l:"")+"H"+C+"V"+s+(b?"H"+R+"L"+O+","+M+"L"+z+","+s:"")+"Z"+(x?"M"+L+","+w+"H"+I+"M"+C+","+w+"H"+D+(0===m?"":"M"+I+","+k+"V"+A+"M"+D+","+k+"V"+A):"")):a.select(this).attr("d","M"+M+","+O+"H"+S+"M"+s+","+L+"H"+l+(b?"V"+z+"L"+S+","+O+"L"+l+","+R:"")+"V"+C+"H"+s+(b?"V"+R+"L"+M+","+O+"L"+s+","+z:"")+"Z"+(x?"M"+w+","+L+"V"+I+"M"+w+","+C+"V"+D+(0===m?"":"M"+k+","+I+"H"+A+"M"+k+","+D+"H"+A):""))})}function u(r,n,i,a){var l=n.x,u=n.y,c=a.bdPos,f=a.bPos,h=i.boxpoints||i.points;o.seedPseudoRandom();var p=r.selectAll("g.points").data(h?function(r){return r.forEach(function(r){r.t=a,r.trace=i}),r}:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var d=p.selectAll("path").data(function(r){var n,a,s=r.pts2,l=Math.max((r.max-r.min)/10,r.q3-r.q1),u=1e-9*l,p=.01*l,d=[],v=0;if(i.jitter){if(0===l)for(v=1,d=Array(s.length),n=0;n<s.length;n++)d[n]=1;else for(n=0;n<s.length;n++){var g=Math.max(0,n-5),y=s[g].v,m=Math.min(s.length-1,n+5),x=s[m].v;"all"!==h&&(s[n].v<r.lf?x=Math.min(x,r.lf):y=Math.max(y,r.uf));var b=Math.sqrt(p*(m-g)/(x-y+u))||0;b=o.constrain(Math.abs(b),0,1),d.push(b),v=Math.max(b,v)}a=2*i.jitter/(v||1)}for(n=0;n<s.length;n++){var _=s[n],w=_.v,T=i.jitter?a*d[n]*(o.pseudoRandom()-.5):0,k=r.pos+f+c*(i.pointpos+T);"h"===i.orientation?(_.y=k,_.x=w):(_.x=k,_.y=w),"suspectedoutliers"===h&&w<r.uo&&w>r.lo&&(_.so=!0)}return s});d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(s.translatePoints,l,u)}function c(r,n,i,s){var l,u,c=n.val,f=n.pos,h=!!f.rangebreaks,p=s.bPos,d=s.bPosPxOffset||0,v=i.boxmean||(i.meanline||{}).visible;Array.isArray(s.bdPos)?(l=s.bdPos[0],u=s.bdPos[1]):(l=s.bdPos,u=s.bdPos);var g=r.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?o.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(r){var n=f.c2l(r.pos+p,!0),o=f.l2p(n-l)+d,s=f.l2p(n+u)+d,g=h?(o+s)/2:f.l2p(n)+d,y=c.c2p(r.mean,!0),m=c.c2p(r.mean-r.sd,!0),x=c.c2p(r.mean+r.sd,!0);"h"===i.orientation?a.select(this).attr("d","M"+y+","+o+"V"+s+("sd"===v?"m0,0L"+m+","+g+"L"+y+","+o+"L"+x+","+g+"Z":"")):a.select(this).attr("d","M"+o+","+y+"H"+s+("sd"===v?"m0,0L"+g+","+m+"L"+o+","+y+"L"+g+","+x+"Z":""))})}r.exports={plot:function(r,n,i,s){var f=r._context.staticPlot,h=n.xaxis,p=n.yaxis;o.makeTraceGroups(s,i,"trace boxes").each(function(r){var n,i,o=a.select(this),s=r[0],d=s.t,v=s.trace;d.wdPos=d.bdPos*v.whiskerwidth,!0!==v.visible||d.empty?o.remove():("h"===v.orientation?(n=p,i=h):(n=h,i=p),l(o,{pos:n,val:i},v,d,f),u(o,{x:h,y:p},v,d),c(o,{pos:n,val:i},v,d))})},plotBoxAndWhiskers:l,plotPoints:u,plotBoxMean:c}},24626:function(r){"use strict";r.exports=function(r,n){var i,a,o=r.cd,s=r.xaxis,l=r.yaxis,u=[];if(!1===n)for(i=0;i<o.length;i++)for(a=0;a<(o[i].pts||[]).length;a++)o[i].pts[a].selected=0;else for(i=0;i<o.length;i++)for(a=0;a<(o[i].pts||[]).length;a++){var c=o[i].pts[a],f=s.c2p(c.x),h=l.c2p(c.y);n.contains([f,h],null,c.i,r)?(u.push({pointNumber:c.i,x:s.c2d(c.x),y:l.c2d(c.y)}),c.selected=1):c.selected=0}return u}},58063:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(91424);r.exports={style:function(r,n,i){var l=i||a.select(r).selectAll("g.trace.boxes");l.style("opacity",function(r){return r[0].trace.opacity}),l.each(function(n){var i=a.select(this),l=n[0].trace,u=l.line.width;function c(r,n,i,a){r.style("stroke-width",n+"px").call(o.stroke,i).call(o.fill,a)}var f=i.selectAll("path.box");if("candlestick"===l.type)f.each(function(r){if(!r.empty){var n=a.select(this),i=l[r.dir];c(n,i.line.width,i.line.color,i.fillcolor),n.style("opacity",l.selectedpoints&&!r.selected?.3:1)}});else{c(f,u,l.line.color,l.fillcolor),i.selectAll("path.mean").style({"stroke-width":u,"stroke-dasharray":2*u+"px,"+u+"px"}).call(o.stroke,l.line.color);var h=i.selectAll("path.point");s.pointStyle(h,l,r)}})},styleOnSelect:function(r,n,i){var a=n[0].trace,o=i.selectAll("path.point");a.selectedpoints?s.selectedPointStyle(o,a):s.pointStyle(o,a,r)}}},75343:function(r,n,i){"use strict";var a=i(71828).extendFlat,o=i(12663).axisHoverFormat,s=i(2522),l=i(53522);function u(r){return{line:{color:a({},l.line.color,{dflt:r}),width:l.line.width,editType:"style"},fillcolor:l.fillcolor,editType:"style"}}r.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:s.x,open:s.open,high:s.high,low:s.low,close:s.close,line:{width:a({},l.line.width,{}),editType:"style"},increasing:u(s.increasing.line.color.dflt),decreasing:u(s.decreasing.line.color.dflt),text:s.text,hovertext:s.hovertext,whiskerwidth:a({},l.whiskerwidth,{dflt:0}),hoverlabel:s.hoverlabel}},41197:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(42973),l=i(3485).calcCommon;function u(r,n,i,a){return{min:i,q1:Math.min(r,a),med:a,q3:Math.max(r,a),max:n}}r.exports=function(r,n){var i=r._fullLayout,c=o.getFromId(r,n.xaxis),f=o.getFromId(r,n.yaxis),h=c.makeCalcdata(n,"x"),p=s(n,c,"x",h).vals,d=l(r,n,h,p,f,u);return d.length?(a.extendFlat(d[0].t,{num:i._numBoxes,dPos:a.distinctVals(p).minDiff/2,posLetter:"x",valLetter:"y"}),i._numBoxes++,d):[{t:{empty:!0}}]}},1026:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(14555),l=i(73927),u=i(75343);function c(r,n,i,a){var s=i(a+".line.color");i(a+".line.width",n.line.width),i(a+".fillcolor",o.addOpacity(s,.5))}r.exports=function(r,n,i,o){function f(i,o){return a.coerce(r,n,u,i,o)}s(r,n,f,o)?(l(r,n,o,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),c(0,n,f,"increasing"),c(0,n,f,"decreasing"),f("text"),f("hovertext"),f("whiskerwidth"),o._requestRangeslider[n.xaxis]=!0):n.visible=!1}},91815:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"candlestick",basePlotModule:i(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:i(75343),layoutAttributes:i(40094),supplyLayoutDefaults:i(4199).supplyLayoutDefaults,crossTraceCalc:i(37188).crossTraceCalc,supplyDefaults:i(1026),calc:i(41197),plot:i(86047).plot,layerName:"boxlayer",style:i(58063).style,hoverPoints:i(66449).hoverPoints,selectPoints:i(67324)}},13145:function(r,n,i){"use strict";var a=i(11500),o=i(44467);r.exports=function(r,n,i,s,l){s("a")||(s("da"),s("a0")),s("b")||(s("db"),s("b0")),["aaxis","baxis"].forEach(function(s){var u=s.charAt(0),c=r[s]||{},f=o.newContainer(n,s);a(c,f,{noTicklabelstep:!0,tickfont:"x",id:u+"axis",letter:u,font:n.font,name:s,data:r[u],calendar:n.calendar,dfltColor:l,bgColor:i.paper_bgcolor,autotypenumbersDflt:i.autotypenumbers,fullLayout:i}),f._categories=f._categories||[],r[s]||"-"===c.type||(r[s]={type:c.type})})}},402:function(r,n,i){"use strict";var a=i(71828).isArrayOrTypedArray;r.exports=function(r){return function r(n,i){if(!a(n)||i>=10)return null;for(var o=1/0,s=-1/0,l=n.length,u=0;u<l;u++){var c=n[u];if(a(c)){var f=r(c,i+1);f&&(o=Math.min(f[0],o),s=Math.max(f[1],s))}else o=Math.min(c,o),s=Math.max(c,s)}return[o,s]}(r,0)}},99798:function(r,n,i){"use strict";var a=i(41940),o=i(1928),s=i(22399),l=a({editType:"calc"});l.family.dflt='"Open Sans", verdana, arial, sans-serif',l.size.dflt=12,l.color.dflt=s.defaultLine,r.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:o,baxis:o,font:l,color:{valType:"color",dflt:s.defaultLine,editType:"plot"},transforms:void 0}},4536:function(r,n,i){"use strict";var a=i(71828).isArrayOrTypedArray;r.exports=function(r,n,i,o){var s,l,u,c,f,h,p,d,v,g,y,m,x,b=a(i)?"a":"b",_=("a"===b?r.aaxis:r.baxis).smoothing,w="a"===b?r.a2i:r.b2j,T="a"===b?i:o,k="a"===b?o:i,A="a"===b?n.a.length:n.b.length,M="a"===b?n.b.length:n.a.length,S=Math.floor("a"===b?r.b2j(k):r.a2i(k)),E="a"===b?function(n){return r.evalxy([],n,S)}:function(n){return r.evalxy([],S,n)};_&&(u=Math.max(0,Math.min(M-2,S)),c=S-u,l="a"===b?function(n,i){return r.dxydi([],n,u,i,c)}:function(n,i){return r.dxydj([],u,n,c,i)});var L=w(T[0]),C=w(T[1]),O=L<C?1:-1,P=1e-8*(C-L),I=O>0?Math.floor:Math.ceil,D=O>0?Math.ceil:Math.floor,z=O>0?Math.min:Math.max,R=O>0?Math.max:Math.min,F=I(L+P),B=D(C-P),N=[[p=E(L)]];for(s=F;s*O<B*O;s+=O)f=[],y=R(L,s),x=(m=z(C,s+O))-y,h=Math.max(0,Math.min(A-2,Math.floor(.5*(y+m)))),d=E(m),_&&(v=l(h,y-h),g=l(h,m-h),f.push([p[0]+v[0]/3*x,p[1]+v[1]/3*x]),f.push([d[0]-g[0]/3*x,d[1]-g[1]/3*x])),f.push(d),N.push(f),p=d;return N}},1928:function(r,n,i){"use strict";var a=i(41940),o=i(22399),s=i(13838),l=i(12663).descriptionWithDates,u=i(30962).overrideAll,c=i(79952).P,f=i(1426).extendFlat;r.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:a({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:s.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:f({},s.labelalias,{editType:"calc"}),tickfont:a({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:l("tick label")},tickformatstops:u(s.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:f({},c,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:f({},c,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:o.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:a({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(r,n,i){"use strict";var a=i(99798),o=i(7901).addOpacity,s=i(73972),l=i(71828),u=i(26218),c=i(96115),f=i(89426),h=i(15258),p=i(21994),d=i(4322);r.exports=function(r,n,i){var v=i.letter,g=i.font||{},y=a[v+"axis"];function m(i,a){return l.coerce(r,n,y,i,a)}function x(i,a){return l.coerce2(r,n,y,i,a)}i.name&&(n._name=i.name,n._id=i.name),m("autotypenumbers",i.autotypenumbersDflt);var b=m("type");"-"===b&&(i.data&&function(r,n){if("-"===r.type){var i=r._id.charAt(0),a=r[i+"calendar"];r.type=d(n,a,{autotypenumbers:r.autotypenumbers})}}(n,i.data),"-"===n.type?n.type="linear":b=r.type=n.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",v+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===n.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),n._hovertitle=v,"date"===b&&s.getComponentMethod("calendars","handleDefaults")(r,n,"calendar",i.calendar),p(n,i.fullLayout),n.c2p=l.identity;var _=m("color",i.dfltColor),w=_===r.color?_:g.color;m("title.text")&&(l.coerceFont(m,"title.font",{family:g.family,size:l.bigFont(g.size),color:w}),m("title.offset")),m("tickangle"),m("autorange",!n.isValidRange(r.range))&&m("rangemode"),m("range"),n.cleanRange(),m("fixedrange"),u(r,n,m,b),f(r,n,m,b,i),c(r,n,m,b,i),h(r,n,m,{data:i.data,dataAttr:v});var T=x("gridcolor",o(_,.3)),k=x("gridwidth"),A=x("griddash"),M=m("showgrid");M||(delete n.gridcolor,delete n.gridwidth,delete n.griddash);var S=x("startlinecolor",_),E=x("startlinewidth",k);m("startline",n.showgrid||!!S||!!E)||(delete n.startlinecolor,delete n.startlinewidth);var L=x("endlinecolor",_),C=x("endlinewidth",k);return m("endline",n.showgrid||!!L||!!C)||(delete n.endlinecolor,delete n.endlinewidth),M?(m("minorgridcount"),m("minorgridwidth",k),m("minorgriddash",A),m("minorgridcolor",o(T,.06)),n.minorgridcount||(delete n.minorgridwidth,delete n.minorgriddash,delete n.minorgridcolor)):(delete n.gridcolor,delete n.gridwidth,delete n.griddash),"none"===n.showticklabels&&(delete n.tickfont,delete n.tickangle,delete n.showexponent,delete n.exponentformat,delete n.minexponent,delete n.tickformat,delete n.showticksuffix,delete n.showtickprefix),n.showticksuffix||delete n.ticksuffix,n.showtickprefix||delete n.tickprefix,m("tickmode"),n}},25281:function(r,n,i){"use strict";var a=i(89298),o=i(71828).isArray1D,s=i(53824),l=i(402),u=i(20347),c=i(83311),f=i(44807),h=i(4742),p=i(72505),d=i(68296),v=i(11435);r.exports=function(r,n){var i=a.getFromId(r,n.xaxis),g=a.getFromId(r,n.yaxis),y=n.aaxis,m=n.baxis,x=n.x,b=n.y,_=[];x&&o(x)&&_.push("x"),b&&o(b)&&_.push("y"),_.length&&d(n,y,m,"a","b",_);var w=n._a=n._a||n.a,T=n._b=n._b||n.b;x=n._x||n.x,b=n._y||n.y;var k={};n._cheater&&(x=s("index"===y.cheatertype?w.length:w,"index"===m.cheatertype?T.length:T,n.cheaterslope)),n._x=x=h(x),n._y=b=h(b),p(x,w,T),p(b,w,T),v(n),n.setScale();var A=l(x),M=l(b),S=.5*(A[1]-A[0]),E=.5*(A[1]+A[0]),L=.5*(M[1]-M[0]),C=.5*(M[1]+M[0]);return A=[E-1.3*S,E+1.3*S],M=[C-1.3*L,C+1.3*L],n._extremes[i._id]=a.findExtremes(i,A,{padded:!0}),n._extremes[g._id]=a.findExtremes(g,M,{padded:!0}),u(n,"a","b"),u(n,"b","a"),c(n,y),c(n,m),k.clipsegments=f(n._xctrl,n._yctrl,y,m),k.x=x,k.y=b,k.a=w,k.b=T,[k]}},44807:function(r){"use strict";r.exports=function(r,n,i,a){var o,s,l,u=[],c=!!i.smoothing,f=!!a.smoothing,h=r[0].length-1,p=r.length-1;for(o=0,s=[],l=[];o<=h;o++)s[o]=r[0][o],l[o]=n[0][o];for(u.push({x:s,y:l,bicubic:c}),o=0,s=[],l=[];o<=p;o++)s[o]=r[o][h],l[o]=n[o][h];for(u.push({x:s,y:l,bicubic:f}),o=h,s=[],l=[];o>=0;o--)s[h-o]=r[p][o],l[h-o]=n[p][o];for(u.push({x:s,y:l,bicubic:c}),o=p,s=[],l=[];o>=0;o--)s[p-o]=r[o][0],l[p-o]=n[o][0];return u.push({x:s,y:l,bicubic:f}),u}},20347:function(r,n,i){"use strict";var a=i(89298),o=i(1426).extendFlat;r.exports=function(r,n,i){var s,l,u,c,f,h,p,d,v,g,y,m,x,b,_=r["_"+n],w=r[n+"axis"],T=w._gridlines=[],k=w._minorgridlines=[],A=w._boundarylines=[],M=r["_"+i],S=r[i+"axis"];"array"===w.tickmode&&(w.tickvals=_.slice());var E=r._xctrl,L=r._yctrl,C=E[0].length,O=E.length,P=r._a.length,I=r._b.length;a.prepTicks(w),"array"===w.tickmode&&delete w.tickvals;var D=w.smoothing?3:1;function z(a){var o,s,l,u,c,f,h,p,v,g,y,m,x=[],b=[],_={};if("b"===n)for(l=Math.floor(Math.max(0,Math.min(I-2,s=r.b2j(a)))),u=s-l,_.length=I,_.crossLength=P,_.xy=function(n){return r.evalxy([],n,s)},_.dxy=function(n,i){return r.dxydi([],n,l,i,u)},o=0;o<P;o++)f=Math.min(P-2,o),h=o-f,p=r.evalxy([],o,s),S.smoothing&&o>0&&(v=r.dxydi([],o-1,l,0,u),x.push(c[0]+v[0]/3),b.push(c[1]+v[1]/3),g=r.dxydi([],o-1,l,1,u),x.push(p[0]-g[0]/3),b.push(p[1]-g[1]/3)),x.push(p[0]),b.push(p[1]),c=p;else for(f=Math.floor(Math.max(0,Math.min(P-2,o=r.a2i(a)))),h=o-f,_.length=P,_.crossLength=I,_.xy=function(n){return r.evalxy([],o,n)},_.dxy=function(n,i){return r.dxydj([],f,n,h,i)},s=0;s<I;s++)l=Math.min(I-2,s),u=s-l,p=r.evalxy([],o,s),S.smoothing&&s>0&&(y=r.dxydj([],f,s-1,h,0),x.push(c[0]+y[0]/3),b.push(c[1]+y[1]/3),m=r.dxydj([],f,s-1,h,1),x.push(p[0]-m[0]/3),b.push(p[1]-m[1]/3)),x.push(p[0]),b.push(p[1]),c=p;return _.axisLetter=n,_.axis=w,_.crossAxis=S,_.value=a,_.constvar=i,_.index=d,_.x=x,_.y=b,_.smoothing=S.smoothing,_}function R(a){var o,s,l,u,c,f=[],h=[],p={};if(p.length=_.length,p.crossLength=M.length,"b"===n)for(l=Math.max(0,Math.min(I-2,a)),c=Math.min(1,Math.max(0,a-l)),p.xy=function(n){return r.evalxy([],n,a)},p.dxy=function(n,i){return r.dxydi([],n,l,i,c)},o=0;o<C;o++)f[o]=E[a*D][o],h[o]=L[a*D][o];else for(s=Math.max(0,Math.min(P-2,a)),u=Math.min(1,Math.max(0,a-s)),p.xy=function(n){return r.evalxy([],a,n)},p.dxy=function(n,i){return r.dxydj([],s,n,u,i)},o=0;o<O;o++)f[o]=E[o][a*D],h[o]=L[o][a*D];return p.axisLetter=n,p.axis=w,p.crossAxis=S,p.value=_[a],p.constvar=i,p.index=a,p.x=f,p.y=h,p.smoothing=S.smoothing,p}if("array"===w.tickmode){for(c=5e-15,h=(f=[Math.floor((_.length-1-w.arraytick0)/w.arraydtick*(1+c)),Math.ceil(-w.arraytick0/w.arraydtick/(1+c))].sort(function(r,n){return r-n}))[0]-1,p=f[1]+1,d=h;d<p;d++)(l=w.arraytick0+w.arraydtick*d)<0||l>_.length-1||T.push(o(R(l),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(d=h;d<p;d++)if(y=Math.min((u=w.arraytick0+w.arraydtick*d)+w.arraydtick,_.length-1),!(u<0||u>_.length-1||y<0||y>_.length-1))for(m=_[u],x=_[y],s=0;s<w.minorgridcount;s++)(b=y-u)<=0||(g=m+(x-m)*(s+1)/(w.minorgridcount+1)*(w.arraydtick/b))<_[0]||g>_[_.length-1]||k.push(o(z(g),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&A.push(o(R(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&A.push(o(R(_.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(c=5e-15,h=(f=[Math.floor((_[_.length-1]-w.tick0)/w.dtick*(1+c)),Math.ceil((_[0]-w.tick0)/w.dtick/(1+c))].sort(function(r,n){return r-n}))[0],p=f[1],d=h;d<=p;d++)v=w.tick0+w.dtick*d,T.push(o(z(v),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(d=h-1;d<p+1;d++)for(v=w.tick0+w.dtick*d,s=0;s<w.minorgridcount;s++)(g=v+w.dtick*(s+1)/(w.minorgridcount+1))<_[0]||g>_[_.length-1]||k.push(o(z(g),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&A.push(o(z(_[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&A.push(o(z(_[_.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},83311:function(r,n,i){"use strict";var a=i(89298),o=i(1426).extendFlat;r.exports=function(r,n){var i,s,l,u=n._labels=[],c=n._gridlines;for(i=0;i<c.length;i++)l=c[i],-1!==["start","both"].indexOf(n.showticklabels)&&(o(s=a.tickText(n,l.value),{prefix:void 0,suffix:void 0,endAnchor:!0,xy:l.xy(0),dxy:l.dxy(0,0),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===i,isLast:i===c.length-1}),u.push(s)),-1!==["end","both"].indexOf(n.showticklabels)&&(o(s=a.tickText(n,l.value),{endAnchor:!1,xy:l.xy(l.crossLength-1),dxy:l.dxy(l.crossLength-2,1),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===i,isLast:i===c.length-1}),u.push(s))}},42048:function(r){"use strict";r.exports=function(r,n,i,a){var o=r[0]-n[0],s=r[1]-n[1],l=i[0]-n[0],u=i[1]-n[1],c=Math.pow(o*o+s*s,.25),f=Math.pow(l*l+u*u,.25),h=(f*f*o-c*c*l)*a,p=(f*f*s-c*c*u)*a,d=f*(c+f)*3,v=c*(c+f)*3;return[[n[0]+(d&&h/d),n[1]+(d&&p/d)],[n[0]-(v&&h/v),n[1]-(v&&p/v)]]}},53824:function(r,n,i){"use strict";var a=i(71828).isArrayOrTypedArray;r.exports=function(r,n,i){var o,s,l,u,c,f,h=[],p=a(r)?r.length:r,d=a(n)?n.length:n,v=a(r)?r:null,g=a(n)?n:null;v&&(l=(v.length-1)/(v[v.length-1]-v[0])/(p-1)),g&&(u=(g.length-1)/(g[g.length-1]-g[0])/(d-1));var y=1/0,m=-1/0;for(s=0;s<d;s++)for(h[s]=[],c=g?(g[s]-g[0])*u:s/(d-1),o=0;o<p;o++)y=Math.min(f=(v?(v[o]-v[0])*l:o/(p-1))-c*i,y),m=Math.max(f,m),h[s][o]=f;var x=1/(m-y),b=-y*x;for(s=0;s<d;s++)for(o=0;o<p;o++)h[s][o]=x*h[s][o]+b;return h}},45664:function(r,n,i){"use strict";var a=i(42048),o=i(71828).ensureArray;function s(r,n,i){var a=-.5*i[0]+1.5*n[0],o=-.5*i[1]+1.5*n[1];return[(2*a+r[0])/3,(2*o+r[1])/3]}r.exports=function(r,n,i,l,u,c){var f,h,p,d,v,g,y,m,x,b,_=i[0].length,w=i.length,T=u?3*_-2:_,k=c?3*w-2:w;for(r=o(r,k),n=o(n,k),p=0;p<k;p++)r[p]=o(r[p],T),n[p]=o(n[p],T);for(h=0,d=0;h<w;h++,d+=c?3:1)for(v=r[d],g=n[d],y=i[h],m=l[h],f=0,p=0;f<_;f++,p+=u?3:1)v[p]=y[f],g[p]=m[f];if(u)for(h=0,d=0;h<w;h++,d+=c?3:1){for(f=1,p=3;f<_-1;f++,p+=3)x=a([i[h][f-1],l[h][f-1]],[i[h][f],l[h][f]],[i[h][f+1],l[h][f+1]],u),r[d][p-1]=x[0][0],n[d][p-1]=x[0][1],r[d][p+1]=x[1][0],n[d][p+1]=x[1][1];b=s([r[d][0],n[d][0]],[r[d][2],n[d][2]],[r[d][3],n[d][3]]),r[d][1]=b[0],n[d][1]=b[1],b=s([r[d][T-1],n[d][T-1]],[r[d][T-3],n[d][T-3]],[r[d][T-4],n[d][T-4]]),r[d][T-2]=b[0],n[d][T-2]=b[1]}if(c)for(p=0;p<T;p++){for(d=3;d<k-3;d+=3)x=a([r[d-3][p],n[d-3][p]],[r[d][p],n[d][p]],[r[d+3][p],n[d+3][p]],c),r[d-1][p]=x[0][0],n[d-1][p]=x[0][1],r[d+1][p]=x[1][0],n[d+1][p]=x[1][1];b=s([r[0][p],n[0][p]],[r[2][p],n[2][p]],[r[3][p],n[3][p]]),r[1][p]=b[0],n[1][p]=b[1],b=s([r[k-1][p],n[k-1][p]],[r[k-3][p],n[k-3][p]],[r[k-4][p],n[k-4][p]]),r[k-2][p]=b[0],n[k-2][p]=b[1]}if(u&&c)for(d=1;d<k;d+=(d+1)%3==0?2:1){for(p=3;p<T-3;p+=3)x=a([r[d][p-3],n[d][p-3]],[r[d][p],n[d][p]],[r[d][p+3],n[d][p+3]],u),r[d][p-1]=.5*(r[d][p-1]+x[0][0]),n[d][p-1]=.5*(n[d][p-1]+x[0][1]),r[d][p+1]=.5*(r[d][p+1]+x[1][0]),n[d][p+1]=.5*(n[d][p+1]+x[1][1]);b=s([r[d][0],n[d][0]],[r[d][2],n[d][2]],[r[d][3],n[d][3]]),r[d][1]=.5*(r[d][1]+b[0]),n[d][1]=.5*(n[d][1]+b[1]),b=s([r[d][T-1],n[d][T-1]],[r[d][T-3],n[d][T-3]],[r[d][T-4],n[d][T-4]]),r[d][T-2]=.5*(r[d][T-2]+b[0]),n[d][T-2]=.5*(n[d][T-2]+b[1])}return[r,n]}},35509:function(r){"use strict";r.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(r){"use strict";r.exports=function(r,n,i){return n&&i?function(n,i,a,o,s){n||(n=[]),i*=3,a*=3;var l,u,c,f,h,p,d=o*o,v=1-o,g=v*v,y=v*o*2,m=-3*g,x=3*(g-y),b=3*(y-d),_=3*d,w=s*s,T=w*s,k=1-s,A=k*k,M=A*k;for(p=0;p<r.length;p++)l=m*(h=r[p])[a][i]+x*h[a][i+1]+b*h[a][i+2]+_*h[a][i+3],u=m*h[a+1][i]+x*h[a+1][i+1]+b*h[a+1][i+2]+_*h[a+1][i+3],c=m*h[a+2][i]+x*h[a+2][i+1]+b*h[a+2][i+2]+_*h[a+2][i+3],f=m*h[a+3][i]+x*h[a+3][i+1]+b*h[a+3][i+2]+_*h[a+3][i+3],n[p]=M*l+3*(A*s*u+k*w*c)+T*f;return n}:n?function(n,i,a,o,s){n||(n=[]),i*=3;var l,u,c,f,h=o*o,p=1-o,d=p*p,v=p*o*2,g=-3*d,y=3*(d-v),m=3*(v-h),x=3*h,b=1-s;for(c=0;c<r.length;c++)l=g*(f=r[c])[a][i]+y*f[a][i+1]+m*f[a][i+2]+x*f[a][i+3],u=g*f[a+1][i]+y*f[a+1][i+1]+m*f[a+1][i+2]+x*f[a+1][i+3],n[c]=b*l+s*u;return n}:i?function(n,i,a,o,s){n||(n=[]),a*=3;var l,u,c,f,h,p,d=s*s,v=d*s,g=1-s,y=g*g,m=y*g;for(h=0;h<r.length;h++)l=(p=r[h])[a][i+1]-p[a][i],u=p[a+1][i+1]-p[a+1][i],c=p[a+2][i+1]-p[a+2][i],f=p[a+3][i+1]-p[a+3][i],n[h]=m*l+3*(y*s*u+g*d*c)+v*f;return n}:function(n,i,a,o,s){n||(n=[]);var l,u,c,f,h=1-s;for(c=0;c<r.length;c++)l=(f=r[c])[a][i+1]-f[a][i],u=f[a+1][i+1]-f[a+1][i],n[c]=h*l+s*u;return n}}},73057:function(r){"use strict";r.exports=function(r,n,i){return n&&i?function(n,i,a,o,s){n||(n=[]),i*=3,a*=3;var l,u,c,f,h,p,d=o*o,v=d*o,g=1-o,y=g*g,m=y*g,x=s*s,b=1-s,_=b*b,w=b*s*2,T=-3*_,k=3*(_-w),A=3*(w-x),M=3*x;for(p=0;p<r.length;p++)l=T*(h=r[p])[a][i]+k*h[a+1][i]+A*h[a+2][i]+M*h[a+3][i],u=T*h[a][i+1]+k*h[a+1][i+1]+A*h[a+2][i+1]+M*h[a+3][i+1],c=T*h[a][i+2]+k*h[a+1][i+2]+A*h[a+2][i+2]+M*h[a+3][i+2],f=T*h[a][i+3]+k*h[a+1][i+3]+A*h[a+2][i+3]+M*h[a+3][i+3],n[p]=m*l+3*(y*o*u+g*d*c)+v*f;return n}:n?function(n,i,a,o,s){n||(n=[]),i*=3;var l,u,c,f,h,p,d=s*s,v=d*s,g=1-s,y=g*g,m=y*g;for(h=0;h<r.length;h++)l=(p=r[h])[a+1][i]-p[a][i],u=p[a+1][i+1]-p[a][i+1],c=p[a+1][i+2]-p[a][i+2],f=p[a+1][i+3]-p[a][i+3],n[h]=m*l+3*(y*s*u+g*d*c)+v*f;return n}:i?function(n,i,a,o,s){n||(n=[]),a*=3;var l,u,c,f,h=1-o,p=s*s,d=1-s,v=d*d,g=d*s*2,y=-3*v,m=3*(v-g),x=3*(g-p),b=3*p;for(c=0;c<r.length;c++)l=y*(f=r[c])[a][i]+m*f[a+1][i]+x*f[a+2][i]+b*f[a+3][i],u=y*f[a][i+1]+m*f[a+1][i+1]+x*f[a+2][i+1]+b*f[a+3][i+1],n[c]=h*l+o*u;return n}:function(n,i,a,o,s){n||(n=[]);var l,u,c,f,h=1-o;for(c=0;c<r.length;c++)l=(f=r[c])[a+1][i]-f[a][i],u=f[a+1][i+1]-f[a][i+1],n[c]=h*l+o*u;return n}}},20349:function(r){"use strict";r.exports=function(r,n,i,a,o){var s=n-2,l=i-2;return a&&o?function(n,i,a){n||(n=[]);var o,u,c,f,h,p,d=Math.max(0,Math.min(Math.floor(i),s)),v=Math.max(0,Math.min(Math.floor(a),l)),g=Math.max(0,Math.min(1,i-d)),y=Math.max(0,Math.min(1,a-v));d*=3,v*=3;var m=g*g,x=m*g,b=1-g,_=b*b,w=_*b,T=y*y,k=T*y,A=1-y,M=A*A,S=M*A;for(p=0;p<r.length;p++)o=w*(h=r[p])[v][d]+3*(_*g*h[v][d+1]+b*m*h[v][d+2])+x*h[v][d+3],u=w*h[v+1][d]+3*(_*g*h[v+1][d+1]+b*m*h[v+1][d+2])+x*h[v+1][d+3],c=w*h[v+2][d]+3*(_*g*h[v+2][d+1]+b*m*h[v+2][d+2])+x*h[v+2][d+3],f=w*h[v+3][d]+3*(_*g*h[v+3][d+1]+b*m*h[v+3][d+2])+x*h[v+3][d+3],n[p]=S*o+3*(M*y*u+A*T*c)+k*f;return n}:a?function(n,i,a){n||(n=[]);var o,u,c,f,h,p,d=Math.max(0,Math.min(Math.floor(i),s)),v=Math.max(0,Math.min(Math.floor(a),l)),g=Math.max(0,Math.min(1,i-d)),y=Math.max(0,Math.min(1,a-v));d*=3;var m=g*g,x=m*g,b=1-g,_=b*b,w=_*b,T=1-y;for(h=0;h<r.length;h++)o=T*(p=r[h])[v][d]+y*p[v+1][d],u=T*p[v][d+1]+y*p[v+1][d+1],c=T*p[v][d+2]+y*p[v+1][d+1],f=T*p[v][d+3]+y*p[v+1][d+1],n[h]=w*o+3*(_*g*u+b*m*c)+x*f;return n}:o?function(n,i,a){n||(n=[]);var o,u,c,f,h,p,d=Math.max(0,Math.min(Math.floor(i),s)),v=Math.max(0,Math.min(Math.floor(a),l)),g=Math.max(0,Math.min(1,i-d)),y=Math.max(0,Math.min(1,a-v));v*=3;var m=y*y,x=m*y,b=1-y,_=b*b,w=_*b,T=1-g;for(h=0;h<r.length;h++)o=T*(p=r[h])[v][d]+g*p[v][d+1],u=T*p[v+1][d]+g*p[v+1][d+1],c=T*p[v+2][d]+g*p[v+2][d+1],f=T*p[v+3][d]+g*p[v+3][d+1],n[h]=w*o+3*(_*y*u+b*m*c)+x*f;return n}:function(n,i,a){n||(n=[]);var o,u,c,f,h=Math.max(0,Math.min(Math.floor(i),s)),p=Math.max(0,Math.min(Math.floor(a),l)),d=Math.max(0,Math.min(1,i-h)),v=Math.max(0,Math.min(1,a-p)),g=1-v,y=1-d;for(c=0;c<r.length;c++)o=y*(f=r[c])[p][h]+d*f[p][h+1],u=y*f[p+1][h]+d*f[p+1][h+1],n[c]=g*o+v*u;return n}}},92087:function(r,n,i){"use strict";var a=i(71828),o=i(19237),s=i(13145),l=i(99798),u=i(22399);r.exports=function(r,n,i,c){function f(i,o){return a.coerce(r,n,l,i,o)}n._clipPathId="clip"+n.uid+"carpet";var h=f("color",u.defaultLine);a.coerceFont(f,"font"),f("carpet"),s(r,n,c,f,h),n.a&&n.b?(n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0),o(r,n,f)||(n.visible=!1),n._cheater&&f("cheaterslope")):n.visible=!1}},21462:function(r,n,i){"use strict";r.exports={attributes:i(99798),supplyDefaults:i(92087),plot:i(89740),calc:i(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:i(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(r){"use strict";r.exports=function(r,n){for(var i,a=r._fullData.length,o=0;o<a;o++){var s=r._fullData[o];if(s.index!==n.index&&"carpet"===s.type&&(i||(i=s),s.carpet===n.carpet))return s}return i}},67961:function(r){"use strict";r.exports=function(r,n,i){if(0===r.length)return"";var a,o=[],s=i?3:1;for(a=0;a<r.length;a+=s)o.push(r[a]+","+n[a]),i&&a<r.length-s&&(o.push("C"),o.push([r[a+1]+","+n[a+1],r[a+2]+","+n[a+2]+" "].join(" ")));return o.join(i?"":"L")}},27669:function(r,n,i){"use strict";var a=i(71828).isArrayOrTypedArray;r.exports=function(r,n,i){var o;for(a(r)?r.length>n.length&&(r=r.slice(0,n.length)):r=[],o=0;o<n.length;o++)r[o]=i(n[o]);return r}},11651:function(r){"use strict";r.exports=function(r,n,i,a,o,s){var l=o[0]*r.dpdx(n),u=o[1]*r.dpdy(i),c=1,f=1;if(s){var h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),p=Math.sqrt(s[0]*s[0]+s[1]*s[1]);f=Math.max(0,(o[0]*s[0]+o[1]*s[1])/h/p)}var d=180*Math.atan2(u,l)/Math.PI;return d<-90?(d+=180,c=-c):d>90&&(d-=180,c=-c),{angle:d,flip:c,p:r.c2p(a,n,i),offsetMultplier:f}}},89740:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(27669),l=i(67961),u=i(11651),c=i(63893),f=i(71828),h=f.strRotate,p=f.strTranslate,d=i(18783);function v(r,n,i,u,c,f,h){var p="const-"+c+"-lines",d=i.selectAll("."+p).data(f);d.enter().append("path").classed(p,!0).style("vector-effect",h?"none":"non-scaling-stroke"),d.each(function(i){var u=i.x,c=i.y,f="M"+l(s([],u,r.c2p),s([],c,n.c2p),i.smoothing);a.select(this).attr("d",f).style("stroke-width",i.width).style("stroke",i.color).style("stroke-dasharray",o.dashStyle(i.dash,i.width)).style("fill","none")}),d.exit().remove()}function g(r,n,i,s,l,f,d,v){var g=f.selectAll("text."+v).data(d);g.enter().append("text").classed(v,!0);var y=0,m={};return g.each(function(l,f){if("auto"===l.axis.tickangle)d=u(s,n,i,l.xy,l.dxy);else{var d,v=(l.axis.tickangle+180)*Math.PI/180;d=u(s,n,i,l.xy,[Math.cos(v),Math.sin(v)])}f||(m={angle:d.angle,flip:d.flip});var g=(l.endAnchor?-1:1)*d.flip,x=a.select(this).attr({"text-anchor":g>0?"start":"end","data-notex":1}).call(o.font,l.font).text(l.text).call(c.convertToTspans,r),b=o.bBox(this);x.attr("transform",p(d.p[0],d.p[1])+h(d.angle)+p(l.axis.labelpadding*g,.3*b.height)),y=Math.max(y,b.width+l.axis.labelpadding)}),g.exit().remove(),m.maxExtent=y,m}r.exports=function(r,n,i,o){var c=r._context.staticPlot,h=n.xaxis,p=n.yaxis,d=r._fullLayout._clips;f.makeTraceGroups(o,i,"trace").each(function(n){var i,o,y,m,b,_,w,T,k=a.select(this),A=n[0],M=A.trace,S=M.aaxis,E=M.baxis,L=f.ensureSingle(k,"g","minorlayer"),C=f.ensureSingle(k,"g","majorlayer"),O=f.ensureSingle(k,"g","boundarylayer"),P=f.ensureSingle(k,"g","labellayer");k.style("opacity",M.opacity),v(h,p,C,0,"a",S._gridlines,!0),v(h,p,C,0,"b",E._gridlines,!0),v(h,p,L,0,"a",S._minorgridlines,!0),v(h,p,L,0,"b",E._minorgridlines,!0),v(h,p,O,0,"a-boundary",S._boundarylines,c),v(h,p,O,0,"b-boundary",E._boundarylines,c);var I=g(r,h,p,M,0,P,S._labels,"a-label"),D=g(r,h,p,M,0,P,E._labels,"b-label");b=f.aggNums(Math.min,null,M.a),_=f.aggNums(Math.max,null,M.a),w=f.aggNums(Math.min,null,M.b),T=f.aggNums(Math.max,null,M.b),i=.5*(b+_),o=w,y=M.ab2xy(i,o,!0),m=M.dxyda_rough(i,o),void 0===I.angle&&f.extendFlat(I,u(M,h,p,y,M.dxydb_rough(i,o))),x(r,P,M,0,y,m,M.aaxis,h,p,I,"a-title"),i=b,o=.5*(w+T),y=M.ab2xy(i,o,!0),m=M.dxydb_rough(i,o),void 0===D.angle&&f.extendFlat(D,u(M,h,p,y,M.dxyda_rough(i,o))),x(r,P,M,0,y,m,M.baxis,h,p,D,"b-title"),function(r,n,i,a,o){var u,c,h=i.select("#"+r._clipPathId);h.size()||(h=i.append("clipPath").classed("carpetclip",!0));var p=f.ensureSingle(h,"path","carpetboundary"),d=n.clipsegments,v=[];for(c=0;c<d.length;c++)v.push(l(s([],(u=d[c]).x,a.c2p),s([],u.y,o.c2p),u.bicubic));var g="M"+v.join("L")+"Z";h.attr("id",r._clipPathId),p.attr("d",g)}(M,A,d,h,p)})};var y=d.LINE_SPACING,m=(1-d.MID_SHIFT)/y+1;function x(r,n,i,s,l,f,d,v,g,x,b){var _=[];d.title.text&&_.push(d.title.text);var w=n.selectAll("text."+b).data(_),T=x.maxExtent;w.enter().append("text").classed(b,!0),w.each(function(){var n=u(i,v,g,l,f);-1===["start","both"].indexOf(d.showticklabels)&&(T=0);var s=d.title.font.size;T+=s+d.title.offset;var b=(x.angle+(x.flip<0?180:0)-n.angle+450)%360,_=a.select(this);_.text(d.title.text).call(c.convertToTspans,r),b>90&&b<270&&(T=(-c.lineCount(_)+m)*y*s-T),_.attr("transform",p(n.p[0],n.p[1])+h(n.angle)+p(0,T)).attr("text-anchor","middle").call(o.font,d.title.font)}),w.exit().remove()}},11435:function(r,n,i){"use strict";var a=i(35509),o=i(65888).findBin,s=i(45664),l=i(20349),u=i(54495),c=i(73057);r.exports=function(r){var n=r._a,i=r._b,f=n.length,h=i.length,p=r.aaxis,d=r.baxis,v=n[0],g=n[f-1],y=i[0],m=i[h-1],x=n[n.length-1]-n[0],b=i[i.length-1]-i[0],_=x*a.RELATIVE_CULL_TOLERANCE,w=b*a.RELATIVE_CULL_TOLERANCE;v-=_,g+=_,y-=w,m+=w,r.isVisible=function(r,n){return r>v&&r<g&&n>y&&n<m},r.isOccluded=function(r,n){return r<v||r>g||n<y||n>m},r.setScale=function(){var n=r._x,i=r._y,a=s(r._xctrl,r._yctrl,n,i,p.smoothing,d.smoothing);r._xctrl=a[0],r._yctrl=a[1],r.evalxy=l([r._xctrl,r._yctrl],f,h,p.smoothing,d.smoothing),r.dxydi=u([r._xctrl,r._yctrl],p.smoothing,d.smoothing),r.dxydj=c([r._xctrl,r._yctrl],p.smoothing,d.smoothing)},r.i2a=function(r){var i=Math.max(0,Math.floor(r[0]),f-2),a=r[0]-i;return(1-a)*n[i]+a*n[i+1]},r.j2b=function(r){var n=Math.max(0,Math.floor(r[1]),f-2),a=r[1]-n;return(1-a)*i[n]+a*i[n+1]},r.ij2ab=function(n){return[r.i2a(n[0]),r.j2b(n[1])]},r.a2i=function(r){var i=Math.max(0,Math.min(o(r,n),f-2)),a=n[i],s=n[i+1];return Math.max(0,Math.min(f-1,i+(r-a)/(s-a)))},r.b2j=function(r){var n=Math.max(0,Math.min(o(r,i),h-2)),a=i[n],s=i[n+1];return Math.max(0,Math.min(h-1,n+(r-a)/(s-a)))},r.ab2ij=function(n){return[r.a2i(n[0]),r.b2j(n[1])]},r.i2c=function(n,i){return r.evalxy([],n,i)},r.ab2xy=function(a,o,s){if(!s&&(a<n[0]||a>n[f-1]|o<i[0]||o>i[h-1]))return[!1,!1];var l=r.a2i(a),u=r.b2j(o),c=r.evalxy([],l,u);if(s){var p,d,v,g,y=0,m=0,x=[];a<n[0]?(p=0,d=0,y=(a-n[0])/(n[1]-n[0])):a>n[f-1]?(p=f-2,d=1,y=(a-n[f-1])/(n[f-1]-n[f-2])):d=l-(p=Math.max(0,Math.min(f-2,Math.floor(l)))),o<i[0]?(v=0,g=0,m=(o-i[0])/(i[1]-i[0])):o>i[h-1]?(v=h-2,g=1,m=(o-i[h-1])/(i[h-1]-i[h-2])):g=u-(v=Math.max(0,Math.min(h-2,Math.floor(u)))),y&&(r.dxydi(x,p,v,d,g),c[0]+=x[0]*y,c[1]+=x[1]*y),m&&(r.dxydj(x,p,v,d,g),c[0]+=x[0]*m,c[1]+=x[1]*m)}return c},r.c2p=function(r,n,i){return[n.c2p(r[0]),i.c2p(r[1])]},r.p2x=function(r,n,i){return[n.p2c(r[0]),i.p2c(r[1])]},r.dadi=function(r){var i=Math.max(0,Math.min(n.length-2,r));return n[i+1]-n[i]},r.dbdj=function(r){var n=Math.max(0,Math.min(i.length-2,r));return i[n+1]-i[n]},r.dxyda=function(n,i,a,o){var s=r.dxydi(null,n,i,a,o),l=r.dadi(n,a);return[s[0]/l,s[1]/l]},r.dxydb=function(n,i,a,o){var s=r.dxydj(null,n,i,a,o),l=r.dbdj(i,o);return[s[0]/l,s[1]/l]},r.dxyda_rough=function(n,i,a){var o=x*(a||.1),s=r.ab2xy(n+o,i,!0),l=r.ab2xy(n-o,i,!0);return[.5*(s[0]-l[0])/o,.5*(s[1]-l[1])/o]},r.dxydb_rough=function(n,i,a){var o=b*(a||.1),s=r.ab2xy(n,i+o,!0),l=r.ab2xy(n,i-o,!0);return[.5*(s[0]-l[0])/o,.5*(s[1]-l[1])/o]},r.dpdx=function(r){return r._m},r.dpdy=function(r){return r._m}}},72505:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n,i){var o,s,l,u,c,f,h,p,d,v,g,y,m,x,b=[],_=[],w=r[0].length,T=r.length,k=0;for(o=0;o<w;o++)for(s=0;s<T;s++)void 0===r[s][o]&&(b.push(o),_.push(s),r[s][o]=function(n,i){var a,o=0,s=0;return n>0&&void 0!==(a=r[i][n-1])&&(s++,o+=a),n<w-1&&void 0!==(a=r[i][n+1])&&(s++,o+=a),i>0&&void 0!==(a=r[i-1][n])&&(s++,o+=a),i<T-1&&void 0!==(a=r[i+1][n])&&(s++,o+=a),o/Math.max(1,s)}(o,s)),k=Math.max(k,Math.abs(r[s][o]));if(!b.length)return r;var A=0,M=0,S=b.length;do{for(A=0,l=0;l<S;l++){o=b[l],s=_[l];var E,L,C,O,P,I,D=0,z=0;0===o?(C=n[P=Math.min(w-1,2)],O=n[1],E=r[s][P],z+=(L=r[s][1])+(L-E)*(n[0]-O)/(O-C),D++):o===w-1&&(C=n[P=Math.max(0,w-3)],O=n[w-2],E=r[s][P],z+=(L=r[s][w-2])+(L-E)*(n[w-1]-O)/(O-C),D++),(0===o||o===w-1)&&s>0&&s<T-1&&(u=i[s+1]-i[s],z+=((c=i[s]-i[s-1])*r[s+1][o]+u*r[s-1][o])/(c+u),D++),0===s?(C=i[I=Math.min(T-1,2)],O=i[1],E=r[I][o],z+=(L=r[1][o])+(L-E)*(i[0]-O)/(O-C),D++):s===T-1&&(C=i[I=Math.max(0,T-3)],O=i[T-2],E=r[I][o],z+=(L=r[T-2][o])+(L-E)*(i[T-1]-O)/(O-C),D++),(0===s||s===T-1)&&o>0&&o<w-1&&(u=n[o+1]-n[o],z+=((c=n[o]-n[o-1])*r[s][o+1]+u*r[s][o-1])/(c+u),D++),D?z/=D:(f=n[o+1]-n[o],h=n[o]-n[o-1],g=(p=i[s+1]-i[s])*(d=i[s]-i[s-1])*(p+d),z=((v=f*h*(f+h))*(d*r[s+1][o]+p*r[s-1][o])+g*(h*r[s][o+1]+f*r[s][o-1]))/(g*(h+f)+v*(d+p))),A+=(m=(y=z-r[s][o])/k)*m,x=D?0:.85,r[s][o]+=y*(1+x)}A=Math.sqrt(A)}while(M++<100&&A>1e-5);return a.log("Smoother converged to",A,"after",M,"iterations"),r}},19237:function(r,n,i){"use strict";var a=i(71828).isArray1D;r.exports=function(r,n,i){var o=i("x"),s=o&&o.length,l=i("y"),u=l&&l.length;if(!s&&!u)return!1;if(n._cheater=!o,s&&!a(o)||u&&!a(l))n._length=null;else{var c=s?o.length:1/0;u&&(c=Math.min(c,l.length)),n.a&&n.a.length&&(c=Math.min(c,n.a.length)),n.b&&n.b.length&&(c=Math.min(c,n.b.length)),n._length=c}return!0}},69568:function(r,n,i){"use strict";var a=i(5386).fF,o=i(19316),s=i(50693),l=i(9012),u=i(22399).defaultLine,c=i(1426).extendFlat,f=o.marker.line;r.exports=c({locations:{valType:"data_array",editType:"calc"},locationmode:o.locationmode,z:{valType:"data_array",editType:"calc"},geojson:c({},o.geojson,{}),featureidkey:o.featureidkey,text:c({},o.text,{}),hovertext:c({},o.hovertext,{}),marker:{line:{color:c({},f.color,{dflt:u}),width:c({},f.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:o.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:o.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:c({},l.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:a(),showlegend:c({},l.showlegend,{dflt:!1})},s("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(r,n,i){"use strict";var a=i(92770),o=i(50606).BADNUM,s=i(78803),l=i(75225),u=i(66279);function c(r){return r&&"string"==typeof r}r.exports=function(r,n){var i,f=n._length,h=Array(f);i=n.geojson?function(r){return c(r)||a(r)}:c;for(var p=0;p<f;p++){var d=h[p]={},v=n.locations[p],g=n.z[p];i(v)&&a(g)?(d.loc=v,d.z=g):(d.loc=null,d.z=o),d.index=p}return l(h,n),s(r,n,{vals:n.z,containerStr:"",cLetter:"z"}),u(h,n),h}},61869:function(r,n,i){"use strict";var a=i(71828),o=i(1586),s=i(69568);r.exports=function(r,n,i,l){function u(i,o){return a.coerce(r,n,s,i,o)}var c=u("locations"),f=u("z");if(c&&c.length&&a.isArrayOrTypedArray(f)&&f.length){n._length=Math.min(c.length,f.length);var h,p=u("geojson");("string"==typeof p&&""!==p||a.isPlainObject(p))&&(h="geojson-id"),"geojson-id"===u("locationmode",h)&&u("featureidkey"),u("text"),u("hovertext"),u("hovertemplate"),u("marker.line.width")&&u("marker.line.color"),u("marker.opacity"),o(r,n,l,u,{prefix:"",cLetter:"z"}),a.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},92069:function(r){"use strict";r.exports=function(r,n,i,a,o){r.location=n.location,r.z=n.z;var s=a[o];return s.fIn&&s.fIn.properties&&(r.properties=s.fIn.properties),r.ct=s.ct,r}},42300:function(r,n,i){"use strict";var a=i(89298),o=i(69568),s=i(71828).fillText;r.exports=function(r,n,i){var l,u,c,f,h=r.cd,p=h[0].trace,d=r.subplot,v=[n,i],g=[n+360,i];for(u=0;u<h.length;u++)if(f=!1,(l=h[u])._polygons){for(c=0;c<l._polygons.length;c++)l._polygons[c].contains(v)&&(f=!f),l._polygons[c].contains(g)&&(f=!f);if(f)break}if(f&&l)return r.x0=r.x1=r.xa.c2p(l.ct),r.y0=r.y1=r.ya.c2p(l.ct),r.index=l.index,r.location=l.loc,r.z=l.z,r.zLabel=a.tickText(d.mockAxis,d.mockAxis.c2l(l.z),"hover").text,r.hovertemplate=l.hovertemplate,function(r,n,i){if(!n.hovertemplate){var a=i.hi||n.hoverinfo,l=String(i.loc),u="all"===a?o.hoverinfo.flags:a.split("+"),c=-1!==u.indexOf("name"),f=-1!==u.indexOf("location"),h=-1!==u.indexOf("z"),p=-1!==u.indexOf("text"),d=[];!c&&f?r.nameOverride=l:(c&&(r.nameOverride=n.name),f&&d.push(l)),h&&d.push(r.zLabel),p&&s(i,n,d),r.extraText=d.join("<br>")}}(r,p,l),[r]}},51319:function(r,n,i){"use strict";r.exports={attributes:i(69568),supplyDefaults:i(61869),colorbar:i(61243),calc:i(38675),calcGeoJSON:i(99841).calcGeoJSON,plot:i(99841).plot,style:i(99636).style,styleOnSelect:i(99636).styleOnSelect,hoverPoints:i(42300),eventData:i(92069),selectPoints:i(81253),moduleType:"trace",name:"choropleth",basePlotModule:i(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(41327),l=i(90973).getTopojsonFeatures,u=i(71739).findExtremes,c=i(99636).style;r.exports={calcGeoJSON:function(r,n){for(var i=r[0].trace,a=n[i.geo],o=a._subplot,c=i.locationmode,f=i._length,h="geojson-id"===c?s.extractTraceFeature(r):l(i,o.topojson),p=[],d=[],v=0;v<f;v++){var g=r[v],y="geojson-id"===c?g.fOut:s.locationToFeature(c,g.loc,h);if(y){g.geojson=y,g.ct=y.properties.ct,g._polygons=s.feature2polygons(y);var m=s.computeBbox(y);p.push(m[0],m[2]),d.push(m[1],m[3])}else g.geojson=null}if("geojson"===a.fitbounds&&"geojson-id"===c){var x=s.computeBbox(s.getTraceGeojson(i));p=[x[0],x[2]],d=[x[1],x[3]]}var b={padded:!0};i._extremes.lon=u(a.lonaxis._ax,p,b),i._extremes.lat=u(a.lataxis._ax,d,b)},plot:function(r,n,i){var s=n.layers.backplot.select(".choroplethlayer");o.makeTraceGroups(s,i,"trace choropleth").each(function(n){var i=a.select(this).selectAll("path.choroplethlocation").data(o.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),c(r,n)})}}},81253:function(r){"use strict";r.exports=function(r,n){var i,a,o,s,l,u=r.cd,c=r.xaxis,f=r.yaxis,h=[];if(!1===n)for(i=0;i<u.length;i++)u[i].selected=0;else for(i=0;i<u.length;i++)(o=(a=u[i]).ct)&&(s=c.c2p(o),l=f.c2p(o),n.contains([s,l],null,i,r)?(h.push({pointNumber:i,lon:o[0],lat:o[1]}),a.selected=1):a.selected=0);return h}},99636:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(91424),l=i(21081);function u(r,n){var i=n[0].trace,u=n[0].node3.selectAll(".choroplethlocation"),c=i.marker||{},f=c.line||{},h=l.makeColorScaleFuncFromTrace(i);u.each(function(r){a.select(this).attr("fill",h(r.z)).call(o.stroke,r.mlc||f.color).call(s.dashLine,"",r.mlw||f.width||0).style("opacity",c.opacity)}),s.selectedPointStyle(u,i)}r.exports={style:function(r,n){n&&u(0,n)},styleOnSelect:function(r,n){var i=n[0].node3,a=n[0].trace;a.selectedpoints?s.selectedPointStyle(i.selectAll(".choroplethlocation"),a):u(0,n)}}},64496:function(r,n,i){"use strict";var a=i(69568),o=i(50693),s=i(5386).fF,l=i(9012),u=i(1426).extendFlat;r.exports=u({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:u({},a.featureidkey,{}),below:{valType:"string",editType:"plot"},text:a.text,hovertext:a.hovertext,marker:{line:{color:u({},a.marker.line.color,{editType:"plot"}),width:u({},a.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:u({},a.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:u({},a.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:u({},a.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:a.hoverinfo,hovertemplate:s({},{keys:["properties"]}),showlegend:u({},l.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(21081),l=i(91424),u=i(18214).makeBlank,c=i(41327);function f(r){var n,i=r[0].trace,a=i._opts;if(i.selectedpoints){for(var s=l.makeSelectedPointStyleFns(i),u=0;u<r.length;u++){var c=r[u];c.fOut&&(c.fOut.properties.mo2=s.selectedOpacityFn(c))}n={type:"identity",property:"mo2"}}else n=o.isArrayOrTypedArray(i.marker.opacity)?{type:"identity",property:"mo"}:i.marker.opacity;return o.extendFlat(a.fill.paint,{"fill-opacity":n}),o.extendFlat(a.line.paint,{"line-opacity":n}),a}r.exports={convert:function(r){var n=r[0].trace,i=!0===n.visible&&0!==n._length,l={layout:{visibility:"none"},paint:{}},h={layout:{visibility:"none"},paint:{}},p=n._opts={fill:l,line:h,geojson:u()};if(!i)return p;var d=c.extractTraceFeature(r);if(!d)return p;var v,g,y,m=s.makeColorScaleFuncFromTrace(n),x=n.marker,b=x.line||{};o.isArrayOrTypedArray(x.opacity)&&(v=function(r){var n=r.mo;return a(n)?+o.constrain(n,0,1):0}),o.isArrayOrTypedArray(b.color)&&(g=function(r){return r.mlc}),o.isArrayOrTypedArray(b.width)&&(y=function(r){return r.mlw});for(var _=0;_<r.length;_++){var w=r[_],T=w.fOut;if(T){var k=T.properties;k.fc=m(w.z),v&&(k.mo=v(w)),g&&(k.mlc=g(w)),y&&(k.mlw=y(w)),w.ct=k.ct,w._polygons=c.feature2polygons(T)}}var A=v?{type:"identity",property:"mo"}:x.opacity;return o.extendFlat(l.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":A}),o.extendFlat(h.paint,{"line-color":g?{type:"identity",property:"mlc"}:b.color,"line-width":y?{type:"identity",property:"mlw"}:b.width,"line-opacity":A}),l.layout.visibility="visible",h.layout.visibility="visible",p.geojson={type:"FeatureCollection",features:d},f(r),p},convertOnSelect:f}},22654:function(r,n,i){"use strict";var a=i(71828),o=i(1586),s=i(64496);r.exports=function(r,n,i,l){function u(i,o){return a.coerce(r,n,s,i,o)}var c=u("locations"),f=u("z"),h=u("geojson");a.isArrayOrTypedArray(c)&&c.length&&a.isArrayOrTypedArray(f)&&f.length&&("string"==typeof h&&""!==h||a.isPlainObject(h))?(u("featureidkey"),n._length=Math.min(c.length,f.length),u("below"),u("text"),u("hovertext"),u("hovertemplate"),u("marker.line.width")&&u("marker.line.color"),u("marker.opacity"),o(r,n,l,u,{prefix:"",cLetter:"z"}),a.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},57516:function(r,n,i){"use strict";r.exports={attributes:i(64496),supplyDefaults:i(22654),colorbar:i(61243),calc:i(38675),plot:i(7852),hoverPoints:i(42300),eventData:i(92069),selectPoints:i(81253),styleOnSelect:function(r,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(r,n){for(var i=n.getMapLayers(),a=i.length-2;a>=0;a--){var o=i[a].id;if("string"==typeof o&&0===o.indexOf("water")){for(var s=a+1;s<i.length;s++)if("string"==typeof(o=i[s].id)&&-1===o.indexOf("plotly-"))return o}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:i(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(r,n,i){"use strict";var a=i(82004).convert,o=i(82004).convertOnSelect,s=i(77734).traceLayerPrefix;function l(r,n){this.type="choroplethmapbox",this.subplot=r,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",s+n+"-fill"],["line",s+n+"-line"]],this.below=null}var u=l.prototype;u.update=function(r){this._update(a(r)),r[0].trace._glTrace=this},u.updateOnSelect=function(r){this._update(o(r))},u._update=function(r){var n=this.subplot,i=this.layerList,a=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(r.geojson),a!==this.below&&(this._removeLayers(),this._addLayers(r,a),this.below=a);for(var o=0;o<i.length;o++){var s=i[o],l=s[0],u=s[1],c=r[l];n.setOptions(u,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&n.setOptions(u,"setPaintProperty",c.paint)}},u._addLayers=function(r,n){for(var i=this.subplot,a=this.layerList,o=this.sourceId,s=0;s<a.length;s++){var l=a[s],u=l[0],c=r[u];i.addLayer({type:u,id:l[1],source:o,layout:c.layout,paint:c.paint},n)}},u._removeLayers=function(){for(var r=this.subplot.map,n=this.layerList,i=n.length-1;i>=0;i--)r.removeLayer(n[i][1])},u.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},r.exports=function(r,n){var i=n[0].trace,o=new l(r,i.uid),s=o.sourceId,u=a(n),c=o.below=r.belowLookup["trace-"+i.uid];return r.map.addSource(s,{type:"geojson",data:u.geojson}),o._addLayers(u,c),n[0].trace._glTrace=o,o}},12674:function(r,n,i){"use strict";var a=i(50693),o=i(12663).axisHoverFormat,s=i(5386).fF,l=i(2418),u=i(9012),c=i(1426).extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s({editType:"calc"},{keys:["norm"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:c({},u.showlegend,{dflt:!1})};c(f,a("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(r){f[r]=l[r]}),f.hoverinfo=c({},u.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,r.exports=f},31371:function(r,n,i){"use strict";var a=i(78803);r.exports=function(r,n){for(var i=n.u,o=n.v,s=n.w,l=Math.min(n.x.length,n.y.length,n.z.length,i.length,o.length,s.length),u=-1/0,c=1/0,f=0;f<l;f++){var h=i[f],p=o[f],d=s[f],v=Math.sqrt(h*h+p*p+d*d);u=Math.max(u,v),c=Math.min(c,v)}n._len=l,n._normMax=u,a(r,n,{vals:[c,u],containerStr:"",cLetter:"c"})}},5453:function(r,n,i){"use strict";var a=i(9330).gl_cone3d,o=i(9330).gl_cone3d.createConeMesh,s=i(71828).simpleMap,l=i(81697).parseColorScale,u=i(21081).extractOpts,c=i(71828).isArrayOrTypedArray,f=i(90060);function h(r,n){this.scene=r,this.uid=n,this.mesh=null,this.data=null}var p=h.prototype;p.handlePick=function(r){if(r.object===this.mesh){var n=r.index=r.data.index,i=this.data.x[n],a=this.data.y[n],o=this.data.z[n],s=this.data.u[n],l=this.data.v[n],u=this.data.w[n];r.traceCoordinate=[i,a,o,s,l,u,Math.sqrt(s*s+l*l+u*u)];var f=this.data.hovertext||this.data.text;return c(f)&&void 0!==f[n]?r.textLabel=f[n]:f&&(r.textLabel=f),!0}};var d={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},g={tip:1,tail:1,cm:.75,center:.5};function y(r,n){var i=r.fullSceneLayout,o=r.dataScale,c={};function h(r,n){var a=i[n],l=o[d[n]];return s(r,function(r){return a.d2l(r)*l})}c.vectors=f(h(n.u,"xaxis"),h(n.v,"yaxis"),h(n.w,"zaxis"),n._len),c.positions=f(h(n.x,"xaxis"),h(n.y,"yaxis"),h(n.z,"zaxis"),n._len);var p=u(n);c.colormap=l(n),c.vertexIntensityBounds=[p.min/n._normMax,p.max/n._normMax],c.coneOffset=v[n.anchor],"scaled"===n.sizemode?c.coneSize=n.sizeref||.5:c.coneSize=n.sizeref&&n._normMax?n.sizeref/n._normMax:.5;var y=a(c),m=n.lightposition;return y.lightPosition=[m.x,m.y,m.z],y.ambient=n.lighting.ambient,y.diffuse=n.lighting.diffuse,y.specular=n.lighting.specular,y.roughness=n.lighting.roughness,y.fresnel=n.lighting.fresnel,y.opacity=n.opacity,n._pad=g[n.anchor]*y.vectorScale*y.coneScale*n._normMax,y}p.update=function(r){this.data=r;var n=y(this.scene,r);this.mesh.update(n)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=o(r.glplot.gl,y(r,n)),a=new h(r,n.uid);return a.mesh=i,a.data=n,i._trace=a,r.glplot.add(i),a}},91750:function(r,n,i){"use strict";var a=i(71828),o=i(1586),s=i(12674);r.exports=function(r,n,i,l){function u(i,o){return a.coerce(r,n,s,i,o)}var c=u("u"),f=u("v"),h=u("w"),p=u("x"),d=u("y"),v=u("z");c&&c.length&&f&&f.length&&h&&h.length&&p&&p.length&&d&&d.length&&v&&v.length?(u("sizeref"),u("sizemode"),u("anchor"),u("lighting.ambient"),u("lighting.diffuse"),u("lighting.specular"),u("lighting.roughness"),u("lighting.fresnel"),u("lightposition.x"),u("lightposition.y"),u("lightposition.z"),o(r,n,l,u,{prefix:"",cLetter:"c"}),u("text"),u("hovertext"),u("hovertemplate"),u("uhoverformat"),u("vhoverformat"),u("whoverformat"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),n._length=null):n.visible=!1}},98128:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"cone",basePlotModule:i(58547),categories:["gl3d","showLegend"],attributes:i(12674),supplyDefaults:i(91750),colorbar:{min:"cmin",max:"cmax"},calc:i(31371),plot:i(5453),eventData:function(r,n){return r.norm=n.traceCoordinate[6],r},meta:{}}},70600:function(r,n,i){"use strict";var a=i(21606),o=i(82196),s=i(12663),l=s.axisHoverFormat,u=s.descriptionOnlyNumbers,c=i(50693),f=i(79952).P,h=i(41940),p=i(1426).extendFlat,d=i(74808),v=d.COMPARISON_OPS2,g=d.INTERVAL_OPS,y=o.line;r.exports=p({z:a.z,x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,text:a.text,hovertext:a.hovertext,transpose:a.transpose,xtype:a.xtype,ytype:a.ytype,xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z",1),hovertemplate:a.hovertemplate,texttemplate:p({},a.texttemplate,{}),textfont:p({},a.textfont,{}),hoverongaps:a.hoverongaps,connectgaps:p({},a.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:h({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:u("contour label")},operation:{valType:"enumerated",values:[].concat(v).concat(g),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:p({},y.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:f,smoothing:p({},y.smoothing,{}),editType:"plot"}},c("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(r,n,i){"use strict";var a=i(21081),o=i(90757),s=i(18670),l=i(53572);r.exports=function(r,n){var i=o(r,n),u=i[0].z;s(n,u);var c,f=n.contours,h=a.extractOpts(n);if("heatmap"===f.coloring&&h.auto&&!1===n.autocontour){var p=f.start,d=l(f),v=f.size||1,g=Math.floor((d-p)/v)+1;isFinite(v)||(v=1,g=1);var y=p-v/2;c=[y,y+g*v]}else c=u;return a.calc(r,n,{vals:c,cLetter:"z"}),i}},20083:function(r){"use strict";r.exports=function(r,n){var i,a=r[0],o=a.z;switch(n.type){case"levels":var s=Math.min(o[0][0],o[0][1]);for(i=0;i<r.length;i++){var l=r[i];l.prefixBoundary=!l.edgepaths.length&&(s>l.level||l.starts.length&&s===l.level)}break;case"constraint":if(a.prefixBoundary=!1,a.edgepaths.length)return;var u=a.x.length,c=a.y.length,f=-1/0,h=1/0;for(i=0;i<c;i++)h=Math.min(h=Math.min(h,o[i][0]),o[i][u-1]),f=Math.max(f=Math.max(f,o[i][0]),o[i][u-1]);for(i=1;i<u-1;i++)h=Math.min(h=Math.min(h,o[0][i]),o[c-1][i]),f=Math.max(f=Math.max(f,o[0][i]),o[c-1][i]);var p,d,v=n.value;switch(n._operation){case">":v>f&&(a.prefixBoundary=!0);break;case"<":(v<h||a.starts.length&&v===h)&&(a.prefixBoundary=!0);break;case"[]":p=Math.min(v[0],v[1]),((d=Math.max(v[0],v[1]))<h||p>f||a.starts.length&&d===h)&&(a.prefixBoundary=!0);break;case"][":p=Math.min(v[0],v[1]),d=Math.max(v[0],v[1]),p<h&&d>f&&(a.prefixBoundary=!0)}}}},90654:function(r,n,i){"use strict";var a=i(21081),o=i(86068),s=i(53572);r.exports={min:"zmin",max:"zmax",calc:function(r,n,i){var l=n.contours,u=n.line,c=l.size||1,f=l.coloring,h=o(n,{isColorbar:!0});if("heatmap"===f){var p=a.extractOpts(n);i._fillgradient=p.reversescale?a.flipScale(p.colorscale):p.colorscale,i._zrange=[p.min,p.max]}else"fill"===f&&(i._fillcolor=h);i._line={color:"lines"===f?h:u.color,width:!1!==l.showlines?u.width:0,dash:u.dash},i._levels={start:l.start,end:s(l),size:c}}}},36914:function(r){"use strict";r.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(r,n,i){"use strict";var a=i(92770),o=i(14523),s=i(7901),l=s.addOpacity,u=s.opacity,c=i(74808),f=i(71828).isArrayOrTypedArray,h=c.CONSTRAINT_REDUCTION,p=c.COMPARISON_OPS2;r.exports=function(r,n,i,s,c,d){var v,g,y,m,x=n.contours,b=i("contours.operation");x._operation=h[b],-1===p.indexOf(x.operation)?(i("contours.value",[0,1]),f(x.value)?x.value.length>2?x.value=x.value.slice(2):0===x.length?x.value=[0,1]:x.length<2?(v=parseFloat(x.value[0]),x.value=[v,v+1]):x.value=[parseFloat(x.value[0]),parseFloat(x.value[1])]:a(x.value)&&(v=parseFloat(x.value),x.value=[v,v+1])):(i("contours.value",0),a(x.value)||(f(x.value)?x.value=parseFloat(x.value[0]):x.value=0)),"="===b?g=x.showlines=!0:(g=i("contours.showlines"),m=i("fillcolor",l((r.line||{}).color||c,.5))),g&&(y=i("line.color",m&&u(m)?l(n.fillcolor,1):c),i("line.width",2),i("line.dash")),i("line.smoothing"),o(i,s,y,d)}},64237:function(r,n,i){"use strict";var a=i(74808),o=i(92770);function s(r,n){var i,s=Array.isArray(n);function l(r){return o(r)?+r:null}return -1!==a.COMPARISON_OPS2.indexOf(r)?i=l(s?n[0]:n):-1!==a.INTERVAL_OPS.indexOf(r)?i=s?[l(n[0]),l(n[1])]:[l(n),l(n)]:-1!==a.SET_OPS.indexOf(r)&&(i=s?n.map(l):[l(n)]),i}function l(r){return function(n){var i=Math.min((n=s(r,n))[0],n[1]),a=Math.max(n[0],n[1]);return{start:i,end:a,size:a-i}}}function u(r){return function(n){return{start:n=s(r,n),end:1/0,size:1/0}}}r.exports={"[]":l("[]"),"][":l("]["),">":u(">"),"<":u("<"),"=":u("=")}},67217:function(r){"use strict";r.exports=function(r,n,i,a){var o=a("contours.start"),s=a("contours.end"),l=i("contours.size");((!1===o||!1===s?n.autocontour=!0:i("autocontour",!1))||!l)&&i("ncontours")}},84857:function(r,n,i){"use strict";var a=i(71828);function o(r){return a.extendFlat({},r,{edgepaths:a.extendDeep([],r.edgepaths),paths:a.extendDeep([],r.paths),starts:a.extendDeep([],r.starts)})}r.exports=function(r,n){var i,s,l,u=function(r){return r.reverse()},c=function(r){return r};switch(n){case"=":case"<":return r;case">":for(1!==r.length&&a.warn("Contour data invalid for the specified inequality operation."),s=r[0],i=0;i<s.edgepaths.length;i++)s.edgepaths[i]=u(s.edgepaths[i]);for(i=0;i<s.paths.length;i++)s.paths[i]=u(s.paths[i]);for(i=0;i<s.starts.length;i++)s.starts[i]=u(s.starts[i]);return r;case"][":var f=u;u=c,c=f;case"[]":for(2!==r.length&&a.warn("Contour data invalid for the specified inequality range operation."),s=o(r[0]),l=o(r[1]),i=0;i<s.edgepaths.length;i++)s.edgepaths[i]=u(s.edgepaths[i]);for(i=0;i<s.paths.length;i++)s.paths[i]=u(s.paths[i]);for(i=0;i<s.starts.length;i++)s.starts[i]=u(s.starts[i]);for(;l.edgepaths.length;)s.edgepaths.push(c(l.edgepaths.shift()));for(;l.paths.length;)s.paths.push(c(l.paths.shift()));for(;l.starts.length;)s.starts.push(c(l.starts.shift()));return[s]}}},13031:function(r,n,i){"use strict";var a=i(71828),o=i(67684),s=i(73927),l=i(83179),u=i(67217),c=i(8724),f=i(58623),h=i(70600);r.exports=function(r,n,i,p){function d(i,o){return a.coerce(r,n,h,i,o)}if(o(r,n,d,p)){s(r,n,p,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var v="constraint"===d("contours.type");d("connectgaps",a.isArray1D(n.z)),v?l(r,n,d,p,i):(u(r,n,d,function(i){return a.coerce2(r,n,h,i)}),c(r,n,d,p)),n.contours&&"heatmap"===n.contours.coloring&&f(d,p)}else n.visible=!1}},87558:function(r,n,i){"use strict";var a=i(71828),o=i(64237),s=i(53572);r.exports=function(r,n,i){for(var l="constraint"===r.type?o[r._operation](r.value):r,u=l.size,c=[],f=s(l),h=i.trace._carpetTrace,p=h?{xaxis:h.aaxis,yaxis:h.baxis,x:i.a,y:i.b}:{xaxis:n.xaxis,yaxis:n.yaxis,x:i.x,y:i.y},d=l.start;d<f;d+=u)if(c.push(a.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},p)),c.length>1e3){a.warn("Too many contours, clipping at 1000",r);break}return c}},53572:function(r){"use strict";r.exports=function(r){return r.end+r.size/1e6}},81696:function(r,n,i){"use strict";var a=i(71828),o=i(36914);function s(r,n,i,a){return Math.abs(r[0]-n[0])<i&&Math.abs(r[1]-n[1])<a}function l(r,n,i,l,c){var f,h,p,d,v=n.join(","),g=r.crossings[v],y=(h=0,p=0,(f=g)>20&&i?208===f||1114===f?h=0===n[0]?1:-1:p=0===n[1]?1:-1:-1!==o.BOTTOMSTART.indexOf(f)?p=1:-1!==o.LEFTSTART.indexOf(f)?h=1:-1!==o.TOPSTART.indexOf(f)?p=-1:h=-1,[h,p]),m=[u(r,n,[-y[0],-y[1]])],x=r.z.length,b=r.z[0].length,_=n.slice(),w=y.slice();for(d=0;d<1e4;d++){if(g>20?(g=o.CHOOSESADDLE[g][0>(y[0]||y[1])?0:1],r.crossings[v]=o.SADDLEREMAINDER[g]):delete r.crossings[v],!(y=o.NEWDELTA[g])){a.log("Found bad marching index:",g,n,r.level);break}m.push(u(r,n,y)),n[0]+=y[0],n[1]+=y[1],v=n.join(","),s(m[m.length-1],m[m.length-2],l,c)&&m.pop();var T=y[0]&&(n[0]<0||n[0]>b-2)||y[1]&&(n[1]<0||n[1]>x-2);if(n[0]===_[0]&&n[1]===_[1]&&y[0]===w[0]&&y[1]===w[1]||i&&T)break;g=r.crossings[v]}1e4===d&&a.log("Infinite loop in contour?");var k,A,M,S,E,L,C,O,P,I,D,z,R,F,B,N=s(m[0],m[m.length-1],l,c),j=0,U=.2*r.smoothing,V=[],H=0;for(d=1;d<m.length;d++)z=m[d],R=m[d-1],j+=C=Math.sqrt((F=z[2]-R[2])*F+(B=z[3]-R[3])*B),V.push(C);var q=j/V.length*U;function G(r){return m[r%m.length]}for(d=m.length-2;d>=H;d--)if((k=V[d])<q){for(M=0,A=d-1;A>=H&&k+V[A]<q;A--)k+=V[A];if(N&&d===m.length-2)for(M=0;M<A&&k+V[M]<q;M++)k+=V[M];E=d-A+M+1,L=Math.floor((d+A+M+2)/2),S=N||d!==m.length-2?N||-1!==A?E%2?G(L):[(G(L)[0]+G(L+1)[0])/2,(G(L)[1]+G(L+1)[1])/2]:m[0]:m[m.length-1],m.splice(A+1,d-A+1,S),d=A+1,M&&(H=M),N&&(d===m.length-2?m[M]=m[m.length-1]:0===d&&(m[m.length-1]=m[0]))}for(m.splice(0,H),d=0;d<m.length;d++)m[d].length=2;if(!(m.length<2)){if(N)m.pop(),r.paths.push(m);else{i||a.log("Unclosed interior contour?",r.level,_.join(","),m.join("L"));var Z=!1;for(O=0;O<r.edgepaths.length;O++)if(I=r.edgepaths[O],!Z&&s(I[0],m[m.length-1],l,c)){m.pop(),Z=!0;var Y=!1;for(P=0;P<r.edgepaths.length;P++)if(s((D=r.edgepaths[P])[D.length-1],m[0],l,c)){Y=!0,m.shift(),r.edgepaths.splice(O,1),P===O?r.paths.push(m.concat(D)):(P>O&&P--,r.edgepaths[P]=D.concat(m,I));break}Y||(r.edgepaths[O]=m.concat(I))}for(O=0;O<r.edgepaths.length&&!Z;O++)s((I=r.edgepaths[O])[I.length-1],m[0],l,c)&&(m.shift(),r.edgepaths[O]=I.concat(m),Z=!0);Z||r.edgepaths.push(m)}}}function u(r,n,i){var a=n[0]+Math.max(i[0],0),o=n[1]+Math.max(i[1],0),s=r.z[o][a],l=r.xaxis,u=r.yaxis;if(i[1]){var c=(r.level-s)/(r.z[o][a+1]-s),f=(1!==c?(1-c)*l.c2l(r.x[a]):0)+(0!==c?c*l.c2l(r.x[a+1]):0);return[l.c2p(l.l2c(f),!0),u.c2p(r.y[o],!0),a+c,o]}var h=(r.level-s)/(r.z[o+1][a]-s),p=(1!==h?(1-h)*u.c2l(r.y[o]):0)+(0!==h?h*u.c2l(r.y[o+1]):0);return[l.c2p(r.x[a],!0),u.c2p(u.l2c(p),!0),a,o+h]}r.exports=function(r,n,i){var o,s,u,c;for(n=n||.01,i=i||.01,s=0;s<r.length;s++){for(u=r[s],c=0;c<u.starts.length;c++)l(u,u.starts[c],"edge",n,i);for(o=0;Object.keys(u.crossings).length&&o<1e4;)o++,l(u,Object.keys(u.crossings)[0].split(",").map(Number),void 0,n,i);1e4===o&&a.log("Infinite loop in contour?")}}},52421:function(r,n,i){"use strict";var a=i(7901),o=i(46248);r.exports=function(r,n,i,s,l){l||(l={}),l.isContour=!0;var u=o(r,n,i,s,l);return u&&u.forEach(function(r){var n=r.trace;"constraint"===n.contours.type&&(n.fillcolor&&a.opacity(n.fillcolor)?r.color=a.addOpacity(n.fillcolor,1):n.contours.showlines&&a.opacity(n.line.color)&&(r.color=a.addOpacity(n.line.color,1)))}),u}},99442:function(r,n,i){"use strict";r.exports={attributes:i(70600),supplyDefaults:i(13031),calc:i(27529),plot:i(29854).plot,style:i(84426),colorbar:i(90654),hoverPoints:i(52421),moduleType:"trace",name:"contour",basePlotModule:i(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n,i,o){if(o||(o={}),r("contours.showlabels")){var s=n.font;a.coerceFont(r,"contours.labelfont",{family:s.family,size:s.size,color:i}),r("contours.labelformat")}!1!==o.hasHover&&r("zhoverformat")}},86068:function(r,n,i){"use strict";var a=i(39898),o=i(21081),s=i(53572);r.exports=function(r){var n=r.contours,i=n.start,l=s(n),u=n.size||1,c=Math.floor((l-i)/u)+1,f="lines"===n.coloring?0:1,h=o.extractOpts(r);isFinite(u)||(u=1,c=1);var p,d,v=h.reversescale?o.flipScale(h.colorscale):h.colorscale,g=v.length,y=Array(g),m=Array(g),x=h.min,b=h.max;if("heatmap"===n.coloring){for(d=0;d<g;d++)p=v[d],y[d]=p[0]*(b-x)+x,m[d]=p[1];var _=a.extent([x,b,n.start,n.start+u*(c-1)]),w=_[x<b?0:1],T=_[x<b?1:0];w!==x&&(y.splice(0,0,w),m.splice(0,0,m[0])),T!==b&&(y.push(T),m.push(m[m.length-1]))}else{var k=r._input&&"number"==typeof r._input.zmin&&"number"==typeof r._input.zmax;for(k&&(i<=x||l>=b)&&(i<=x&&(i=x),l>=b&&(l=b),c=Math.floor((l-i)/u)+1,f=0),d=0;d<g;d++)p=v[d],y[d]=(p[0]*(c+f-1)-f/2)*u+i,m[d]=p[1];(k||r.autocontour)&&(y[0]>x&&(y.unshift(x),m.unshift(m[0])),y[y.length-1]<b&&(y.push(b),m.push(m[m.length-1])))}return o.makeColorScaleFunc({domain:y,range:m},{noNumericCheck:!0})}},87678:function(r,n,i){"use strict";var a=i(36914);r.exports=function(r){var n,i,o,s,l,u,c,f,h,p=r[0].z,d=p.length,v=p[0].length,g=2===d||2===v;for(i=0;i<d-1;i++)for(s=[],0===i&&(s=s.concat(a.BOTTOMSTART)),i===d-2&&(s=s.concat(a.TOPSTART)),n=0;n<v-1;n++)for(o=s.slice(),0===n&&(o=o.concat(a.LEFTSTART)),n===v-2&&(o=o.concat(a.RIGHTSTART)),l=n+","+i,u=[[p[i][n],p[i][n+1]],[p[i+1][n],p[i+1][n+1]]],h=0;h<r.length;h++)(c=function(r,n){var i=(n[0][0]>r?0:1)+(n[0][1]>r?0:2)+(n[1][1]>r?0:4)+(n[1][0]>r?0:8);return 5===i||10===i?r>(n[0][0]+n[0][1]+n[1][0]+n[1][1])/4?5===i?713:1114:5===i?104:208:15===i?0:i}((f=r[h]).level,u))&&(f.crossings[l]=c,-1!==o.indexOf(c)&&(f.starts.push([n,i]),g&&-1!==o.indexOf(c,o.indexOf(c)+1)&&f.starts.push([n,i])))}},29854:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(21081),u=i(63893),c=i(89298),f=i(21994),h=i(50347),p=i(87678),d=i(81696),v=i(87558),g=i(84857),y=i(20083),m=i(36914),x=m.LABELOPTIMIZER;function b(r,n){var i,a,l,u,c,f,h="",p=0,d=r.edgepaths.map(function(r,n){return n}),v=!0;function g(r){return .01>Math.abs(r[0]-n[2][0])}for(;d.length;){for(f=s.smoothopen(r.edgepaths[p],r.smoothing),h+=v?f:f.replace(/^M/,"L"),d.splice(d.indexOf(p),1),i=r.edgepaths[p][r.edgepaths[p].length-1],u=-1,l=0;l<4;l++){if(!i){o.log("Missing end?",p,r);break}for(.01>Math.abs(i[1]-n[0][1])&&!g(i)?a=n[1]:.01>Math.abs(i[0]-n[0][0])?a=n[0]:.01>Math.abs(i[1]-n[2][1])?a=n[3]:g(i)&&(a=n[2]),c=0;c<r.edgepaths.length;c++){var y=r.edgepaths[c][0];.01>Math.abs(i[0]-a[0])?.01>Math.abs(i[0]-y[0])&&(y[1]-i[1])*(a[1]-y[1])>=0&&(a=y,u=c):.01>Math.abs(i[1]-a[1])?.01>Math.abs(i[1]-y[1])&&(y[0]-i[0])*(a[0]-y[0])>=0&&(a=y,u=c):o.log("endpt to newendpt is not vert. or horz.",i,a,y)}if(i=a,u>=0)break;h+="L"+a}if(u===r.edgepaths.length){o.log("unclosed perimeter path");break}p=u,(v=-1===d.indexOf(p))&&(p=d[0],h+="Z")}for(p=0;p<r.paths.length;p++)h+=s.smoothclosed(r.paths[p],r.smoothing);return h}n.plot=function(r,i,l,u){var c=i.xaxis,f=i.yaxis;o.makeTraceGroups(u,l,"contour").each(function(l){var u,x,_,w,T,k=a.select(this),A=l[0],M=A.trace,S=A.x,E=A.y,L=M.contours,C=v(L,i,A),O=o.ensureSingle(k,"g","heatmapcoloring"),P=[];"heatmap"===L.coloring&&(P=[l]),h(r,i,P,O),p(C),d(C);var I=c.c2p(S[0],!0),D=c.c2p(S[S.length-1],!0),z=f.c2p(E[0],!0),R=f.c2p(E[E.length-1],!0),F=[[I,R],[D,R],[D,z],[I,z]],B=C;"constraint"===L.type&&(B=g(C,L._operation)),(u=o.ensureSingle(k,"g","contourbg").selectAll("path").data("fill"===L.coloring?[0]:[])).enter().append("path"),u.exit().remove(),u.attr("d","M"+F.join("L")+"Z").style("stroke","none"),x=B,_="fill"===L.coloring||"constraint"===L.type&&"="!==L._operation,w="M"+F.join("L")+"Z",_&&y(x,L),(T=o.ensureSingle(k,"g","contourfill").selectAll("path").data(_?x:[])).enter().append("path"),T.exit().remove(),T.each(function(r){var n=(r.prefixBoundary?w:"")+b(r,F);n?a.select(this).attr("d",n).style("stroke","none"):a.select(this).remove()}),function(r,i,l,u,c){var f=l._context.staticPlot,h=o.ensureSingle(r,"g","contourlines"),p=!1!==c.showlines,d=c.showlabels,v=p&&d,g=n.createLines(h,p||d,i,f),y=n.createLineClip(h,v,l,u.trace.uid),x=r.selectAll("g.contourlabels").data(d?[0]:[]);if(x.exit().remove(),x.enter().append("g").classed("contourlabels",!0),d){var b=[],_=[];o.clearLocationCache();var w=n.labelFormatter(l,u),T=s.tester.append("text").attr("data-notex",1).call(s.font,c.labelfont),k=i[0].xaxis,A=i[0].yaxis,M=k._length,S=A._length,E=k.range,L=A.range,C=o.aggNums(Math.min,null,u.x),O=o.aggNums(Math.max,null,u.x),P=o.aggNums(Math.min,null,u.y),I=o.aggNums(Math.max,null,u.y),D=Math.max(k.c2p(C,!0),0),z=Math.min(k.c2p(O,!0),M),R=Math.max(A.c2p(I,!0),0),F=Math.min(A.c2p(P,!0),S),B={};E[0]<E[1]?(B.left=D,B.right=z):(B.left=z,B.right=D),L[0]<L[1]?(B.top=R,B.bottom=F):(B.top=F,B.bottom=R),B.middle=(B.top+B.bottom)/2,B.center=(B.left+B.right)/2,b.push([[B.left,B.top],[B.right,B.top],[B.right,B.bottom],[B.left,B.bottom]]);var N=Math.sqrt(M*M+S*S),j=m.LABELDISTANCE*N/Math.max(1,i.length/m.LABELINCREASE);g.each(function(r){var i=n.calcTextOpts(r.level,w,T,l);a.select(this).selectAll("path").each(function(){var r=o.getVisibleSegment(this,B,i.height/2);if(r&&!(r.len<(i.width+i.height)*m.LABELMIN))for(var a=Math.min(Math.ceil(r.len/j),m.LABELMAX),s=0;s<a;s++){var l=n.findBestTextLocation(this,r,i,_,B);if(!l)break;n.addLabelData(l,i,_,b)}})}),T.remove(),n.drawLabels(x,_,l,y,v?b:null)}d&&!p&&g.remove()}(k,C,r,A,L),function(r,n,i,a,l){var u=a.trace,c=i._fullLayout._clips,f="clip"+u.uid,h=c.selectAll("#"+f).data(u.connectgaps?[]:[0]);if(h.enter().append("clipPath").classed("contourclip",!0).attr("id",f),h.exit().remove(),!1===u.connectgaps){var v={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:n.xaxis,yaxis:n.yaxis,x:a.x,y:a.y,z:function(r){var n,i,a=r.trace._emptypoints,o=[],s=r.z.length,l=r.z[0].length,u=[];for(n=0;n<l;n++)u.push(1);for(n=0;n<s;n++)o.push(u.slice());for(n=0;n<a.length;n++)o[(i=a[n])[0]][i[1]]=0;return r.zmask=o,o}(a),smoothing:0};p([v]),d([v]),y([v],{type:"levels"}),o.ensureSingle(h,"path","").attr("d",(v.prefixBoundary?"M"+l.join("L")+"Z":"")+b(v,l))}else f=null;s.setClipUrl(r,f,i)}(k,i,r,A,F)})},n.createLines=function(r,n,i,a){var o=i[0].smoothing,l=r.selectAll("g.contourlevel").data(n?i:[]);if(l.exit().remove(),l.enter().append("g").classed("contourlevel",!0),n){var u=l.selectAll("path.openline").data(function(r){return r.pedgepaths||r.edgepaths});u.exit().remove(),u.enter().append("path").classed("openline",!0),u.attr("d",function(r){return s.smoothopen(r,o)}).style("stroke-miterlimit",1).style("vector-effect",a?"none":"non-scaling-stroke");var c=l.selectAll("path.closedline").data(function(r){return r.ppaths||r.paths});c.exit().remove(),c.enter().append("path").classed("closedline",!0),c.attr("d",function(r){return s.smoothclosed(r,o)}).style("stroke-miterlimit",1).style("vector-effect",a?"none":"non-scaling-stroke")}return l},n.createLineClip=function(r,n,i,a){var o=n?"clipline"+a:null,l=i._fullLayout._clips.selectAll("#"+o).data(n?[0]:[]);return l.exit().remove(),l.enter().append("clipPath").classed("contourlineclip",!0).attr("id",o),s.setClipUrl(r,o,i),l},n.labelFormatter=function(r,n){var i=r._fullLayout,a=n.trace,s=a.contours,u={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(s.labelformat)u.tickformat=s.labelformat,f(u,i);else{var h=l.extractOpts(a);if(h&&h.colorbar&&h.colorbar._axis)u=h.colorbar._axis;else{if("constraint"===s.type){var p=s.value;o.isArrayOrTypedArray(p)?u.range=[p[0],p[p.length-1]]:u.range=[p,p]}else u.range=[s.start,s.end],u.nticks=(s.end-s.start)/s.size;u.range[0]===u.range[1]&&(u.range[1]+=u.range[0]||1),u.nticks||(u.nticks=1e3),f(u,i),c.prepTicks(u),u._tmin=null,u._tmax=null}}return function(r){return c.tickText(u,r).text}},n.calcTextOpts=function(r,n,i,a){var o=n(r);i.text(o).call(u.convertToTspans,a);var l=i.node(),c=s.bBox(l,!0);return{text:o,width:c.width,height:c.height,fontSize:+l.style["font-size"].replace("px",""),level:r,dy:(c.top+c.bottom)/2}},n.findBestTextLocation=function(r,n,i,a,s){var l,u,c,f,h,p=i.width;n.isClosed?(u=n.len/x.INITIALSEARCHPOINTS,l=n.min+u/2,c=n.max):(u=(n.len-p)/(x.INITIALSEARCHPOINTS+1),l=n.min+u+p/2,c=n.max-(u+p)/2);for(var d=1/0,v=0;v<x.ITERATIONS;v++){for(var g=l;g<c;g+=u){var y=o.getTextLocation(r,n.total,g,p),m=function(r,n,i,a){var s=n.width/2,l=n.height/2,u=r.x,c=r.y,f=r.theta,h=Math.cos(f)*s,p=Math.sin(f)*s,d=(u>a.center?a.right-u:u-a.left)/(h+Math.abs(Math.sin(f)*l)),v=(c>a.middle?a.bottom-c:c-a.top)/(Math.abs(p)+Math.cos(f)*l);if(d<1||v<1)return 1/0;var g=x.EDGECOST*(1/(d-1)+1/(v-1));g+=x.ANGLECOST*f*f;for(var y=u-h,m=c-p,b=u+h,_=c+p,w=0;w<i.length;w++){var T=i[w],k=Math.cos(T.theta)*T.width/2,A=Math.sin(T.theta)*T.width/2,M=2*o.segmentDistance(y,m,b,_,T.x-k,T.y-A,T.x+k,T.y+A)/(n.height+T.height),S=T.level===n.level,E=S?x.SAMELEVELDISTANCE:1;if(M<=E)return 1/0;g+=x.NEIGHBORCOST*(S?x.SAMELEVELFACTOR:1)/(M-E)}return g}(y,i,a,s);m<d&&(d=m,h=y,f=g)}if(d>2*x.MAXCOST)break;v&&(u/=2),c=(l=f-u/2)+1.5*u}if(d<=x.MAXCOST)return h},n.addLabelData=function(r,n,i,a){var o=n.fontSize,s=n.width+o/3,l=Math.max(0,n.height-o/3),u=r.x,c=r.y,f=r.theta,h=Math.sin(f),p=Math.cos(f),d=function(r,n){return[u+r*p-n*h,c+r*h+n*p]},v=[d(-s/2,-l/2),d(-s/2,l/2),d(s/2,l/2),d(s/2,-l/2)];i.push({text:n.text,x:u,y:c,dy:n.dy,theta:f,level:n.level,width:s,height:l}),a.push(v)},n.drawLabels=function(r,n,i,s,l){var c=r.selectAll("text").data(n,function(r){return r.text+","+r.x+","+r.y+","+r.theta});if(c.exit().remove(),c.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(r){var n=r.x+Math.sin(r.theta)*r.dy,o=r.y-Math.cos(r.theta)*r.dy;a.select(this).text(r.text).attr({x:n,y:o,transform:"rotate("+180*r.theta/Math.PI+" "+n+" "+o+")"}).call(u.convertToTspans,i)}),l){for(var f="",h=0;h<l.length;h++)f+="M"+l[h].join("L")+"Z";o.ensureSingle(s,"path","").attr("d",f)}}},18670:function(r,n,i){"use strict";var a=i(89298),o=i(71828);function s(r,n,i){var o={type:"linear",range:[r,n]};return a.autoTicks(o,(n-r)/(i||15)),o}r.exports=function(r,n){var i=r.contours;if(r.autocontour){var l=r.zmin,u=r.zmax;(r.zauto||void 0===l)&&(l=o.aggNums(Math.min,null,n)),(r.zauto||void 0===u)&&(u=o.aggNums(Math.max,null,n));var c=s(l,u,r.ncontours);i.size=c.dtick,i.start=a.tickFirst(c),c.range.reverse(),i.end=a.tickFirst(c),i.start===l&&(i.start+=i.size),i.end===u&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),r._input.contours||(r._input.contours={}),o.extendFlat(r._input.contours,{start:i.start,end:i.end,size:i.size}),r._input.autocontour=!0}else if("constraint"!==i.type){var f,h=i.start,p=i.end,d=r._input.contours;h>p&&(i.start=d.start=p,p=i.end=d.end=h,h=i.start),i.size>0||(f=h===p?1:s(h,p,r.ncontours).dtick,d.size=i.size=f)}}},84426:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(70035),l=i(86068);r.exports=function(r){var n=a.select(r).selectAll("g.contour");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var n,i=a.select(this),s=r[0].trace,u=s.contours,c=s.line,f=u.size||1,h=u.start,p="constraint"===u.type,d=!p&&"lines"===u.coloring,v=!p&&"fill"===u.coloring,g=d||v?l(s):null;i.selectAll("g.contourlevel").each(function(r){a.select(this).selectAll("path").call(o.lineGroupStyle,c.width,d?g(r.level):c.color,c.dash)});var y=u.labelfont;(i.selectAll("g.contourlabels text").each(function(r){o.font(a.select(this),{family:y.family,size:y.size,color:y.color||(d?g(r.level):c.color)})}),p)?i.selectAll("g.contourfill path").style("fill",s.fillcolor):v&&(i.selectAll("g.contourfill path").style("fill",function(r){return void 0===n&&(n=r.level),g(r.level+.5*f)}),void 0===n&&(n=h),i.selectAll("g.contourbg path").style("fill",g(n-.5*f)))}),s(r)}},8724:function(r,n,i){"use strict";var a=i(1586),o=i(14523);r.exports=function(r,n,i,s,l){var u,c=i("contours.coloring"),f="";"fill"===c&&(u=i("contours.showlines")),!1!==u&&("lines"!==c&&(f=i("line.color","#000")),i("line.width",.5),i("line.dash")),"none"!==c&&(!0!==r.showlegend&&(n.showlegend=!1),n._dfltShowLegend=!1,a(r,n,s,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),o(i,s,f,l)}},88085:function(r,n,i){"use strict";var a=i(21606),o=i(70600),s=i(50693),l=i(1426).extendFlat,u=o.contours;r.exports=l({carpet:{valType:"string",editType:"calc"},z:a.z,a:a.x,a0:a.x0,da:a.dx,b:a.y,b0:a.y0,db:a.dy,text:a.text,hovertext:a.hovertext,transpose:a.transpose,atype:a.xtype,btype:a.ytype,fillcolor:o.fillcolor,autocontour:o.autocontour,ncontours:o.ncontours,contours:{type:u.type,start:u.start,end:u.end,size:u.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:u.showlines,showlabels:u.showlabels,labelfont:u.labelfont,labelformat:u.labelformat,operation:u.operation,value:u.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o.line.color,width:o.line.width,dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},59885:function(r,n,i){"use strict";var a=i(78803),o=i(71828),s=i(68296),l=i(4742),u=i(824),c=i(43907),f=i(70769),h=i(75005),p=i(22882),d=i(18670);r.exports=function(r,n){var i=n._carpetTrace=p(r,n);if(i&&i.visible&&"legendonly"!==i.visible){if(!n.a||!n.b){var v,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C=r.data[i.index],O=r.data[n.index];O.a||(O.a=C.a),O.b||(O.b=C.b),h(O,n,n._defaultColor,r._fullLayout)}var P=(T=(w=n._carpetTrace).aaxis,k=w.baxis,T._minDtick=0,k._minDtick=0,o.isArray1D(n.z)&&s(n,T,k,"a","b",["z"]),v=n._a=n._a||n.a,m=n._b=n._b||n.b,v=v?T.makeCalcdata(n,"_a"):[],m=m?k.makeCalcdata(n,"_b"):[],g=n.a0||0,y=n.da||1,x=n.b0||0,b=n.db||1,_=n._z=l(n._z||n.z,n.transpose),n._emptypoints=c(_),u(_,n._emptypoints),A=o.maxRowLength(_),M="scaled"===n.xtype?"":v,S=f(n,M,g,y,A,T),E="scaled"===n.ytype?"":m,L={a:S,b:f(n,E,x,b,_.length,k),z:_},"levels"===n.contours.type&&"none"!==n.contours.coloring&&a(r,n,{vals:_,containerStr:"",cLetter:"z"}),[L]);return d(n,n._z),P}}},75005:function(r,n,i){"use strict";var a=i(71828),o=i(67684),s=i(88085),l=i(83179),u=i(67217),c=i(8724);r.exports=function(r,n,i,f){function h(i,o){return a.coerce(r,n,s,i,o)}if(h("carpet"),r.a&&r.b){if(!o(r,n,h,f,"a","b"))return void(n.visible=!1);h("text"),"constraint"===h("contours.type")?l(r,n,h,f,i,{hasHover:!1}):(u(r,n,h,function(i){return a.coerce2(r,n,s,i)}),c(r,n,h,f,{hasHover:!1}))}else n._defaultColor=i,n._length=null}},93740:function(r,n,i){"use strict";r.exports={attributes:i(88085),supplyDefaults:i(75005),colorbar:i(90654),calc:i(59885),plot:i(51048),style:i(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:i(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(r,n,i){"use strict";var a=i(39898),o=i(27669),s=i(67961),l=i(91424),u=i(71828),c=i(87678),f=i(81696),h=i(29854),p=i(36914),d=i(84857),v=i(87558),g=i(20083),y=i(22882),m=i(4536);function x(r,n,i){var a=r.getPointAtLength(n),o=r.getPointAtLength(i),s=o.x-a.x,l=o.y-a.y,u=Math.sqrt(s*s+l*l);return[s/u,l/u]}function b(r){var n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return[r[0]/n,r[1]/n]}function _(r,n){var i=Math.abs(r[0]*n[0]+r[1]*n[1]);return Math.sqrt(1-i*i)/i}r.exports=function(r,n,i,w){var T=n.xaxis,k=n.yaxis;u.makeTraceGroups(w,i,"contour").each(function(i){var w=a.select(this),A=i[0],M=A.trace,S=M._carpetTrace=y(r,M),E=r.calcdata[S.index][0];if(S.visible&&"legendonly"!==S.visible){var L,C,O,P=A.a,I=A.b,D=M.contours,z=v(D,n,A),R="constraint"===D.type,F=D._operation,B=R?"="===F?"lines":"fill":D.coloring,N=[[P[0],I[I.length-1]],[P[P.length-1],I[I.length-1]],[P[P.length-1],I[0]],[P[0],I[0]]];c(z),f(z,1e-8*(P[P.length-1]-P[0]),1e-8*(I[I.length-1]-I[0]));var j,U,V,H,q=z;"constraint"===D.type&&(q=d(z,F)),function(r,n){var i,a,o,s,l,u,c,f,h;for(i=0;i<r.length;i++){for(l=(s=r[i]).pedgepaths=[],u=s.ppaths=[],a=0;a<s.edgepaths.length;a++){for(h=s.edgepaths[a],c=[],o=0;o<h.length;o++)c[o]=n(h[o]);l.push(c)}for(a=0;a<s.paths.length;a++){for(h=s.paths[a],f=[],o=0;o<h.length;o++)f[o]=n(h[o]);u.push(f)}}}(z,Y);var G=[];for(H=E.clipsegments.length-1;H>=0;H--)U=o([],(j=E.clipsegments[H]).x,T.c2p),V=o([],j.y,k.c2p),U.reverse(),V.reverse(),G.push(s(U,V,j.bicubic));var Z="M"+G.join("L")+"Z";(function(r,n,i,a,l,c){var f,h,p=u.ensureSingle(r,"g","contourbg").selectAll("path").data("fill"!==c||l?[]:[0]);p.enter().append("path"),p.exit().remove();var d=[];for(h=0;h<n.length;h++)d.push(s(o([],(f=n[h]).x,i.c2p),o([],f.y,a.c2p),f.bicubic));p.attr("d","M"+d.join("L")+"Z").style("stroke","none")})(w,E.clipsegments,T,k,R,B),L=q,(C="fill"===B)&&g(L,M.contours),(O=u.ensureSingle(w,"g","contourfill").selectAll("path").data(C?L:[])).enter().append("path"),O.exit().remove(),O.each(function(r){var n=(r.prefixBoundary?Z:"")+function(r,n,i,a,o,s,c,f){var h,p,d,v,g,y,x,b="",_=n.edgepaths.map(function(r,n){return n}),w=!0,T=1e-4*Math.abs(i[0][0]-i[2][0]),k=1e-4*Math.abs(i[0][1]-i[2][1]);function A(r){return Math.abs(r[1]-i[0][1])<k}function M(r){return Math.abs(r[1]-i[2][1])<k}function S(r){return Math.abs(r[0]-i[0][0])<T}function E(r){return Math.abs(r[0]-i[2][0])<T}function L(r,n){var i,a,l,u,h="";for(A(r)&&!E(r)||M(r)&&!S(r)?(u=o.aaxis,l=m(o,s,[r[0],n[0]],.5*(r[1]+n[1]))):(u=o.baxis,l=m(o,s,.5*(r[0]+n[0]),[r[1],n[1]])),i=1;i<l.length;i++)for(h+=u.smoothing?"C":"L",a=0;a<l[i].length;a++){var p=l[i][a];h+=[c.c2p(p[0]),f.c2p(p[1])]+" "}return h}for(h=0,p=null;_.length;){var C=n.edgepaths[h][0];for(p&&(b+=L(p,C)),x=l.smoothopen(n.edgepaths[h].map(a),n.smoothing),b+=w?x:x.replace(/^M/,"L"),_.splice(_.indexOf(h),1),p=n.edgepaths[h][n.edgepaths[h].length-1],g=-1,v=0;v<4;v++){if(!p){u.log("Missing end?",h,n);break}for(A(p)&&!E(p)?d=i[1]:S(p)?d=i[0]:M(p)?d=i[3]:E(p)&&(d=i[2]),y=0;y<n.edgepaths.length;y++){var O=n.edgepaths[y][0];Math.abs(p[0]-d[0])<T?Math.abs(p[0]-O[0])<T&&(O[1]-p[1])*(d[1]-O[1])>=0&&(d=O,g=y):Math.abs(p[1]-d[1])<k?Math.abs(p[1]-O[1])<k&&(O[0]-p[0])*(d[0]-O[0])>=0&&(d=O,g=y):u.log("endpt to newendpt is not vert. or horz.",p,d,O)}if(g>=0)break;b+=L(p,d),p=d}if(g===n.edgepaths.length){u.log("unclosed perimeter path");break}h=g,(w=-1===_.indexOf(h))&&(h=_[0],b+=L(p,d)+"Z",p=null)}for(h=0;h<n.paths.length;h++)b+=l.smoothclosed(n.paths[h].map(a),n.smoothing);return b}(0,r,N,Y,S,E,T,k);n?a.select(this).attr("d",n).style("stroke","none"):a.select(this).remove()}),function(r,n,i,o,s,c,f){var d=i._context.staticPlot,v=u.ensureSingle(r,"g","contourlines"),g=!1!==s.showlines,y=s.showlabels,m=g&&y,w=h.createLines(v,g||y,n,d),T=h.createLineClip(v,m,i,o.trace.uid),k=r.selectAll("g.contourlabels").data(y?[0]:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlabels",!0),y){var A=c.xaxis,M=c.yaxis,S=A._length,E=M._length,L=[[[0,0],[S,0],[S,E],[0,E]]],C=[];u.clearLocationCache();var O=h.labelFormatter(i,o),P=l.tester.append("text").attr("data-notex",1).call(l.font,s.labelfont),I={left:0,right:S,center:S/2,top:0,bottom:E,middle:E/2},D=Math.sqrt(S*S+E*E),z=p.LABELDISTANCE*D/Math.max(1,n.length/p.LABELINCREASE);w.each(function(r){var n=h.calcTextOpts(r.level,O,P,i);a.select(this).selectAll("path").each(function(i){var a=u.getVisibleSegment(this,I,n.height/2);if(a&&(function(r,n,i,a,o,s){for(var l,u=0;u<i.pedgepaths.length;u++)n===i.pedgepaths[u]&&(l=i.edgepaths[u]);if(l){var c=o.a[0],f=o.a[o.a.length-1],h=o.b[0],p=o.b[o.b.length-1],d=x(r,0,1),v=x(r,a.total,a.total-1),g=m(l[0],d),y=a.total-m(l[l.length-1],v);a.min<g&&(a.min=g),a.max>y&&(a.max=y),a.len=a.max-a.min}function m(r,n){var i=0;return(.1>Math.abs(r[0]-c)||.1>Math.abs(r[0]-f))&&(i=Math.max(i,s*_(n,b(o.dxydb_rough(r[0],r[1],.1)))/2)),(.1>Math.abs(r[1]-h)||.1>Math.abs(r[1]-p))&&(i=Math.max(i,s*_(n,b(o.dxyda_rough(r[0],r[1],.1)))/2)),i}}(this,i,r,a,f,n.height),!(a.len<(n.width+n.height)*p.LABELMIN)))for(var o=Math.min(Math.ceil(a.len/z),p.LABELMAX),s=0;s<o;s++){var l=h.findBestTextLocation(this,a,n,C,I);if(!l)break;h.addLabelData(l,n,C,L)}})}),P.remove(),h.drawLabels(k,C,i,T,m?L:null)}y&&!g&&w.remove()}(w,z,r,A,D,n,S),l.setClipUrl(w,S._clipPathId,r)}function Y(r){var n=S.ab2xy(r[0],r[1],!0);return[T.c2p(n[0]),k.c2p(n[1])]}})}},64096:function(r,n,i){"use strict";var a=i(50693),o=i(5386).fF,s=i(9012),l=i(99181),u=i(1426).extendFlat;r.exports=u({lon:l.lon,lat:l.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:l.text,hovertext:l.hovertext,hoverinfo:u({},s.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:o(),showlegend:u({},s.showlegend,{dflt:!1})},a("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(r,n,i){"use strict";var a=i(92770),o=i(71828).isArrayOrTypedArray,s=i(50606).BADNUM,l=i(78803),u=i(71828)._;r.exports=function(r,n){for(var i=n._length,c=Array(i),f=n.z,h=o(f)&&f.length,p=0;p<i;p++){var d=c[p]={},v=n.lon[p],g=n.lat[p];if(d.lonlat=a(v)&&a(g)?[+v,+g]:[s,s],h){var y=f[p];d.z=a(y)?y:s}}return l(r,n,{vals:h?f:[0,1],containerStr:"",cLetter:"z"}),i&&(c[0].t={labels:{lat:u(r,"lat:")+" ",lon:u(r,"lon:")+" "}}),c}},52414:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(7901),l=i(21081),u=i(50606).BADNUM,c=i(18214).makeBlank;r.exports=function(r){var n=r[0].trace,i=!0===n.visible&&0!==n._length,f=n._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:c()};if(!i)return f;var h,p=[],d=n.z,v=n.radius,g=o.isArrayOrTypedArray(d)&&d.length,y=o.isArrayOrTypedArray(v);for(h=0;h<r.length;h++){var m=r[h],x=m.lonlat;if(x[0]!==u){var b={};if(g){var _=m.z;b.z=_!==u?_:0}y&&(b.r=a(v[h])&&v[h]>0?+v[h]:0),p.push({type:"Feature",geometry:{type:"Point",coordinates:x},properties:b})}}var w=l.extractOpts(n),T=w.reversescale?l.flipScale(w.colorscale):w.colorscale,k=T[0][1],A=["interpolate",["linear"],["heatmap-density"],0,1>s.opacity(k)?k:s.addOpacity(k,0)];for(h=1;h<T.length;h++)A.push(T[h][0],T[h][1]);var M=["interpolate",["linear"],["get","z"],w.min,0,w.max,1];return o.extendFlat(f.heatmap.paint,{"heatmap-weight":g?M:1/(w.max-w.min),"heatmap-color":A,"heatmap-radius":y?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),f.geojson={type:"FeatureCollection",features:p},f.heatmap.layout.visibility="visible",f}},79429:function(r,n,i){"use strict";var a=i(71828),o=i(1586),s=i(64096);r.exports=function(r,n,i,l){function u(i,o){return a.coerce(r,n,s,i,o)}var c=u("lon")||[],f=u("lat")||[],h=Math.min(c.length,f.length);h?(n._length=h,u("z"),u("radius"),u("below"),u("text"),u("hovertext"),u("hovertemplate"),o(r,n,l,u,{prefix:"",cLetter:"z"})):n.visible=!1}},62474:function(r){"use strict";r.exports=function(r,n){return r.lon=n.lon,r.lat=n.lat,r.z=n.z,r}},84684:function(r,n,i){"use strict";var a=i(89298),o=i(28178).hoverPoints,s=i(28178).getExtraText;r.exports=function(r,n,i){var l=o(r,n,i);if(l){var u=l[0],c=u.cd,f=c[0].trace,h=c[u.index];if(delete u.color,"z"in h){var p=u.subplot.mockAxis;u.z=h.z,u.zLabel=a.tickText(p,p.c2l(h.z),"hover").text}return u.extraText=s(f,h,c[0].t.labels),[u]}}},93814:function(r,n,i){"use strict";r.exports={attributes:i(64096),supplyDefaults:i(79429),colorbar:i(61243),formatLabels:i(15636),calc:i(85070),plot:i(7336),hoverPoints:i(84684),eventData:i(62474),getBelow:function(r,n){for(var i=n.getMapLayers(),a=0;a<i.length;a++){var o=i[a],s=o.id;if("symbol"===o.type&&"string"==typeof s&&-1===s.indexOf("plotly-"))return s}},moduleType:"trace",name:"densitymapbox",basePlotModule:i(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(r,n,i){"use strict";var a=i(52414),o=i(77734).traceLayerPrefix;function s(r,n){this.type="densitymapbox",this.subplot=r,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",o+n+"-heatmap"]],this.below=null}var l=s.prototype;l.update=function(r){var n=this.subplot,i=this.layerList,o=a(r),s=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(o.geojson),s!==this.below&&(this._removeLayers(),this._addLayers(o,s),this.below=s);for(var l=0;l<i.length;l++){var u=i[l],c=u[0],f=u[1],h=o[c];n.setOptions(f,"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&n.setOptions(f,"setPaintProperty",h.paint)}},l._addLayers=function(r,n){for(var i=this.subplot,a=this.layerList,o=this.sourceId,s=0;s<a.length;s++){var l=a[s],u=l[0],c=r[u];i.addLayer({type:u,id:l[1],source:o,layout:c.layout,paint:c.paint},n)}},l._removeLayers=function(){for(var r=this.subplot.map,n=this.layerList,i=n.length-1;i>=0;i--)r.removeLayer(n[i][1])},l.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},r.exports=function(r,n){var i=n[0].trace,o=new s(r,i.uid),l=o.sourceId,u=a(n),c=o.below=r.belowLookup["trace-"+i.uid];return r.map.addSource(l,{type:"geojson",data:u.geojson}),o._addLayers(u,c),o}},49789:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;a.mergeArray(n.text,r,"tx"),a.mergeArray(n.hovertext,r,"htx");var o=n.marker;if(o){a.mergeArray(o.opacity,r,"mo"),a.mergeArray(o.color,r,"mc");var s=o.line;s&&(a.mergeArray(s.color,r,"mlc"),a.mergeArrayCastPositive(s.width,r,"mlw"))}}},1285:function(r,n,i){"use strict";var a,o=i(1486),s=i(82196).line,l=i(9012),u=i(12663).axisHoverFormat,c=i(5386).fF,f=i(5386).si,h=i(18517),p=i(1426).extendFlat,d=i(7901);r.exports={x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:u("x"),yhoverformat:u("y"),hovertext:o.hovertext,hovertemplate:c({},{keys:h.eventDataKeys}),hoverinfo:p({},l.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:h.eventDataKeys.concat(["label","value"])}),text:o.text,textposition:o.textposition,insidetextanchor:p({},o.insidetextanchor,{dflt:"middle"}),textangle:p({},o.textangle,{dflt:0}),textfont:o.textfont,insidetextfont:o.insidetextfont,outsidetextfont:o.outsidetextfont,constraintext:o.constraintext,cliponaxis:o.cliponaxis,orientation:p({},o.orientation,{}),offset:p({},o.offset,{arrayOk:!1}),width:p({},o.width,{arrayOk:!1}),marker:(a=p({},o.marker),delete a.pattern,a),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:p({},s.color,{dflt:d.defaultLine}),width:p({},s.width,{dflt:0,editType:"plot"}),dash:s.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup}},9532:function(r,n,i){"use strict";var a=i(89298),o=i(42973),s=i(49789),l=i(66279),u=i(50606).BADNUM;function c(r){return r===u?0:r}r.exports=function(r,n){var i,f,h,p,d,v,g,y,m=a.getFromId(r,n.xaxis||"x"),x=a.getFromId(r,n.yaxis||"y");"h"===n.orientation?(i=m.makeCalcdata(n,"x"),h=x.makeCalcdata(n,"y"),p=o(n,x,"y",h),d=!!n.yperiodalignment,v="y"):(i=x.makeCalcdata(n,"y"),h=m.makeCalcdata(n,"x"),p=o(n,m,"x",h),d=!!n.xperiodalignment,v="x");var b,_=Math.min((f=p.vals).length,i.length),w=Array(_);for(n._base=[],g=0;g<_;g++){i[g]<0&&(i[g]=u);var T=!1;i[g]!==u&&g+1<_&&i[g+1]!==u&&(T=!0),y=w[g]={p:f[g],s:i[g],cNext:T},n._base[g]=-.5*y.s,d&&(w[g].orig_p=h[g],w[g][v+"End"]=p.ends[g],w[g][v+"Start"]=p.starts[g]),n.ids&&(y.id=String(n.ids[g])),0===g&&(w[0].vTotal=0),w[0].vTotal+=c(y.s),y.begR=c(y.s)/c(w[0].s)}for(g=0;g<_;g++)(y=w[g]).s!==u&&(y.sumR=y.s/w[0].vTotal,y.difR=void 0!==b?y.s/b:1,b=y.s);return s(w,n),l(w,n),w}},18517:function(r){"use strict";r.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(r,n,i){"use strict";var a=i(11661).setGroupPositions;r.exports=function(r,n){var i,o,s=r._fullLayout,l=r._fullData,u=r.calcdata,c=n.xaxis,f=n.yaxis,h=[],p=[],d=[];for(o=0;o<l.length;o++){var v=l[o],g="h"===v.orientation;!0===v.visible&&v.xaxis===c._id&&v.yaxis===f._id&&"funnel"===v.type&&(i=u[o],g?d.push(i):p.push(i),h.push(i))}var y={mode:s.funnelmode,norm:s.funnelnorm,gap:s.funnelgap,groupgap:s.funnelgroupgap};for(a(r,c,f,p,y),a(r,f,c,d,y),o=0;o<h.length;o++){i=h[o];for(var m=0;m<i.length;m++)m+1<i.length&&(i[m].nextP0=i[m+1].p0,i[m].nextS0=i[m+1].s0,i[m].nextP1=i[m+1].p1,i[m].nextS1=i[m+1].s1)}}},26199:function(r,n,i){"use strict";var a=i(71828),o=i(26125),s=i(90769).handleText,l=i(67513),u=i(73927),c=i(1285),f=i(7901);r.exports={supplyDefaults:function(r,n,i,o){function h(i,o){return a.coerce(r,n,c,i,o)}if(l(r,n,o,h)){u(r,n,o,h),h("xhoverformat"),h("yhoverformat"),h("orientation",n.y&&!n.x?"v":"h"),h("offset"),h("width");var p,d=h("text");h("hovertext"),h("hovertemplate");var v=h("textposition");s(r,n,o,h,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===n.textposition||n.texttemplate||h("textinfo",a.isArrayOrTypedArray(d)?"text+value":"value");var g=h("marker.color",i);h("marker.line.color",f.defaultLine),h("marker.line.width"),h("connector.visible")&&(h("connector.fillcolor",(p=a.isArrayOrTypedArray(g)?"#000":g,f.addOpacity(p,.5*f.opacity(p)))),h("connector.line.width")&&(h("connector.line.color"),h("connector.line.dash")))}else n.visible=!1},crossTraceDefaults:function(r,n){var i;function s(r){return a.coerce(i._input,i,c,r)}if("group"===n.funnelmode)for(var l=0;l<r.length;l++)o((i=r[l])._input,i,n,s)}}},34598:function(r){"use strict";r.exports=function(r,n){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"percentInitial"in n&&(r.percentInitial=n.percentInitial),"percentPrevious"in n&&(r.percentPrevious=n.percentPrevious),"percentTotal"in n&&(r.percentTotal=n.percentTotal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r}},63341:function(r,n,i){"use strict";var a=i(7901).opacity,o=i(95423).hoverOnBars,s=i(71828).formatPercent;r.exports=function(r,n,i,l,u){var c=o(r,n,i,l,u);if(c){var f,h,p,d,v=c.cd,g=v[0].trace,y="h"===g.orientation,m=v[c.index];c[(y?"x":"y")+"LabelVal"]=m.s,c.percentInitial=m.begR,c.percentInitialLabel=s(m.begR,1),c.percentPrevious=m.difR,c.percentPreviousLabel=s(m.difR,1),c.percentTotal=m.sumR,c.percentTotalLabel=s(m.sumR,1);var x=m.hi||g.hoverinfo,b=[];if(x&&"none"!==x&&"skip"!==x){var _="all"===x,w=x.split("+"),T=function(r){return _||-1!==w.indexOf(r)};T("percent initial")&&b.push(c.percentInitialLabel+" of initial"),T("percent previous")&&b.push(c.percentPreviousLabel+" of previous"),T("percent total")&&b.push(c.percentTotalLabel+" of total")}return c.extraText=b.join("<br>"),c.color=(f=g.marker,h=m.mc||f.color,p=m.mlc||f.line.color,d=m.mlw||f.line.width,a(h)?h:a(p)&&d?p:void 0),[c]}}},51759:function(r,n,i){"use strict";r.exports={attributes:i(1285),layoutAttributes:i(10440),supplyDefaults:i(26199).supplyDefaults,crossTraceDefaults:i(26199).crossTraceDefaults,supplyLayoutDefaults:i(93138),calc:i(9532),crossTraceCalc:i(8984),plot:i(80461),style:i(68266).style,hoverPoints:i(63341),eventData:i(34598),selectPoints:i(81974),moduleType:"trace",name:"funnel",basePlotModule:i(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(r){"use strict";r.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(r,n,i){"use strict";var a=i(71828),o=i(10440);r.exports=function(r,n,i){var s=!1;function l(i,s){return a.coerce(r,n,o,i,s)}for(var u=0;u<i.length;u++){var c=i[u];if(c.visible&&"funnel"===c.type){s=!0;break}}s&&(l("funnelmode"),l("funnelgap",.2),l("funnelgroupgap"))}},80461:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(50606).BADNUM,u=i(17295),c=i(72597).clearMinTextSize;function f(r,n,i,a){var o=[],s=[],l=a?n:i,u=a?i:n;return o[0]=l.c2p(r.s0,!0),s[0]=u.c2p(r.p0,!0),o[1]=l.c2p(r.s1,!0),s[1]=u.c2p(r.p1,!0),o[2]=l.c2p(r.nextS0,!0),s[2]=u.c2p(r.nextP0,!0),o[3]=l.c2p(r.nextS1,!0),s[3]=u.c2p(r.nextP1,!0),a?[o,s]:[s,o]}r.exports=function(r,n,i,h){var p=r._fullLayout;c("funnel",p),function(r,n,i,u){var c=n.xaxis,h=n.yaxis;o.makeTraceGroups(u,i,"trace bars").each(function(i){var u=a.select(this),p=i[0].trace,d=o.ensureSingle(u,"g","regions");if(p.connector&&p.connector.visible){var v="h"===p.orientation,g=d.selectAll("g.region").data(o.identity);g.enter().append("g").classed("region",!0),g.exit().remove();var y=g.size();g.each(function(i,u){if(u===y-1||i.cNext){var p=f(i,c,h,v),d=p[0],g=p[1],m="";d[0]!==l&&g[0]!==l&&d[1]!==l&&g[1]!==l&&d[2]!==l&&g[2]!==l&&d[3]!==l&&g[3]!==l&&(m+=v?"M"+d[0]+","+g[1]+"L"+d[2]+","+g[2]+"H"+d[3]+"L"+d[1]+","+g[1]+"Z":"M"+d[1]+","+g[1]+"L"+d[2]+","+g[3]+"V"+g[2]+"L"+d[1]+","+g[0]+"Z"),""===m&&(m="M0,0Z"),o.ensureSingle(a.select(this),"path").attr("d",m).call(s.setClipUrl,n.layerClipId,r)}})}else d.remove()})}(r,n,i,h),function(r,n,i,l){var u=n.xaxis,c=n.yaxis;o.makeTraceGroups(l,i,"trace bars").each(function(i){var l=a.select(this),h=i[0].trace,p=o.ensureSingle(l,"g","lines");if(h.connector&&h.connector.visible&&h.connector.line.width){var d="h"===h.orientation,v=p.selectAll("g.line").data(o.identity);v.enter().append("g").classed("line",!0),v.exit().remove();var g=v.size();v.each(function(i,l){if(l===g-1||i.cNext){var h=f(i,u,c,d),p=h[0],v=h[1],y="";void 0!==p[3]&&void 0!==v[3]&&(d?y+="M"+p[0]+","+v[1]+"L"+p[2]+","+v[2]+("M"+p[1]+","+v[1]+"L"+p[3])+","+v[2]:y+="M"+p[1]+","+v[1]+"L"+p[2]+","+v[3]+("M"+p[1]+","+v[0]+"L"+p[2])+","+v[2]),""===y&&(y="M0,0Z"),o.ensureSingle(a.select(this),"path").attr("d",y).call(s.setClipUrl,n.layerClipId,r)}})}else p.remove()})}(r,n,i,h),u.plot(r,n,i,h,{mode:p.funnelmode,norm:p.funnelmode,gap:p.funnelgap,groupgap:p.funnelgroupgap})}},68266:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(7901),l=i(37822).DESELECTDIM,u=i(16688),c=i(72597).resizeText,f=u.styleTextPoints;r.exports={style:function(r,n,i){var u=i||a.select(r).selectAll("g.funnellayer").selectAll("g.trace");c(r,u,"funnel"),u.style("opacity",function(r){return r[0].trace.opacity}),u.each(function(n){var i=a.select(this),u=n[0].trace;i.selectAll(".point > path").each(function(r){if(!r.isBlank){var n=u.marker;a.select(this).call(s.fill,r.mc||n.color).call(s.stroke,r.mlc||n.line.color).call(o.dashLine,n.line.dash,r.mlw||n.line.width).style("opacity",u.selectedpoints&&!r.selected?l:1)}}),f(i,u,r),i.selectAll(".regions").each(function(){a.select(this).selectAll("path").style("stroke-width",0).call(s.fill,u.connector.fillcolor)}),i.selectAll(".lines").each(function(){var r=u.connector.line;o.lineGroupStyle(a.select(this).selectAll("path"),r.width,r.color,r.dash)})})}}},86807:function(r,n,i){"use strict";var a=i(34e3),o=i(9012),s=i(27670).Y,l=i(5386).fF,u=i(5386).si,c=i(1426).extendFlat;r.exports={labels:a.labels,label0:a.label0,dlabel:a.dlabel,values:a.values,marker:{colors:a.marker.colors,line:{color:c({},a.marker.line.color,{dflt:null}),width:c({},a.marker.line.width,{dflt:1}),editType:"calc"},pattern:a.marker.pattern,editType:"calc"},text:a.text,hovertext:a.hovertext,scalegroup:c({},a.scalegroup,{}),textinfo:c({},a.textinfo,{flags:["label","text","value","percent"]}),texttemplate:u({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:c({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l({},{keys:["label","color","value","text","percent"]}),textposition:c({},a.textposition,{values:["inside","none"],dflt:"inside"}),textfont:a.textfont,insidetextfont:a.insidetextfont,title:{text:a.title.text,font:a.title.font,position:c({},a.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:s({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(r,n,i){"use strict";var a=i(74875);n.name="funnelarea",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},89574:function(r,n,i){"use strict";var a=i(32354);r.exports={calc:function(r,n){return a.calc(r,n)},crossTraceCalc:function(r){a.crossTraceCalc(r,{type:"funnelarea"})}}},86282:function(r,n,i){"use strict";var a=i(71828),o=i(86807),s=i(27670).c,l=i(90769).handleText,u=i(37434).handleLabelsAndValues,c=i(37434).handleMarkerDefaults;r.exports=function(r,n,i,f){function h(i,s){return a.coerce(r,n,o,i,s)}var p=u(h("labels"),h("values")),d=p.len;if(n._hasLabels=p.hasLabels,n._hasValues=p.hasValues,!n._hasLabels&&n._hasValues&&(h("label0"),h("dlabel")),d){n._length=d,c(r,n,f,h),h("scalegroup");var v,g=h("text"),y=h("texttemplate");if(y||(v=h("textinfo",Array.isArray(g)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),y||v&&"none"!==v){var m=h("textposition");l(r,n,f,h,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}s(n,f,h),h("title.text")&&(h("title.position"),a.coerceFont(h,"title.font",f.font)),h("aspectratio"),h("baseratio")}else n.visible=!1}},10421:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"funnelarea",basePlotModule:i(6452),categories:["pie-like","funnelarea","showLegend"],attributes:i(86807),layoutAttributes:i(80097),supplyDefaults:i(86282),supplyLayoutDefaults:i(57402),calc:i(89574).calc,crossTraceCalc:i(89574).crossTraceCalc,plot:i(79187),style:i(71858),styleOne:i(63463),meta:{}}},80097:function(r,n,i){"use strict";var a=i(92774).hiddenlabels;r.exports={hiddenlabels:a,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(r,n,i){"use strict";var a=i(71828),o=i(80097);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("hiddenlabels"),i("funnelareacolorway",n.colorway),i("extendfunnelareacolors")}},79187:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(71828),l=s.strScale,u=s.strTranslate,c=i(63893),f=i(17295).toMoveInsideBar,h=i(72597),p=h.recordMinTextSize,d=h.clearMinTextSize,v=i(53581),g=i(14575),y=g.attachFxHandlers,m=g.determineInsideTextFont,x=g.layoutAreas,b=g.prerenderTitles,_=g.positionTitleOutside,w=g.formatSliceLabel;function T(r,n){return"l"+(n[0]-r[0])+","+(n[1]-r[1])}r.exports=function(r,n){var i=r._context.staticPlot,h=r._fullLayout;d("funnelarea",h),b(n,r),x(n,h._size),s.makeTraceGroups(h._funnelarealayer,n,"trace").each(function(n){var d=a.select(this),g=n[0],x=g.trace;(function(r){if(r.length){var n=r[0],i=n.trace,a=i.aspectratio,o=i.baseratio;o>.999&&(o=.999);var s,l,u,c=Math.pow(o,2),f=n.vTotal,h=f*c/(1-c)/f,p=[];for(p.push(L()),l=r.length-1;l>-1;l--)if(!(u=r[l]).hidden){var d=u.v/f;h+=d,p.push(L())}var v=1/0,g=-1/0;for(l=0;l<p.length;l++)v=Math.min(v,(s=p[l])[1]),g=Math.max(g,s[1]);for(l=0;l<p.length;l++)p[l][1]-=(g+v)/2;var y=p[p.length-1][0],m=n.r,x=(g-v)/2,b=m/y,_=m/x*a;for(n.r=_*x,l=0;l<p.length;l++)p[l][0]*=b,p[l][1]*=_;var w,T,k=[-(s=p[0])[0],s[1]],A=[s[0],s[1]],M=0;for(l=r.length-1;l>-1;l--)if(!(u=r[l]).hidden){var S=p[M+=1][0],E=p[M][1];u.TL=[-S,E],u.TR=[S,E],u.BL=k,u.BR=A,u.pxmid=(w=u.TR,T=u.BR,[.5*(w[0]+T[0]),.5*(w[1]+T[1])]),k=u.TL,A=u.TR}}function L(){var r,n={x:r=Math.sqrt(h),y:-r};return[n.x,n.y]}})(n),d.each(function(){var d=a.select(this).selectAll("g.slice").data(n);d.enter().append("g").classed("slice",!0),d.exit().remove(),d.each(function(l,u){if(l.hidden)a.select(this).selectAll("path,g").remove();else{l.pointNumber=l.i,l.curveNumber=x.index;var d=g.cx,b=g.cy,_=a.select(this),k=_.selectAll("path.surface").data([l]);k.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),_.call(y,r,n);var A="M"+(d+l.TR[0])+","+(b+l.TR[1])+T(l.TR,l.BR)+T(l.BR,l.BL)+T(l.BL,l.TL)+"Z";k.attr("d",A),w(r,l,g);var M=v.castOption(x.textposition,l.pts),S=_.selectAll("g.slicetext").data(l.text&&"none"!==M?[0]:[]);S.enter().append("g").classed("slicetext",!0),S.exit().remove(),S.each(function(){var i=s.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),v=s.ensureUniformFontSize(r,m(x,l,h.font));i.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,v).call(c.convertToTspans,r);var g,y=o.bBox(i.node()),_=Math.min(l.BL[1],l.BR[1])+b,w=Math.max(l.TL[1],l.TR[1])+b;(g=f(Math.max(l.TL[0],l.BL[0])+d,Math.min(l.TR[0],l.BR[0])+d,_,w,y,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=v.size,p(x.type,g,h),n[u].transform=g,s.setTransormAndDisplay(i,g)})}});var b=a.select(this).selectAll("g.titletext").data(x.title.text?[0]:[]);b.enter().append("g").classed("titletext",!0),b.exit().remove(),b.each(function(){var n=s.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),i=x.title.text;x._meta&&(i=s.templateString(i,x._meta)),n.text(i).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,x.title.font).call(c.convertToTspans,r);var f=_(g,h._size);n.attr("transform",u(f.x,f.y)+l(Math.min(1,f.scale))+u(f.tx,f.ty))})})})}},71858:function(r,n,i){"use strict";var a=i(39898),o=i(63463),s=i(72597).resizeText;r.exports=function(r){var n=r._fullLayout._funnelarealayer.selectAll(".trace");s(r,n,"funnelarea"),n.each(function(n){var i=n[0].trace,s=a.select(this);s.style({opacity:i.opacity}),s.selectAll("path.surface").each(function(n){a.select(this).call(o,n,i,r)})})}},21606:function(r,n,i){"use strict";var a=i(82196),o=i(9012),s=i(41940),l=i(12663).axisHoverFormat,u=i(5386).fF,c=i(5386).si,f=i(50693),h=i(1426).extendFlat;r.exports=h({z:{valType:"data_array",editType:"calc"},x:h({},a.x,{impliedEdits:{xtype:"array"}}),x0:h({},a.x0,{impliedEdits:{xtype:"scaled"}}),dx:h({},a.dx,{impliedEdits:{xtype:"scaled"}}),y:h({},a.y,{impliedEdits:{ytype:"array"}}),y0:h({},a.y0,{impliedEdits:{ytype:"scaled"}}),dy:h({},a.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:h({},a.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:h({},a.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:h({},a.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:h({},a.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:h({},a.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:h({},a.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z",1),hovertemplate:u(),texttemplate:c({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:s({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:h({},o.showlegend,{dflt:!1})},{transforms:void 0},f("",{cLetter:"z",autoColorDflt:!1}))},90757:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(89298),l=i(42973),u=i(17562),c=i(78803),f=i(68296),h=i(4742),p=i(824),d=i(43907),v=i(70769),g=i(50606).BADNUM;function y(r){for(var n=[],i=r.length,a=0;a<i;a++){var o=r[a];o!==g&&n.push(o)}return n}r.exports=function(r,n){var i,m,x,b,_,w,T,k,A,M,S,E=s.getFromId(r,n.xaxis||"x"),L=s.getFromId(r,n.yaxis||"y"),C=a.traceIs(n,"contour"),O=a.traceIs(n,"histogram"),P=a.traceIs(n,"gl2d"),I=C?"best":n.zsmooth;if(E._minDtick=0,L._minDtick=0,O)b=(S=u(r,n)).orig_x,i=S.x,m=S.x0,x=S.dx,k=S.orig_y,_=S.y,w=S.y0,T=S.dy,A=S.z;else{var D=n.z;o.isArray1D(D)?(f(n,E,L,"x","y",["z"]),i=n._x,_=n._y,D=n._z):(b=n.x?E.makeCalcdata(n,"x"):[],k=n.y?L.makeCalcdata(n,"y"):[],i=l(n,E,"x",b).vals,_=l(n,L,"y",k).vals,n._x=i,n._y=_),m=n.x0,x=n.dx,w=n.y0,T=n.dy,A=h(D,n,E,L)}function z(r){I=n._input.zsmooth=n.zsmooth=!1,o.warn('cannot use zsmooth: "fast": '+r)}function R(r){if(r.length>1){var n=(r[r.length-1]-r[0])/(r.length-1),i=Math.abs(n/100);for(M=0;M<r.length-1;M++)if(Math.abs(r[M+1]-r[M]-n)>i)return!1}return!0}(E.rangebreaks||L.rangebreaks)&&(A=function(r,n,i){for(var a=[],o=-1,s=0;s<i.length;s++)if(n[s]!==g){a[++o]=[];for(var l=0;l<i[s].length;l++)r[l]!==g&&a[o].push(i[s][l])}return a}(i,_,A),O||(i=y(i),_=y(_),n._x=i,n._y=_)),!O&&(C||n.connectgaps)&&(n._emptypoints=d(A),p(A,n._emptypoints)),n._islinear=!1,"log"===E.type||"log"===L.type?"fast"===I&&z("log axis found"):R(i)?R(_)?n._islinear=!0:"fast"===I&&z("y scale is not linear"):"fast"===I&&z("x scale is not linear");var F=o.maxRowLength(A),B="scaled"===n.xtype?"":i,N=v(n,B,m,x,F,E),j="scaled"===n.ytype?"":_,U=v(n,j,w,T,A.length,L);P||(n._extremes[E._id]=s.findExtremes(E,N),n._extremes[L._id]=s.findExtremes(L,U));var V={x:N,y:U,z:A,text:n._text||n.text,hovertext:n._hovertext||n.hovertext};if(n.xperiodalignment&&b&&(V.orig_x=b),n.yperiodalignment&&k&&(V.orig_y=k),B&&B.length===N.length-1&&(V.xCenter=B),j&&j.length===U.length-1&&(V.yCenter=j),O&&(V.xRanges=S.xRanges,V.yRanges=S.yRanges,V.pts=S.pts),C||c(r,n,{vals:A,cLetter:"z"}),C&&n.contours&&"heatmap"===n.contours.coloring){var H={type:"contour"===n.type?"heatmap":"histogram2d",xcalendar:n.xcalendar,ycalendar:n.ycalendar};V.xfill=v(H,B,m,x,F,E),V.yfill=v(H,j,w,T,A.length,L)}return[V]}},4742:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(50606).BADNUM;r.exports=function(r,n,i,l){if(n&&n.transpose){for(c=0,d=0;d<r.length;d++)c=Math.max(c,r[d].length);if(0===c)return!1;h=function(r){return r.length},p=function(r,n,i){return(r[i]||[])[n]}}else c=r.length,h=function(r,n){return r[n].length},p=function(r,n,i){return(r[n]||[])[i]};function u(r){if(n&&"carpet"!==n.type&&"contourcarpet"!==n.type&&r&&"category"===r.type&&n["_"+r._id.charAt(0)].length){var i=r._id.charAt(0),a={},l=n["_"+i+"CategoryMap"]||n[i];for(d=0;d<l.length;d++)a[l[d]]=d;return function(n){var i=a[r._categories[n]];return i+1?i:s}}return o.identity}var c,f,h,p,d,v,g,y,m=u(i),x=u(l);l&&"category"===l.type&&(c=l._categories.length);var b=Array(c);for(d=0;d<c;d++)for(f=i&&"category"===i.type?i._categories.length:h(r,d),b[d]=Array(f),v=0;v<f;v++)b[d][v]=function(r){if(a(r))return+r}((g=x(d),y=m(v),g===s||y===s?s:p(r,g,y)));return b}},61243:function(r){"use strict";r.exports={min:"zmin",max:"zmax"}},68296:function(r,n,i){"use strict";var a=i(71828),o=i(50606).BADNUM,s=i(42973);r.exports=function(r,n,i,l,u,c){var f=r._length,h=n.makeCalcdata(r,l),p=i.makeCalcdata(r,u);h=s(r,n,l,h).vals,p=s(r,i,u,p).vals;var d,v,g,y,m=r.text,x=void 0!==m&&a.isArray1D(m),b=r.hovertext,_=void 0!==b&&a.isArray1D(b),w=a.distinctVals(h),T=w.vals,k=a.distinctVals(p),A=k.vals,M=[],S=A.length,E=T.length;for(d=0;d<c.length;d++)M[d]=a.init2dArray(S,E);x&&(g=a.init2dArray(S,E)),_&&(y=a.init2dArray(S,E));var L=a.init2dArray(S,E);for(d=0;d<f;d++)if(h[d]!==o&&p[d]!==o){var C=a.findBin(h[d]+w.minDiff/2,T),O=a.findBin(p[d]+k.minDiff/2,A);for(v=0;v<c.length;v++){var P=r[c[v]];M[v][O][C]=P[d],L[O][C]=d}x&&(g[O][C]=m[d]),_&&(y[O][C]=b[d])}for(r["_"+l]=T,r["_"+u]=A,v=0;v<c.length;v++)r["_"+c[v]]=M[v];x&&(r._text=g),_&&(r._hovertext=y),n&&"category"===n.type&&(r["_"+l+"CategoryMap"]=T.map(function(r){return n._categories[r]})),i&&"category"===i.type&&(r["_"+u+"CategoryMap"]=A.map(function(r){return i._categories[r]})),r._after2before=L}},76382:function(r,n,i){"use strict";var a=i(71828),o=i(67684),s=i(58623),l=i(73927),u=i(49901),c=i(1586),f=i(21606);r.exports=function(r,n,i,h){function p(i,o){return a.coerce(r,n,f,i,o)}o(r,n,p,h)?(l(r,n,h,p),p("xhoverformat"),p("yhoverformat"),p("text"),p("hovertext"),p("hovertemplate"),s(p,h),u(r,n,p,h),p("hoverongaps"),p("connectgaps",a.isArray1D(n.z)&&!1!==n.zsmooth),c(r,n,h,p,{prefix:"",cLetter:"z"})):n.visible=!1}},43907:function(r,n,i){"use strict";var a=i(71828).maxRowLength;r.exports=function(r){var n,i,o,s,l,u,c,f,h=[],p={},d=[],v=r[0],g=[],y=[0,0,0],m=a(r);for(i=0;i<r.length;i++)for(n=g,g=v,v=r[i+1]||[],o=0;o<m;o++)void 0===g[o]&&((u=(void 0!==g[o-1]?1:0)+(void 0!==g[o+1]?1:0)+(void 0!==n[o]?1:0)+(void 0!==v[o]?1:0))?(0===i&&u++,0===o&&u++,i===r.length-1&&u++,o===g.length-1&&u++,u<4&&(p[[i,o]]=[i,o,u]),h.push([i,o,u])):d.push([i,o]));for(;d.length;){for(c={},f=!1,l=d.length-1;l>=0;l--)(u=((p[[(i=(s=d[l])[0])-1,o=s[1]]]||y)[2]+(p[[i+1,o]]||y)[2]+(p[[i,o-1]]||y)[2]+(p[[i,o+1]]||y)[2])/20)&&(c[s]=[i,o,u],d.splice(l,1),f=!0);if(!f)throw"findEmpties iterated with no new neighbors";for(s in c)p[s]=c[s],h.push(c[s])}return h.sort(function(r,n){return n[2]-r[2]})}},46248:function(r,n,i){"use strict";var a=i(30211),o=i(71828),s=o.isArrayOrTypedArray,l=i(89298),u=i(21081).extractOpts;r.exports=function(r,n,i,c,f){f||(f={});var h,p,d,v,g=f.isContour,y=r.cd[0],m=y.trace,x=r.xa,b=r.ya,_=y.x,w=y.y,T=y.z,k=y.xCenter,A=y.yCenter,M=y.zmask,S=m.zhoverformat,E=_,L=w;if(!1!==r.index){try{d=Math.round(r.index[1]),v=Math.round(r.index[0])}catch(n){return void o.error("Error hovering on heatmap, pointNumber must be [row,col], found:",r.index)}if(d<0||d>=T[0].length||v<0||v>T.length)return}else{if(a.inbox(n-_[0],n-_[_.length-1],0)>0||a.inbox(i-w[0],i-w[w.length-1],0)>0)return;if(g){for(E=[2*_[0]-_[1]],C=1;C<_.length;C++)E.push((_[C]+_[C-1])/2);for(E.push([2*_[_.length-1]-_[_.length-2]]),L=[2*w[0]-w[1]],C=1;C<w.length;C++)L.push((w[C]+w[C-1])/2);L.push([2*w[w.length-1]-w[w.length-2]])}d=Math.max(0,Math.min(E.length-2,o.findBin(n,E))),v=Math.max(0,Math.min(L.length-2,o.findBin(i,L)))}var C,O,P,I=x.c2p(_[d]),D=x.c2p(_[d+1]),z=b.c2p(w[v]),R=b.c2p(w[v+1]);g?(O=y.orig_x||_,P=y.orig_y||w,D=I,h=O[d],R=z,p=P[v]):(O=y.orig_x||k||_,P=y.orig_y||A||w,h=k?O[d]:(O[d]+O[d+1])/2,p=A?P[v]:(P[v]+P[v+1])/2,x&&"category"===x.type&&(h=_[d]),b&&"category"===b.type&&(p=w[v]),m.zsmooth&&(I=D=x.c2p(h),z=R=b.c2p(p)));var F=T[v][d];if(M&&!M[v][d]&&(F=void 0),void 0!==F||m.hoverongaps){s(y.hovertext)&&s(y.hovertext[v])?B=y.hovertext[v][d]:s(y.text)&&s(y.text[v])&&(B=y.text[v][d]);var B,N=u(m),j={type:"linear",range:[N.min,N.max],hoverformat:S,_separators:x._separators,_numFormat:x._numFormat},U=l.tickText(j,F,"hover").text;return[o.extendFlat(r,{index:m._after2before?m._after2before[v][d]:[v,d],distance:r.maxHoverDistance,spikeDistance:r.maxSpikeDistance,x0:I,x1:D,y0:z,y1:R,xLabelVal:h,yLabelVal:p,zLabelVal:F,zLabel:U,text:B})]}}},92165:function(r,n,i){"use strict";r.exports={attributes:i(21606),supplyDefaults:i(76382),calc:i(90757),plot:i(50347),colorbar:i(61243),style:i(70035),hoverPoints:i(46248),moduleType:"trace",name:"heatmap",basePlotModule:i(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(r,n,i){"use strict";var a=i(71828),o=[[-1,0],[1,0],[0,-1],[0,1]];function s(r,n,i){var a,s,l,u,c,f,h,p,d,v,g,y,m,x=0;for(u=0;u<n.length;u++){for(s=(a=n[u])[0],l=a[1],g=r[s][l],v=0,d=0,c=0;c<4;c++)(h=r[s+(f=o[c])[0]])&&void 0!==(p=h[l+f[1]])&&(0===v?y=m=p:(y=Math.min(y,p),m=Math.max(m,p)),d++,v+=p);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";r[s][l]=v/d,void 0===g?d<4&&(x=1):(r[s][l]=(1+i)*r[s][l]-i*g,m>y&&(x=Math.max(x,Math.abs(r[s][l]-g)/(m-y))))}return x}r.exports=function(r,n){var i,o=1;for(s(r,n),i=0;i<n.length&&!(n[i][2]<4);i++);for(n=n.slice(i),i=0;i<100&&o>.01;i++)o=s(r,n,.5-.25*Math.min(1,.5*o));return o>.01&&a.log("interp2d didn't converge quickly",o),r}},58623:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){r("texttemplate");var i=a.extendFlat({},n.font,{color:"auto",size:"auto"});a.coerceFont(r,"textfont",i)}},70769:function(r,n,i){"use strict";var a=i(73972),o=i(71828).isArrayOrTypedArray;r.exports=function(r,n,i,s,l,u){var c,f,h,p=[],d=a.traceIs(r,"contour"),v=a.traceIs(r,"histogram"),g=a.traceIs(r,"gl2d");if(o(n)&&n.length>1&&!v&&"category"!==u.type){var y=n.length;if(!(y<=l))return d?n.slice(0,l):n.slice(0,l+1);if(d||g)p=Array.from(n).slice(0,l);else if(1===l)p=[n[0]-.5,n[0]+.5];else{for(p=[1.5*n[0]-.5*n[1]],h=1;h<y;h++)p.push(.5*(n[h-1]+n[h]));p.push(1.5*n[y-1]-.5*n[y-2])}if(y<l){var m=p[p.length-1],x=m-p[p.length-2];for(h=y;h<l;h++)m+=x,p.push(m)}}else{var b=r[u._id.charAt(0)+"calendar"];for(c=v?u.r2c(i,0,b):o(n)&&1===n.length?n[0]:void 0===i?0:("log"===u.type?u.d2c:u.r2c)(i,0,b),f=s||1,h=d||g?0:-.5;h<l;h++)p.push(c+f*h)}return p}},50347:function(r,n,i){"use strict";var a=i(39898),o=i(84267),s=i(73972),l=i(91424),u=i(89298),c=i(71828),f=i(63893),h=i(8225),p=i(7901),d=i(21081).extractOpts,v=i(21081).makeColorScaleFuncFromTrace,g=i(77922),y=i(18783).LINE_SPACING,m=i(3883),x=i(32396).STYLE,b="heatmap-label";function _(r){return r.selectAll("g."+b)}function w(r){_(r).remove()}function T(r,n){var i=n.length-2,a=c.constrain(c.findBin(r,n),0,i),o=n[a],s=n[a+1],l=c.constrain(a+(r-o)/(s-o)-.5,0,i),u=Math.round(l),f=Math.abs(l-u);return l&&l!==i&&f?{bin0:u,frac:f,bin1:Math.round(u+f/(l-u))}:{bin0:u,bin1:u,frac:0}}function k(r,n){var i=n.length-1,a=c.constrain(c.findBin(r,n),0,i),o=n[a],s=(r-o)/(n[a+1]-o)||0;return s<=0?{bin0:a,bin1:a,frac:0}:s<.5?{bin0:a,bin1:a+1,frac:s}:{bin0:a+1,bin1:a,frac:1-s}}function A(r,n,i){r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],r[n+3]=Math.round(255*i[3])}r.exports=function(r,n,i,M){var S=n.xaxis,E=n.yaxis;c.makeTraceGroups(M,i,"hm").each(function(n){var i,M,L,C,O,P,I,D,z=a.select(this),R=n[0],F=R.trace,B=F.xgap||0,N=F.ygap||0,j=R.z,U=R.x,V=R.y,H=R.xCenter,q=R.yCenter,G=s.traceIs(F,"contour"),Z=G?"best":F.zsmooth,Y=j.length,W=c.maxRowLength(j),X=!1,J=!1;for(P=0;void 0===i&&P<U.length-1;)i=S.c2p(U[P]),P++;for(P=U.length-1;void 0===M&&P>0;)M=S.c2p(U[P]),P--;for(M<i&&(L=M,M=i,i=L,X=!0),P=0;void 0===C&&P<V.length-1;)C=E.c2p(V[P]),P++;for(P=V.length-1;void 0===O&&P>0;)O=E.c2p(V[P]),P--;O<C&&(L=C,C=O,O=L,J=!0),G&&(H=U,q=V,U=R.xfill,V=R.yfill);var K="default";if(Z?K="best"===Z?"smooth":"fast":F._islinear&&0===B&&0===N&&m()&&(K="fast"),"fast"!==K){var $="best"===Z?0:.5;i=Math.max(-$*S._length,i),M=Math.min((1+$)*S._length,M),C=Math.max(-$*E._length,C),O=Math.min((1+$)*E._length,O)}var Q,tt,te=Math.round(M-i),tr=Math.round(O-C);if(i>=S._length||M<=0||C>=E._length||O<=0)return z.selectAll("image").data([]).exit().remove(),void w(z);"fast"===K?(Q=W,tt=Y):(Q=te,tt=tr);var tn=document.createElement("canvas");tn.width=Q,tn.height=tt;var ti,ta,to=tn.getContext("2d",{willReadFrequently:!0}),ts=v(F,{noNumericCheck:!0,returnArray:!0});"fast"===K?(ti=X?function(r){return W-1-r}:c.identity,ta=J?function(r){return Y-1-r}:c.identity):(ti=function(r){return c.constrain(Math.round(S.c2p(U[r])-i),0,te)},ta=function(r){return c.constrain(Math.round(E.c2p(V[r])-C),0,tr)});var tl,tu,tc,tf,th=ta(0),tp=[th,th],td=X?0:1,tv=J?0:1,tg=0,ty=0,tm=0,tx=0;function tb(r,n){if(void 0!==r){var i=ts(r);return i[0]=Math.round(i[0]),i[1]=Math.round(i[1]),i[2]=Math.round(i[2]),tg+=n,ty+=i[0]*n,tm+=i[1]*n,tx+=i[2]*n,i}return[0,0,0,0]}if("default"!==K){var t_,tw=0;try{t_=new Uint8Array(Q*tt*4)}catch(r){t_=Array(Q*tt*4)}if("smooth"===K){var tT,tk,tA,tM=H||U,tS=q||V,tE=Array(tM.length),tL=Array(tS.length),tC=Array(te),tO=H?k:T,tP=q?k:T;for(P=0;P<tM.length;P++)tE[P]=Math.round(S.c2p(tM[P])-i);for(P=0;P<tS.length;P++)tL[P]=Math.round(E.c2p(tS[P])-C);for(P=0;P<te;P++)tC[P]=tO(P,tE);for(I=0;I<tr;I++)for(tk=j[(tT=tP(I,tL)).bin0],tA=j[tT.bin1],P=0;P<te;P++,tw+=4)A(t_,tw,tf=function(r,n,i,a){var o=r[i.bin0];if(void 0===o)return tb(void 0,1);var s,l=r[i.bin1],u=n[i.bin0],c=n[i.bin1];return s=void 0===l?void 0===c?0:void 0===u?2*(c-o):2*(2*c-u-o)/3:void 0===c?void 0===u?0:2*(2*o-l-u)/3:void 0===u?2*(2*c-l-o)/3:c+o-l-u,tb(o+i.frac*(l-o||0)+a.frac*((u-o||0)+i.frac*s))}(tk,tA,tC[P],tT))}else for(I=0;I<Y;I++)for(tc=j[I],tp=ta(I),P=0;P<W;P++)tf=tb(tc[P],1),A(t_,tw=4*(tp*W+ti(P)),tf);var tI=to.createImageData(Q,tt);try{tI.data.set(t_)}catch(r){var tD=tI.data,tz=tD.length;for(I=0;I<tz;I++)tD[I]=t_[I]}to.putImageData(tI,0,0)}else{var tR=Math.floor(B/2),tF=Math.floor(N/2);for(I=0;I<Y;I++)if(tc=j[I],tp.reverse(),tp[tv]=ta(I+1),tp[0]!==tp[1]&&void 0!==tp[0]&&void 0!==tp[1])for(tl=[tu=ti(0),tu],P=0;P<W;P++)tl.reverse(),tl[td]=ti(P+1),tl[0]!==tl[1]&&void 0!==tl[0]&&void 0!==tl[1]&&(tf=tb(tc[P],(tl[1]-tl[0])*(tp[1]-tp[0])),to.fillStyle="rgba("+tf.join(",")+")",to.fillRect(tl[0]+tR,tp[0]+tF,tl[1]-tl[0]-B,tp[1]-tp[0]-N))}var tB=o("rgb("+(ty=Math.round(ty/tg))+","+(tm=Math.round(tm/tg))+","+(tx=Math.round(tx/tg))+")");r._hmpixcount=(r._hmpixcount||0)+tg,r._hmlumcount=(r._hmlumcount||0)+tg*tB.getLuminance();var tN=z.selectAll("image").data(n);tN.enter().append("svg:image").attr({xmlns:g.svg,preserveAspectRatio:"none"}),tN.attr({height:tr,width:te,x:i,y:C,"xlink:href":tn.toDataURL("image/png")}),"fast"!==K||Z||tN.attr("style",x),w(z);var tj=F.texttemplate;if(tj){var tU=d(F),tV={type:"linear",range:[tU.min,tU.max],_separators:S._separators,_numFormat:S._numFormat},tH="histogram2dcontour"===F.type,tq="contour"===F.type,tG=tq?Y-1:Y,tZ=tq?1:0,tY=tq?W-1:W,tW=[];for(P=tq?1:0;P<tG;P++){if(tq)tJ=R.y[P];else if(tH){if(0===P||P===Y-1)continue;tJ=R.y[P]}else if(R.yCenter)tJ=R.yCenter[P];else{if(P+1===Y&&void 0===R.y[P+1])continue;tJ=(R.y[P]+R.y[P+1])/2}var tX=Math.round(E.c2p(tJ));if(!(0>tX||tX>E._length))for(I=tZ;I<tY;I++){if(tq)tK=R.x[I];else if(tH){if(0===I||I===W-1)continue;tK=R.x[I]}else if(R.xCenter)tK=R.xCenter[I];else{if(I+1===W&&void 0===R.x[I+1])continue;tK=(R.x[I]+R.x[I+1])/2}var tJ,tK,t$=Math.round(S.c2p(tK));if(!(0>t$||t$>S._length)){var tQ=h({x:tK,y:tJ},F,r._fullLayout);tQ.x=tK,tQ.y=tJ;var t0=R.z[P][I];void 0===t0?(tQ.z="",tQ.zLabel=""):(tQ.z=t0,tQ.zLabel=u.tickText(tV,t0,"hover").text);var t1=R.text&&R.text[P]&&R.text[P][I];void 0!==t1&&!1!==t1||(t1=""),tQ.text=t1;var t2=c.texttemplateString(tj,tQ,r._fullLayout._d3locale,tQ,F._meta||{});if(t2){var t3=t2.split("<br>"),t5=t3.length,t4=0;for(D=0;D<t5;D++)t4=Math.max(t4,t3[D].length);tW.push({l:t5,c:t4,t:t2,x:t$,y:tX,z:t0})}}}}var t6=F.textfont,t8=t6.family,t7=t6.size,t9=r._fullLayout.font.size;if(!t7||"auto"===t7){var et=1/0,ee=1/0,er=0,en=0;for(D=0;D<tW.length;D++){var ei=tW[D];if(er=Math.max(er,ei.l),en=Math.max(en,ei.c),D<tW.length-1){var ea=tW[D+1],eo=Math.abs(ea.x-ei.x),es=Math.abs(ea.y-ei.y);eo&&(et=Math.min(et,eo)),es&&(ee=Math.min(ee,es))}}isFinite(et)&&isFinite(ee)?(et-=B,ee-=N,et/=en,ee/=er,et/=y/2,ee/=y,t7=Math.min(Math.floor(et),Math.floor(ee),t9)):t7=t9}if(t7<=0||!isFinite(t7))return;_(z).data(tW).enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(n){var i=a.select(this),o=t6.color;o&&"auto"!==o||(o=p.contrast("rgba("+ts(n.z).join()+")")),i.attr("data-notex",1).call(f.positionText,n.x,n.y-t7*(n.l*y/2-1)).call(l.font,t8,t7,o).text(n.t).call(f.convertToTspans,r)})}})}},70035:function(r,n,i){"use strict";var a=i(39898);r.exports=function(r){a.select(r).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}},49901:function(r){"use strict";r.exports=function(r,n,i){!1===i("zsmooth")&&(i("xgap"),i("ygap")),i("zhoverformat")}},67684:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(73972);function l(r,n){var i=n(r);return"scaled"===(i?n(r+"type","array"):"scaled")&&(n(r+"0"),n("d"+r)),i}r.exports=function(r,n,i,u,c,f){var h,p,d=i("z");if(c=c||"x",f=f||"y",void 0===d||!d.length)return 0;if(o.isArray1D(d)){h=i(c),p=i(f);var v=o.minRowLength(h),g=o.minRowLength(p);if(0===v||0===g)return 0;n._length=Math.min(v,g,d.length)}else{if(h=l(c,i),p=l(f,i),!function(r){for(var n,i=!0,s=!1,l=!1,u=0;u<r.length;u++){if(n=r[u],!o.isArrayOrTypedArray(n)){i=!1;break}n.length>0&&(s=!0);for(var c=0;c<n.length;c++)if(a(n[c])){l=!0;break}}return i&&s&&l}(d))return 0;i("transpose"),n._length=null}return"heatmapgl"===r.type||s.getComponentMethod("calendars","handleTraceDefaults")(r,n,[c,f],u),!0}},16063:function(r,n,i){"use strict";for(var a=i(21606),o=i(50693),s=i(1426).extendFlat,l=i(30962).overrideAll,u=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],c={},f=0;f<u.length;f++){var h=u[f];c[h]=a[h]}c.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},s(c,o("",{cLetter:"z",autoColorDflt:!1})),r.exports=l(c,"calc","nested")},59560:function(r,n,i){"use strict";var a=i(9330).gl_heatmap2d,o=i(89298),s=i(78614);function l(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=a(r.glplot,this.options),this.heatmap._trace=this}var u=l.prototype;u.handlePick=function(r){var n=this.options,i=n.shape,a=r.pointId,o=a%i[0],s=Math.floor(a/i[0]);return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[o],n.y[s],n.z[a]],textLabel:this.textLabels[a],name:this.name,pointIndex:[s,o],hoverinfo:this.hoverinfo}},u.update=function(r,n){var i=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var a=i.z;this.options.z=[].concat.apply([],a);var l=a[0].length,u=a.length;this.options.shape=[l,u],this.options.x=i.x,this.options.y=i.y,this.options.zsmooth=r.zsmooth;var c=function(r){for(var n=r.colorscale,i=r.zmin,a=r.zmax,o=n.length,l=Array(o),u=Array(4*o),c=0;c<o;c++){var f=n[c],h=s(f[1]);l[c]=i+f[0]*(a-i);for(var p=0;p<4;p++)u[4*c+p]=h[p]}return{colorLevels:l,colorValues:u}}(r);this.options.colorLevels=c.colorLevels,this.options.colorValues=c.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var f,h,p=this.scene.xaxis,d=this.scene.yaxis;!1===r.zsmooth&&(f={ppad:i.x[1]-i.x[0]},h={ppad:i.y[1]-i.y[0]}),r._extremes[p._id]=o.findExtremes(p,i.x,f),r._extremes[d._id]=o.findExtremes(d,i.y,h)},u.dispose=function(){this.heatmap.dispose()},r.exports=function(r,n,i){var a=new l(r,n.uid);return a.update(n,i),a}},19600:function(r,n,i){"use strict";var a=i(71828),o=i(67684),s=i(1586),l=i(16063);r.exports=function(r,n,i,u){function c(i,o){return a.coerce(r,n,l,i,o)}o(r,n,c,u)?(c("text"),c("zsmooth"),s(r,n,u,c,{prefix:"",cLetter:"z"})):n.visible=!1}},3325:function(r,n,i){"use strict";r.exports={attributes:i(16063),supplyDefaults:i(19600),colorbar:i(61243),calc:i(90757),plot:i(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:i(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(r,n,i){"use strict";var a=i(1486),o=i(12663).axisHoverFormat,s=i(5386).fF,l=i(5386).si,u=i(41940),c=i(17656),f=i(72406),h=i(1426).extendFlat;r.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:o("x"),yhoverformat:o("y"),text:h({},a.text,{}),hovertext:h({},a.hovertext,{}),orientation:a.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:c("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:c("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:s({},{keys:f.eventDataKeys}),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:h({},a.textposition,{arrayOk:!1}),textfont:u({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:u({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:u({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:a.insidetextanchor,textangle:a.textangle,cliponaxis:a.cliponaxis,constraintext:a.constraintext,marker:a.marker,offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:a.selected,unselected:a.unselected,_deprecated:{bardir:a._deprecated.bardir}}},42174:function(r){"use strict";r.exports=function(r,n){for(var i=r.length,a=0,o=0;o<i;o++)n[o]?(r[o]/=n[o],a+=r[o]):r[o]=null;return a}},17656:function(r){"use strict";r.exports=function(r,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(r,n,i){"use strict";var a=i(92770);r.exports={count:function(r,n,i){return i[r]++,1},sum:function(r,n,i,o){var s=o[n];return a(s)?(s=Number(s),i[r]+=s,s):0},avg:function(r,n,i,o,s){var l=o[n];return a(l)&&(l=Number(l),i[r]+=l,s[r]++),0},min:function(r,n,i,o){var s=o[n];if(a(s)){if(s=Number(s),!a(i[r]))return i[r]=s,s;if(i[r]>s){var l=s-i[r];return i[r]=s,l}}return 0},max:function(r,n,i,o){var s=o[n];if(a(s)){if(s=Number(s),!a(i[r]))return i[r]=s,s;if(i[r]<s){var l=s-i[r];return i[r]=s,l}}return 0}}},40965:function(r,n,i){"use strict";var a=i(50606),o=a.ONEAVGYEAR,s=a.ONEAVGMONTH,l=a.ONEDAY,u=a.ONEHOUR,c=a.ONEMIN,f=a.ONESEC,h=i(89298).tickIncrement;function p(r,n,i,a){if(r*n<=0)return 1/0;for(var s=Math.abs(n-r),u="date"===i.type,c=d(s,u),f=0;f<10;f++){var h=d(80*c,u);if(c===h||!function(r,n,i,a,s,u){if(a&&r>l){var c=v(n,s,u),f=v(i,s,u),h=r===o?0:1;return c[h]!==f[h]}return Math.floor(i/r)-Math.floor(n/r)>.1}(h,r,n,u,i,a))break;c=h}return c}function d(r,n){return n&&r>f?r>l?r>1.1*o?o:r>1.1*s?s:l:r>u?u:r>c?c:f:Math.pow(10,Math.floor(Math.log(r)/Math.LN10))}function v(r,n,i){var a=n.c2d(r,o,i).split("-");return""===a[0]&&(a.unshift(),a[0]="-"+a[0]),a}r.exports=function(r,n,i,a,s){var u,c,f=-1.1*n,d=-.1*n,v=r-d,g=i[0],y=i[1],m=Math.min(p(g+d,g+v,a,s),p(y+d,y+v,a,s)),x=Math.min(p(g+f,g+d,a,s),p(y+f,y+d,a,s));if(m>x&&x<Math.abs(y-g)/4e3?(u=m,c=!1):(u=Math.min(m,x),c=!0),"date"===a.type&&u>l){var b=u===o?1:6,_=u===o?"M12":"M1";return function(n,i){var l=a.c2d(n,o,s),u=l.indexOf("-",b);u>0&&(l=l.substr(0,u));var f=a.d2c(l,0,s);if(f<n){var p=h(f,_,!1,s);(f+p)/2<n+r&&(f=p)}return i&&c?h(f,_,!0,s):f}}return function(n,i){var a=u*Math.round(n/u);return a+u/10<n&&a+.9*u<n+r&&(a+=u),i&&c&&(a-=u),a}}},72138:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(73972),l=i(89298),u=i(75341),c=i(59575),f=i(36362),h=i(42174),p=i(40965);function d(r,n,i,u,c){var f,h,p,v,g,y,m,x=u+"bins",b=r._fullLayout,_=n["_"+u+"bingroup"],w=b._histogramBinOpts[_],T="overlay"===b.barmode,k=function(r){return i.r2c(r,0,v)},A=function(r){return i.c2r(r,0,v)},M="date"===i.type?function(r){return r||0===r?o.cleanDate(r,null,v):null}:function(r){return a(r)?Number(r):null};function S(r,n,i){n[r+"Found"]?(n[r]=M(n[r]),null===n[r]&&(n[r]=i[r])):(y[r]=n[r]=i[r],o.nestedProperty(h[0],x+"."+r).set(i[r]))}if(n["_"+u+"autoBinFinished"])delete n["_"+u+"autoBinFinished"];else{h=w.traces;var E=[],L=!0,C=!1,O=!1;for(f=0;f<h.length;f++)if((p=h[f]).visible){var P=w.dirs[f];g=p["_"+P+"pos0"]=i.makeCalcdata(p,P),E=o.concat(E,g),delete p["_"+u+"autoBinFinished"],!0===n.visible&&(L?L=!1:(delete p._autoBin,p["_"+u+"autoBinFinished"]=1),s.traceIs(p,"2dMap")&&(C=!0),"histogram2dcontour"===p.type&&(O=!0))}v=h[0][u+"calendar"];var I=l.autoBin(E,i,w.nbins,C,v,w.sizeFound&&w.size);if(y=(h[0]._autoBin={})[w.dirs[0]]={},O&&(w.size||(I.start=A(l.tickIncrement(k(I.start),I.size,!0,v))),void 0===w.end&&(I.end=A(l.tickIncrement(k(I.end),I.size,!1,v)))),T&&!s.traceIs(n,"2dMap")&&0===I._dataSpan&&"category"!==i.type&&"multicategory"!==i.type&&""===n.bingroup&&void 0===n.xbins){if(c)return[I,g,!0];I=function(r,n,i,a,s){var l,u,c,f=r._fullLayout,h=function(r,n){for(var i=n.xaxis,a=n.yaxis,o=n.orientation,s=[],l=r._fullData,u=0;u<l.length;u++){var c=l[u];"histogram"===c.type&&!0===c.visible&&c.orientation===o&&c.xaxis===i&&c.yaxis===a&&s.push(c)}return s}(r,n),p=!1,v=1/0,g=[n];for(l=0;l<h.length;l++)if((u=h[l])===n)p=!0;else if(p){var y=d(r,u,i,a,!0),m=y[0],x=y[2];u["_"+a+"autoBinFinished"]=1,u["_"+a+"pos0"]=y[1],x?g.push(u):v=Math.min(v,m.size)}else v=Math.min(v,(c=f._histogramBinOpts[u["_"+a+"bingroup"]]).size||u[s].size);var b=Array(g.length);for(l=0;l<g.length;l++)for(var _=g[l]["_"+a+"pos0"],w=0;w<_.length;w++)if(void 0!==_[w]){b[l]=_[w];break}for(isFinite(v)||(v=o.distinctVals(b).minDiff),l=0;l<g.length;l++){var T=(u=g[l])[a+"calendar"],k={start:i.c2r(b[l]-v/2,0,T),end:i.c2r(b[l]+v/2,0,T),size:v};u._input[s]=u[s]=k,(c=f._histogramBinOpts[u["_"+a+"bingroup"]])&&o.extendFlat(c,k)}return n[s]}(r,n,i,u,x)}(m=p.cumulative||{}).enabled&&"include"!==m.currentbin&&("decreasing"===m.direction?I.start=A(l.tickIncrement(k(I.start),I.size,!0,v)):I.end=A(l.tickIncrement(k(I.end),I.size,!1,v))),w.size=I.size,w.sizeFound||(y.size=I.size,o.nestedProperty(h[0],x+".size").set(I.size)),S("start",w,I),S("end",w,I)}g=n["_"+u+"pos0"],delete n["_"+u+"pos0"];var D=n._input[x]||{},z=o.extendFlat({},w),R=w.start,F=i.r2l(D.start),B=void 0!==F;if((w.startFound||B)&&F!==i.r2l(R)){var N=B?F:o.aggNums(Math.min,null,g),j={type:"category"===i.type||"multicategory"===i.type?"linear":i.type,r2l:i.r2l,dtick:w.size,tick0:R,calendar:v,range:[N,l.tickIncrement(N,w.size,!1,v)].map(i.l2r)},U=l.tickFirst(j);U>i.r2l(N)&&(U=l.tickIncrement(U,w.size,!0,v)),z.start=i.l2r(U),B||o.nestedProperty(n,x+".start").set(z.start)}var V=w.end,H=i.r2l(D.end),q=void 0!==H;if((w.endFound||q)&&H!==i.r2l(V)){var G=q?H:o.aggNums(Math.max,null,g);z.end=i.l2r(G),q||o.nestedProperty(n,x+".start").set(z.end)}var Z="autobin"+u;return!1===n._input[Z]&&(n._input[x]=o.extendFlat({},n[x]||{}),delete n._input[Z],delete n[Z]),[z,g]}r.exports={calc:function(r,n){var i,s,v,g,y=[],m=[],x="h"===n.orientation,b=l.getFromId(r,x?n.yaxis:n.xaxis),_=x?"y":"x",w={x:"y",y:"x"}[_],T=n[_+"calendar"],k=n.cumulative,A=d(r,n,b,_),M=A[0],S=A[1],E="string"==typeof M.size,L=[],C=E?L:M,O=[],P=[],I=[],D=0,z=n.histnorm,R=n.histfunc,F=-1!==z.indexOf("density");k.enabled&&F&&(z=z.replace(/ ?density$/,""),F=!1);var B,N="max"===R||"min"===R?null:0,j=c.count,U=f[z],V=!1,H=function(r){return b.r2c(r,0,T)};for(o.isArrayOrTypedArray(n[w])&&"count"!==R&&(B=n[w],V="avg"===R,j=c[R]),i=H(M.start),v=H(M.end)+(i-l.tickIncrement(i,M.size,!1,T))/1e6;i<v&&y.length<1e6&&(s=l.tickIncrement(i,M.size,!1,T),y.push((i+s)/2),m.push(N),I.push([]),L.push(i),F&&O.push(1/(s-i)),V&&P.push(0),!(s<=i));)i=s;L.push(i),E||"date"!==b.type||(C={start:H(C.start),end:H(C.end),size:C.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var q=n["_"+_+"bingroup"],G={leftGap:1/0,rightGap:1/0};q&&(r._fullLayout._roundFnOpts[q]||(r._fullLayout._roundFnOpts[q]=G),G=r._fullLayout._roundFnOpts[q]);var Z,Y=m.length,W=!0,X=G.leftGap,J=G.rightGap,K={};for(i=0;i<S.length;i++){var $=S[i];(g=o.findBin($,C))>=0&&g<Y&&(D+=j(g,i,m,B,P),W&&I[g].length&&$!==S[I[g][0]]&&(W=!1),I[g].push(i),K[i]=g,X=Math.min(X,$-L[g]),J=Math.min(J,L[g+1]-$))}G.leftGap=X,G.rightGap=J,W||(Z=function(n,i){return function(){var a=r._fullLayout._roundFnOpts[q];return p(a.leftGap,a.rightGap,L,b,T)(n,i)}}),V&&(D=h(m,P)),U&&U(m,D,O),k.enabled&&function(r,n,i){var a,o,s;function l(n){s=r[n],r[n]/=2}function u(n){o=r[n],r[n]=s+o/2,s+=o}if("half"===i){if("increasing"===n)for(l(0),a=1;a<r.length;a++)u(a);else for(l(r.length-1),a=r.length-2;a>=0;a--)u(a)}else if("increasing"===n){for(a=1;a<r.length;a++)r[a]+=r[a-1];"exclude"===i&&(r.unshift(0),r.pop())}else{for(a=r.length-2;a>=0;a--)r[a]+=r[a+1];"exclude"===i&&(r.push(0),r.shift())}}(m,k.direction,k.currentbin);var Q=Math.min(y.length,m.length),tt=[],te=0,tr=Q-1;for(i=0;i<Q;i++)if(m[i]){te=i;break}for(i=Q-1;i>=te;i--)if(m[i]){tr=i;break}for(i=te;i<=tr;i++)if(a(y[i])&&a(m[i])){var tn={p:y[i],s:m[i],b:0};k.enabled||(tn.pts=I[i],W?tn.ph0=tn.ph1=I[i].length?S[I[i][0]]:y[i]:(n._computePh=!0,tn.ph0=Z(L[i]),tn.ph1=Z(L[i+1],!0))),tt.push(tn)}return 1===tt.length&&(tt[0].width1=l.tickIncrement(tt[0].p,M.size,!1,T)-tt[0].p),u(tt,n),o.isArrayOrTypedArray(n.selectedpoints)&&o.tagSelected(tt,n,K),tt},calcAllAutoBins:d}},72406:function(r){"use strict";r.exports={eventDataKeys:["binNumber"]}},82222:function(r,n,i){"use strict";var a=i(71828),o=i(41675),s=i(73972).traceIs,l=i(26125),u=a.nestedProperty,c=i(99082).getAxisGroup,f=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],h=["x","y"];r.exports=function(r,n){var i,p,d,v,g,y,m,x=n._histogramBinOpts={},b=[],_={},w=[];function T(r,n){return a.coerce(i._input,i,i._module.attributes,r,n)}function k(r){return"v"===r.orientation?"x":"y"}function A(r,i,s){var l=r.uid+"__"+s;i||(i=l);var u=o.getFromTrace({_fullLayout:n},r,s).type,c=r[s+"calendar"]||"",f=x[i],h=!0;f&&(u===f.axType&&c===f.calendar?(h=!1,f.traces.push(r),f.dirs.push(s)):(i=l,u!==f.axType&&a.warn(["Attempted to group the bins of trace",r.index,"set on a","type:"+u,"axis","with bins on","type:"+f.axType,"axis."].join(" ")),c!==f.calendar&&a.warn(["Attempted to group the bins of trace",r.index,"set with a",c,"calendar","with bins",f.calendar?"on a "+f.calendar+" calendar":"w/o a set calendar"].join(" ")))),h&&(x[i]={traces:[r],dirs:[s],axType:u,calendar:r[s+"calendar"]||""}),r["_"+s+"bingroup"]=i}for(g=0;g<r.length;g++)s(i=r[g],"histogram")&&(b.push(i),delete i._xautoBinFinished,delete i._yautoBinFinished,s(i,"2dMap")||l(i._input,i,n,T));var M=n._alignmentOpts||{};for(g=0;g<b.length;g++){if(i=b[g],d="",!s(i,"2dMap")){if(v=k(i),"group"===n.barmode&&i.alignmentgroup){var S=c(n,i[v+"axis"])+i.orientation;(M[S]||{})[i.alignmentgroup]&&(d=S)}d||"overlay"===n.barmode||(d=c(n,i.xaxis)+c(n,i.yaxis)+k(i))}d?(_[d]||(_[d]=[]),_[d].push(i)):w.push(i)}for(d in _)if(1!==(p=_[d]).length){var E=!1;for(p.length&&(i=p[0],E=T("bingroup")),d=E||d,g=0;g<p.length;g++){var L=(i=p[g])._input.bingroup;L&&L!==d&&a.warn(["Trace",i.index,"must match","within bingroup",d+".","Ignoring its bingroup:",L,"setting."].join(" ")),i.bingroup=d,A(i,d,k(i))}}else w.push(p[0]);for(g=0;g<w.length;g++){i=w[g];var C=T("bingroup");if(s(i,"2dMap"))for(m=0;m<2;m++){var O=T((v=h[m])+"bingroup",C?C+"__"+v:null);A(i,O,v)}else A(i,C,k(i))}for(d in x){var P=x[d];for(p=P.traces,y=0;y<f.length;y++){var I,D,z=f[y],R=z.name;if("nbins"!==R||!P.sizeFound){for(g=0;g<p.length;g++){if(i=p[g],v=P.dirs[g],I=z.aStr[v],void 0!==u(i._input,I).get()){P[R]=T(I),P[R+"Found"]=!0;break}(D=(i._autoBin||{})[v]||{})[R]&&u(i,I).set(D[R])}if("start"===R||"end"===R)for(;g<p.length;g++)(i=p[g])["_"+v+"bingroup"]&&T(I,(D=(i._autoBin||{})[v]||{})[R]);"nbins"!==R||P.sizeFound||P.nbinsFound||(i=p[0],P[R]=T(I))}}}}},11385:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(7901),l=i(90769).handleText,u=i(98340),c=i(7745);r.exports=function(r,n,i,f){function h(i,a){return o.coerce(r,n,c,i,a)}var p=h("x"),d=h("y");h("cumulative.enabled")&&(h("cumulative.direction"),h("cumulative.currentbin")),h("text");var v=h("textposition");l(r,n,f,h,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat");var g=h("orientation",d&&!p?"h":"v"),y="v"===g?"x":"y",m=p&&d?Math.min(o.minRowLength(p)&&o.minRowLength(d)):o.minRowLength(n[y]||[]);if(m){n._length=m,a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],f),n["v"===g?"y":"x"]&&h("histfunc"),h("histnorm"),h("autobin"+y),u(r,n,h,i,f),o.coerceSelectionMarkerOpacity(n,h);var x=(n.marker.line||{}).color,b=a.getComponentMethod("errorbars","supplyDefaults");b(r,n,x||s.defaultLine,{axis:"y"}),b(r,n,x||s.defaultLine,{axis:"x",inherit:"y"})}else n.visible=!1}},84402:function(r){"use strict";r.exports=function(r,n,i,a,o){if(r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"zLabelVal"in n&&(r.z=n.zLabelVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),!(i.cumulative||{}).enabled){var s,l=Array.isArray(o)?a[0].pts[o[0]][o[1]]:a[o].pts;if(r.pointNumbers=l,r.binNumber=r.pointNumber,delete r.pointNumber,delete r.pointIndex,i._indexToPoints){s=[];for(var u=0;u<l.length;u++)s=s.concat(i._indexToPoints[l[u]])}else s=l;r.pointIndices=s}return r}},76440:function(r,n,i){"use strict";var a=i(95423).hoverPoints,o=i(89298).hoverLabelText;r.exports=function(r,n,i,s,l){var u=a(r,n,i,s,l);if(u){var c=(r=u[0]).cd[r.index],f=r.cd[0].trace;if(!f.cumulative.enabled){var h="h"===f.orientation?"y":"x";r[h+"Label"]=o(r[h+"a"],[c.ph0,c.ph1],f[h+"hoverformat"])}return u}}},36071:function(r,n,i){"use strict";r.exports={attributes:i(7745),layoutAttributes:i(43641),supplyDefaults:i(11385),crossTraceDefaults:i(82222),supplyLayoutDefaults:i(13957),calc:i(72138).calc,crossTraceCalc:i(11661).crossTraceCalc,plot:i(17295).plot,layerName:"barlayer",style:i(16688).style,styleOnSelect:i(16688).styleOnSelect,colorbar:i(4898),hoverPoints:i(76440),selectPoints:i(81974),eventData:i(84402),moduleType:"trace",name:"histogram",basePlotModule:i(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(r){"use strict";r.exports={percent:function(r,n){for(var i=r.length,a=100/n,o=0;o<i;o++)r[o]*=a},probability:function(r,n){for(var i=r.length,a=0;a<i;a++)r[a]/=n},density:function(r,n,i,a){var o=r.length;a=a||1;for(var s=0;s<o;s++)r[s]*=i[s]*a},"probability density":function(r,n,i,a){var o=r.length;a&&(n/=a);for(var s=0;s<o;s++)r[s]*=i[s]/n}}},35361:function(r,n,i){"use strict";var a=i(7745),o=i(17656),s=i(21606),l=i(9012),u=i(12663).axisHoverFormat,c=i(5386).fF,f=i(5386).si,h=i(50693),p=i(1426).extendFlat;r.exports=p({x:a.x,y:a.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:a.histnorm,histfunc:a.histfunc,nbinsx:a.nbinsx,xbins:o("x"),nbinsy:a.nbinsy,ybins:o("y"),autobinx:a.autobinx,autobiny:a.autobiny,bingroup:p({},a.bingroup,{}),xbingroup:p({},a.bingroup,{}),ybingroup:p({},a.bingroup,{}),xgap:s.xgap,ygap:s.ygap,zsmooth:s.zsmooth,xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z",1),hovertemplate:c({},{keys:"z"}),texttemplate:f({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:s.textfont,showlegend:p({},l.showlegend,{dflt:!1})},h("",{cLetter:"z",autoColorDflt:!1}))},17562:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(59575),l=i(36362),u=i(42174),c=i(40965),f=i(72138).calcAllAutoBins;function h(r,n,i,a){var o,s=Array(r);if(a)for(o=0;o<r;o++)s[o]=1/(n[o+1]-n[o]);else{var l=1/i;for(o=0;o<r;o++)s[o]=l}return s}function p(r,n){return{start:r(n.start),end:r(n.end),size:n.size}}function d(r,n,i,a,o,s){var l,u=r.length-1,f=Array(u),h=c(i,a,r,o,s);for(l=0;l<u;l++){var p=(n||[])[l];f[l]=void 0===p?[h(r[l]),h(r[l+1],!0)]:[p,p]}return f}r.exports=function(r,n){var i,c,v,g,y,m=o.getFromId(r,n.xaxis),x=o.getFromId(r,n.yaxis),b=n.xcalendar,_=n.ycalendar,w=function(r){return m.r2c(r,0,b)},T=function(r){return x.r2c(r,0,_)},k=f(r,n,m,"x"),A=k[0],M=k[1],S=f(r,n,x,"y"),E=S[0],L=S[1],C=n._length;M.length>C&&M.splice(C,M.length-C),L.length>C&&L.splice(C,L.length-C);var O=[],P=[],I=[],D="string"==typeof A.size,z="string"==typeof E.size,R=[],F=[],B=D?R:A,N=z?F:E,j=0,U=[],V=[],H=n.histnorm,q=n.histfunc,G=-1!==H.indexOf("density"),Z="max"===q||"min"===q?null:0,Y=s.count,W=l[H],X=!1,J=[],K=[],$="z"in n?n.z:"marker"in n&&Array.isArray(n.marker.color)?n.marker.color:"";$&&"count"!==q&&(X="avg"===q,Y=s[q]);var Q=A.size,tt=w(A.start),te=w(A.end)+(tt-o.tickIncrement(tt,Q,!1,b))/1e6;for(c=tt;c<te;c=o.tickIncrement(c,Q,!1,b))P.push(Z),R.push(c),X&&I.push(0);R.push(c);var tr,tn=P.length,ti=(c-tt)/tn,ta=(tr=tt+ti/2,m.c2r(tr,0,b)),to=E.size,ts=T(E.start),tl=T(E.end)+(ts-o.tickIncrement(ts,to,!1,_))/1e6;for(c=ts;c<tl;c=o.tickIncrement(c,to,!1,_)){O.push(P.slice()),F.push(c);var tu=Array(tn);for(v=0;v<tn;v++)tu[v]=[];V.push(tu),X&&U.push(I.slice())}F.push(c);var tc=O.length,tf=(c-ts)/tc,th=(i=ts+tf/2,x.c2r(i,0,_));G&&(J=h(P.length,B,ti,D),K=h(O.length,N,tf,z)),D||"date"!==m.type||(B=p(w,B)),z||"date"!==x.type||(N=p(T,N));var tp=!0,td=!0,tv=Array(tn),tg=Array(tc),ty=1/0,tm=1/0,tx=1/0,tb=1/0;for(c=0;c<C;c++){var t_=M[c],tw=L[c];g=a.findBin(t_,B),y=a.findBin(tw,N),g>=0&&g<tn&&y>=0&&y<tc&&(j+=Y(g,c,O[y],$,U[y]),V[y][g].push(c),tp&&(void 0===tv[g]?tv[g]=t_:tv[g]!==t_&&(tp=!1)),td&&(void 0===tg[y]?tg[y]=tw:tg[y]!==tw&&(td=!1)),ty=Math.min(ty,t_-R[g]),tm=Math.min(tm,R[g+1]-t_),tx=Math.min(tx,tw-F[y]),tb=Math.min(tb,F[y+1]-tw))}if(X)for(y=0;y<tc;y++)j+=u(O[y],U[y]);if(W)for(y=0;y<tc;y++)W(O[y],j,J,K[y]);return{x:M,xRanges:d(R,tp&&tv,ty,tm,m,b),x0:ta,dx:ti,y:L,yRanges:d(F,td&&tg,tx,tb,x,_),y0:th,dy:tf,z:O,pts:V}}},93888:function(r,n,i){"use strict";var a=i(71828),o=i(75238),s=i(49901),l=i(1586),u=i(58623),c=i(35361);r.exports=function(r,n,i,f){function h(i,o){return a.coerce(r,n,c,i,o)}o(r,n,h,f),!1!==n.visible&&(s(r,n,h,f),l(r,n,f,h,{prefix:"",cLetter:"z"}),h("hovertemplate"),u(h,f),h("xhoverformat"),h("yhoverformat"))}},76128:function(r,n,i){"use strict";var a=i(46248),o=i(89298).hoverLabelText;r.exports=function(r,n,i,s,l){var u=a(r,n,i,s,l);if(u){var c=(r=u[0]).index,f=c[0],h=c[1],p=r.cd[0],d=p.trace,v=p.xRanges[h],g=p.yRanges[f];return r.xLabel=o(r.xa,[v[0],v[1]],d.xhoverformat),r.yLabel=o(r.ya,[g[0],g[1]],d.yhoverformat),u}}},43905:function(r,n,i){"use strict";r.exports={attributes:i(35361),supplyDefaults:i(93888),crossTraceDefaults:i(82222),calc:i(90757),plot:i(50347),layerName:"heatmaplayer",colorbar:i(61243),style:i(70035),hoverPoints:i(76128),eventData:i(84402),moduleType:"trace",name:"histogram2d",basePlotModule:i(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(r,n,i){"use strict";var a=i(73972),o=i(71828);r.exports=function(r,n,i,s){var l=i("x"),u=i("y"),c=o.minRowLength(l),f=o.minRowLength(u);c&&f?(n._length=Math.min(c,f),a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],s),(i("z")||i("marker.color"))&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")):n.visible=!1}},99066:function(r,n,i){"use strict";var a=i(35361),o=i(70600),s=i(50693),l=i(12663).axisHoverFormat,u=i(1426).extendFlat;r.exports=u({x:a.x,y:a.y,z:a.z,marker:a.marker,histnorm:a.histnorm,histfunc:a.histfunc,nbinsx:a.nbinsx,xbins:a.xbins,nbinsy:a.nbinsy,ybins:a.ybins,autobinx:a.autobinx,autobiny:a.autobiny,bingroup:a.bingroup,xbingroup:a.xbingroup,ybingroup:a.ybingroup,autocontour:o.autocontour,ncontours:o.ncontours,contours:o.contours,line:{color:o.line.color,width:u({},o.line.width,{dflt:.5}),dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z",1),hovertemplate:a.hovertemplate,texttemplate:o.texttemplate,textfont:o.textfont},s("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(r,n,i){"use strict";var a=i(71828),o=i(75238),s=i(67217),l=i(8724),u=i(58623),c=i(99066);r.exports=function(r,n,i,f){function h(i,o){return a.coerce(r,n,c,i,o)}o(r,n,h,f),!1!==n.visible&&(s(r,n,h,function(i){return a.coerce2(r,n,c,i)}),l(r,n,h,f),h("xhoverformat"),h("yhoverformat"),h("hovertemplate"),n.contours&&"heatmap"===n.contours.coloring&&u(h,f))}},35902:function(r,n,i){"use strict";r.exports={attributes:i(99066),supplyDefaults:i(62654),crossTraceDefaults:i(82222),calc:i(27529),plot:i(29854).plot,layerName:"contourlayer",style:i(84426),colorbar:i(90654),hoverPoints:i(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:i(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(50693),l=i(27670).Y,u=i(34e3),c=i(57564),f=i(45802),h=i(43473),p=i(1426).extendFlat,d=i(79952).u;r.exports={labels:c.labels,parents:c.parents,values:c.values,branchvalues:c.branchvalues,count:c.count,level:c.level,maxdepth:c.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:f.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:p({colors:c.marker.colors,line:c.marker.line,pattern:d,editType:"calc"},s("marker",{colorAttr:"colors",anim:!1})),leaf:c.leaf,pathbar:f.pathbar,text:u.text,textinfo:c.textinfo,texttemplate:o({editType:"plot"},{keys:h.eventDataKeys.concat(["label","value"])}),hovertext:u.hovertext,hoverinfo:c.hoverinfo,hovertemplate:a({},{keys:h.eventDataKeys}),textfont:u.textfont,insidetextfont:u.insidetextfont,outsidetextfont:f.outsidetextfont,textposition:f.textposition,sort:u.sort,root:c.root,domain:l({name:"icicle",trace:!0,editType:"calc"})}},96346:function(r,n,i){"use strict";var a=i(74875);n.name="icicle",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},46584:function(r,n,i){"use strict";var a=i(52147);n.y=function(r,n){return a.calc(r,n)},n.T=function(r){return a._runCrossTraceCalc("icicle",r)}},56524:function(r,n,i){"use strict";var a=i(71828),o=i(46291),s=i(7901),l=i(27670).c,u=i(90769).handleText,c=i(97313).TEXTPAD,f=i(37434).handleMarkerDefaults,h=i(21081),p=h.hasColorscale,d=h.handleDefaults;r.exports=function(r,n,i,h){function v(i,s){return a.coerce(r,n,o,i,s)}var g=v("labels"),y=v("parents");if(g&&g.length&&y&&y.length){var m=v("values");v(m&&m.length?"branchvalues":"count"),v("level"),v("maxdepth"),v("tiling.orientation"),v("tiling.flip"),v("tiling.pad");var x=v("text");v("texttemplate"),n.texttemplate||v("textinfo",a.isArrayOrTypedArray(x)?"text+label":"label"),v("hovertext"),v("hovertemplate");var b=v("pathbar.visible");u(r,n,h,v,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),v("textposition"),f(r,n,h,v);var _=n._hasColorscale=p(r,"marker","colors")||(r.marker||{}).coloraxis;_&&d(r,n,h,v,{prefix:"marker.",cLetter:"c"}),v("leaf.opacity",_?1:.7),n._hovered={marker:{line:{width:2,color:s.contrast(h.paper_bgcolor)}}},b&&(v("pathbar.thickness",n.pathbar.textfont.size+2*c),v("pathbar.side"),v("pathbar.edgeshape")),v("sort"),v("root.color"),l(n,h,v),n._length=null}else n.visible=!1}},90666:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(63893),u=i(21538),c=i(82454).styleOne,f=i(43473),h=i(2791),p=i(83523),d=i(24714).formatSliceLabel;r.exports=function(r,n,i,v,g){var y=g.width,m=g.height,x=g.viewX,b=g.viewY,_=g.pathSlice,w=g.toMoveInsideSlice,T=g.strTransform,k=g.hasTransition,A=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,S=g.makeUpdateTextInterpolator,E=g.prevEntry,L=r._context.staticPlot,C=r._fullLayout,O=n[0].trace,P=-1!==O.textposition.indexOf("left"),I=-1!==O.textposition.indexOf("right"),D=-1!==O.textposition.indexOf("bottom"),z=u(i,[y,m],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}).descendants(),R=1/0,F=-1/0;z.forEach(function(r){var n=r.depth;n>=O._maxDepth?(r.x0=r.x1=(r.x0+r.x1)/2,r.y0=r.y1=(r.y0+r.y1)/2):(R=Math.min(R,n),F=Math.max(F,n))}),v=v.data(z,h.getPtId),O._maxVisibleLayers=isFinite(F)?F-R+1:0,v.enter().append("g").classed("slice",!0),A(v,!1,{},[y,m],_),v.order();var B=null;if(k&&E){var N=h.getPtId(E);v.each(function(r){null===B&&h.getPtId(r)===N&&(B={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})})}var j=function(){return B||{x0:0,x1:y,y0:0,y1:m}},U=v;return k&&(U=U.transition().each("end",function(){var n=a.select(this);h.setSliceCursor(n,r,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(u){u._x0=x(u.x0),u._x1=x(u.x1),u._y0=b(u.y0),u._y1=b(u.y1),u._hoverX=x(u.x1-O.tiling.pad),u._hoverY=b(D?u.y1-O.tiling.pad/2:u.y0+O.tiling.pad/2);var v=a.select(this),g=o.ensureSingle(v,"path","surface",function(r){r.style("pointer-events",L?"none":"all")});k?g.transition().attrTween("d",function(r){var n=M(r,!1,j(),[y,m],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(r){return _(n(r))}}):g.attr("d",_),v.call(p,i,r,n,{styleOne:c,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,r,{isTransitioning:r._transitioning}),g.call(c,u,O,r,{hovered:!1}),u.x0===u.x1||u.y0===u.y1?u._text="":u._text=d(u,i,O,n,C)||"";var A=o.ensureSingle(v,"g","slicetext"),E=o.ensureSingle(A,"text","",function(r){r.attr("data-notex",1)}),z=o.ensureUniformFontSize(r,h.determineTextFont(O,u,C.font));E.text(u._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":P?"start":"middle").call(s.font,z).call(l.convertToTspans,r),u.textBB=s.bBox(E.node()),u.transform=w(u,{fontSize:z.size}),u.transform.fontSize=z.size,k?E.transition().attrTween("transform",function(r){var n=S(r,!1,j(),[y,m]);return function(r){return T(n(r))}}):E.attr("transform",T(u))}),B}},69816:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"icicle",basePlotModule:i(96346),categories:[],animatable:!0,attributes:i(46291),layoutAttributes:i(92894),supplyDefaults:i(56524),supplyLayoutDefaults:i(21070),calc:i(46584).y,crossTraceCalc:i(46584).T,plot:i(85596),style:i(82454).style,colorbar:i(4898),meta:{}}},92894:function(r){"use strict";r.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(r,n,i){"use strict";var a=i(71828),o=i(92894);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("iciclecolorway",n.colorway),i("extendiciclecolors")}},21538:function(r,n,i){"use strict";var a=i(674),o=i(14102);r.exports=function(r,n,i){var s=i.flipX,l=i.flipY,u="h"===i.orientation,c=i.maxDepth,f=n[0],h=n[1];c&&(f=(r.height+1)*n[0]/Math.min(r.height+1,c),h=(r.height+1)*n[1]/Math.min(r.height+1,c));var p=a.partition().padding(i.pad.inner).size(u?[n[1],f]:[n[0],h])(r);return(u||s||l)&&o(p,n,{swapXY:u,flipX:s,flipY:l}),p}},85596:function(r,n,i){"use strict";var a=i(80694),o=i(90666);r.exports=function(r,n,i,s){return a(r,n,i,s,{type:"icicle",drawDescendants:o})}},82454:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(71828),l=i(72597).resizeText,u=i(43467);function c(r,n,i,a){var l=n.data.data,c=!n.children,f=l.i,h=s.castOption(i,f,"marker.line.color")||o.defaultLine,p=s.castOption(i,f,"marker.line.width")||0;r.call(u,n,i,a).style("stroke-width",p).call(o.stroke,h).style("opacity",c?i.leaf.opacity:null)}r.exports={style:function(r){var n=r._fullLayout._iciclelayer.selectAll(".trace");l(r,n,"icicle"),n.each(function(n){var i=a.select(this),o=n[0].trace;i.style("opacity",o.opacity),i.selectAll("path.surface").each(function(n){a.select(this).call(c,n,o,r)})})},styleOne:c}},17230:function(r,n,i){"use strict";for(var a=i(9012),o=i(5386).fF,s=i(1426).extendFlat,l=i(51877).colormodel,u=["rgb","rgba","rgba256","hsl","hsla"],c=[],f=[],h=0;h<u.length;h++){var p=l[u[h]];c.push("For the `"+u[h]+"` colormodel, it is ["+(p.zminDflt||p.min).join(", ")+"]."),f.push("For the `"+u[h]+"` colormodel, it is ["+(p.zmaxDflt||p.max).join(", ")+"].")}r.exports=s({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:u,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:s({},a.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(r,n,i){"use strict";var a=i(71828),o=i(51877),s=i(92770),l=i(89298),u=i(71828).maxRowLength,c=i(67395).A;r.exports=function(r,n){if(n._hasZ)f=n.z.length,h=u(n.z);else if(n._hasSource){var i=c(n.source);f=i.height,h=i.width}var f,h,p,d=l.getFromId(r,n.xaxis||"x"),v=l.getFromId(r,n.yaxis||"y"),g=d.d2c(n.x0)-n.dx/2,y=v.d2c(n.y0)-n.dy/2,m=[g,g+h*n.dx],x=[y,y+f*n.dy];if(d&&"log"===d.type)for(p=0;p<h;p++)m.push(g+p*n.dx);if(v&&"log"===v.type)for(p=0;p<f;p++)x.push(y+p*n.dy);return n._extremes[d._id]=l.findExtremes(d,m),n._extremes[v._id]=l.findExtremes(v,x),n._scaler=function(r){var n=o.colormodel[r.colormodel],i=(n.colormodel||r.colormodel).length;r._sArray=[];for(var l=0;l<i;l++)n.min[l]!==r.zmin[l]||n.max[l]!==r.zmax[l]?r._sArray.push(function(r,n,i,o){return function(s){return a.constrain((s-r)*n,i,o)}}(r.zmin[l],(n.max[l]-n.min[l])/(r.zmax[l]-r.zmin[l]),n.min[l],n.max[l])):r._sArray.push(function(r,n){return function(i){return a.constrain(i,r,n)}}(n.min[l],n.max[l]));return function(n){for(var a=n.slice(0,i),o=0;o<i;o++){var l=a[o];if(!s(l))return!1;a[o]=r._sArray[o](l)}return a}}(n),[{x0:g,y0:y,z:n.z,w:h,h:f}]}},51877:function(r){"use strict";r.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(r){var n=r.slice(0,3);return n[1]=n[1]+"%",n[2]=n[2]+"%",n},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(r){var n=r.slice(0,4);return n[1]=n[1]+"%",n[2]=n[2]+"%",n},suffix:["\xb0","%","%",""]}}}},13245:function(r,n,i){"use strict";var a=i(71828),o=i(17230),s=i(51877),l=i(25095).IMAGE_URL_PREFIX;r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("source"),n.source&&!n.source.match(l)&&delete n.source,n._hasSource=!!n.source;var u,c=i("z");n._hasZ=!(void 0===c||!c.length||!c[0]||!c[0].length),n._hasZ||n._hasSource?(i("x0"),i("y0"),i("dx"),i("dy"),n._hasZ?(i("colormodel","rgb"),i("zmin",(u=s.colormodel[n.colormodel]).zminDflt||u.min),i("zmax",u.zmaxDflt||u.max)):n._hasSource&&(n.colormodel="rgba256",u=s.colormodel[n.colormodel],n.zmin=u.zminDflt,n.zmax=u.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),n._length=null):n.visible=!1}},30835:function(r){"use strict";r.exports=function(r,n){return"xVal"in n&&(r.x=n.xVal),"yVal"in n&&(r.y=n.yVal),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r.color=n.color,r.colormodel=n.trace.colormodel,r.z||(r.z=n.color),r}},67395:function(r,n,i){"use strict";var a=i(33575),o=i(25095).IMAGE_URL_PREFIX,s=i(12856).Buffer;n.A=function(r){return a(new s(r.replace(o,""),"base64"))}},28749:function(r,n,i){"use strict";var a=i(30211),o=i(71828),s=o.isArrayOrTypedArray,l=i(51877);r.exports=function(r,n,i){var u=r.cd[0],c=u.trace,f=r.xa,h=r.ya;if(!(a.inbox(n-u.x0,n-(u.x0+u.w*c.dx),0)>0||a.inbox(i-u.y0,i-(u.y0+u.h*c.dy),0)>0)){var p,d=Math.floor((n-u.x0)/c.dx),v=Math.floor(Math.abs(i-u.y0)/c.dy);if(c._hasZ?p=u.z[v][d]:c._hasSource&&(p=c._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(d,v,1,1).data),p){var g,y=u.hi||c.hoverinfo;if(y){var m=y.split("+");-1!==m.indexOf("all")&&(m=["color"]),-1!==m.indexOf("color")&&(g=!0)}var x,b=l.colormodel[c.colormodel],_=b.colormodel||c.colormodel,w=_.length,T=c._scaler(p),k=b.suffix,A=[];(c.hovertemplate||g)&&(A.push("["+[T[0]+k[0],T[1]+k[1],T[2]+k[2]].join(", ")),4===w&&A.push(", "+T[3]+k[3]),A.push("]"),A=A.join(""),r.extraText=_.toUpperCase()+": "+A),s(c.hovertext)&&s(c.hovertext[v])?x=c.hovertext[v][d]:s(c.text)&&s(c.text[v])&&(x=c.text[v][d]);var M=h.c2p(u.y0+(v+.5)*c.dy),S=u.x0+(d+.5)*c.dx,E=u.y0+(v+.5)*c.dy,L="["+p.slice(0,c.colormodel.length).join(", ")+"]";return[o.extendFlat(r,{index:[v,d],x0:f.c2p(u.x0+d*c.dx),x1:f.c2p(u.x0+(d+1)*c.dx),y0:M,y1:M,color:T,xVal:S,xLabelVal:S,yVal:E,yLabelVal:E,zLabelVal:L,text:x,hovertemplateLabels:{zLabel:L,colorLabel:A,"color[0]Label":T[0]+k[0],"color[1]Label":T[1]+k[1],"color[2]Label":T[2]+k[2],"color[3]Label":T[3]+k[3]}})]}}}},94507:function(r,n,i){"use strict";r.exports={attributes:i(17230),supplyDefaults:i(13245),calc:i(71113),plot:i(60775),style:i(12826),hoverPoints:i(28749),eventData:i(30835),moduleType:"trace",name:"image",basePlotModule:i(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=o.strTranslate,l=i(77922),u=i(51877),c=i(3883),f=i(32396).STYLE;r.exports=function(r,n,i,h){var p=n.xaxis,d=n.yaxis,v=!r._context._exportedPlot&&c();o.makeTraceGroups(h,i,"im").each(function(n){var i=a.select(this),c=n[0],h=c.trace,g=("fast"===h.zsmooth||!1===h.zsmooth&&v)&&!h._hasZ&&h._hasSource&&"linear"===p.type&&"linear"===d.type;h._realImage=g;var y,m,x,b,_,w,T=c.z,k=c.x0,A=c.y0,M=c.w,S=c.h,E=h.dx,L=h.dy;for(w=0;void 0===y&&w<M;)y=p.c2p(k+w*E),w++;for(w=M;void 0===m&&w>0;)m=p.c2p(k+w*E),w--;for(w=0;void 0===b&&w<S;)b=d.c2p(A+w*L),w++;for(w=S;void 0===_&&w>0;)_=d.c2p(A+w*L),w--;m<y&&(x=m,m=y,y=x),_<b&&(x=b,b=_,_=x),g||(y=Math.max(-.5*p._length,y),m=Math.min(1.5*p._length,m),b=Math.max(-.5*d._length,b),_=Math.min(1.5*d._length,_));var C=Math.round(m-y),O=Math.round(_-b);if(C<=0||O<=0)i.selectAll("image").data([]).exit().remove();else{var P=i.selectAll("image").data([n]);P.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),P.exit().remove();var I=!1===h.zsmooth?f:"";if(g){var D=o.simpleMap(p.range,p.r2l),z=o.simpleMap(d.range,d.r2l),R=D[1]<D[0],F=z[1]>z[0];if(R||F){var B=y+C/2,N=b+O/2;I+="transform:"+s(B+"px",N+"px")+"scale("+(R?-1:1)+","+(F?-1:1)+")"+s(-B+"px",-N+"px")+";"}}P.attr("style",I);var j=new Promise(function(r){if(h._hasZ)r();else if(h._hasSource){if(h._canvas&&h._canvas.el.width===M&&h._canvas.el.height===S&&h._canvas.source===h.source)r();else{var n=document.createElement("canvas");n.width=M,n.height=S;var i=n.getContext("2d",{willReadFrequently:!0});h._image=h._image||new Image;var a=h._image;a.onload=function(){i.drawImage(a,0,0),h._canvas={el:n,source:h.source},r()},a.setAttribute("src",h.source)}}}).then(function(){var r;if(h._hasZ)r=U(function(r,n){var i=T[n][r];return o.isTypedArray(i)&&(i=Array.from(i)),i}).toDataURL("image/png");else if(h._hasSource){if(g)r=h.source;else{var n=h._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,M,S).data;r=U(function(r,i){var a=4*(i*M+r);return[n[a],n[a+1],n[a+2],n[a+3]]}).toDataURL("image/png")}}P.attr({"xlink:href":r,height:O,width:C,x:y,y:b})});r._promises.push(j)}function U(r){var n=document.createElement("canvas");n.width=C,n.height=O;var i,a=n.getContext("2d",{willReadFrequently:!0}),s=function(r){return o.constrain(Math.round(p.c2p(k+r*E)-y),0,C)},l=function(r){return o.constrain(Math.round(d.c2p(A+r*L)-b),0,O)},f=u.colormodel[h.colormodel],v=f.colormodel||h.colormodel,g=f.fmt;for(w=0;w<c.w;w++){var m=s(w),x=s(w+1);if(x!==m&&!isNaN(x)&&!isNaN(m))for(var _=0;_<c.h;_++){var T=l(_),M=l(_+1);M===T||isNaN(M)||isNaN(T)||!r(w,_)||(i=h._scaler(r(w,_)),a.fillStyle=i?v+"("+g(i).join(",")+")":"rgba(0,0,0,0)",a.fillRect(m,T,x-m,M-T))}}return n}})}},12826:function(r,n,i){"use strict";var a=i(39898);r.exports=function(r){a.select(r).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}},54846:function(r,n,i){"use strict";var a=i(1426).extendFlat,o=i(1426).extendDeep,s=i(30962).overrideAll,l=i(41940),u=i(22399),c=i(27670).Y,f=i(13838),h=i(44467).templatedArray,p=i(22372),d=i(12663).descriptionOnlyNumbers,v=l({editType:"plot",colorEditType:"plot"}),g={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:u.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},y={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},m=h("step",o({},g,{range:y}));r.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:c({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:a({},v,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:a({},v,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:p.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:p.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:p.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:p.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:a({},v,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:o({},g,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:s({range:y,visible:a({},f.visible,{dflt:!0}),tickmode:f.minor.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:a({},f.ticks,{dflt:"outside"}),ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,labelalias:f.labelalias,tickfont:l({}),tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,separatethousands:f.separatethousands,exponentformat:f.exponentformat,minexponent:f.minexponent,showexponent:f.showexponent,editType:"plot"},"plot"),steps:m,threshold:{line:{color:a({},g.line.color,{}),width:a({},g.line.width,{dflt:1}),editType:"plot"},thickness:a({},g.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(r,n,i){"use strict";var a=i(74875);n.name="indicator",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},24667:function(r){"use strict";r.exports={calc:function(r,n){var i=[],a=n.value;"number"!=typeof n._lastValue&&(n._lastValue=n.value);var o=n._lastValue,s=o;return n._hasDelta&&"number"==typeof n.delta.reference&&(s=n.delta.reference),i[0]={y:a,lastY:o,delta:a-s,relativeDelta:(a-s)/s},i}}},84577:function(r){"use strict";r.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(r,n,i){"use strict";var a=i(71828),o=i(54846),s=i(27670).c,l=i(44467),u=i(85501),c=i(84577),f=i(26218),h=i(38701),p=i(96115),d=i(89426);function v(r,n){function i(i,s){return a.coerce(r,n,o.gauge.steps,i,s)}i("color"),i("line.color"),i("line.width"),i("range"),i("thickness")}r.exports={supplyDefaults:function(r,n,i,g){function y(i,s){return a.coerce(r,n,o,i,s)}s(n,g,y),y("mode"),n._hasNumber=-1!==n.mode.indexOf("number"),n._hasDelta=-1!==n.mode.indexOf("delta"),n._hasGauge=-1!==n.mode.indexOf("gauge");var m=y("value");n._range=[0,"number"==typeof m?1.5*m:1];var x,b,_,w,T,k,A=[,,];function M(r,n){return a.coerce(_,w,o.gauge,r,n)}function S(r,n){return a.coerce(T,k,o.gauge.axis,r,n)}if(n._hasNumber&&(y("number.valueformat"),y("number.font.color",g.font.color),y("number.font.family",g.font.family),y("number.font.size"),void 0===n.number.font.size&&(n.number.font.size=c.defaultNumberFontSize,A[0]=!0),y("number.prefix"),y("number.suffix"),x=n.number.font.size),n._hasDelta&&(y("delta.font.color",g.font.color),y("delta.font.family",g.font.family),y("delta.font.size"),void 0===n.delta.font.size&&(n.delta.font.size=(n._hasNumber?.5:1)*(x||c.defaultNumberFontSize),A[1]=!0),y("delta.reference",n.value),y("delta.relative"),y("delta.valueformat",n.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),y("delta.prefix"),y("delta.suffix"),b=n.delta.font.size),n._scaleNumbers=(!n._hasNumber||A[0])&&(!n._hasDelta||A[1])||!1,y("title.font.color",g.font.color),y("title.font.family",g.font.family),y("title.font.size",.25*(x||b||c.defaultNumberFontSize)),y("title.text"),n._hasGauge){(_=r.gauge)||(_={}),w=l.newContainer(n,"gauge"),M("shape"),(n._isBullet="bullet"===n.gauge.shape)||y("title.align","center"),(n._isAngular="angular"===n.gauge.shape)||y("align","center"),M("bgcolor",g.paper_bgcolor),M("borderwidth"),M("bordercolor"),M("bar.color"),M("bar.line.color"),M("bar.line.width"),M("bar.thickness",c.valueThickness*("bullet"===n.gauge.shape?.5:1)),u(_,w,{name:"steps",handleItemDefaults:v}),M("threshold.value"),M("threshold.thickness"),M("threshold.line.width"),M("threshold.line.color"),T={},_&&(T=_.axis||{}),k=l.newContainer(w,"axis"),S("visible"),n._range=S("range",n._range);var E={outerTicks:!0};f(T,k,S,"linear"),d(T,k,S,"linear",E),p(T,k,S,"linear",E),h(T,k,S,E)}else y("title.align","center"),y("align","center"),n._isAngular=n._isBullet=!1;n._length=null}}},15154:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"indicator",basePlotModule:i(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:i(54846),supplyDefaults:i(94425).supplyDefaults,calc:i(24667).calc,plot:i(75634),meta:{}}},75634:function(r,n,i){"use strict";var a=i(39898),o=i(81684).sX,s=i(81684).k4,l=i(71828),u=l.strScale,c=l.strTranslate,f=l.rad2deg,h=i(18783).MID_SHIFT,p=i(91424),d=i(84577),v=i(63893),g=i(89298),y=i(71453),m=i(52830),x=i(13838),b=i(7901),_={left:"start",center:"middle",right:"end"},w={left:0,center:.5,right:1},T=/[yzafpnµmkMGTPEZY]/;function k(r){return r&&r.duration>0}function A(r){r.each(function(r){b.stroke(a.select(this),r.line.color)}).each(function(r){b.fill(a.select(this),r.color)}).style("stroke-width",function(r){return r.line.width})}function M(r,n,i){var a=r._fullLayout,o=l.extendFlat({type:"linear",ticks:"outside",range:i,showline:!0},n),s={type:"linear",_id:"x"+n._id},u={letter:"x",font:a.font,noHover:!0,noTickson:!0};function c(r,n){return l.coerce(o,s,x,r,n)}return y(o,s,c,u,a),m(o,s,c,u),s}function S(r,n,i){return[Math.min(n/r.width,i/r.height),r,n+"x"+i]}function E(r,n,i,o){var s=document.createElementNS("http://www.w3.org/2000/svg","text"),l=a.select(s);return l.text(r).attr("x",0).attr("y",0).attr("text-anchor",i).attr("data-unformatted",r).call(v.convertToTspans,o).call(p.font,n),p.bBox(l.node())}function L(r,n,i,a,o,s){var u="_cache"+n;r[u]&&r[u].key===o||(r[u]={key:o,value:i});var c=l.aggNums(s,null,[r[u].value,a],2);return r[u].value=c,c}r.exports=function(r,n,i,y){var m,x=r._fullLayout;k(i)&&y&&(m=y()),l.makeTraceGroups(x._indicatorlayer,n,"trace").each(function(n){var y,C,O,P,I,D=n[0].trace,z=a.select(this),R=D._hasGauge,F=D._isAngular,B=D._isBullet,N=D.domain,j={w:x._size.w*(N.x[1]-N.x[0]),h:x._size.h*(N.y[1]-N.y[0]),l:x._size.l+x._size.w*N.x[0],r:x._size.r+x._size.w*(1-N.x[1]),t:x._size.t+x._size.h*(1-N.y[1]),b:x._size.b+x._size.h*N.y[0]},U=j.l+j.w/2,V=j.t+j.h/2,H=Math.min(j.w/2,j.h),q=d.innerRadius*H,G=D.align||"center";if(C=V,R){if(F&&(y=U,C=V+H/2,O=function(r){var n;return[(n=.9*q)/Math.sqrt(r.width/2*(r.width/2)+r.height*r.height),r,n]}),B){var Z=d.bulletPadding,Y=1-d.bulletNumberDomainSize+Z;y=j.l+(Y+(1-Y)*w[G])*j.w,O=function(r){return S(r,(d.bulletNumberDomainSize-Z)*j.w,j.h)}}}else y=j.l+w[G]*j.w,O=function(r){return S(r,j.w,j.h)};(function(r,n,i,o){var f,h,d,y=i[0].trace,m=o.numbersX,x=o.numbersY,A=y.align||"center",S=_[A],C=o.transitionOpts,O=o.onComplete,P=l.ensureSingle(n,"g","numbers"),I=[];y._hasNumber&&I.push("number"),y._hasDelta&&(I.push("delta"),"left"===y.delta.position&&I.reverse());var D=P.selectAll("text").data(I);function z(n,i,a,o){if(!n.match("s")||a>=0==o>=0||i(a).slice(-1).match(T)||i(o).slice(-1).match(T))return i;var s=M(r,{tickformat:n.slice().replace("s","f").replace(/\d+/,function(r){return parseInt(r)-1})});return function(r){return 1>Math.abs(r)?g.tickText(s,r).text:i(r)}}D.enter().append("text"),D.attr("text-anchor",function(){return S}).attr("class",function(r){return r}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),D.exit().remove();var R,F=y.mode+y.align;if(y._hasDelta&&(R=function(){var n=M(r,{tickformat:y.delta.valueformat},y._range);n.setScale(),g.prepTicks(n);var o=function(r){return g.tickText(n,r).text},l=y.delta.suffix,u=y.delta.prefix,c=function(r){return y.delta.relative?r.relativeDelta:r.delta},f=function(r,n){return 0===r||"number"!=typeof r||isNaN(r)?"-":(r>0?y.delta.increasing.symbol:y.delta.decreasing.symbol)+u+n(r)+l},d=function(r){return r.delta>=0?y.delta.increasing.color:y.delta.decreasing.color};void 0===y._deltaLastValue&&(y._deltaLastValue=c(i[0]));var m=P.select("text.delta");function x(){m.text(f(c(i[0]),o)).call(b.fill,d(i[0])).call(v.convertToTspans,r)}return m.call(p.font,y.delta.font).call(b.fill,d({delta:y._deltaLastValue})),k(C)?m.transition().duration(C.duration).ease(C.easing).tween("text",function(){var r=a.select(this),n=c(i[0]),l=y._deltaLastValue,u=z(y.delta.valueformat,o,l,n),h=s(l,n);return y._deltaLastValue=n,function(n){r.text(f(h(n),u)),r.call(b.fill,d({delta:h(n)}))}}).each("end",function(){x(),O&&O()}).each("interrupt",function(){x(),O&&O()}):x(),h=E(f(c(i[0]),o),y.delta.font,S,r),m}(),F+=y.delta.position+y.delta.font.size+y.delta.font.family+y.delta.valueformat+(y.delta.increasing.symbol+y.delta.decreasing.symbol),d=h),y._hasNumber&&(function(){var n=M(r,{tickformat:y.number.valueformat},y._range);n.setScale(),g.prepTicks(n);var o=function(r){return g.tickText(n,r).text},l=y.number.suffix,u=y.number.prefix,c=P.select("text.number");function h(){var n="number"==typeof i[0].y?u+o(i[0].y)+l:"-";c.text(n).call(p.font,y.number.font).call(v.convertToTspans,r)}k(C)?c.transition().duration(C.duration).ease(C.easing).each("end",function(){h(),O&&O()}).each("interrupt",function(){h(),O&&O()}).attrTween("text",function(){var r=a.select(this),n=s(i[0].lastY,i[0].y);y._lastValue=i[0].y;var c=z(y.number.valueformat,o,i[0].lastY,i[0].y);return function(i){r.text(u+c(n(i))+l)}}):h(),f=E(u+o(i[0].y)+l,y.number.font,S,r)}(),F+=y.number.font.size+y.number.font.family+y.number.valueformat+y.number.suffix+y.number.prefix,d=f),y._hasDelta&&y._hasNumber){var B,N,j=[(f.left+f.right)/2,(f.top+f.bottom)/2],U=[(h.left+h.right)/2,(h.top+h.bottom)/2],V=.75*y.delta.font.size;"left"===y.delta.position&&(B=L(y,"deltaPos",0,-1*(f.width*w[y.align]+h.width*(1-w[y.align])+V),F,Math.min),N=j[1]-U[1],d={width:f.width+h.width+V,height:Math.max(f.height,h.height),left:h.left+B,right:f.right,top:Math.min(f.top,h.top+N),bottom:Math.max(f.bottom,h.bottom+N)}),"right"===y.delta.position&&(B=L(y,"deltaPos",0,f.width*(1-w[y.align])+h.width*w[y.align]+V,F,Math.max),N=j[1]-U[1],d={width:f.width+h.width+V,height:Math.max(f.height,h.height),left:f.left,right:h.right+B,top:Math.min(f.top,h.top+N),bottom:Math.max(f.bottom,h.bottom+N)}),"bottom"===y.delta.position&&(B=null,N=h.height,d={width:Math.max(f.width,h.width),height:f.height+h.height,left:Math.min(f.left,h.left),right:Math.max(f.right,h.right),top:f.bottom-f.height,bottom:f.bottom+h.height}),"top"===y.delta.position&&(B=null,N=f.top,d={width:Math.max(f.width,h.width),height:f.height+h.height,left:Math.min(f.left,h.left),right:Math.max(f.right,h.right),top:f.bottom-f.height-h.height,bottom:f.bottom}),R.attr({dx:B,dy:N})}(y._hasNumber||y._hasDelta)&&P.attr("transform",function(){var r=o.numbersScaler(d);F+=r[2];var n,i=L(y,"numbersScale",1,r[0],F,Math.min);y._scaleNumbers||(i=1),n=y._isAngular?x-i*d.bottom:x-i*(d.top+d.bottom)/2,y._numbersTop=i*d.top+n;var a=d[A];"center"===A&&(a=(d.left+d.right)/2);var s=m-i*a;return c(s=L(y,"numbersTranslate",0,s,F,Math.max),n)+u(i)})})(r,z,n,{numbersX:y,numbersY:C,numbersScaler:O,transitionOpts:i,onComplete:m}),R&&(P={range:D.gauge.axis.range,color:D.gauge.bgcolor,line:{color:D.gauge.bordercolor,width:0},thickness:1},I={range:D.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:D.gauge.bordercolor,width:D.gauge.borderwidth},thickness:1});var W=z.selectAll("g.angular").data(F?n:[]);W.exit().remove();var X=z.selectAll("g.angularaxis").data(F?n:[]);X.exit().remove(),F&&function(r,n,i,s){var l,u,p,d,v=i[0].trace,y=s.size,m=s.radius,x=s.innerRadius,b=s.gaugeBg,_=s.gaugeOutline,w=[y.l+y.w/2,y.t+y.h/2+m/2],T=s.gauge,S=s.layer,E=s.transitionOpts,L=s.onComplete,C=Math.PI/2;function O(r){var n=v.gauge.axis.range[0],i=(r-n)/(v.gauge.axis.range[1]-n)*Math.PI-C;return i<-C?-C:i>C?C:i}function P(r){return a.svg.arc().innerRadius((x+m)/2-r/2*(m-x)).outerRadius((x+m)/2+r/2*(m-x)).startAngle(-C)}function I(r){r.attr("d",function(r){return P(r.thickness).startAngle(O(r.range[0])).endAngle(O(r.range[1]))()})}T.enter().append("g").classed("angular",!0),T.attr("transform",c(w[0],w[1])),S.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),S.selectAll("g.xangularaxistick,path,text").remove(),(l=M(r,v.gauge.axis)).type="linear",l.range=v.gauge.axis.range,l._id="xangularaxis",l.ticklabeloverflow="allow",l.setScale();var D=function(r){return(l.range[0]-r.x)/(l.range[1]-l.range[0])*Math.PI+Math.PI},z={},R=g.makeLabelFns(l,0).labelStandoff;z.xFn=function(r){return Math.cos(D(r))*R},z.yFn=function(r){var n=D(r),i=Math.sin(n)>0?.2:1;return-Math.sin(n)*(R+r.fontSize*i)+r.fontSize*h*Math.abs(Math.cos(n))},z.anchorFn=function(r){var n=Math.cos(D(r));return .1>Math.abs(n)?"middle":n>0?"start":"end"},z.heightFn=function(r,n,i){return -.5*(1+Math.sin(D(r)))*i};var F=function(r){return c(w[0]+m*Math.cos(r),w[1]-m*Math.sin(r))};if(p=function(r){return F(D(r))},u=g.calcTicks(l),d=g.getTickSigns(l)[2],l.visible){d="inside"===l.ticks?-1:1;var B=(l.linewidth||1)/2;g.drawTicks(r,l,{vals:u,layer:S,path:"M"+d*B+",0h"+d*l.ticklen,transFn:function(r){var n=D(r);return F(n)+"rotate("+-f(n)+")"}}),g.drawLabels(r,l,{vals:u,layer:S,transFn:p,labelFns:z})}var N=[b].concat(v.gauge.steps),j=T.selectAll("g.bg-arc").data(N);j.enter().append("g").classed("bg-arc",!0).append("path"),j.select("path").call(I).call(A),j.exit().remove();var U=P(v.gauge.bar.thickness),V=T.selectAll("g.value-arc").data([v.gauge.bar]);V.enter().append("g").classed("value-arc",!0).append("path");var H,q,G=V.select("path");k(E)?(G.transition().duration(E.duration).ease(E.easing).each("end",function(){L&&L()}).each("interrupt",function(){L&&L()}).attrTween("d",(H=O(i[0].lastY),q=O(i[0].y),function(){var r=o(H,q);return function(n){return U.endAngle(r(n))()}})),v._lastValue=i[0].y):G.attr("d","number"==typeof i[0].y?U.endAngle(O(i[0].y)):"M0,0Z"),G.call(A),V.exit().remove(),N=[];var Z=v.gauge.threshold.value;(Z||0===Z)&&N.push({range:[Z,Z],color:v.gauge.threshold.color,line:{color:v.gauge.threshold.line.color,width:v.gauge.threshold.line.width},thickness:v.gauge.threshold.thickness});var Y=T.selectAll("g.threshold-arc").data(N);Y.enter().append("g").classed("threshold-arc",!0).append("path"),Y.select("path").call(I).call(A),Y.exit().remove();var W=T.selectAll("g.gauge-outline").data([_]);W.enter().append("g").classed("gauge-outline",!0).append("path"),W.select("path").call(I).call(A),W.exit().remove()}(r,0,n,{radius:H,innerRadius:q,gauge:W,layer:X,size:j,gaugeBg:P,gaugeOutline:I,transitionOpts:i,onComplete:m});var J=z.selectAll("g.bullet").data(B?n:[]);J.exit().remove();var K=z.selectAll("g.bulletaxis").data(B?n:[]);K.exit().remove(),B&&function(r,n,i,a){var o,s,l,u,f,h=i[0].trace,p=a.gauge,v=a.layer,y=a.gaugeBg,m=a.gaugeOutline,x=a.size,_=h.domain,w=a.transitionOpts,T=a.onComplete;p.enter().append("g").classed("bullet",!0),p.attr("transform",c(x.l,x.t)),v.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),v.selectAll("g.xbulletaxistick,path,text").remove();var S=x.h,E=h.gauge.bar.thickness*S,L=_.x[0],C=_.x[0]+(_.x[1]-_.x[0])*(h._hasNumber||h._hasDelta?1-d.bulletNumberDomainSize:1);function O(r){r.attr("width",function(r){return Math.max(0,o.c2p(r.range[1])-o.c2p(r.range[0]))}).attr("x",function(r){return o.c2p(r.range[0])}).attr("y",function(r){return .5*(1-r.thickness)*S}).attr("height",function(r){return r.thickness*S})}(o=M(r,h.gauge.axis))._id="xbulletaxis",o.domain=[L,C],o.setScale(),s=g.calcTicks(o),l=g.makeTransTickFn(o),u=g.getTickSigns(o)[2],f=x.t+x.h,o.visible&&(g.drawTicks(r,o,{vals:"inside"===o.ticks?g.clipEnds(o,s):s,layer:v,path:g.makeTickPath(o,f,u),transFn:l}),g.drawLabels(r,o,{vals:s,layer:v,transFn:l,labelFns:g.makeLabelFns(o,f)}));var P=[y].concat(h.gauge.steps),I=p.selectAll("g.bg-bullet").data(P);I.enter().append("g").classed("bg-bullet",!0).append("rect"),I.select("rect").call(O).call(A),I.exit().remove();var D=p.selectAll("g.value-bullet").data([h.gauge.bar]);D.enter().append("g").classed("value-bullet",!0).append("rect"),D.select("rect").attr("height",E).attr("y",(S-E)/2).call(A),k(w)?D.select("rect").transition().duration(w.duration).ease(w.easing).each("end",function(){T&&T()}).each("interrupt",function(){T&&T()}).attr("width",Math.max(0,o.c2p(Math.min(h.gauge.axis.range[1],i[0].y)))):D.select("rect").attr("width","number"==typeof i[0].y?Math.max(0,o.c2p(Math.min(h.gauge.axis.range[1],i[0].y))):0),D.exit().remove();var z=i.filter(function(){return h.gauge.threshold.value||0===h.gauge.threshold.value}),R=p.selectAll("g.threshold-bullet").data(z);R.enter().append("g").classed("threshold-bullet",!0).append("line"),R.select("line").attr("x1",o.c2p(h.gauge.threshold.value)).attr("x2",o.c2p(h.gauge.threshold.value)).attr("y1",(1-h.gauge.threshold.thickness)/2*S).attr("y2",(1-(1-h.gauge.threshold.thickness)/2)*S).call(b.stroke,h.gauge.threshold.line.color).style("stroke-width",h.gauge.threshold.line.width),R.exit().remove();var F=p.selectAll("g.gauge-outline").data([m]);F.enter().append("g").classed("gauge-outline",!0).append("rect"),F.select("rect").call(O).call(A),F.exit().remove()}(r,0,n,{gauge:J,layer:K,size:j,gaugeBg:P,gaugeOutline:I,transitionOpts:i,onComplete:m});var $=z.selectAll("text.title").data(n);$.exit().remove(),$.enter().append("text").classed("title",!0),$.attr("text-anchor",function(){return B?_.right:_[D.title.align]}).text(D.title.text).call(p.font,D.title.font).call(v.convertToTspans,r),$.attr("transform",function(){var r,n=j.l+j.w*w[D.title.align],i=d.titlePadding,a=p.bBox($.node());return R?(F&&(r=D.gauge.axis.visible?p.bBox(X.node()).top-i-a.bottom:j.t+j.h/2-H/2-a.bottom-i),B&&(r=C-(a.top+a.bottom)/2,n=j.l-d.bulletPadding*j.w)):r=D._numbersTop-i-a.bottom,c(n,r)})})}},16249:function(r,n,i){"use strict";var a=i(50693),o=i(12663).axisHoverFormat,s=i(5386).fF,l=i(2418),u=i(9012),c=i(1426).extendFlat,f=i(30962).overrideAll,h=r.exports=f(c({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:s(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),valuehoverformat:o("value",1),showlegend:c({},u.showlegend,{dflt:!1})},a("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:c({},u.hoverinfo)}),"calc","nested");h.flatshading.dflt=!0,h.lighting.facenormalsepsilon.dflt=0,h.x.editType=h.y.editType=h.z.editType=h.value.editType="calc+clearAxisTypes",h.transforms=void 0},56959:function(r,n,i){"use strict";var a=i(78803),o=i(88489).processGrid,s=i(88489).filter;r.exports=function(r,n){n._len=Math.min(n.x.length,n.y.length,n.z.length,n.value.length),n._x=s(n.x,n._len),n._y=s(n.y,n._len),n._z=s(n.z,n._len),n._value=s(n.value,n._len);var i=o(n);n._gridFill=i.fill,n._Xs=i.Xs,n._Ys=i.Ys,n._Zs=i.Zs,n._len=i.len;for(var l=1/0,u=-1/0,c=0;c<n._len;c++){var f=n._value[c];l=Math.min(l,f),u=Math.max(u,f)}n._minValues=l,n._maxValues=u,n._vMin=void 0===n.isomin||null===n.isomin?l:n.isomin,n._vMax=void 0===n.isomax||null===n.isomin?u:n.isomax,a(r,n,{vals:[n._vMin,n._vMax],containerStr:"",cLetter:"c"})}},22674:function(r,n,i){"use strict";var a=i(9330).gl_mesh3d,o=i(81697).parseColorScale,s=i(71828).isArrayOrTypedArray,l=i(78614),u=i(21081).extractOpts,c=i(90060),f=function(r,n){for(var i=n.length-1;i>0;i--){var a=Math.min(n[i],n[i-1]),o=Math.max(n[i],n[i-1]);if(o>a&&a<r&&r<=o)return{id:i,distRatio:(o-r)/(o-a)}}return{id:0,distRatio:0}};function h(r,n,i){this.scene=r,this.uid=i,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var p=h.prototype;p.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,i=this.data._meshX[n],a=this.data._meshY[n],o=this.data._meshZ[n],l=this.data._Ys.length,u=this.data._Zs.length,c=f(i,this.data._Xs).id,h=f(a,this.data._Ys).id,p=f(o,this.data._Zs).id,d=r.index=p+u*h+u*l*c;r.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var v=this.data.hovertext||this.data.text;return s(v)&&void 0!==v[d]?r.textLabel=v[d]:v&&(r.textLabel=v),!0}},p.update=function(r){var n=this.scene,i=n.fullSceneLayout;function a(r,n,i,a){return n.map(function(n){return r.d2l(n,0,a)*i})}this.data=v(r);var s={positions:c(a(i.xaxis,r._meshX,n.dataScale[0],r.xcalendar),a(i.yaxis,r._meshY,n.dataScale[1],r.ycalendar),a(i.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:c(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},f=u(r);s.vertexIntensity=r._meshIntensity,s.vertexIntensityBounds=[f.min,f.max],s.colormap=o(r),this.mesh.update(s)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var d=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(r){r._meshI=[],r._meshJ=[],r._meshK=[];var n,i,a,o,s,l,u,c=r.surface.show,h=r.spaceframe.show,p=r.surface.fill,v=r.spaceframe.fill,g=!1,y=!1,m=0,x=r._Xs,b=r._Ys,_=r._Zs,w=x.length,T=b.length,k=_.length,A=d.indexOf(r._gridFill.replace(/-/g,"").replace(/\+/g,"")),M=function(r,n,i){switch(A){case 5:return i+k*n+k*T*r;case 4:return i+k*r+k*w*n;case 3:return n+T*i+T*k*r;case 2:return n+T*r+T*w*i;case 1:return r+w*i+w*k*n;default:return r+w*n+w*T*i}},S=r._minValues,E=r._maxValues,L=r._vMin,C=r._vMax;function O(){a=[],o=[],s=[],l=[],i=n=0}function P(r,i,u,c){return a.push(r),o.push(i),s.push(u),l.push(c),++n-1}function I(r,n,i){for(var a=[],o=0;o<r.length;o++)a[o]=r[o]*(1-i)+i*n[o];return a}function D(r,n){return"all"===r||null===r||r.indexOf(n)>-1}function z(c,f,h){i=n;var p,d,v,g=[f],y=[h];if(u>=1)g=[f],y=[h];else if(u>0){var x,b,_,w,T,k,A,M,S,E,L,C,O,D=(x=f,b=h,M=I(k=function(r,n,i){for(var a=[],o=0;o<r.length;o++)a[o]=(r[o]+n[o]+i[o])/3;return a}(_=x[0],w=x[1],T=x[2]),_,A=Math.sqrt(1-u)),S=I(k,w,A),E=I(k,T,A),{xyzv:[[_,w,S],[S,M,_],[w,T,E],[E,S,w],[T,_,M],[M,E,T]],abc:[[L=b[0],C=b[1],-1],[-1,-1,L],[C,O=b[2],-1],[-1,-1,C],[O,L,-1],[-1,-1,O]]});g=D.xyzv,y=D.abc}for(var z=0;z<g.length;z++){f=g[z],h=y[z];for(var R=[],F=0;F<3;F++){var B=f[F][0],N=f[F][1],j=f[F][2],U=f[F][3],V=h[F]>-1?h[F]:function(r,n,u){for(var c=l.length,f=i;f<c;f++)if(r===a[f]&&n===o[f]&&u===s[f])return f;return -1}(B,N,j);R[F]=V>-1?V:P(B,N,j,null===c?U:c)}p=R[0],d=R[1],v=R[2],r._meshI.push(p),r._meshJ.push(d),r._meshK.push(v),++m}}function R(r,n,i,a){var o=r[3];o<i&&(o=i),o>a&&(o=a);for(var s=(r[3]-o)/(r[3]-n[3]+1e-9),l=[],u=0;u<4;u++)l[u]=(1-s)*r[u]+s*n[u];return l}function F(r){var n=.001*(C-L);return r>=L-n&&r<=C+n}function B(n){for(var i=[],a=0;a<4;a++){var o=n[a];i.push([r._x[o],r._y[o],r._z[o],r._value[o]])}return i}function N(r,n,i,a,o,s){s||(s=1),i=[-1,-1,-1];var l,u,c,f=!1,h=[(l=n[0][3])>=a&&l<=o,(u=n[1][3])>=a&&u<=o,(c=n[2][3])>=a&&c<=o];if(!h[0]&&!h[1]&&!h[2])return!1;var p=function(r,n,i){return F(n[0][3])&&F(n[1][3])&&F(n[2][3])?(z(r,n,i),!0):s<3&&N(r,n,i,L,C,++s)};if(h[0]&&h[1]&&h[2])return p(r,n,i)||f;var d=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(s){if(h[s[0]]&&h[s[1]]&&!h[s[2]]){var l=n[s[0]],u=n[s[1]],c=n[s[2]],v=R(c,l,a,o),g=R(c,u,a,o);f=p(r,[g,v,l],[-1,-1,i[s[0]]])||f,f=p(r,[l,u,g],[i[s[0]],i[s[1]],-1])||f,d=!0}}),d||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(s){if(h[s[0]]&&!h[s[1]]&&!h[s[2]]){var l=n[s[0]],u=n[s[1]],c=n[s[2]],v=R(u,l,a,o);f=p(r,[R(c,l,a,o),v,l],[-1,-1,i[s[0]]])||f,d=!0}}),f}function j(r,n,i,a){var o,s,l,u,c,f=!1,h=B(n),p=[(o=h[0][3])>=i&&o<=a,(s=h[1][3])>=i&&s<=a,(l=h[2][3])>=i&&l<=a,(u=h[3][3])>=i&&u<=a];if(!(p[0]||p[1]||p[2]||p[3]))return f;if(p[0]&&p[1]&&p[2]&&p[3])return y&&((c=function(i,a,o){z(r,[h[i],h[a],h[o]],[n[i],n[a],n[o]])})(0,1,2),c(3,0,1),c(2,3,0),c(1,2,3)),f;var d=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(o){if(p[o[0]]&&p[o[1]]&&p[o[2]]&&!p[o[3]]){var s=h[o[0]],l=h[o[1]],u=h[o[2]],c=h[o[3]];f=y?z(r,[s,l,u],[n[o[0]],n[o[1]],n[o[2]]])||f:z(null,[R(c,s,i,a),R(c,l,i,a),R(c,u,i,a)],[-1,-1,-1])||f,d=!0}}),d||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(o){if(p[o[0]]&&p[o[1]]&&!p[o[2]]&&!p[o[3]]){var s,l,u,c=h[o[0]],v=h[o[1]],g=h[o[2]],m=h[o[3]],x=R(g,c,i,a),b=R(g,v,i,a),_=R(m,v,i,a),w=R(m,c,i,a);y?(f=z(r,[c,w,x],[n[o[0]],-1,-1])||f,f=z(r,[v,b,_],[n[o[1]],-1,-1])||f):(s=[x,b,_,w],l=[-1,-1,-1,-1],(u=function(r,n,i){z(null,[s[r],s[n],s[i]],[l[r],l[n],l[i]])})(0,1,2),u(2,3,0)),d=!0}}),d||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(o){if(p[o[0]]&&!p[o[1]]&&!p[o[2]]&&!p[o[3]]){var s=h[o[0]],l=h[o[1]],u=h[o[2]],c=h[o[3]],v=R(l,s,i,a),g=R(u,s,i,a),m=R(c,s,i,a);y?(f=z(r,[s,v,g],[n[o[0]],-1,-1])||f,f=z(r,[s,g,m],[n[o[0]],-1,-1])||f,f=z(r,[s,m,v],[n[o[0]],-1,-1])||f):f=z(null,[v,g,m],[-1,-1,-1])||f,d=!0}})),f}function U(r,n,i,a,o,s,l,u,c,f,h){var p=!1;return g&&(D(r,"A")&&(p=j(null,[n,i,a,s],f,h)||p),D(r,"B")&&(p=j(null,[i,a,o,c],f,h)||p),D(r,"C")&&(p=j(null,[i,s,l,c],f,h)||p),D(r,"D")&&(p=j(null,[a,s,u,c],f,h)||p),D(r,"E")&&(p=j(null,[i,a,s,c],f,h)||p)),y&&(p=j(r,[i,a,s,c],f,h)||p),p}function V(r,n,i,a,o,s,l,u){return[!0===u[0]||N(r,B([n,i,a]),[n,i,a],s,l),!0===u[1]||N(r,B([a,o,n]),[a,o,n],s,l)]}function H(r,n,i,a,o,s,l,u,c){return u?V(r,n,i,o,a,s,l,c):V(r,i,o,a,n,s,l,c)}function q(r,n,i,a,o,s,l){var u,c,f,h,p=!1,d=function(){p=N(r,[u,c,f],[-1,-1,-1],o,s)||p,p=N(r,[f,h,u],[-1,-1,-1],o,s)||p},v=l[0],g=l[1],y=l[2];return v&&(u=I(B([M(n,i-0,a-0)])[0],B([M(n-1,i-0,a-0)])[0],v),c=I(B([M(n,i-0,a-1)])[0],B([M(n-1,i-0,a-1)])[0],v),f=I(B([M(n,i-1,a-1)])[0],B([M(n-1,i-1,a-1)])[0],v),h=I(B([M(n,i-1,a-0)])[0],B([M(n-1,i-1,a-0)])[0],v),d()),g&&(u=I(B([M(n-0,i,a-0)])[0],B([M(n-0,i-1,a-0)])[0],g),c=I(B([M(n-0,i,a-1)])[0],B([M(n-0,i-1,a-1)])[0],g),f=I(B([M(n-1,i,a-1)])[0],B([M(n-1,i-1,a-1)])[0],g),h=I(B([M(n-1,i,a-0)])[0],B([M(n-1,i-1,a-0)])[0],g),d()),y&&(u=I(B([M(n-0,i-0,a)])[0],B([M(n-0,i-0,a-1)])[0],y),c=I(B([M(n-0,i-1,a)])[0],B([M(n-0,i-1,a-1)])[0],y),f=I(B([M(n-1,i-1,a)])[0],B([M(n-1,i-1,a-1)])[0],y),h=I(B([M(n-1,i-0,a)])[0],B([M(n-1,i-0,a-1)])[0],y),d()),p}function G(r,n,i,a,o){for(var s=[],l=0,u=0;u<n.length;u++)for(var c=n[u],f=1;f<k;f++)for(var h=1;h<T;h++)s.push(H(r,M(c,h-1,f-1),M(c,h-1,f),M(c,h,f-1),M(c,h,f),i,a,(c+h+f)%2,o&&o[l]?o[l]:[])),l++;return s}function Z(r,n,i,a,o){for(var s=[],l=0,u=0;u<n.length;u++)for(var c=n[u],f=1;f<w;f++)for(var h=1;h<k;h++)s.push(H(r,M(f-1,c,h-1),M(f,c,h-1),M(f-1,c,h),M(f,c,h),i,a,(f+c+h)%2,o&&o[l]?o[l]:[])),l++;return s}function Y(r,n,i,a,o){for(var s=[],l=0,u=0;u<n.length;u++)for(var c=n[u],f=1;f<T;f++)for(var h=1;h<w;h++)s.push(H(r,M(h-1,f-1,c),M(h-1,f,c),M(h,f-1,c),M(h,f,c),i,a,(h+f+c)%2,o&&o[l]?o[l]:[])),l++;return s}function W(r,n,i){for(var a=1;a<k;a++)for(var o=1;o<T;o++)for(var s=1;s<w;s++)!function(r,n,i,a,o,s,l,u,c,f,h,p){var d=r;p?(g&&"even"===r&&(d=null),U(d,n,i,a,o,s,l,u,c,f,h)):(g&&"odd"===r&&(d=null),U(d,c,u,l,s,o,a,i,n,f,h))}(r,M(s-1,o-1,a-1),M(s-1,o-1,a),M(s-1,o,a-1),M(s-1,o,a),M(s,o-1,a-1),M(s,o-1,a),M(s,o,a-1),M(s,o,a),n,i,(s+o+a)%2)}return function(){if(O(),function(){for(var n=0;n<w;n++)for(var i=0;i<T;i++)for(var a=0;a<k;a++){var o=M(n,i,a);P(r._x[o],r._y[o],r._z[o],r._value[o])}}(),h&&v&&(u=v,y=!0,W(null,L,C),y=!1),c&&p){u=p;for(var n=r.surface.pattern,i=r.surface.count,d=0;d<i;d++){var A=1===i?.5:d/(i-1),I=(1-A)*L+A*C,D=Math.abs(I-S)>Math.abs(I-E)?[S,I]:[I,E];g=!0,W(n,D[0],D[1]),g=!1}}var z=[[Math.min(L,E),Math.max(L,E)],[Math.min(S,C),Math.max(S,C)]];["x","y","z"].forEach(function(n){for(var i=[],a=0;a<z.length;a++){var o=0,s=z[a][0],l=z[a][1],c=r.slices[n];if(c.show&&c.fill){u=c.fill;var h=[],p=[],d=[];if(c.locations.length)for(var v=0;v<c.locations.length;v++){var g=f(c.locations[v],"x"===n?x:"y"===n?b:_);0===g.distRatio?h.push(g.id):g.id>0&&(p.push(g.id),"x"===n?d.push([g.distRatio,0,0]):"y"===n?d.push([0,g.distRatio,0]):d.push([0,0,g.distRatio]))}else h=function(r,n){for(var i=[],a=1;a<n;a++)i.push(a);return i}(0,"x"===n?w-1:"y"===n?T-1:k-1);p.length>0&&(i[o]="x"===n?function(r,n,i,a,o,s){for(var l=[],u=0,c=0;c<n.length;c++)for(var f=n[c],h=1;h<k;h++)for(var p=1;p<T;p++)l.push(q(null,f,p,h,i,a,o[c],s&&s[u]&&s[u])),u++;return l}(0,p,s,l,d,i[o]):"y"===n?function(r,n,i,a,o,s){for(var l=[],u=0,c=0;c<n.length;c++)for(var f=n[c],h=1;h<w;h++)for(var p=1;p<k;p++)l.push(q(null,h,f,p,i,a,o[c],s&&s[u]&&s[u])),u++;return l}(0,p,s,l,d,i[o]):function(r,n,i,a,o,s){for(var l=[],u=0,c=0;c<n.length;c++)for(var f=n[c],h=1;h<T;h++)for(var p=1;p<w;p++)l.push(q(null,p,h,f,i,a,o[c],s&&s[u]&&s[u])),u++;return l}(0,p,s,l,d,i[o]),o++),h.length>0&&(i[o]="x"===n?G(null,h,s,l,i[o]):"y"===n?Z(null,h,s,l,i[o]):Y(null,h,s,l,i[o]),o++)}var y=r.caps[n];y.show&&y.fill&&(u=y.fill,i[o]="x"===n?G(null,[0,w-1],s,l,i[o]):"y"===n?Z(null,[0,T-1],s,l,i[o]):Y(null,[0,k-1],s,l,i[o]),o++)}}),0===m&&O(),r._meshX=a,r._meshY=o,r._meshZ=s,r._meshIntensity=l,r._Xs=x,r._Ys=b,r._Zs=_}(),r}r.exports={findNearestOnAxis:f,generateIsoMeshes:v,createIsosurfaceTrace:function(r,n){var i=a({gl:r.glplot.gl}),o=new h(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}}},82738:function(r,n,i){"use strict";var a=i(71828),o=i(73972),s=i(16249),l=i(1586);function u(r,n,i,a,s){var u=s("isomin"),c=s("isomax");null!=c&&null!=u&&u>c&&(n.isomin=null,n.isomax=null);var f=s("x"),h=s("y"),p=s("z"),d=s("value");f&&f.length&&h&&h.length&&p&&p.length&&d&&d.length?(o.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],a),s("valuehoverformat"),["x","y","z"].forEach(function(r){s(r+"hoverformat");var n="caps."+r;s(n+".show")&&s(n+".fill");var i="slices."+r;s(i+".show")&&(s(i+".fill"),s(i+".locations"))}),s("spaceframe.show")&&s("spaceframe.fill"),s("surface.show")&&(s("surface.count"),s("surface.fill"),s("surface.pattern")),s("contour.show")&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(r){s(r)}),l(r,n,a,s,{prefix:"",cLetter:"c"}),n._length=null):n.visible=!1}r.exports={supplyDefaults:function(r,n,i,o){u(r,n,0,o,function(i,o){return a.coerce(r,n,s,i,o)})},supplyIsoDefaults:u}},64943:function(r,n,i){"use strict";r.exports={attributes:i(16249),supplyDefaults:i(82738).supplyDefaults,calc:i(56959),colorbar:{min:"cmin",max:"cmax"},plot:i(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:i(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(r,n,i){"use strict";var a=i(50693),o=i(12663).axisHoverFormat,s=i(5386).fF,l=i(54532),u=i(9012),c=i(1426).extendFlat;r.exports=c({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:s({editType:"calc"}),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},a("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:c({},l.contours.x.show,{}),color:l.contours.x.color,width:l.contours.x.width,editType:"calc"},lightposition:{x:c({},l.lightposition.x,{dflt:1e5}),y:c({},l.lightposition.y,{dflt:1e5}),z:c({},l.lightposition.z,{dflt:0}),editType:"calc"},lighting:c({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},l.lighting),hoverinfo:c({},u.hoverinfo,{editType:"calc"}),showlegend:c({},u.showlegend,{dflt:!1})})},82932:function(r,n,i){"use strict";var a=i(78803);r.exports=function(r,n){n.intensity&&a(r,n,{vals:n.intensity,containerStr:"",cLetter:"c"})}},91134:function(r,n,i){"use strict";var a=i(9330).gl_mesh3d,o=i(9330).delaunay_triangulate,s=i(9330).alpha_shape,l=i(9330).convex_hull,u=i(81697).parseColorScale,c=i(71828).isArrayOrTypedArray,f=i(78614),h=i(21081).extractOpts,p=i(90060);function d(r,n,i){this.scene=r,this.uid=i,this.mesh=n,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=d.prototype;function g(r){for(var n=[],i=r.length,a=0;a<i;a++)n[a]=f(r[a]);return n}function y(r,n,i,a){for(var o=[],s=n.length,l=0;l<s;l++)o[l]=r.d2l(n[l],0,a)*i;return o}function m(r){for(var n=[],i=r.length,a=0;a<i;a++)n[a]=Math.round(r[a]);return n}function x(r,n){for(var i=r.length,a=0;a<i;a++)if(r[a]<=-.5||r[a]>=n-.5)return!1;return!0}v.handlePick=function(r){if(r.object===this.mesh){var n=r.index=r.data.index;r.data._cellCenter?r.traceCoordinate=r.data.dataCoordinate:r.traceCoordinate=[this.data.x[n],this.data.y[n],this.data.z[n]];var i=this.data.hovertext||this.data.text;return c(i)&&void 0!==i[n]?r.textLabel=i[n]:i&&(r.textLabel=i),!0}},v.update=function(r){var n=this.scene,i=n.fullSceneLayout;this.data=r;var a,c=r.x.length,d=p(y(i.xaxis,r.x,n.dataScale[0],r.xcalendar),y(i.yaxis,r.y,n.dataScale[1],r.ycalendar),y(i.zaxis,r.z,n.dataScale[2],r.zcalendar));if(r.i&&r.j&&r.k){if(r.i.length!==r.j.length||r.j.length!==r.k.length||!x(r.i,c)||!x(r.j,c)||!x(r.k,c))return;a=p(m(r.i),m(r.j),m(r.k))}else a=0===r.alphahull?l(d):r.alphahull>0?s(r.alphahull,d):function(r,n){for(var i=["x","y","z"].indexOf(r),a=[],s=n.length,l=0;l<s;l++)a[l]=[n[l][(i+1)%3],n[l][(i+2)%3]];return o(a)}(r.delaunayaxis,d);var v={positions:d,cells:a,lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:f(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading};if(r.intensity){var b=h(r);this.color="#fff";var _=r.intensitymode;v[_+"Intensity"]=r.intensity,v[_+"IntensityBounds"]=[b.min,b.max],v.colormap=u(r)}else r.vertexcolor?(this.color=r.vertexcolor[0],v.vertexColors=g(r.vertexcolor)):r.facecolor?(this.color=r.facecolor[0],v.cellColors=g(r.facecolor)):(this.color=r.color,v.meshColor=f(r.color));this.mesh.update(v)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=a({gl:r.glplot.gl}),o=new d(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}},58669:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(1586),l=i(2418);r.exports=function(r,n,i,u){function c(i,a){return o.coerce(r,n,l,i,a)}function f(r){var n=r.map(function(r){var n=c(r);return n&&o.isArrayOrTypedArray(n)?n:null});return n.every(function(r){return r&&r.length===n[0].length})&&n}f(["x","y","z"])?(f(["i","j","k"]),(!n.i||n.j&&n.k)&&(!n.j||n.k&&n.i)&&(!n.k||n.i&&n.j)?(a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],u),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){c(r)}),c("contour.show")&&(c("contour.color"),c("contour.width")),"intensity"in r?(c("intensity"),c("intensitymode"),s(r,n,u,c,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in r?c("facecolor"):"vertexcolor"in r?c("vertexcolor"):c("color",i)),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),n._length=null):n.visible=!1):n.visible=!1}},21164:function(r,n,i){"use strict";r.exports={attributes:i(2418),supplyDefaults:i(58669),calc:i(82932),colorbar:{min:"cmin",max:"cmax"},plot:i(91134),moduleType:"trace",name:"mesh3d",basePlotModule:i(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(r,n,i){"use strict";var a=i(71828).extendFlat,o=i(82196),s=i(12663).axisHoverFormat,l=i(79952).P,u=i(77914),c=i(22372),f=c.INCREASING.COLOR,h=c.DECREASING.COLOR,p=o.line;function d(r){return{line:{color:a({},p.color,{dflt:r}),width:p.width,dash:l,editType:"style"},editType:"style"}}r.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:a({},p.width,{}),dash:a({},l,{}),editType:"style"},increasing:d(f),decreasing:d(h),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:a({},u.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(r,n,i){"use strict";var a=i(71828),o=a._,s=i(89298),l=i(42973),u=i(50606).BADNUM;function c(r,n,i,a){return{o:r,h:n,l:i,c:a}}function f(r,n,i,l,c,f){for(var h=c.makeCalcdata(n,"open"),p=c.makeCalcdata(n,"high"),d=c.makeCalcdata(n,"low"),v=c.makeCalcdata(n,"close"),g=a.isArrayOrTypedArray(n.text),y=a.isArrayOrTypedArray(n.hovertext),m=!0,x=null,b=!!n.xperiodalignment,_=[],w=0;w<l.length;w++){var T=l[w],k=h[w],A=p[w],M=d[w],S=v[w];if(T!==u&&k!==u&&A!==u&&M!==u&&S!==u){S===k?null!==x&&S!==x&&(m=S>x):m=S>k,x=S;var E=f(k,A,M,S);E.pos=T,E.yc=(k+S)/2,E.i=w,E.dir=m?"increasing":"decreasing",E.x=E.pos,E.y=[M,A],b&&(E.orig_p=i[w]),g&&(E.tx=n.text[w]),y&&(E.htx=n.hovertext[w]),_.push(E)}else _.push({pos:T,empty:!0})}return n._extremes[c._id]=s.findExtremes(c,a.concat(d,p),{padded:!0}),_.length&&(_[0].t={labels:{open:o(r,"open:")+" ",high:o(r,"high:")+" ",low:o(r,"low:")+" ",close:o(r,"close:")+" "}}),_}r.exports={calc:function(r,n){var i=s.getFromId(r,n.xaxis),o=s.getFromId(r,n.yaxis),u=function(r,n,i){var o=i._minDiff;if(!o){var s,u=r._fullData,c=[];for(o=1/0,s=0;s<u.length;s++){var f=u[s];if("ohlc"===f.type&&!0===f.visible&&f.xaxis===n._id){c.push(f);var h=n.makeCalcdata(f,"x");f._origX=h;var p=l(i,n,"x",h).vals;f._xcalc=p;var d=a.distinctVals(p).minDiff;d&&isFinite(d)&&(o=Math.min(o,d))}}for(o===1/0&&(o=1),s=0;s<c.length;s++)c[s]._minDiff=o}return o*i.tickwidth}(r,i,n),h=n._minDiff;n._minDiff=null;var p=n._origX;n._origX=null;var d=n._xcalc;n._xcalc=null;var v=f(r,n,p,d,o,c);return n._extremes[i._id]=s.findExtremes(i,d,{vpad:h/2}),v.length?(a.extendFlat(v[0].t,{wHover:h/2,tickLen:u}),v):[{t:{empty:!0}}]},calcCommon:f}},16169:function(r,n,i){"use strict";var a=i(71828),o=i(14555),s=i(73927),l=i(2522);function u(r,n,i,a){i(a+".line.color"),i(a+".line.width",n.line.width),i(a+".line.dash",n.line.dash)}r.exports=function(r,n,i,c){function f(i,o){return a.coerce(r,n,l,i,o)}o(r,n,f,c)?(s(r,n,c,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),f("line.dash"),u(0,n,f,"increasing"),u(0,n,f,"decreasing"),f("text"),f("hovertext"),f("tickwidth"),c._requestRangeslider[n.xaxis]=!0):n.visible=!1}},66449:function(r,n,i){"use strict";var a=i(89298),o=i(71828),s=i(30211),l=i(7901),u=i(71828).fillText,c=i(22372),f={increasing:c.INCREASING.SYMBOL,decreasing:c.DECREASING.SYMBOL};function h(r,n,i,a){var o,u,c=r.cd,f=r.xa,h=c[0].trace,p=c[0].t,d=h.type,v="ohlc"===d?"l":"min",g="ohlc"===d?"h":"max",y=p.bPos||0,m=p.bdPos||p.tickLen,x=p.wHover,b=Math.min(1,m/Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0])));function _(r){var i=r.pos+y-n;return s.inbox(i-x,i+x,o)}function w(r){var n=r[v],a=r[g];return n===a||s.inbox(n-i,a-i,o)}function T(r){return(_(r)+w(r))/2}o=r.maxHoverDistance-b,u=r.maxSpikeDistance-b;var k=s.getDistanceFunction(a,_,w,T);if(s.getClosest(c,k,r),!1===r.index)return null;var A=c[r.index];if(A.empty)return null;var M=h[A.dir],S=M.line.color;return l.opacity(S)&&M.line.width?r.color=S:r.color=M.fillcolor,r.x0=f.c2p(A.pos+y-m,!0),r.x1=f.c2p(A.pos+y+m,!0),r.xLabelVal=void 0!==A.orig_p?A.orig_p:A.pos,r.spikeDistance=T(A)*u/o,r.xSpike=f.c2p(A.pos,!0),r}function p(r,n,i,s){var l=r.cd,u=r.ya,c=l[0].trace,f=l[0].t,p=[],d=h(r,n,i,s);if(!d)return[];var v=l[d.index].hi||c.hoverinfo,g=v.split("+");if("all"!==v&&-1===g.indexOf("y"))return[];for(var y=["high","open","close","low"],m={},x=0;x<y.length;x++){var b,_=y[x],w=c[_][d.index],T=u.c2p(w,!0);w in m?(b=m[w]).yLabel+="<br>"+f.labels[_]+a.hoverLabelText(u,w,c.yhoverformat):((b=o.extendFlat({},d)).y0=b.y1=T,b.yLabelVal=w,b.yLabel=f.labels[_]+a.hoverLabelText(u,w,c.yhoverformat),b.name="",p.push(b),m[w]=b)}return p}function d(r,n,i,o){var s=r.cd,l=r.ya,c=s[0].trace,p=s[0].t,d=h(r,n,i,o);if(!d)return[];var v=s[d.index],g=d.index=v.i,y=v.dir;function m(r){return p.labels[r]+a.hoverLabelText(l,c[r][g],c.yhoverformat)}var x=v.hi||c.hoverinfo,b=x.split("+"),_="all"===x,w=_||-1!==b.indexOf("y"),T=_||-1!==b.indexOf("text"),k=w?[m("open"),m("high"),m("low"),m("close")+"  "+f[y]]:[];return T&&u(v,c,k),d.extraText=k.join("<br>"),d.y0=d.y1=l.c2p(v.yc,!0),[d]}r.exports={hoverPoints:function(r,n,i,a){return r.cd[0].trace.hoverlabel.split?p(r,n,i,a):d(r,n,i,a)},hoverSplit:p,hoverOnPoints:d}},54186:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"ohlc",basePlotModule:i(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:i(2522),supplyDefaults:i(16169),calc:i(3485).calc,plot:i(72314),style:i(53101),hoverPoints:i(66449).hoverPoints,selectPoints:i(67324)}},14555:function(r,n,i){"use strict";var a=i(73972),o=i(71828);r.exports=function(r,n,i,s){var l=i("x"),u=i("open"),c=i("high"),f=i("low"),h=i("close");if(i("hoverlabel.split"),a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x"],s),u&&c&&f&&h){var p=Math.min(u.length,c.length,f.length,h.length);return l&&(p=Math.min(p,o.minRowLength(l))),n._length=p,p}}},72314:function(r,n,i){"use strict";var a=i(39898),o=i(71828);r.exports=function(r,n,i,s){var l=n.yaxis,u=n.xaxis,c=!!u.rangebreaks;o.makeTraceGroups(s,i,"trace ohlc").each(function(r){var n=a.select(this),i=r[0],s=i.t;if(!0!==i.trace.visible||s.empty)n.remove();else{var f=s.tickLen,h=n.selectAll("path").data(o.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(r){if(r.empty)return"M0,0Z";var n=u.c2p(r.pos-f,!0),i=u.c2p(r.pos+f,!0),a=c?(n+i)/2:u.c2p(r.pos,!0);return"M"+n+","+l.c2p(r.o,!0)+"H"+a+"M"+a+","+l.c2p(r.h,!0)+"V"+l.c2p(r.l,!0)+"M"+i+","+l.c2p(r.c,!0)+"H"+a})}})}},67324:function(r){"use strict";r.exports=function(r,n){var i,a=r.cd,o=r.xaxis,s=r.yaxis,l=[],u=a[0].t.bPos||0;if(!1===n)for(i=0;i<a.length;i++)a[i].selected=0;else for(i=0;i<a.length;i++){var c=a[i];n.contains([o.c2p(c.pos+u),s.c2p(c.yc)],null,c.i,r)?(l.push({pointNumber:c.i,x:o.c2d(c.pos),y:s.c2d(c.yc)}),c.selected=1):c.selected=0}return l}},53101:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(7901);r.exports=function(r,n,i){var l=i||a.select(r).selectAll("g.ohlclayer").selectAll("g.trace");l.style("opacity",function(r){return r[0].trace.opacity}),l.each(function(r){var n=r[0].trace;a.select(this).selectAll("path").each(function(r){if(!r.empty){var i=n[r.dir].line;a.select(this).style("fill","none").call(s.stroke,i.color).call(o.dashLine,i.dash,i.width).style("opacity",n.selectedpoints&&!r.selected?.3:1)}})})}},99506:function(r,n,i){"use strict";var a=i(1426).extendFlat,o=i(9012),s=i(41940),l=i(50693),u=i(5386).fF,c=i(27670).Y,f=a({editType:"calc"},l("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:u({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});r.exports={domain:c({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:a({},o.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:u({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:s({editType:"calc"}),tickfont:s({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:f,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(r,n,i){"use strict";var a=i(27659).a0,o=i(45784),s="parcats";n.name=s,n.plot=function(r,n,i,l){var u=a(r.calcdata,s);u.length&&o(r,u[0],i,l)},n.clean=function(r,n,i,a){var o=a._has&&a._has("parcats"),s=n._has&&n._has("parcats");o&&!s&&a._paperdiv.selectAll(".parcats").remove()}},28699:function(r,n,i){"use strict";var a=i(28984).wrap,o=i(52075).hasColorscale,s=i(78803),l=i(75744),u=i(91424),c=i(71828),f=i(92770);r.exports=function(r,n){var i,h,p=c.filterVisible(n.dimensions);if(0===p.length)return[];var d,v,g,y=p.map(function(r){var n;if("trace"===r.categoryorder)n=null;else if("array"===r.categoryorder)n=r.categoryarray;else{n=l(r.values);for(var i=!0,a=0;a<n.length;a++)if(!f(n[a])){i=!1;break}n.sort(i?c.sorterAsc:void 0),"category descending"===r.categoryorder&&(n=n.reverse())}return function(r,n){n=null==n?[]:n.map(function(r){return r});var i={},a={},o=[];n.forEach(function(r,n){i[r]=0,a[r]=n});for(var s=0;s<r.length;s++){var l,u=r[s];void 0===i[u]?(i[u]=1,l=n.push(u)-1,a[u]=l):(i[u]++,l=a[u]),o.push(l)}var c=n.map(function(r){return i[r]});return{uniqueValues:n,uniqueCounts:c,inds:o}}(r.values,n)});d=c.isArrayOrTypedArray(n.counts)?n.counts:[n.counts],function(r){var n;if(function(r){for(var n=Array(r.length),i=0;i<r.length;i++){if(r[i]<0||r[i]>=r.length||void 0!==n[r[i]])return!1;n[r[i]]=!0}return!0}(r.map(function(r){return r.displayindex})))for(n=0;n<r.length;n++)r[n]._displayindex=r[n].displayindex;else for(n=0;n<r.length;n++)r[n]._displayindex=n}(p),p.forEach(function(r,n){!function(r,n){r._categoryarray=n.uniqueValues,null===r.ticktext||void 0===r.ticktext?r._ticktext=[]:r._ticktext=r.ticktext.slice();for(var i=r._ticktext.length;i<n.uniqueValues.length;i++)r._ticktext.push(n.uniqueValues[i])}(r,y[n])});var m,x=n.line;x?(o(n,"line")&&s(r,n,{vals:n.line.color,containerStr:"line",cLetter:"c"}),m=u.tryColorscale(x)):m=c.identity;var b,_,w,T,k,A=p[0].values.length,M={},S=y.map(function(r){return r.inds});for(g=0,b=0;b<A;b++){var E,L,C,O=[];for(_=0;_<S.length;_++)O.push(S[_][b]);v=d[b%d.length],g+=v;var P=(w=b,T=void 0,k=void 0,c.isArrayOrTypedArray(x.color)?k=T=x.color[w%x.color.length]:T=x.color,{color:m(T),rawColor:k}),I=O+"-"+P.rawColor;void 0===M[I]&&(M[I]={categoryInds:O,color:P.color,rawColor:P.rawColor,valueInds:[],count:0}),E=M[I],L=b,C=v,E.valueInds.push(L),E.count+=C}var D=p.map(function(r,n){var i;return i=r._index,{dimensionInd:n,containerInd:i,displayInd:r._displayindex,dimensionLabel:r.label,count:g,categories:[],dragX:null}});for(b=0;b<A;b++)for(v=d[b%d.length],_=0;_<D.length;_++){var z,R,F,B=D[_].containerInd,N=y[_].inds[b],j=D[_].categories;if(void 0===j[N]){var U=n.dimensions[B]._categoryarray[N],V=n.dimensions[B]._ticktext[N];j[N]={dimensionInd:_,categoryInd:N,categoryValue:U,displayInd:N,categoryLabel:V,valueInds:[],count:0,dragY:null}}z=j[N],R=b,F=v,z.valueInds.push(R),z.count+=F}return a((i=g,h=D.map(function(r){return r.categories.length}).reduce(function(r,n){return Math.max(r,n)}),{dimensions:D,paths:M,trace:void 0,maxCats:h,count:i}))}},14647:function(r,n,i){"use strict";var a=i(71828),o=i(52075).hasColorscale,s=i(1586),l=i(27670).c,u=i(85501),c=i(99506),f=i(94397),h=i(73627).isTypedArraySpec;function p(r,n){function i(i,o){return a.coerce(r,n,c.dimensions,i,o)}var o=i("values"),s=i("visible");if(o&&o.length||(s=n.visible=!1),s){i("label"),i("displayindex",n._index);var l,u=r.categoryarray,f=a.isArrayOrTypedArray(u)&&u.length>0||h(u);f&&(l="array");var p=i("categoryorder",l);"array"===p?(i("categoryarray"),i("ticktext")):(delete r.categoryarray,delete r.ticktext),f||"array"!==p||(n.categoryorder="trace")}}r.exports=function(r,n,i,h){function d(i,o){return a.coerce(r,n,c,i,o)}var v=u(r,n,{name:"dimensions",handleItemDefaults:p}),g=function(r,n,i,l,u){u("line.shape"),u("line.hovertemplate");var c=u("line.color",l.colorway[0]);if(o(r,"line")&&a.isArrayOrTypedArray(c)){if(c.length)return u("line.colorscale"),s(r,n,l,u,{prefix:"line.",cLetter:"c"}),c.length;n.line.color=i}return 1/0}(r,n,i,h,d);l(n,h,d),Array.isArray(v)&&v.length||(n.visible=!1),f(n,v,"values",g),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var y={family:h.font.family,size:Math.round(h.font.size),color:h.font.color};a.coerceFont(d,"labelfont",y);var m={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};a.coerceFont(d,"tickfont",m)}},94873:function(r,n,i){"use strict";r.exports={attributes:i(99506),supplyDefaults:i(14647),calc:i(28699),plot:i(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:i(27677),categories:["noOpacity"],meta:{}}},45460:function(r,n,i){"use strict";var a=i(39898),o=i(81684).k4,s=i(72391),l=i(30211),u=i(71828),c=u.strTranslate,f=i(91424),h=i(84267),p=i(63893);function d(r){return r.key}function v(r){var n=r.parcatsViewModel.dimensions.length,i=r.parcatsViewModel.dimensions[n-1].model.dimensionInd;return r.model.dimensionInd===i}function g(r,n){return r.model.rawColor>n.model.rawColor?1:r.model.rawColor<n.model.rawColor?-1:0}function y(r){if(!r.parcatsViewModel.dragDimension&&-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")){u.raiseToTop(this),T(a.select(this));var n=x(r),i=b(r);if(r.parcatsViewModel.graphDiv.emit("plotly_hover",{points:n,event:a.event,constraints:i}),-1===r.parcatsViewModel.hoverinfoItems.indexOf("none")){var o,s,c,f=a.mouse(this)[0],p=r.parcatsViewModel.graphDiv,d=r.parcatsViewModel.trace,v=p._fullLayout,g=v._paperdiv.node().getBoundingClientRect(),y=r.parcatsViewModel.graphDiv.getBoundingClientRect();for(c=0;c<r.leftXs.length-1;c++)if(r.leftXs[c]+r.dimWidths[c]-2<=f&&f<=r.leftXs[c+1]+2){var m=r.parcatsViewModel.dimensions[c],_=r.parcatsViewModel.dimensions[c+1];o=(m.x+m.width+_.x)/2,s=(r.topYs[c]+r.topYs[c+1]+r.height)/2;break}var w=r.parcatsViewModel.x+o,k=r.parcatsViewModel.y+s,A=h.mostReadable(r.model.color,["black","white"]),M=r.model.count,S=M/r.parcatsViewModel.model.count,E={countLabel:M,probabilityLabel:S.toFixed(3)},L=[];-1!==r.parcatsViewModel.hoverinfoItems.indexOf("count")&&L.push(["Count:",E.countLabel].join(" ")),-1!==r.parcatsViewModel.hoverinfoItems.indexOf("probability")&&L.push(["P:",E.probabilityLabel].join(" "));var C=L.join("<br>"),O=a.mouse(p)[0];l.loneHover({trace:d,x:w-g.left+y.left,y:k-g.top+y.top,text:C,color:r.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:A,idealAlign:O<w?"right":"left",hovertemplate:(d.line||{}).hovertemplate,hovertemplateLabels:E,eventData:[{data:d._input,fullData:d,count:M,probability:S}]},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:p})}}}function m(r){if(!r.parcatsViewModel.dragDimension&&(w(a.select(this)),l.loneUnhover(r.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),r.parcatsViewModel.pathSelection.sort(g),-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var n=x(r),i=b(r);r.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:n,event:a.event,constraints:i})}}function x(r){for(var n=[],i=z(r.parcatsViewModel),a=0;a<r.model.valueInds.length;a++){var o=r.model.valueInds[a];n.push({curveNumber:i,pointNumber:o})}return n}function b(r){for(var n={},i=r.parcatsViewModel.model.dimensions,a=0;a<i.length;a++){var o=i[a],s=o.categories[r.model.categoryInds[a]];n[o.containerInd]=s.categoryValue}return void 0!==r.model.rawColor&&(n.color=r.model.rawColor),n}function _(r){if(-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")){var n=x(r),i=b(r);r.parcatsViewModel.graphDiv.emit("plotly_click",{points:n,event:a.event,constraints:i})}}function w(r){r.attr("fill",function(r){return r.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function T(r){r.attr("fill-opacity",.8).attr("stroke",function(r){return h.mostReadable(r.model.color,["black","white"])}).attr("stroke-width",.3)}function k(r){r.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function A(r){r.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function M(r){var n=r.parcatsViewModel.pathSelection,i=r.categoryViewModel.model.dimensionInd,a=r.categoryViewModel.model.categoryInd;return n.filter(function(n){return n.model.categoryInds[i]===a&&n.model.color===r.color})}function S(r,n,i){var o=a.select(r).datum(),s=o.categoryViewModel.model,l=o.parcatsViewModel.graphDiv,u=a.select(r.parentNode).selectAll("rect.bandrect"),c=[];u.each(function(r){M(r).each(function(r){Array.prototype.push.apply(c,x(r))})});var f={};f[s.dimensionInd]=s.categoryValue,l.emit(n,{points:c,event:i,constraints:f})}function E(r,n,i){var o=a.select(r).datum(),s=o.categoryViewModel.model,l=o.parcatsViewModel.graphDiv,u=M(o),c=[];u.each(function(r){Array.prototype.push.apply(c,x(r))});var f={};f[s.dimensionInd]=s.categoryValue,void 0!==o.rawColor&&(f.color=o.rawColor),l.emit(n,{points:c,event:i,constraints:f})}function L(r,n,i){r._fullLayout._calcInverseTransform(r);var o,s,l=r._fullLayout._invScaleX,u=r._fullLayout._invScaleY,c=a.select(i.parentNode).select("rect.catrect"),f=c.node().getBoundingClientRect(),h=c.datum(),p=h.parcatsViewModel,d=p.model.dimensions[h.model.dimensionInd],v=p.trace,g=f.top+f.height/2;p.dimensions.length>1&&d.displayInd===p.dimensions.length-1?(o=f.left,s="left"):(o=f.left+f.width,s="right");var y=h.model.count,m=h.model.categoryLabel,x=y/h.parcatsViewModel.model.count,b={countLabel:y,categoryLabel:m,probabilityLabel:x.toFixed(3)},_=[];-1!==h.parcatsViewModel.hoverinfoItems.indexOf("count")&&_.push(["Count:",b.countLabel].join(" ")),-1!==h.parcatsViewModel.hoverinfoItems.indexOf("probability")&&_.push(["P("+b.categoryLabel+"):",b.probabilityLabel].join(" "));var w=_.join("<br>");return{trace:v,x:l*(o-n.left),y:u*(g-n.top),text:w,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:s,hovertemplate:v.hovertemplate,hovertemplateLabels:b,eventData:[{data:v._input,fullData:v,count:y,category:m,probability:x}]}}function C(r){if(!r.parcatsViewModel.dragDimension&&-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!(a.mouse(this)[1]<-1)){var n,i,o,s,c=r.parcatsViewModel.graphDiv,f=c._fullLayout,p=f._paperdiv.node().getBoundingClientRect(),d=r.parcatsViewModel.hoveron;"color"===d?(T(i=M(n=a.select(this).datum())),i.each(function(){u.raiseToTop(this)}),a.select(this.parentNode).selectAll("rect.bandrect").filter(function(r){return r.color===n.color}).each(function(){u.raiseToTop(this),a.select(this).attr("stroke","black").attr("stroke-width",1.5)}),E(this,"plotly_hover",a.event)):(a.select(this.parentNode).selectAll("rect.bandrect").each(function(r){var n=M(r);T(n),n.each(function(){u.raiseToTop(this)})}),a.select(this.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5),S(this,"plotly_hover",a.event)),-1===r.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===d?s=L(c,p,this):"color"===d?s=function(r,n,i){r._fullLayout._calcInverseTransform(r);var o,s,l=r._fullLayout._invScaleX,u=r._fullLayout._invScaleY,c=i.getBoundingClientRect(),f=a.select(i).datum(),p=f.categoryViewModel,d=p.parcatsViewModel,v=d.model.dimensions[p.model.dimensionInd],g=d.trace,y=c.y+c.height/2;d.dimensions.length>1&&v.displayInd===d.dimensions.length-1?(o=c.left,s="left"):(o=c.left+c.width,s="right");var m=p.model.categoryLabel,x=f.parcatsViewModel.model.count,b=0;f.categoryViewModel.bands.forEach(function(r){r.color===f.color&&(b+=r.count)});var _=p.model.count,w=0;d.pathSelection.each(function(r){r.model.color===f.color&&(w+=r.model.count)});var T=b/x,k=b/w,A=b/_,M={countLabel:x,categoryLabel:m,probabilityLabel:T.toFixed(3)},S=[];-1!==p.parcatsViewModel.hoverinfoItems.indexOf("count")&&S.push(["Count:",M.countLabel].join(" ")),-1!==p.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(S.push("P(color ∩ "+m+"): "+M.probabilityLabel),S.push("P("+m+" | color): "+k.toFixed(3)),S.push("P(color | "+m+"): "+A.toFixed(3)));var E=S.join("<br>"),L=h.mostReadable(f.color,["black","white"]);return{trace:g,x:l*(o-n.left),y:u*(y-n.top),text:E,color:f.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:L,fontSize:10,idealAlign:s,hovertemplate:g.hovertemplate,hovertemplateLabels:M,eventData:[{data:g._input,fullData:g,category:m,count:x,probability:T,categorycount:_,colorcount:w,bandcolorcount:b}]}}(c,p,this):"dimension"===d&&(o=[],a.select(this.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){o.push(L(c,p,this))}),s=o),s&&l.loneHover(s,{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:c}))}}function O(r){var n=r.parcatsViewModel;n.dragDimension||(w(n.pathSelection),k(n.dimensionSelection.selectAll("g.category")),A(n.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),l.loneUnhover(n.graphDiv._fullLayout._hoverlayer.node()),n.pathSelection.sort(g),-1!==n.hoverinfoItems.indexOf("skip"))||("color"===r.parcatsViewModel.hoveron?E(this,"plotly_unhover",a.event):S(this,"plotly_unhover",a.event))}function P(r){"fixed"!==r.parcatsViewModel.arrangement&&(r.dragDimensionDisplayInd=r.model.displayInd,r.initialDragDimensionDisplayInds=r.parcatsViewModel.model.dimensions.map(function(r){return r.displayInd}),r.dragHasMoved=!1,r.dragCategoryDisplayInd=null,a.select(this).selectAll("g.category").select("rect.catrect").each(function(n){var i=a.mouse(this)[0],o=a.mouse(this)[1];-2<=i&&i<=n.width+2&&-2<=o&&o<=n.height+2&&(r.dragCategoryDisplayInd=n.model.displayInd,r.initialDragCategoryDisplayInds=r.model.categories.map(function(r){return r.displayInd}),n.model.dragY=n.y,u.raiseToTop(this.parentNode),a.select(this.parentNode).selectAll("rect.bandrect").each(function(n){n.y<o&&o<=n.y+n.height&&(r.potentialClickBand=this)}))}),r.parcatsViewModel.dragDimension=r,l.loneUnhover(r.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I(r){if("fixed"!==r.parcatsViewModel.arrangement&&(r.dragHasMoved=!0,null!==r.dragDimensionDisplayInd)){var n=r.dragDimensionDisplayInd,i=r.parcatsViewModel.dimensions[n];if(null!==r.dragCategoryDisplayInd){var o=i.categories[r.dragCategoryDisplayInd];o.model.dragY+=a.event.dy;var s=o.model.dragY,l=o.model.displayInd,u=i.categories,c=u[l-1],f=u[l+1];void 0!==c&&s<c.y+c.height/2&&(o.model.displayInd=c.model.displayInd,c.model.displayInd=l),void 0!==f&&s+o.height>f.y+f.height/2&&(o.model.displayInd=f.model.displayInd,f.model.displayInd=l),r.dragCategoryDisplayInd=o.model.displayInd}if(null===r.dragCategoryDisplayInd||"freeform"===r.parcatsViewModel.arrangement){i.model.dragX=a.event.x;var h=r.parcatsViewModel.dimensions[n-1],p=r.parcatsViewModel.dimensions[n+1];void 0!==h&&i.model.dragX<h.x+h.width&&(i.model.displayInd=h.model.displayInd,h.model.displayInd=n),void 0!==p&&i.model.dragX+i.width>p.x&&(i.model.displayInd=p.model.displayInd,p.model.displayInd=r.dragDimensionDisplayInd),r.dragDimensionDisplayInd=i.model.displayInd}U(r.parcatsViewModel),j(r.parcatsViewModel),F(r.parcatsViewModel),R(r.parcatsViewModel)}}function D(r){if("fixed"!==r.parcatsViewModel.arrangement&&null!==r.dragDimensionDisplayInd){a.select(this).selectAll("text").attr("font-weight","normal");var n={},i=z(r.parcatsViewModel),o=r.parcatsViewModel.model.dimensions.map(function(r){return r.displayInd}),l=r.initialDragDimensionDisplayInds.some(function(r,n){return r!==o[n]});l&&o.forEach(function(i,a){n["dimensions["+r.parcatsViewModel.model.dimensions[a].containerInd+"].displayindex"]=i});var u=!1;if(null!==r.dragCategoryDisplayInd){var c=r.model.categories.map(function(r){return r.displayInd});if(u=r.initialDragCategoryDisplayInds.some(function(r,n){return r!==c[n]})){var f=r.model.categories.slice().sort(function(r,n){return r.displayInd-n.displayInd}),h=f.map(function(r){return r.categoryValue}),p=f.map(function(r){return r.categoryLabel});n["dimensions["+r.model.containerInd+"].categoryarray"]=[h],n["dimensions["+r.model.containerInd+"].ticktext"]=[p],n["dimensions["+r.model.containerInd+"].categoryorder"]="array"}}-1===r.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!r.dragHasMoved&&r.potentialClickBand&&("color"===r.parcatsViewModel.hoveron?E(r.potentialClickBand,"plotly_click",a.event.sourceEvent):S(r.potentialClickBand,"plotly_click",a.event.sourceEvent)),r.model.dragX=null,null!==r.dragCategoryDisplayInd&&(r.parcatsViewModel.dimensions[r.dragDimensionDisplayInd].categories[r.dragCategoryDisplayInd].model.dragY=null,r.dragCategoryDisplayInd=null),r.dragDimensionDisplayInd=null,r.parcatsViewModel.dragDimension=null,r.dragHasMoved=null,r.potentialClickBand=null,U(r.parcatsViewModel),j(r.parcatsViewModel),a.transition().duration(300).ease("cubic-in-out").each(function(){F(r.parcatsViewModel,!0),R(r.parcatsViewModel,!0)}).each("end",function(){(l||u)&&s.restyle(r.parcatsViewModel.graphDiv,n,[i])})}}function z(r){for(var n,i=r.graphDiv._fullData,a=0;a<i.length;a++)if(r.key===i[a].uid){n=a;break}return n}function R(r,n){var i;void 0===n&&(n=!1),r.pathSelection.data(function(r){return r.paths},d),(i=r.pathSelection,n?i.transition():i).attr("d",function(r){return r.svgD})}function F(r,n){function i(r){return n?r.transition():r}void 0===n&&(n=!1),r.dimensionSelection.data(function(r){return r.dimensions},d);var o=r.dimensionSelection.selectAll("g.category").data(function(r){return r.categories},d);i(r.dimensionSelection).attr("transform",function(r){return c(r.x,0)}),i(o).attr("transform",function(r){return c(0,r.y)}),o.select(".dimlabel").text(function(r,n){return 0===n?r.parcatsViewModel.model.dimensions[r.model.dimensionInd].dimensionLabel:null}),o.select(".catlabel").attr("text-anchor",function(r){return v(r)?"start":"end"}).attr("x",function(r){return v(r)?r.width+5:-5}).each(function(r){var n,i;v(r)?(n=r.width+5,i="start"):(n=-5,i="end"),a.select(this).selectAll("tspan").attr("x",n).attr("text-anchor",i)});var s=o.selectAll("rect.bandrect").data(function(r){return r.bands},d),l=s.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(r){return r.color}).attr("fill-opacity",0);s.attr("fill",function(r){return r.color}).attr("width",function(r){return r.width}).attr("height",function(r){return r.height}).attr("y",function(r){return r.y}),A(l),s.each(function(){u.raiseToTop(this)}),s.exit().remove()}function B(r,n,i){var a,o=i[0],s=n.margin||{l:80,r:80,t:100,b:80},l=o.trace,u=l.domain,c=n.width,f=n.height,h=Math.floor(c*(u.x[1]-u.x[0])),p=Math.floor(f*(u.y[1]-u.y[0])),d=u.x[0]*c+s.l,v=n.height-u.y[1]*n.height+s.t,g=l.line.shape;a="all"===l.hoverinfo?["count","probability"]:(l.hoverinfo||"").split("+");var y={trace:l,key:l.uid,model:o,x:d,y:v,width:h,height:p,hoveron:l.hoveron,hoverinfoItems:a,arrangement:l.arrangement,bundlecolors:l.bundlecolors,sortpaths:l.sortpaths,labelfont:l.labelfont,categorylabelfont:l.tickfont,pathShape:g,dragDimension:null,margin:s,paths:[],dimensions:[],graphDiv:r,traceSelection:null,pathSelection:null,dimensionSelection:null};return o.dimensions&&(U(y),j(y)),y}function N(r,n,i,a,s){var l,u,c=[],f=[];for(u=0;u<i.length-1;u++)c.push((l=o(i[u]+r[u],r[u+1]))(s)),f.push(l(1-s));var h="M "+r[0]+","+n[0];for(h+="l"+i[0]+",0 ",u=1;u<i.length;u++)h+="C"+c[u-1]+","+n[u-1]+" "+f[u-1]+","+n[u]+" "+r[u]+","+n[u]+"l"+i[u]+",0 ";for(h+="l0,"+a+" l -"+i[i.length-1]+",0 ",u=i.length-2;u>=0;u--)h+="C"+f[u]+","+(n[u+1]+a)+" "+c[u]+","+(n[u]+a)+" "+(r[u]+i[u])+","+(n[u]+a)+"l-"+i[u]+",0 ";return h+"Z"}function j(r){var n=r.dimensions,i=r.model,a=n.map(function(r){return r.categories.map(function(r){return r.y})}),o=r.model.dimensions.map(function(r){return r.categories.map(function(r){return r.displayInd})}),s=r.model.dimensions.map(function(r){return r.displayInd}),l=r.dimensions.map(function(r){return r.model.dimensionInd}),u=n.map(function(r){return r.x}),c=n.map(function(r){return r.width}),f=[];for(var h in i.paths)i.paths.hasOwnProperty(h)&&f.push(i.paths[h]);function p(r){var n=r.categoryInds.map(function(r,n){return o[n][r]});return l.map(function(r){return n[r]})}f.sort(function(n,i){var a=p(n),o=p(i);return"backward"===r.sortpaths&&(a.reverse(),o.reverse()),a.push(n.valueInds[0]),o.push(i.valueInds[0]),r.bundlecolors&&(a.unshift(n.rawColor),o.unshift(i.rawColor)),a<o?-1:a>o?1:0});for(var d=Array(f.length),v=n[0].model.count,g=n[0].categories.map(function(r){return r.height}).reduce(function(r,n){return r+n}),y=0;y<f.length;y++){var m,x=f[y];m=v>0?x.count/v*g:0;for(var b,_=Array(a.length),w=0;w<x.categoryInds.length;w++){var T=x.categoryInds[w],k=o[w][T],A=s[w];_[A]=a[A][k],a[A][k]+=m;var M=r.dimensions[A].categories[k],S=M.bands.length,E=M.bands[S-1];if(void 0===E||x.rawColor!==E.rawColor){var L=void 0===E?0:E.y+E.height;M.bands.push({key:L,color:x.color,rawColor:x.rawColor,height:m,width:M.width,count:x.count,y:L,categoryViewModel:M,parcatsViewModel:r})}else{var C=M.bands[S-1];C.height+=m,C.count+=x.count}}b="hspline"===r.pathShape?N(u,_,c,m,.5):N(u,_,c,m,0),d[y]={key:x.valueInds[0],model:x,height:m,leftXs:u,topYs:_,dimWidths:c,svgD:b,parcatsViewModel:r}}r.paths=d}function U(r){var n=r.model.dimensions.map(function(r){return{displayInd:r.displayInd,dimensionInd:r.dimensionInd}});n.sort(function(r,n){return r.displayInd-n.displayInd});var i=[];for(var a in n){var o=n[a].dimensionInd,s=r.model.dimensions[o];i.push(function(r,n){var i,a=r.model.dimensions.length,o=n.displayInd;i=40+(a>1?(r.width-80-16)/(a-1):0)*o;var s,l,u,c,f,h=[],p=r.model.maxCats,d=n.categories.length,v=n.count,g=r.height-8*(p-1),y=8*(p-d)/2,m=n.categories.map(function(r){return{displayInd:r.displayInd,categoryInd:r.categoryInd}});for(m.sort(function(r,n){return r.displayInd-n.displayInd}),f=0;f<d;f++)c=m[f].categoryInd,l=n.categories[c],s=v>0?l.count/v*g:0,u={key:l.valueInds[0],model:l,width:16,height:s,y:null!==l.dragY?l.dragY:y,bands:[],parcatsViewModel:r},y=y+s+8,h.push(u);return{key:n.dimensionInd,x:null!==n.dragX?n.dragX:i,y:0,width:16,model:n,categories:h,parcatsViewModel:r,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}(r,s))}r.dimensions=i}r.exports=function(r,n,i,o){var s,l,h,x,b,T,M,S,E,L,z,R,F;s=r._context.staticPlot,l=i.map(B.bind(0,r,o)),(h=n.selectAll("g.parcatslayer").data([null])).enter().append("g").attr("class","parcatslayer").style("pointer-events",s?"none":"all"),b=(x=h.selectAll("g.trace.parcats").data(l,d)).enter().append("g").attr("class","trace parcats"),x.attr("transform",function(r){return c(r.x,r.y)}),b.append("g").attr("class","paths"),(T=x.select("g.paths").selectAll("path.path").data(function(r){return r.paths},d)).attr("fill",function(r){return r.model.color}),w(M=T.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(r){return r.model.color}).attr("fill-opacity",0)),T.attr("d",function(r){return r.svgD}),M.empty()||T.sort(g),T.exit().remove(),T.on("mouseover",y).on("mouseout",m).on("click",_),b.append("g").attr("class","dimensions"),(S=x.select("g.dimensions").selectAll("g.dimension").data(function(r){return r.dimensions},d)).enter().append("g").attr("class","dimension"),S.attr("transform",function(r){return c(r.x,0)}),S.exit().remove(),L=(E=S.selectAll("g.category").data(function(r){return r.categories},d)).enter().append("g").attr("class","category"),E.attr("transform",function(r){return c(0,r.y)}),L.append("rect").attr("class","catrect").attr("pointer-events","none"),E.select("rect.catrect").attr("fill","none").attr("width",function(r){return r.width}).attr("height",function(r){return r.height}),k(L),(z=E.selectAll("rect.bandrect").data(function(r){return r.bands},d)).each(function(){u.raiseToTop(this)}),z.attr("fill",function(r){return r.color}),R=z.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(r){return r.color}).attr("fill-opacity",0),z.attr("fill",function(r){return r.color}).attr("width",function(r){return r.width}).attr("height",function(r){return r.height}).attr("y",function(r){return r.y}).attr("cursor",function(r){return"fixed"===r.parcatsViewModel.arrangement?"default":"perpendicular"===r.parcatsViewModel.arrangement?"ns-resize":"move"}),A(R),z.exit().remove(),L.append("text").attr("class","catlabel").attr("pointer-events","none"),F=r._fullLayout.paper_bgcolor,E.select("text.catlabel").attr("text-anchor",function(r){return v(r)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",p.makeTextShadow(F)).style("fill","rgb(0, 0, 0)").attr("x",function(r){return v(r)?r.width+5:-5}).attr("y",function(r){return r.height/2}).text(function(r){return r.model.categoryLabel}).each(function(n){f.font(a.select(this),n.parcatsViewModel.categorylabelfont),p.convertToTspans(a.select(this),r)}),L.append("text").attr("class","dimlabel"),E.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(r){return"fixed"===r.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(r){return r.width/2}).attr("y",-5).text(function(r,n){return 0===n?r.parcatsViewModel.model.dimensions[r.model.dimensionInd].dimensionLabel:null}).each(function(r){f.font(a.select(this),r.parcatsViewModel.labelfont)}),E.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",O),E.exit().remove(),S.call(a.behavior.drag().origin(function(r){return{x:r.x,y:0}}).on("dragstart",P).on("drag",I).on("dragend",D)),x.each(function(r){r.traceSelection=a.select(this),r.pathSelection=a.select(this).selectAll("g.paths").selectAll("path.path"),r.dimensionSelection=a.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),x.exit().remove()}},45784:function(r,n,i){"use strict";var a=i(45460);r.exports=function(r,n,i,o){var s=r._fullLayout,l=s._paper,u=s._size;a(r,l,n,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},i,o)}},73362:function(r,n,i){"use strict";var a=i(50693),o=i(13838),s=i(41940),l=i(27670).Y,u=i(1426).extendFlat,c=i(44467).templatedArray;r.exports={domain:l({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:s({editType:"plot"}),tickfont:s({editType:"plot"}),rangefont:s({editType:"plot"}),dimensions:c("dimension",{label:{valType:"string",editType:"plot"},tickvals:u({},o.tickvals,{editType:"plot"}),ticktext:u({},o.ticktext,{editType:"plot"}),tickformat:u({},o.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:u({editType:"calc"},a("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(r,n,i){"use strict";var a=i(25706),o=i(39898),s=i(28984).keyFun,l=i(28984).repeat,u=i(71828).sorterAsc,c=i(71828).strTranslate,f=a.bar.snapRatio,h=a.bar.snapClose;function p(r,n,i,a){if(function(r,n){for(var i=0;i<n.length;i++)if(r>=n[i][0]&&r<=n[i][1])return!0;return!1}(i,a))return i;var o=r?-1:1,s=0,l=n.length-1;if(o<0){var u=s;s=l,l=u}for(var c=n[s],p=c,d=s;o*d<o*l;d+=o){var v=d+o,g=n[v];if(o*i<o*(c*(1-h)+g*h))return c*(1-f)+p*f;if(o*i<o*g||v===l)return g*(1-f)+c*f;p=c,c=g}}function d(r){r.attr("x",-a.bar.captureWidth/2).attr("width",a.bar.captureWidth)}function v(r){r.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function g(r){if(!r.brush.filterSpecified)return"0,"+r.height;for(var n,i,a,o=y(r.brush.filter.getConsolidated(),r.height),s=[0],l=o.length?o[0][0]:null,u=0;u<o.length;u++)i=(n=o[u])[1]-n[0],s.push(l),s.push(i),(a=u+1)<o.length&&(l=o[a][0]-n[1]);return s.push(r.height),s}function y(r,n){return r.map(function(r){return r.map(function(r){return Math.max(0,r*n)}).sort(u)})}function m(){o.select(document.body).style("cursor",null)}function x(r){r.attr("stroke-dasharray",g)}function b(r,n){var i=o.select(r).selectAll(".highlight, .highlight-shadow");x(n?i.transition().duration(a.bar.snapDuration).each("end",n):i)}function _(r,n){var i,o=r.brush,s=NaN,l={};if(o.filterSpecified){var u=r.height,c=o.filter.getConsolidated(),f=y(c,u),h=NaN,p=NaN,d=NaN;for(i=0;i<=f.length;i++){var v=f[i];if(v&&v[0]<=n&&n<=v[1]){h=i;break}if(p=i?i-1:NaN,v&&v[0]>n){d=i;break}}if(isNaN(s=h)&&(s=isNaN(p)||isNaN(d)?isNaN(p)?d:p:n-f[p][1]<f[d][0]-n?p:d),!isNaN(s)){var g=f[s],m=function(r,n){var i=a.bar.handleHeight;if(!(n>r[1]+i||n<r[0]-i))return n>=.9*r[1]+.1*r[0]?"n":n<=.9*r[0]+.1*r[1]?"s":"ns"}(g,n);m&&(l.interval=c[s],l.intervalPix=g,l.region=m)}}if(r.ordinal&&!l.region){var x=r.unitTickvals,b=r.unitToPaddedPx.invert(n);for(i=0;i<x.length;i++){var _=[.25*x[Math.max(i-1,0)]+.75*x[i],.25*x[Math.min(i+1,x.length-1)]+.75*x[i]];if(b>=_[0]&&b<=_[1]){l.clickableOrdinalRange=_;break}}}return l}function w(r,n){o.event.sourceEvent.stopPropagation();var i=n.height-o.mouse(r)[1]-2*a.verticalPadding,s=n.brush.svgBrush;s.wasDragged=!0,s._dragging=!0,s.grabbingBar?s.newExtent=[i-s.grabPoint,i+s.barLength-s.grabPoint].map(n.unitToPaddedPx.invert):s.newExtent=[s.startExtent,n.unitToPaddedPx.invert(i)].sort(u),n.brush.filterSpecified=!0,s.extent=s.stayingIntervals.concat([s.newExtent]),s.brushCallback(n),b(r.parentNode)}function T(r,n){var i=_(n,n.height-o.mouse(r)[1]-2*a.verticalPadding),s="crosshair";i.clickableOrdinalRange?s="pointer":i.region&&(s=i.region+"-resize"),o.select(document.body).style("cursor",s)}function k(r){r.on("mousemove",function(r){o.event.preventDefault(),r.parent.inBrushDrag||T(this,r)}).on("mouseleave",function(r){r.parent.inBrushDrag||m()}).call(o.behavior.drag().on("dragstart",function(r){!function(r,n){o.event.sourceEvent.stopPropagation();var i=n.height-o.mouse(r)[1]-2*a.verticalPadding,s=n.unitToPaddedPx.invert(i),l=n.brush,u=_(n,i),c=u.interval,f=l.svgBrush;if(f.wasDragged=!1,f.grabbingBar="ns"===u.region,f.grabbingBar){var h=c.map(n.unitToPaddedPx);f.grabPoint=i-h[0]-a.verticalPadding,f.barLength=h[1]-h[0]}f.clickableOrdinalRange=u.clickableOrdinalRange,f.stayingIntervals=n.multiselect&&l.filterSpecified?l.filter.getConsolidated():[],c&&(f.stayingIntervals=f.stayingIntervals.filter(function(r){return r[0]!==c[0]&&r[1]!==c[1]})),f.startExtent=u.region?c["s"===u.region?1:0]:s,n.parent.inBrushDrag=!0,f.brushStartCallback()}(this,r)}).on("drag",function(r){w(this,r)}).on("dragend",function(r){!function(r,n){var i=n.brush,a=i.filter,s=i.svgBrush;s._dragging||(T(r,n),w(r,n),n.brush.svgBrush.wasDragged=!1),s._dragging=!1,o.event.sourceEvent.stopPropagation();var l=s.grabbingBar;if(s.grabbingBar=!1,s.grabLocation=void 0,n.parent.inBrushDrag=!1,m(),!s.wasDragged)return s.wasDragged=void 0,s.clickableOrdinalRange?i.filterSpecified&&n.multiselect?s.extent.push(s.clickableOrdinalRange):(s.extent=[s.clickableOrdinalRange],i.filterSpecified=!0):l?(s.extent=s.stayingIntervals,0===s.extent.length&&M(i)):M(i),s.brushCallback(n),b(r.parentNode),void s.brushEndCallback(i.filterSpecified?a.getConsolidated():[]);var u=function(){a.set(a.getConsolidated())};if(n.ordinal){var c=n.unitTickvals;c[c.length-1]<c[0]&&c.reverse(),s.newExtent=[p(0,c,s.newExtent[0],s.stayingIntervals),p(1,c,s.newExtent[1],s.stayingIntervals)];var f=s.newExtent[1]>s.newExtent[0];s.extent=s.stayingIntervals.concat(f?[s.newExtent]:[]),s.extent.length||M(i),s.brushCallback(n),f?b(r.parentNode,u):(u(),b(r.parentNode))}else u();s.brushEndCallback(i.filterSpecified?a.getConsolidated():[])}(this,r)}))}function A(r,n){return r[0]-n[0]}function M(r){r.filterSpecified=!1,r.svgBrush.extent=[[-1/0,1/0]]}function S(r){for(var n,i=r.slice(),a=[],o=i.shift();o;){for(n=o.slice();(o=i.shift())&&o[0]<=n[1];)n[1]=Math.max(n[1],o[1]);a.push(n)}return 1===a.length&&a[0][0]>a[0][1]&&(a=[]),a}r.exports={makeBrush:function(r,n,i,a,o,s){var l,c,f,h=(f=[],{set:function(r){1===(f=r.map(function(r){return r.slice().sort(u)}).sort(A)).length&&f[0][0]===-1/0&&f[0][1]===1/0&&(f=[[0,-1]]),l=S(f),c=f.reduce(function(r,n){return[Math.min(r[0],n[0]),Math.max(r[1],n[1])]},[1/0,-1/0])},get:function(){return f.slice()},getConsolidated:function(){return l},getBounds:function(){return c}});return h.set(i),{filter:h,filterSpecified:n,svgBrush:{extent:[],brushStartCallback:a,brushCallback:function(r){var n=r.brush,i=n.svgBrush.extent.map(function(r){return r.slice()}).slice();n.filter.set(i),o()},brushEndCallback:s}}},ensureAxisBrush:function(r,n,i){var o,u,f,h,p=r.selectAll("."+a.cn.axisBrush).data(l,s);p.enter().append("g").classed(a.cn.axisBrush,!0),o=i._context.staticPlot,(u=p.selectAll(".background").data(l)).enter().append("rect").classed("background",!0).call(d).call(v).style("pointer-events",o?"none":"auto").attr("transform",c(0,a.verticalPadding)),u.call(k).attr("height",function(r){return r.height-a.verticalPadding}),(f=p.selectAll(".highlight-shadow").data(l)).enter().append("line").classed("highlight-shadow",!0).attr("x",-a.bar.width/2).attr("stroke-width",a.bar.width+a.bar.strokeWidth).attr("stroke",n).attr("opacity",a.bar.strokeOpacity).attr("stroke-linecap","butt"),f.attr("y1",function(r){return r.height}).call(x),(h=p.selectAll(".highlight").data(l)).enter().append("line").classed("highlight",!0).attr("x",-a.bar.width/2).attr("stroke-width",a.bar.width-a.bar.strokeWidth).attr("stroke",a.bar.fillColor).attr("opacity",a.bar.fillOpacity).attr("stroke-linecap","butt"),h.attr("y1",function(r){return r.height}).call(x)},cleanRanges:function(r,n){if(Array.isArray(r[0])?(r=r.map(function(r){return r.sort(u)}),r=n.multiselect?S(r.sort(A)):[r[0]]):r=[r.sort(u)],n.tickvals){var i=n.tickvals.slice().sort(u);if(!(r=r.map(function(r){var n=[p(0,i,r[0],[]),p(1,i,r[1],[])];if(n[1]>n[0])return n}).filter(function(r){return r})).length)return}return r.length>1?r:r[0]}}},71791:function(r,n,i){"use strict";r.exports={attributes:i(73362),supplyDefaults:i(3633),calc:i(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:i(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(r,n,i){"use strict";var a=i(39898),o=i(27659).a0,s=i(21341),l=i(77922);n.name="parcoords",n.plot=function(r){var n=o(r.calcdata,"parcoords")[0];n.length&&s(r,n)},n.clean=function(r,n,i,a){var o=a._has&&a._has("parcoords"),s=n._has&&n._has("parcoords");o&&!s&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},n.toSVG=function(r){var n=r._fullLayout._glimages,i=a.select(r).selectAll(".svg-container");i.filter(function(r,n){return n===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var r=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:l.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){a.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(r,n,i){"use strict";var a=i(71828).isArrayOrTypedArray,o=i(21081),s=i(28984).wrap;r.exports=function(r,n){var i,l;return o.hasColorscale(n,"line")&&a(n.line.color)?(i=n.line.color,l=o.extractOpts(n.line).colorscale,o.calc(r,n,{vals:i,containerStr:"line",cLetter:"c"})):(i=function(r){for(var n=Array(r),i=0;i<r;i++)n[i]=.5;return n}(n._length),l=[[0,n.line.color],[1,n.line.color]]),s({lineColor:i,cscale:l})}},25706:function(r){"use strict";r.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(r,n,i){"use strict";var a=i(71828),o=i(52075).hasColorscale,s=i(1586),l=i(27670).c,u=i(85501),c=i(89298),f=i(73362),h=i(57920),p=i(25706).maxDimensionCount,d=i(94397);function v(r,n,i,o){function s(i,o){return a.coerce(r,n,f.dimensions,i,o)}var l=s("values"),u=s("visible");if(l&&l.length||(u=n.visible=!1),u){s("label"),s("tickvals"),s("ticktext"),s("tickformat");var p=s("range");n._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:p},c.setConvert(n._ax,o.layout),s("multiselect");var d=s("constraintrange");d&&(n.constraintrange=h.cleanRanges(d,n))}}r.exports=function(r,n,i,c){function h(i,o){return a.coerce(r,n,f,i,o)}var g=r.dimensions;Array.isArray(g)&&g.length>p&&(a.log("parcoords traces support up to "+p+" dimensions at the moment"),g.splice(p));var y=u(r,n,{name:"dimensions",layout:c,handleItemDefaults:v}),m=function(r,n,i,l,u){var c=u("line.color",i);if(o(r,"line")&&a.isArrayOrTypedArray(c)){if(c.length)return u("line.colorscale"),s(r,n,l,u,{prefix:"line.",cLetter:"c"}),c.length;n.line.color=i}return 1/0}(r,n,i,c,h);l(n,c,h),Array.isArray(y)&&y.length||(n.visible=!1),d(n,y,"values",m);var x={family:c.font.family,size:Math.round(c.font.size/1.2),color:c.font.color};a.coerceFont(h,"labelfont",x),a.coerceFont(h,"tickfont",x),a.coerceFont(h,"rangefont",x),h("labelangle"),h("labelside"),h("unselected.line.color"),h("unselected.line.opacity")}},1602:function(r,n,i){"use strict";var a=i(71828).isTypedArray;n.convertTypedArray=function(r){return a(r)?Array.prototype.slice.call(r):r},n.isOrdinal=function(r){return!!r.tickvals},n.isVisible=function(r){return r.visible||!("visible"in r)}},67618:function(r,n,i){"use strict";var a=i(71791);a.plot=i(21341),r.exports=a},83398:function(r,n,i){"use strict";var a=i(56068),o=a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),s=a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),l=i(25706).maxDimensionCount,u=i(71828),c=new Uint8Array(4),f=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function p(r,n,i,a,o){var s=r._gl;s.enable(s.SCISSOR_TEST),s.scissor(n,i,a,o),r.clear({color:[0,0,0,0],depth:1})}function d(r,n){return(r>>>8*n)%256/255}function v(r){var n="0"+r;return n.substr(n.length-2)}function g(r){return r<l?"p"+v(r+1)+"_"+v(r+4):"colors"}function y(r){var n=Math.max(0,Math.floor(2047*r[0]),0),i=Math.min(2047,Math.ceil(2047*r[1]),2047);return[Math.min(n,i),Math.max(n,i)]}r.exports=function(r,n){var i,a,v,m,x=n.context,b=n.pick,_=n.regl,w=_._gl,T=w.getParameter(w.ALIASED_LINE_WIDTH_RANGE),k=Math.max(T[0],Math.min(T[1],n.viewModel.plotGlPixelRatio)),A={currentRafs:{},drawCompleted:!0,clearOnly:!1},M=function(r){for(var n={},i=0;i<=l;i+=4)n[g(i)]=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return n}(_),S=_.texture(h),E=[];C(n);var L=_({profile:!1,blend:{enable:x,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!x,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:_.prop("scissorX"),y:_.prop("scissorY"),width:_.prop("scissorWidth"),height:_.prop("scissorHeight")}},viewport:{x:_.prop("viewportX"),y:_.prop("viewportY"),width:_.prop("viewportWidth"),height:_.prop("viewportHeight")},dither:!1,vert:o,frag:s,primitive:"lines",lineWidth:k,attributes:M,uniforms:{resolution:_.prop("resolution"),viewBoxPos:_.prop("viewBoxPos"),viewBoxSize:_.prop("viewBoxSize"),dim0A:_.prop("dim0A"),dim1A:_.prop("dim1A"),dim0B:_.prop("dim0B"),dim1B:_.prop("dim1B"),dim0C:_.prop("dim0C"),dim1C:_.prop("dim1C"),dim0D:_.prop("dim0D"),dim1D:_.prop("dim1D"),loA:_.prop("loA"),hiA:_.prop("hiA"),loB:_.prop("loB"),hiB:_.prop("hiB"),loC:_.prop("loC"),hiC:_.prop("hiC"),loD:_.prop("loD"),hiD:_.prop("hiD"),palette:S,contextColor:_.prop("contextColor"),maskTexture:_.prop("maskTexture"),drwLayer:_.prop("drwLayer"),maskHeight:_.prop("maskHeight")},offset:_.prop("offset"),count:_.prop("count")});function C(r){i=r.model,v=(a=r.viewModel.dimensions.slice())[0]?a[0].values.length:0;var n=i.lines,o=b?n.color.map(function(r,i){return i/n.color.length}):n.color,s=function(r,n,i){for(var a=Array(r*(l+4)),o=0,s=0;s<r;s++){for(var u=0;u<l;u++)a[o++]=u<n.length?n[u].paddedUnitValues[s]:.5;a[o++]=d(s,2),a[o++]=d(s,1),a[o++]=d(s,0),a[o++]=Math.max(1e-6,Math.min(.999999,i[s]))}return a}(v,a,o);(function(r,n,i){for(var a=0;a<=l;a+=4)r[g(a)](function(r,n,i){for(var a=Array(8*n),o=0,s=0;s<n;s++)for(var l=0;l<2;l++)for(var u=0;u<4;u++){var c=4*r+u,f=i[64*s+c];63===c&&0===l&&(f*=-1),a[o++]=f}return a}(a/4,n,i))})(M,v,s),x||b||(S=_.texture(u.extendFlat({data:function(r,n){for(var i=Array(256),a=0;a<256;a++)i[a]=r(a/255).concat(255);return i}(i.unitToColor,0)},h)))}return{render:function(r,n,o){var s,l,f,h=r.length,d=1/0,g=-1/0;for(s=0;s<h;s++)r[s].dim0.canvasX<d&&(d=r[s].dim0.canvasX,l=s),r[s].dim1.canvasX>g&&(g=r[s].dim1.canvasX,f=s);0===h&&p(_,0,0,i.canvasWidth,i.canvasHeight);var w=function(r){var n,i,o,s=[[],[]];for(o=0;o<64;o++){var l=!r&&o<a.length?a[o].brush.filter.getBounds():[-1/0,1/0];s[0][o]=l[0],s[1][o]=l[1]}var u=Array(16384);for(n=0;n<16384;n++)u[n]=255;if(!r)for(n=0;n<a.length;n++){var c=n%8,f=(n-c)/8,h=Math.pow(2,c),p=a[n].brush.filter.get();if(!(p.length<2)){var d=y(p[0])[1];for(i=1;i<p.length;i++){var v=y(p[i]);for(o=d+1;o<v[0];o++)u[8*o+f]&=~h;d=Math.max(d,v[1])}}}var g={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:u};return m?m(g):m=_.texture(g),{maskTexture:m,maskHeight:2048,loA:s[0].slice(0,16),loB:s[0].slice(16,32),loC:s[0].slice(32,48),loD:s[0].slice(48,64),hiA:s[1].slice(0,16),hiB:s[1].slice(16,32),hiC:s[1].slice(32,48),hiD:s[1].slice(48,64)}}(x);for(s=0;s<h;s++){var T=r[s],k=T.dim0.crossfilterDimensionIndex,M=T.dim1.crossfilterDimensionIndex,S=T.canvasX,C=T.canvasY,O=S+T.panelSizeX,P=T.plotGlPixelRatio;if(n||!E[k]||E[k][0]!==S||E[k][1]!==O){E[k]=[S,O];var I=function(r,n,i,a,o,s,l,c,f,h,p,d,v,g){for(var y=[[],[]],m=0;m<64;m++)y[0][m]=m===o?1:0,y[1][m]=m===s?1:0;l*=g,c*=g,f*=g,h*=g;var x=r.lines.canvasOverdrag*g,b=r.domain,_=r.canvasWidth*g,w=r.canvasHeight*g,T=r.pad.l*g,k=r.pad.b*g,A=r.layoutHeight*g,M=r.layoutWidth*g,S=r.deselectedLines.color,E=r.deselectedLines.opacity;return u.extendFlat({key:p,resolution:[_,w],viewBoxPos:[l+x,c],viewBoxSize:[f,h],i0:o,i1:s,dim0A:y[0].slice(0,16),dim0B:y[0].slice(16,32),dim0C:y[0].slice(32,48),dim0D:y[0].slice(48,64),dim1A:y[1].slice(0,16),dim1B:y[1].slice(16,32),dim1C:y[1].slice(32,48),dim1D:y[1].slice(48,64),drwLayer:d,contextColor:[S[0]/255,S[1]/255,S[2]/255,"auto"!==E?S[3]*E:Math.max(1/255,Math.pow(1/r.lines.color.length,1/3))],scissorX:(a===n?0:l+x)+(T-x)+M*b.x[0],scissorWidth:(a===i?_-l+x:f+.5)+(a===n?l+x:0),scissorY:c+k+A*b.y[0],scissorHeight:h,viewportX:T-x+M*b.x[0],viewportY:k+A*b.y[0],viewportWidth:_,viewportHeight:w},v)}(i,l,f,s,k,M,S,C,T.panelSizeX,T.panelSizeY,T.dim0.crossfilterDimensionIndex,x?0:b?2:1,w,P);A.clearOnly=o,function(r,n,i,a,o,s){var l=s.key;i.drawCompleted||(function(r){r.read({x:0,y:0,width:1,height:1,data:c})}(r),i.drawCompleted=!0),function u(c){var f=Math.min(a,o-c*a);0===c&&(window.cancelAnimationFrame(i.currentRafs[l]),delete i.currentRafs[l],p(r,s.scissorX,s.scissorY,s.scissorWidth,s.viewBoxSize[1])),i.clearOnly||(s.count=2*f,s.offset=2*c*a,n(s),c*a+f<o&&(i.currentRafs[l]=window.requestAnimationFrame(function(){u(c+1)})),i.drawCompleted=!1)}(0)}(_,L,A,n?i.lines.blockLineCount:v,v,I)}}},readPixel:function(r,n){return _.read({x:r,y:n,width:1,height:1,data:f}),f},readPixels:function(r,n,i,a){var o=new Uint8Array(4*i*a);return _.read({x:r,y:n,width:i,height:a,data:o}),o},destroy:function(){for(var n in r.style["pointer-events"]="none",S.destroy(),m&&m.destroy(),M)M[n].destroy()},update:C}}},94397:function(r){"use strict";r.exports=function(r,n,i,a){var o,s;for(a||(a=1/0),o=0;o<n.length;o++)(s=n[o]).visible&&(a=Math.min(a,s[i].length));for(a===1/0&&(a=0),r._length=a,o=0;o<n.length;o++)(s=n[o]).visible&&(s._length=a);return a}},17171:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=o.isArrayOrTypedArray,l=o.numberFormat,u=i(36652),c=i(89298),f=o.strRotate,h=o.strTranslate,p=i(63893),d=i(91424),v=i(21081),g=i(28984),y=g.keyFun,m=g.repeat,x=g.unwrap,b=i(1602),_=i(25706),w=i(57920),T=i(83398);function k(r,n,i){return o.aggNums(r,null,n,i)}function A(r,n){return S(k(Math.min,r,n),k(Math.max,r,n))}function M(r){var n=r.range;return n?S(n[0],n[1]):A(r.values,r._length)}function S(r,n){return!isNaN(r)&&isFinite(r)||(r=0),!isNaN(n)&&isFinite(n)||(n=0),r===n&&(0===r?(r-=1,n+=1):(r*=.9,n*=1.1)),[r,n]}function E(r){return r.dimensions.some(function(r){return r.brush.filterSpecified})}function L(r,n,i){var s,l,c,f=x(n),h=f.trace,p=b.convertTypedArray(f.lineColor),d=h.line,g={color:u(h.unselected.line.color),opacity:h.unselected.line.opacity},y=v.extractOpts(d),m=y.reversescale?v.flipScale(f.cscale):f.cscale,w=h.domain,T=h.dimensions,k=r.width,A=h.labelangle,S=h.labelside,E=h.labelfont,L=h.tickfont,C=h.rangefont,O=o.extendDeepNoArrays({},d,{color:p.map(a.scale.linear().domain(M({values:p,range:[y.min,y.max],_length:h._length}))),blockLineCount:_.blockLineCount,canvasOverdrag:_.overdrag*_.canvasPixelRatio}),P=Math.floor(k*(w.x[1]-w.x[0])),I=Math.floor(r.height*(w.y[1]-w.y[0])),D=r.margin||{l:80,r:80,t:100,b:80};return{key:i,colCount:T.filter(b.isVisible).length,dimensions:T,tickDistance:_.tickDistance,unitToColor:(s=m.map(function(r){return r[0]}),l=m.map(function(r){var n=u(r[1]);return a.rgb("rgb("+n[0]+","+n[1]+","+n[2]+")")}),c="rgb".split("").map(function(r){return a.scale.linear().clamp(!0).domain(s).range(l.map(function(n){return n[r]}))}),function(r){return c.map(function(n){return n(r)})}),lines:O,deselectedLines:g,labelAngle:A,labelSide:S,labelFont:E,tickFont:L,rangeFont:C,layoutWidth:k,layoutHeight:r.height,domain:w,translateX:w.x[0]*k,translateY:r.height-w.y[1]*r.height,pad:D,canvasWidth:P*_.canvasPixelRatio+2*O.canvasOverdrag,canvasHeight:I*_.canvasPixelRatio,width:P,height:I,canvasPixelRatio:_.canvasPixelRatio}}function C(r,n,i){var u,c=i.width,f=i.height,h=i.dimensions,p=i.canvasPixelRatio,d=function(r){return c*r/Math.max(1,i.colCount-1)},v=_.verticalPadding/f,g=(u=_.verticalPadding,a.scale.linear().range([u,f-u])),y={key:i.key,xScale:d,model:i,inBrushDrag:!1},m={};return y.dimensions=h.filter(b.isVisible).map(function(u,c){var h,x,T,k,A,S=a.scale.linear().domain(M(u)).range([v,1-v]),L=m[u.label];m[u.label]=(L||0)+1;var C=u.label+(L?"__"+L:""),O=u.constraintrange,P=O&&O.length;P&&!s(O[0])&&(O=[O]);var I=P?O.map(function(r){return r.map(S)}):[[-1/0,1/0]],D=u.values;D.length>u._length&&(D=D.slice(0,u._length));var z,R=u.tickvals;function F(r,n){return{val:r,text:z[n]}}function B(r,n){return r.val-n.val}if(s(R)&&R.length){o.isTypedArray(R)&&(R=Array.from(R)),s(z=u.ticktext)&&z.length?z.length>R.length?z=z.slice(0,R.length):R.length>z.length&&(R=R.slice(0,z.length)):z=R.map(l(u.tickformat));for(var N=1;N<R.length;N++)if(R[N]<R[N-1]){for(var j=R.map(F).sort(B),U=0;U<R.length;U++)R[U]=j[U].val,z[U]=j[U].text;break}}else R=void 0;return D=b.convertTypedArray(D),{key:C,label:u.label,tickFormat:u.tickformat,tickvals:R,ticktext:z,ordinal:b.isOrdinal(u),multiselect:u.multiselect,xIndex:c,crossfilterDimensionIndex:c,visibleIndex:u._index,height:f,values:D,paddedUnitValues:D.map(S),unitTickvals:R&&R.map(S),xScale:d,x:d(c),canvasX:d(c)*p,unitToPaddedPx:g,domainScale:(h=_.verticalPadding,x=R,T=z,A=M(u),x?a.scale.ordinal().domain(x.map((k=l(u.tickformat),T?function(r,n){var i=T[n];return null==i?k(r):i}:k))).range(x.map(function(r){return f-h+(r-A[0])/(A[1]-A[0])*(2*h-f)})):a.scale.linear().domain(A).range([f-h,h])),ordinalScale:function(r){if(r.tickvals){var n=M(r);return a.scale.ordinal().domain(r.tickvals).range(r.tickvals.map(function(r){return(r-n[0])/(n[1]-n[0])}))}}(u),parent:y,model:i,brush:w.makeBrush(r,P,I,function(){r.linePickActive(!1)},function(){y.focusLayer&&y.focusLayer.render(y.panels,!0);var n=E(y);!r.contextShown()&&n?(y.contextLayer&&y.contextLayer.render(y.panels,!0),r.contextShown(!0)):r.contextShown()&&!n&&(y.contextLayer&&y.contextLayer.render(y.panels,!0,!0),r.contextShown(!1))},function(i){if(y.focusLayer.render(y.panels,!0),y.pickLayer&&y.pickLayer.render(y.panels,!0),r.linePickActive(!0),n&&n.filterChanged){var a=S.invert,s=i.map(function(r){return r.map(a).sort(o.sorterAsc)}).sort(function(r,n){return r[0]-n[0]});n.filterChanged(y.key,u._index,s)}})}}),y}function O(r){r.classed(_.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(r,n){var i=r*Math.PI/180;return{dir:"top"===n?1:-1,dx:Math.sin(i),dy:Math.cos(i),degrees:r}}function I(r,n,i){for(var a=n.panels||(n.panels=[]),o=r.data(),s=0;s<o.length-1;s++){var l=a[s]||(a[s]={}),u=o[s],c=o[s+1];l.dim0=u,l.dim1=c,l.canvasX=u.canvasX,l.panelSizeX=c.canvasX-u.canvasX,l.panelSizeY=n.model.canvasHeight,l.y=0,l.canvasY=0,l.plotGlPixelRatio=i}}function D(r,n){return c.tickText(r._ax,n,!1).text}function z(r,n){if(r.ordinal)return"";var i=r.domainScale.domain(),a=i[n?i.length-1:0];return D(r.model.dimensions[r.visibleIndex],a)}r.exports=function(r,n,i,s){var l=r._context.staticPlot,u=r._fullLayout,v=u._toppaper,g=u._glcontainer,k=r._context.plotGlPixelRatio,M=r._fullLayout.paper_bgcolor;!function(r){for(var n=0;n<r.length;n++)for(var i=0;i<r[n].length;i++)for(var a=r[n][i].trace,o=a.dimensions,s=0;s<o.length;s++){var l=o[s].values,u=o[s]._ax;u&&(u.range?u.range=S(u.range[0],u.range[1]):u.range=A(l,a._length),u.dtick||(u.dtick=.01*(Math.abs(u.range[1]-u.range[0])||1)),u.tickformat=o[s].tickformat,c.calcTicks(u),u.cleanRange())}}(n);var R,F,B=(R=!0,F=!1,{linePickActive:function(r){return arguments.length?R=!!r:R},contextShown:function(r){return arguments.length?F=!!r:F}}),N=n.filter(function(r){return x(r).trace.visible}).map(L.bind(0,i)).map(C.bind(0,B,s));g.each(function(r,n){return o.extendFlat(r,N[n])});var j=g.selectAll(".gl-canvas").each(function(r){r.viewModel=N[0],r.viewModel.plotGlPixelRatio=k,r.viewModel.paperColor=M,r.model=r.viewModel?r.viewModel.model:null}),U=null;j.filter(function(r){return r.pick}).style("pointer-events",l?"none":"auto").on("mousemove",function(r){if(B.linePickActive()&&r.lineLayer&&s&&s.hover){var n=a.event,i=this.width,o=this.height,l=a.mouse(this),u=l[0],c=l[1];if(!(u<0)&&!(c<0)&&!(u>=i)&&!(c>=o)){var f=r.lineLayer.readPixel(u,o-1-c),h=0!==f[3],p=h?f[2]+256*(f[1]+256*f[0]):null,d={x:u,y:c,clientX:n.clientX,clientY:n.clientY,dataIndex:r.model.key,curveNumber:p};p!==U&&(h?s.hover(d):s.unhover&&s.unhover(d),U=p)}}}),j.style("opacity",function(r){return r.pick?0:1}),v.style("background","rgba(255, 255, 255, 0)");var V=v.selectAll("."+_.cn.parcoords).data(N,y);V.exit().remove(),V.enter().append("g").classed(_.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),V.attr("transform",function(r){return h(r.model.translateX,r.model.translateY)});var H=V.selectAll("."+_.cn.parcoordsControlView).data(m,y);H.enter().append("g").classed(_.cn.parcoordsControlView,!0),H.attr("transform",function(r){return h(r.model.pad.l,r.model.pad.t)});var q=H.selectAll("."+_.cn.yAxis).data(function(r){return r.dimensions},y);q.enter().append("g").classed(_.cn.yAxis,!0),H.each(function(r){I(q,r,k)}),j.each(function(r){if(r.viewModel){!r.lineLayer||s?r.lineLayer=T(this,r):r.lineLayer.update(r),(r.key||0===r.key)&&(r.viewModel[r.key]=r.lineLayer);var n=!r.context||s;r.lineLayer.render(r.viewModel.panels,n)}}),q.attr("transform",function(r){return h(r.xScale(r.xIndex),0)}),q.call(a.behavior.drag().origin(function(r){return r}).on("drag",function(r){var n=r.parent;B.linePickActive(!1),r.x=Math.max(-_.overdrag,Math.min(r.model.width+_.overdrag,a.event.x)),r.canvasX=r.x*r.model.canvasPixelRatio,q.sort(function(r,n){return r.x-n.x}).each(function(n,i){n.xIndex=i,n.x=r===n?n.x:n.xScale(n.xIndex),n.canvasX=n.x*n.model.canvasPixelRatio}),I(q,n,k),q.filter(function(n){return 0!==Math.abs(r.xIndex-n.xIndex)}).attr("transform",function(r){return h(r.xScale(r.xIndex),0)}),a.select(this).attr("transform",h(r.x,0)),q.each(function(i,a,o){o===r.parent.key&&(n.dimensions[a]=i)}),n.contextLayer&&n.contextLayer.render(n.panels,!1,!E(n)),n.focusLayer.render&&n.focusLayer.render(n.panels)}).on("dragend",function(r){var n=r.parent;r.x=r.xScale(r.xIndex),r.canvasX=r.x*r.model.canvasPixelRatio,I(q,n,k),a.select(this).attr("transform",function(r){return h(r.x,0)}),n.contextLayer&&n.contextLayer.render(n.panels,!1,!E(n)),n.focusLayer&&n.focusLayer.render(n.panels),n.pickLayer&&n.pickLayer.render(n.panels,!0),B.linePickActive(!0),s&&s.axesMoved&&s.axesMoved(n.key,n.dimensions.map(function(r){return r.crossfilterDimensionIndex}))})),q.exit().remove();var G=q.selectAll("."+_.cn.axisOverlays).data(m,y);G.enter().append("g").classed(_.cn.axisOverlays,!0),G.selectAll("."+_.cn.axis).remove();var Z=G.selectAll("."+_.cn.axis).data(m,y);Z.enter().append("g").classed(_.cn.axis,!0),Z.each(function(r){var n=r.model.height/r.model.tickDistance,i=r.domainScale,o=i.domain();a.select(this).call(a.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(n,r.tickFormat).tickValues(r.ordinal?o:null).tickFormat(function(n){return b.isOrdinal(r)?n:D(r.model.dimensions[r.visibleIndex],n)}).scale(i)),d.font(Z.selectAll("text"),r.model.tickFont)}),Z.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Z.selectAll("text").style("text-shadow",p.makeTextShadow(M)).style("cursor","default");var Y=G.selectAll("."+_.cn.axisHeading).data(m,y);Y.enter().append("g").classed(_.cn.axisHeading,!0);var W=Y.selectAll("."+_.cn.axisTitle).data(m,y);W.enter().append("text").classed(_.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",l?"none":"auto"),W.text(function(r){return r.label}).each(function(n){var i=a.select(this);d.font(i,n.model.labelFont),p.convertToTspans(i,r)}).attr("transform",function(r){var n=P(r.model.labelAngle,r.model.labelSide),i=_.axisTitleOffset;return(n.dir>0?"":h(0,2*i+r.model.height))+f(n.degrees)+h(-i*n.dx,-i*n.dy)}).attr("text-anchor",function(r){var n=P(r.model.labelAngle,r.model.labelSide);return 2*Math.abs(n.dx)>Math.abs(n.dy)?n.dir*n.dx<0?"start":"end":"middle"});var X=G.selectAll("."+_.cn.axisExtent).data(m,y);X.enter().append("g").classed(_.cn.axisExtent,!0);var J=X.selectAll("."+_.cn.axisExtentTop).data(m,y);J.enter().append("g").classed(_.cn.axisExtentTop,!0),J.attr("transform",h(0,-_.axisExtentOffset));var K=J.selectAll("."+_.cn.axisExtentTopText).data(m,y);K.enter().append("text").classed(_.cn.axisExtentTopText,!0).call(O),K.text(function(r){return z(r,!0)}).each(function(r){d.font(a.select(this),r.model.rangeFont)});var $=X.selectAll("."+_.cn.axisExtentBottom).data(m,y);$.enter().append("g").classed(_.cn.axisExtentBottom,!0),$.attr("transform",function(r){return h(0,r.model.height+_.axisExtentOffset)});var Q=$.selectAll("."+_.cn.axisExtentBottomText).data(m,y);Q.enter().append("text").classed(_.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),Q.text(function(r){return z(r,!1)}).each(function(r){d.font(a.select(this),r.model.rangeFont)}),w.ensureAxisBrush(G,M,r)}},21341:function(r,n,i){"use strict";var a=i(17171),o=i(79749),s=i(1602).isVisible,l={};function u(r,n,i){var a=n.indexOf(i),o=r.indexOf(a);return -1===o&&(o+=n.length),o}(r.exports=function(r,n){var i=r._fullLayout;if(o(r,[],l)){var c={},f={},h={},p={},d=i._size;n.forEach(function(n,i){var a=n[0].trace;h[i]=a.index;var o=p[i]=a._fullInput.index;c[i]=r.data[o].dimensions,f[i]=r.data[o].dimensions.slice()}),a(r,n,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:function(n,a,o){var s=f[n][a],l=o.map(function(r){return r.slice()}),u="dimensions["+a+"].constraintrange",c=i._tracePreGUI[r._fullData[h[n]]._fullInput.uid];if(void 0===c[u]){var d=s.constraintrange;c[u]=d||null}var v=r._fullData[h[n]].dimensions[a];l.length?(1===l.length&&(l=l[0]),s.constraintrange=l,v.constraintrange=l.slice(),l=[l]):(delete s.constraintrange,delete v.constraintrange,l=null);var g={};g[u]=l,r.emit("plotly_restyle",[g,[p[n]]])},hover:function(n){r.emit("plotly_hover",n)},unhover:function(n){r.emit("plotly_unhover",n)},axesMoved:function(n,i){var a,o=(a=f[n].filter(s),function(r,n){return u(i,a,r)-u(i,a,n)});c[n].sort(o),f[n].filter(function(r){return!s(r)}).sort(function(r){return f[n].indexOf(r)}).forEach(function(r){c[n].splice(c[n].indexOf(r),1),c[n].splice(f[n].indexOf(r),0,r)}),r.emit("plotly_restyle",[{dimensions:[c[n]]},[p[n]]])}})}}).reglPrecompiled=l},34e3:function(r,n,i){"use strict";var a=i(9012),o=i(27670).Y,s=i(41940),l=i(22399),u=i(5386).fF,c=i(5386).si,f=i(1426).extendFlat,h=i(79952).u,p=s({editType:"plot",arrayOk:!0,colorEditType:"plot"});r.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:h,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:f({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:u({},{keys:["label","color","value","percent","text"]}),texttemplate:c({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:f({},p,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:f({},p,{}),outsidetextfont:f({},p,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:f({},p,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:o({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:f({},p,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(r,n,i){"use strict";var a=i(74875);n.name="pie",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},32354:function(r,n,i){"use strict";var a=i(92770),o=i(84267),s=i(7901),l={};function u(r){return function(n,i){return!!n&&!!(n=o(n)).isValid()&&(n=s.addOpacity(n,n.getAlpha()),r[i]||(r[i]=n),n)}}function c(r,n){var i,a=JSON.stringify(r),s=n[a];if(!s){for(s=r.slice(),i=0;i<r.length;i++)s.push(o(r[i]).lighten(20).toHexString());for(i=0;i<r.length;i++)s.push(o(r[i]).darken(20).toHexString());n[a]=s}return s}r.exports={calc:function(r,n){var i,o,s=[],l=r._fullLayout,c=l.hiddenlabels||[],f=n.labels,h=n.marker.colors||[],p=n.values,d=n._length,v=n._hasValues&&d;if(n.dlabel)for(f=Array(d),i=0;i<d;i++)f[i]=String(n.label0+i*n.dlabel);var g={},y=u(l["_"+n.type+"colormap"]),m=0,x=!1;for(i=0;i<d;i++){if(v){if(!a(b=p[i]))continue;b=+b}else b=1;void 0!==(_=f[i])&&""!==_||(_=i);var b,_,w,T=g[_=String(_)];void 0===T?(g[_]=s.length,(w=-1!==c.indexOf(_))||(m+=b),s.push({v:b,label:_,color:y(h[i],_),i:i,pts:[i],hidden:w})):(x=!0,(o=s[T]).v+=b,o.pts.push(i),o.hidden||(m+=b),!1===o.color&&h[i]&&(o.color=y(h[i],_)))}return s=s.filter(function(r){return r.v>=0}),("funnelarea"===n.type?x:n.sort)&&s.sort(function(r,n){return n.v-r.v}),s[0]&&(s[0].vTotal=m),s},crossTraceCalc:function(r,n){var i=(n||{}).type;i||(i="pie");var a=r._fullLayout,o=r.calcdata,s=a[i+"colorway"],u=a["_"+i+"colormap"];a["extend"+i+"colors"]&&(s=c(s,l));for(var f=0,h=0;h<o.length;h++){var p=o[h];if(p[0].trace.type===i)for(var d=0;d<p.length;d++){var v=p[d];!1===v.color&&(u[v.label]?v.color=u[v.label]:(u[v.label]=v.color=s[f%s.length],f++))}}},makePullColorFn:u,generateExtendedColors:c}},37434:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(34e3),l=i(27670).c,u=i(90769).handleText,c=i(71828).coercePattern;function f(r,n){var i=o.isArrayOrTypedArray(r),s=o.isArrayOrTypedArray(n),l=Math.min(i?r.length:1/0,s?n.length:1/0);if(isFinite(l)||(l=0),l&&s){for(var u,c=0;c<l;c++){var f=n[c];if(a(f)&&f>0){u=!0;break}}u||(l=0)}return{hasLabels:i,hasValues:s,len:l}}function h(r,n,i,a,o){a("marker.line.width")&&a("marker.line.color",o?void 0:i.paper_bgcolor);var s=a("marker.colors");c(a,"marker.pattern",s),r.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=r.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=i.paper_bgcolor)}r.exports={handleLabelsAndValues:f,handleMarkerDefaults:h,supplyDefaults:function(r,n,i,a){function c(i,a){return o.coerce(r,n,s,i,a)}var p=f(c("labels"),c("values")),d=p.len;if(n._hasLabels=p.hasLabels,n._hasValues=p.hasValues,!n._hasLabels&&n._hasValues&&(c("label0"),c("dlabel")),d){n._length=d,h(r,n,a,c,!0),c("scalegroup");var v,g=c("text"),y=c("texttemplate");if(y||(v=c("textinfo",o.isArrayOrTypedArray(g)?"text+percent":"percent")),c("hovertext"),c("hovertemplate"),y||v&&"none"!==v){var m=c("textposition");u(r,n,a,c,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&c("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&c("insidetextorientation")}l(n,a,c);var x=c("hole");if(c("title.text")){var b=c("title.position",x?"middle center":"top center");x||"middle center"!==b||(n.title.position="top center"),o.coerceFont(c,"title.font",a.font)}c("sort"),c("direction"),c("rotation"),c("pull")}else n.visible=!1}}},20007:function(r,n,i){"use strict";var a=i(23469).appendArrayMultiPointValues;r.exports=function(r,n){var i={curveNumber:n.index,pointNumbers:r.pts,data:n._input,fullData:n,label:r.label,color:r.color,value:r.v,percent:r.percent,text:r.text,bbox:r.bbox,v:r.v};return 1===r.pts.length&&(i.pointNumber=i.i=r.pts[0]),a(i,n,r.pts),"funnelarea"===n.type&&(delete i.v,delete i.i),i}},22209:function(r,n,i){"use strict";var a=i(91424),o=i(7901);r.exports=function(r,n,i,s){var l=i.marker.pattern;l&&l.shape?a.pointStyle(r,i,s,n):o.fill(r,n.color)}},53581:function(r,n,i){"use strict";var a=i(71828);function o(r){return -1!==r.indexOf("e")?r.replace(/[.]?0+e/,"e"):-1!==r.indexOf(".")?r.replace(/[.]?0+$/,""):r}n.formatPiePercent=function(r,n){var i=o((100*r).toPrecision(3));return a.numSeparate(i,n)+"%"},n.formatPieValue=function(r,n){var i=o(r.toPrecision(10));return a.numSeparate(i,n)},n.getFirstFilled=function(r,n){if(a.isArrayOrTypedArray(r))for(var i=0;i<n.length;i++){var o=r[n[i]];if(o||0===o||""===o)return o}},n.castOption=function(r,i){return a.isArrayOrTypedArray(r)?n.getFirstFilled(r,i):r||void 0},n.getRotationAngle=function(r){return("auto"===r?0:r)*Math.PI/180}},58810:function(r,n,i){"use strict";r.exports={attributes:i(34e3),supplyDefaults:i(37434).supplyDefaults,supplyLayoutDefaults:i(92097),layoutAttributes:i(92774),calc:i(32354).calc,crossTraceCalc:i(32354).crossTraceCalc,plot:i(14575).plot,style:i(68357),styleOne:i(63463),moduleType:"trace",name:"pie",basePlotModule:i(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(r){"use strict";r.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(r,n,i){"use strict";var a=i(71828),o=i(92774);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("hiddenlabels"),i("piecolorway",n.colorway),i("extendpiecolors")}},14575:function(r,n,i){"use strict";var a=i(39898),o=i(74875),s=i(30211),l=i(7901),u=i(91424),c=i(71828),f=c.strScale,h=c.strTranslate,p=i(63893),d=i(72597),v=d.recordMinTextSize,g=d.clearMinTextSize,y=i(97313).TEXTPAD,m=i(53581),x=i(20007),b=i(71828).isValidTextValue;function _(r,n,i){var o=i[0],l=o.cx,u=o.cy,f=o.trace,h="funnelarea"===f.type;"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),r.on("mouseover",function(r){var i=n._fullLayout,p=n._fullData[f.index];if(!n._dragging&&!1!==i.hovermode){var d=p.hoverinfo;if(Array.isArray(d)&&(d=s.castHoverinfo({hoverinfo:[m.castOption(d,r.pts)],_module:f._module},i,0)),"all"===d&&(d="label+text+value+percent+name"),p.hovertemplate||"none"!==d&&"skip"!==d&&d){var v=r.rInscribed||0,g=l+r.pxmid[0]*(1-v),y=u+r.pxmid[1]*(1-v),b=i.separators,_=[];if(d&&-1!==d.indexOf("label")&&_.push(r.label),r.text=m.castOption(p.hovertext||p.text,r.pts),d&&-1!==d.indexOf("text")){var w=r.text;c.isValidTextValue(w)&&_.push(w)}r.value=r.v,r.valueLabel=m.formatPieValue(r.v,b),d&&-1!==d.indexOf("value")&&_.push(r.valueLabel),r.percent=r.v/o.vTotal,r.percentLabel=m.formatPiePercent(r.percent,b),d&&-1!==d.indexOf("percent")&&_.push(r.percentLabel);var T=p.hoverlabel,k=T.font,A=[];s.loneHover({trace:f,x0:g-v*o.r,x1:g+v*o.r,y:y,_x0:h?l+r.TL[0]:g-v*o.r,_x1:h?l+r.TR[0]:g+v*o.r,_y0:h?u+r.TL[1]:y-v*o.r,_y1:h?u+r.BL[1]:y+v*o.r,text:_.join("<br>"),name:p.hovertemplate||-1!==d.indexOf("name")?p.name:void 0,idealAlign:r.pxmid[0]<0?"left":"right",color:m.castOption(T.bgcolor,r.pts)||r.color,borderColor:m.castOption(T.bordercolor,r.pts),fontFamily:m.castOption(k.family,r.pts),fontSize:m.castOption(k.size,r.pts),fontColor:m.castOption(k.color,r.pts),nameLength:m.castOption(T.namelength,r.pts),textAlign:m.castOption(T.align,r.pts),hovertemplate:m.castOption(p.hovertemplate,r.pts),hovertemplateLabels:r,eventData:[x(r,p)]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:n,inOut_bbox:A}),r.bbox=A[0],f._hasHoverLabel=!0}f._hasHoverEvent=!0,n.emit("plotly_hover",{points:[x(r,p)],event:a.event})}}),r.on("mouseout",function(r){var i=n._fullLayout,o=n._fullData[f.index],l=a.select(this).datum();f._hasHoverEvent&&(r.originalEvent=a.event,n.emit("plotly_unhover",{points:[x(l,o)],event:a.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(s.loneUnhover(i._hoverlayer.node()),f._hasHoverLabel=!1)}),r.on("click",function(r){var i=n._fullLayout,o=n._fullData[f.index];n._dragging||!1===i.hovermode||(n._hoverdata=[x(r,o)],s.click(n,a.event))})}function w(r,n,i){var a=m.castOption(r.insidetextfont.color,n.pts);!a&&r._input.textfont&&(a=m.castOption(r._input.textfont.color,n.pts));var o=m.castOption(r.insidetextfont.family,n.pts)||m.castOption(r.textfont.family,n.pts)||i.family,s=m.castOption(r.insidetextfont.size,n.pts)||m.castOption(r.textfont.size,n.pts)||i.size;return{color:a||l.contrast(n.color),family:o,size:s}}function T(r,n){for(var i,a,o=0;o<r.length;o++)if((a=(i=r[o][0]).trace).title.text){var s=a.title.text;a._meta&&(s=c.templateString(s,a._meta));var l=u.tester.append("text").attr("data-notex",1).text(s).call(u.font,a.title.font).call(p.convertToTspans,n),f=u.bBox(l.node(),!0);i.titleBox={width:f.width,height:f.height},l.remove()}}function k(r,n,i){var a=i.r||n.rpx1,o=n.rInscribed;if(n.startangle===n.stopangle)return{rCenter:1-o,scale:0,rotate:0,textPosAngle:0};var s,l=n.ring,u=1===l&&Math.abs(n.startangle-n.stopangle)===2*Math.PI,c=n.halfangle,f=n.midangle,h=i.trace.insidetextorientation,p="horizontal"===h,d="tangential"===h,v="radial"===h,g="auto"===h,y=[];if(!g){var m,x=function(i,o){if(u=n.startangle,c=n.stopangle,u>i&&i>c||u<i&&i<c){var u,c,f=Math.abs(i-n.startangle),h=Math.abs(i-n.stopangle),p=f<h?f:h;(s="tan"===o?M(r,a,l,p,0):A(r,a,l,p,Math.PI/2)).textPosAngle=i,y.push(s)}};if(p||d){for(m=4;m>=-4;m-=2)x(Math.PI*m,"tan");for(m=4;m>=-4;m-=2)x(Math.PI*(m+1),"tan")}if(p||v){for(m=4;m>=-4;m-=2)x(Math.PI*(m+1.5),"rad");for(m=4;m>=-4;m-=2)x(Math.PI*(m+.5),"rad")}}if(u||g||p){if((s={scale:o*a*2/Math.sqrt(r.width*r.width+r.height*r.height),rCenter:1-o,rotate:0}).textPosAngle=(n.startangle+n.stopangle)/2,s.scale>=1)return s;y.push(s)}(g||v)&&((s=A(r,a,l,c,f)).textPosAngle=(n.startangle+n.stopangle)/2,y.push(s)),(g||d)&&((s=M(r,a,l,c,f)).textPosAngle=(n.startangle+n.stopangle)/2,y.push(s));for(var b=0,_=0,w=0;w<y.length;w++){var T=y[w].scale;if(_<T&&(_=T,b=w),!g&&_>=1)break}return y[b]}function A(r,n,i,a,o){n=Math.max(0,n-2*y);var s=r.width/r.height,l=L(s,a,n,i);return{scale:2*l/r.height,rCenter:S(s,l/n),rotate:E(o)}}function M(r,n,i,a,o){n=Math.max(0,n-2*y);var s=r.height/r.width,l=L(s,a,n,i);return{scale:2*l/r.width,rCenter:S(s,l/n),rotate:E(o+Math.PI/2)}}function S(r,n){return Math.cos(n)-r*n}function E(r){return(180/Math.PI*r+720)%180-90}function L(r,n,i,a){var o=r+1/(2*Math.tan(n));return i*Math.min(1/(Math.sqrt(o*o+.5)+o),a/(Math.sqrt(r*r+a/2)+r))}function C(r,n){var i=n.pxmid[0],a=n.pxmid[1],o=r.width/2,s=r.height/2;return i<0&&(o*=-1),a<0&&(s*=-1),{scale:1,rCenter:1,rotate:0,x:o+Math.abs(s)*(o>0?1:-1)/2,y:s/(1+i*i/(a*a)),outside:!0}}function O(r,n){var i,a,o,s=r.trace,l={x:r.cx,y:r.cy},u={tx:0,ty:0};u.ty+=s.title.font.size,o=I(s),-1!==s.title.position.indexOf("top")?(l.y-=(1+o)*r.r,u.ty-=r.titleBox.height):-1!==s.title.position.indexOf("bottom")&&(l.y+=(1+o)*r.r);var c,f=r.r/(void 0===(c=r.trace.aspectratio)?1:c),h=n.w*(s.domain.x[1]-s.domain.x[0])/2;return -1!==s.title.position.indexOf("left")?(h+=f,l.x-=(1+o)*f,u.tx+=r.titleBox.width/2):-1!==s.title.position.indexOf("center")?h*=2:-1!==s.title.position.indexOf("right")&&(h+=f,l.x+=(1+o)*f,u.tx-=r.titleBox.width/2),i=h/r.titleBox.width,a=P(r,n)/r.titleBox.height,{x:l.x,y:l.y,scale:Math.min(i,a),tx:u.tx,ty:u.ty}}function P(r,n){var i=r.trace,a=n.h*(i.domain.y[1]-i.domain.y[0]);return Math.min(r.titleBox.height,a/2)}function I(r){var n,i=r.pull;if(!i)return 0;if(c.isArrayOrTypedArray(i))for(i=0,n=0;n<r.pull.length;n++)r.pull[n]>i&&(i=r.pull[n]);return i}function D(r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a][0],s=o.trace,l=s.domain,u=n.w*(l.x[1]-l.x[0]),c=n.h*(l.y[1]-l.y[0]);s.title.text&&"middle center"!==s.title.position&&(c-=P(o,n));var f=u/2,h=c/2;"funnelarea"!==s.type||s.scalegroup||(h/=s.aspectratio),o.r=Math.min(f,h)/(1+I(s)),o.cx=n.l+n.w*(s.domain.x[1]+s.domain.x[0])/2,o.cy=n.t+n.h*(1-s.domain.y[0])-c/2,s.title.text&&-1!==s.title.position.indexOf("bottom")&&(o.cy-=P(o,n)),s.scalegroup&&-1===i.indexOf(s.scalegroup)&&i.push(s.scalegroup)}!function(r,n){for(var i,a,o,s=0;s<n.length;s++){var l,u,c,f=1/0,h=n[s];for(a=0;a<r.length;a++)(o=(i=r[a][0]).trace).scalegroup===h&&("pie"===o.type?l=i.r*i.r:"funnelarea"===o.type&&(o.aspectratio>1?c=(u=i.r)/o.aspectratio:u=(c=i.r)*o.aspectratio,l=(u*=(1+o.baseratio)/2)*c),f=Math.min(f,l/i.vTotal));for(a=0;a<r.length;a++)if((o=(i=r[a][0]).trace).scalegroup===h){var p=f*i.vTotal;"funnelarea"===o.type&&(p/=(1+o.baseratio)/2,p/=o.aspectratio),i.r=Math.sqrt(p)}}}(r,i)}function z(r,n){return[r*Math.sin(n),-r*Math.cos(n)]}function R(r,n,i){var a=r._fullLayout,o=i.trace,s=o.texttemplate,l=o.textinfo;if(!s&&l&&"none"!==l){var u,f=l.split("+"),h=function(r){return -1!==f.indexOf(r)},p=h("label"),d=h("text"),v=h("value"),g=h("percent"),y=a.separators;if(u=p?[n.label]:[],d){var x=m.getFirstFilled(o.text,n.pts);b(x)&&u.push(x)}v&&u.push(m.formatPieValue(n.v,y)),g&&u.push(m.formatPiePercent(n.v/i.vTotal,y)),n.text=u.join("<br>")}if(s){var _=c.castOption(o,n.i,"texttemplate");if(_){var w={label:n.label,value:n.v,valueLabel:m.formatPieValue(n.v,a.separators),percent:n.v/i.vTotal,percentLabel:m.formatPiePercent(n.v/i.vTotal,a.separators),color:n.color,text:n.text,customdata:c.castOption(o,n.i,"customdata")},T=m.getFirstFilled(o.text,n.pts);(b(T)||""===T)&&(w.text=T),n.text=c.texttemplateString(_,w,r._fullLayout._d3locale,w,o._meta||{})}else n.text=""}}function F(r,n){var i=r.rotate*Math.PI/180,a=Math.cos(i),o=Math.sin(i),s=(n.left+n.right)/2,l=(n.top+n.bottom)/2;r.textX=s*a-l*o,r.textY=s*o+l*a,r.noCenter=!0}r.exports={plot:function(r,n){var i=r._context.staticPlot,s=r._fullLayout,d=s._size;g("pie",s),T(n,r),D(n,d);var y=c.makeTraceGroups(s._pielayer,n,"trace").each(function(n){var g=a.select(this),y=n[0],x=y.trace;(function(r){var n,i,a,o=r[0],s=o.r,l=o.trace,u=m.getRotationAngle(l.rotation),c=2*Math.PI/o.vTotal,f="px0",h="px1";if("counterclockwise"===l.direction){for(n=0;n<r.length&&r[n].hidden;n++);if(n===r.length)return;u+=c*r[n].v,c*=-1,f="px1",h="px0"}for(a=z(s,u),n=0;n<r.length;n++)(i=r[n]).hidden||(i[f]=a,i.startangle=u,u+=c*i.v/2,i.pxmid=z(s,u),i.midangle=u,a=z(s,u+=c*i.v/2),i.stopangle=u,i[h]=a,i.largeArc=i.v>o.vTotal/2?1:0,i.halfangle=Math.PI*Math.min(i.v/o.vTotal,.5),i.ring=1-l.hole,i.rInscribed=i.v!==o.vTotal||o.trace.hole?Math.min(1/(1+1/Math.sin(i.halfangle)),i.ring/2):1)})(n),g.attr("stroke-linejoin","round"),g.each(function(){var b=a.select(this).selectAll("g.slice").data(n);b.enter().append("g").classed("slice",!0),b.exit().remove();var T=[[[],[]],[[],[]]],A=!1;b.each(function(o,l){if(o.hidden)a.select(this).selectAll("path,g").remove();else{o.pointNumber=o.i,o.curveNumber=x.index,T[o.pxmid[1]<0?0:1][o.pxmid[0]<0?0:1].push(o);var f=y.cx,h=y.cy,d=a.select(this),g=d.selectAll("path.surface").data([o]);if(g.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),d.call(_,r,n),x.pull){var b=+m.castOption(x.pull,o.pts)||0;b>0&&(f+=b*o.pxmid[0],h+=b*o.pxmid[1])}o.cxFinal=f,o.cyFinal=h;var M=x.hole;if(o.v===y.vTotal){var S="M"+(f+o.px0[0])+","+(h+o.px0[1])+I(o.px0,o.pxmid,!0,1)+I(o.pxmid,o.px0,!0,1)+"Z";M?g.attr("d","M"+(f+M*o.px0[0])+","+(h+M*o.px0[1])+I(o.px0,o.pxmid,!1,M)+I(o.pxmid,o.px0,!1,M)+"Z"+S):g.attr("d",S)}else{var E=I(o.px0,o.px1,!0,1);if(M){var L=1-M;g.attr("d","M"+(f+M*o.px1[0])+","+(h+M*o.px1[1])+I(o.px1,o.px0,!1,M)+"l"+L*o.px0[0]+","+L*o.px0[1]+E+"Z")}else g.attr("d","M"+f+","+h+"l"+o.px0[0]+","+o.px0[1]+E+"Z")}R(r,o,y);var O=m.castOption(x.textposition,o.pts),P=d.selectAll("g.slicetext").data(o.text&&"none"!==O?[0]:[]);P.enter().append("g").classed("slicetext",!0),P.exit().remove(),P.each(function(){var i=c.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),d=c.ensureUniformFontSize(r,"outside"===O?(g=s.font,{color:m.castOption(x.outsidetextfont.color,o.pts)||m.castOption(x.textfont.color,o.pts)||g.color,family:m.castOption(x.outsidetextfont.family,o.pts)||m.castOption(x.textfont.family,o.pts)||g.family,size:m.castOption(x.outsidetextfont.size,o.pts)||m.castOption(x.textfont.size,o.pts)||g.size}):w(x,o,s.font));i.text(o.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(u.font,d).call(p.convertToTspans,r);var g,b,_=u.bBox(i.node());if("outside"===O)b=C(_,o);else if(b=k(_,o,y),"auto"===O&&b.scale<1){var T=c.ensureUniformFontSize(r,x.outsidetextfont);i.call(u.font,T),b=C(_=u.bBox(i.node()),o)}var M=b.textPosAngle,S=void 0===M?o.pxmid:z(y.r,M);if(b.targetX=f+S[0]*b.rCenter+(b.x||0),b.targetY=h+S[1]*b.rCenter+(b.y||0),F(b,_),b.outside){var E=b.targetY;o.yLabelMin=E-_.height/2,o.yLabelMid=E,o.yLabelMax=E+_.height/2,o.labelExtraX=0,o.labelExtraY=0,A=!0}b.fontSize=d.size,v(x.type,b,s),n[l].transform=b,c.setTransormAndDisplay(i,b)})}function I(r,n,i,a){var s=a*(n[0]-r[0]),l=a*(n[1]-r[1]);return"a"+a*y.r+","+a*y.r+" 0 "+o.largeArc+(i?" 1 ":" 0 ")+s+","+l}});var M=a.select(this).selectAll("g.titletext").data(x.title.text?[0]:[]);if(M.enter().append("g").classed("titletext",!0),M.exit().remove(),M.each(function(){var n,i,o=c.ensureSingle(a.select(this),"text","",function(r){r.attr("data-notex",1)}),s=x.title.text;x._meta&&(s=c.templateString(s,x._meta)),o.text(s).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(u.font,x.title.font).call(p.convertToTspans,r),i="middle center"===x.title.position?(n=Math.sqrt(y.titleBox.width*y.titleBox.width+y.titleBox.height*y.titleBox.height),{x:y.cx,y:y.cy,scale:y.trace.hole*y.r*2/n,tx:0,ty:-y.titleBox.height/2+y.trace.title.font.size}):O(y,d),o.attr("transform",h(i.x,i.y)+f(Math.min(1,i.scale))+h(i.tx,i.ty))}),A&&function(r,n){var i,a,o,s,l,u,f,h,p,d,v,g,y;function x(r,n){return r.pxmid[1]-n.pxmid[1]}function b(r,n){return n.pxmid[1]-r.pxmid[1]}for(a=0;a<2;a++)for(o=a?x:b,l=a?Math.max:Math.min,f=a?1:-1,i=0;i<2;i++){for(s=i?Math.max:Math.min,u=i?1:-1,(h=r[a][i]).sort(o),d=(p=r[1-a][i]).concat(h),g=[],v=0;v<h.length;v++)void 0!==h[v].yLabelMid&&g.push(h[v]);for(y=!1,v=0;a&&v<p.length;v++)if(void 0!==p[v].yLabelMid){y=p[v];break}for(v=0;v<g.length;v++){var _=v&&g[v-1];y&&!v&&(_=y),function(r,i){i||(i={});var o,h,p,v,g=i.labelExtraY+(a?i.yLabelMax:i.yLabelMin),y=a?r.yLabelMin:r.yLabelMax,x=a?r.yLabelMax:r.yLabelMin,b=r.cyFinal+l(r.px0[1],r.px1[1]),_=g-y;if(_*f>0&&(r.labelExtraY=_),c.isArrayOrTypedArray(n.pull))for(h=0;h<d.length;h++)(p=d[h])===r||(m.castOption(n.pull,r.pts)||0)>=(m.castOption(n.pull,p.pts)||0)||((r.pxmid[1]-p.pxmid[1])*f>0?(_=p.cyFinal+l(p.px0[1],p.px1[1])-y-r.labelExtraY)*f>0&&(r.labelExtraY+=_):(x+r.labelExtraY-b)*f>0&&(o=3*u*Math.abs(h-d.indexOf(r)),(v=p.cxFinal+s(p.px0[0],p.px1[0])+o-(r.cxFinal+r.pxmid[0])-r.labelExtraX)*u>0&&(r.labelExtraX+=v)))}(g[v],_)}}}(T,x),function(r,n){r.each(function(r){var i=a.select(this);if(r.labelExtraX||r.labelExtraY){var o=i.select("g.slicetext text");r.transform.targetX+=r.labelExtraX,r.transform.targetY+=r.labelExtraY,c.setTransormAndDisplay(o,r.transform);var s=r.cxFinal+r.pxmid[0],u="M"+s+","+(r.cyFinal+r.pxmid[1]),f=(r.yLabelMax-r.yLabelMin)*(r.pxmid[0]<0?-1:1)/4;if(r.labelExtraX){var h=r.labelExtraX*r.pxmid[1]/r.pxmid[0],p=r.yLabelMid+r.labelExtraY-(r.cyFinal+r.pxmid[1]);Math.abs(h)>Math.abs(p)?u+="l"+p*r.pxmid[0]/r.pxmid[1]+","+p+"H"+(s+r.labelExtraX+f):u+="l"+r.labelExtraX+","+h+"v"+(p-h)+"h"+f}else u+="V"+(r.yLabelMid+r.labelExtraY)+"h"+f;c.ensureSingle(i,"path","textline").call(l.stroke,n.outsidetextfont.color).attr({"stroke-width":Math.min(2,n.outsidetextfont.size/8),d:u,fill:"none"})}else i.select("path.textline").remove()})}(b,x),A&&x.automargin){var S=u.bBox(g.node()),E=x.domain,L=d.w*(E.x[1]-E.x[0]),P=d.h*(E.y[1]-E.y[0]),I=(.5*L-y.r)/d.w,D=(.5*P-y.r)/d.h;o.autoMargin(r,"pie."+x.uid+".automargin",{xl:E.x[0]-I,xr:E.x[1]+I,yb:E.y[0]-D,yt:E.y[1]+D,l:Math.max(y.cx-y.r-S.left,0),r:Math.max(S.right-(y.cx+y.r),0),b:Math.max(S.bottom-(y.cy+y.r),0),t:Math.max(y.cy-y.r-S.top,0),pad:5})}})});setTimeout(function(){y.selectAll("tspan").each(function(){var r=a.select(this);r.attr("dy")&&r.attr("dy",r.attr("dy"))})},0)},formatSliceLabel:R,transformInsideText:k,determineInsideTextFont:w,positionTitleOutside:O,prerenderTitles:T,layoutAreas:D,attachFxHandlers:_,computeTransform:F}},68357:function(r,n,i){"use strict";var a=i(39898),o=i(63463),s=i(72597).resizeText;r.exports=function(r){var n=r._fullLayout._pielayer.selectAll(".trace");s(r,n,"pie"),n.each(function(n){var i=n[0].trace,s=a.select(this);s.style({opacity:i.opacity}),s.selectAll("path.surface").each(function(n){a.select(this).call(o,n,i,r)})})}},63463:function(r,n,i){"use strict";var a=i(7901),o=i(53581).castOption,s=i(22209);r.exports=function(r,n,i,l){var u=i.marker.line,c=o(u.color,n.pts)||a.defaultLine,f=o(u.width,n.pts)||0;r.call(s,n,i,l).style("stroke-width",f).call(a.stroke,c)}},10959:function(r,n,i){"use strict";var a=i(82196);r.exports={x:a.x,y:a.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:a.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(r,n,i){"use strict";var a=i(9330).gl_pointcloud2d,o=i(71828).isArrayOrTypedArray,s=i(78614),l=i(71739).findExtremes,u=i(34603);function c(r,n){this.scene=r,this.uid=n,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=a(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var f=c.prototype;f.handlePick=function(r){var n=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*n],this.pickXYData[2*n+1]]:[this.pickXData[n],this.pickYData[n]],textLabel:o(this.textLabels)?this.textLabels[n]:this.textLabels,color:this.color,name:this.name,pointIndex:n,hoverinfo:this.hoverinfo}},f.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=u(r,{})},f.updateFast=function(r){var n,i,a,o,u,c,f=this.xData=this.pickXData=r.x,h=this.yData=this.pickYData=r.y,p=this.pickXYData=r.xy,d=r.xbounds&&r.ybounds,v=r.indices,g=this.bounds;if(p){if(a=p,n=p.length>>>1,d)g[0]=r.xbounds[0],g[2]=r.xbounds[1],g[1]=r.ybounds[0],g[3]=r.ybounds[1];else for(c=0;c<n;c++)o=a[2*c],u=a[2*c+1],o<g[0]&&(g[0]=o),o>g[2]&&(g[2]=o),u<g[1]&&(g[1]=u),u>g[3]&&(g[3]=u);if(v)i=v;else for(i=new Int32Array(n),c=0;c<n;c++)i[c]=c}else for(a=new Float32Array(2*(n=f.length)),i=new Int32Array(n),c=0;c<n;c++)o=f[c],u=h[c],i[c]=c,a[2*c]=o,a[2*c+1]=u,o<g[0]&&(g[0]=o),o>g[2]&&(g[2]=o),u<g[1]&&(g[1]=u),u>g[3]&&(g[3]=u);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=a;var y=s(r.marker.color),m=s(r.marker.border.color),x=r.opacity*r.marker.opacity;y[3]*=x,this.pointcloudOptions.color=y;var b=r.marker.blend;null===b&&(b=f.length<100||h.length<100),this.pointcloudOptions.blend=b,m[3]*=x,this.pointcloudOptions.borderColor=m;var _=r.marker.sizemin,w=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=_,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var T=this.scene.xaxis,k=this.scene.yaxis,A=w/2||.5;r._extremes[T._id]=l(T,[g[0],g[2]],{ppad:A}),r._extremes[k._id]=l(k,[g[1],g[3]],{ppad:A})},f.dispose=function(){this.pointcloud.dispose()},r.exports=function(r,n){var i=new c(r,n.uid);return i.update(n),i}},33876:function(r,n,i){"use strict";var a=i(71828),o=i(10959);r.exports=function(r,n,i){function s(i,s){return a.coerce(r,n,o,i,s)}s("x"),s("y"),s("xbounds"),s("ybounds"),r.xy&&r.xy instanceof Float32Array&&(n.xy=r.xy),r.indices&&r.indices instanceof Int32Array&&(n.indices=r.indices),s("text"),s("marker.color",i),s("marker.opacity"),s("marker.blend"),s("marker.sizemin"),s("marker.sizemax"),s("marker.border.color",i),s("marker.border.arearatio"),n._length=null}},20593:function(r,n,i){"use strict";r.exports={attributes:i(10959),supplyDefaults:i(33876),calc:i(36563),plot:i(42743),moduleType:"trace",name:"pointcloud",basePlotModule:i(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(r,n,i){"use strict";var a=i(41940),o=i(9012),s=i(22399),l=i(77914),u=i(27670).Y,c=i(5386).fF,f=i(50693),h=i(44467).templatedArray,p=i(12663).descriptionOnlyNumbers,d=i(1426).extendFlat,v=i(30962).overrideAll;(r.exports=v({hoverinfo:d({},o.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:l.hoverlabel,domain:u({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:p("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:a({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:s.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:c({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:s.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:c({},{keys:["value","label"]}),colorscales:h("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(f().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(r,n,i){"use strict";var a=i(30962).overrideAll,o=i(27659).a0,s=i(60436),l=i(528),u=i(6964),c=i(28569),f=i(47322).prepSelect,h=i(71828),p=i(73972),d="sankey";n.name=d,n.baseLayoutAttrOverrides=a({hoverlabel:l.hoverlabel},"plot","nested"),n.plot=function(r){var i=o(r.calcdata,d)[0];s(r,i),n.updateFx(r)},n.clean=function(r,n,i,a){var o=a._has&&a._has(d),s=n._has&&n._has(d);o&&!s&&(a._paperdiv.selectAll(".sankey").remove(),a._paperdiv.selectAll(".bgsankey").remove())},n.updateFx=function(r){for(var n=0;n<r._fullData.length;n++)(function(r,n){var i=r._fullData[n],a=r._fullLayout,o=a.dragmode,s="pan"===a.dragmode?"move":"crosshair",l=i._bgRect;if(l&&"pan"!==o&&"zoom"!==o){u(l,s);var d={_id:"x",c2p:h.identity,_offset:i._sankey.translateX,_length:i._sankey.width},v={_id:"y",c2p:h.identity,_offset:i._sankey.translateY,_length:i._sankey.height},g={gd:r,element:l.node(),plotinfo:{id:n,xaxis:d,yaxis:v,fillRangeItems:h.noop},subplot:n,xaxes:[d],yaxes:[v],doneFnCompleted:function(i){for(var a,o=r._fullData[n],s=o.node.groups.slice(),l=[],u=0;u<i.length;u++){var c=function(r){for(var n=o._sankey.graph.nodes,i=0;i<n.length;i++)if(n[i].pointNumber===r)return n[i]}(i[u].pointNumber);if(c){if(c.group){for(var f=0;f<c.childrenNodes.length;f++)l.push(c.childrenNodes[f].pointNumber);s[c.pointNumber-o.node._count]=!1}else l.push(c.pointNumber)}}a=s.filter(Boolean).concat([l]),p.call("_guiRestyle",r,{"node.groups":[a]},n)},prepFn:function(r,n,i){f(r,n,i,g,o)}};c.init(g)}})(r,n)}},92930:function(r,n,i){"use strict";var a=i(68664),o=i(71828),s=i(28984).wrap,l=o.isArrayOrTypedArray,u=o.isIndex,c=i(21081);r.exports=function(r,n){var i=function(r){var n,i=r.node,s=r.link,f=[],h=l(s.color),p=l(s.customdata),d={},v={},g=s.colorscales.length;for(n=0;n<g;n++){var y=s.colorscales[n],m=c.extractScale(y,{cLetter:"c"}),x=c.makeColorScaleFunc(m);v[y.label]=x}var b=0;for(n=0;n<s.value.length;n++)s.source[n]>b&&(b=s.source[n]),s.target[n]>b&&(b=s.target[n]);var _,w=b+1;r.node._count=w;var T=r.node.groups,k={};for(n=0;n<T.length;n++){var A=T[n];for(_=0;_<A.length;_++){var M=A[_],S=w+n;k.hasOwnProperty(M)?o.warn("Node "+M+" is already part of a group."):k[M]=S}}var E={source:[],target:[]};for(n=0;n<s.value.length;n++){var L=s.value[n],C=s.source[n],O=s.target[n];if(L>0&&u(C,w)&&u(O,w)&&(!k.hasOwnProperty(C)||!k.hasOwnProperty(O)||k[C]!==k[O])){k.hasOwnProperty(O)&&(O=k[O]),k.hasOwnProperty(C)&&(C=k[C]),O=+O,d[C=+C]=d[O]=!0;var P="";s.label&&s.label[n]&&(P=s.label[n]);var I=null;P&&v.hasOwnProperty(P)&&(I=v[P]),f.push({pointNumber:n,label:P,color:h?s.color[n]:s.color,customdata:p?s.customdata[n]:s.customdata,concentrationscale:I,source:C,target:O,value:+L}),E.source.push(C),E.target.push(O)}}var D=w+T.length,z=l(i.color),R=l(i.customdata),F=[];for(n=0;n<D;n++)if(d[n]){var B=i.label[n];F.push({group:n>w-1,childrenNodes:[],pointNumber:n,label:B,color:z?i.color[n]:i.color,customdata:R?i.customdata[n]:i.customdata})}var N=!1;return function(r,n,i){for(var s=o.init2dArray(r,0),l=0;l<Math.min(n.length,i.length);l++)if(o.isIndex(n[l],r)&&o.isIndex(i[l],r)){if(n[l]===i[l])return!0;s[n[l]].push(i[l])}return a(s).components.some(function(r){return r.length>1})}(D,E.source,E.target)&&(N=!0),{circular:N,links:f,nodes:F,groups:T,groupLookup:k}}(n);return s({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},85247:function(r){"use strict";r.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(r,n,i){"use strict";var a=i(71828),o=i(39953),s=i(7901),l=i(84267),u=i(27670).c,c=i(38048),f=i(44467),h=i(85501);function p(r,n){function i(i,s){return a.coerce(r,n,o.link.colorscales,i,s)}i("label"),i("cmin"),i("cmax"),i("colorscale")}r.exports=function(r,n,i,d){function v(i,s){return a.coerce(r,n,o,i,s)}var g=a.extendDeep(d.hoverlabel,r.hoverlabel),y=r.node,m=f.newContainer(n,"node");function x(r,n){return a.coerce(y,m,o.node,r,n)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",r.hoverinfo),c(y,m,x,g),x("hovertemplate"),x("align");var b=d.colorway;x("color",m.label.map(function(r,n){return s.addOpacity(b[n%b.length],.8)})),x("customdata");var _=r.link||{},w=f.newContainer(n,"link");function T(r,n){return a.coerce(_,w,o.link,r,n)}T("label"),T("arrowlen"),T("source"),T("target"),T("value"),T("line.color"),T("line.width"),T("hoverinfo",r.hoverinfo),c(_,w,T,g),T("hovertemplate");var k,A=.333>l(d.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";T("color",a.repeat(A,w.value.length)),T("customdata"),h(_,w,{name:"colorscales",handleItemDefaults:p}),u(n,d,v),v("orientation"),v("valueformat"),v("valuesuffix"),m.x.length&&m.y.length&&(k="freeform"),v("arrangement",k),a.coerceFont(v,"textfont",a.extendFlat({},d.font)),n._length=null}},29396:function(r,n,i){"use strict";r.exports={attributes:i(39953),supplyDefaults:i(26857),calc:i(92930),plot:i(60436),moduleType:"trace",name:"sankey",basePlotModule:i(75536),selectPoints:i(84564),categories:["noOpacity"],meta:{}}},60436:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=o.numberFormat,l=i(3393),u=i(30211),c=i(7901),f=i(85247).cn,h=o._;function p(r){return""!==r}function d(r,n){return r.filter(function(r){return r.key===n.traceId})}function v(r,n){a.select(r).select("path").style("fill-opacity",n),a.select(r).select("rect").style("fill-opacity",n)}function g(r){a.select(r).select("text.name").style("fill","black")}function y(r){return function(n){return -1!==r.node.sourceLinks.indexOf(n.link)||-1!==r.node.targetLinks.indexOf(n.link)}}function m(r){return function(n){return -1!==n.node.sourceLinks.indexOf(r.link)||-1!==n.node.targetLinks.indexOf(r.link)}}function x(r,n,i){n&&i&&d(i,n).selectAll("."+f.sankeyLink).filter(y(n)).call(_.bind(0,n,i,!1))}function b(r,n,i){n&&i&&d(i,n).selectAll("."+f.sankeyLink).filter(y(n)).call(w.bind(0,n,i,!1))}function _(r,n,i,a){a.style("fill-opacity",function(r){if(!r.link.concentrationscale)return .4}),a.each(function(i){var a=i.link.label;""!==a&&d(n,r).selectAll("."+f.sankeyLink).filter(function(r){return r.link.label===a}).style("fill-opacity",function(r){if(!r.link.concentrationscale)return .4})}),i&&d(n,r).selectAll("."+f.sankeyNode).filter(m(r)).call(x)}function w(r,n,i,a){a.style("fill-opacity",function(r){return r.tinyColorAlpha}),a.each(function(i){var a=i.link.label;""!==a&&d(n,r).selectAll("."+f.sankeyLink).filter(function(r){return r.link.label===a}).style("fill-opacity",function(r){return r.tinyColorAlpha})}),i&&d(n,r).selectAll(f.sankeyNode).filter(m(r)).call(b)}function T(r,n){var i=r.hoverlabel||{},a=o.nestedProperty(i,n).get();return!Array.isArray(a)&&a}r.exports=function(r,n){for(var i=r._fullLayout,o=i._paper,d=i._size,y=0;y<r._fullData.length;y++)if(r._fullData[y].visible&&r._fullData[y].type===f.sankey&&!r._fullData[y]._viewInitial){var m=r._fullData[y].node;r._fullData[y]._viewInitial={node:{groups:m.groups.slice(),x:m.x.slice(),y:m.y.slice()}}}var k=h(r,"source:")+" ",A=h(r,"target:")+" ",M=h(r,"concentration:")+" ",S=h(r,"incoming flow count:")+" ",E=h(r,"outgoing flow count:")+" ";l(r,o,n,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(n,i,o){!1!==r._fullLayout.hovermode&&(a.select(n).call(_.bind(0,i,o,!0)),"skip"!==i.link.trace.link.hoverinfo&&(i.link.fullData=i.link.trace,r.emit("plotly_hover",{event:a.event,points:[i.link]})))},follow:function(n,o){if(!1!==r._fullLayout.hovermode){var l=o.link.trace.link;if("none"!==l.hoverinfo&&"skip"!==l.hoverinfo){for(var f=[],h=0,d=0;d<o.flow.links.length;d++){var y=o.flow.links[d];if("closest"!==r._fullLayout.hovermode||o.link.pointNumber===y.pointNumber){o.link.pointNumber===y.pointNumber&&(h=d),y.fullData=y.trace,l=o.link.trace.link;var m=function(r){r.circular?(n=(r.circularPathData.leftInnerExtent+r.circularPathData.rightInnerExtent)/2,i=r.circularPathData.verticalFullExtent):(n=(r.source.x1+r.target.x0)/2,i=(r.y0+r.y1)/2);var n,i,a=[n,i];return"v"===r.trace.orientation&&a.reverse(),a[0]+=o.parent.translateX,a[1]+=o.parent.translateY,a}(y),x={valueLabel:s(o.valueFormat)(y.value)+o.valueSuffix};f.push({x:m[0],y:m[1],name:x.valueLabel,text:[y.label||"",k+y.source.label,A+y.target.label,y.concentrationscale?M+s("%0.2f")(y.flow.labelConcentration):""].filter(p).join("<br>"),color:T(l,"bgcolor")||c.addOpacity(y.color,1),borderColor:T(l,"bordercolor"),fontFamily:T(l,"font.family"),fontSize:T(l,"font.size"),fontColor:T(l,"font.color"),nameLength:T(l,"namelength"),textAlign:T(l,"align"),idealAlign:a.event.x<m[0]?"right":"left",hovertemplate:l.hovertemplate,hovertemplateLabels:x,eventData:[y]})}}u.loneHover(f,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r,anchorIndex:h}).each(function(){o.link.concentrationscale||v(this,.65),g(this)})}}},unhover:function(n,o,s){!1!==r._fullLayout.hovermode&&(a.select(n).call(w.bind(0,o,s,!0)),"skip"!==o.link.trace.link.hoverinfo&&(o.link.fullData=o.link.trace,r.emit("plotly_unhover",{event:a.event,points:[o.link]})),u.loneUnhover(i._hoverlayer.node()))},select:function(n,i){var o=i.link;o.originalEvent=a.event,r._hoverdata=[o],u.click(r,{target:!0})}},nodeEvents:{hover:function(n,i,o){!1!==r._fullLayout.hovermode&&(a.select(n).call(x,i,o),"skip"!==i.node.trace.node.hoverinfo&&(i.node.fullData=i.node.trace,r.emit("plotly_hover",{event:a.event,points:[i.node]})))},follow:function(n,o){if(!1!==r._fullLayout.hovermode){var l=o.node.trace.node;if("none"!==l.hoverinfo&&"skip"!==l.hoverinfo){var c=a.select(n).select("."+f.nodeRect),h=r._fullLayout._paperdiv.node().getBoundingClientRect(),d=c.node().getBoundingClientRect(),y=d.left-2-h.left,m=d.right+2-h.left,x=d.top+d.height/4-h.top,b={valueLabel:s(o.valueFormat)(o.node.value)+o.valueSuffix};o.node.fullData=o.node.trace,r._fullLayout._calcInverseTransform(r);var _=r._fullLayout._invScaleX,w=r._fullLayout._invScaleY,k=u.loneHover({x0:_*y,x1:_*m,y:w*x,name:s(o.valueFormat)(o.node.value)+o.valueSuffix,text:[o.node.label,S+o.node.targetLinks.length,E+o.node.sourceLinks.length].filter(p).join("<br>"),color:T(l,"bgcolor")||o.tinyColorHue,borderColor:T(l,"bordercolor"),fontFamily:T(l,"font.family"),fontSize:T(l,"font.size"),fontColor:T(l,"font.color"),nameLength:T(l,"namelength"),textAlign:T(l,"align"),idealAlign:"left",hovertemplate:l.hovertemplate,hovertemplateLabels:b,eventData:[o.node]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r});v(k,.85),g(k)}}},unhover:function(n,o,s){!1!==r._fullLayout.hovermode&&(a.select(n).call(b,o,s),"skip"!==o.node.trace.node.hoverinfo&&(o.node.fullData=o.node.trace,r.emit("plotly_unhover",{event:a.event,points:[o.node]})),u.loneUnhover(i._hoverlayer.node()))},select:function(n,i,o){var s=i.node;s.originalEvent=a.event,r._hoverdata=[s],a.select(n).call(b,i,o),u.click(r,{target:!0})}}})}},3393:function(r,n,i){"use strict";var a=i(49887),o=i(81684).k4,s=i(39898),l=i(30838),u=i(86781),c=i(85247),f=i(84267),h=i(7901),p=i(91424),d=i(71828),v=d.strTranslate,g=d.strRotate,y=i(28984),m=y.keyFun,x=y.repeat,b=y.unwrap,_=i(63893),w=i(73972),T=i(18783),k=T.CAP_SHIFT,A=T.LINE_SPACING;function M(r,n,i){var a,o=b(n),s=o.trace,h=s.domain,p="h"===s.orientation,v=s.node.pad,g=s.node.thickness,y={justify:l.sankeyJustify,left:l.sankeyLeft,right:l.sankeyRight,center:l.sankeyCenter}[s.node.align],m=r.width*(h.x[1]-h.x[0]),x=r.height*(h.y[1]-h.y[0]),_=o._nodes,w=o._links,T=o.circular;(a=T?u.sankeyCircular().circularLinkGap(0):l.sankey()).iterations(c.sankeyIterations).size(p?[m,x]:[x,m]).nodeWidth(g).nodePadding(v).nodeId(function(r){return r.pointNumber}).nodeAlign(y).nodes(_).links(w);var k,A,M,S=a();for(var E in a.nodePadding()<v&&d.warn("node.pad was reduced to ",a.nodePadding()," to fit within the figure."),o._groupLookup){var L,C=parseInt(o._groupLookup[E]);for(k=0;k<S.nodes.length;k++)if(S.nodes[k].pointNumber===C){L=S.nodes[k];break}if(L){var O={pointNumber:parseInt(E),x0:L.x0,x1:L.x1,y0:L.y0,y1:L.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};S.nodes.unshift(O),L.childrenNodes.unshift(O)}}if(function(){for(k=0;k<S.nodes.length;k++){var r,n,i=S.nodes[k],a={};for(A=0;A<i.targetLinks.length;A++)r=(n=i.targetLinks[A]).source.pointNumber+":"+n.target.pointNumber,a.hasOwnProperty(r)||(a[r]=[]),a[r].push(n);var o=Object.keys(a);for(A=0;A<o.length;A++){var s=a[r=o[A]],l=0,u={};for(M=0;M<s.length;M++)u[(n=s[M]).label]||(u[n.label]=0),u[n.label]+=n.value,l+=n.value;for(M=0;M<s.length;M++)(n=s[M]).flow={value:l,labelConcentration:u[n.label]/l,concentration:n.value/l,links:s},n.concentrationscale&&(n.color=f(n.concentrationscale(n.flow.labelConcentration)))}var c=0;for(A=0;A<i.sourceLinks.length;A++)c+=i.sourceLinks[A].value;for(A=0;A<i.sourceLinks.length;A++)(n=i.sourceLinks[A]).concentrationOut=n.value/c;var h=0;for(A=0;A<i.targetLinks.length;A++)h+=i.targetLinks[A].value;for(A=0;A<i.targetLinks.length;A++)(n=i.targetLinks[A]).concenrationIn=n.value/h}}(),s.node.x.length&&s.node.y.length){for(k=0;k<Math.min(s.node.x.length,s.node.y.length,S.nodes.length);k++)if(s.node.x[k]&&s.node.y[k]){var P=[s.node.x[k]*m,s.node.y[k]*x];S.nodes[k].x0=P[0]-g/2,S.nodes[k].x1=P[0]+g/2;var I=S.nodes[k].y1-S.nodes[k].y0;S.nodes[k].y0=P[1]-I/2,S.nodes[k].y1=P[1]+I/2}"snap"===s.arrangement&&(function(r){var n,i,a=r.map(function(r,n){return{x0:r.x0,index:n}}).sort(function(r,n){return r.x0-n.x0}),o=[],s=-1,l=-1/0;for(k=0;k<a.length;k++){var u=r[a[k].index];u.x0>l+g&&(s+=1,n=u.x0),l=u.x0,o[s]||(o[s]=[]),o[s].push(u),i=n-u.x0,u.x0+=i,u.x1+=i}return o})(_=S.nodes).forEach(function(r){var n,i,a,o=0,s=r.length;for(r.sort(function(r,n){return r.y0-n.y0}),a=0;a<s;++a)(n=r[a]).y0>=o||(i=o-n.y0)>1e-6&&(n.y0+=i,n.y1+=i),o=n.y1+v}),a.update(S)}return{circular:T,key:i,trace:s,guid:d.randstr(),horizontal:p,width:m,height:x,nodePad:s.node.pad,nodeLineColor:s.node.line.color,nodeLineWidth:s.node.line.width,linkLineColor:s.link.line.color,linkLineWidth:s.link.line.width,linkArrowLength:s.link.arrowlen,valueFormat:s.valueformat,valueSuffix:s.valuesuffix,textFont:s.textfont,translateX:h.x[0]*r.width+r.margin.l,translateY:r.height-h.y[1]*r.height+r.margin.t,dragParallel:p?x:m,dragPerpendicular:p?m:x,arrangement:s.arrangement,sankey:a,graph:S,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function S(r,n,i){var a=f(n.color),o=n.source.label+"|"+n.target.label+"__"+i;return n.trace=r.trace,n.curveNumber=r.trace.index,{circular:r.circular,key:o,traceId:r.key,pointNumber:n.pointNumber,link:n,tinyColorHue:h.tinyRGB(a),tinyColorAlpha:a.getAlpha(),linkPath:E,linkLineColor:r.linkLineColor,linkLineWidth:r.linkLineWidth,linkArrowLength:r.linkArrowLength,valueFormat:r.valueFormat,valueSuffix:r.valueSuffix,sankey:r.sankey,parent:r,interactionState:r.interactionState,flow:n.flow}}function E(){return function(r){var n,i,a,s,l=r.linkArrowLength;if(r.link.circular)return n=r.link,i=l,a=n.width/2,s=n.circularPathData,"top"===n.circularLinkType?"M "+(s.targetX-i)+" "+(s.targetY+a)+" L"+(s.rightInnerExtent-i)+" "+(s.targetY+a)+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightSmallArcRadius+a)+" 0 0 1 "+(s.rightFullExtent-a-i)+" "+(s.targetY-s.rightSmallArcRadius)+"L"+(s.rightFullExtent-a-i)+" "+s.verticalRightInnerExtent+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightLargeArcRadius+a)+" 0 0 1 "+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent-a)+"L"+s.leftInnerExtent+" "+(s.verticalFullExtent-a)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftLargeArcRadius+a)+" 0 0 1 "+(s.leftFullExtent+a)+" "+s.verticalLeftInnerExtent+"L"+(s.leftFullExtent+a)+" "+(s.sourceY-s.leftSmallArcRadius)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftSmallArcRadius+a)+" 0 0 1 "+s.leftInnerExtent+" "+(s.sourceY+a)+"L"+s.sourceX+" "+(s.sourceY+a)+"L"+s.sourceX+" "+(s.sourceY-a)+"L"+s.leftInnerExtent+" "+(s.sourceY-a)+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftSmallArcRadius-a)+" 0 0 0 "+(s.leftFullExtent-a)+" "+(s.sourceY-s.leftSmallArcRadius)+"L"+(s.leftFullExtent-a)+" "+s.verticalLeftInnerExtent+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftLargeArcRadius-a)+" 0 0 0 "+s.leftInnerExtent+" "+(s.verticalFullExtent+a)+"L"+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent+a)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightLargeArcRadius-a)+" 0 0 0 "+(s.rightFullExtent+a-i)+" "+s.verticalRightInnerExtent+"L"+(s.rightFullExtent+a-i)+" "+(s.targetY-s.rightSmallArcRadius)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightSmallArcRadius-a)+" 0 0 0 "+(s.rightInnerExtent-i)+" "+(s.targetY-a)+"L"+(s.targetX-i)+" "+(s.targetY-a)+(i>0?"L"+s.targetX+" "+s.targetY:"")+"Z":"M "+(s.targetX-i)+" "+(s.targetY-a)+" L"+(s.rightInnerExtent-i)+" "+(s.targetY-a)+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightSmallArcRadius+a)+" 0 0 0 "+(s.rightFullExtent-a-i)+" "+(s.targetY+s.rightSmallArcRadius)+"L"+(s.rightFullExtent-a-i)+" "+s.verticalRightInnerExtent+"A"+(s.rightLargeArcRadius+a)+" "+(s.rightLargeArcRadius+a)+" 0 0 0 "+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent+a)+"L"+s.leftInnerExtent+" "+(s.verticalFullExtent+a)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftLargeArcRadius+a)+" 0 0 0 "+(s.leftFullExtent+a)+" "+s.verticalLeftInnerExtent+"L"+(s.leftFullExtent+a)+" "+(s.sourceY+s.leftSmallArcRadius)+"A"+(s.leftLargeArcRadius+a)+" "+(s.leftSmallArcRadius+a)+" 0 0 0 "+s.leftInnerExtent+" "+(s.sourceY-a)+"L"+s.sourceX+" "+(s.sourceY-a)+"L"+s.sourceX+" "+(s.sourceY+a)+"L"+s.leftInnerExtent+" "+(s.sourceY+a)+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftSmallArcRadius-a)+" 0 0 1 "+(s.leftFullExtent-a)+" "+(s.sourceY+s.leftSmallArcRadius)+"L"+(s.leftFullExtent-a)+" "+s.verticalLeftInnerExtent+"A"+(s.leftLargeArcRadius-a)+" "+(s.leftLargeArcRadius-a)+" 0 0 1 "+s.leftInnerExtent+" "+(s.verticalFullExtent-a)+"L"+(s.rightInnerExtent-i)+" "+(s.verticalFullExtent-a)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightLargeArcRadius-a)+" 0 0 1 "+(s.rightFullExtent+a-i)+" "+s.verticalRightInnerExtent+"L"+(s.rightFullExtent+a-i)+" "+(s.targetY+s.rightSmallArcRadius)+"A"+(s.rightLargeArcRadius-a)+" "+(s.rightSmallArcRadius-a)+" 0 0 1 "+(s.rightInnerExtent-i)+" "+(s.targetY+a)+"L"+(s.targetX-i)+" "+(s.targetY+a)+(i>0?"L"+s.targetX+" "+s.targetY:"")+"Z";var u=Math.abs((r.link.target.x0-r.link.source.x1)/2);l>u&&(l=u);var c=r.link.source.x1,f=r.link.target.x0-l,h=o(c,f),p=h(.5),d=h(.5),v=r.link.y0-r.link.width/2,g=r.link.y0+r.link.width/2,y=r.link.y1-r.link.width/2,m=r.link.y1+r.link.width/2,x="M"+c+","+v,b="C"+p+","+v+" "+d+","+y+" "+f+","+y,_="C"+d+","+m+" "+p+","+g+" "+c+","+g,w=l>0?"L"+(f+l)+","+(y+r.link.width/2):"";return x+b+(w+="L"+f+","+m)+_+"Z"}}function L(r,n){var i=f(n.color),a=c.nodePadAcross,o=r.nodePad/2;n.dx=n.x1-n.x0,n.dy=n.y1-n.y0;var s=n.dx,l=Math.max(.5,n.dy),u="node_"+n.pointNumber;return n.group&&(u=d.randstr()),n.trace=r.trace,n.curveNumber=r.trace.index,{index:n.pointNumber,key:u,partOfGroup:n.partOfGroup||!1,group:n.group,traceId:r.key,trace:r.trace,node:n,nodePad:r.nodePad,nodeLineColor:r.nodeLineColor,nodeLineWidth:r.nodeLineWidth,textFont:r.textFont,size:r.horizontal?r.height:r.width,visibleWidth:Math.ceil(s),visibleHeight:l,zoneX:-a,zoneY:-o,zoneWidth:s+2*a,zoneHeight:l+2*o,labelY:r.horizontal?n.dy/2+1:n.dx/2+1,left:1===n.originalLayer,sizeAcross:r.width,forceLayouts:r.forceLayouts,horizontal:r.horizontal,darkBackground:128>=i.getBrightness(),tinyColorHue:h.tinyRGB(i),tinyColorAlpha:i.getAlpha(),valueFormat:r.valueFormat,valueSuffix:r.valueSuffix,sankey:r.sankey,graph:r.graph,arrangement:r.arrangement,uniqueNodeLabelPathId:[r.guid,r.key,u].join("_"),interactionState:r.interactionState,figure:r}}function C(r){r.attr("transform",function(r){return v(r.node.x0.toFixed(3),r.node.y0.toFixed(3))})}function O(r){r.call(C)}function P(r,n){r.call(O),n.attr("d",E())}function I(r){r.attr("width",function(r){return r.node.x1-r.node.x0}).attr("height",function(r){return r.visibleHeight})}function D(r){return r.link.width>1||r.linkLineWidth>0}function z(r){return v(r.translateX,r.translateY)+(r.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function R(r,n,i){r.on(".basic",null).on("mouseover.basic",function(r){r.interactionState.dragInProgress||r.partOfGroup||(i.hover(this,r,n),r.interactionState.hovered=[this,r])}).on("mousemove.basic",function(r){r.interactionState.dragInProgress||r.partOfGroup||(i.follow(this,r),r.interactionState.hovered=[this,r])}).on("mouseout.basic",function(r){r.interactionState.dragInProgress||r.partOfGroup||(i.unhover(this,r,n),r.interactionState.hovered=!1)}).on("click.basic",function(r){r.interactionState.hovered&&(i.unhover(this,r,n),r.interactionState.hovered=!1),r.interactionState.dragInProgress||r.partOfGroup||i.select(this,r,n)})}function F(r,n,i,o){var l=s.behavior.drag().origin(function(r){return{x:r.node.x0+r.visibleWidth/2,y:r.node.y0+r.visibleHeight/2}}).on("dragstart",function(s){if("fixed"!==s.arrangement&&(d.ensureSingle(o._fullLayout._infolayer,"g","dragcover",function(r){o._fullLayout._dragCover=r}),d.raiseToTop(this),s.interactionState.dragInProgress=s.node,N(s.node),s.interactionState.hovered&&(i.nodeEvents.unhover.apply(0,s.interactionState.hovered),s.interactionState.hovered=!1),"snap"===s.arrangement)){var l,u=s.traceId+"|"+s.key;s.forceLayouts[u]?s.forceLayouts[u].alpha(1):(function(r){for(var n=0;n<r.length;n++)r[n].y=(r[n].y0+r[n].y1)/2,r[n].x=(r[n].x0+r[n].x1)/2}(s.graph.nodes),l=s.graph.nodes.filter(function(r){return r.originalX===s.node.originalX}).filter(function(r){return!r.partOfGroup}),s.forceLayouts[u]=a.forceSimulation(l).alphaDecay(0).force("collide",a.forceCollide().radius(function(r){return r.dy/2+s.nodePad/2}).strength(1).iterations(c.forceIterations)).force("constrain",function(){for(var r=0,n=0;n<l.length;n++){var i=l[n];i===s.interactionState.dragInProgress?(i.x=i.lastDraggedX,i.y=i.lastDraggedY):(i.vx=(i.originalX-i.x)/c.forceTicksPerFrame,i.y=Math.min(s.size-i.dy/2,Math.max(i.dy/2,i.y))),r=Math.max(r,Math.abs(i.vx),Math.abs(i.vy))}!s.interactionState.dragInProgress&&r<.1&&s.forceLayouts[u].alpha()>0&&s.forceLayouts[u].alpha(0)}).stop()),window.requestAnimationFrame(function i(){var a;for(a=0;a<c.forceTicksPerFrame;a++)s.forceLayouts[u].tick();if(function(r){for(var n=0;n<r.length;n++)r[n].y0=r[n].y-r[n].dy/2,r[n].y1=r[n].y0+r[n].dy,r[n].x0=r[n].x-r[n].dx/2,r[n].x1=r[n].x0+r[n].dx}(s.graph.nodes),s.sankey.update(s.graph),P(r.filter(j(s)),n),s.forceLayouts[u].alpha()>0)window.requestAnimationFrame(i);else{var l=s.node.originalX;s.node.x0=l-s.visibleWidth/2,s.node.x1=l+s.visibleWidth/2,B(s,o)}})}}).on("drag",function(i){if("fixed"!==i.arrangement){var a=s.event.x,o=s.event.y;"snap"===i.arrangement?(i.node.x0=a-i.visibleWidth/2,i.node.x1=a+i.visibleWidth/2):("freeform"===i.arrangement&&(i.node.x0=a-i.visibleWidth/2,i.node.x1=a+i.visibleWidth/2),o=Math.max(0,Math.min(i.size-i.visibleHeight/2,o))),i.node.y0=o-i.visibleHeight/2,i.node.y1=o+i.visibleHeight/2,N(i.node),"snap"!==i.arrangement&&(i.sankey.update(i.graph),P(r.filter(j(i)),n))}}).on("dragend",function(r){if("fixed"!==r.arrangement){r.interactionState.dragInProgress=!1;for(var n=0;n<r.node.childrenNodes.length;n++)r.node.childrenNodes[n].x=r.node.x,r.node.childrenNodes[n].y=r.node.y;"snap"!==r.arrangement&&B(r,o)}});r.on(".drag",null).call(l)}function B(r,n){for(var i=[],a=[],o=0;o<r.graph.nodes.length;o++){var s=(r.graph.nodes[o].x0+r.graph.nodes[o].x1)/2,l=(r.graph.nodes[o].y0+r.graph.nodes[o].y1)/2;i.push(s/r.figure.width),a.push(l/r.figure.height)}w.call("_guiRestyle",n,{"node.x":[i],"node.y":[a]},r.trace.index).then(function(){n._fullLayout._dragCover&&n._fullLayout._dragCover.remove()})}function N(r){r.lastDraggedX=r.x0+r.dx/2,r.lastDraggedY=r.y0+r.dy/2}function j(r){return function(n){return n.node.originalX===r.node.originalX}}r.exports=function(r,n,i,a,o){var l=r._context.staticPlot,u=!1;d.ensureSingle(r._fullLayout._infolayer,"g","first-render",function(){u=!0});var y=r._fullLayout._dragCover,w=i.filter(function(r){return b(r).trace.visible}).map(M.bind(null,a)),T=n.selectAll("."+c.cn.sankey).data(w,m);T.exit().remove(),T.enter().append("g").classed(c.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",l?"none":"auto").attr("transform",z),T.each(function(n,i){r._fullData[i]._sankey=n;var a="bgsankey-"+n.trace.uid+"-"+i;d.ensureSingle(r._fullLayout._draggers,"rect",a),r._fullData[i]._bgRect=s.select("."+a),r._fullData[i]._bgRect.style("pointer-events",l?"none":"all").attr("width",n.width).attr("height",n.height).attr("x",n.translateX).attr("y",n.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),T.transition().ease(c.ease).duration(c.duration).attr("transform",z);var O=T.selectAll("."+c.cn.sankeyLinks).data(x,m);O.enter().append("g").classed(c.cn.sankeyLinks,!0).style("fill","none");var P=O.selectAll("."+c.cn.sankeyLink).data(function(r){return r.graph.links.filter(function(r){return r.value}).map(S.bind(null,r))},m);P.enter().append("path").classed(c.cn.sankeyLink,!0).call(R,T,o.linkEvents),P.style("stroke",function(r){return D(r)?h.tinyRGB(f(r.linkLineColor)):r.tinyColorHue}).style("stroke-opacity",function(r){return D(r)?h.opacity(r.linkLineColor):r.tinyColorAlpha}).style("fill",function(r){return r.tinyColorHue}).style("fill-opacity",function(r){return r.tinyColorAlpha}).style("stroke-width",function(r){return D(r)?r.linkLineWidth:1}).attr("d",E()),P.style("opacity",function(){return r._context.staticPlot||u||y?1:0}).transition().ease(c.ease).duration(c.duration).style("opacity",1),P.exit().transition().ease(c.ease).duration(c.duration).style("opacity",0).remove();var B=T.selectAll("."+c.cn.sankeyNodeSet).data(x,m);B.enter().append("g").classed(c.cn.sankeyNodeSet,!0),B.style("cursor",function(r){switch(r.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var N=B.selectAll("."+c.cn.sankeyNode).data(function(r){var n=r.graph.nodes;return function(r){var n,i=[];for(n=0;n<r.length;n++)r[n].originalX=(r[n].x0+r[n].x1)/2,r[n].originalY=(r[n].y0+r[n].y1)/2,-1===i.indexOf(r[n].originalX)&&i.push(r[n].originalX);for(i.sort(function(r,n){return r-n}),n=0;n<r.length;n++)r[n].originalLayerIndex=i.indexOf(r[n].originalX),r[n].originalLayer=r[n].originalLayerIndex/(i.length-1)}(n),n.map(L.bind(null,r))},m);N.enter().append("g").classed(c.cn.sankeyNode,!0).call(C).style("opacity",function(n){return(r._context.staticPlot||u)&&!n.partOfGroup?1:0}),N.call(R,T,o.nodeEvents).call(F,P,o,r),N.transition().ease(c.ease).duration(c.duration).call(C).style("opacity",function(r){return r.partOfGroup?0:1}),N.exit().transition().ease(c.ease).duration(c.duration).style("opacity",0).remove();var j=N.selectAll("."+c.cn.nodeRect).data(x);j.enter().append("rect").classed(c.cn.nodeRect,!0).call(I),j.style("stroke-width",function(r){return r.nodeLineWidth}).style("stroke",function(r){return h.tinyRGB(f(r.nodeLineColor))}).style("stroke-opacity",function(r){return h.opacity(r.nodeLineColor)}).style("fill",function(r){return r.tinyColorHue}).style("fill-opacity",function(r){return r.tinyColorAlpha}),j.transition().ease(c.ease).duration(c.duration).call(I);var U=N.selectAll("."+c.cn.nodeLabel).data(x);U.enter().append("text").classed(c.cn.nodeLabel,!0).style("cursor","default"),U.attr("data-notex",1).text(function(r){return r.node.label}).each(function(n){var i=s.select(this);p.font(i,n.textFont),_.convertToTspans(i,r)}).style("text-shadow",_.makeTextShadow(r._fullLayout.paper_bgcolor)).attr("text-anchor",function(r){return r.horizontal&&r.left?"end":"start"}).attr("transform",function(r){var n=s.select(this),i=_.lineCount(n),a=r.textFont.size*((i-1)*A-k),o=r.nodeLineWidth/2+3,l=((r.horizontal?r.visibleHeight:r.visibleWidth)-a)/2;r.horizontal&&(r.left?o=-o:o+=r.visibleWidth);var u=r.horizontal?"":"scale(-1,1)"+g(90);return v(r.horizontal?o:l,r.horizontal?l:o)+u}),U.transition().ease(c.ease).duration(c.duration)}},84564:function(r){"use strict";r.exports=function(r,n){for(var i=[],a=r.cd[0].trace,o=a._sankey.graph.nodes,s=0;s<o.length;s++){var l=o[s];if(!l.partOfGroup){var u=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];"v"===a.orientation&&u.reverse(),n&&n.contains(u,!1,s,r)&&i.push({pointNumber:l.pointNumber})}}return i}},75225:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){for(var i=0;i<r.length;i++)r[i].i=i;a.mergeArray(n.text,r,"tx"),a.mergeArray(n.texttemplate,r,"txt"),a.mergeArray(n.hovertext,r,"htx"),a.mergeArray(n.customdata,r,"data"),a.mergeArray(n.textposition,r,"tp"),n.textfont&&(a.mergeArrayCastPositive(n.textfont.size,r,"ts"),a.mergeArray(n.textfont.color,r,"tc"),a.mergeArray(n.textfont.family,r,"tf"));var o=n.marker;if(o){a.mergeArrayCastPositive(o.size,r,"ms"),a.mergeArrayCastPositive(o.opacity,r,"mo"),a.mergeArray(o.symbol,r,"mx"),a.mergeArray(o.angle,r,"ma"),a.mergeArray(o.standoff,r,"mf"),a.mergeArray(o.color,r,"mc");var s=o.line;o.line&&(a.mergeArray(s.color,r,"mlc"),a.mergeArrayCastPositive(s.width,r,"mlw"));var l=o.gradient;l&&"none"!==l.type&&(a.mergeArray(l.type,r,"mgt"),a.mergeArray(l.color,r,"mgc"))}}},82196:function(r,n,i){"use strict";var a=i(12663).axisHoverFormat,o=i(5386).si,s=i(5386).fF,l=i(50693),u=i(41940),c=i(79952).P,f=i(79952).u,h=i(91424),p=i(47581),d=i(1426).extendFlat;r.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:a("x"),yhoverformat:a("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:o({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:s({},{keys:p.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:d({},c,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:f,marker:d({symbol:{valType:"enumerated",values:h.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},l("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},l("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:u({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(89298),l=i(42973),u=i(50606).BADNUM,c=i(34098),f=i(36922),h=i(75225),p=i(66279);function d(r,n,i,a,o,l,u){var f=n._length,h=r._fullLayout,p=i._id,d=a._id,v=h._firstScatter[y(n)]===n.uid,g=(m(n,h,i,a)||{}).orientation,x=n.fill;i._minDtick=0,a._minDtick=0;var b={padded:!0},_={padded:!0};u&&(b.ppad=_.ppad=u);var w=f<2||o[0]!==o[f-1]||l[0]!==l[f-1];w&&("tozerox"===x||"tonextx"===x&&(v||"h"===g))?b.tozero=!0:(n.error_y||{}).visible||"tonexty"!==x&&"tozeroy"!==x&&(c.hasMarkers(n)||c.hasText(n))||(b.padded=!1,b.ppad=0),w&&("tozeroy"===x||"tonexty"===x&&(v||"v"===g))?_.tozero=!0:"tonextx"!==x&&"tozerox"!==x||(_.padded=!1),p&&(n._extremes[p]=s.findExtremes(i,o,b)),d&&(n._extremes[d]=s.findExtremes(a,l,_))}function v(r,n){if(c.hasMarkers(r)){var i,a=r.marker,l=1.6*(r.marker.sizeref||1);if(i="area"===r.marker.sizemode?function(r){return Math.max(Math.sqrt((r||0)/l),3)}:function(r){return Math.max((r||0)/l,3)},o.isArrayOrTypedArray(a.size)){var u={type:"linear"};s.setConvert(u);for(var f=u.makeCalcdata(r.marker,"size"),h=Array(n),p=0;p<n;p++)h[p]=i(f[p]);return h}return i(a.size)}}function g(r,n){var i=y(n),a=r._firstScatter;a[i]||(a[i]=n.uid)}function y(r){var n=r.stackgroup;return r.xaxis+r.yaxis+r.type+(n?"-"+n:"")}function m(r,n,i,a){var o=r.stackgroup;if(o){var s=n._scatterStackOpts[i._id+a._id][o],l="v"===s.orientation?a:i;return"linear"===l.type||"log"===l.type?s:void 0}}r.exports={calc:function(r,n){var i,c,y,x,b,_,w=r._fullLayout,T=n._xA=s.getFromId(r,n.xaxis||"x","x"),k=n._yA=s.getFromId(r,n.yaxis||"y","y"),A=T.makeCalcdata(n,"x"),M=k.makeCalcdata(n,"y"),S=l(n,T,"x",A),E=l(n,k,"y",M),L=S.vals,C=E.vals,O=n._length,P=Array(O),I=n.ids,D=m(n,w,T,k),z=!1;g(w,n);var R,F="x",B="y";D?(o.pushUnique(D.traceIndices,n._expandedIndex),(i="v"===D.orientation)?(B="s",R="x"):(F="s",R="y"),b="interpolate"===D.stackgaps):d(r,n,T,k,L,C,v(n,O));var N=!!n.xperiodalignment,j=!!n.yperiodalignment;for(c=0;c<O;c++){var U=P[c]={},V=a(L[c]),H=a(C[c]);V&&H?(U[F]=L[c],U[B]=C[c],N&&(U.orig_x=A[c],U.xEnd=S.ends[c],U.xStart=S.starts[c]),j&&(U.orig_y=M[c],U.yEnd=E.ends[c],U.yStart=E.starts[c])):D&&(i?V:H)?(U[R]=i?L[c]:C[c],U.gap=!0,b?(U.s=u,z=!0):U.s=0):U[F]=U[B]=u,I&&(U.id=String(I[c]))}if(h(P,n),f(r,n),p(P,n),D){for(c=0;c<P.length;)P[c][R]===u?P.splice(c,1):c++;if(o.sort(P,function(r,n){return r[R]-n[R]||r.i-n.i}),z){for(c=0;c<P.length-1&&P[c].gap;)c++;for((_=P[c].s)||(_=P[c].s=0),y=0;y<c;y++)P[y].s=_;for(x=P.length-1;x>c&&P[x].gap;)x--;for(_=P[x].s,y=P.length-1;y>x;y--)P[y].s=_;for(;c<x;)if(P[++c].gap){for(y=c+1;P[y].gap;)y++;for(var q=P[c-1][R],G=P[c-1].s,Z=(P[y].s-G)/(P[y][R]-q);c<y;)P[c].s=G+(P[c][R]-q)*Z,c++}}}return P},calcMarkerSize:v,calcAxisExpansion:d,setFirstScatter:g,getStackOpts:m}},66279:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){a.isArrayOrTypedArray(n.selectedpoints)&&a.tagSelected(r,n)}},36922:function(r,n,i){"use strict";var a=i(52075).hasColorscale,o=i(78803),s=i(34098);r.exports=function(r,n){s.hasLines(n)&&a(n,"line")&&o(r,n,{vals:n.line.color,containerStr:"line",cLetter:"c"}),s.hasMarkers(n)&&(a(n,"marker")&&o(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),a(n,"marker.line")&&o(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(r){"use strict";r.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(r,n,i){"use strict";var a=i(47761),o=i(11661).setGroupPositions;function s(r,n,i,a,o,s,l){o[a]=!0;var u,c,f={i:null,gap:!0,s:0};if(f[l]=i,r.splice(n,0,f),n&&i===r[n-1][l]){var h=r[n-1];f.s=h.s,f.i=h.i,f.gap=h.gap}else s&&(f.s=(u=r[n-1],(c=r[n+1])?u?u.s+(c.s-u.s)*(i-u[l])/(c[l]-u[l]):c.s:u.s));n||(r[0].t=r[1].t,r[0].trace=r[1].trace,delete r[1].t,delete r[1].trace)}r.exports=function(r,n){"group"===r._fullLayout.scattermode&&function(r,n){for(var i=n.xaxis,a=n.yaxis,s=r._fullLayout,l=r._fullData,u=r.calcdata,c=[],f=[],h=0;h<l.length;h++){var p=l[h];!0===p.visible&&"scatter"===p.type&&p.xaxis===i._id&&p.yaxis===a._id&&("h"===p.orientation?c.push(u[h]):"v"===p.orientation&&f.push(u[h]))}var d={mode:s.scattermode,gap:s.scattergap};o(r,i,a,f,d),o(r,a,i,c,d)}(r,n);var i=n.xaxis,l=n.yaxis,u=i._id+l._id,c=r._fullLayout._scatterStackOpts[u];if(c){var f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,M=r.calcdata;for(var S in c){var E=(b=c[S]).traceIndices;if(E.length){for(_="interpolate"===b.stackgaps,w=b.groupnorm,"v"===b.orientation?(T="x",k="y"):(T="y",k="x"),A=Array(E.length),f=0;f<A.length;f++)A[f]=!1;var L=Array((g=M[E[0]]).length);for(f=0;f<g.length;f++)L[f]=g[f][T];for(f=1;f<E.length;f++){for(v=M[E[f]],h=p=0;h<v.length;h++){for(y=v[h][T];y>L[p]&&p<L.length;p++)s(v,h,L[p],f,A,_,T),h++;if(y!==L[p]){for(d=0;d<f;d++)s(M[E[d]],p,y,d,A,_,T);L.splice(p,0,y)}p++}for(;p<L.length;p++)s(v,h,L[p],f,A,_,T),h++}var C=L.length;for(h=0;h<g.length;h++){for(m=g[h][k]=g[h].s,f=1;f<E.length;f++)(v=M[E[f]])[0].trace._rawLength=v[0].trace._length,v[0].trace._length=C,m+=v[h].s,v[h][k]=m;if(w)for(x=("fraction"===w?m:m/100)||1,f=0;f<E.length;f++){var O=M[E[f]][h];O[k]/=x,O.sNorm=O.s/x}}for(f=0;f<E.length;f++){var P=(v=M[E[f]])[0].trace,I=a.calcMarkerSize(P,P._rawLength),D=Array.isArray(I);if(I&&A[f]||D){var z=I;for(I=Array(C),h=0;h<C;h++)I[h]=v[h].gap?0:D?z[v[h].i]:z}var R=Array(C),F=Array(C);for(h=0;h<C;h++)R[h]=v[h].x,F[h]=v[h].y;a.calcAxisExpansion(r,P,i,l,R,F,I),v[0].t.orientation=b.orientation}}}}}},34936:function(r,n,i){"use strict";var a=i(71828),o=i(26125),s=i(82196);r.exports=function(r,n){var i,l;function u(r){return a.coerce(i._input,i,s,r)}if("group"===n.scattermode)for(l=0;l<r.length;l++)"scatter"===(i=r[l]).type&&o(i._input,i,n,u);for(l=0;l<r.length;l++){var c=r[l];if("scatter"===c.type){var f=c.fill;if("none"!==f&&"toself"!==f&&(c.opacity=void 0,"tonexty"===f||"tonextx"===f))for(var h=l-1;h>=0;h--){var p=r[h];if("scatter"===p.type&&p.xaxis===c.xaxis&&p.yaxis===c.yaxis){p.opacity=void 0;break}}}}}},17438:function(r,n,i){"use strict";var a=i(71828),o=i(73972),s=i(82196),l=i(47581),u=i(34098),c=i(67513),f=i(73927),h=i(565),p=i(49508),d=i(11058),v=i(94039),g=i(82410),y=i(28908),m=i(71828).coercePattern;r.exports=function(r,n,i,x){function b(i,o){return a.coerce(r,n,s,i,o)}var _=c(r,n,x,b);if(_||(n.visible=!1),n.visible){f(r,n,x,b),b("xhoverformat"),b("yhoverformat");var w=h(r,n,x,b);"group"===x.scattermode&&void 0===n.orientation&&b("orientation","v");var T=!w&&_<l.PTS_LINESONLY?"lines+markers":"lines";b("text"),b("hovertext"),b("mode",T),u.hasMarkers(n)&&p(r,n,i,x,b,{gradient:!0}),u.hasLines(n)&&(d(r,n,i,x,b,{backoff:!0}),v(r,n,b),b("connectgaps"),b("line.simplify")),u.hasText(n)&&(b("texttemplate"),g(r,n,x,b));var k=[];(u.hasMarkers(n)||u.hasText(n))&&(b("cliponaxis"),b("marker.maxdisplayed"),k.push("points")),b("fill",w?w.fillDflt:"none"),"none"!==n.fill&&(y(r,n,i,b),u.hasLines(n)||v(r,n,b),m(b,"fillpattern",n.fillcolor,!1));var A=(n.line||{}).color,M=(n.marker||{}).color;"tonext"!==n.fill&&"toself"!==n.fill||k.push("fills"),b("hoveron",k.join("+")||"points"),"fills"!==n.hoveron&&b("hovertemplate");var S=o.getComponentMethod("errorbars","supplyDefaults");S(r,n,A||M||i,{axis:"y"}),S(r,n,A||M||i,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(n,b)}}},28908:function(r,n,i){"use strict";var a=i(7901),o=i(71828).isArrayOrTypedArray;r.exports=function(r,n,i,s){var l=!1;if(n.marker){var u=n.marker.color,c=(n.marker.line||{}).color;u&&!o(u)?l=u:c&&!o(c)&&(l=c)}s("fillcolor",a.addOpacity((n.line||{}).color||l||i,.5))}},8225:function(r,n,i){"use strict";var a=i(89298);r.exports=function(r,n,i){var o={},s={_fullLayout:i},l=a.getFromTrace(s,n,"x"),u=a.getFromTrace(s,n,"y"),c=r.orig_x;void 0===c&&(c=r.x);var f=r.orig_y;return void 0===f&&(f=r.y),o.xLabel=a.tickText(l,l.c2l(c),!0).text,o.yLabel=a.tickText(u,u.c2l(f),!0).text,o}},34603:function(r,n,i){"use strict";var a=i(7901),o=i(34098);r.exports=function(r,n){if("lines"===r.mode)return(i=r.line.color)&&a.opacity(i)?i:r.fillcolor;if("none"===r.mode)return r.fill?r.fillcolor:"";var i,s,l=n.mcc||(r.marker||{}).color,u=n.mlcc||((r.marker||{}).line||{}).color;return(s=l&&a.opacity(l)?l:u&&a.opacity(u)&&(n.mlw||((r.marker||{}).line||{}).width)?u:"")?.3>a.opacity(s)?a.addOpacity(s,.3):s:(i=(r.line||{}).color)&&a.opacity(i)&&o.hasLines(r)&&r.line.width?i:r.fillcolor}},26125:function(r,n,i){"use strict";var a=i(99082).getAxisGroup;r.exports=function(r,n,i,o){var s=n.orientation,l=a(i,n[({v:"x",h:"y"})[s]+"axis"])+s,u=i._alignmentOpts||{},c=o("alignmentgroup"),f=u[l];f||(f=u[l]={});var h=f[c];h?h.traces.push(n):h=f[c]={traces:[n],alignmentIndex:Object.keys(f).length,offsetGroups:{}};var p=o("offsetgroup"),d=h.offsetGroups,v=d[p];p&&(v||(v=d[p]={offsetIndex:Object.keys(d).length}),n._offsetIndex=v.offsetIndex)}},33720:function(r,n,i){"use strict";var a=i(71828),o=i(30211),s=i(73972),l=i(34603),u=i(7901),c=a.fillText;r.exports=function(r,n,i,f){var h=r.cd,p=h[0].trace,d=r.xa,v=r.ya,g=d.c2p(n),y=v.c2p(i),m=[g,y],x=p.hoveron||"",b=-1!==p.mode.indexOf("markers")?3:.5,_=!!p.xperiodalignment,w=!!p.yperiodalignment;if(-1!==x.indexOf("points")){var T=function(r){var n=Math.max(b,r.mrc||0),i=d.c2p(r.x)-g,a=v.c2p(r.y)-y;return Math.max(Math.sqrt(i*i+a*a)-n,1-b/n)},k=o.getDistanceFunction(f,function(r){if(_){var n=d.c2p(r.xStart),i=d.c2p(r.xEnd);return g>=Math.min(n,i)&&g<=Math.max(n,i)?0:1/0}var a=Math.max(3,r.mrc||0),o=1-1/a,s=Math.abs(d.c2p(r.x)-g);return s<a?o*s/a:s-a+o},function(r){if(w){var n=v.c2p(r.yStart),i=v.c2p(r.yEnd);return y>=Math.min(n,i)&&y<=Math.max(n,i)?0:1/0}var a=Math.max(3,r.mrc||0),o=1-1/a,s=Math.abs(v.c2p(r.y)-y);return s<a?o*s/a:s-a+o},T);if(o.getClosest(h,k,r),!1!==r.index){var A=h[r.index],M=d.c2p(A.x,!0),S=v.c2p(A.y,!0),E=A.mrc||1;r.index=A.i;var L=h[0].t.orientation,C=L&&(A.sNorm||A.s),O="h"===L?C:void 0!==A.orig_x?A.orig_x:A.x,P="v"===L?C:void 0!==A.orig_y?A.orig_y:A.y;return a.extendFlat(r,{color:l(p,A),x0:M-E,x1:M+E,xLabelVal:O,y0:S-E,y1:S+E,yLabelVal:P,spikeDistance:T(A),hovertemplate:p.hovertemplate}),c(A,p,r),s.getComponentMethod("errorbars","hoverInfo")(A,p,r),[r]}}if(-1!==x.indexOf("fills")&&p._polygons){var I,D,z,R,F,B,N,j,U,V=p._polygons,H=[],q=!1,G=1/0,Z=-1/0,Y=1/0,W=-1/0;for(I=0;I<V.length;I++)(z=V[I]).contains(m)&&(q=!q,H.push(z),Y=Math.min(Y,z.ymin),W=Math.max(W,z.ymax));if(q){var X=((Y=Math.max(Y,0))+(W=Math.min(W,v._length)))/2;for(I=0;I<H.length;I++)for(R=H[I].pts,D=1;D<R.length;D++)(j=R[D-1][1])>X!=(U=R[D][1])>=X&&(B=R[D-1][0],N=R[D][0],U-j&&(G=Math.min(G,F=B+(N-B)*(X-j)/(U-j)),Z=Math.max(Z,F)));G=Math.max(G,0),Z=Math.min(Z,d._length);var J=u.defaultLine;return u.opacity(p.fillcolor)?J=p.fillcolor:u.opacity((p.line||{}).color)&&(J=p.line.color),a.extendFlat(r,{distance:r.maxHoverDistance,x0:G,x1:Z,y0:X,y1:X,color:J,hovertemplate:!1}),delete r.index,p.text&&!a.isArrayOrTypedArray(p.text)?r.text=String(p.text):r.text=p.name,[r]}}}},67368:function(r,n,i){"use strict";var a=i(34098);r.exports={hasLines:a.hasLines,hasMarkers:a.hasMarkers,hasText:a.hasText,isBubble:a.isBubble,attributes:i(82196),layoutAttributes:i(21479),supplyDefaults:i(17438),crossTraceDefaults:i(34936),supplyLayoutDefaults:i(79334),calc:i(47761).calc,crossTraceCalc:i(72626),arraysToCalcdata:i(75225),plot:i(32663),colorbar:i(4898),formatLabels:i(8225),style:i(16296).style,styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(33720),selectPoints:i(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:i(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(r){"use strict";r.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(r,n,i){"use strict";var a=i(71828),o=i(21479);r.exports=function(r,n){var i,s="group"===n.barmode;"group"===n.scattermode&&(i=s?n.bargap:.2,a.coerce(r,n,o,"scattergap",i))}},11058:function(r,n,i){"use strict";var a=i(71828).isArrayOrTypedArray,o=i(52075).hasColorscale,s=i(1586);r.exports=function(r,n,i,l,u,c){c||(c={});var f=(r.marker||{}).color;f&&f._inputArray&&(f=f._inputArray),u("line.color",i),o(r,"line")?s(r,n,l,u,{prefix:"line.",cLetter:"c"}):u("line.color",!a(f)&&f||i),u("line.width"),c.noDash||u("line.dash"),c.backoff&&u("line.backoff")}},34621:function(r,n,i){"use strict";var a=i(91424),o=i(50606),s=o.BADNUM,l=o.LOG_CLIP,u=l+.5,c=l-.5,f=i(71828),h=f.segmentsIntersect,p=f.constrain,d=i(47581);r.exports=function(r,n){var i,o,l,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C=n.trace||{},O=n.xaxis,P=n.yaxis,I="log"===O.type,D="log"===P.type,z=O._length,R=P._length,F=n.backoff,B=C.marker,N=n.connectGaps,j=n.baseTolerance,U=n.shape,V="linear"===U,H=C.fill&&"none"!==C.fill,q=[],G=d.minTolerance,Z=r.length,Y=Array(Z),W=0;function X(i){var a=r[i];if(!a)return!1;var o=n.linearized?O.l2p(a.x):O.c2p(a.x),l=n.linearized?P.l2p(a.y):P.c2p(a.y);if(o===s){if(I&&(o=O.c2p(a.x,!0)),o===s)return!1;D&&l===s&&(o*=Math.abs(O._m*R*(O._m>0?u:c)/(P._m*z*(P._m>0?u:c)))),o*=1e3}if(l===s){if(D&&(l=P.c2p(a.y,!0)),l===s)return!1;l*=1e3}return[o,l]}function J(r,n,i,a){var o=i-r,s=a-n,l=.5-r,u=.5-n,c=o*o+s*s,f=o*l+s*u;if(f>0&&f<c){var h=l*s-u*o;if(h*h<c)return!0}}function K(r,n){var i=r[0]/z,a=r[1]/R,o=Math.max(0,-i,i-1,-a,a-1);return o&&void 0!==E&&J(i,a,E,L)&&(o=0),o&&n&&J(i,a,n[0]/z,n[1]/R)&&(o=0),(1+d.toleranceGrowth*o)*j}function $(r,n){var i=r[0]-n[0],a=r[1]-n[1];return Math.sqrt(i*i+a*a)}var Q,tt,te,tr,tn,ti,ta,to=d.maxScreensAway,ts=-z*to,tl=z*(1+to),tu=-R*to,tc=R*(1+to),tf=[[ts,tu,tl,tu],[tl,tu,tl,tc],[tl,tc,ts,tc],[ts,tc,ts,tu]];function th(r){if(r[0]<ts||r[0]>tl||r[1]<tu||r[1]>tc)return[p(r[0],ts,tl),p(r[1],tu,tc)]}function tp(r,n){return r[0]===n[0]&&(r[0]===ts||r[0]===tl)||r[1]===n[1]&&(r[1]===tu||r[1]===tc)||void 0}function td(r,n,i){return function(a,o){var s=th(a),l=th(o),u=[];if(s&&l&&tp(s,l))return u;s&&u.push(s),l&&u.push(l);var c=2*f.constrain((a[r]+o[r])/2,n,i)-((s||a)[r]+(l||o)[r]);return c&&((s&&l?c>0==s[r]>l[r]?s:l:s||l)[r]+=c),u}}function tv(r){var n=r[0],i=r[1],a=n===Y[W-1][0],o=i===Y[W-1][1];if(!a||!o){if(W>1){var s=n===Y[W-2][0],l=i===Y[W-2][1];a&&(n===ts||n===tl)&&s?l?W--:Y[W-1]=r:o&&(i===tu||i===tc)&&l?s?W--:Y[W-1]=r:Y[W++]=r}else Y[W++]=r}}function tg(r){Y[W-1][0]!==r[0]&&Y[W-1][1]!==r[1]&&tv([te,tr]),tv(r),tn=null,te=tr=0}"linear"===U||"spline"===U?ta=function(r,n){for(var i=[],a=0,o=0;o<4;o++){var s=tf[o],l=h(r[0],r[1],n[0],n[1],s[0],s[1],s[2],s[3]);l&&(!a||Math.abs(l.x-i[0][0])>1||Math.abs(l.y-i[0][1])>1)&&(l=[l.x,l.y],a&&$(l,r)<$(i[0],r)?i.unshift(l):i.push(l),a++)}return i}:"hv"===U||"vh"===U?ta=function(r,n){var i=[],a=th(r),o=th(n);return a&&o&&tp(a,o)||(a&&i.push(a),o&&i.push(o)),i}:"hvh"===U?ta=td(0,ts,tl):"vhv"===U&&(ta=td(1,tu,tc));var ty=f.isArrayOrTypedArray(B);function tm(n){if(n&&F&&(n.i=i,n.d=r,n.trace=C,n.marker=ty?B[n.i]:B,n.backoff=F),E=n[0]/z,L=n[1]/R,Q=n[0]<ts?ts:n[0]>tl?tl:0,tt=n[1]<tu?tu:n[1]>tc?tc:0,Q||tt){if(W){if(tn){var a,o,s,l=ta(tn,n);l.length>1&&(tg(l[0]),Y[W++]=l[1])}else ti=ta(Y[W-1],n)[0],Y[W++]=ti}else Y[W++]=[Q||n[0],tt||n[1]];var u=Y[W-1];Q&&tt&&(u[0]!==Q||u[1]!==tt)?(tn&&(te!==Q&&tr!==tt?tv(te&&tr?(a=tn,o=n[0]-a[0],s=(n[1]-a[1])/o,(a[1]*n[0]-n[1]*a[0])/o>0?[s>0?ts:tl,tc]:[s>0?tl:ts,tu]):[te||Q,tr||tt]):te&&tr&&tv([te,tr])),tv([Q,tt])):te-Q&&tr-tt&&tv([Q||te,tt||tr]),tn=n,te=Q,tr=tt}else tn&&tg(ta(tn,n)[0]),Y[W++]=n}for(i=0;i<Z;i++)if(o=X(i)){for(W=0,tn=null,tm(o),i++;i<Z;i++){if(!(v=X(i))){if(N)continue;break}if(V&&n.simplify){var tx=X(i+1);if(_=$(v,o),H&&(0===W||W===Z-1)||!(_<K(v,tx)*G)){for(x=[(v[0]-o[0])/_,(v[1]-o[1])/_],g=o,w=_,T=A=M=0,m=!1,l=v,i++;i<r.length;i++){if(y=tx,tx=X(i+1),!y){if(N)continue;break}if(A=Math.min(A,S=(b=[y[0]-o[0],y[1]-o[1]])[0]*x[1]-b[1]*x[0]),(M=Math.max(M,S))-A>K(y,tx))break;l=y,(k=b[0]*x[0]+b[1]*x[1])>w?(w=k,v=y,m=!1):k<T&&(T=k,g=y,m=!0)}if(m?(tm(v),l!==g&&tm(g)):(g!==o&&tm(g),l!==v&&tm(v)),tm(l),i>=r.length||!y)break;tm(y),o=y}}else tm(v)}tn&&tv([te||tn[0],tr||tn[1]]),q.push(Y.slice(0,W))}var tb=U.slice(U.length-1);if(F&&"h"!==tb&&"v"!==tb){for(var t_=!1,tw=-1,tT=[],tk=0;tk<q.length;tk++)for(var tA=0;tA<q[tk].length-1;tA++){var tM=q[tk][tA],tS=q[tk][tA+1],tE=a.applyBackoff(tS,tM);tE[0]===tS[0]&&tE[1]===tS[1]||(t_=!0),tT[tw+1]||(tT[++tw]=[tM,[tE[0],tE[1]]])}return t_?tT:q}return q}},94039:function(r){"use strict";r.exports=function(r,n,i){"spline"===i("line.shape")&&i("line.smoothing")}},68687:function(r){"use strict";var n={tonextx:1,tonexty:1,tonext:1};r.exports=function(r,i,a){var o,s,l,u,c,f={},h=!1,p=-1,d=0,v=-1;for(s=0;s<a.length;s++)(l=(o=a[s][0].trace).stackgroup||"")?l in f?c=f[l]:(c=f[l]=d,d++):o.fill in n&&v>=0?c=v:(c=v=d,d++),c<p&&(h=!0),o._groupIndex=p=c;var g=a.slice();h&&g.sort(function(r,n){var i=r[0].trace,a=n[0].trace;return i._groupIndex-a._groupIndex||i.index-a.index});var y={};for(s=0;s<g.length;s++)l=(o=g[s][0].trace).stackgroup||"",!0===o.visible?(o._nexttrace=null,o.fill in n&&(u=y[l],o._prevtrace=u||null,u&&(u._nexttrace=o)),o._ownfill=o.fill&&("tozero"===o.fill.substr(0,6)||"toself"===o.fill||"to"===o.fill.substr(0,2)&&!o._prevtrace),y[l]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return g}},39984:function(r,n,i){"use strict";var a=i(92770);r.exports=function(r,n){n||(n=2);var i=r.marker,o=i.sizeref||1,s=i.sizemin||0,l="area"===i.sizemode?function(r){return Math.sqrt(r/o)}:function(r){return r/o};return function(r){var i=l(r/n);return a(i)&&i>0?Math.max(i,s):0}}},4898:function(r){"use strict";r.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(r,n,i){"use strict";var a=i(7901),o=i(52075).hasColorscale,s=i(1586),l=i(34098);r.exports=function(r,n,i,u,c,f){var h=l.isBubble(r),p=(r.line||{}).color;f=f||{},p&&(i=p),c("marker.symbol"),c("marker.opacity",h?.7:1),c("marker.size"),f.noAngle||(c("marker.angle"),f.noAngleRef||c("marker.angleref"),f.noStandOff||c("marker.standoff")),c("marker.color",i),o(r,"marker")&&s(r,n,u,c,{prefix:"marker.",cLetter:"c"}),f.noSelect||(c("selected.marker.color"),c("unselected.marker.color"),c("selected.marker.size"),c("unselected.marker.size")),f.noLine||(c("marker.line.color",p&&!Array.isArray(p)&&n.marker.color!==p?p:h?a.background:a.defaultLine),o(r,"marker.line")&&s(r,n,u,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width",h?1:0)),h&&(c("marker.sizeref"),c("marker.sizemin"),c("marker.sizemode")),f.gradient&&"none"!==c("marker.gradient.type")&&c("marker.gradient.color")}},73927:function(r,n,i){"use strict";var a=i(71828).dateTick0,o=i(50606).ONEWEEK;function s(r,n){return a(n,r%o==0?1:0)}r.exports=function(r,n,i,a,o){if(o||(o={x:!0,y:!0}),o.x){var l=a("xperiod");l&&(a("xperiod0",s(l,n.xcalendar)),a("xperiodalignment"))}if(o.y){var u=a("yperiod");u&&(a("yperiod0",s(u,n.ycalendar)),a("yperiodalignment"))}}},32663:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(71828),l=s.ensureSingle,u=s.identity,c=i(91424),f=i(34098),h=i(34621),p=i(68687),d=i(61082).tester;function v(r,n,i,p,v,g,y){var m,x=r._context.staticPlot;!function(r,n,i,o,l){var u=i.xaxis,c=i.yaxis,h=a.extent(s.simpleMap(u.range,u.r2c)),p=a.extent(s.simpleMap(c.range,c.r2c)),d=o[0].trace;if(f.hasMarkers(d)){var v=d.marker.maxdisplayed;if(0!==v){var g=o.filter(function(r){return r.x>=h[0]&&r.x<=h[1]&&r.y>=p[0]&&r.y<=p[1]}),y=Math.ceil(g.length/v),m=0;l.forEach(function(r,i){var a=r[0].trace;f.hasMarkers(a)&&a.marker.maxdisplayed>0&&i<n&&m++});var x=Math.round(m*y/3+Math.floor(m/3)*y/7.1);o.forEach(function(r){delete r.vis}),g.forEach(function(r,n){0===Math.round((n+x)%y)&&(r.vis=!0)})}}}(0,n,i,p,v);var b=!!y&&y.duration>0;function _(r){return b?r.transition():r}var w=i.xaxis,T=i.yaxis,k=p[0].trace,A=k.line,M=a.select(g),S=l(M,"g","errorbars"),E=l(M,"g","lines"),L=l(M,"g","points"),C=l(M,"g","text");if(o.getComponentMethod("errorbars","plot")(r,S,i,y),!0===k.visible){_(M).style("opacity",k.opacity);var O=k.fill.charAt(k.fill.length-1);"x"!==O&&"y"!==O&&(O=""),p[0][i.isRangePlot?"nodeRangePlot3":"node3"]=M;var P,I,D,z,R="",F=[],B=k._prevtrace;B&&(R=B._prevRevpath||"",I=B._nextFill,F=B._polygons);var N,j,U,V,H,q,G,Z="",Y="",W=[],X=s.noop;if(P=k._ownFill,f.hasLines(k)||"none"!==k.fill){for(I&&I.datum(p),-1!==["hv","vh","hvh","vhv"].indexOf(A.shape)?(N=c.steps(A.shape),j=c.steps(A.shape.split("").reverse().join(""))):N=j="spline"===A.shape?function(r){var n=r[r.length-1];return r.length>1&&r[0][0]===n[0]&&r[0][1]===n[1]?c.smoothclosed(r.slice(1),A.smoothing):c.smoothopen(r,A.smoothing)}:function(r){return"M"+r.join("L")},U=function(r){return j(r.reverse())},W=h(p,{xaxis:w,yaxis:T,trace:k,connectGaps:k.connectgaps,baseTolerance:Math.max(A.width||1,3)/4,shape:A.shape,backoff:A.backoff,simplify:A.simplify,fill:k.fill}),G=k._polygons=Array(W.length),m=0;m<W.length;m++)k._polygons[m]=d(W[m]);W.length&&(V=W[0][0],q=(H=W[W.length-1])[H.length-1]),X=function(r){return function(n){if(D=N(n),z=U(n),Z?O?(Z+="L"+D.substr(1),Y=z+"L"+Y.substr(1)):(Z+="Z"+D,Y=z+"Z"+Y):(Z=D,Y=z),f.hasLines(k)){var i=a.select(this);if(i.datum(p),r)_(i.style("opacity",0).attr("d",D).call(c.lineGroupStyle)).style("opacity",1);else{var o=_(i);o.attr("d",D),c.singleLineStyle(p,o)}}}}}var J=E.selectAll(".js-line").data(W);_(J.exit()).style("opacity",0).remove(),J.each(X(!1)),J.enter().append("path").classed("js-line",!0).style("vector-effect",x?"none":"non-scaling-stroke").call(c.lineGroupStyle).each(X(!0)),c.setClipUrl(J,i.layerClipId,r),W.length?(P?(P.datum(p),V&&q&&(O?("y"===O?V[1]=q[1]=T.c2p(0,!0):"x"===O&&(V[0]=q[0]=w.c2p(0,!0)),_(P).attr("d","M"+q+"L"+V+"L"+Z.substr(1)).call(c.singleFillStyle,r)):_(P).attr("d",Z+"Z").call(c.singleFillStyle,r))):I&&("tonext"===k.fill.substr(0,6)&&Z&&R?("tonext"===k.fill?_(I).attr("d",Z+"Z"+R+"Z").call(c.singleFillStyle,r):_(I).attr("d",Z+"L"+R.substr(1)+"Z").call(c.singleFillStyle,r),k._polygons=k._polygons.concat(F)):($(I),k._polygons=null)),k._prevRevpath=Y,k._prevPolygons=G):(P?$(P):I&&$(I),k._polygons=k._prevRevpath=k._prevPolygons=null),L.datum(p),C.datum(p),function(n,o,s){var l,h=s[0].trace,p=f.hasMarkers(h),d=f.hasText(h),v=function(r){if(r.ids)return tr}(h),g=tn,y=tn;if(p||d){var m=u,x=h.stackgroup,k=x&&"infer zero"===r._fullLayout._scatterStackOpts[w._id+T._id][x].stackgaps;h.marker.maxdisplayed||h._needsCull?m=k?tt:Q:x&&!k&&(m=te),p&&(g=m),d&&(y=m)}var A,M=(l=n.selectAll("path.point").data(g,v)).enter().append("path").classed("point",!0);b&&M.call(c.pointStyle,h,r).call(c.translatePoints,w,T).style("opacity",0).transition().style("opacity",1),l.order(),p&&(A=c.makePointStyleFns(h)),l.each(function(n){var o=a.select(this),s=_(o);c.translatePoint(n,s,w,T)?(c.singlePointStyle(n,s,h,A,r),i.layerClipId&&c.hideOutsideRangePoint(n,s,w,T,h.xcalendar,h.ycalendar),h.customdata&&o.classed("plotly-customdata",null!==n.data&&void 0!==n.data)):s.remove()}),b?l.exit().transition().style("opacity",0).remove():l.exit().remove(),(l=o.selectAll("g").data(y,v)).enter().append("g").classed("textpoint",!0).append("text"),l.order(),l.each(function(r){var n=a.select(this),o=_(n.select("text"));c.translatePoint(r,o,w,T)?i.layerClipId&&c.hideOutsideRangePoint(r,n,w,T,h.xcalendar,h.ycalendar):n.remove()}),l.selectAll("text").call(c.textPointStyle,h,r).each(function(r){var n=w.c2p(r.x),i=T.c2p(r.y);a.select(this).selectAll("tspan.line").each(function(){_(a.select(this)).attr({x:n,y:i})})}),l.exit().remove()}(L,C,p);var K=!1===k.cliponaxis?null:i.layerClipId;c.setClipUrl(L,K,r),c.setClipUrl(C,K,r)}function $(r){_(r).attr("d","M0,0Z")}function Q(r){return r.filter(function(r){return!r.gap&&r.vis})}function tt(r){return r.filter(function(r){return r.vis})}function te(r){return r.filter(function(r){return!r.gap})}function tr(r){return r.id}function tn(){return!1}}r.exports=function(r,n,i,o,s,f){var h,d,g=!s,y=!!s&&s.duration>0,m=p(r,n,i);(h=o.selectAll("g.trace").data(m,function(r){return r[0].trace.uid})).enter().append("g").attr("class",function(r){return"trace scatter trace"+r[0].trace.uid}).style("stroke-miterlimit",2),h.order(),function(r,n,i){n.each(function(n){var o=l(a.select(this),"g","fills");c.setClipUrl(o,i.layerClipId,r);var s=n[0].trace,f=[];s._ownfill&&f.push("_ownFill"),s._nexttrace&&f.push("_nextFill");var h=o.selectAll("g").data(f,u);h.enter().append("g"),h.exit().each(function(r){s[r]=null}).remove(),h.order().each(function(r){s[r]=l(a.select(this),"path","js-fill")})})}(r,h,n),y?(f&&(d=f()),a.transition().duration(s.duration).ease(s.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).each(function(){o.selectAll("g.trace").each(function(i,a){v(r,a,n,i,m,this,s)})})):h.each(function(i,a){v(r,a,n,i,m,this,s)}),g&&h.exit().remove(),o.selectAll("path:not([d])").remove()}},98002:function(r,n,i){"use strict";var a=i(34098);r.exports=function(r,n){var i,o,s,l,u=r.cd,c=r.xaxis,f=r.yaxis,h=[],p=u[0].trace;if(!a.hasMarkers(p)&&!a.hasText(p))return[];if(!1===n)for(i=0;i<u.length;i++)u[i].selected=0;else for(i=0;i<u.length;i++)o=u[i],s=c.c2p(o.x),l=f.c2p(o.y),null!==o.i&&n.contains([s,l],!1,i,r)?(h.push({pointNumber:o.i,x:c.c2d(o.x),y:f.c2d(o.y)}),o.selected=1):o.selected=0;return h}},565:function(r){"use strict";var n=["orientation","groupnorm","stackgaps"];r.exports=function(r,i,a,o){var s=a._scatterStackOpts,l=o("stackgroup");if(l){var u=i.xaxis+i.yaxis,c=s[u];c||(c=s[u]={});var f=c[l],h=!1;f?f.traces.push(i):(f=c[l]={traceIndices:[],traces:[i]},h=!0);for(var p={orientation:i.x&&!i.y?"h":"v"},d=0;d<n.length;d++){var v=n[d],g=v+"Found";if(!f[g]){var y=void 0!==r[v],m="orientation"===v;if((y||h)&&(f[v]=o(v,p[v]),m&&(f.fillDflt="h"===f[v]?"tonextx":"tonexty"),y&&(f[g]=!0,!h&&(delete f.traces[0][v],m))))for(var x=0;x<f.traces.length-1;x++){var b=f.traces[x];b._input.fill!==b.fill&&(b.fill=f.fillDflt)}}}return f}}},16296:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(73972);function l(r,n,i){o.pointStyle(r.selectAll("path.point"),n,i)}function u(r,n,i){o.textPointStyle(r.selectAll("text"),n,i)}r.exports={style:function(r){var n=a.select(r).selectAll("g.trace.scatter");n.style("opacity",function(r){return r[0].trace.opacity}),n.selectAll("g.points").each(function(n){l(a.select(this),n.trace||n[0].trace,r)}),n.selectAll("g.text").each(function(n){u(a.select(this),n.trace||n[0].trace,r)}),n.selectAll("g.trace path.js-line").call(o.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(o.fillGroupStyle,r),s.getComponentMethod("errorbars","style")(n)},stylePoints:l,styleText:u,styleOnSelect:function(r,n,i){var a=n[0].trace;a.selectedpoints?(o.selectedPointStyle(i.selectAll("path.point"),a),o.selectedTextStyle(i.selectAll("text"),a)):(l(i,a,r),u(i,a,r))}}},34098:function(r,n,i){"use strict";var a=i(71828),o=i(73627).isTypedArraySpec;r.exports={hasLines:function(r){return r.visible&&r.mode&&-1!==r.mode.indexOf("lines")},hasMarkers:function(r){return r.visible&&(r.mode&&-1!==r.mode.indexOf("markers")||"splom"===r.type)},hasText:function(r){return r.visible&&r.mode&&-1!==r.mode.indexOf("text")},isBubble:function(r){var n=r.marker;return a.isPlainObject(n)&&(a.isArrayOrTypedArray(n.size)||o(n.size))}}},82410:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n,i,o,s){s=s||{},o("textposition"),a.coerceFont(o,"textfont",s.font||i.font),s.noSelect||(o("selected.textfont.color"),o("unselected.textfont.color"))}},67513:function(r,n,i){"use strict";var a=i(71828),o=i(73972);r.exports=function(r,n,i,s){var l,u=s("x"),c=s("y");if(o.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],i),u){var f=a.minRowLength(u);c?l=Math.min(f,a.minRowLength(c)):(l=f,s("y0"),s("dy"))}else{if(!c)return 0;l=a.minRowLength(c),s("x0"),s("dx")}return n._length=l,l}},44542:function(r,n,i){"use strict";var a=i(82196),o=i(50693),s=i(12663).axisHoverFormat,l=i(5386).fF,u=i(5386).si,c=i(9012),f=i(29659),h=i(87381),p=i(1426).extendFlat,d=i(30962).overrideAll,v=i(78607),g=a.line,y=a.marker,m=y.line,x=p({width:g.width,dash:{valType:"enumerated",values:v(f),dflt:"solid"}},o("line")),b=r.exports=d({x:a.x,y:a.y,z:{valType:"data_array"},text:p({},a.text,{}),texttemplate:u({},{}),hovertext:p({},a.hovertext,{}),hovertemplate:l(),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),mode:p({},a.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:a.connectgaps,line:x,marker:p({symbol:{valType:"enumerated",values:v(h),dflt:"circle",arrayOk:!0},size:p({},y.size,{dflt:8}),sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,opacity:p({},y.opacity,{arrayOk:!1}),colorbar:y.colorbar,line:p({width:p({},m.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:p({},a.textposition,{dflt:"top center"}),textfont:{color:a.textfont.color,size:a.textfont.size,family:p({},a.textfont.family,{arrayOk:!1})},opacity:c.opacity,hoverinfo:p({},c.hoverinfo)},"calc","nested");b.x.editType=b.y.editType=b.z.editType="calc+clearAxisTypes"},36563:function(r,n,i){"use strict";var a=i(75225),o=i(36922);r.exports=function(r,n){var i=[{x:!1,y:!1,trace:n,t:{}}];return a(i,n),o(r,n),i}},67336:function(r,n,i){"use strict";var a=i(73972);function o(r,n,i,o){if(!n||!n.visible)return null;for(var s=a.getComponentMethod("errorbars","makeComputeError")(n),l=Array(r.length),u=0;u<r.length;u++){var c=s(+r[u],u);if("log"===o.type){var f=o.c2l(r[u]),h=r[u]-c[0],p=r[u]+c[1];if(l[u]=[(o.c2l(h,!0)-f)*i,(o.c2l(p,!0)-f)*i],h>0){var d=o.c2l(h);o._lowerLogErrorBound||(o._lowerLogErrorBound=d),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,d)}}else l[u]=[-c[0]*i,c[1]*i]}return l}r.exports=function(r,n,i){var a=[o(r.x,r.error_x,n[0],i.xaxis),o(r.y,r.error_y,n[1],i.yaxis),o(r.z,r.error_z,n[2],i.zaxis)],s=function(r){for(var n=0;n<r.length;n++)if(r[n])return r[n].length;return 0}(a);if(0===s)return null;for(var l=Array(s),u=0;u<s;u++){for(var c=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(a[f])for(var h=0;h<2;h++)c[h][f]=a[f][u][h];l[u]=c}return l}},58925:function(r,n,i){"use strict";var a=i(9330).gl_line3d,o=i(9330).gl_scatter3d,s=i(9330).gl_error3d,l=i(9330).gl_mesh3d,u=i(9330).delaunay_triangulate,c=i(71828),f=i(78614),h=i(81697).formatColor,p=i(39984),d=i(29659),v=i(87381),g=i(89298),y=i(23469).appendArrayPointValue,m=i(67336);function x(r,n){this.scene=r,this.uid=n,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var b=x.prototype;function _(r){return null==r?0:r.indexOf("left")>-1?-1:r.indexOf("right")>-1?1:0}function w(r){return null==r?0:r.indexOf("top")>-1?-1:r.indexOf("bottom")>-1?1:0}function T(r,n){return n(4*r)}function k(r){return v[r]}function A(r,n,i,a,o){var s=null;if(c.isArrayOrTypedArray(r)){s=[];for(var l=0;l<n;l++)void 0===r[l]?s[l]=a:s[l]=i(r[l],o)}else s=i(r,c.identity);return s}function M(r){if(c.isArrayOrTypedArray(r)){var n=r[0];return c.isArrayOrTypedArray(n)&&(r=n),"rgb("+r.slice(0,3).map(function(r){return Math.round(255*r)})+")"}return null}function S(r){return c.isArrayOrTypedArray(r)?4===r.length&&"number"==typeof r[0]?M(r):r.map(M):null}b.handlePick=function(r){if(r.object&&(r.object===this.linePlot||r.object===this.delaunayMesh||r.object===this.textMarkers||r.object===this.scatterPlot)){var n=r.index=r.data.index;return r.object.highlight&&r.object.highlight(null),this.scatterPlot&&(r.object=this.scatterPlot,this.scatterPlot.highlight(r.data)),r.textLabel="",this.textLabels&&(c.isArrayOrTypedArray(this.textLabels)?(this.textLabels[n]||0===this.textLabels[n])&&(r.textLabel=this.textLabels[n]):r.textLabel=this.textLabels),r.traceCoordinate=[this.data.x[n],this.data.y[n],this.data.z[n]],!0}},b.update=function(r){var n,i,v,x,b=this.scene.glplot.gl,M=d.solid;this.data=r;var E=function(r,n){var i,a,o,s,l,u,d=[],v=r.fullSceneLayout,x=r.dataScale,b=v.xaxis,M=v.yaxis,S=v.zaxis,E=n.marker,L=n.line,C=n.x||[],O=n.y||[],P=n.z||[],I=C.length,D=n.xcalendar,z=n.ycalendar,R=n.zcalendar;for(l=0;l<I;l++)i=b.d2l(C[l],0,D)*x[0],a=M.d2l(O[l],0,z)*x[1],o=S.d2l(P[l],0,R)*x[2],d[l]=[i,a,o];if(Array.isArray(n.text))u=n.text;else if(c.isTypedArray(n.text))u=Array.from(n.text);else if(void 0!==n.text)for(u=Array(I),l=0;l<I;l++)u[l]=n.text;function F(r,n){var i=v[r];return g.tickText(i,i.d2l(n),!0).text}var B=n.texttemplate;if(B){var N=r.fullLayout._d3locale,j=Array.isArray(B),U=j?Math.min(B.length,I):I,V=j?function(r){return B[r]}:function(){return B};for(u=Array(U),l=0;l<U;l++){var H={x:C[l],y:O[l],z:P[l]},q={xLabel:F("xaxis",C[l]),yLabel:F("yaxis",O[l]),zLabel:F("zaxis",P[l])},G={};y(G,n,l);var Z=n._meta||{};u[l]=c.texttemplateString(V(l),q,N,G,H,Z)}}if(s={position:d,mode:n.mode,text:u},"line"in n&&(s.lineColor=h(L,1,I),s.lineWidth=L.width,s.lineDashes=L.dash),"marker"in n){var Y=p(n);s.scatterColor=h(E,1,I),s.scatterSize=A(E.size,I,T,20,Y),s.scatterMarker=A(E.symbol,I,k,"●"),s.scatterLineWidth=E.line.width,s.scatterLineColor=h(E.line,1,I),s.scatterAngle=0}"textposition"in n&&(s.textOffset=function(r){var n=[0,0];if(Array.isArray(r))for(var i=0;i<r.length;i++)n[i]=[0,0],r[i]&&(n[i][0]=_(r[i]),n[i][1]=w(r[i]));else n[0]=_(r),n[1]=w(r);return n}(n.textposition),s.textColor=h(n.textfont,1,I),s.textSize=A(n.textfont.size,I,c.identity,12),s.textFont=n.textfont.family,s.textAngle=0);var W=["x","y","z"];for(s.project=[!1,!1,!1],s.projectScale=[1,1,1],s.projectOpacity=[1,1,1],l=0;l<3;++l){var X=n.projection[W[l]];(s.project[l]=X.show)&&(s.projectOpacity[l]=X.opacity,s.projectScale[l]=X.scale)}s.errorBounds=m(n,x,v);var J=function(r){for(var n=[0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],a=[1,1,1],o=0;o<3;o++){var s=r[o];s&&!1!==s.copy_zstyle&&!1!==r[2].visible&&(s=r[2]),s&&s.visible&&(n[o]=s.width/2,i[o]=f(s.color),a[o]=s.thickness)}return{capSize:n,color:i,lineWidth:a}}([n.error_x,n.error_y,n.error_z]);return s.errorColor=J.color,s.errorLineWidth=J.lineWidth,s.errorCapSize=J.capSize,s.delaunayAxis=n.surfaceaxis,s.delaunayColor=f(n.surfacecolor),s}(this.scene,r);"mode"in E&&(this.mode=E.mode),"lineDashes"in E&&E.lineDashes in d&&(M=d[E.lineDashes]),this.color=S(E.scatterColor)||S(E.lineColor),this.dataPoints=E.position,n={gl:this.scene.glplot.gl,position:E.position,color:E.lineColor,lineWidth:E.lineWidth||1,dashes:M[0],dashScale:M[1],opacity:r.opacity,connectGaps:r.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(n):(this.linePlot=a(n),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var L=r.opacity;if(r.marker&&void 0!==r.marker.opacity&&(L*=r.marker.opacity),i={gl:this.scene.glplot.gl,position:E.position,color:E.scatterColor,size:E.scatterSize,glyph:E.scatterMarker,opacity:L,orthographic:!0,lineWidth:E.scatterLineWidth,lineColor:E.scatterLineColor,project:E.project,projectScale:E.projectScale,projectOpacity:E.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=o(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),x={gl:this.scene.glplot.gl,position:E.position,glyph:E.text,color:E.textColor,size:E.textSize,angle:E.textAngle,alignment:E.textOffset,font:E.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:r.opacity},this.textLabels=r.hovertext||r.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(x):(this.textMarkers=o(x),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),v={gl:this.scene.glplot.gl,position:E.position,color:E.errorColor,error:E.errorBounds,lineWidth:E.errorLineWidth,capSize:E.errorCapSize,opacity:r.opacity},this.errorBars?E.errorBounds?this.errorBars.update(v):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):E.errorBounds&&(this.errorBars=s(v),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),E.delaunayAxis>=0){var C=function(r,n,i){var a,o=(i+1)%3,s=(i+2)%3,l=[],c=[];for(a=0;a<r.length;++a){var f=r[a];!isNaN(f[o])&&isFinite(f[o])&&!isNaN(f[s])&&isFinite(f[s])&&(l.push([f[o],f[s]]),c.push(a))}var h=u(l);for(a=0;a<h.length;++a)for(var p=h[a],d=0;d<p.length;++d)p[d]=c[p[d]];return{positions:r,cells:h,meshColor:n}}(E.position,E.delaunayColor,E.delaunayAxis);C.opacity=r.opacity,this.delaunayMesh?this.delaunayMesh.update(C):(C.gl=b,this.delaunayMesh=l(C),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},r.exports=function(r,n){var i=new x(r,n.uid);return i.update(n),i}},21428:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(34098),l=i(49508),u=i(11058),c=i(82410),f=i(44542);r.exports=function(r,n,i,h){function p(i,a){return o.coerce(r,n,f,i,a)}if(d=0,v=p("x"),g=p("y"),y=p("z"),a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],h),v&&g&&y&&(d=Math.min(v.length,g.length,y.length),n._length=n._xlength=n._ylength=n._zlength=d),d){p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),p("zhoverformat"),p("mode"),s.hasMarkers(n)&&l(r,n,i,h,p,{noSelect:!0,noAngle:!0}),s.hasLines(n)&&(p("connectgaps"),u(r,n,i,h,p)),s.hasText(n)&&(p("texttemplate"),c(r,n,h,p,{noSelect:!0}));var d,v,g,y,m=(n.line||{}).color,x=(n.marker||{}).color;p("surfaceaxis")>=0&&p("surfacecolor",m||x);for(var b=["x","y","z"],_=0;_<3;++_){var w="projection."+b[_];p(w+".show")&&(p(w+".opacity"),p(w+".scale"))}var T=a.getComponentMethod("errorbars","supplyDefaults");T(r,n,m||x||i,{axis:"z"}),T(r,n,m||x||i,{axis:"y",inherit:"z"}),T(r,n,m||x||i,{axis:"x",inherit:"z"})}else n.visible=!1}},13551:function(r,n,i){"use strict";r.exports={plot:i(58925),attributes:i(44542),markerSymbols:i(87381),supplyDefaults:i(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:i(36563),moduleType:"trace",name:"scatter3d",basePlotModule:i(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(r,n,i){"use strict";var a=i(82196),o=i(9012),s=i(5386).fF,l=i(5386).si,u=i(50693),c=i(1426).extendFlat,f=a.marker,h=a.line,p=f.line;r.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:c({},a.mode,{dflt:"markers"}),text:c({},a.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","text"]}),hovertext:c({},a.hovertext,{}),line:{color:h.color,width:h.width,dash:h.dash,backoff:h.backoff,shape:c({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:a.connectgaps,fill:c({},a.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:a.fillcolor,marker:c({symbol:f.symbol,opacity:f.opacity,maxdisplayed:f.maxdisplayed,angle:f.angle,angleref:f.angleref,standoff:f.standoff,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,line:c({width:p.width,editType:"calc"},u("marker.line")),gradient:f.gradient,editType:"calc"},u("marker")),textfont:a.textfont,textposition:a.textposition,selected:a.selected,unselected:a.unselected,hoverinfo:c({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:a.hoveron,hovertemplate:s()}},34618:function(r,n,i){"use strict";var a=i(92770),o=i(36922),s=i(75225),l=i(66279),u=i(47761).calcMarkerSize,c=i(22882);r.exports=function(r,n){var i=n._carpetTrace=c(r,n);if(i&&i.visible&&"legendonly"!==i.visible){n.xaxis=i.xaxis,n.yaxis=i.yaxis;var f,h,p,d=n._length,v=Array(d),g=!1;for(f=0;f<d;f++)if(h=n.a[f],p=n.b[f],a(h)&&a(p)){var y=i.ab2xy(+h,+p,!0),m=i.isVisible(+h,+p);m||(g=!0),v[f]={x:y[0],y:y[1],a:h,b:p,vis:m}}else v[f]={x:!1,y:!1};return n._needsCull=g,v[0].carpet=i,v[0].trace=n,u(n,d),o(r,n),s(v,n),l(v,n),v}}},98965:function(r,n,i){"use strict";var a=i(71828),o=i(47581),s=i(34098),l=i(49508),u=i(11058),c=i(94039),f=i(82410),h=i(28908),p=i(97001);r.exports=function(r,n,i,d){function v(i,o){return a.coerce(r,n,p,i,o)}v("carpet"),n.xaxis="x",n.yaxis="y";var g=v("a"),y=v("b"),m=Math.min(g.length,y.length);if(m){n._length=m,v("text"),v("texttemplate"),v("hovertext"),v("mode",m<o.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(n)&&l(r,n,i,d,v,{gradient:!0}),s.hasLines(n)&&(u(r,n,i,d,v,{backoff:!0}),c(r,n,v),v("connectgaps")),s.hasText(n)&&f(r,n,d,v);var x=[];(s.hasMarkers(n)||s.hasText(n))&&(v("marker.maxdisplayed"),x.push("points")),v("fill"),"none"!==n.fill&&(h(r,n,i,v),s.hasLines(n)||c(r,n,v)),"tonext"!==n.fill&&"toself"!==n.fill||x.push("fills"),"fills"!==v("hoveron",x.join("+")||"points")&&v("hovertemplate"),a.coerceSelectionMarkerOpacity(n,v)}else n.visible=!1}},16165:function(r){"use strict";r.exports=function(r,n,i,a,o){var s=a[o];return r.a=s.a,r.b=s.b,r.y=s.y,r}},48953:function(r){"use strict";r.exports=function(r,n){var i={},a=n._carpet,o=a.ab2ij([r.a,r.b]),s=Math.floor(o[0]),l=o[0]-s,u=Math.floor(o[1]),c=o[1]-u,f=a.evalxy([],s,u,l,c);return i.yLabel=f[1].toFixed(3),i}},22931:function(r,n,i){"use strict";var a=i(33720),o=i(71828).fillText;r.exports=function(r,n,i,s){var l=a(r,n,i,s);if(l&&!1!==l[0].index){var u=l[0];if(void 0===u.index){var c=1-u.y0/r.ya._length,f=r.xa._length,h=f*c/2,p=f-h;return u.x0=Math.max(Math.min(u.x0,p),h),u.x1=Math.max(Math.min(u.x1,p),h),l}var d=u.cd[u.index];u.a=d.a,u.b=d.b,u.xLabelVal=void 0,u.yLabelVal=void 0;var v=u.trace,g=v._carpet,y=v._module.formatLabels(d,v);u.yLabel=y.yLabel,delete u.text;var m=[];if(!v.hovertemplate){var x=(d.hi||v.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","text"]),-1!==x.indexOf("a")&&b(g.aaxis,d.a),-1!==x.indexOf("b")&&b(g.baxis,d.b),m.push("y: "+u.yLabel),-1!==x.indexOf("text")&&o(d,v,m),u.extraText=m.join("<br>")}return l}function b(r,n){var i;i=r.labelprefix&&r.labelprefix.length>0?r.labelprefix.replace(/ = $/,""):r._hovertitle,m.push(i+": "+n.toFixed(3)+r.labelsuffix)}}},46858:function(r,n,i){"use strict";r.exports={attributes:i(97001),supplyDefaults:i(98965),colorbar:i(4898),formatLabels:i(48953),calc:i(34618),plot:i(1913),style:i(16296).style,styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(22931),selectPoints:i(98002),eventData:i(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:i(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(r,n,i){"use strict";var a=i(32663),o=i(89298),s=i(91424);r.exports=function(r,n,i,l){var u,c,f,h=i[0][0].carpet,p=o.getFromId(r,h.xaxis||"x"),d=o.getFromId(r,h.yaxis||"y"),v={xaxis:p,yaxis:d,plot:n.plot};for(u=0;u<i.length;u++)(c=i[u][0].trace)._xA=p,c._yA=d;for(a(r,v,i,l),u=0;u<i.length;u++)c=i[u][0].trace,f=l.selectAll("g.trace"+c.uid+" .js-line"),s.setClipUrl(f,i[u][0].carpet._clipPathId,r)}},19316:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(82196),l=i(9012),u=i(50693),c=i(79952).P,f=i(1426).extendFlat,h=i(30962).overrideAll,p=s.marker,d=s.line,v=p.line;r.exports=h({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:f({},s.mode,{dflt:"markers"}),text:f({},s.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:f({},s.hovertext,{}),textfont:s.textfont,textposition:s.textposition,line:{color:d.color,width:d.width,dash:c},connectgaps:s.connectgaps,marker:f({symbol:p.symbol,opacity:p.opacity,angle:p.angle,angleref:f({},p.angleref,{values:["previous","up","north"]}),standoff:p.standoff,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,colorbar:p.colorbar,line:f({width:v.width},u("marker.line")),gradient:p.gradient},u("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:s.fillcolor,selected:s.selected,unselected:s.unselected,hoverinfo:f({},l.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:a()},"calc","nested")},84622:function(r,n,i){"use strict";var a=i(92770),o=i(50606).BADNUM,s=i(36922),l=i(75225),u=i(66279),c=i(71828).isArrayOrTypedArray,f=i(71828)._;function h(r){return r&&"string"==typeof r}r.exports=function(r,n){var i,p=c(n.locations),d=p?n.locations.length:n._length,v=Array(d);i=n.geojson?function(r){return h(r)||a(r)}:h;for(var g=0;g<d;g++){var y=v[g]={};if(p){var m=n.locations[g];y.loc=i(m)?m:null}else{var x=n.lon[g],b=n.lat[g];a(x)&&a(b)?y.lonlat=[+x,+b]:y.lonlat=[o,o]}}return l(v,n),s(r,n),u(v,n),d&&(v[0].t={labels:{lat:f(r,"lat:")+" ",lon:f(r,"lon:")+" "}}),v}},10659:function(r,n,i){"use strict";var a=i(71828),o=i(34098),s=i(49508),l=i(11058),u=i(82410),c=i(28908),f=i(19316);r.exports=function(r,n,i,h){function p(i,o){return a.coerce(r,n,f,i,o)}var d,v=p("locations");if(v&&v.length){var g,y=p("geojson");("string"==typeof y&&""!==y||a.isPlainObject(y))&&(g="geojson-id"),"geojson-id"===p("locationmode",g)&&p("featureidkey"),d=v.length}else{var m=p("lon")||[],x=p("lat")||[];d=Math.min(m.length,x.length)}d?(n._length=d,p("text"),p("hovertext"),p("hovertemplate"),p("mode"),o.hasMarkers(n)&&s(r,n,i,h,p,{gradient:!0}),o.hasLines(n)&&(l(r,n,i,h,p),p("connectgaps")),o.hasText(n)&&(p("texttemplate"),u(r,n,h,p)),p("fill"),"none"!==n.fill&&c(r,n,i,p),a.coerceSelectionMarkerOpacity(n,p)):n.visible=!1}},84084:function(r){"use strict";r.exports=function(r,n,i,a,o){r.lon=n.lon,r.lat=n.lat,r.location=n.loc?n.loc:null;var s=a[o];return s.fIn&&s.fIn.properties&&(r.properties=s.fIn.properties),r}},82719:function(r,n,i){"use strict";var a=i(89298);r.exports=function(r,n,i){var o={},s=i[n.geo]._subplot.mockAxis,l=r.lonlat;return o.lonLabel=a.tickText(s,s.c2l(l[0]),!0).text,o.latLabel=a.tickText(s,s.c2l(l[1]),!0).text,o}},14977:function(r,n,i){"use strict";var a=i(30211),o=i(50606).BADNUM,s=i(34603),l=i(71828).fillText,u=i(19316);r.exports=function(r,n,i){var c=r.cd,f=c[0].trace,h=r.xa,p=r.ya,d=r.subplot,v=d.projection.isLonLatOverEdges,g=d.project;if(a.getClosest(c,function(r){var a=r.lonlat;if(a[0]===o||v(a))return 1/0;var s=g(a),l=g([n,i]),u=Math.abs(s[0]-l[0]),c=Math.abs(s[1]-l[1]),f=Math.max(3,r.mrc||0);return Math.max(Math.sqrt(u*u+c*c)-f,1-3/f)},r),!1!==r.index){var y=c[r.index],m=y.lonlat,x=[h.c2p(m),p.c2p(m)],b=y.mrc||1;r.x0=x[0]-b,r.x1=x[0]+b,r.y0=x[1]-b,r.y1=x[1]+b,r.loc=y.loc,r.lon=m[0],r.lat=m[1];var _={};_[f.geo]={_subplot:d};var w=f._module.formatLabels(y,f,_);return r.lonLabel=w.lonLabel,r.latLabel=w.latLabel,r.color=s(f,y),r.extraText=function(r,n,i,a){if(!r.hovertemplate){var o=n.hi||r.hoverinfo,s="all"===o?u.hoverinfo.flags:o.split("+"),c=-1!==s.indexOf("location")&&Array.isArray(r.locations),f=-1!==s.indexOf("lon"),h=-1!==s.indexOf("lat"),p=-1!==s.indexOf("text"),d=[];return c?d.push(n.loc):f&&h?d.push("("+i.latLabel+"\xb0, "+i.lonLabel+"\xb0)"):f?d.push(a.lon+(i.lonLabel+"\xb0")):h&&d.push(a.lat+(i.latLabel+"\xb0")),p&&l(n,r,d),d.join("<br>")}}(f,y,r,c[0].t.labels),r.hovertemplate=f.hovertemplate,[r]}}},17988:function(r,n,i){"use strict";r.exports={attributes:i(19316),supplyDefaults:i(10659),colorbar:i(4898),formatLabels:i(82719),calc:i(84622),calcGeoJSON:i(89171).calcGeoJSON,plot:i(89171).plot,style:i(33095),styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(14977),eventData:i(84084),selectPoints:i(20548),moduleType:"trace",name:"scattergeo",basePlotModule:i(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(90973).getTopojsonFeatures,l=i(18214),u=i(41327),c=i(71739).findExtremes,f=i(50606).BADNUM,h=i(47761).calcMarkerSize,p=i(34098),d=i(33095);r.exports={calcGeoJSON:function(r,n){var i,a,l=r[0].trace,p=n[l.geo],d=p._subplot,v=l._length;if(o.isArrayOrTypedArray(l.locations)){var g=l.locationmode,y="geojson-id"===g?u.extractTraceFeature(r):s(l,d.topojson);for(i=0;i<v;i++){a=r[i];var m="geojson-id"===g?a.fOut:u.locationToFeature(g,a.loc,y);a.lonlat=m?m.properties.ct:[f,f]}}var x,b,_={padded:!0};if("geojson"===p.fitbounds&&"geojson-id"===l.locationmode){var w=u.computeBbox(u.getTraceGeojson(l));x=[w[0],w[2]],b=[w[1],w[3]]}else{for(x=Array(v),b=Array(v),i=0;i<v;i++)a=r[i],x[i]=a.lonlat[0],b[i]=a.lonlat[1];_.ppad=h(l,v)}l._extremes.lon=c(p.lonaxis._ax,x,_),l._extremes.lat=c(p.lataxis._ax,b,_)},plot:function(r,n,i){var s=n.layers.frontplot.select(".scatterlayer"),u=o.makeTraceGroups(s,i,"trace scattergeo");function c(r,n){r.lonlat[0]===f&&a.select(n).remove()}u.selectAll("*").remove(),u.each(function(n){var i=a.select(this),s=n[0].trace;if(p.hasLines(s)||"none"!==s.fill){var u=l.calcTraceToLineCoords(n),f="none"!==s.fill?l.makePolygon(u):l.makeLine(u);i.selectAll("path.js-line").data([{geojson:f,trace:s}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}p.hasMarkers(s)&&i.selectAll("path.point").data(o.identity).enter().append("path").classed("point",!0).each(function(r){c(r,this)}),p.hasText(s)&&i.selectAll("g").data(o.identity).enter().append("g").append("text").each(function(r){c(r,this)}),d(r,n)})}}},20548:function(r,n,i){"use strict";var a=i(34098),o=i(50606).BADNUM;r.exports=function(r,n){var i,s,l,u,c,f=r.cd,h=r.xaxis,p=r.yaxis,d=[],v=f[0].trace;if(!a.hasMarkers(v)&&!a.hasText(v))return[];if(!1===n)for(c=0;c<f.length;c++)f[c].selected=0;else for(c=0;c<f.length;c++)(s=(i=f[c]).lonlat)[0]!==o&&(l=h.c2p(s),u=p.c2p(s),n.contains([l,u],null,c,r)?(d.push({pointNumber:c,lon:s[0],lat:s[1]}),i.selected=1):i.selected=0);return d}},33095:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(7901),l=i(16296),u=l.stylePoints,c=l.styleText;r.exports=function(r,n){var i,l;n&&(i=n[0].trace,(l=n[0].node3).style("opacity",n[0].trace.opacity),u(l,i,r),c(l,i,r),l.selectAll("path.js-line").style("fill","none").each(function(r){var n=a.select(this),i=r.trace,l=i.line||{};n.call(s.stroke,l.color).call(o.dashLine,l.dash||"",l.width||0),"none"!==i.fill&&n.call(s.fill,i.fillcolor)}))}},42341:function(r,n,i){"use strict";var a=i(9012),o=i(82196),s=i(12663).axisHoverFormat,l=i(50693),u=i(78607),c=i(1426).extendFlat,f=i(30962).overrideAll,h=i(78232).DASHES,p=o.line,d=o.marker,v=d.line,g=r.exports=f({x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),text:o.text,hovertext:o.hovertext,textposition:o.textposition,textfont:o.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:p.color,width:p.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:u(h),dflt:"solid"}},marker:c({},l("marker"),{symbol:d.symbol,angle:d.angle,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:c({},l("marker.line"),{width:v.width})}),connectgaps:o.connectgaps,fill:c({},o.fill,{dflt:"none"}),fillcolor:o.fillcolor,selected:{marker:o.selected.marker,textfont:o.selected.textfont},unselected:{marker:o.unselected.marker,textfont:o.unselected.textfont},opacity:a.opacity},"calc","nested");g.x.editType=g.y.editType=g.x0.editType=g.y0.editType="calc+clearAxisTypes",g.hovertemplate=o.hovertemplate,g.texttemplate=o.texttemplate},72156:function(r,n,i){"use strict";var a=i(20794);r.exports={moduleType:"trace",name:"scattergl",basePlotModule:i(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:i(42341),supplyDefaults:i(47148),crossTraceDefaults:i(34936),colorbar:i(4898),formatLabels:i(68101),calc:i(45032),hoverPoints:a.hoverPoints,selectPoints:i(58147),meta:{}}},45032:function(r,n,i){"use strict";var a=i(88294),o=i(71828),s=i(41675),l=i(71739).findExtremes,u=i(42973),c=i(47761),f=c.calcMarkerSize,h=c.calcAxisExpansion,p=c.setFirstScatter,d=i(36922),v=i(19635),g=i(38967),y=i(50606).BADNUM,m=i(78232).TOO_MANY_POINTS;function x(r,n,i){var a=r._extremes[n._id],o=l(n,i._bnds,{padded:!0});a.min=a.min.concat(o.min),a.max=a.max.concat(o.max)}r.exports=function(r,n){var i,l=r._fullLayout,c=n._xA=s.getFromId(r,n.xaxis,"x"),b=n._yA=s.getFromId(r,n.yaxis,"y"),_=l._plots[n.xaxis+n.yaxis],w=n._length,T=w>=m,k=2*w,A={},M=c.makeCalcdata(n,"x"),S=b.makeCalcdata(n,"y"),E=u(n,c,"x",M),L=u(n,b,"y",S),C=E.vals,O=L.vals;n._x=C,n._y=O,n.xperiodalignment&&(n._origX=M,n._xStarts=E.starts,n._xEnds=E.ends),n.yperiodalignment&&(n._origY=S,n._yStarts=L.starts,n._yEnds=L.ends);var P=Array(k),I=Array(w);for(i=0;i<w;i++)P[2*i]=C[i]===y?NaN:C[i],P[2*i+1]=O[i]===y?NaN:O[i],I[i]=i;if("log"===c.type)for(i=0;i<k;i+=2)P[i]=c.c2l(P[i]);if("log"===b.type)for(i=1;i<k;i+=2)P[i]=b.c2l(P[i]);T&&"log"!==c.type&&"log"!==b.type?A.tree=a(P):A.ids=I,d(r,n);var D,z=function(r,n,i,a,s,l){var u=v.style(r,i);if(u.marker&&(u.marker.positions=a),u.line&&a.length>1&&o.extendFlat(u.line,v.linePositions(r,i,a)),u.errorX||u.errorY){var c=v.errorBarPositions(r,i,a,s,l);u.errorX&&o.extendFlat(u.errorX,c.x),u.errorY&&o.extendFlat(u.errorY,c.y)}return u.text&&(o.extendFlat(u.text,{positions:a},v.textPosition(r,i,u.text,u.marker)),o.extendFlat(u.textSel,{positions:a},v.textPosition(r,i,u.text,u.markerSel)),o.extendFlat(u.textUnsel,{positions:a},v.textPosition(r,i,u.text,u.markerUnsel))),u}(r,0,n,P,C,O),R=g(r,_);return p(l,n),T?z.marker&&(D=z.marker.sizeAvg||Math.max(z.marker.size,3)):D=f(n,w),h(r,n,c,b,C,O,D),z.errorX&&x(n,c,z.errorX),z.errorY&&x(n,b,z.errorY),z.fill&&!R.fill2d&&(R.fill2d=!0),z.marker&&!R.scatter2d&&(R.scatter2d=!0),z.line&&!R.line2d&&(R.line2d=!0),(z.errorX||z.errorY)&&!R.error2d&&(R.error2d=!0),z.text&&!R.glText&&(R.glText=!0),z.marker&&(z.marker.snap=w),R.lineOptions.push(z.line),R.errorXOptions.push(z.errorX),R.errorYOptions.push(z.errorY),R.fillOptions.push(z.fill),R.markerOptions.push(z.marker),R.markerSelectedOptions.push(z.markerSel),R.markerUnselectedOptions.push(z.markerUnsel),R.textOptions.push(z.text),R.textSelectedOptions.push(z.textSel),R.textUnselectedOptions.push(z.textUnsel),R.selectBatch.push([]),R.unselectBatch.push([]),A._scene=R,A.index=R.count,A.x=C,A.y=O,A.positions=P,R.count++,[{x:!1,y:!1,t:A,trace:n}]}},78232:function(r){"use strict";r.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(r,n,i){"use strict";var a=i(92770),o=i(82019),s=i(25075),l=i(73972),u=i(71828),c=u.isArrayOrTypedArray,f=i(91424),h=i(41675),p=i(81697).formatColor,d=i(34098),v=i(39984),g=i(68645),y=i(78232),m=i(37822).DESELECTDIM,x={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},b=i(23469).appendArrayPointValue;function _(r,n){var i,o=r._fullLayout,s=n._length,l=n.textfont,f=n.textposition,h=c(f)?f:[f],p=l.color,d=l.size,v=l.family,g={},y=r._context.plotGlPixelRatio,m=n.texttemplate;if(m){g.text=[];var x=o._d3locale,_=Array.isArray(m),w=_?Math.min(m.length,s):s,T=_?function(r){return m[r]}:function(){return m};for(i=0;i<w;i++){var k={i:i},A=n._module.formatLabels(k,n,o),M={};b(M,n,i);var S=n._meta||{};g.text.push(u.texttemplateString(T(i),A,x,M,k,S))}}else c(n.text)&&n.text.length<s?g.text=n.text.slice():g.text=n.text;if(c(g.text))for(i=g.text.length;i<s;i++)g.text[i]="";for(g.opacity=n.opacity,g.font={},g.align=[],g.baseline=[],i=0;i<h.length;i++){var E=h[i].split(/\s+/);switch(E[1]){case"left":g.align.push("right");break;case"right":g.align.push("left");break;default:g.align.push(E[1])}switch(E[0]){case"top":g.baseline.push("bottom");break;case"bottom":g.baseline.push("top");break;default:g.baseline.push(E[0])}}if(c(p))for(g.color=Array(s),i=0;i<s;i++)g.color[i]=p[i];else g.color=p;if(c(d)||c(v))for(g.font=Array(s),i=0;i<s;i++){var L=g.font[i]={};L.size=(u.isTypedArray(d)?d[i]:c(d)?a(d[i])?d[i]:0:d)*y,L.family=c(v)?v[i]:v}else g.font={size:d*y,family:v};return g}function w(r,n){var i,a,o=n._length,l=n.marker,u={},f=c(l.symbol),h=c(l.angle),d=c(l.color),y=c(l.line.color),m=c(l.opacity),x=c(l.size),b=c(l.line.width);if(f||(a=g.isOpenSymbol(l.symbol)),f||d||y||m||h){u.symbols=Array(o),u.angles=Array(o),u.colors=Array(o),u.borderColors=Array(o);var _=l.symbol,w=l.angle,T=p(l,l.opacity,o),k=p(l.line,l.opacity,o);if(!c(k[0])){var A=k;for(k=Array(o),i=0;i<o;i++)k[i]=A}if(!c(T[0])){var M=T;for(T=Array(o),i=0;i<o;i++)T[i]=M}if(!c(_)){var S=_;for(_=Array(o),i=0;i<o;i++)_[i]=S}if(!c(w)){var E=w;for(w=Array(o),i=0;i<o;i++)w[i]=E}for(u.symbols=_,u.angles=w,u.colors=T,u.borderColors=k,i=0;i<o;i++)f&&(a=g.isOpenSymbol(l.symbol[i])),a&&(k[i]=T[i].slice(),T[i]=T[i].slice(),T[i][3]=0);for(u.opacity=n.opacity,u.markers=Array(o),i=0;i<o;i++)u.markers[i]=O({mx:u.symbols[i],ma:u.angles[i]},n)}else a?(u.color=s(l.color,"uint8"),u.color[3]=0,u.borderColor=s(l.color,"uint8")):(u.color=s(l.color,"uint8"),u.borderColor=s(l.line.color,"uint8")),u.opacity=n.opacity*l.opacity,u.marker=O({mx:l.symbol,ma:l.angle},n);var L,C=v(n,1);if(x||b){var P,I=u.sizes=Array(o),D=u.borderSizes=Array(o),z=0;if(x){for(i=0;i<o;i++)I[i]=C(l.size[i]),z+=I[i];P=z/o}else for(L=C(l.size),i=0;i<o;i++)I[i]=L;if(b)for(i=0;i<o;i++)D[i]=l.line.width[i];else for(L=l.line.width,i=0;i<o;i++)D[i]=L;u.sizeAvg=P}else u.size=C(l&&l.size||10),u.borderSizes=C(l.line.width);return u}function T(r,n,i){var a=n.marker,o={};return i&&(i.marker&&i.marker.symbol?o=w(0,u.extendFlat({},a,i.marker)):i.marker&&(i.marker.size&&(o.size=i.marker.size),i.marker.color&&(o.colors=i.marker.color),void 0!==i.marker.opacity&&(o.opacity=i.marker.opacity))),o}function k(r,n,i){var a={};if(!i)return a;if(i.textfont){var o={opacity:1,text:n.text,texttemplate:n.texttemplate,textposition:n.textposition,textfont:u.extendFlat({},n.textfont)};i.textfont&&u.extendFlat(o.textfont,i.textfont),a=_(r,o)}return a}function A(r,n,i){var a={capSize:2*n.width*i,lineWidth:n.thickness*i,color:n.color};return n.copy_ystyle&&(a=r.error_y),a}var M=y.SYMBOL_SDF_SIZE,S=y.SYMBOL_SIZE,E=y.SYMBOL_STROKE,L={},C=f.symbolFuncs[0](.05*S);function O(r,n){var i,a=r.mx;if("circle"===a)return null;var s=f.symbolNumber(a),l=f.symbolFuncs[s%100],u=!!f.symbolNoDot[s%100],c=!!f.symbolNoFill[s%100],h=g.isDotSymbol(a);if(r.ma&&(a+="_"+r.ma),L[a])return L[a];var p=f.getMarkerAngle(r,n);return i=o(h&&!u?l(1.1*S,p)+C:l(S,p),{w:M,h:M,viewBox:[-S,-S,S,S],stroke:c?E:-E}),L[a]=i,i||null}r.exports={style:function(r,n){var i,a={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},o=r._context.plotGlPixelRatio;if(!0!==n.visible)return a;if(d.hasText(n)&&(a.text=_(r,n),a.textSel=k(r,n,n.selected),a.textUnsel=k(r,n,n.unselected)),d.hasMarkers(n)&&(a.marker=w(0,n),a.markerSel=T(0,n,n.selected),a.markerUnsel=T(0,n,n.unselected),!n.unselected&&c(n.marker.opacity))){var s=n.marker.opacity;for(a.markerUnsel.opacity=Array(s.length),i=0;i<s.length;i++)a.markerUnsel.opacity[i]=m*s[i]}if(d.hasLines(n)){a.line={overlay:!0,thickness:n.line.width*o,color:n.line.color,opacity:n.opacity};var l=(y.DASHES[n.line.dash]||[1]).slice();for(i=0;i<l.length;++i)l[i]*=n.line.width*o;a.line.dashes=l}return n.error_x&&n.error_x.visible&&(a.errorX=A(n,n.error_x,o)),n.error_y&&n.error_y.visible&&(a.errorY=A(n,n.error_y,o)),n.fill&&"none"!==n.fill&&(a.fill={closed:!0,fill:n.fillcolor,thickness:0}),a},markerStyle:w,markerSelection:T,linePositions:function(r,n,i){var a,o,s=i.length,l=s/2;if(d.hasLines(n)&&l){if("hv"===n.line.shape){for(a=[],o=0;o<l-1;o++)isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN,NaN,NaN):(a.push(i[2*o],i[2*o+1]),isNaN(i[2*o+2])||isNaN(i[2*o+3])?a.push(NaN,NaN):a.push(i[2*o+2],i[2*o+1]));a.push(i[s-2],i[s-1])}else if("hvh"===n.line.shape){for(a=[],o=0;o<l-1;o++)if(isNaN(i[2*o])||isNaN(i[2*o+1])||isNaN(i[2*o+2])||isNaN(i[2*o+3]))isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN):a.push(i[2*o],i[2*o+1]),a.push(NaN,NaN);else{var u=(i[2*o]+i[2*o+2])/2;a.push(i[2*o],i[2*o+1],u,i[2*o+1],u,i[2*o+3])}a.push(i[s-2],i[s-1])}else if("vhv"===n.line.shape){for(a=[],o=0;o<l-1;o++)if(isNaN(i[2*o])||isNaN(i[2*o+1])||isNaN(i[2*o+2])||isNaN(i[2*o+3]))isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN):a.push(i[2*o],i[2*o+1]),a.push(NaN,NaN);else{var c=(i[2*o+1]+i[2*o+3])/2;a.push(i[2*o],i[2*o+1],i[2*o],c,i[2*o+2],c)}a.push(i[s-2],i[s-1])}else if("vh"===n.line.shape){for(a=[],o=0;o<l-1;o++)isNaN(i[2*o])||isNaN(i[2*o+1])?a.push(NaN,NaN,NaN,NaN):(a.push(i[2*o],i[2*o+1]),isNaN(i[2*o+2])||isNaN(i[2*o+3])?a.push(NaN,NaN):a.push(i[2*o],i[2*o+3]));a.push(i[s-2],i[s-1])}else a=i}var f=!1;for(o=0;o<a.length;o++)if(isNaN(a[o])){f=!0;break}var h=f||a.length>y.TOO_MANY_POINTS||d.hasMarkers(n)?"rect":"round";if(f&&n.connectgaps){var p=a[0],v=a[1];for(o=0;o<a.length;o+=2)isNaN(a[o])||isNaN(a[o+1])?(a[o]=p,a[o+1]=v):(p=a[o],v=a[o+1])}return{join:h,positions:a}},errorBarPositions:function(r,n,i,o,s){var u=l.getComponentMethod("errorbars","makeComputeError"),c=h.getFromId(r,n.xaxis,"x"),f=h.getFromId(r,n.yaxis,"y"),p=i.length/2,d={};function v(r,o){var s=o._id.charAt(0),l=n["error_"+s];if(l&&l.visible&&("linear"===o.type||"log"===o.type)){for(var c=u(l),f={x:0,y:1}[s],h={x:[0,1,2,3],y:[2,3,0,1]}[s],v=new Float64Array(4*p),g=1/0,y=-1/0,m=0,x=0;m<p;m++,x+=4){var b=r[m];if(a(b)){var _=i[2*m+f],w=c(b,m),T=w[0],k=w[1];if(a(T)&&a(k)){var A=b-T,M=b+k;v[x+h[0]]=_-o.c2l(A),v[x+h[1]]=o.c2l(M)-_,v[x+h[2]]=0,v[x+h[3]]=0,g=Math.min(g,b-T),y=Math.max(y,b+k)}}}d[s]={positions:i,errors:v,_bnds:[g,y]}}}return v(o,c),v(s,f),d},textPosition:function(r,n,i,a){var o,s=n._length,l={};if(d.hasMarkers(n)){var u=i.font,f=i.align,h=i.baseline;for(l.offset=Array(s),o=0;o<s;o++){var p=a.sizes?a.sizes[o]:a.size,v=c(u)?u[o].size:u.size,g=c(f)?f.length>1?f[o]:f[0]:f,y=c(h)?h.length>1?h[o]:h[0]:h,m=x[g],b=x[y],_=p?p/.8+1:0,w=-b*_-.5*b;l.offset[o]=[m*_/v,w/v]}}return l}}},47148:function(r,n,i){"use strict";var a=i(71828),o=i(73972),s=i(68645),l=i(42341),u=i(47581),c=i(34098),f=i(67513),h=i(73927),p=i(49508),d=i(11058),v=i(28908),g=i(82410);r.exports=function(r,n,i,y){function m(i,o){return a.coerce(r,n,l,i,o)}var x=!!r.marker&&s.isOpenSymbol(r.marker.symbol),b=c.isBubble(r),_=f(r,n,y,m);if(_){h(r,n,y,m),m("xhoverformat"),m("yhoverformat");var w=_<u.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",w),c.hasMarkers(n)&&(p(r,n,i,y,m,{noAngleRef:!0,noStandOff:!0}),m("marker.line.width",x||b?1:0)),c.hasLines(n)&&(m("connectgaps"),d(r,n,i,y,m),m("line.shape")),c.hasText(n)&&(m("texttemplate"),g(r,n,y,m));var T=(n.line||{}).color,k=(n.marker||{}).color;m("fill"),"none"!==n.fill&&v(r,n,i,m);var A=o.getComponentMethod("errorbars","supplyDefaults");A(r,n,T||k||i,{axis:"y"}),A(r,n,T||k||i,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(n,m)}else n.visible=!1}},5345:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(37822).DESELECTDIM;r.exports={styleTextSelection:function(r){var n,i,l=r[0],u=l.trace,c=l.t,f=c._scene,h=c.index,p=f.selectBatch[h],d=f.unselectBatch[h],v=f.textOptions[h],g=f.textSelectedOptions[h]||{},y=f.textUnselectedOptions[h]||{},m=a.extendFlat({},v);if(p.length||d.length){var x=g.color,b=y.color,_=v.color,w=a.isArrayOrTypedArray(_);for(m.color=Array(u._length),n=0;n<p.length;n++)i=p[n],m.color[i]=x||(w?_[i]:_);for(n=0;n<d.length;n++){i=d[n];var T=w?_[i]:_;m.color[i]=b||(x?T:o.addOpacity(T,s))}}f.glText[h].update(m)}}},68101:function(r,n,i){"use strict";var a=i(8225);r.exports=function(r,n,i){var o=r.i;return"x"in r||(r.x=n._x[o]),"y"in r||(r.y=n._y[o]),a(r,n,i)}},68645:function(r,n,i){"use strict";var a=i(78232);n.isOpenSymbol=function(r){return"string"==typeof r?a.OPEN_RE.test(r):r%200>100},n.isDotSymbol=function(r){return"string"==typeof r?a.DOT_RE.test(r):r>200}},20794:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(34603);function l(r,n,i,l){var u=r.xa,c=r.ya,f=r.distance,h=r.dxy,p=r.index,d={pointNumber:p,x:n[p],y:i[p]};d.tx=o.isArrayOrTypedArray(l.text)?l.text[p]:l.text,d.htx=Array.isArray(l.hovertext)?l.hovertext[p]:l.hovertext,d.data=Array.isArray(l.customdata)?l.customdata[p]:l.customdata,d.tp=Array.isArray(l.textposition)?l.textposition[p]:l.textposition;var v=l.textfont;v&&(d.ts=o.isArrayOrTypedArray(v.size)?v.size[p]:v.size,d.tc=Array.isArray(v.color)?v.color[p]:v.color,d.tf=Array.isArray(v.family)?v.family[p]:v.family);var g=l.marker;g&&(d.ms=o.isArrayOrTypedArray(g.size)?g.size[p]:g.size,d.mo=o.isArrayOrTypedArray(g.opacity)?g.opacity[p]:g.opacity,d.mx=o.isArrayOrTypedArray(g.symbol)?g.symbol[p]:g.symbol,d.ma=o.isArrayOrTypedArray(g.angle)?g.angle[p]:g.angle,d.mc=o.isArrayOrTypedArray(g.color)?g.color[p]:g.color);var y=g&&g.line;y&&(d.mlc=Array.isArray(y.color)?y.color[p]:y.color,d.mlw=o.isArrayOrTypedArray(y.width)?y.width[p]:y.width);var m=g&&g.gradient;m&&"none"!==m.type&&(d.mgt=Array.isArray(m.type)?m.type[p]:m.type,d.mgc=Array.isArray(m.color)?m.color[p]:m.color);var x=u.c2p(d.x,!0),b=c.c2p(d.y,!0),_=d.mrc||1,w=l.hoverlabel;w&&(d.hbg=Array.isArray(w.bgcolor)?w.bgcolor[p]:w.bgcolor,d.hbc=Array.isArray(w.bordercolor)?w.bordercolor[p]:w.bordercolor,d.hts=o.isArrayOrTypedArray(w.font.size)?w.font.size[p]:w.font.size,d.htc=Array.isArray(w.font.color)?w.font.color[p]:w.font.color,d.htf=Array.isArray(w.font.family)?w.font.family[p]:w.font.family,d.hnl=o.isArrayOrTypedArray(w.namelength)?w.namelength[p]:w.namelength);var T=l.hoverinfo;T&&(d.hi=Array.isArray(T)?T[p]:T);var k=l.hovertemplate;k&&(d.ht=Array.isArray(k)?k[p]:k);var A={};A[r.index]=d;var M=l._origX,S=l._origY,E=o.extendFlat({},r,{color:s(l,d),x0:x-_,x1:x+_,xLabelVal:M?M[p]:d.x,y0:b-_,y1:b+_,yLabelVal:S?S[p]:d.y,cd:A,distance:f,spikeDistance:h,hovertemplate:d.ht});return d.htx?E.text=d.htx:d.tx?E.text=d.tx:l.text&&(E.text=l.text),o.fillText(d,l,E),a.getComponentMethod("errorbars","hoverInfo")(d,l,E),E}r.exports={hoverPoints:function(r,n,i,a){var o,s,u,c,f,h,p,d,v,g,y=r.cd,m=y[0].t,x=y[0].trace,b=r.xa,_=r.ya,w=m.x,T=m.y,k=b.c2p(n),A=_.c2p(i),M=r.distance;if(m.tree){var S=b.p2c(k-M),E=b.p2c(k+M),L=_.p2c(A-M),C=_.p2c(A+M);o="x"===a?m.tree.range(Math.min(S,E),Math.min(_._rl[0],_._rl[1]),Math.max(S,E),Math.max(_._rl[0],_._rl[1])):m.tree.range(Math.min(S,E),Math.min(L,C),Math.max(S,E),Math.max(L,C))}else o=m.ids;var O=M;if("x"===a){var P=!!x.xperiodalignment,I=!!x.yperiodalignment;for(h=0;h<o.length;h++){if(c=w[s=o[h]],p=Math.abs(b.c2p(c)-k),P){var D=b.c2p(x._xStarts[s]),z=b.c2p(x._xEnds[s]);p=k>=Math.min(D,z)&&k<=Math.max(D,z)?0:1/0}if(p<O){if(O=p,f=T[s],d=_.c2p(f)-A,I){var R=_.c2p(x._yStarts[s]),F=_.c2p(x._yEnds[s]);d=A>=Math.min(R,F)&&A<=Math.max(R,F)?0:1/0}g=Math.sqrt(p*p+d*d),u=o[h]}}}else for(h=o.length-1;h>-1;h--)c=w[s=o[h]],f=T[s],(v=Math.sqrt((p=b.c2p(c)-k)*p+(d=_.c2p(f)-A)*d))<O&&(O=g=v,u=s);return r.index=u,r.distance=O,r.dxy=g,void 0===u?[r]:[l(r,w,T,x)]},calcHover:l}},68868:function(r,n,i){"use strict";var a=i(72156);a.plot=i(26787),r.exports=a},26787:function(r,n,i){"use strict";var a=i(11870),o=i(46075),s=i(3593),l=i(42505),u=i(71828),c=i(64505).selectMode,f=i(79749),h=i(34098),p=i(68687),d=i(5345).styleTextSelection,v={};(r.exports=function(r,n,i){if(i.length){var g,y,m=r._fullLayout,x=n._scene,b=n.xaxis,_=n.yaxis;if(x){if(f(r,["ANGLE_instanced_arrays","OES_element_index_uint"],v)){var w,T,k,A,M,S,E,L,C,O,P=x.count,I=m._glcanvas.data()[0].regl;if(p(r,n,i),x.dirty){if(!x.line2d&&!x.error2d||x.scatter2d||x.fill2d||x.glText||I.clear({}),!0===x.error2d&&(x.error2d=s(I)),!0===x.line2d&&(x.line2d=o(I)),!0===x.scatter2d&&(x.scatter2d=a(I)),!0===x.fill2d&&(x.fill2d=o(I)),!0===x.glText)for(x.glText=Array(P),g=0;g<P;g++)x.glText[g]=new l(I);if(x.glText){if(P>x.glText.length){var D=P-x.glText.length;for(g=0;g<D;g++)x.glText.push(new l(I))}else if(P<x.glText.length){var z=x.glText.length-P;x.glText.splice(P,z).forEach(function(r){r.destroy()})}for(g=0;g<P;g++)x.glText[g].update(x.textOptions[g])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(r){if(r&&r.positions){for(var n=r.positions,i=0;i<n.length&&(isNaN(n[i])||isNaN(n[i+1]));)i+=2;for(var a=n.length-2;a>i&&(isNaN(n[a])||isNaN(n[a+1]));)a-=2;r.positions=n.slice(i,a+2)}return r}),x.line2d.update(x.lineOptions)),x.error2d){var R=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(R)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=u.repeat(null,P),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(r,n){var a=i[n];if(r&&a&&a[0]&&a[0].trace){var o,s,l=a[0],u=l.trace,c=l.t,f=x.lineOptions[n],h=[];u._ownfill&&h.push(n),u._nexttrace&&h.push(n+1),h.length&&(x.fillOrder[n]=h);var p,d,v=[],g=f&&f.positions||c.positions;if("tozeroy"===u.fill){for(p=0;p<g.length&&isNaN(g[p+1]);)p+=2;for(d=g.length-2;d>p&&isNaN(g[d+1]);)d-=2;0!==g[p+1]&&(v=[g[p],0]),v=v.concat(g.slice(p,d+2)),0!==g[d+1]&&(v=v.concat([g[d],0]))}else if("tozerox"===u.fill){for(p=0;p<g.length&&isNaN(g[p]);)p+=2;for(d=g.length-2;d>p&&isNaN(g[d]);)d-=2;0!==g[p]&&(v=[0,g[p+1]]),v=v.concat(g.slice(p,d+2)),0!==g[d]&&(v=v.concat([0,g[d+1]]))}else if("toself"===u.fill||"tonext"===u.fill){for(v=[],o=0,r.splitNull=!0,s=0;s<g.length;s+=2)(isNaN(g[s])||isNaN(g[s+1]))&&((v=v.concat(g.slice(o,s))).push(g[o],g[o+1]),v.push(null,null),o=s+2);v=v.concat(g.slice(o)),o&&v.push(g[o],g[o+1])}else{var y=u._nexttrace;if(y){var m=x.lineOptions[n+1];if(m){var b=m.positions;if("tonexty"===u.fill){for(v=g.slice(),n=Math.floor(b.length/2);n--;){var _=b[2*n],w=b[2*n+1];isNaN(_)||isNaN(w)||v.push(_,w)}r.fill=y.fillcolor}}}}if(u._prevtrace&&"tonext"===u._prevtrace.fill){var T=x.lineOptions[n-1].positions,k=v.length/2,A=[o=k];for(s=0;s<T.length;s+=2)(isNaN(T[s])||isNaN(T[s+1]))&&(A.push(s/2+k+1),o=s+2);v=v.concat(T),r.hole=A}return r.fillmode=u.fill,r.opacity=u.opacity,r.positions=v,r}}),x.fill2d.update(x.fillOptions))}var F=c(m.dragmode),B=m.clickmode.indexOf("select")>-1;for(g=0;g<P;g++){var N=i[g][0],j=N.trace,U=N.t,V=U.index,H=j._length,q=U.x,G=U.y;if(j.selectedpoints||F||B){if(F||(F=!0),j.selectedpoints){var Z=x.selectBatch[V]=u.selIndices2selPoints(j),Y={};for(y=0;y<Z.length;y++)Y[Z[y]]=1;var W=[];for(y=0;y<H;y++)Y[y]||W.push(y);x.unselectBatch[V]=W}var X=U.xpx=Array(H),J=U.ypx=Array(H);for(y=0;y<H;y++)X[y]=b.c2p(q[y]),J[y]=_.c2p(G[y])}else U.xpx=U.ypx=null}if(F){if(x.select2d||(x.select2d=a(m._glcanvas.data()[1].regl)),x.scatter2d){var K=Array(P);for(g=0;g<P;g++)K[g]=x.selectBatch[g].length||x.unselectBatch[g].length?x.markerUnselectedOptions[g]:{};x.scatter2d.update(K)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&i.forEach(function(r){var n=((r||[])[0]||{}).trace||{};h.hasText(n)&&d(r)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var $={viewport:(w=r._context.plotGlPixelRatio,T=m._size,k=m.width*w,A=m.height*w,M=T.l*w,S=T.b*w,E=T.r*w,L=T.t*w,C=T.w*w,O=T.h*w,[M+b.domain[0]*C,S+_.domain[0]*O,k-E-(1-b.domain[1])*C,A-L-(1-_.domain[1])*O]),range:[(b._rl||b.range)[0],(_._rl||_.range)[0],(b._rl||b.range)[1],(_._rl||_.range)[1]]},Q=u.repeat($,x.count);x.fill2d&&x.fill2d.update(Q),x.line2d&&x.line2d.update(Q),x.error2d&&x.error2d.update(Q.concat(Q)),x.scatter2d&&x.scatter2d.update(Q),x.select2d&&x.select2d.update(Q),x.glText&&x.glText.forEach(function(r){r.update($)})}else x.init()}}}).reglPrecompiled=v},38967:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){var i=n._scene,o={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},s={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return n._scene||((i=n._scene={}).init=function(){a.extendFlat(i,s,o)},i.init(),i.update=function(r){var n=a.repeat(r,i.count);if(i.fill2d&&i.fill2d.update(n),i.scatter2d&&i.scatter2d.update(n),i.line2d&&i.line2d.update(n),i.error2d&&i.error2d.update(n.concat(n)),i.select2d&&i.select2d.update(n),i.glText)for(var o=0;o<i.count;o++)i.glText[o].update(r)},i.draw=function(){for(var r=i.count,n=i.fill2d,o=i.error2d,s=i.line2d,l=i.scatter2d,u=i.glText,c=i.select2d,f=i.selectBatch,h=i.unselectBatch,p=0;p<r;p++){if(n&&i.fillOrder[p]&&n.draw(i.fillOrder[p]),s&&i.lineOptions[p]&&s.draw(p),o&&(i.errorXOptions[p]&&o.draw(p),i.errorYOptions[p]&&o.draw(p+r)),l&&i.markerOptions[p]){if(h[p].length){var d=a.repeat([],i.count);d[p]=h[p],l.draw(d)}else f[p].length||l.draw(p)}u[p]&&i.textOptions[p]&&u[p].render()}c&&c.draw(f),i.dirty=!1},i.destroy=function(){i.fill2d&&i.fill2d.destroy&&i.fill2d.destroy(),i.scatter2d&&i.scatter2d.destroy&&i.scatter2d.destroy(),i.error2d&&i.error2d.destroy&&i.error2d.destroy(),i.line2d&&i.line2d.destroy&&i.line2d.destroy(),i.select2d&&i.select2d.destroy&&i.select2d.destroy(),i.glText&&i.glText.forEach(function(r){r.destroy&&r.destroy()}),i.lineOptions=null,i.fillOptions=null,i.markerOptions=null,i.markerSelectedOptions=null,i.markerUnselectedOptions=null,i.errorXOptions=null,i.errorYOptions=null,i.textOptions=null,i.textSelectedOptions=null,i.textUnselectedOptions=null,i.selectBatch=null,i.unselectBatch=null,n._scene=null}),i.dirty||a.extendFlat(i,o),i}},58147:function(r,n,i){"use strict";var a=i(34098),o=i(5345).styleTextSelection;r.exports=function(r,n){var i=r.cd,s=r.xaxis,l=r.yaxis,u=[],c=i[0].trace,f=i[0].t,h=c._length,p=f.x,d=f.y,v=f._scene,g=f.index;if(!v)return u;var y=a.hasText(c),m=a.hasMarkers(c);if(!0!==c.visible||!m&&!y)return u;var x=[],b=[];if(!1!==n&&!n.degenerate)for(var _=0;_<h;_++)n.contains([f.xpx[_],f.ypx[_]],!1,_,r)?(x.push(_),u.push({pointNumber:_,x:s.c2d(p[_]),y:l.c2d(d[_])})):b.push(_);if(m){var w=v.scatter2d;if(x.length||b.length){if(!v.selectBatch[g].length&&!v.unselectBatch[g].length){var T=Array(v.count);T[g]=v.markerUnselectedOptions[g],w.update.apply(w,T)}}else{var k=Array(v.count);k[g]=v.markerOptions[g],w.update.apply(w,k)}}return v.selectBatch[g]=x,v.unselectBatch[g]=b,y&&o(i),u}},99181:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(19316),l=i(82196),u=i(23585),c=i(9012),f=i(50693),h=i(1426).extendFlat,p=i(30962).overrideAll,d=i(23585),v=s.line,g=s.marker;r.exports=p({lon:s.lon,lat:s.lat,cluster:{enabled:{valType:"boolean"},maxzoom:h({},d.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:h({},g.opacity,{dflt:1})},mode:h({},l.mode,{dflt:"markers"}),text:h({},l.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:h({},l.hovertext,{}),line:{color:v.color,width:v.width},connectgaps:l.connectgaps,marker:h({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:g.opacity,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode},f("marker")),fill:s.fill,fillcolor:l.fillcolor,textfont:u.layers.symbol.textfont,textposition:u.layers.symbol.textposition,below:{valType:"string"},selected:{marker:l.selected.marker},unselected:{marker:l.unselected.marker},hoverinfo:h({},c.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:a()},"calc","nested")},15790:function(r,n,i){"use strict";var a=i(92770),o=i(71828),s=i(50606).BADNUM,l=i(18214),u=i(21081),c=i(91424),f=i(39984),h=i(34098),p=i(13056),d=i(23469).appendArrayPointValue,v=i(63893).NEWLINES,g=i(63893).BR_TAG_ALL;function y(r){return{type:r,geojson:l.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function m(r,n){return o.isArrayOrTypedArray(r)?n?function(n){return a(r[n])?+r[n]:0}:function(n){return r[n]}:r?function(){return r}:x}function x(){return""}function b(r,n){var i;if(o.isArrayOrTypedArray(r)&&o.isArrayOrTypedArray(n)){i=["step",["get","point_count"],r[0]];for(var a=1;a<r.length;a++)i.push(n[a-1],r[a])}else i=r;return i}r.exports=function(r,n){var i,_=n[0].trace,w=!0===_.visible&&0!==_._length,T="none"!==_.fill,k=h.hasLines(_),A=h.hasMarkers(_),M=h.hasText(_),S=A&&"circle"===_.marker.symbol,E=A&&"circle"!==_.marker.symbol,L=_.cluster&&_.cluster.enabled,C=y("fill"),O=y("line"),P=y("circle"),I=y("symbol"),D={fill:C,line:O,circle:P,symbol:I};if(!w)return D;if((T||k)&&(i=l.calcTraceToLineCoords(n)),T&&(C.geojson=l.makePolygon(i),C.layout.visibility="visible",o.extendFlat(C.paint,{"fill-color":_.fillcolor})),k&&(O.geojson=l.makeLine(i),O.layout.visibility="visible",o.extendFlat(O.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),S){var z=function(r){var n,i,l,h,p=r[0].trace,d=p.marker,v=p.selectedpoints,g=o.isArrayOrTypedArray(d.color),y=o.isArrayOrTypedArray(d.size),m=o.isArrayOrTypedArray(d.opacity);function x(r){return p.opacity*r}g&&(i=u.hasColorscale(p,"marker")?u.makeColorScaleFuncFromTrace(d):o.identity),y&&(l=f(p)),m&&(h=function(r){return x(a(r)?+o.constrain(r,0,1):0)});var b,_=[];for(n=0;n<r.length;n++){var w=r[n],T=w.lonlat;if(T[0]!==s){var k={};i&&(k.mcc=w.mcc=i(w.mc)),l&&(k.mrc=w.mrc=l(w.ms)),h&&(k.mo=h(w.mo)),v&&(k.selected=w.selected||0),_.push({type:"Feature",id:n+1,geometry:{type:"Point",coordinates:T},properties:k})}}if(v)for(b=c.makeSelectedPointStyleFns(p),n=0;n<_.length;n++){var A=_[n].properties;b.selectedOpacityFn&&(A.mo=x(b.selectedOpacityFn(A))),b.selectedColorFn&&(A.mcc=b.selectedColorFn(A)),b.selectedSizeFn&&(A.mrc=b.selectedSizeFn(A))}return{geojson:{type:"FeatureCollection",features:_},mcc:g||b&&b.selectedColorFn?{type:"identity",property:"mcc"}:d.color,mrc:y||b&&b.selectedSizeFn?{type:"identity",property:"mrc"}:d.size/2,mo:m||b&&b.selectedOpacityFn?{type:"identity",property:"mo"}:x(d.opacity)}}(n);P.geojson=z.geojson,P.layout.visibility="visible",L&&(P.filter=["!",["has","point_count"]],D.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":b(_.cluster.color,_.cluster.step),"circle-radius":b(_.cluster.size,_.cluster.step),"circle-opacity":b(_.cluster.opacity,_.cluster.step)}},D.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),o.extendFlat(P.paint,{"circle-color":z.mcc,"circle-radius":z.mrc,"circle-opacity":z.mo})}if(S&&L&&(P.filter=["!",["has","point_count"]]),(E||M)&&(I.geojson=function(r,n){for(var i=n._fullLayout,a=r[0].trace,l=a.marker||{},u=l.symbol,c=l.angle,f="circle"!==u?m(u):x,p="auto"!==c?m(c,!0):x,y=h.hasText(a)?m(a.text):x,b=[],_=0;_<r.length;_++){var w=r[_];if(w.lonlat[0]!==s){var T,k=a.texttemplate;if(k){var A=Array.isArray(k)?k[_]||"":k,M=a._module.formatLabels(w,a,i),S={};d(S,a,w.i);var E=a._meta||{};T=o.texttemplateString(A,M,i._d3locale,S,w,E)}else T=y(_);T&&(T=T.replace(v,"").replace(g,"\n")),b.push({type:"Feature",geometry:{type:"Point",coordinates:w.lonlat},properties:{symbol:f(_),angle:p(_),text:T}})}}return{type:"FeatureCollection",features:b}}(n,r),o.extendFlat(I.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),E&&(o.extendFlat(I.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&"auto"!==_.marker.angle&&o.extendFlat(I.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),I.layout["icon-allow-overlap"]=_.marker.allowoverlap,o.extendFlat(I.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),M)){var R=(_.marker||{}).size,F=p(_.textposition,R);o.extendFlat(I.layout,{"text-size":_.textfont.size,"text-anchor":F.anchor,"text-offset":F.offset,"text-font":_.textfont.family.split(", ")}),o.extendFlat(I.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return D}},76645:function(r,n,i){"use strict";var a=i(71828),o=i(34098),s=i(49508),l=i(11058),u=i(82410),c=i(28908),f=i(99181),h=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];r.exports=function(r,n,i,p){function d(i,o){return a.coerce(r,n,f,i,o)}function v(i,o){return a.coerce2(r,n,f,i,o)}if(g=d("lon")||[],y=d("lat")||[],m=Math.min(g.length,y.length),n._length=m,m){if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),o.hasMarkers(n)){s(r,n,i,p,d,{noLine:!0,noAngle:!0}),d("marker.allowoverlap"),d("marker.angle");var g,y,m,x=n.marker;"circle"!==x.symbol&&(a.isArrayOrTypedArray(x.size)&&(x.size=x.size[0]),a.isArrayOrTypedArray(x.color)&&(x.color=x.color[0]))}o.hasLines(n)&&(l(r,n,i,p,d,{noDash:!0}),d("connectgaps"));var b=v("cluster.maxzoom"),_=v("cluster.step"),w=v("cluster.color",n.marker&&n.marker.color||i),T=v("cluster.size"),k=v("cluster.opacity");d("cluster.enabled",!1!==b||!1!==_||!1!==w||!1!==T||!1!==k),o.hasText(n)&&u(r,n,p,d,{noSelect:!0,font:{family:-1!==h.indexOf(p.font.family)?p.font.family:"Open Sans Regular",size:p.font.size,color:p.font.color}}),d("fill"),"none"!==n.fill&&c(r,n,i,d),a.coerceSelectionMarkerOpacity(n,d)}else n.visible=!1}},53353:function(r){"use strict";r.exports=function(r,n){return r.lon=n.lon,r.lat=n.lat,r}},15636:function(r,n,i){"use strict";var a=i(89298);r.exports=function(r,n,i){var o={},s=i[n.subplot]._subplot.mockAxis,l=r.lonlat;return o.lonLabel=a.tickText(s,s.c2l(l[0]),!0).text,o.latLabel=a.tickText(s,s.c2l(l[1]),!0).text,o}},28178:function(r,n,i){"use strict";var a=i(30211),o=i(71828),s=i(34603),l=o.fillText,u=i(50606).BADNUM,c=i(77734).traceLayerPrefix;function f(r,n,i){if(!r.hovertemplate){var a=(n.hi||r.hoverinfo).split("+"),o=-1!==a.indexOf("all"),s=-1!==a.indexOf("lon"),u=-1!==a.indexOf("lat"),c=n.lonlat,f=[];return o||s&&u?f.push("("+c[1]+"\xb0, "+c[0]+"\xb0)"):s?f.push(i.lon+(c[0]+"\xb0")):u&&f.push(i.lat+(c[1]+"\xb0")),(o||-1!==a.indexOf("text"))&&l(n,r,f),f.join("<br>")}}r.exports={hoverPoints:function(r,n,i){var l=r.cd,h=l[0].trace,p=r.xa,d=r.ya,v=r.subplot,g=[],y=c+h.uid+"-circle",m=h.cluster&&h.cluster.enabled;m&&(g=v.map.queryRenderedFeatures(null,{layers:[y]}).map(function(r){return r.id}));var x=360*(n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360)),b=n-x;if(a.getClosest(l,function(r){var n=r.lonlat;if(n[0]===u||m&&-1===g.indexOf(r.i+1))return 1/0;var a=o.modHalf(n[0],360),s=n[1],l=v.project([a,s]),c=l.x-p.c2p([b,s]),f=l.y-d.c2p([a,i]),h=Math.max(3,r.mrc||0);return Math.max(Math.sqrt(c*c+f*f)-h,1-3/h)},r),!1!==r.index){var _=l[r.index],w=_.lonlat,T=[o.modHalf(w[0],360)+x,w[1]],k=p.c2p(T),A=d.c2p(T),M=_.mrc||1;r.x0=k-M,r.x1=k+M,r.y0=A-M,r.y1=A+M;var S={};S[h.subplot]={_subplot:v};var E=h._module.formatLabels(_,h,S);return r.lonLabel=E.lonLabel,r.latLabel=E.latLabel,r.color=s(h,_),r.extraText=f(h,_,l[0].t.labels),r.hovertemplate=h.hovertemplate,[r]}},getExtraText:f}},20467:function(r,n,i){"use strict";r.exports={attributes:i(99181),supplyDefaults:i(76645),colorbar:i(4898),formatLabels:i(15636),calc:i(84622),plot:i(86951),hoverPoints:i(28178).hoverPoints,eventData:i(53353),selectPoints:i(86387),styleOnSelect:function(r,n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:i(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(r,n,i){"use strict";var a=i(71828),o=i(15790),s=i(77734).traceLayerPrefix,l={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function u(r,n,i,a){this.type="scattermapbox",this.subplot=r,this.uid=n,this.clusterEnabled=i,this.isHidden=a,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:s+n+"-fill",line:s+n+"-line",circle:s+n+"-circle",symbol:s+n+"-symbol",cluster:s+n+"-cluster",clusterCount:s+n+"-cluster-count"},this.below=null}var c=u.prototype;c.addSource=function(r,n,i){var o={type:"geojson",data:n.geojson};i&&i.enabled&&a.extendFlat(o,{cluster:!0,clusterMaxZoom:i.maxzoom});var s=this.subplot.map.getSource(this.sourceIds[r]);s?s.setData(n.geojson):this.subplot.map.addSource(this.sourceIds[r],o)},c.setSourceData=function(r,n){this.subplot.map.getSource(this.sourceIds[r]).setData(n.geojson)},c.addLayer=function(r,n,i){var a={type:n.type,id:this.layerIds[r],source:this.sourceIds[r],layout:n.layout,paint:n.paint};n.filter&&(a.filter=n.filter);for(var o,s=this.layerIds[r],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===s){o=!0;break}o?(this.subplot.setOptions(s,"setLayoutProperty",a.layout),"visible"===a.layout.visibility&&this.subplot.setOptions(s,"setPaintProperty",a.paint)):this.subplot.addLayer(a,i)},c.update=function(r){var n=r[0].trace,i=this.subplot,a=i.map,s=o(i.gd,r),u=i.belowLookup["trace-"+this.uid],c=!(!n.cluster||!n.cluster.enabled),f=!!this.clusterEnabled,h=this;function p(r){f?function(r){for(var n=l.cluster,i=n.length-1;i>=0;i--){var o=n[i];a.removeLayer(h.layerIds[o])}r||a.removeSource(h.sourceIds.circle)}(r):function(r){for(var n=l.nonCluster,i=n.length-1;i>=0;i--){var o=n[i];a.removeLayer(h.layerIds[o]),r||a.removeSource(h.sourceIds[o])}}(r)}function d(r){c?function(r){r||h.addSource("circle",s.circle,n.cluster);for(var i=l.cluster,a=0;a<i.length;a++){var o=i[a],c=s[o];h.addLayer(o,c,u)}}(r):function(r){for(var n=l.nonCluster,i=0;i<n.length;i++){var a=n[i],o=s[a];r||h.addSource(a,o),h.addLayer(a,o,u)}}(r)}var v=this.isHidden,g=!0!==n.visible;g?v||p():v?g||d():f!==c?(p(),d()):(this.below!==u&&(p(!0),d(!0)),function(){for(var r=c?l.cluster:l.nonCluster,n=0;n<r.length;n++){var a=r[n],o=s[a];o&&(i.setOptions(h.layerIds[a],"setLayoutProperty",o.layout),"visible"===o.layout.visibility&&("cluster"!==a&&h.setSourceData(a,o),i.setOptions(h.layerIds[a],"setPaintProperty",o.paint)))}}()),this.clusterEnabled=c,this.isHidden=g,this.below=u,r[0].trace._glTrace=this},c.dispose=function(){for(var r=this.subplot.map,n=this.clusterEnabled?l.cluster:l.nonCluster,i=n.length-1;i>=0;i--){var a=n[i];r.removeLayer(this.layerIds[a]),r.removeSource(this.sourceIds[a])}},r.exports=function(r,n){var i,a,s,c=n[0].trace,f=c.cluster&&c.cluster.enabled,h=!0!==c.visible,p=new u(r,c.uid,f,h),d=o(r.gd,n),v=p.below=r.belowLookup["trace-"+c.uid];if(f)for(p.addSource("circle",d.circle,c.cluster),i=0;i<l.cluster.length;i++)s=d[a=l.cluster[i]],p.addLayer(a,s,v);else for(i=0;i<l.nonCluster.length;i++)s=d[a=l.nonCluster[i]],p.addSource(a,s,c.cluster),p.addLayer(a,s,v);return n[0].trace._glTrace=p,p}},86387:function(r,n,i){"use strict";var a=i(71828),o=i(34098),s=i(50606).BADNUM;r.exports=function(r,n){var i,l=r.cd,u=r.xaxis,c=r.yaxis,f=[],h=l[0].trace;if(!o.hasMarkers(h))return[];if(!1===n)for(i=0;i<l.length;i++)l[i].selected=0;else for(i=0;i<l.length;i++){var p=l[i],d=p.lonlat;if(d[0]!==s){var v=[a.modHalf(d[0],360),d[1]],g=[u.c2p(v),c.c2p(v)];n.contains(g,null,i,r)?(f.push({pointNumber:i,lon:d[0],lat:d[1]}),p.selected=1):p.selected=0}}return f}},81245:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(1426).extendFlat,l=i(82196),u=i(9012),c=l.line;r.exports={mode:l.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:l.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:l.hovertext,line:{color:c.color,width:c.width,dash:c.dash,backoff:c.backoff,shape:s({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:l.connectgaps,marker:l.marker,cliponaxis:s({},l.cliponaxis,{dflt:!1}),textposition:l.textposition,textfont:l.textfont,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,hoverinfo:s({},u.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:l.hoveron,hovertemplate:a(),selected:l.selected,unselected:l.unselected}},26442:function(r,n,i){"use strict";var a=i(92770),o=i(50606).BADNUM,s=i(89298),l=i(36922),u=i(75225),c=i(66279),f=i(47761).calcMarkerSize;r.exports=function(r,n){for(var i=r._fullLayout,h=n.subplot,p=i[h].radialaxis,d=i[h].angularaxis,v=p.makeCalcdata(n,"r"),g=d.makeCalcdata(n,"theta"),y=n._length,m=Array(y),x=0;x<y;x++){var b=v[x],_=g[x],w=m[x]={};a(b)&&a(_)?(w.r=b,w.theta=_):w.r=o}var T=f(n,y);return n._extremes.x=s.findExtremes(p,v,{ppad:T}),l(r,n),u(m,n),c(m,n),m}},22184:function(r,n,i){"use strict";var a=i(71828),o=i(34098),s=i(49508),l=i(11058),u=i(94039),c=i(82410),f=i(28908),h=i(47581).PTS_LINESONLY,p=i(81245);function d(r,n,i,o){var s,l=o("r"),u=o("theta");if(a.isTypedArray(l)&&(n.r=l=Array.from(l)),a.isTypedArray(u)&&(n.theta=u=Array.from(u)),l)u?s=Math.min(l.length,u.length):(s=l.length,o("theta0"),o("dtheta"));else{if(!u)return 0;s=n.theta.length,o("r0"),o("dr")}return n._length=s,s}r.exports={handleRThetaDefaults:d,supplyDefaults:function(r,n,i,v){function g(i,o){return a.coerce(r,n,p,i,o)}var y=d(0,n,0,g);if(y){g("thetaunit"),g("mode",y<h?"lines+markers":"lines"),g("text"),g("hovertext"),"fills"!==n.hoveron&&g("hovertemplate"),o.hasMarkers(n)&&s(r,n,i,v,g,{gradient:!0}),o.hasLines(n)&&(l(r,n,i,v,g,{backoff:!0}),u(r,n,g),g("connectgaps")),o.hasText(n)&&(g("texttemplate"),c(r,n,v,g));var m=[];(o.hasMarkers(n)||o.hasText(n))&&(g("cliponaxis"),g("marker.maxdisplayed"),m.push("points")),g("fill"),"none"!==n.fill&&(f(r,n,i,g),o.hasLines(n)||u(r,n,g)),"tonext"!==n.fill&&"toself"!==n.fill||m.push("fills"),g("hoveron",m.join("+")||"points"),a.coerceSelectionMarkerOpacity(n,g)}else n.visible=!1}}},98608:function(r,n,i){"use strict";var a=i(71828),o=i(89298);r.exports=function(r,n,i){var s,l,u={},c=i[n.subplot]._subplot;c?(s=c.radialAxis,l=c.angularAxis):(s=(c=i[n.subplot]).radialaxis,l=c.angularaxis);var f=s.c2l(r.r);u.rLabel=o.tickText(s,f,!0).text;var h="degrees"===l.thetaunit?a.rad2deg(r.theta):r.theta;return u.thetaLabel=o.tickText(l,h,!0).text,u}},59150:function(r,n,i){"use strict";var a=i(33720);function o(r,n,i,a){var o=i.radialAxis,s=i.angularAxis;o._hovertitle="r",s._hovertitle="θ";var l={};l[n.subplot]={_subplot:i};var u=n._module.formatLabels(r,n,l);a.rLabel=u.rLabel,a.thetaLabel=u.thetaLabel;var c=r.hi||n.hoverinfo,f=[];function h(r,n){f.push(r._hovertitle+": "+n)}if(!n.hovertemplate){var p=c.split("+");-1!==p.indexOf("all")&&(p=["r","theta","text"]),-1!==p.indexOf("r")&&h(o,a.rLabel),-1!==p.indexOf("theta")&&h(s,a.thetaLabel),-1!==p.indexOf("text")&&a.text&&(f.push(a.text),delete a.text),a.extraText=f.join("<br>")}}r.exports={hoverPoints:function(r,n,i,s){var l=a(r,n,i,s);if(l&&!1!==l[0].index){var u=l[0];if(void 0===u.index)return l;var c=r.subplot,f=u.cd[u.index],h=u.trace;if(c.isPtInside(f))return u.xLabelVal=void 0,u.yLabelVal=void 0,o(f,h,c,u),u.hovertemplate=h.hovertemplate,l}},makeHoverPointText:o}},91271:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:i(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:i(81245),supplyDefaults:i(22184).supplyDefaults,colorbar:i(4898),formatLabels:i(98608),calc:i(26442),plot:i(45162),style:i(16296).style,styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(59150).hoverPoints,selectPoints:i(98002),meta:{}}},45162:function(r,n,i){"use strict";var a=i(32663),o=i(50606).BADNUM;r.exports=function(r,n,i){for(var s=n.layers.frontplot.select("g.scatterlayer"),l=n.xaxis,u=n.yaxis,c={xaxis:l,yaxis:u,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},f=n.radialAxis,h=n.angularAxis,p=0;p<i.length;p++)for(var d=i[p],v=0;v<d.length;v++){0===v&&(d[0].trace._xA=l,d[0].trace._yA=u);var g=d[v],y=g.r;if(y===o)g.x=g.y=o;else{var m=f.c2g(y),x=h.c2g(g.theta);g.x=m*Math.cos(x),g.y=m*Math.sin(x)}}a(r,c,i,s)}},53286:function(r,n,i){"use strict";var a=i(81245),o=i(42341),s=i(5386).si;r.exports={mode:a.mode,r:a.r,theta:a.theta,r0:a.r0,dr:a.dr,theta0:a.theta0,dtheta:a.dtheta,thetaunit:a.thetaunit,text:a.text,texttemplate:s({editType:"plot"},{keys:["r","theta","text"]}),hovertext:a.hovertext,hovertemplate:a.hovertemplate,line:{color:o.line.color,width:o.line.width,dash:o.line.dash,editType:"calc"},connectgaps:o.connectgaps,marker:o.marker,fill:o.fill,fillcolor:o.fillcolor,textposition:o.textposition,textfont:o.textfont,hoverinfo:a.hoverinfo,selected:a.selected,unselected:a.unselected}},65746:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:i(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:i(53286),supplyDefaults:i(75485),colorbar:i(4898),formatLabels:i(46255),calc:i(37499),hoverPoints:i(29347).hoverPoints,selectPoints:i(58147),meta:{}}},37499:function(r,n,i){"use strict";var a=i(36922),o=i(47761).calcMarkerSize,s=i(19635),l=i(89298),u=i(78232).TOO_MANY_POINTS;r.exports=function(r,n){var i=r._fullLayout,c=n.subplot,f=i[c].radialaxis,h=i[c].angularaxis,p=n._r=f.makeCalcdata(n,"r"),d=n._theta=h.makeCalcdata(n,"theta"),v=n._length,g={};v<p.length&&(p=p.slice(0,v)),v<d.length&&(d=d.slice(0,v)),g.r=p,g.theta=d,a(r,n);var y,m=g.opts=s.style(r,n);return v<u?y=o(n,v):m.marker&&(y=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),n._extremes.x=l.findExtremes(f,p,{ppad:y}),[{x:!1,y:!1,t:g,trace:n}]}},75485:function(r,n,i){"use strict";var a=i(71828),o=i(34098),s=i(22184).handleRThetaDefaults,l=i(49508),u=i(11058),c=i(82410),f=i(28908),h=i(47581).PTS_LINESONLY,p=i(53286);r.exports=function(r,n,i,d){function v(i,o){return a.coerce(r,n,p,i,o)}var g=s(r,n,d,v);g?(v("thetaunit"),v("mode",g<h?"lines+markers":"lines"),v("text"),v("hovertext"),"fills"!==n.hoveron&&v("hovertemplate"),o.hasMarkers(n)&&l(r,n,i,d,v,{noAngleRef:!0,noStandOff:!0}),o.hasLines(n)&&(u(r,n,i,d,v),v("connectgaps")),o.hasText(n)&&(v("texttemplate"),c(r,n,d,v)),v("fill"),"none"!==n.fill&&f(r,n,i,v),a.coerceSelectionMarkerOpacity(n,v)):n.visible=!1}},46255:function(r,n,i){"use strict";var a=i(98608);r.exports=function(r,n,i){var o=r.i;return"r"in r||(r.r=n._r[o]),"theta"in r||(r.theta=n._theta[o]),a(r,n,i)}},29347:function(r,n,i){"use strict";var a=i(20794),o=i(59150).makeHoverPointText;r.exports={hoverPoints:function(r,n,i,s){var l=r.cd[0].t,u=l.r,c=l.theta,f=a.hoverPoints(r,n,i,s);if(f&&!1!==f[0].index){var h=f[0];if(void 0===h.index)return f;var p=r.subplot,d=h.cd[h.index],v=h.trace;if(d.r=u[h.index],d.theta=c[h.index],p.isPtInside(d))return h.xLabelVal=void 0,h.yLabelVal=void 0,o(d,v,p,h),f}}}},21461:function(r,n,i){"use strict";var a=i(65746);a.plot=i(49741),r.exports=a},49741:function(r,n,i){"use strict";var a=i(88294),o=i(92770),s=i(26787),l=i(38967),u=i(19635),c=i(71828),f=i(78232).TOO_MANY_POINTS;r.exports=function(r,n,i){if(i.length){var h=n.radialAxis,p=n.angularAxis,d=l(r,n);return i.forEach(function(i){if(i&&i[0]&&i[0].trace){var s,l=i[0],v=l.trace,g=l.t,y=v._length,m=g.r,x=g.theta,b=g.opts,_=m.slice(),w=x.slice();for(s=0;s<m.length;s++)n.isPtInside({r:m[s],theta:x[s]})||(_[s]=NaN,w[s]=NaN);var T=Array(2*y),k=Array(y),A=Array(y);for(s=0;s<y;s++){var M,S,E=_[s];if(o(E)){var L=h.c2g(E),C=p.c2g(w[s],v.thetaunit);M=L*Math.cos(C),S=L*Math.sin(C)}else M=S=NaN;k[s]=T[2*s]=M,A[s]=T[2*s+1]=S}g.tree=a(T),b.marker&&y>=f&&(b.marker.cluster=g.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=T),b.line&&T.length>1&&c.extendFlat(b.line,u.linePositions(r,v,T)),b.text&&(c.extendFlat(b.text,{positions:T},u.textPosition(r,v,b.text,b.marker)),c.extendFlat(b.textSel,{positions:T},u.textPosition(r,v,b.text,b.markerSel)),c.extendFlat(b.textUnsel,{positions:T},u.textPosition(r,v,b.text,b.markerUnsel))),b.fill&&!d.fill2d&&(d.fill2d=!0),b.marker&&!d.scatter2d&&(d.scatter2d=!0),b.line&&!d.line2d&&(d.line2d=!0),b.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(b.line),d.fillOptions.push(b.fill),d.markerOptions.push(b.marker),d.markerSelectedOptions.push(b.markerSel),d.markerUnselectedOptions.push(b.markerUnsel),d.textOptions.push(b.text),d.textSelectedOptions.push(b.textSel),d.textUnselectedOptions.push(b.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),g.x=k,g.y=A,g.rawx=k,g.rawy=A,g.r=m,g.theta=x,g.positions=T,g._scene=d,g.index=d.count,d.count++}}),s(r,n,i)}},r.exports.reglPrecompiled={}},48300:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(1426).extendFlat,l=i(82196),u=i(9012),c=l.line;r.exports={mode:l.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:l.text,texttemplate:o({editType:"plot"},{keys:["real","imag","text"]}),hovertext:l.hovertext,line:{color:c.color,width:c.width,dash:c.dash,backoff:c.backoff,shape:s({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:l.connectgaps,marker:l.marker,cliponaxis:s({},l.cliponaxis,{dflt:!1}),textposition:l.textposition,textfont:l.textfont,fill:s({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,hoverinfo:s({},u.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:l.hoveron,hovertemplate:a(),selected:l.selected,unselected:l.unselected}},30621:function(r,n,i){"use strict";var a=i(92770),o=i(50606).BADNUM,s=i(36922),l=i(75225),u=i(66279),c=i(47761).calcMarkerSize;r.exports=function(r,n){for(var i=r._fullLayout,f=n.subplot,h=i[f].realaxis,p=i[f].imaginaryaxis,d=h.makeCalcdata(n,"real"),v=p.makeCalcdata(n,"imag"),g=n._length,y=Array(g),m=0;m<g;m++){var x=d[m],b=v[m],_=y[m]={};a(x)&&a(b)?(_.real=x,_.imag=b):_.real=o}return c(n,g),s(r,n),l(y,n),u(y,n),y}},65269:function(r,n,i){"use strict";var a=i(71828),o=i(34098),s=i(49508),l=i(11058),u=i(94039),c=i(82410),f=i(28908),h=i(47581).PTS_LINESONLY,p=i(48300);r.exports=function(r,n,i,d){function v(i,o){return a.coerce(r,n,p,i,o)}var g,y,m,x=(y=v("real"),m=v("imag"),y&&m&&(g=Math.min(y.length,m.length)),a.isTypedArray(y)&&(n.real=y=Array.from(y)),a.isTypedArray(m)&&(n.imag=m=Array.from(m)),n._length=g,g);if(x){v("mode",x<h?"lines+markers":"lines"),v("text"),v("hovertext"),"fills"!==n.hoveron&&v("hovertemplate"),o.hasMarkers(n)&&s(r,n,i,d,v,{gradient:!0}),o.hasLines(n)&&(l(r,n,i,d,v,{backoff:!0}),u(r,n,v),v("connectgaps")),o.hasText(n)&&(v("texttemplate"),c(r,n,d,v));var b=[];(o.hasMarkers(n)||o.hasText(n))&&(v("cliponaxis"),v("marker.maxdisplayed"),b.push("points")),v("fill"),"none"!==n.fill&&(f(r,n,i,v),o.hasLines(n)||u(r,n,v)),"tonext"!==n.fill&&"toself"!==n.fill||b.push("fills"),v("hoveron",b.join("+")||"points"),a.coerceSelectionMarkerOpacity(n,v)}else n.visible=!1}},62047:function(r,n,i){"use strict";var a=i(89298);r.exports=function(r,n,i){var o={},s=i[n.subplot]._subplot;return o.realLabel=a.tickText(s.radialAxis,r.real,!0).text,o.imagLabel=a.tickText(s.angularAxis,r.imag,!0).text,o}},11350:function(r,n,i){"use strict";var a=i(33720);function o(r,n,i,a){var o=i.radialAxis,s=i.angularAxis;o._hovertitle="real",s._hovertitle="imag";var l={};l[n.subplot]={_subplot:i};var u=n._module.formatLabels(r,n,l);a.realLabel=u.realLabel,a.imagLabel=u.imagLabel;var c=r.hi||n.hoverinfo,f=[];function h(r,n){f.push(r._hovertitle+": "+n)}if(!n.hovertemplate){var p=c.split("+");-1!==p.indexOf("all")&&(p=["real","imag","text"]),-1!==p.indexOf("real")&&h(o,a.realLabel),-1!==p.indexOf("imag")&&h(s,a.imagLabel),-1!==p.indexOf("text")&&a.text&&(f.push(a.text),delete a.text),a.extraText=f.join("<br>")}}r.exports={hoverPoints:function(r,n,i,s){var l=a(r,n,i,s);if(l&&!1!==l[0].index){var u=l[0];if(void 0===u.index)return l;var c=r.subplot,f=u.cd[u.index],h=u.trace;if(c.isPtInside(f))return u.xLabelVal=void 0,u.yLabelVal=void 0,o(f,h,c,u),u.hovertemplate=h.hovertemplate,l}},makeHoverPointText:o}},85956:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"scattersmith",basePlotModule:i(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:i(48300),supplyDefaults:i(65269),colorbar:i(4898),formatLabels:i(62047),calc:i(30621),plot:i(12480),style:i(16296).style,styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(11350).hoverPoints,selectPoints:i(98002),meta:{}}},12480:function(r,n,i){"use strict";var a=i(32663),o=i(50606).BADNUM,s=i(23893).smith;r.exports=function(r,n,i){for(var l=n.layers.frontplot.select("g.scatterlayer"),u=n.xaxis,c=n.yaxis,f={xaxis:u,yaxis:c,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},h=0;h<i.length;h++)for(var p=i[h],d=0;d<p.length;d++){0===d&&(p[0].trace._xA=u,p[0].trace._yA=c);var v=p[d],g=v.real;if(g===o)v.x=v.y=o;else{var y=s([g,v.imag]);v.x=y[0],v.y=y[1]}}a(r,f,i,l)}},50413:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(82196),l=i(9012),u=i(50693),c=i(79952).P,f=i(1426).extendFlat,h=s.marker,p=s.line,d=h.line;r.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:f({},s.mode,{dflt:"markers"}),text:f({},s.text,{}),texttemplate:o({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:f({},s.hovertext,{}),line:{color:p.color,width:p.width,dash:c,backoff:p.backoff,shape:f({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:s.connectgaps,cliponaxis:s.cliponaxis,fill:f({},s.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:s.fillcolor,marker:f({symbol:h.symbol,opacity:h.opacity,angle:h.angle,angleref:h.angleref,standoff:h.standoff,maxdisplayed:h.maxdisplayed,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,line:f({width:d.width,editType:"calc"},u("marker.line")),gradient:h.gradient,editType:"calc"},u("marker")),textfont:s.textfont,textposition:s.textposition,selected:s.selected,unselected:s.unselected,hoverinfo:f({},l.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:s.hoveron,hovertemplate:a()}},54337:function(r,n,i){"use strict";var a=i(92770),o=i(36922),s=i(75225),l=i(66279),u=i(47761).calcMarkerSize,c=["a","b","c"],f={a:["b","c"],b:["a","c"],c:["a","b"]};r.exports=function(r,n){var i,h,p,d,v,g,y=r._fullLayout[n.subplot].sum,m=n.sum||y,x={a:n.a,b:n.b,c:n.c};for(i=0;i<c.length;i++)if(!x[p=c[i]]){for(v=x[f[p][0]],g=x[f[p][1]],d=Array(v.length),h=0;h<v.length;h++)d[h]=m-v[h]-g[h];x[p]=d}var b,_,w,T,k,A,M=n._length,S=Array(M);for(i=0;i<M;i++)b=x.a[i],_=x.b[i],w=x.c[i],a(b)&&a(_)&&a(w)?(1!=(T=y/((b=+b)+(_=+_)+(w=+w)))&&(b*=T,_*=T,w*=T),A=b,k=w-_,S[i]={x:k,y:A,a:b,b:_,c:w}):S[i]={x:!1,y:!1};return u(n,M),o(r,n),s(S,n),l(S,n),S}},46008:function(r,n,i){"use strict";var a=i(71828),o=i(47581),s=i(34098),l=i(49508),u=i(11058),c=i(94039),f=i(82410),h=i(28908),p=i(50413);r.exports=function(r,n,i,d){function v(i,o){return a.coerce(r,n,p,i,o)}var g,y=v("a"),m=v("b"),x=v("c");if(y?(g=y.length,m?(g=Math.min(g,m.length),x&&(g=Math.min(g,x.length))):g=x?Math.min(g,x.length):0):m&&x&&(g=Math.min(m.length,x.length)),g){n._length=g,v("sum"),v("text"),v("hovertext"),"fills"!==n.hoveron&&v("hovertemplate"),v("mode",g<o.PTS_LINESONLY?"lines+markers":"lines"),s.hasMarkers(n)&&l(r,n,i,d,v,{gradient:!0}),s.hasLines(n)&&(u(r,n,i,d,v,{backoff:!0}),c(r,n,v),v("connectgaps")),s.hasText(n)&&(v("texttemplate"),f(r,n,d,v));var b=[];(s.hasMarkers(n)||s.hasText(n))&&(v("cliponaxis"),v("marker.maxdisplayed"),b.push("points")),v("fill"),"none"!==n.fill&&(h(r,n,i,v),s.hasLines(n)||c(r,n,v)),"tonext"!==n.fill&&"toself"!==n.fill||b.push("fills"),v("hoveron",b.join("+")||"points"),a.coerceSelectionMarkerOpacity(n,v)}else n.visible=!1}},4524:function(r){"use strict";r.exports=function(r,n,i,a,o){if(n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),a[o]){var s=a[o];r.a=s.a,r.b=s.b,r.c=s.c}else r.a=n.a,r.b=n.b,r.c=n.c;return r}},93645:function(r,n,i){"use strict";var a=i(89298);r.exports=function(r,n,i){var o={},s=i[n.subplot]._subplot;return o.aLabel=a.tickText(s.aaxis,r.a,!0).text,o.bLabel=a.tickText(s.baxis,r.b,!0).text,o.cLabel=a.tickText(s.caxis,r.c,!0).text,o}},47250:function(r,n,i){"use strict";var a=i(33720);r.exports=function(r,n,i,o){var s=a(r,n,i,o);if(s&&!1!==s[0].index){var l=s[0];if(void 0===l.index){var u=1-l.y0/r.ya._length,c=r.xa._length,f=c*u/2,h=c-f;return l.x0=Math.max(Math.min(l.x0,h),f),l.x1=Math.max(Math.min(l.x1,h),f),s}var p=l.cd[l.index],d=l.trace,v=l.subplot;l.a=p.a,l.b=p.b,l.c=p.c,l.xLabelVal=void 0,l.yLabelVal=void 0;var g={};g[d.subplot]={_subplot:v};var y=d._module.formatLabels(p,d,g);l.aLabel=y.aLabel,l.bLabel=y.bLabel,l.cLabel=y.cLabel;var m=p.hi||d.hoverinfo,x=[];if(!d.hovertemplate){var b=m.split("+");-1!==b.indexOf("all")&&(b=["a","b","c"]),-1!==b.indexOf("a")&&_(v.aaxis,l.aLabel),-1!==b.indexOf("b")&&_(v.baxis,l.bLabel),-1!==b.indexOf("c")&&_(v.caxis,l.cLabel)}return l.extraText=x.join("<br>"),l.hovertemplate=d.hovertemplate,s}function _(r,n){x.push(r._hovertitle+": "+n)}}},52979:function(r,n,i){"use strict";r.exports={attributes:i(50413),supplyDefaults:i(46008),colorbar:i(4898),formatLabels:i(93645),calc:i(54337),plot:i(7507),style:i(16296).style,styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(47250),selectPoints:i(98002),eventData:i(4524),moduleType:"trace",name:"scatterternary",basePlotModule:i(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(r,n,i){"use strict";var a=i(32663);r.exports=function(r,n,i){var o=n.plotContainer;o.select(".scatterlayer").selectAll("*").remove();for(var s=n.xaxis,l=n.yaxis,u={xaxis:s,yaxis:l,plot:o,layerClipId:n._hasClipOnAxisFalse?n.clipIdRelative:null},c=n.layers.frontplot.select("g.scatterlayer"),f=0;f<i.length;f++){var h=i[f];h.length&&(h[0].trace._xA=s,h[0].trace._yA=l)}a(r,u,i,c)}},46880:function(r,n,i){"use strict";var a=i(82196),o=i(50693),s=i(12663).axisHoverFormat,l=i(5386).fF,u=i(42341),c=i(85555).idRegex,f=i(44467).templatedArray,h=i(1426).extendFlat,p=a.marker,d=p.line,v=h(o("marker.line",{editTypeOverride:"calc"}),{width:h({},d.width,{editType:"calc"}),editType:"calc"}),g=h(o("marker"),{symbol:p.symbol,angle:p.angle,size:h({},p.size,{editType:"markerSize"}),sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:v,editType:"calc"});function y(r){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:c[r],editType:"plot"}}}g.color.editType=g.cmin.editType=g.cmax.editType="style",r.exports={dimensions:f("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:h({},u.text,{}),hovertext:h({},u.hovertext,{}),hovertemplate:l(),xhoverformat:s("x"),yhoverformat:s("y"),marker:g,xaxes:y("x"),yaxes:y("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:u.selected.marker,editType:"calc"},unselected:{marker:u.unselected.marker,editType:"calc"},opacity:u.opacity}},65017:function(r,n,i){"use strict";var a=i(73972),o=i(83312);r.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:i(46880),supplyDefaults:i(25784),colorbar:i(4898),calc:i(87625),plot:i(79410),hoverPoints:i(8567).hoverPoints,selectPoints:i(8689),editStyle:i(28801),meta:{}},a.register(o)},16947:function(r,n,i){"use strict";var a=i(46075),o=i(73972),s=i(79749),l=i(27659).a0,u=i(93612),c=i(41675).getFromId,f=i(89298).shouldShowZeroLine,h="splom",p={};function d(r){var n=r._fullLayout,i=n._glcanvas.data()[0].regl,o=n._splomGrid;o||(o=n._splomGrid=a(i)),o.update(function(r){var n,i=r._context.plotGlPixelRatio,a=r._fullLayout,o=a._size,s=[0,0,a.width*i,a.height*i],l={};function u(r,n,a,o,u,c){a*=i,o*=i,u*=i,c*=i;var f=n[r+"color"],h=n[r+"width"],p=String(f+h);p in l?l[p].data.push(NaN,NaN,a,o,u,c):l[p]={data:[a,o,u,c],join:"rect",thickness:h*i,color:f,viewport:s,range:s,overlay:!1}}for(n in a._splomSubplots){var c,h,p=a._plots[n],d=p.xaxis,v=p.yaxis,g=d._gridVals,y=v._gridVals,m=d._offset,x=d._length,b=v._length,_=o.b+v.domain[0]*o.h,w=-v._m,T=-w*v.r2l(v.range[0],v.calendar);if(d.showgrid)for(n=0;n<g.length;n++)c=m+d.l2p(g[n].x),u("grid",d,c,_,c,_+b);if(v.showgrid)for(n=0;n<y.length;n++)u("grid",v,m,h=_+T+w*y[n].x,m+x,h);f(r,d,v)&&(c=m+d.l2p(0),u("zeroline",d,c,_,c,_+b)),f(r,v,d)&&u("zeroline",v,m,h=_+T+0,m+x,h)}var k=[];for(n in l)k.push(l[n]);return k}(r))}r.exports={name:h,attr:u.attr,attrRegex:u.attrRegex,layoutAttributes:u.layoutAttributes,supplyLayoutDefaults:u.supplyLayoutDefaults,drawFramework:u.drawFramework,plot:function(r){var n=r._fullLayout,i=o.getModule(h),a=l(r.calcdata,i)[0];s(r,["ANGLE_instanced_arrays","OES_element_index_uint"],p)&&(n._hasOnlyLargeSploms&&d(r),i.plot(r,{},a))},drag:function(r){var n=r.calcdata,i=r._fullLayout;i._hasOnlyLargeSploms&&d(r);for(var a=0;a<n.length;a++){var o=n[a][0].trace,s=i._splomScenes[o.uid];"splom"===o.type&&s&&s.matrix&&function(r,n,i){for(var a=i.matrixOptions.data.length,o=n._visibleDims,s=i.viewOpts.ranges=Array(a),l=0;l<o.length;l++){var u=o[l],f=s[l]=[,,,,],h=c(r,n._diag[u][0]);h&&(f[0]=h.r2l(h.range[0]),f[2]=h.r2l(h.range[1]));var p=c(r,n._diag[u][1]);p&&(f[1]=p.r2l(p.range[0]),f[3]=p.r2l(p.range[1]))}i.selectBatch.length||i.unselectBatch.length?i.matrix.update({ranges:s},{ranges:s}):i.matrix.update({ranges:s})}(r,o,s)}},updateGrid:d,clean:function(r,n,i,a){var o,s={};if(a._splomScenes){for(o=0;o<r.length;o++){var l=r[o];"splom"===l.type&&(s[l.uid]=1)}for(o=0;o<i.length;o++){var c=i[o];if(!s[c.uid]){var f=a._splomScenes[c.uid];f&&f.destroy&&f.destroy(),a._splomScenes[c.uid]=null,delete a._splomScenes[c.uid]}}}0===Object.keys(a._splomScenes||{}).length&&delete a._splomScenes,a._splomGrid&&!n._hasOnlyLargeSploms&&a._hasOnlyLargeSploms&&(a._splomGrid.destroy(),a._splomGrid=null,delete a._splomGrid),u.clean(r,n,i,a)},updateFx:u.updateFx,toSVG:u.toSVG,reglPrecompiled:p}},87625:function(r,n,i){"use strict";var a=i(71828),o=i(41675),s=i(47761).calcMarkerSize,l=i(47761).calcAxisExpansion,u=i(36922),c=i(19635).markerSelection,f=i(19635).markerStyle,h=i(10164),p=i(50606).BADNUM,d=i(78232).TOO_MANY_POINTS;r.exports=function(r,n){var i,v,g,y,m,x,b=n.dimensions,_=n._length,w={},T=w.cdata=[],k=w.data=[],A=n._visibleDims=[];function M(r,i){for(var o=r.makeCalcdata({v:i.values,vcalendar:n.calendar},"v"),s=0;s<o.length;s++)o[s]=o[s]===p?NaN:o[s];T.push(o),k.push("log"===r.type?a.simpleMap(o,r.c2l):o)}for(i=0;i<b.length;i++)if((g=b[i]).visible){if(y=o.getFromId(r,n._diag[i][0]),m=o.getFromId(r,n._diag[i][1]),y&&m&&y.type!==m.type){a.log("Skipping splom dimension "+i+" with conflicting axis types");continue}y?(M(y,g),m&&"category"===m.type&&(m._categories=y._categories.slice())):M(m,g),A.push(i)}for(u(r,n),a.extendFlat(w,f(r,n)),x=T.length*_>d?w.sizeAvg||Math.max(w.size,3):s(n,_),v=0;v<A.length;v++)g=b[i=A[v]],y=o.getFromId(r,n._diag[i][0])||{},m=o.getFromId(r,n._diag[i][1])||{},l(r,n,y,m,T[v],T[v],x);var S=h(r,n);return S.matrix||(S.matrix=!0),S.matrixOptions=w,S.selectedOptions=c(r,n,n.selected),S.unselectedOptions=c(r,n,n.unselected),[{x:!1,y:!1,t:{},trace:n}]}},25784:function(r,n,i){"use strict";var a=i(71828),o=i(85501),s=i(46880),l=i(34098),u=i(49508),c=i(94397),f=i(68645).isOpenSymbol;function h(r,n){function i(i,o){return a.coerce(r,n,s.dimensions,i,o)}i("label");var o=i("values");o&&o.length?i("visible"):n.visible=!1,i("axis.type"),i("axis.matches")}r.exports=function(r,n,i,p){function d(i,o){return a.coerce(r,n,s,i,o)}var v=o(r,n,{name:"dimensions",handleItemDefaults:h}),g=d("diagonal.visible"),y=d("showupperhalf"),m=d("showlowerhalf");if(c(n,v,"values")&&(g||y||m)){d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),u(r,n,i,p,d,{noAngleRef:!0,noStandOff:!0});var x=f(n.marker.symbol),b=l.isBubble(n);d("marker.line.width",x||b?1:0),function(r,n,i,a){var o,s,l=n.dimensions,u=l.length,c=n.showupperhalf,f=n.showlowerhalf,h=n.diagonal.visible,p=Array(u),d=Array(u);for(o=0;o<u;o++){var v=o?o+1:"";p[o]="x"+v,d[o]="y"+v}var g=a("xaxes",p),y=a("yaxes",d),m=n._diag=Array(u);n._xaxes={},n._yaxes={};var x=[],b=[];function _(r,a,o,s){if(r){var l=r.charAt(0),u=i._splomAxes[l];if(n["_"+l+"axes"][r]=1,s.push(r),!(r in u)){var c=u[r]={};o&&(c.label=o.label||"",o.visible&&o.axis&&(o.axis.type&&(c.type=o.axis.type),o.axis.matches&&(c.matches=a)))}}}var w=!h&&!f,T=!h&&!c;for(n._axesDim={},o=0;o<u;o++){var k=l[o],A=0===o,M=o===u-1,S=A&&w||M&&T?void 0:g[o],E=A&&T||M&&w?void 0:y[o];_(S,E,k,x),_(E,S,k,b),m[o]=[S,E],n._axesDim[S]=o,n._axesDim[E]=o}for(o=0;o<x.length;o++)for(s=0;s<b.length;s++){var L=x[o]+b[s];o>s&&c||o<s&&f?i._splomSubplots[L]=1:o!==s||!h&&f&&c||(i._splomSubplots[L]=1)}(!f||!h&&c&&f)&&(i._splomGridDflt.xside="bottom",i._splomGridDflt.yside="left")}(0,n,p,d),a.coerceSelectionMarkerOpacity(n,d)}else n.visible=!1}},28801:function(r,n,i){"use strict";var a=i(71828),o=i(36922),s=i(19635).markerStyle;r.exports=function(r,n){var i=n.trace,l=r._fullLayout._splomScenes[i.uid];if(l){o(r,i),a.extendFlat(l.matrixOptions,s(r,i));var u=a.extendFlat({},l.matrixOptions,l.viewOpts);l.matrix.update(u,null)}}},35948:function(r,n){"use strict";n.getDimIndex=function(r,n){for(var i=n._id,a={x:0,y:1}[i.charAt(0)],o=r._visibleDims,s=0;s<o.length;s++){var l=o[s];if(r._diag[l][a]===i)return s}return!1}},8567:function(r,n,i){"use strict";var a=i(35948),o=i(20794).calcHover;r.exports={hoverPoints:function(r,n,i){var s=r.cd[0].trace,l=r.scene.matrixOptions.cdata,u=r.xa,c=r.ya,f=u.c2p(n),h=c.c2p(i),p=r.distance,d=a.getDimIndex(s,u),v=a.getDimIndex(s,c);if(!1===d||!1===v)return[r];for(var g,y,m=l[d],x=l[v],b=p,_=0;_<m.length;_++){var w=m[_],T=x[_],k=u.c2p(w)-f,A=c.c2p(T)-h,M=Math.sqrt(k*k+A*A);M<b&&(b=y=M,g=_)}return r.index=g,r.distance=b,r.dxy=y,void 0===g?[r]:[o(r,m,x,s)]}}},6419:function(r,n,i){"use strict";var a=i(65017);a.basePlotModule=i(16947),r.exports=a},79410:function(r,n,i){"use strict";var a=i(60487),o=i(71828),s=i(41675),l=i(64505).selectMode;r.exports=function(r,n,i){if(i.length)for(var u=0;u<i.length;u++)!function(r,n){var i,u,c,f,h,p=r._fullLayout,d=p._size,v=n.trace,g=n.t,y=p._splomScenes[v.uid],m=y.matrixOptions,x=m.cdata,b=p._glcanvas.data()[0].regl,_=p.dragmode;if(0!==x.length){m.lower=v.showupperhalf,m.upper=v.showlowerhalf,m.diagonal=v.diagonal.visible;var w=v._visibleDims,T=x.length,k=y.viewOpts={};for(k.ranges=Array(T),k.domains=Array(T),h=0;h<w.length;h++){c=w[h];var A=k.ranges[h]=[,,,,],M=k.domains[h]=[,,,,];(i=s.getFromId(r,v._diag[c][0]))&&(A[0]=i._rl[0],A[2]=i._rl[1],M[0]=i.domain[0],M[2]=i.domain[1]),(u=s.getFromId(r,v._diag[c][1]))&&(A[1]=u._rl[0],A[3]=u._rl[1],M[1]=u.domain[0],M[3]=u.domain[1])}var S=r._context.plotGlPixelRatio,E=d.l*S,L=d.b*S,C=d.w*S,O=d.h*S;k.viewport=[E,L,C+E,O+L],!0===y.matrix&&(y.matrix=a(b));var P=p.clickmode.indexOf("select")>-1,I=!0;if(l(_)||v.selectedpoints||P){var D=v._length;if(v.selectedpoints){y.selectBatch=v.selectedpoints;var z=v.selectedpoints,R={};for(c=0;c<z.length;c++)R[z[c]]=!0;var F=[];for(c=0;c<D;c++)R[c]||F.push(c);y.unselectBatch=F}var B=g.xpx=Array(T),N=g.ypx=Array(T);for(h=0;h<w.length;h++){if(c=w[h],i=s.getFromId(r,v._diag[c][0]))for(B[h]=Array(D),f=0;f<D;f++)B[h][f]=i.c2p(x[h][f]);if(u=s.getFromId(r,v._diag[c][1]))for(N[h]=Array(D),f=0;f<D;f++)N[h][f]=u.c2p(x[h][f])}if(y.selectBatch.length||y.unselectBatch.length){var j=o.extendFlat({},m,y.unselectedOptions,k),U=o.extendFlat({},m,y.selectedOptions,k);y.matrix.update(j,U),I=!1}}else g.xpx=g.ypx=null;if(I){var V=o.extendFlat({},m,k);y.matrix.update(V,null)}}}(r,i[u][0])}},10164:function(r,n,i){"use strict";var a=i(71828);r.exports=function(r,n){var i=r._fullLayout,o=n.uid,s=i._splomScenes;s||(s=i._splomScenes={});var l={dirty:!0,selectBatch:[],unselectBatch:[]},u=s[n.uid];return u||((u=s[o]=a.extendFlat({},l,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){u.matrix&&u.matrix.draw&&(u.selectBatch.length||u.unselectBatch.length?u.matrix.draw(u.unselectBatch,u.selectBatch):u.matrix.draw()),u.dirty=!1},u.destroy=function(){u.matrix&&u.matrix.destroy&&u.matrix.destroy(),u.matrixOptions=null,u.selectBatch=null,u.unselectBatch=null,u=null}),u.dirty||a.extendFlat(u,l),u}},8689:function(r,n,i){"use strict";var a=i(71828),o=a.pushUnique,s=i(34098),l=i(35948);r.exports=function(r,n){var i=r.cd,u=i[0].trace,c=i[0].t,f=r.scene,h=f.matrixOptions.cdata,p=r.xaxis,d=r.yaxis,v=[];if(!f)return v;var g=!s.hasMarkers(u)&&!s.hasText(u);if(!0!==u.visible||g)return v;var y=l.getDimIndex(u,p),m=l.getDimIndex(u,d);if(!1===y||!1===m)return v;var x=c.xpx[y],b=c.ypx[m],_=h[y],w=h[m],T=(r.scene.selectBatch||[]).slice(),k=[];if(!1!==n&&!n.degenerate)for(var A=0;A<_.length;A++)n.contains([x[A],b[A]],null,A,r)?(v.push({pointNumber:A,x:_[A],y:w[A]}),o(T,A)):-1!==T.indexOf(A)?o(T,A):k.push(A);var M=f.matrixOptions;return T.length||k.length?f.selectBatch.length||f.unselectBatch.length||f.matrix.update(f.unselectedOptions,a.extendFlat({},M,f.selectedOptions,f.viewOpts)):f.matrix.update(M,null),f.selectBatch=T,f.unselectBatch=k,v}},21850:function(r,n,i){"use strict";var a=i(50693),o=i(12663).axisHoverFormat,s=i(5386).fF,l=i(2418),u=i(9012),c=i(1426).extendFlat,f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:s({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:c({},u.showlegend,{dflt:!1})};c(f,a("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(r){f[r]=l[r]}),f.hoverinfo=c({},u.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),f.transforms=void 0,r.exports=f},88489:function(r,n,i){"use strict";var a=i(71828),o=i(78803);function s(r){var n,i,o,s,u,c,f,h,p,d,v,g,y=r._x,m=r._y,x=r._z,b=r._len,_=-1/0,w=1/0,T=-1/0,k=1/0,A=-1/0,M=1/0,S="";for(b&&(f=y[0],p=m[0],v=x[0]),b>1&&(h=y[b-1],d=m[b-1],g=x[b-1]),n=0;n<b;n++)_=Math.max(_,y[n]),w=Math.min(w,y[n]),T=Math.max(T,m[n]),k=Math.min(k,m[n]),A=Math.max(A,x[n]),M=Math.min(M,x[n]),s||y[n]===f||(s=!0,S+="x"),u||m[n]===p||(u=!0,S+="y"),c||x[n]===v||(c=!0,S+="z");s||(S+="x"),u||(S+="y"),c||(S+="z");var E=l(r._x),L=l(r._y),C=l(r._z);S=(S=(S=S.replace("x",(f>h?"-":"+")+"x")).replace("y",(p>d?"-":"+")+"y")).replace("z",(v>g?"-":"+")+"z");var O=function(){b=0,E=[],L=[],C=[]};(!b||b<E.length*L.length*C.length)&&O();var P=function(r){return"x"===r?y:"y"===r?m:x},I=function(r){return"x"===r?E:"y"===r?L:C},D=function(r){return r[b-1]<r[0]?-1:1},z=P(S[1]),R=P(S[3]),F=P(S[5]),B=I(S[1]).length,N=I(S[3]).length,j=I(S[5]).length,U=!1,V=function(r,n,i){return B*(N*r+n)+i},H=D(P(S[1])),q=D(P(S[3])),G=D(P(S[5]));for(n=0;n<j-1;n++){for(i=0;i<N-1;i++){for(o=0;o<B-1;o++){var Z=V(n,i,o),Y=V(n,i,o+1),W=V(n,i+1,o),X=V(n+1,i,o);if(z[Z]*H<z[Y]*H&&R[Z]*q<R[W]*q&&F[Z]*G<F[X]*G||(U=!0),U)break}if(U)break}if(U)break}return U&&(a.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:w,yMin:k,zMin:M,xMax:_,yMax:T,zMax:A,Xs:E,Ys:L,Zs:C,len:b,fill:S}}function l(r){return a.distinctVals(r).vals}function u(r,n){if(void 0===n&&(n=r.length),a.isTypedArray(r))return r.subarray(0,n);for(var i=[],o=0;o<n;o++)i[o]=+r[o];return i}r.exports={calc:function(r,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=u(n.u,n._len),n._v=u(n.v,n._len),n._w=u(n.w,n._len),n._x=u(n.x,n._len),n._y=u(n.y,n._len),n._z=u(n.z,n._len);var i=s(n);n._gridFill=i.fill,n._Xs=i.Xs,n._Ys=i.Ys,n._Zs=i.Zs,n._len=i.len;var a,l,c,f=0;n.starts&&(a=u(n.starts.x||[]),l=u(n.starts.y||[]),c=u(n.starts.z||[]),f=Math.min(a.length,l.length,c.length)),n._startsX=a||[],n._startsY=l||[],n._startsZ=c||[];var h,p=0,d=1/0;for(h=0;h<n._len;h++){var v=n._u[h],g=n._v[h],y=n._w[h],m=Math.sqrt(v*v+g*g+y*y);p=Math.max(p,m),d=Math.min(d,m)}for(o(r,n,{vals:[d,p],containerStr:"",cLetter:"c"}),h=0;h<f;h++){var x=a[h];i.xMax=Math.max(i.xMax,x),i.xMin=Math.min(i.xMin,x);var b=l[h];i.yMax=Math.max(i.yMax,b),i.yMin=Math.min(i.yMin,b);var _=c[h];i.zMax=Math.max(i.zMax,_),i.zMin=Math.min(i.zMin,_)}n._slen=f,n._normMax=p,n._xbnds=[i.xMin,i.xMax],n._ybnds=[i.yMin,i.yMax],n._zbnds=[i.zMin,i.zMax]},filter:u,processGrid:s}},90154:function(r,n,i){"use strict";var a=i(9330).gl_streamtube3d,o=a.createTubeMesh,s=i(71828),l=i(81697).parseColorScale,u=i(21081).extractOpts,c=i(90060),f={xaxis:0,yaxis:1,zaxis:2};function h(r,n){this.scene=r,this.uid=n,this.mesh=null,this.data=null}var p=h.prototype;function d(r){var n=r.length;return n>2?r.slice(1,n-1):2===n?[(r[0]+r[1])/2]:r}function v(r){var n=r.length;return 1===n?[.5,.5]:[r[1]-r[0],r[n-1]-r[n-2]]}function g(r,n){var i=r.fullSceneLayout,o=r.dataScale,h=n._len,p={};function g(r,n){var a=i[n],l=o[f[n]];return s.simpleMap(r,function(r){return a.d2l(r)*l})}if(p.vectors=c(g(n._u,"xaxis"),g(n._v,"yaxis"),g(n._w,"zaxis"),h),!h)return{positions:[],cells:[]};var y=g(n._Xs,"xaxis"),m=g(n._Ys,"yaxis"),x=g(n._Zs,"zaxis");if(p.meshgrid=[y,m,x],p.gridFill=n._gridFill,n._slen)p.startingPositions=c(g(n._startsX,"xaxis"),g(n._startsY,"yaxis"),g(n._startsZ,"zaxis"));else{for(var b=m[0],_=d(y),w=d(x),T=Array(_.length*w.length),k=0,A=0;A<_.length;A++)for(var M=0;M<w.length;M++)T[k++]=[_[A],b,w[M]];p.startingPositions=T}p.colormap=l(n),p.tubeSize=n.sizeref,p.maxLength=n.maxdisplayed;var S=g(n._xbnds,"xaxis"),E=g(n._ybnds,"yaxis"),L=g(n._zbnds,"zaxis"),C=v(y),O=v(m),P=v(x),I=a(p,[[S[0]-C[0],E[0]-O[0],L[0]-P[0]],[S[1]+C[1],E[1]+O[1],L[1]+P[1]]]),D=u(n);I.vertexIntensityBounds=[D.min/n._normMax,D.max/n._normMax];var z=n.lightposition;return I.lightPosition=[z.x,z.y,z.z],I.ambient=n.lighting.ambient,I.diffuse=n.lighting.diffuse,I.specular=n.lighting.specular,I.roughness=n.lighting.roughness,I.fresnel=n.lighting.fresnel,I.opacity=n.opacity,n._pad=I.tubeScale*n.sizeref*2,I}p.handlePick=function(r){var n=this.scene.fullSceneLayout,i=this.scene.dataScale;function a(r,a){var o=n[a],s=i[f[a]];return o.l2c(r)/s}if(r.object===this.mesh){var o=r.data.position,s=r.data.velocity;return r.traceCoordinate=[a(o[0],"xaxis"),a(o[1],"yaxis"),a(o[2],"zaxis"),a(s[0],"xaxis"),a(s[1],"yaxis"),a(s[2],"zaxis"),r.data.intensity*this.data._normMax,r.data.divergence],r.textLabel=this.data.hovertext||this.data.text,!0}},p.update=function(r){this.data=r;var n=g(this.scene,r);this.mesh.update(n)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=o(r.glplot.gl,g(r,n)),a=new h(r,n.uid);return a.mesh=i,a.data=n,i._trace=a,r.glplot.add(i),a}},22459:function(r,n,i){"use strict";var a=i(71828),o=i(1586),s=i(21850);r.exports=function(r,n,i,l){function u(i,o){return a.coerce(r,n,s,i,o)}var c=u("u"),f=u("v"),h=u("w"),p=u("x"),d=u("y"),v=u("z");c&&c.length&&f&&f.length&&h&&h.length&&p&&p.length&&d&&d.length&&v&&v.length?(u("starts.x"),u("starts.y"),u("starts.z"),u("maxdisplayed"),u("sizeref"),u("lighting.ambient"),u("lighting.diffuse"),u("lighting.specular"),u("lighting.roughness"),u("lighting.fresnel"),u("lightposition.x"),u("lightposition.y"),u("lightposition.z"),o(r,n,l,u,{prefix:"",cLetter:"c"}),u("text"),u("hovertext"),u("hovertemplate"),u("uhoverformat"),u("vhoverformat"),u("whoverformat"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),n._length=null):n.visible=!1}},61510:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"streamtube",basePlotModule:i(58547),categories:["gl3d","showLegend"],attributes:i(21850),supplyDefaults:i(22459),colorbar:{min:"cmin",max:"cmax"},calc:i(88489).calc,plot:i(90154),eventData:function(r,n){return r.tubex=r.x,r.tubey=r.y,r.tubez=r.z,r.tubeu=n.traceCoordinate[3],r.tubev=n.traceCoordinate[4],r.tubew=n.traceCoordinate[5],r.norm=n.traceCoordinate[6],r.divergence=n.traceCoordinate[7],delete r.x,delete r.y,delete r.z,r},meta:{}}},57564:function(r,n,i){"use strict";var a=i(9012),o=i(5386).fF,s=i(5386).si,l=i(50693),u=i(27670).Y,c=i(34e3),f=i(7055),h=i(1426).extendFlat,p=i(79952).u;r.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:h({colors:{valType:"data_array",editType:"calc"},line:{color:h({},c.marker.line.color,{dflt:null}),width:h({},c.marker.line.width,{dflt:1}),editType:"calc"},pattern:p,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:c.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:s({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:c.hovertext,hoverinfo:h({},a.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:o({},{keys:f.eventDataKeys}),textfont:c.textfont,insidetextorientation:c.insidetextorientation,insidetextfont:c.insidetextfont,outsidetextfont:h({},c.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:c.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:u({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(r,n,i){"use strict";var a=i(74875);n.name="sunburst",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},52147:function(r,n,i){"use strict";var a=i(674),o=i(92770),s=i(71828),l=i(21081).makeColorScaleFuncFromTrace,u=i(32354).makePullColorFn,c=i(32354).generateExtendedColors,f=i(21081).calc,h=i(50606).ALMOST_EQUAL,p={},d={},v={};n.calc=function(r,n){var i,c,p,d,v=r._fullLayout,g=n.ids,y=s.isArrayOrTypedArray(g),m=n.labels,x=n.parents,b=n.values,_=s.isArrayOrTypedArray(b),w=[],T={},k={},A=function(r){return r||"number"==typeof r},M=function(r){return!_||o(b[r])&&b[r]>=0};y?(i=Math.min(g.length,x.length),c=function(r){return A(g[r])&&M(r)},p=function(r){return String(g[r])}):(i=Math.min(m.length,x.length),c=function(r){return A(m[r])&&M(r)},p=function(r){return String(m[r])}),_&&(i=Math.min(i,b.length));for(var S=0;S<i;S++)if(c(S)){var E=p(S),L=A(x[S])?String(x[S]):"",C={i:S,id:E,pid:L,label:A(m[S])?String(m[S]):""};_&&(C.v=+b[S]),w.push(C),T[L]?T[L].push(E):T[L]=[E],k[E]=1}if(T[""]){if(T[""].length>1){for(var O=s.randstr(),P=0;P<w.length;P++)""===w[P].pid&&(w[P].pid=O);w.unshift({hasMultipleRoots:!0,id:O,pid:"",label:""})}}else{var I,D=[];for(I in T)k[I]||D.push(I);if(1!==D.length)return s.warn(["Multiple implied roots, cannot build",n.type,"hierarchy of",n.name+".","These roots include:",D.join(", ")].join(" "));I=D[0],w.unshift({hasImpliedRoot:!0,id:I,pid:"",label:I})}try{d=a.stratify().id(function(r){return r.id}).parentId(function(r){return r.pid})(w)}catch(r){return s.warn(["Failed to build",n.type,"hierarchy of",n.name+".","Error:",r.message].join(" "))}var z=a.hierarchy(d),R=!1;if(_)switch(n.branchvalues){case"remainder":z.sum(function(r){return r.data.v});break;case"total":z.each(function(r){var i=r.data.data,a=i.v;if(r.children){var o=r.children.reduce(function(r,n){return r+n.data.data.v},0);if((i.hasImpliedRoot||i.hasMultipleRoots)&&(a=o),a<o*h)return R=!0,s.warn(["Total value for node",r.data.data.id,"of",n.name,"is smaller than the sum of its children.","\nparent value =",a,"\nchildren sum =",o].join(" "))}r.value=a})}else(function r(n,i,a){var o=0,s=n.children;if(s){for(var l=s.length,u=0;u<l;u++)o+=r(s[u],i,a);a.branches&&o++}else a.leaves&&o++;return n.value=n.data.data.value=o,i._values||(i._values=[]),i._values[n.data.data.i]=o,o})(z,n,{branches:-1!==n.count.indexOf("branches"),leaves:-1!==n.count.indexOf("leaves")});if(!R){n.sort&&z.sort(function(r,n){return n.value-r.value});var F,B,N=n.marker.colors||[],j=!!N.length;return n._hasColorscale?(j||(N=_?n.values:n._values),f(r,n,{vals:N,containerStr:"marker",cLetter:"c"}),B=l(n.marker)):F=u(v["_"+n.type+"colormap"]),z.each(function(r){var i=r.data.data;i.color=n._hasColorscale?B(N[i.i]):F(N[i.i],i.id)}),w[0].hierarchy=z,w}},n._runCrossTraceCalc=function(r,n){var i=n._fullLayout,a=n.calcdata,o=i[r+"colorway"],s=i["_"+r+"colormap"];i["extend"+r+"colors"]&&(o=c(o,"icicle"===r?v:"treemap"===r?d:p));var l,u=0;function f(r){var n=r.data.data,i=n.id;!1===n.color&&(s[i]?n.color=s[i]:r.parent?r.parent.parent?n.color=r.parent.data.data.color:(s[i]=n.color=o[u%o.length],u++):n.color=l)}for(var h=0;h<a.length;h++){var g=a[h][0];g.trace.type===r&&g.hierarchy&&(l=g.trace.root.color,g.hierarchy.each(f))}},n.crossTraceCalc=function(r){return n._runCrossTraceCalc("sunburst",r)}},7055:function(r){"use strict";r.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(r,n,i){"use strict";var a=i(71828),o=i(57564),s=i(27670).c,l=i(90769).handleText,u=i(37434).handleMarkerDefaults,c=i(21081),f=c.hasColorscale,h=c.handleDefaults;r.exports=function(r,n,i,c){function p(i,s){return a.coerce(r,n,o,i,s)}var d=p("labels"),v=p("parents");if(d&&d.length&&v&&v.length){var g=p("values");p(g&&g.length?"branchvalues":"count"),p("level"),p("maxdepth"),u(r,n,c,p);var y=n._hasColorscale=f(r,"marker","colors")||(r.marker||{}).coloraxis;y&&h(r,n,c,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",y?1:.7);var m=p("text");p("texttemplate"),n.texttemplate||p("textinfo",a.isArrayOrTypedArray(m)?"text+label":"label"),p("hovertext"),p("hovertemplate"),l(r,n,c,p,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("insidetextorientation"),p("sort"),p("rotation"),p("root.color"),s(n,c,p),n._length=null}else n.visible=!1}},43467:function(r,n,i){"use strict";var a=i(91424),o=i(7901);r.exports=function(r,n,i,s,l){var u=n.data.data,c=u.i,f=l||u.color;if(c>=0){n.i=u.i;var h=i.marker;h.pattern&&h.colors&&h.pattern.shape||(h.color=f,n.color=f),a.pointStyle(r,i,s,n)}else o.fill(r,f)}},83523:function(r,n,i){"use strict";var a=i(39898),o=i(73972),s=i(23469).appendArrayPointValue,l=i(30211),u=i(71828),c=i(11086),f=i(2791),h=i(53581).formatPieValue;function p(r,n,i){for(var a=r.data.data,o={curveNumber:n.index,pointNumber:a.i,data:n._input,fullData:n},l=0;l<i.length;l++){var u=i[l];u in r&&(o[u]=r[u])}return"parentString"in r&&!f.isHierarchyRoot(r)&&(o.parent=r.parentString),s(o,n,a.i),o}r.exports=function(r,n,i,s,d){var v=s[0],g=v.trace,y=v.hierarchy,m="sunburst"===g.type,x="treemap"===g.type||"icicle"===g.type;"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1),r.on("mouseover",function(o){var s=i._fullLayout;if(!i._dragging&&!1!==s.hovermode){var c,b=i._fullData[g.index],_=o.data.data,w=_.i,T=f.isHierarchyRoot(o),k=f.getParent(y,o),A=f.getValue(o),M=function(r){return u.castOption(b,w,r)},S=M("hovertemplate"),E=l.castHoverinfo(b,s,w),L=s.separators;if(S||E&&"none"!==E&&"skip"!==E){m&&(C=v.cx+o.pxmid[0]*(1-o.rInscribed),O=v.cy+o.pxmid[1]*(1-o.rInscribed)),x&&(C=o._hoverX,O=o._hoverY);var C,O,P,I={},D=[],z=[],R=function(r){return -1!==D.indexOf(r)};E&&(D="all"===E?b._module.attributes.hoverinfo.flags:E.split("+")),I.label=_.label,R("label")&&I.label&&z.push(I.label),_.hasOwnProperty("v")&&(I.value=_.v,I.valueLabel=h(I.value,L),R("value")&&z.push(I.valueLabel)),I.currentPath=o.currentPath=f.getPath(o.data),R("current path")&&!T&&z.push(I.currentPath);var F=[],B=function(){-1===F.indexOf(P)&&(z.push(P),F.push(P))};I.percentParent=o.percentParent=A/f.getValue(k),I.parent=o.parentString=f.getPtLabel(k),R("percent parent")&&(P=f.formatPercent(I.percentParent,L)+" of "+I.parent,B()),I.percentEntry=o.percentEntry=A/f.getValue(n),I.entry=o.entry=f.getPtLabel(n),!R("percent entry")||T||o.onPathbar||(P=f.formatPercent(I.percentEntry,L)+" of "+I.entry,B()),I.percentRoot=o.percentRoot=A/f.getValue(y),I.root=o.root=f.getPtLabel(y),R("percent root")&&!T&&(P=f.formatPercent(I.percentRoot,L)+" of "+I.root,B()),I.text=M("hovertext")||M("text"),R("text")&&(P=I.text,u.isValidTextValue(P)&&z.push(P)),c=[p(o,b,d.eventDataKeys)];var N={trace:b,y:O,_x0:o._x0,_x1:o._x1,_y0:o._y0,_y1:o._y1,text:z.join("<br>"),name:S||R("name")?b.name:void 0,color:M("hoverlabel.bgcolor")||_.color,borderColor:M("hoverlabel.bordercolor"),fontFamily:M("hoverlabel.font.family"),fontSize:M("hoverlabel.font.size"),fontColor:M("hoverlabel.font.color"),nameLength:M("hoverlabel.namelength"),textAlign:M("hoverlabel.align"),hovertemplate:S,hovertemplateLabels:I,eventData:c};m&&(N.x0=C-o.rInscribed*o.rpx1,N.x1=C+o.rInscribed*o.rpx1,N.idealAlign=o.pxmid[0]<0?"left":"right"),x&&(N.x=C,N.idealAlign=C<0?"left":"right");var j=[];l.loneHover(N,{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:i,inOut_bbox:j}),c[0].bbox=j[0],g._hasHoverLabel=!0}if(x){var U=r.select("path.surface");d.styleOne(U,o,b,i,{hovered:!0})}g._hasHoverEvent=!0,i.emit("plotly_hover",{points:c||[p(o,b,d.eventDataKeys)],event:a.event})}}),r.on("mouseout",function(n){var o=i._fullLayout,s=i._fullData[g.index],u=a.select(this).datum();if(g._hasHoverEvent&&(n.originalEvent=a.event,i.emit("plotly_unhover",{points:[p(u,s,d.eventDataKeys)],event:a.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(l.loneUnhover(o._hoverlayer.node()),g._hasHoverLabel=!1),x){var c=r.select("path.surface");d.styleOne(c,u,s,i,{hovered:!1})}}),r.on("click",function(r){var n=i._fullLayout,s=i._fullData[g.index],u=m&&(f.isHierarchyRoot(r)||f.isLeaf(r)),h=f.getPtId(r),v=f.isEntry(r)?f.findEntryWithChild(y,h):f.findEntryWithLevel(y,h),x=f.getPtId(v),b={points:[p(r,s,d.eventDataKeys)],event:a.event};u||(b.nextLevel=x);var _=c.triggerHandler(i,"plotly_"+g.type+"click",b);if(!1!==_&&n.hovermode&&(i._hoverdata=[p(r,s,d.eventDataKeys)],l.click(i,a.event)),!u&&!1!==_&&!i._dragging&&!i._transitioning){o.call("_storeDirectGUIEdit",s,n._tracePreGUI[s.uid],{level:s.level});var w={data:[{level:x}],traces:[g.index]},T={frame:{redraw:!1,duration:d.transitionTime},transition:{duration:d.transitionTime,easing:d.transitionEasing},mode:"immediate",fromcurrent:!0};l.loneUnhover(n._hoverlayer.node()),o.call("animate",i,w,T)}})}},2791:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(6964),l=i(53581);function u(r){return r.data.data.pid}n.findEntryWithLevel=function(r,i){var a;return i&&r.eachAfter(function(r){if(n.getPtId(r)===i)return a=r.copy()}),a||r},n.findEntryWithChild=function(r,i){var a;return r.eachAfter(function(r){for(var o=r.children||[],s=0;s<o.length;s++){var l=o[s];if(n.getPtId(l)===i)return a=r.copy()}}),a||r},n.isEntry=function(r){return!r.parent},n.isLeaf=function(r){return!r.children},n.getPtId=function(r){return r.data.data.id},n.getPtLabel=function(r){return r.data.data.label},n.getValue=function(r){return r.value},n.isHierarchyRoot=function(r){return""===u(r)},n.setSliceCursor=function(r,i,a){var o=a.isTransitioning;if(!o){var l=r.datum();o=a.hideOnRoot&&n.isHierarchyRoot(l)||a.hideOnLeaves&&n.isLeaf(l)}s(r,o?null:"pointer")},n.getInsideTextFontKey=function(r,n,i,o,s){var l=(s||{}).onPathbar?"pathbar.textfont":"insidetextfont",u=i.data.data.i;return a.castOption(n,u,l+"."+r)||a.castOption(n,u,"textfont."+r)||o.size},n.getOutsideTextFontKey=function(r,n,i,o){var s=i.data.data.i;return a.castOption(n,s,"outsidetextfont."+r)||a.castOption(n,s,"textfont."+r)||o.size},n.isOutsideText=function(r,i){return!r._hasColorscale&&n.isHierarchyRoot(i)},n.determineTextFont=function(r,i,s,l){var u,c,f,h;return n.isOutsideText(r,i)?{color:n.getOutsideTextFontKey("color",r,i,s),family:n.getOutsideTextFontKey("family",r,i,s),size:n.getOutsideTextFontKey("size",r,i,s)}:(u=(l||{}).onPathbar,f=(c=i.data.data).i,(h=a.castOption(r,f,(u?"pathbar.textfont":"insidetextfont")+".color"))||!r._input.textfont||(h=a.castOption(r._input,f,"textfont.color")),{color:h||o.contrast(c.color),family:n.getInsideTextFontKey("family",r,i,s,l),size:n.getInsideTextFontKey("size",r,i,s,l)})},n.hasTransition=function(r){return!!(r&&r.duration>0)},n.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},n.isHeader=function(r,i){return!(n.isLeaf(r)||r.depth===i._maxDepth-1)},n.getParent=function(r,i){return n.findEntryWithLevel(r,u(i))},n.listPath=function(r,i){var a=r.parent;if(!a)return[];var o=i?[a.data[i]]:[a];return n.listPath(a,i).concat(o)},n.getPath=function(r){return n.listPath(r,"label").join("/")+"/"},n.formatValue=l.formatPieValue,n.formatPercent=function(r,n){var i=a.formatPercent(r,0);return"0%"===i&&(i=l.formatPiePercent(r,n)),i}},87619:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"sunburst",basePlotModule:i(66888),categories:[],animatable:!0,attributes:i(57564),layoutAttributes:i(2654),supplyDefaults:i(17094),supplyLayoutDefaults:i(57034),calc:i(52147).calc,crossTraceCalc:i(52147).crossTraceCalc,plot:i(24714).plot,style:i(29969).style,colorbar:i(4898),meta:{}}},2654:function(r){"use strict";r.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(r,n,i){"use strict";var a=i(71828),o=i(2654);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("sunburstcolorway",n.colorway),i("extendsunburstcolors")}},24714:function(r,n,i){"use strict";var a=i(39898),o=i(674),s=i(81684).sX,l=i(91424),u=i(71828),c=i(63893),f=i(72597),h=f.recordMinTextSize,p=f.clearMinTextSize,d=i(14575),v=i(53581).getRotationAngle,g=d.computeTransform,y=d.transformInsideText,m=i(29969).styleOne,x=i(16688).resizeText,b=i(83523),_=i(7055),w=i(2791);function T(r,i,f,p){var d=r._context.staticPlot,x=r._fullLayout,T=!x.uniformtext.mode&&w.hasTransition(p),A=a.select(f).selectAll("g.slice"),M=i[0],S=M.trace,E=M.hierarchy,L=w.findEntryWithLevel(E,S.level),C=w.getMaxDepth(S),O=x._size,P=S.domain,I=O.w*(P.x[1]-P.x[0]),D=O.h*(P.y[1]-P.y[0]),z=.5*Math.min(I,D),R=M.cx=O.l+O.w*(P.x[1]+P.x[0])/2,F=M.cy=O.t+O.h*(1-P.y[0])-D/2;if(!L)return A.remove();var B=null,N={};T&&A.each(function(r){N[w.getPtId(r)]={rpx0:r.rpx0,rpx1:r.rpx1,x0:r.x0,x1:r.x1,transform:r.transform},!B&&w.isEntry(r)&&(B=r)});var j=o.partition().size([2*Math.PI,L.height+1])(L).descendants(),U=L.height+1,V=0,H=C;M.hasMultipleRoots&&w.isHierarchyRoot(L)&&(j=j.slice(1),U-=1,V=1,H+=1),j=j.filter(function(r){return r.y1<=H});var q=v(S.rotation);q&&j.forEach(function(r){r.x0+=q,r.x1+=q});var G=Math.min(U,C),Z=function(r){return(r-V)/G*z},Y=function(r,n){return[r*Math.cos(n),-r*Math.sin(n)]},W=function(r){return u.pathAnnulus(r.rpx0,r.rpx1,r.x0,r.x1,R,F)},X=function(r){return R+k(r)[0]*(r.transform.rCenter||0)+(r.transform.x||0)},J=function(r){return F+k(r)[1]*(r.transform.rCenter||0)+(r.transform.y||0)};(A=A.data(j,w.getPtId)).enter().append("g").classed("slice",!0),T?A.exit().transition().each(function(){var r=a.select(this);r.select("path.surface").transition().attrTween("d",function(r){var n=function(r){var n,i=w.getPtId(r),a=N[i],o=N[w.getPtId(L)];if(o){var l=(r.x1>o.x1?2*Math.PI:0)+q;n=r.rpx1<o.rpx1?{x0:r.x0,x1:r.x1,rpx0:0,rpx1:0}:{x0:l,x1:l,rpx0:r.rpx0,rpx1:r.rpx1}}else{var u,c=w.getPtId(r.parent);A.each(function(r){if(w.getPtId(r)===c)return u=r});var f,h=u.children;h.forEach(function(r,n){if(w.getPtId(r)===i)return f=n});var p=h.length,d=s(u.x0,u.x1);n={rpx0:z,rpx1:z,x0:d(f/p),x1:d((f+1)/p)}}return s(a,n)}(r);return function(r){return W(n(r))}}),r.select("g.slicetext").attr("opacity",0)}).remove():A.exit().remove(),A.order();var K=null;if(T&&B){var $=w.getPtId(B);A.each(function(r){null===K&&w.getPtId(r)===$&&(K=r.x1)})}var Q=A;function tt(r){var n=r.parent,i=N[w.getPtId(n)],a={};if(i){var o=n.children,l=o.indexOf(r),u=o.length,c=s(i.x0,i.x1);a.x0=c(l/u),a.x1=c(l/u)}else a.x0=a.x1=0;return a}T&&(Q=Q.transition().each("end",function(){var n=a.select(this);w.setSliceCursor(n,r,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Q.each(function(o){var f=a.select(this),p=u.ensureSingle(f,"path","surface",function(r){r.style("pointer-events",d?"none":"all")});o.rpx0=Z(o.y0),o.rpx1=Z(o.y1),o.xmid=(o.x0+o.x1)/2,o.pxmid=Y(o.rpx1,o.xmid),o.midangle=-(o.xmid-Math.PI/2),o.startangle=-(o.x0-Math.PI/2),o.stopangle=-(o.x1-Math.PI/2),o.halfangle=.5*Math.min(u.angleDelta(o.x0,o.x1)||Math.PI,Math.PI),o.ring=1-o.rpx0/o.rpx1,o.rInscribed=0===o.rpx0&&u.isFullCircle([o.x0,o.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(o.halfangle)),o.ring/2)),T?p.transition().attrTween("d",function(r){var n=function(r){var n,i=N[w.getPtId(r)],a={x0:r.x0,x1:r.x1,rpx0:r.rpx0,rpx1:r.rpx1};if(i)n=i;else if(B){if(r.parent){if(K){var o=(r.x1>K?2*Math.PI:0)+q;n={x0:o,x1:o}}else n={rpx0:z,rpx1:z},u.extendFlat(n,tt(r))}else n={rpx0:0,rpx1:0}}else n={x0:q,x1:q};return s(n,a)}(r);return function(r){return W(n(r))}}):p.attr("d",W),f.call(b,L,r,i,{eventDataKeys:_.eventDataKeys,transitionTime:_.CLICK_TRANSITION_TIME,transitionEasing:_.CLICK_TRANSITION_EASING}).call(w.setSliceCursor,r,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:r._transitioning}),p.call(m,o,S,r);var v=u.ensureSingle(f,"g","slicetext"),k=u.ensureSingle(v,"text","",function(r){r.attr("data-notex",1)}),A=u.ensureUniformFontSize(r,w.determineTextFont(S,o,x.font));k.text(n.formatSliceLabel(o,L,S,i,x)).classed("slicetext",!0).attr("text-anchor","middle").call(l.font,A).call(c.convertToTspans,r);var E=l.bBox(k.node());o.transform=y(E,o,M),o.transform.targetX=X(o),o.transform.targetY=J(o);var C=function(r,n){var i=r.transform;return g(i,n),i.fontSize=A.size,h(S.type,i,x),u.getTextTransform(i)};T?k.transition().attrTween("transform",function(r){var n=function(r){var n,i=N[w.getPtId(r)],a=r.transform;if(i)n=i;else if(n={rpx1:r.rpx1,transform:{textPosAngle:a.textPosAngle,scale:0,rotate:a.rotate,rCenter:a.rCenter,x:a.x,y:a.y}},B){if(r.parent){if(K){var o=r.x1>K?2*Math.PI:0;n.x0=n.x1=o}else u.extendFlat(n,tt(r))}else n.x0=n.x1=q}else n.x0=n.x1=q;var l=s(n.transform.textPosAngle,r.transform.textPosAngle),c=s(n.rpx1,r.rpx1),f=s(n.x0,r.x0),p=s(n.x1,r.x1),d=s(n.transform.scale,a.scale),v=s(n.transform.rotate,a.rotate),g=0===a.rCenter?3:0===n.transform.rCenter?1/3:1,y=s(n.transform.rCenter,a.rCenter);return function(r){var n=c(r),i=f(r),o=p(r),s=y(Math.pow(r,g)),u={pxmid:Y(n,(i+o)/2),rpx1:n,transform:{textPosAngle:l(r),rCenter:s,x:a.x,y:a.y}};return h(S.type,a,x),{transform:{targetX:X(u),targetY:J(u),scale:d(r),rotate:v(r),rCenter:s}}}}(r);return function(r){return C(n(r),E)}}):k.attr("transform",C(o,E))})}function k(r){var n,i;return[(n=r.rpx1)*Math.sin(i=r.transform.textPosAngle),-n*Math.cos(i)]}n.plot=function(r,n,i,o){var s,l,u=r._fullLayout,c=u._sunburstlayer,f=!i,h=!u.uniformtext.mode&&w.hasTransition(i);p("sunburst",u),(s=c.selectAll("g.trace.sunburst").data(n,function(r){return r[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),s.order(),h?(o&&(l=o()),a.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){c.selectAll("g.trace").each(function(n){T(r,n,this,i)})})):(s.each(function(n){T(r,n,this,i)}),u.uniformtext.mode&&x(r,u._sunburstlayer.selectAll(".trace"),"sunburst")),f&&s.exit().remove()},n.formatSliceLabel=function(r,n,i,a,o){var s=i.texttemplate,l=i.textinfo;if(!(s||l&&"none"!==l))return"";var c=o.separators,f=a[0],h=r.data.data,p=f.hierarchy,d=w.isHierarchyRoot(r),v=w.getParent(p,r),g=w.getValue(r);if(!s){var y,m=l.split("+"),x=function(r){return -1!==m.indexOf(r)},b=[];if(x("label")&&h.label&&b.push(h.label),h.hasOwnProperty("v")&&x("value")&&b.push(w.formatValue(h.v,c)),!d){x("current path")&&b.push(w.getPath(r.data));var _=0;x("percent parent")&&_++,x("percent entry")&&_++,x("percent root")&&_++;var T=_>1;if(_){var k,A=function(r){y=w.formatPercent(k,c),T&&(y+=" of "+r),b.push(y)};x("percent parent")&&!d&&(k=g/w.getValue(v),A("parent")),x("percent entry")&&(k=g/w.getValue(n),A("entry")),x("percent root")&&(k=g/w.getValue(p),A("root"))}}return x("text")&&(y=u.castOption(i,h.i,"text"),u.isValidTextValue(y)&&b.push(y)),b.join("<br>")}var M=u.castOption(i,h.i,"texttemplate");if(!M)return"";var S={};h.label&&(S.label=h.label),h.hasOwnProperty("v")&&(S.value=h.v,S.valueLabel=w.formatValue(h.v,c)),S.currentPath=w.getPath(r.data),d||(S.percentParent=g/w.getValue(v),S.percentParentLabel=w.formatPercent(S.percentParent,c),S.parent=w.getPtLabel(v)),S.percentEntry=g/w.getValue(n),S.percentEntryLabel=w.formatPercent(S.percentEntry,c),S.entry=w.getPtLabel(n),S.percentRoot=g/w.getValue(p),S.percentRootLabel=w.formatPercent(S.percentRoot,c),S.root=w.getPtLabel(p),h.hasOwnProperty("color")&&(S.color=h.color);var E=u.castOption(i,h.i,"text");return(u.isValidTextValue(E)||""===E)&&(S.text=E),S.customdata=u.castOption(i,h.i,"customdata"),u.texttemplateString(M,S,o._d3locale,S,i._meta||{})}},29969:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(71828),l=i(72597).resizeText,u=i(43467);function c(r,n,i,a){var l=n.data.data,c=!n.children,f=l.i,h=s.castOption(i,f,"marker.line.color")||o.defaultLine,p=s.castOption(i,f,"marker.line.width")||0;r.call(u,n,i,a).style("stroke-width",p).call(o.stroke,h).style("opacity",c?i.leaf.opacity:null)}r.exports={style:function(r){var n=r._fullLayout._sunburstlayer.selectAll(".trace");l(r,n,"sunburst"),n.each(function(n){var i=a.select(this),o=n[0].trace;i.style("opacity",o.opacity),i.selectAll("path.surface").each(function(n){a.select(this).call(c,n,o,r)})})},styleOne:c}},54532:function(r,n,i){"use strict";var a=i(7901),o=i(50693),s=i(12663).axisHoverFormat,l=i(5386).fF,u=i(9012),c=i(1426).extendFlat,f=i(30962).overrideAll;function h(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:a.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:a.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var p=r.exports=f(c({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},o("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:h(),y:h(),z:h()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:c({},o.zauto,{}),zmin:c({},o.zmin,{}),zmax:c({},o.zmax,{})},hoverinfo:c({},u.hoverinfo),showlegend:c({},u.showlegend,{dflt:!1})}),"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes",p.transforms=void 0},18396:function(r,n,i){"use strict";var a=i(78803);r.exports=function(r,n){n.surfacecolor?a(r,n,{vals:n.surfacecolor,containerStr:"",cLetter:"c"}):a(r,n,{vals:n.z,containerStr:"",cLetter:"c"})}},43768:function(r,n,i){"use strict";var a=i(9330).gl_surface3d,o=i(9330).ndarray,s=i(9330).ndarray_linear_interpolate.d2,l=i(824),u=i(43907),c=i(71828).isArrayOrTypedArray,f=i(81697).parseColorScale,h=i(78614),p=i(21081).extractOpts;function d(r,n,i){this.scene=r,this.uid=i,this.surface=n,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var v=d.prototype;v.getXat=function(r,n,i,a){var o=c(this.data.x)?c(this.data.x[0])?this.data.x[n][r]:this.data.x[r]:r;return void 0===i?o:a.d2l(o,0,i)},v.getYat=function(r,n,i,a){var o=c(this.data.y)?c(this.data.y[0])?this.data.y[n][r]:this.data.y[n]:n;return void 0===i?o:a.d2l(o,0,i)},v.getZat=function(r,n,i,a){var o=this.data.z[n][r];return null===o&&this.data.connectgaps&&this.data._interpolatedZ&&(o=this.data._interpolatedZ[n][r]),void 0===i?o:a.d2l(o,0,i)},v.handlePick=function(r){if(r.object===this.surface){var n=(r.data.index[0]-1)/this.dataScaleX-1,i=(r.data.index[1]-1)/this.dataScaleY-1,a=Math.max(Math.min(Math.round(n),this.data.z[0].length-1),0),o=Math.max(Math.min(Math.round(i),this.data._ylength-1),0);r.index=[a,o],r.traceCoordinate=[this.getXat(a,o),this.getYat(a,o),this.getZat(a,o)],r.dataCoordinate=[this.getXat(a,o,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(a,o,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(a,o,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var s=0;s<3;s++)null!=r.dataCoordinate[s]&&(r.dataCoordinate[s]*=this.scene.dataScale[s]);var l=this.data.hovertext||this.data.text;return c(l)&&l[o]&&void 0!==l[o][a]?r.textLabel=l[o][a]:r.textLabel=l||"",r.data.dataCoordinate=r.dataCoordinate.slice(),this.surface.highlight(r.data),this.scene.glplot.spikes.position=r.dataCoordinate,!0}};var g=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function y(r){for(var n=[],i=0;i<g.length;i++){var a=g[i];n.push(function(r,n){if(r<n)return 0;for(var i=0;0===Math.floor(r%n);)r/=n,i++;return i}(r,a))}return n}function m(r,n,i){var a=i[8]+i[2]*n[0]+i[5]*n[1];return r[0]=(i[6]+i[0]*n[0]+i[3]*n[1])/a,r[1]=(i[7]+i[1]*n[0]+i[4]*n[1])/a,r}v.calcXnums=function(r){var n,i=[];for(n=1;n<r;n++){var a=this.getXat(n-1,0),o=this.getXat(n,0);i[n-1]=o!==a&&null!=a&&null!=o?Math.abs(o-a):0}var s=0;for(n=1;n<r;n++)s+=i[n-1];for(n=1;n<r;n++)0===i[n-1]?i[n-1]=1:i[n-1]=Math.round(s/i[n-1]);return i},v.calcYnums=function(r){var n,i=[];for(n=1;n<r;n++){var a=this.getYat(0,n-1),o=this.getYat(0,n);i[n-1]=o!==a&&null!=a&&null!=o?Math.abs(o-a):0}var s=0;for(n=1;n<r;n++)s+=i[n-1];for(n=1;n<r;n++)0===i[n-1]?i[n-1]=1:i[n-1]=Math.round(s/i[n-1]);return i},v.estimateScale=function(r,n){for(var i=1+function(r){if(0!==r.length){for(var n=1,i=0;i<r.length;i++)n=function(r,n){if(!(r<1||n<1)){for(var i=y(r),a=y(n),o=1,s=0;s<g.length;s++)o*=Math.pow(g[s],Math.max(i[s],a[s]));return o}}(n,r[i]);return n}}(0===n?this.calcXnums(r):this.calcYnums(r));i<120;)i*=2;for(;i>720;)i--,i/=function(r){for(var n=y(r),i=r,a=0;a<g.length;a++)if(n[a]>0){i=g[a];break}return i}(i),++i<120&&(i=720);var a=Math.round(i/r);return a>1?a:1},v.refineCoords=function(r){for(var n=this.dataScaleX,i=this.dataScaleY,a=r[0].shape[0],l=r[0].shape[1],u=0|Math.floor(r[0].shape[0]*n+1),c=0|Math.floor(r[0].shape[1]*i+1),f=1+a+1,h=1+l+1,p=o(new Float32Array(f*h),[f,h]),d=[1/n,0,0,0,1/i,0,0,0,1],v=0;v<r.length;++v){this.surface.padField(p,r[v]);var g=o(new Float32Array(u*c),[u,c]);(function(r,n,i,a){for(var o=[0,0],l=r.shape[0],u=r.shape[1],c=0;c<l;c++)for(var f=0;f<u;f++)i(o,[c,f],a),r.set(c,f,s(n,o[0],o[1]))})(g,p,m,d),r[v]=g}},v.setContourLevels=function(){var r,n,i,a=[[],[],[]],o=[!1,!1,!1],s=!1;for(r=0;r<3;++r)if(this.showContour[r]&&(s=!0,this.contourSize[r]>0&&null!==this.contourStart[r]&&null!==this.contourEnd[r]&&this.contourEnd[r]>this.contourStart[r]))for(o[r]=!0,n=this.contourStart[r];n<this.contourEnd[r];n+=this.contourSize[r])i=n*this.scene.dataScale[r],function(r,n){for(var i=!1,a=0;a<r.length;a++)if(n===r[a]){i=!0;break}!1===i&&r.push(n)}(a[r],i);if(s){var l=[[],[],[]];for(r=0;r<3;++r)this.showContour[r]&&(l[r]=o[r]?a[r]:this.scene.contourLevels[r]);this.surface.update({levels:l})}},v.update=function(r){var n,i,a,s,c,d,v=this.scene,g=v.fullSceneLayout,y=this.surface,m=f(r),x=v.dataScale,b=r.z[0].length,_=r._ylength,w=v.contourLevels;this.data=r;var T=[];for(a=0;a<3;a++)for(T[a]=[],s=0;s<b;s++)T[a][s]=[];for(s=0;s<b;s++)for(c=0;c<_;c++)T[0][s][c]=this.getXat(s,c,r.xcalendar,g.xaxis),T[1][s][c]=this.getYat(s,c,r.ycalendar,g.yaxis),T[2][s][c]=this.getZat(s,c,r.zcalendar,g.zaxis);if(r.connectgaps)for(r._emptypoints=u(T[2]),l(T[2],r._emptypoints),r._interpolatedZ=[],s=0;s<b;s++)for(r._interpolatedZ[s]=[],c=0;c<_;c++)r._interpolatedZ[s][c]=T[2][s][c];for(a=0;a<3;a++)for(s=0;s<b;s++)for(c=0;c<_;c++)null==(d=T[a][s][c])?T[a][s][c]=NaN:d=T[a][s][c]*=x[a];for(a=0;a<3;a++)for(s=0;s<b;s++)for(c=0;c<_;c++)null!=(d=T[a][s][c])&&(this.minValues[a]>d&&(this.minValues[a]=d),this.maxValues[a]<d&&(this.maxValues[a]=d));for(a=0;a<3;a++)this.objectOffset[a]=.5*(this.minValues[a]+this.maxValues[a]);for(a=0;a<3;a++)for(s=0;s<b;s++)for(c=0;c<_;c++)null!=(d=T[a][s][c])&&(T[a][s][c]-=this.objectOffset[a]);var k=[o(new Float32Array(b*_),[b,_]),o(new Float32Array(b*_),[b,_]),o(new Float32Array(b*_),[b,_])];for(a=0;a<3;a++)for(s=0;s<b;s++)for(c=0;c<_;c++)k[a].set(s,c,T[a][s][c]);T=[];var A={colormap:m,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!r.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:r.opacityscale,opacity:r.opacity},M=p(r);if(A.intensityBounds=[M.min,M.max],r.surfacecolor){var S=o(new Float32Array(b*_),[b,_]);for(s=0;s<b;s++)for(c=0;c<_;c++)S.set(s,c,r.surfacecolor[c][s]);k.push(S)}else A.intensityBounds[0]*=x[2],A.intensityBounds[1]*=x[2];(720<k[0].shape[0]||720<k[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(k[0].shape[0],0),this.dataScaleY=this.estimateScale(k[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(k)),r.surfacecolor&&(A.intensity=k.pop());var E=[!0,!0,!0],L=["x","y","z"];for(a=0;a<3;++a){var C=r.contours[L[a]];E[a]=C.highlight,A.showContour[a]=C.show||C.highlight,A.showContour[a]&&(A.contourProject[a]=[C.project.x,C.project.y,C.project.z],C.show?(this.showContour[a]=!0,A.levels[a]=w[a],y.highlightColor[a]=A.contourColor[a]=h(C.color),C.usecolormap?y.highlightTint[a]=A.contourTint[a]=0:y.highlightTint[a]=A.contourTint[a]=1,A.contourWidth[a]=C.width,this.contourStart[a]=C.start,this.contourEnd[a]=C.end,this.contourSize[a]=C.size):(this.showContour[a]=!1,this.contourStart[a]=null,this.contourEnd[a]=null,this.contourSize[a]=0),C.highlight&&(A.dynamicColor[a]=h(C.highlightcolor),A.dynamicWidth[a]=C.highlightwidth))}n=m[0].rgb,i=m[m.length-1].rgb,n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&n[3]===i[3]&&(A.vertexColor=!0),A.objectOffset=this.objectOffset,A.coords=k,y.update(A),y.visible=r.visible,y.enableDynamic=E,y.enableHighlight=E,y.snapToData=!0,"lighting"in r&&(y.ambientLight=r.lighting.ambient,y.diffuseLight=r.lighting.diffuse,y.specularLight=r.lighting.specular,y.roughness=r.lighting.roughness,y.fresnel=r.lighting.fresnel),"lightposition"in r&&(y.lightPosition=[r.lightposition.x,r.lightposition.y,r.lightposition.z])},v.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},r.exports=function(r,n){var i=a({gl:r.glplot.gl}),o=new d(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}},91831:function(r,n,i){"use strict";var a=i(73972),o=i(71828),s=i(1586),l=i(54532);function u(r,n,i,a){var o=a("opacityscale");"max"===o?n.opacityscale=[[0,.1],[1,1]]:"min"===o?n.opacityscale=[[0,1],[1,.1]]:"extremes"===o?n.opacityscale=function(r,n){for(var i=[],a=0;a<32;a++){var o=a/31,s=.1+.9*(1-Math.pow(Math.sin(1*o*Math.PI),2));i.push([o,Math.max(0,Math.min(1,s))])}return i}():function(r){var n=0;if(!Array.isArray(r)||r.length<2||!r[0]||!r[r.length-1]||0!=+r[0][0]||1!=+r[r.length-1][0])return!1;for(var i=0;i<r.length;i++){var a=r[i];if(2!==a.length||+a[0]<n)return!1;n=+a[0]}return!0}(o)||(n.opacityscale=void 0)}function c(r,n,i){n in r&&!(i in r)&&(r[i]=r[n])}r.exports={supplyDefaults:function(r,n,i,f){function h(i,a){return o.coerce(r,n,l,i,a)}var p,d,v=h("x"),g=h("y"),y=h("z");if(!y||!y.length||v&&v.length<1||g&&g.length<1)n.visible=!1;else{n._xlength=Array.isArray(v)&&o.isArrayOrTypedArray(v[0])?y.length:y[0].length,n._ylength=y.length,a.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],f),h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(r){h(r)});var m=h("surfacecolor"),x=["x","y","z"];for(p=0;p<3;++p){var b="contours."+x[p],_=h(b+".show"),w=h(b+".highlight");if(_||w)for(d=0;d<3;++d)h(b+".project."+x[d]);_&&(h(b+".color"),h(b+".width"),h(b+".usecolormap")),w&&(h(b+".highlightcolor"),h(b+".highlightwidth")),h(b+".start"),h(b+".end"),h(b+".size")}m||(c(r,"zmin","cmin"),c(r,"zmax","cmax"),c(r,"zauto","cauto")),s(r,n,f,h,{prefix:"",cLetter:"c"}),u(0,n,0,h),n._length=null}},opacityscaleDefaults:u}},93601:function(r,n,i){"use strict";r.exports={attributes:i(54532),supplyDefaults:i(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:i(18396),plot:i(43768),moduleType:"trace",name:"surface",basePlotModule:i(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(r,n,i){"use strict";var a=i(50215),o=i(1426).extendFlat,s=i(30962).overrideAll,l=i(41940),u=i(27670).Y,c=i(12663).descriptionOnlyNumbers;(r.exports=s({domain:u({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:c("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:o({},a.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},l({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:c("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:o({},a.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},l({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(r,n,i){"use strict";var a=i(27659).a0,o=i(36736),s="table";n.name=s,n.plot=function(r){var n=a(r.calcdata,s)[0];n.length&&o(r,n)},n.clean=function(r,n,i,a){var o=a._has&&a._has(s),l=n._has&&n._has(s);o&&!l&&a._paperdiv.selectAll(".table").remove()}},76333:function(r,n,i){"use strict";var a=i(28984).wrap;r.exports=function(){return a({})}},49850:function(r){"use strict";r.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(r,n,i){"use strict";var a=i(49850),o=i(1426).extendFlat,s=i(92770),l=i(73627).isTypedArray,u=i(73627).isArrayOrTypedArray;function c(r){if(u(r)){for(var n=0,i=0;i<r.length;i++)n=Math.max(n,c(r[i]));return n}return r}function f(r,n){return r+n}function h(r){var n,i=r.slice(),a=1/0,o=0;for(n=0;n<i.length;n++)l(i[n])?i[n]=Array.from(i[n]):u(i[n])||(i[n]=[i[n]]),a=Math.min(a,i[n].length),o=Math.max(o,i[n].length);if(a!==o)for(n=0;n<i.length;n++){var s=o-i[n].length;s&&(i[n]=i[n].concat(p(s)))}return i}function p(r){for(var n=Array(r),i=0;i<r;i++)n[i]="";return n}function d(r){return r.calcdata.columns.reduce(function(n,i){return i.xIndex<r.xIndex?n+i.columnWidth:n},0)}function v(r,n){return Object.keys(r).map(function(i){return o({},r[i],{auxiliaryBlocks:n})})}function g(r,n){for(var i,a={},o=0,s=0,l={firstRowIndex:null,lastRowIndex:null,rows:[]},u=0,c=0,f=0;f<r.length;f++)i=r[f],l.rows.push({rowIndex:f,rowHeight:i}),((s+=i)>=n||f===r.length-1)&&(a[o]=l,l.key=c++,l.firstRowIndex=u,l.lastRowIndex=f,l={firstRowIndex:null,lastRowIndex:null,rows:[]},o+=s,u=f+1,s=0);return a}r.exports=function(r,n){var i=h(n.cells.values),l=function(r){return r.slice(n.header.values.length,r.length)},y=h(n.header.values);y.length&&!y[0].length&&(y[0]=[""],y=h(y));var m=y.concat(l(i).map(function(){return p((y[0]||[""]).length)})),x=n.domain,b=Math.floor(r._fullLayout._size.w*(x.x[1]-x.x[0])),_=Math.floor(r._fullLayout._size.h*(x.y[1]-x.y[0])),w=n.header.values.length?m[0].map(function(){return n.header.height}):[a.emptyHeaderHeight],T=i.length?i[0].map(function(){return n.cells.height}):[],k=w.reduce(f,0),A=g(T,_-k+a.uplift),M=v(g(w,k),[]),S=v(A,M),E={},L=n._fullInput.columnorder;u(L)&&(L=Array.from(L)),L=L.concat(l(i.map(function(r,n){return n})));var C=m.map(function(r,i){var a=u(n.columnwidth)?n.columnwidth[Math.min(i,n.columnwidth.length-1)]:n.columnwidth;return s(a)?Number(a):1}),O=C.reduce(f,0);C=C.map(function(r){return r/O*b});var P=Math.max(c(n.header.line.width),c(n.cells.line.width)),I={key:n.uid+r._context.staticPlot,translateX:x.x[0]*r._fullLayout._size.w,translateY:r._fullLayout._size.h*(1-x.y[1]),size:r._fullLayout._size,width:b,maxLineWidth:P,height:_,columnOrder:L,groupHeight:_,rowBlocks:S,headerRowBlocks:M,scrollY:0,cells:o({},n.cells,{values:i}),headerCells:o({},n.header,{values:m}),gdColumns:m.map(function(r){return r[0]}),gdColumnsOriginalOrder:m.map(function(r){return r[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:m.map(function(r,n){var i=E[r];return E[r]=(i||0)+1,{key:r+"__"+E[r],label:r,specIndex:n,xIndex:L[n],xScale:d,x:void 0,calcdata:void 0,columnWidth:C[n]}})};return I.columns.forEach(function(r){r.calcdata=I,r.x=d(r)}),I}},56269:function(r,n,i){"use strict";var a=i(1426).extendFlat;n.splitToPanels=function(r){var n=[0,0],i=a({},r,{key:"header",type:"header",page:0,prevPages:n,currentRepaint:[null,null],dragHandle:!0,values:r.calcdata.headerCells.values[r.specIndex],rowBlocks:r.calcdata.headerRowBlocks,calcdata:a({},r.calcdata,{cells:r.calcdata.headerCells})});return[a({},r,{key:"cells1",type:"cells",page:0,prevPages:n,currentRepaint:[null,null],dragHandle:!1,values:r.calcdata.cells.values[r.specIndex],rowBlocks:r.calcdata.rowBlocks}),a({},r,{key:"cells2",type:"cells",page:1,prevPages:n,currentRepaint:[null,null],dragHandle:!1,values:r.calcdata.cells.values[r.specIndex],rowBlocks:r.calcdata.rowBlocks}),i]},n.splitToCells=function(r){var n,i,a=[i=(n=r.rowBlocks[r.page])?n.rows[0].rowIndex:0,n?i+n.rows.length:0];return(r.values||[]).slice(a[0],a[1]).map(function(n,i){return{keyWithinBlock:i+("string"==typeof n&&n.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:a[0]+i,column:r,calcdata:r.calcdata,page:r.page,rowBlocks:r.rowBlocks,value:n}})}},39754:function(r,n,i){"use strict";var a=i(71828),o=i(44464),s=i(27670).c;r.exports=function(r,n,i,l){function u(i,s){return a.coerce(r,n,o,i,s)}s(n,l,u),u("columnwidth"),u("header.values"),u("header.format"),u("header.align"),u("header.prefix"),u("header.suffix"),u("header.height"),u("header.line.width"),u("header.line.color"),u("header.fill.color"),a.coerceFont(u,"header.font",a.extendFlat({},l.font)),function(r,n){for(var i=r.columnorder||[],a=r.header.values.length,o=i.slice(0,a),s=o.slice().sort(function(r,n){return r-n}),l=o.map(function(r){return s.indexOf(r)}),u=l.length;u<a;u++)l.push(u);n("columnorder",l)}(n,u),u("cells.values"),u("cells.format"),u("cells.align"),u("cells.prefix"),u("cells.suffix"),u("cells.height"),u("cells.line.width"),u("cells.line.color"),u("cells.fill.color"),a.coerceFont(u,"cells.font",a.extendFlat({},l.font)),n._length=null}},96595:function(r,n,i){"use strict";r.exports={attributes:i(44464),supplyDefaults:i(39754),calc:i(76333),plot:i(36736),moduleType:"trace",name:"table",basePlotModule:i(99469),categories:["noOpacity"],meta:{}}},36736:function(r,n,i){"use strict";var a=i(49850),o=i(39898),s=i(71828),l=s.numberFormat,u=i(28984),c=i(91424),f=i(63893),h=i(71828).raiseToTop,p=i(71828).strTranslate,d=i(71828).cancelTransition,v=i(51018),g=i(56269),y=i(7901);function m(r){return Math.ceil(r.calcdata.maxLineWidth/2)}function x(r,n){return"clip"+r._fullLayout._uid+"_scrollAreaBottomClip_"+n.key}function b(r,n){return"clip"+r._fullLayout._uid+"_columnBoundaryClippath_"+n.calcdata.key+"_"+n.specIndex}function _(r){return[].concat.apply([],r.map(function(r){return r})).map(function(r){return r.__data__})}function w(r,n,i){var s=r.selectAll("."+a.cn.scrollbarKit).data(u.repeat,u.keyFun);s.enter().append("g").classed(a.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),s.each(function(r){var n,i=r.scrollbarState;i.totalHeight=B(n=r.rowBlocks,n.length-1)+(n.length?N(n[n.length-1],1/0):1),i.scrollableAreaHeight=r.groupHeight-C(r),i.currentlyVisibleHeight=Math.min(i.totalHeight,i.scrollableAreaHeight),i.ratio=i.currentlyVisibleHeight/i.totalHeight,i.barLength=Math.max(i.ratio*i.currentlyVisibleHeight,a.goldenRatio*a.scrollbarWidth),i.barWiggleRoom=i.currentlyVisibleHeight-i.barLength,i.wiggleRoom=Math.max(0,i.totalHeight-i.scrollableAreaHeight),i.topY=0===i.barWiggleRoom?0:r.scrollY/i.wiggleRoom*i.barWiggleRoom,i.bottomY=i.topY+i.barLength,i.dragMultiplier=i.wiggleRoom/i.barWiggleRoom}).attr("transform",function(r){return p(r.width+a.scrollbarWidth/2+a.scrollbarOffset,C(r))});var l=s.selectAll("."+a.cn.scrollbar).data(u.repeat,u.keyFun);l.enter().append("g").classed(a.cn.scrollbar,!0);var c=l.selectAll("."+a.cn.scrollbarSlider).data(u.repeat,u.keyFun);c.enter().append("g").classed(a.cn.scrollbarSlider,!0),c.attr("transform",function(r){return p(0,r.scrollbarState.topY||0)});var f=c.selectAll("."+a.cn.scrollbarGlyph).data(u.repeat,u.keyFun);f.enter().append("line").classed(a.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",a.scrollbarWidth).attr("stroke-linecap","round").attr("y1",a.scrollbarWidth/2),f.attr("y2",function(r){return r.scrollbarState.barLength-a.scrollbarWidth/2}).attr("stroke-opacity",function(r){return r.columnDragInProgress||!r.scrollbarState.barWiggleRoom||i?0:.4}),f.transition().delay(0).duration(0),f.transition().delay(a.scrollbarHideDelay).duration(a.scrollbarHideDuration).attr("stroke-opacity",0);var h=l.selectAll("."+a.cn.scrollbarCaptureZone).data(u.repeat,u.keyFun);h.enter().append("line").classed(a.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",a.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(i){var a=o.event.y,s=this.getBoundingClientRect(),l=i.scrollbarState,u=a-s.top,c=o.scale.linear().domain([0,l.scrollableAreaHeight]).range([0,l.totalHeight]).clamp(!0);l.topY<=u&&u<=l.bottomY||P(n,r,null,c(u-l.barLength/2))(i)}).call(o.behavior.drag().origin(function(r){return o.event.stopPropagation(),r.scrollbarState.scrollbarScrollInProgress=!0,r}).on("drag",P(n,r)).on("dragend",function(){})),h.attr("y2",function(r){return r.scrollbarState.scrollableAreaHeight}),n._context.staticPlot&&(f.remove(),h.remove())}function T(r,n,i,s){var l,f,h,p,d,v=((f=((l=i.selectAll("."+a.cn.columnCells).data(u.repeat,u.keyFun)).enter().append("g").classed(a.cn.columnCells,!0),l.exit().remove(),l).selectAll("."+a.cn.columnCell).data(g.splitToCells,function(r){return r.keyWithinBlock})).enter().append("g").classed(a.cn.columnCell,!0),f.exit().remove(),f);(function(r){r.each(function(r,n){var i=r.calcdata.cells.font,a=r.column.specIndex,o={size:M(i.size,a,n),color:M(i.color,a,n),family:M(i.family,a,n)};r.rowNumber=r.key,r.align=M(r.calcdata.cells.align,a,n),r.cellBorderWidth=M(r.calcdata.cells.line.width,a,n),r.font=o})})(v),function(r){r.attr("width",function(r){return r.column.columnWidth}).attr("stroke-width",function(r){return r.cellBorderWidth}).each(function(r){var n=o.select(this);y.stroke(n,M(r.calcdata.cells.line.color,r.column.specIndex,r.rowNumber)),y.fill(n,M(r.calcdata.cells.fill.color,r.column.specIndex,r.rowNumber))})}(((h=v.selectAll("."+a.cn.cellRect).data(u.repeat,function(r){return r.keyWithinBlock})).enter().append("rect").classed(a.cn.cellRect,!0),h));var m=((d=((p=v.selectAll("."+a.cn.cellTextHolder).data(u.repeat,function(r){return r.keyWithinBlock})).enter().append("g").classed(a.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),p).selectAll("."+a.cn.cellText).data(u.repeat,function(r){return r.keyWithinBlock})).enter().append("text").classed(a.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){o.event.stopPropagation()}),d);(function(r){r.each(function(r){c.font(o.select(this),r.font)})})(m),k(m,n,s,r),F(v)}function k(r,n,i,s){r.text(function(r){var n=r.column.specIndex,i=r.rowNumber,o=r.value,s="string"==typeof o,u=s&&o.match(/<br>/i),c=!s||u;r.mayHaveMarkup=s&&o.match(/[<&>]/);var f="string"==typeof o&&o.match(a.latexCheck);r.latex=f;var h,p,d=f?"":M(r.calcdata.cells.prefix,n,i)||"",v=f?"":M(r.calcdata.cells.suffix,n,i)||"",g=f?null:M(r.calcdata.cells.format,n,i)||null,y=d+(g?l(g)(r.value):r.value)+v;if(r.wrappingNeeded=!r.wrapped&&!c&&!f&&(h=A(y)),r.cellHeightMayIncrease=u||f||r.mayHaveMarkup||(void 0===h?A(y):h),r.needsConvertToTspans=r.mayHaveMarkup||r.wrappingNeeded||r.latex,r.wrappingNeeded){var m=(" "===a.wrapSplitCharacter?y.replace(/<a href=/gi,"<a_href="):y).split(a.wrapSplitCharacter),x=" "===a.wrapSplitCharacter?m.map(function(r){return r.replace(/<a_href=/gi,"<a href=")}):m;r.fragments=x.map(function(r){return{text:r,width:null}}),r.fragments.push({fragment:a.wrapSpacer,width:null}),p=x.join(a.lineBreaker)+a.lineBreaker+a.wrapSpacer}else delete r.fragments,p=y;return p}).attr("dy",function(r){return r.needsConvertToTspans?0:"0.75em"}).each(function(r){var l=o.select(this),u=r.wrappingNeeded?D:z;r.needsConvertToTspans?f.convertToTspans(l,s,u(i,this,n,s,r)):o.select(this.parentNode).attr("transform",function(r){return p(R(r),a.cellPad)}).attr("text-anchor",function(r){return({left:"start",center:"middle",right:"end"})[r.align]})})}function A(r){return -1!==r.indexOf(a.wrapSplitCharacter)}function M(r,n,i){if(s.isArrayOrTypedArray(r)){var a=r[Math.min(n,r.length-1)];return s.isArrayOrTypedArray(a)?a[Math.min(i,a.length-1)]:a}return r}function S(r,n,i){r.transition().ease(a.releaseTransitionEase).duration(a.releaseTransitionDuration).attr("transform",p(n.x,i))}function E(r){return"cells"===r.type}function L(r){return"header"===r.type}function C(r){return(r.rowBlocks.length?r.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(r,n){return r+N(n,1/0)},0)}function O(r,n,i){var a=_(n)[0];if(void 0!==a){var o=a.rowBlocks,s=a.calcdata,l=B(o,o.length),u=a.calcdata.groupHeight-C(a),c=s.scrollY=Math.max(0,Math.min(l-u,s.scrollY)),f=function(r,n,i){for(var a=[],o=0,s=0;s<r.length;s++){for(var l=r[s],u=l.rows,c=0,f=0;f<u.length;f++)c+=u[f].rowHeight;l.allRowsHeight=c,n<o+c&&n+i>o&&a.push(s),o+=c}return a}(o,c,u);1===f.length&&(f[0]===o.length-1?f.unshift(f[0]-1):f.push(f[0]+1)),f[0]%2&&f.reverse(),n.each(function(r,n){r.page=f[n],r.scrollY=c}),n.attr("transform",function(r){return p(0,B(r.rowBlocks,r.page)-r.scrollY)}),r&&(I(r,i,n,f,a.prevPages,a,0),I(r,i,n,f,a.prevPages,a,1),w(i,r))}}function P(r,n,i,s){return function(l){var u=l.calcdata?l.calcdata:l,c=n.filter(function(r){return u.key===r.key}),f=i||u.scrollbarState.dragMultiplier,h=u.scrollY;return u.scrollY=void 0===s?u.scrollY+f*o.event.dy:s,O(r,c.selectAll("."+a.cn.yColumn).selectAll("."+a.cn.columnBlock).filter(E),c),u.scrollY===h}}function I(r,n,i,a,o,s,l){a[l]!==o[l]&&(clearTimeout(s.currentRepaint[l]),s.currentRepaint[l]=setTimeout(function(){T(r,n,i.filter(function(r,n){return n===l&&a[n]!==o[n]}),i),o[l]=a[l]}))}function D(r,n,i,s){return function(){var l=o.select(n.parentNode);l.each(function(r){var n=r.fragments;l.selectAll("tspan.line").each(function(r,i){n[i].width=this.getComputedTextLength()});var i,o,s=n[n.length-1].width,u=n.slice(0,-1),c=[],f=0,h=r.column.columnWidth-2*a.cellPad;for(r.value="";u.length;)f+(o=(i=u.shift()).width+s)>h&&(r.value+=c.join(a.wrapSpacer)+a.lineBreaker,c=[],f=0),c.push(i.text),f+=o;f&&(r.value+=c.join(a.wrapSpacer)),r.wrapped=!0}),l.selectAll("tspan.line").remove(),k(l.select("."+a.cn.cellText),i,r,s),o.select(n.parentNode.parentNode).call(F)}}function z(r,n,i,s,l){return function(){if(!l.settledY){var u=o.select(n.parentNode),c=j(l),f=l.key-c.firstRowIndex,h=c.rows[f].rowHeight,d=Math.max(l.cellHeightMayIncrease?n.parentNode.getBoundingClientRect().height+2*a.cellPad:h,h);d-c.rows[f].rowHeight&&(c.rows[f].rowHeight=d,r.selectAll("."+a.cn.columnCell).call(F),O(null,r.filter(E),0),w(i,s,!0)),u.attr("transform",function(){var r=this.parentNode.getBoundingClientRect(),n=o.select(this.parentNode).select("."+a.cn.cellRect).node().getBoundingClientRect(),i=this.transform.baseVal.consolidate(),s=n.top-r.top+(i?i.matrix.f:a.cellPad);return p(R(l,o.select(this.parentNode).select("."+a.cn.cellTextHolder).node().getBoundingClientRect().width),s)}),l.settledY=!0}}}function R(r,n){switch(r.align){case"left":default:return a.cellPad;case"right":return r.column.columnWidth-(n||0)-a.cellPad;case"center":return(r.column.columnWidth-(n||0))/2}}function F(r){r.attr("transform",function(r){var n=r.rowBlocks[0].auxiliaryBlocks.reduce(function(r,n){return r+N(n,1/0)},0);return p(0,N(j(r),r.key)+n)}).selectAll("."+a.cn.cellRect).attr("height",function(r){var n,i;return(n=j(r),i=r.key,n.rows[i-n.firstRowIndex]).rowHeight})}function B(r,n){for(var i=0,a=n-1;a>=0;a--)i+=function(r){var n=r.allRowsHeight;if(void 0!==n)return n;for(var i=0,a=0;a<r.rows.length;a++)i+=r.rows[a].rowHeight;return r.allRowsHeight=i,i}(r[a]);return i}function N(r,n){for(var i=0,a=0;a<r.rows.length&&r.rows[a].rowIndex<n;a++)i+=r.rows[a].rowHeight;return i}function j(r){return r.rowBlocks[r.page]}r.exports=function(r,n){var i=!r._context.staticPlot,s=r._fullLayout._paper.selectAll("."+a.cn.table).data(n.map(function(n){return v(r,u.unwrap(n).trace)}),u.keyFun);s.exit().remove(),s.enter().append("g").classed(a.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),s.attr("width",function(r){return r.width+r.size.l+r.size.r}).attr("height",function(r){return r.height+r.size.t+r.size.b}).attr("transform",function(r){return p(r.translateX,r.translateY)});var l=s.selectAll("."+a.cn.tableControlView).data(u.repeat,u.keyFun),f=l.enter().append("g").classed(a.cn.tableControlView,!0).style("box-sizing","content-box");i&&f.on("mousemove",function(n){l.filter(function(r){return n===r}).call(w,r)}).on("onwheel"in document?"wheel":"mousewheel",function(n){n.scrollbarState.wheeling||(n.scrollbarState.wheeling=!0,P(r,l,null,n.scrollY+o.event.deltaY)(n)||(o.event.stopPropagation(),o.event.preventDefault()),n.scrollbarState.wheeling=!1)}).call(w,r,!0),l.attr("transform",function(r){return p(r.size.l,r.size.t)});var y=l.selectAll("."+a.cn.scrollBackground).data(u.repeat,u.keyFun);y.enter().append("rect").classed(a.cn.scrollBackground,!0).attr("fill","none"),y.attr("width",function(r){return r.width}).attr("height",function(r){return r.height}),l.each(function(n){c.setClipUrl(o.select(this),x(r,n),r)});var k=l.selectAll("."+a.cn.yColumn).data(function(r){return r.columns},u.keyFun);k.enter().append("g").classed(a.cn.yColumn,!0),k.exit().remove(),k.attr("transform",function(r){return p(r.x,0)}),i&&k.call(o.behavior.drag().origin(function(n){return S(o.select(this),n,-a.uplift),h(this),n.calcdata.columnDragInProgress=!0,w(l.filter(function(r){return n.calcdata.key===r.key}),r),n}).on("drag",function(r){var n=o.select(this),i=function(n){return(r===n?o.event.x:n.x)+n.columnWidth/2};r.x=Math.max(-a.overdrag,Math.min(r.calcdata.width+a.overdrag-r.columnWidth,o.event.x)),_(k).filter(function(n){return n.calcdata.key===r.calcdata.key}).sort(function(r,n){return i(r)-i(n)}).forEach(function(n,i){n.xIndex=i,n.x=r===n?n.x:n.xScale(n)}),k.filter(function(n){return r!==n}).transition().ease(a.transitionEase).duration(a.transitionDuration).attr("transform",function(r){return p(r.x,0)}),n.call(d).attr("transform",p(r.x,-a.uplift))}).on("dragend",function(n){var i,a,s=o.select(this),l=n.calcdata;n.x=n.xScale(n),n.calcdata.columnDragInProgress=!1,S(s,n,0),i=l.columns.map(function(r){return r.xIndex}),a=l.gdColumnsOriginalOrder,l.gdColumns.sort(function(r,n){return i[a.indexOf(r)]-i[a.indexOf(n)]}),l.columnorder=i,r.emit("plotly_restyle")})),k.each(function(n){c.setClipUrl(o.select(this),b(r,n),r)});var A=k.selectAll("."+a.cn.columnBlock).data(g.splitToPanels,u.keyFun);A.enter().append("g").classed(a.cn.columnBlock,!0).attr("id",function(r){return r.key}),A.style("cursor",function(r){return r.dragHandle?"ew-resize":r.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var M=A.filter(L),C=A.filter(E);i&&C.call(o.behavior.drag().origin(function(r){return o.event.stopPropagation(),r}).on("drag",P(r,l,-1)).on("dragend",function(){})),T(r,l,M,A),T(r,l,C,A);var I=l.selectAll("."+a.cn.scrollAreaClip).data(u.repeat,u.keyFun);I.enter().append("clipPath").classed(a.cn.scrollAreaClip,!0).attr("id",function(n){return x(r,n)});var D=I.selectAll("."+a.cn.scrollAreaClipRect).data(u.repeat,u.keyFun);D.enter().append("rect").classed(a.cn.scrollAreaClipRect,!0).attr("x",-a.overdrag).attr("y",-a.uplift).attr("fill","none"),D.attr("width",function(r){return r.width+2*a.overdrag}).attr("height",function(r){return r.height+a.uplift}),k.selectAll("."+a.cn.columnBoundary).data(u.repeat,u.keyFun).enter().append("g").classed(a.cn.columnBoundary,!0);var z=k.selectAll("."+a.cn.columnBoundaryClippath).data(u.repeat,u.keyFun);z.enter().append("clipPath").classed(a.cn.columnBoundaryClippath,!0),z.attr("id",function(n){return b(r,n)});var R=z.selectAll("."+a.cn.columnBoundaryRect).data(u.repeat,u.keyFun);R.enter().append("rect").classed(a.cn.columnBoundaryRect,!0).attr("fill","none"),R.attr("width",function(r){return r.columnWidth+2*m(r)}).attr("height",function(r){return r.calcdata.height+2*m(r)+a.uplift}).attr("x",function(r){return-m(r)}).attr("y",function(r){return-m(r)}),O(null,C,l)}},45802:function(r,n,i){"use strict";var a=i(5386).fF,o=i(5386).si,s=i(50693),l=i(27670).Y,u=i(34e3),c=i(57564),f=i(43473),h=i(1426).extendFlat,p=i(79952).u;r.exports={labels:c.labels,parents:c.parents,values:c.values,branchvalues:c.branchvalues,count:c.count,level:c.level,maxdepth:c.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:h({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:c.marker.colors,pattern:p,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:c.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},s("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:h({},u.textfont,{}),editType:"calc"},text:u.text,textinfo:c.textinfo,texttemplate:o({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:u.hovertext,hoverinfo:c.hoverinfo,hovertemplate:a({},{keys:f.eventDataKeys}),textfont:u.textfont,insidetextfont:u.insidetextfont,outsidetextfont:h({},u.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:u.sort,root:c.root,domain:l({name:"treemap",trace:!0,editType:"calc"})}},78018:function(r,n,i){"use strict";var a=i(74875);n.name="treemap",n.plot=function(r,i,o,s){a.plotBasePlot(n.name,r,i,o,s)},n.clean=function(r,i,o,s){a.cleanBasePlot(n.name,r,i,o,s)}},65039:function(r,n,i){"use strict";var a=i(52147);n.y=function(r,n){return a.calc(r,n)},n.T=function(r){return a._runCrossTraceCalc("treemap",r)}},43473:function(r){"use strict";r.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(r,n,i){"use strict";var a=i(71828),o=i(45802),s=i(7901),l=i(27670).c,u=i(90769).handleText,c=i(97313).TEXTPAD,f=i(37434).handleMarkerDefaults,h=i(21081),p=h.hasColorscale,d=h.handleDefaults;r.exports=function(r,n,i,h){function v(i,s){return a.coerce(r,n,o,i,s)}var g=v("labels"),y=v("parents");if(g&&g.length&&y&&y.length){var m=v("values");v(m&&m.length?"branchvalues":"count"),v("level"),v("maxdepth"),"squarify"===v("tiling.packing")&&v("tiling.squarifyratio"),v("tiling.flip"),v("tiling.pad");var x=v("text");v("texttemplate"),n.texttemplate||v("textinfo",a.isArrayOrTypedArray(x)?"text+label":"label"),v("hovertext"),v("hovertemplate");var b=v("pathbar.visible");u(r,n,h,v,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),v("textposition");var _=-1!==n.textposition.indexOf("bottom");f(r,n,h,v),(n._hasColorscale=p(r,"marker","colors")||(r.marker||{}).coloraxis)?d(r,n,h,v,{prefix:"marker.",cLetter:"c"}):v("marker.depthfade",!(n.marker.colors||[]).length);var w=2*n.textfont.size;v("marker.pad.t",_?w/4:w),v("marker.pad.l",w/4),v("marker.pad.r",w/4),v("marker.pad.b",_?w:w/4),v("marker.cornerradius"),n._hovered={marker:{line:{width:2,color:s.contrast(h.paper_bgcolor)}}},b&&(v("pathbar.thickness",n.pathbar.textfont.size+2*c),v("pathbar.side"),v("pathbar.edgeshape")),v("sort"),v("root.color"),l(n,h,v),n._length=null}else n.visible=!1}},80694:function(r,n,i){"use strict";var a=i(39898),o=i(2791),s=i(72597).clearMinTextSize,l=i(16688).resizeText,u=i(46650);r.exports=function(r,n,i,c,f){var h,p,d=f.type,v=f.drawDescendants,g=r._fullLayout,y=g["_"+d+"layer"],m=!i;s(d,g),(h=y.selectAll("g.trace."+d).data(n,function(r){return r[0].trace.uid})).enter().append("g").classed("trace",!0).classed(d,!0),h.order(),!g.uniformtext.mode&&o.hasTransition(i)?(c&&(p=c()),a.transition().duration(i.duration).ease(i.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){y.selectAll("g.trace").each(function(n){u(r,n,this,i,v)})})):(h.each(function(n){u(r,n,this,i,v)}),g.uniformtext.mode&&l(r,y.selectAll(".trace"),d)),m&&h.exit().remove()}},66209:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(63893),u=i(37210),c=i(96362).styleOne,f=i(43473),h=i(2791),p=i(83523);r.exports=function(r,n,i,d,v){var g=v.barDifY,y=v.width,m=v.height,x=v.viewX,b=v.viewY,_=v.pathSlice,w=v.toMoveInsideSlice,T=v.strTransform,k=v.hasTransition,A=v.handleSlicesExit,M=v.makeUpdateSliceInterpolator,S=v.makeUpdateTextInterpolator,E={},L=r._context.staticPlot,C=r._fullLayout,O=n[0],P=O.trace,I=O.hierarchy,D=y/P._entryDepth,z=h.listPath(i.data,"id"),R=u(I.copy(),[y,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(R=R.filter(function(r){var n=z.indexOf(r.data.id);return -1!==n&&(r.x0=D*n,r.x1=D*(n+1),r.y0=g,r.y1=g+m,r.onPathbar=!0,!0)})).reverse(),(d=d.data(R,h.getPtId)).enter().append("g").classed("pathbar",!0),A(d,!0,E,[y,m],_),d.order();var F=d;k&&(F=F.transition().each("end",function(){var n=a.select(this);h.setSliceCursor(n,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),F.each(function(u){u._x0=x(u.x0),u._x1=x(u.x1),u._y0=b(u.y0),u._y1=b(u.y1),u._hoverX=x(u.x1-Math.min(y,m)/2),u._hoverY=b(u.y1-m/2);var d=a.select(this),v=o.ensureSingle(d,"path","surface",function(r){r.style("pointer-events",L?"none":"all")});k?v.transition().attrTween("d",function(r){var n=M(r,!0,E,[y,m]);return function(r){return _(n(r))}}):v.attr("d",_),d.call(p,i,r,n,{styleOne:c,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),v.call(c,u,P,r,{hovered:!1}),u._text=(h.getPtLabel(u)||"").split("<br>").join(" ")||"";var g=o.ensureSingle(d,"g","slicetext"),A=o.ensureSingle(g,"text","",function(r){r.attr("data-notex",1)}),O=o.ensureUniformFontSize(r,h.determineTextFont(P,u,C.font,{onPathbar:!0}));A.text(u._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(s.font,O).call(l.convertToTspans,r),u.textBB=s.bBox(A.node()),u.transform=w(u,{fontSize:O.size,onPathbar:!0}),u.transform.fontSize=O.size,k?A.transition().attrTween("transform",function(r){var n=S(r,!0,E,[y,m]);return function(r){return T(n(r))}}):A.attr("transform",T(u))})}},52583:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(63893),u=i(37210),c=i(96362).styleOne,f=i(43473),h=i(2791),p=i(83523),d=i(24714).formatSliceLabel;r.exports=function(r,n,i,v,g){var y=g.width,m=g.height,x=g.viewX,b=g.viewY,_=g.pathSlice,w=g.toMoveInsideSlice,T=g.strTransform,k=g.hasTransition,A=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,S=g.makeUpdateTextInterpolator,E=g.prevEntry,L=r._context.staticPlot,C=r._fullLayout,O=n[0].trace,P=-1!==O.textposition.indexOf("left"),I=-1!==O.textposition.indexOf("right"),D=-1!==O.textposition.indexOf("bottom"),z=!D&&!O.marker.pad.t||D&&!O.marker.pad.b,R=u(i,[y,m],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}).descendants(),F=1/0,B=-1/0;R.forEach(function(r){var n=r.depth;n>=O._maxDepth?(r.x0=r.x1=(r.x0+r.x1)/2,r.y0=r.y1=(r.y0+r.y1)/2):(F=Math.min(F,n),B=Math.max(B,n))}),v=v.data(R,h.getPtId),O._maxVisibleLayers=isFinite(B)?B-F+1:0,v.enter().append("g").classed("slice",!0),A(v,!1,{},[y,m],_),v.order();var N=null;if(k&&E){var j=h.getPtId(E);v.each(function(r){null===N&&h.getPtId(r)===j&&(N={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})})}var U=function(){return N||{x0:0,x1:y,y0:0,y1:m}},V=v;return k&&(V=V.transition().each("end",function(){var n=a.select(this);h.setSliceCursor(n,r,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(u){var v=h.isHeader(u,O);u._x0=x(u.x0),u._x1=x(u.x1),u._y0=b(u.y0),u._y1=b(u.y1),u._hoverX=x(u.x1-O.marker.pad.r),u._hoverY=b(D?u.y1-O.marker.pad.b/2:u.y0+O.marker.pad.t/2);var g=a.select(this),A=o.ensureSingle(g,"path","surface",function(r){r.style("pointer-events",L?"none":"all")});k?A.transition().attrTween("d",function(r){var n=M(r,!1,U(),[y,m]);return function(r){return _(n(r))}}):A.attr("d",_),g.call(p,i,r,n,{styleOne:c,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,r,{isTransitioning:r._transitioning}),A.call(c,u,O,r,{hovered:!1}),u.x0===u.x1||u.y0===u.y1?u._text="":u._text=v?z?"":h.getPtLabel(u)||"":d(u,i,O,n,C)||"";var E=o.ensureSingle(g,"g","slicetext"),R=o.ensureSingle(E,"text","",function(r){r.attr("data-notex",1)}),F=o.ensureUniformFontSize(r,h.determineTextFont(O,u,C.font));R.text(u._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":P||v?"start":"middle").call(s.font,F).call(l.convertToTspans,r),u.textBB=s.bBox(R.node()),u.transform=w(u,{fontSize:F.size,isHeader:v}),u.transform.fontSize=F.size,k?R.transition().attrTween("transform",function(r){var n=S(r,!1,U(),[y,m]);return function(r){return T(n(r))}}):R.attr("transform",T(u))}),N}},14102:function(r){"use strict";r.exports=function r(n,i,a){a.swapXY&&(o=n.x0,n.x0=n.y0,n.y0=o,o=n.x1,n.x1=n.y1,n.y1=o),a.flipX&&(o=n.x0,n.x0=i[0]-n.x1,n.x1=i[0]-o),a.flipY&&(o=n.y0,n.y0=i[1]-n.y1,n.y1=i[1]-o);var o,s=n.children;if(s)for(var l=0;l<s.length;l++)r(s[l],i,a)}},70954:function(r,n,i){"use strict";r.exports={moduleType:"trace",name:"treemap",basePlotModule:i(78018),categories:[],animatable:!0,attributes:i(45802),layoutAttributes:i(55479),supplyDefaults:i(91174),supplyLayoutDefaults:i(77182),calc:i(65039).y,crossTraceCalc:i(65039).T,plot:i(5893),style:i(96362).style,colorbar:i(4898),meta:{}}},55479:function(r){"use strict";r.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(r,n,i){"use strict";var a=i(71828),o=i(55479);r.exports=function(r,n){function i(i,s){return a.coerce(r,n,o,i,s)}i("treemapcolorway",n.colorway),i("extendtreemapcolors")}},37210:function(r,n,i){"use strict";var a=i(674),o=i(14102);r.exports=function(r,n,i){var s,l=i.flipX,u=i.flipY,c="dice-slice"===i.packing,f=i.pad[u?"bottom":"top"],h=i.pad[l?"right":"left"],p=i.pad[l?"left":"right"],d=i.pad[u?"top":"bottom"];c&&(s=h,h=f,f=s,s=p,p=d,d=s);var v=a.treemap().tile(function(r,n){switch(r){case"squarify":return a.treemapSquarify.ratio(n);case"binary":return a.treemapBinary;case"dice":return a.treemapDice;case"slice":return a.treemapSlice;default:return a.treemapSliceDice}}(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(h).paddingRight(p).paddingTop(f).paddingBottom(d).size(c?[n[1],n[0]]:n)(r);return(c||l||u)&&o(v,n,{swapXY:c,flipX:l,flipY:u}),v}},5893:function(r,n,i){"use strict";var a=i(80694),o=i(52583);r.exports=function(r,n,i,s){return a(r,n,i,s,{type:"treemap",drawDescendants:o})}},46650:function(r,n,i){"use strict";var a=i(39898),o=i(81684).sX,s=i(2791),l=i(71828),u=i(97313).TEXTPAD,c=i(17295).toMoveInsideBar,f=i(72597).recordMinTextSize,h=i(43473),p=i(66209);function d(r){return s.isHierarchyRoot(r)?"":s.getPtId(r)}r.exports=function(r,n,i,v,g){var y=r._fullLayout,m=n[0],x=m.trace,b="icicle"===x.type,_=m.hierarchy,w=s.findEntryWithLevel(_,x.level),T=a.select(i),k=T.selectAll("g.pathbar"),A=T.selectAll("g.slice");if(!w)return k.remove(),void A.remove();var M=s.isHierarchyRoot(w),S=!y.uniformtext.mode&&s.hasTransition(v),E=s.getMaxDepth(x),L=y._size,C=x.domain,O=L.w*(C.x[1]-C.x[0]),P=L.h*(C.y[1]-C.y[0]),I=x.pathbar.thickness,D=x.marker.line.width+h.gapWithPathbar,z=x.pathbar.visible?x.pathbar.side.indexOf("bottom")>-1?P+D:-(I+D):0,R={x0:O,x1:O,y0:z,y1:z+I},F=function(r,n,i){var a=x.tiling.pad,o=function(r){return r-a<=n.x0},s=function(r){return r+a>=n.x1},l=function(r){return r-a<=n.y0},u=function(r){return r+a>=n.y1};return r.x0===n.x0&&r.x1===n.x1&&r.y0===n.y0&&r.y1===n.y1?{x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1}:{x0:o(r.x0-a)?0:s(r.x0-a)?i[0]:r.x0,x1:o(r.x1+a)?0:s(r.x1+a)?i[0]:r.x1,y0:l(r.y0-a)?0:u(r.y0-a)?i[1]:r.y0,y1:l(r.y1+a)?0:u(r.y1+a)?i[1]:r.y1}},B=null,N={},j={},U=null,V=function(r,n){return n?N[d(r)]:j[d(r)]};m.hasMultipleRoots&&M&&E++,x._maxDepth=E,x._backgroundColor=y.paper_bgcolor,x._entryDepth=w.data.depth,x._atRootLevel=M;var H=-O/2+L.l+L.w*(C.x[1]+C.x[0])/2,q=-P/2+L.t+L.h*(1-(C.y[1]+C.y[0])/2),G=function(r){return H+r},Z=function(r){return q+r},Y=Z(0),W=G(0),X=function(r){return W+r},J=function(r){return Y+r},K=X(0),$=function(r){r.x=Math.max(K,r.x)},Q=x.pathbar.edgeshape,tt=x[b?"tiling":"marker"].pad,te=function(r){return -1!==x.textposition.indexOf(r)},tr=te("top"),tn=te("left"),ti=te("right"),ta=te("bottom"),to=function(r,n){var i=r.x0,a=r.x1,o=r.y0,s=r.y1,l=r.textBB,h=tr||n.isHeader&&!ta?"start":ta?"end":"middle",p=te("right"),d=te("left")||n.onPathbar?-1:p?1:0;if(n.isHeader){if((i+=(b?tt:tt.l)-u)>=(a-=(b?tt:tt.r)-u)){var v,g=(i+a)/2;i=g,a=g}ta?o<(v=s-(b?tt:tt.b))&&v<s&&(o=v):o<(v=o+(b?tt:tt.t))&&v<s&&(s=v)}var m=c(i,a,o,s,l,{isHorizontal:!1,constrained:!0,angle:0,anchor:h,leftToRight:d});return m.fontSize=n.fontSize,m.targetX=G(m.targetX),m.targetY=Z(m.targetY),isNaN(m.targetX)||isNaN(m.targetY)?{}:(i!==a&&o!==s&&f(x.type,m,y),{scale:m.scale,rotate:m.rotate,textX:m.textX,textY:m.textY,anchorX:m.anchorX,anchorY:m.anchorY,targetX:m.targetX,targetY:m.targetY})},ts=function(r,n){for(var i,a=0,o=r;!i&&a<E;)a++,(o=o.parent)?i=V(o,n):a=E;return i||{}},tl=function(r,n,i,a,s){var u,c=V(r,n);if(c)u=c;else if(n)u=R;else if(B){if(r.parent){var f=U||i;f&&!n?u=F(r,f,a):(u={},l.extendFlat(u,ts(r,n)))}else u=l.extendFlat({},r),b&&("h"===s.orientation?s.flipX?u.x0=r.x1:u.x1=0:s.flipY?u.y0=r.y1:u.y1=0)}else u={};return o(u,{x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1})},tu=function(r,n,i,a){var u=V(r,n),c={},h=function(r,n,i,a){if(n)return N[d(_)]||R;var o=j[x.level]||i;return r.data.depth-w.data.depth<E?F(r,o,a):{}}(r,n,i,a);l.extendFlat(c,{transform:to({x0:h.x0,x1:h.x1,y0:h.y0,y1:h.y1,textBB:r.textBB,_text:r._text},{isHeader:s.isHeader(r,x)})}),u?c=u:r.parent&&l.extendFlat(c,ts(r,n));var p=r.transform;return r.x0!==r.x1&&r.y0!==r.y1&&f(x.type,p,y),o(c,{transform:{scale:p.scale,rotate:p.rotate,textX:p.textX,textY:p.textY,anchorX:p.anchorX,anchorY:p.anchorY,targetX:p.targetX,targetY:p.targetY}})},tc=function(r,n,i,s,l){var u=s[0],c=s[1];S?r.exit().transition().each(function(){var r=a.select(this);r.select("path.surface").transition().attrTween("d",function(r){var i=function(r,n,i,a){var s,l=V(r,n);if(n)s=R;else{var u=V(w,n);s=u?F(r,u,a):{}}return o(l,s)}(r,n,0,[u,c]);return function(r){return l(i(r))}}),r.select("g.slicetext").attr("opacity",0)}).remove():r.exit().remove()},tf=function(r){var n=r.transform;return r.x0!==r.x1&&r.y0!==r.y1&&f(x.type,n,y),l.getTextTransform({textX:n.textX,textY:n.textY,anchorX:n.anchorX,anchorY:n.anchorY,targetX:n.targetX,targetY:n.targetY,scale:n.scale,rotate:n.rotate})};S&&(k.each(function(r){N[d(r)]={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1},r.transform&&(N[d(r)].transform={textX:r.transform.textX,textY:r.transform.textY,anchorX:r.transform.anchorX,anchorY:r.transform.anchorY,targetX:r.transform.targetX,targetY:r.transform.targetY,scale:r.transform.scale,rotate:r.transform.rotate})}),A.each(function(r){j[d(r)]={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1},r.transform&&(j[d(r)].transform={textX:r.transform.textX,textY:r.transform.textY,anchorX:r.transform.anchorX,anchorY:r.transform.anchorY,targetX:r.transform.targetX,targetY:r.transform.targetY,scale:r.transform.scale,rotate:r.transform.rotate}),!B&&s.isEntry(r)&&(B=r)})),U=g(r,n,w,A,{width:O,height:P,viewX:G,viewY:Z,pathSlice:function(r){var n=G(r.x0),i=G(r.x1),a=Z(r.y0),o=Z(r.y1),s=i-n,l=o-a;if(!s||!l)return"";var u=Math.min(x.marker.cornerradius||0,s/2,l/2);u&&r.data&&r.data.data&&r.data.data.label&&(tr&&(u=Math.min(u,tt.t)),tn&&(u=Math.min(u,tt.l)),ti&&(u=Math.min(u,tt.r)),ta&&(u=Math.min(u,tt.b)));var c=function(r,n){return u?"a"+u+","+u+" 0 0 1 "+r+","+n:""};return"M"+n+","+(a+u)+c(u,-u)+"L"+(i-u)+","+a+c(u,u)+"L"+i+","+(o-u)+c(-u,u)+"L"+(n+u)+","+o+c(-u,-u)+"Z"},toMoveInsideSlice:to,prevEntry:B,makeUpdateSliceInterpolator:tl,makeUpdateTextInterpolator:tu,handleSlicesExit:tc,hasTransition:S,strTransform:tf}),x.pathbar.visible?p(r,n,w,k,{barDifY:z,width:O,height:I,viewX:X,viewY:J,pathSlice:function(r){var n=X(Math.max(Math.min(r.x0,r.x0),0)),i=X(Math.min(Math.max(r.x1,r.x1),O)),a=J(r.y0),o=J(r.y1),s=I/2,l={},u={};l.x=n,u.x=i,l.y=u.y=(a+o)/2;var c={x:n,y:a},f={x:i,y:a},h={x:i,y:o},p={x:n,y:o};return">"===Q?(c.x-=s,f.x-=s,h.x-=s,p.x-=s):"/"===Q?(h.x-=s,p.x-=s,l.x-=s/2,u.x-=s/2):"\\"===Q?(c.x-=s,f.x-=s,l.x-=s/2,u.x-=s/2):"<"===Q&&(l.x-=s,u.x-=s),$(c),$(p),$(l),$(f),$(h),$(u),"M"+c.x+","+c.y+"L"+f.x+","+f.y+"L"+u.x+","+u.y+"L"+h.x+","+h.y+"L"+p.x+","+p.y+"L"+l.x+","+l.y+"Z"},toMoveInsideSlice:to,makeUpdateSliceInterpolator:tl,makeUpdateTextInterpolator:tu,handleSlicesExit:tc,hasTransition:S,strTransform:tf}):k.remove()}},96362:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(71828),l=i(2791),u=i(72597).resizeText,c=i(43467);function f(r,n,i,a,u){var f,h,p=(u||{}).hovered,d=n.data.data,v=d.i,g=d.color,y=l.isHierarchyRoot(n),m=1;if(p)f=i._hovered.marker.line.color,h=i._hovered.marker.line.width;else if(y&&g===i.root.color)m=100,f="rgba(0,0,0,0)",h=0;else if(f=s.castOption(i,v,"marker.line.color")||o.defaultLine,h=s.castOption(i,v,"marker.line.width")||0,!i._hasColorscale&&!n.onPathbar){var x=i.marker.depthfade;if(x){var b,_=o.combine(o.addOpacity(i._backgroundColor,.75),g);if(!0===x?b=isFinite(l.getMaxDepth(i))?l.isLeaf(n)?0:i._maxVisibleLayers-(n.data.depth-i._entryDepth):n.data.height+1:(b=n.data.depth-i._entryDepth,i._atRootLevel||b++),b>0)for(var w=0;w<b;w++){var T=.5*w/b;g=o.combine(o.addOpacity(_,T),g)}}}r.call(c,n,i,a,g).style("stroke-width",h).call(o.stroke,f).style("opacity",m)}r.exports={style:function(r){var n=r._fullLayout._treemaplayer.selectAll(".trace");u(r,n,"treemap"),n.each(function(n){var i=a.select(this),o=n[0].trace;i.style("opacity",o.opacity),i.selectAll("path.surface").each(function(n){a.select(this).call(f,n,o,r,{hovered:!1})})})},styleOne:f}},68875:function(r,n,i){"use strict";var a=i(53522),o=i(1426).extendFlat,s=i(12663).axisHoverFormat;r.exports={y:a.y,x:a.x,x0:a.x0,y0:a.y0,xhoverformat:s("x"),yhoverformat:s("y"),name:o({},a.name,{}),orientation:o({},a.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,points:o({},a.boxpoints,{}),jitter:o({},a.jitter,{}),pointpos:o({},a.pointpos,{}),width:o({},a.width,{}),marker:a.marker,text:a.text,hovertext:a.hovertext,hovertemplate:a.hovertemplate,quartilemethod:a.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:a.selected,unselected:a.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(48518),l=i(60168),u=i(50606).BADNUM;r.exports=function(r,n){var i=s(r,n);if(i[0].t.empty)return i;for(var c=r._fullLayout,f=o.getFromId(r,n["h"===n.orientation?"xaxis":"yaxis"]),h=1/0,p=-1/0,d=0,v=0,g=0;g<i.length;g++){var y=i[g],m=y.pts.map(l.extractVal),x=y.bandwidth=function(r,n,i){var o=n.max-n.min;if(!o)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,o/1e4);var s=i.length;return Math.max(1.059*Math.min(a.stdev(i,s-1,n.mean),(n.q3-n.q1)/1.349)*Math.pow(s,-.2),o/100)}(n,y,m),b=y.span=function(r,n,i,a){var s,l=r.spanmode,c=r.span||[],f=[n.min,n.max],h=[n.min-2*a,n.max+2*a];function p(a){var o=c[a],s="multicategory"===i.type?i.r2c(o):i.d2c(o,0,r[n.valLetter+"calendar"]);return s===u?h[a]:s}var d={type:"linear",range:s="soft"===l?h:"hard"===l?f:[p(0),p(1)]};return o.setConvert(d),d.cleanRange(),s}(n,y,f,x);if(y.min===y.max&&0===x)b=y.span=[y.min,y.max],y.density=[{v:1,t:b[0]}],y.bandwidth=x,d=Math.max(d,1);else{var _=b[1]-b[0],w=Math.ceil(_/(x/3)),T=_/w;if(!isFinite(T)||!isFinite(w))return a.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var k=l.makeKDE(y,n,m);y.density=Array(w);for(var A=0,M=b[0];M<b[1]+T/2;A++,M+=T){var S=k(M);y.density[A]={v:S,t:M},d=Math.max(d,S)}}v=Math.max(v,m.length),h=Math.min(h,b[0]),p=Math.max(p,b[1])}var E=o.findExtremes(f,[h,p],{padded:!0});if(n._extremes[f._id]=E,n.width)i[0].t.maxKDE=d;else{var L=c._violinScaleGroupStats,C=n.scalegroup,O=L[C];O?(O.maxKDE=Math.max(O.maxKDE,d),O.maxCount=Math.max(O.maxCount,v)):L[C]={maxKDE:d,maxCount:v}}return i[0].t.labels.kde=a._(r,"kde:"),i}},86403:function(r,n,i){"use strict";var a=i(37188).setPositionOffset,o=["v","h"];r.exports=function(r,n){for(var i=r.calcdata,s=n.xaxis,l=n.yaxis,u=0;u<o.length;u++){for(var c=o[u],f="h"===c?l:s,h=[],p=0;p<i.length;p++){var d=i[p],v=d[0].t,g=d[0].trace;!0!==g.visible||"violin"!==g.type||v.empty||g.orientation!==c||g.xaxis!==s._id||g.yaxis!==l._id||h.push(p)}a("violin",r,h,f)}}},15899:function(r,n,i){"use strict";var a=i(71828),o=i(7901),s=i(36411),l=i(68875);r.exports=function(r,n,i,u){function c(i,o){return a.coerce(r,n,l,i,o)}function f(i,o){return a.coerce2(r,n,l,i,o)}if(s.handleSampleDefaults(r,n,c,u),!1!==n.visible){c("bandwidth"),c("side"),c("width")||(c("scalegroup",n.name),c("scalemode")),Array.isArray(c("span"))&&(h="manual"),c("spanmode",h);var h,p=c("line.color",(r.marker||{}).color||i),d=c("line.width"),v=c("fillcolor",o.addOpacity(n.line.color,.5));s.handlePointsDefaults(r,n,c,{prefix:""});var g=f("box.width"),y=f("box.fillcolor",v),m=f("box.line.color",p),x=f("box.line.width",d);c("box.visible",!!(g||y||m||x))||(n.box={visible:!1});var b=f("meanline.color",p),_=f("meanline.width",d);c("meanline.visible",!!(b||_))||(n.meanline={visible:!1}),c("quartilemethod")}}},60168:function(r,n,i){"use strict";var a=i(71828);n.makeKDE=function(r,n,i){var a=i.length,o=r.bandwidth,s=1/(a*o);return function(r){for(var n,l=0,u=0;u<a;u++)l+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*(n=(r-i[u])/o)*n);return s*l}},n.getPositionOnKdePath=function(r,n,i){"h"===n.orientation?(o="y",s="x"):(o="x",s="y");var o,s,l=a.findPointOnPath(r.path,i,s,{pathLength:r.pathLength}),u=r.posCenterPx,c=l[o];return[c,"both"===n.side?2*u-c:u]},n.getKdeValue=function(r,i,a){var o=r.pts.map(n.extractVal);return n.makeKDE(r,i,o)(a)/r.posDensityScale},n.extractVal=function(r){return r.v}},57634:function(r,n,i){"use strict";var a=i(7901),o=i(71828),s=i(89298),l=i(41868),u=i(60168);r.exports=function(r,n,i,c,f){f||(f={});var h,p,d=f.hoverLayer,v=r.cd,g=v[0].trace,y=g.hoveron,m=-1!==y.indexOf("violins"),x=-1!==y.indexOf("kde"),b=[];if(m||x){var _=l.hoverOnBoxes(r,n,i,c);if(x&&_.length>0){var w,T,k,A,M,S=r.xa,E=r.ya;"h"===g.orientation?(M=n,w="y",k=E,T="x",A=S):(M=i,w="x",k=S,T="y",A=E);var L=v[r.index];if(M>=L.span[0]&&M<=L.span[1]){var C=o.extendFlat({},r),O=A.c2p(M,!0),P=u.getKdeValue(L,g,M),I=u.getPositionOnKdePath(L,g,O),D=k._offset,z=k._length;C[w+"0"]=I[0],C[w+"1"]=I[1],C[T+"0"]=C[T+"1"]=O,C[T+"Label"]=T+": "+s.hoverLabelText(A,M,g[T+"hoverformat"])+", "+v[0].t.labels.kde+" "+P.toFixed(3);for(var R=0,F=0;F<_.length;F++)if("med"===_[F].attr){R=F;break}C.spikeDistance=_[R].spikeDistance;var B=w+"Spike";C[B]=_[R][B],_[R].spikeDistance=void 0,_[R][B]=void 0,C.hovertemplate=!1,b.push(C),(p={})[w+"1"]=o.constrain(D+I[0],D,D+z),p[w+"2"]=o.constrain(D+I[1],D,D+z),p[T+"1"]=p[T+"2"]=A._offset+O}}m&&(b=b.concat(_))}-1!==y.indexOf("points")&&(h=l.hoverOnPoints(r,n,i));var N=d.selectAll(".violinline-"+g.uid).data(p?[0]:[]);return N.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),N.exit().remove(),N.attr(p).call(a.stroke,r.color),"closest"===c?h?[h]:b:(h&&b.push(h),b)}},47462:function(r,n,i){"use strict";r.exports={attributes:i(68875),layoutAttributes:i(9228),supplyDefaults:i(15899),crossTraceDefaults:i(36411).crossTraceDefaults,supplyLayoutDefaults:i(33598),calc:i(38603),crossTraceCalc:i(86403),plot:i(28443),style:i(31847),styleOnSelect:i(16296).styleOnSelect,hoverPoints:i(57634),selectPoints:i(24626),moduleType:"trace",name:"violin",basePlotModule:i(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(r,n,i){"use strict";var a=i(40094),o=i(71828).extendFlat;r.exports={violinmode:o({},a.boxmode,{}),violingap:o({},a.boxgap,{}),violingroupgap:o({},a.boxgroupgap,{})}},33598:function(r,n,i){"use strict";var a=i(71828),o=i(9228),s=i(4199);r.exports=function(r,n,i){s._supply(r,n,i,function(i,s){return a.coerce(r,n,o,i,s)},"violin")}},28443:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(86047),u=i(34621),c=i(60168);r.exports=function(r,n,i,f){var h=r._context.staticPlot,p=r._fullLayout,d=n.xaxis,v=n.yaxis;function g(r,n){var i=u(r,{xaxis:d,yaxis:v,trace:n,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return s.smoothopen(i[0],1)}o.makeTraceGroups(f,i,"trace violins").each(function(r){var i=a.select(this),s=r[0],u=s.t,f=s.trace;if(!0!==f.visible||u.empty)i.remove();else{var y=u.bPos,m=u.bdPos,x=n[u.valLetter+"axis"],b=n[u.posLetter+"axis"],_="both"===f.side,w=_||"positive"===f.side,T=_||"negative"===f.side,k=i.selectAll("path.violin").data(o.identity);k.enter().append("path").style("vector-effect",h?"none":"non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(r){var n,i,o,s,l,c,h,d,v=a.select(this),k=r.density,A=k.length,M=b.c2l(r.pos+y,!0),S=b.l2p(M);if(f.width)n=u.maxKDE/m;else{var E=p._violinScaleGroupStats[f.scalegroup];n="count"===f.scalemode?E.maxKDE/m*(E.maxCount/r.pts.length):E.maxKDE/m}if(w){for(h=Array(A),l=0;l<A;l++)(d=h[l]={})[u.posLetter]=M+k[l].v/n,d[u.valLetter]=x.c2l(k[l].t,!0);i=g(h,f)}if(T){for(h=Array(A),c=0,l=A-1;c<A;c++,l--)(d=h[c]={})[u.posLetter]=M-k[l].v/n,d[u.valLetter]=x.c2l(k[l].t,!0);o=g(h,f)}if(_)s=i+"L"+o.substr(1)+"Z";else{var L=[S,x.c2p(k[0].t)],C=[S,x.c2p(k[A-1].t)];"h"===f.orientation&&(L.reverse(),C.reverse()),s=w?"M"+L+"L"+i.substr(1)+"L"+C:"M"+C+"L"+o.substr(1)+"L"+L}v.attr("d",s),r.posCenterPx=S,r.posDensityScale=n*m,r.path=v.node(),r.pathLength=r.path.getTotalLength()/(_?2:1)});var A,M,S,E=f.box,L=E.width,C=(E.line||{}).width;_?(A=m*L,M=0):w?(A=[0,m*L/2],M=C*({x:1,y:-1})[u.posLetter]):(A=[m*L/2,0],M=C*({x:-1,y:1})[u.posLetter]),l.plotBoxAndWhiskers(i,{pos:b,val:x},f,{bPos:y,bdPos:A,bPosPxOffset:M}),l.plotBoxMean(i,{pos:b,val:x},f,{bPos:y,bdPos:A,bPosPxOffset:M}),!f.box.visible&&f.meanline.visible&&(S=o.identity);var O=i.selectAll("path.meanline").data(S||[]);O.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",h?"none":"non-scaling-stroke"),O.exit().remove(),O.each(function(r){var n=x.c2p(r.mean,!0),i=c.getPositionOnKdePath(r,f,n);a.select(this).attr("d","h"===f.orientation?"M"+n+","+i[0]+"V"+i[1]:"M"+i[0]+","+n+"H"+i[1])}),l.plotPoints(i,{x:d,y:v},f,u)}})}},31847:function(r,n,i){"use strict";var a=i(39898),o=i(7901),s=i(16296).stylePoints;r.exports=function(r){var n=a.select(r).selectAll("g.trace.violins");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(n){var i=n[0].trace,l=a.select(this),u=i.box||{},c=u.line||{},f=i.meanline||{},h=f.width;l.selectAll("path.violin").style("stroke-width",i.line.width+"px").call(o.stroke,i.line.color).call(o.fill,i.fillcolor),l.selectAll("path.box").style("stroke-width",c.width+"px").call(o.stroke,c.color).call(o.fill,u.fillcolor);var p={"stroke-width":h+"px","stroke-dasharray":2*h+"px,"+h+"px"};l.selectAll("path.mean").style(p).call(o.stroke,f.color),l.selectAll("path.meanline").style(p).call(o.stroke,f.color),s(l,i,r)})}},16336:function(r,n,i){"use strict";var a=i(50693),o=i(16249),s=i(54532),l=i(9012),u=i(1426).extendFlat,c=i(30962).overrideAll,f=r.exports=c(u({x:o.x,y:o.y,z:o.z,value:o.value,isomin:o.isomin,isomax:o.isomax,surface:o.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:o.slices,caps:o.caps,text:o.text,hovertext:o.hovertext,xhoverformat:o.xhoverformat,yhoverformat:o.yhoverformat,zhoverformat:o.zhoverformat,valuehoverformat:o.valuehoverformat,hovertemplate:o.hovertemplate},a("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:o.colorbar,opacity:o.opacity,opacityscale:s.opacityscale,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:u({},l.hoverinfo),showlegend:u({},l.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},64809:function(r,n,i){"use strict";var a=i(9330).gl_mesh3d,o=i(81697).parseColorScale,s=i(71828).isArrayOrTypedArray,l=i(78614),u=i(21081).extractOpts,c=i(90060),f=i(22674).findNearestOnAxis,h=i(22674).generateIsoMeshes;function p(r,n,i){this.scene=r,this.uid=i,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var d=p.prototype;d.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,i=this.data._meshX[n],a=this.data._meshY[n],o=this.data._meshZ[n],l=this.data._Ys.length,u=this.data._Zs.length,c=f(i,this.data._Xs).id,h=f(a,this.data._Ys).id,p=f(o,this.data._Zs).id,d=r.index=p+u*h+u*l*c;r.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var v=this.data.hovertext||this.data.text;return s(v)&&void 0!==v[d]?r.textLabel=v[d]:v&&(r.textLabel=v),!0}},d.update=function(r){var n=this.scene,i=n.fullSceneLayout;function a(r,n,i,a){return n.map(function(n){return r.d2l(n,0,a)*i})}this.data=h(r);var s={positions:c(a(i.xaxis,r._meshX,n.dataScale[0],r.xcalendar),a(i.yaxis,r._meshY,n.dataScale[1],r.ycalendar),a(i.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:c(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},f=u(r);s.vertexIntensity=r._meshIntensity,s.vertexIntensityBounds=[f.min,f.max],s.colormap=o(r),this.mesh.update(s)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},r.exports=function(r,n){var i=a({gl:r.glplot.gl}),o=new p(r,i,n.uid);return i._trace=o,o.update(n),r.glplot.add(i),o}},47651:function(r,n,i){"use strict";var a=i(71828),o=i(16336),s=i(82738).supplyIsoDefaults,l=i(91831).opacityscaleDefaults;r.exports=function(r,n,i,u){function c(i,s){return a.coerce(r,n,o,i,s)}s(r,n,i,u,c),l(r,n,u,c)}},17659:function(r,n,i){"use strict";r.exports={attributes:i(16336),supplyDefaults:i(47651),calc:i(56959),colorbar:{min:"cmin",max:"cmax"},plot:i(64809),moduleType:"trace",name:"volume",basePlotModule:i(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(r,n,i){"use strict";var a=i(1486),o=i(82196).line,s=i(9012),l=i(12663).axisHoverFormat,u=i(5386).fF,c=i(5386).si,f=i(48334),h=i(1426).extendFlat,p=i(7901);function d(r){return{marker:{color:h({},a.marker.color,{arrayOk:!1,editType:"style"}),line:{color:h({},a.marker.line.color,{arrayOk:!1,editType:"style"}),width:h({},a.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}r.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),hovertext:a.hovertext,hovertemplate:u({},{keys:f.eventDataKeys}),hoverinfo:h({},s.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:c({editType:"plot"},{keys:f.eventDataKeys.concat(["label"])}),text:a.text,textposition:a.textposition,insidetextanchor:a.insidetextanchor,textangle:a.textangle,textfont:a.textfont,insidetextfont:a.insidetextfont,outsidetextfont:a.outsidetextfont,constraintext:a.constraintext,cliponaxis:a.cliponaxis,orientation:a.orientation,offset:a.offset,width:a.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:h({},o.color,{dflt:p.defaultLine}),width:h({},o.width,{editType:"plot"}),dash:o.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup}},52752:function(r,n,i){"use strict";var a=i(89298),o=i(42973),s=i(71828).mergeArray,l=i(66279),u=i(50606).BADNUM;function c(r){return"a"===r||"absolute"===r}function f(r){return"t"===r||"total"===r}r.exports=function(r,n){var i,h,p,d,v,g,y=a.getFromId(r,n.xaxis||"x"),m=a.getFromId(r,n.yaxis||"y");"h"===n.orientation?(i=y.makeCalcdata(n,"x"),p=m.makeCalcdata(n,"y"),d=o(n,m,"y",p),v=!!n.yperiodalignment,g="y"):(i=m.makeCalcdata(n,"y"),p=y.makeCalcdata(n,"x"),d=o(n,y,"x",p),v=!!n.xperiodalignment,g="x"),h=d.vals;for(var x,b=Math.min(h.length,i.length),_=Array(b),w=0,T=!1,k=0;k<b;k++){var A=i[k]||0,M=!1;(i[k]!==u||f(n.measure[k])||c(n.measure[k]))&&k+1<b&&(i[k+1]!==u||f(n.measure[k+1])||c(n.measure[k+1]))&&(M=!0);var S=_[k]={i:k,p:h[k],s:A,rawS:A,cNext:M};c(n.measure[k])?(w=S.s,S.isSum=!0,S.dir="totals",S.s=w):f(n.measure[k])?(S.isSum=!0,S.dir="totals",S.s=w):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",x=S.s,S.s=w+x,w+=x),"totals"===S.dir&&(T=!0),v&&(_[k].orig_p=p[k],_[k][g+"End"]=d.ends[k],_[k][g+"Start"]=d.starts[k]),n.ids&&(S.id=String(n.ids[k])),S.v=(n.base||0)+w}return _.length&&(_[0].hasTotals=T),s(n.text,_,"tx"),s(n.hovertext,_,"htx"),l(_,n),_}},48334:function(r){"use strict";r.exports={eventDataKeys:["initial","delta","final"]}},70766:function(r,n,i){"use strict";var a=i(11661).setGroupPositions;r.exports=function(r,n){var i,o,s=r._fullLayout,l=r._fullData,u=r.calcdata,c=n.xaxis,f=n.yaxis,h=[],p=[],d=[];for(o=0;o<l.length;o++){var v=l[o];!0===v.visible&&v.xaxis===c._id&&v.yaxis===f._id&&"waterfall"===v.type&&(i=u[o],"h"===v.orientation?d.push(i):p.push(i),h.push(i))}var g={mode:s.waterfallmode,norm:s.waterfallnorm,gap:s.waterfallgap,groupgap:s.waterfallgroupgap};for(a(r,c,f,p,g),a(r,f,c,d,g),o=0;o<h.length;o++){i=h[o];for(var y=0;y<i.length;y++){var m=i[y];!1===m.isSum&&(m.s0+=0===y?0:i[y-1].s),y+1<i.length&&(i[y].nextP0=i[y+1].p0,i[y].nextS0=i[y+1].s0)}}}},83266:function(r,n,i){"use strict";var a=i(71828),o=i(26125),s=i(90769).handleText,l=i(67513),u=i(73927),c=i(43037),f=i(7901),h=i(22372),p=h.INCREASING.COLOR,d=h.DECREASING.COLOR;function v(r,n,i){r(n+".marker.color",i),r(n+".marker.line.color",f.defaultLine),r(n+".marker.line.width")}r.exports={supplyDefaults:function(r,n,i,o){function f(i,o){return a.coerce(r,n,c,i,o)}if(l(r,n,o,f)){u(r,n,o,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",n.x&&!n.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var h=f("textposition");s(r,n,o,f,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==n.textposition&&(f("texttemplate"),n.texttemplate||f("textinfo")),v(f,"increasing",p),v(f,"decreasing",d),v(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else n.visible=!1},crossTraceDefaults:function(r,n){var i;function s(r){return a.coerce(i._input,i,c,r)}if("group"===n.waterfallmode)for(var l=0;l<r.length;l++)o((i=r[l])._input,i,n,s)}}},58593:function(r){"use strict";r.exports=function(r,n){return r.x="xVal"in n?n.xVal:n.x,r.y="yVal"in n?n.yVal:n.y,"initial"in n&&(r.initial=n.initial),"delta"in n&&(r.delta=n.delta),"final"in n&&(r.final=n.final),n.xa&&(r.xaxis=n.xa),n.ya&&(r.yaxis=n.ya),r}},61326:function(r,n,i){"use strict";var a=i(89298).hoverLabelText,o=i(7901).opacity,s=i(95423).hoverOnBars,l=i(22372),u=l.INCREASING.SYMBOL,c=l.DECREASING.SYMBOL;r.exports=function(r,n,i,l,f){var h=s(r,n,i,l,f);if(h){var p,d,v,g,y=h.cd,m=y[0].trace,x="h"===m.orientation,b=x?"x":"y",_=x?r.xa:r.ya,w=y[h.index],T=w.isSum?w.b+w.s:w.rawS;h.initial=w.b+w.s-T,h.delta=T,h.final=h.initial+h.delta;var k=C(Math.abs(h.delta));h.deltaLabel=T<0?"("+k+")":k,h.finalLabel=C(h.final),h.initialLabel=C(h.initial);var A=w.hi||m.hoverinfo,M=[];if(A&&"none"!==A&&"skip"!==A){var S="all"===A,E=A.split("+"),L=function(r){return S||-1!==E.indexOf(r)};w.isSum||(!L("final")||L(x?"x":"y")||M.push(h.finalLabel),L("delta")&&(T<0?M.push(h.deltaLabel+" "+c):M.push(h.deltaLabel+" "+u)),L("initial")&&M.push("Initial: "+h.initialLabel))}return M.length&&(h.extraText=M.join("<br>")),h.color=(d=(p=m[w.dir].marker).color,v=p.line.color,g=p.line.width,o(d)?d:o(v)&&g?v:void 0),[h]}function C(r){return a(_,r,m[b+"hoverformat"])}}},19990:function(r,n,i){"use strict";r.exports={attributes:i(43037),layoutAttributes:i(13494),supplyDefaults:i(83266).supplyDefaults,crossTraceDefaults:i(83266).crossTraceDefaults,supplyLayoutDefaults:i(5176),calc:i(52752),crossTraceCalc:i(70766),plot:i(30436),style:i(55750).style,hoverPoints:i(61326),eventData:i(58593),selectPoints:i(81974),moduleType:"trace",name:"waterfall",basePlotModule:i(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(r){"use strict";r.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(r,n,i){"use strict";var a=i(71828),o=i(13494);r.exports=function(r,n,i){var s=!1;function l(i,s){return a.coerce(r,n,o,i,s)}for(var u=0;u<i.length;u++){var c=i[u];if(c.visible&&"waterfall"===c.type){s=!0;break}}s&&(l("waterfallmode"),l("waterfallgap",.2),l("waterfallgroupgap"))}},30436:function(r,n,i){"use strict";var a=i(39898),o=i(71828),s=i(91424),l=i(50606).BADNUM,u=i(17295),c=i(72597).clearMinTextSize;r.exports=function(r,n,i,f){var h=r._fullLayout;c("waterfall",h),u.plot(r,n,i,f,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),function(r,n,i,u){var c=n.xaxis,f=n.yaxis;o.makeTraceGroups(u,i,"trace bars").each(function(i){var u=a.select(this),h=i[0].trace,p=o.ensureSingle(u,"g","lines");if(h.connector&&h.connector.visible){var d="h"===h.orientation,v=h.connector.mode,g=p.selectAll("g.line").data(o.identity);g.enter().append("g").classed("line",!0),g.exit().remove();var y=g.size();g.each(function(i,u){if(u===y-1||i.cNext){var h,p,g,m,x=(h=[],p=[],g=d?c:f,m=d?f:c,h[0]=g.c2p(i.s0,!0),p[0]=m.c2p(i.p0,!0),h[1]=g.c2p(i.s1,!0),p[1]=m.c2p(i.p1,!0),h[2]=g.c2p(i.nextS0,!0),p[2]=m.c2p(i.nextP0,!0),d?[h,p]:[p,h]),b=x[0],_=x[1],w="";b[0]!==l&&_[0]!==l&&b[1]!==l&&_[1]!==l&&("spanning"===v&&!i.isSum&&u>0&&(w+=d?"M"+b[0]+","+_[1]+"V"+_[0]:"M"+b[1]+","+_[0]+"H"+b[0]),"between"!==v&&(i.isSum||u<y-1)&&(w+=d?"M"+b[1]+","+_[0]+"V"+_[1]:"M"+b[0]+","+_[1]+"H"+b[1]),b[2]!==l&&_[2]!==l&&(w+=d?"M"+b[1]+","+_[1]+"V"+_[2]:"M"+b[1]+","+_[1]+"H"+b[2])),""===w&&(w="M0,0Z"),o.ensureSingle(a.select(this),"path").attr("d",w).call(s.setClipUrl,n.layerClipId,r)}})}else p.remove()})}(r,n,i,f)}},55750:function(r,n,i){"use strict";var a=i(39898),o=i(91424),s=i(7901),l=i(37822).DESELECTDIM,u=i(16688),c=i(72597).resizeText,f=u.styleTextPoints;r.exports={style:function(r,n,i){var u=i||a.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");c(r,u,"waterfall"),u.style("opacity",function(r){return r[0].trace.opacity}),u.each(function(n){var i=a.select(this),u=n[0].trace;i.selectAll(".point > path").each(function(r){if(!r.isBlank){var n=u[r.dir].marker;a.select(this).call(s.fill,n.color).call(s.stroke,n.line.color).call(o.dashLine,n.line.dash,n.line.width).style("opacity",u.selectedpoints&&!r.selected?l:1)}}),f(i,u,r),i.selectAll(".lines").each(function(){var r=u.connector.line;o.lineGroupStyle(a.select(this).selectAll("path"),r.width,r.color,r.dash)})})}}},82887:function(r,n,i){"use strict";var a=i(89298),o=i(71828),s=i(86281),l=i(79344).p,u=i(50606).BADNUM;n.moduleType="transform",n.name="aggregate";var c=n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},f=c.aggregations;function h(r,n,i,s){if(s.enabled){for(var l=s.target,c=o.nestedProperty(n,l),f=c.get(),h=function(r,n){var i=r.func,a=n.d2c,s=n.c2d;switch(i){case"count":return p;case"first":return d;case"last":return v;case"sum":return function(r,n){for(var i=0,o=0;o<n.length;o++){var l=a(r[n[o]]);l!==u&&(i+=l)}return s(i)};case"avg":return function(r,n){for(var i=0,o=0,l=0;l<n.length;l++){var c=a(r[n[l]]);c!==u&&(i+=c,o++)}return o?s(i/o):u};case"min":return function(r,n){for(var i=1/0,o=0;o<n.length;o++){var l=a(r[n[o]]);l!==u&&(i=Math.min(i,l))}return i===1/0?u:s(i)};case"max":return function(r,n){for(var i=-1/0,o=0;o<n.length;o++){var l=a(r[n[o]]);l!==u&&(i=Math.max(i,l))}return i===-1/0?u:s(i)};case"range":return function(r,n){for(var i=1/0,o=-1/0,l=0;l<n.length;l++){var c=a(r[n[l]]);c!==u&&(i=Math.min(i,c),o=Math.max(o,c))}return o===-1/0||i===1/0?u:s(o-i)};case"change":return function(r,n){var i=a(r[n[0]]),o=a(r[n[n.length-1]]);return i===u||o===u?u:s(o-i)};case"median":return function(r,n){for(var i=[],l=0;l<n.length;l++){var c=a(r[n[l]]);c!==u&&i.push(c)}if(!i.length)return u;i.sort(o.sorterAsc);var f=(i.length-1)/2;return s((i[Math.floor(f)]+i[Math.ceil(f)])/2)};case"mode":return function(r,n){for(var i={},o=0,l=u,c=0;c<n.length;c++){var f=a(r[n[c]]);if(f!==u){var h=i[f]=(i[f]||0)+1;h>o&&(o=h,l=f)}}return o?s(l):u};case"rms":return function(r,n){for(var i=0,o=0,l=0;l<n.length;l++){var c=a(r[n[l]]);c!==u&&(i+=c*c,o++)}return o?s(Math.sqrt(i/o)):u};case"stddev":return function(n,i){var o,s=0,l=0,c=1,f=u;for(o=0;o<i.length&&f===u;o++)f=a(n[i[o]]);if(f===u)return u;for(;o<i.length;o++){var h=a(n[i[o]]);if(h!==u){var p=h-f;s+=p,l+=p*p,c++}}var d="sample"===r.funcmode?c-1:c;return d?Math.sqrt((l-s*s/c)/d):0}}}(s,a.getDataConversions(r,n,l,f)),g=Array(i.length),y=0;y<i.length;y++)g[y]=h(f,i[y]);c.set(g),"count"===s.func&&o.pushUnique(n._arrayAttrs,l)}}function p(r,n){return n.length}function d(r,n){return r[n[0]]}function v(r,n){return r[n[n.length-1]]}n.supplyDefaults=function(r,n){var i,a={};function l(n,i){return o.coerce(r,a,c,n,i)}if(!l("enabled"))return a;var u=s.findArrayAttributes(n),h={};for(i=0;i<u.length;i++)h[u[i]]=1;var p=l("groups");if(!Array.isArray(p)){if(!h[p])return a.enabled=!1,a;h[p]=0}var d,v=r.aggregations||[],g=a.aggregations=Array(v.length);function y(r,n){return o.coerce(v[i],d,f,r,n)}for(i=0;i<v.length;i++){d={_index:i};var m=y("target"),x=y("func");y("enabled")&&m&&(h[m]||"count"===x&&void 0===h[m])?("stddev"===x&&y("funcmode"),h[m]=0,g[i]=d):g[i]={enabled:!1,_index:i}}for(i=0;i<u.length;i++)h[u[i]]&&g.push({target:u[i],func:f.func.dflt,enabled:!0,_index:-1});return a},n.calcTransform=function(r,n,i){if(i.enabled){var a=i.groups,s=o.getTargetArray(n,{target:a});if(s){var u,c,f,p,d={},v={},g=[],y=l(n.transforms,i),m=s.length;for(n._length&&(m=Math.min(m,n._length)),u=0;u<m;u++)void 0===(f=d[c=s[u]])?(d[c]=g.length,p=[u],g.push(p),v[d[c]]=y(u)):(g[f].push(u),v[d[c]]=(v[d[c]]||[]).concat(y(u)));i._indexToPoints=v;var x=i.aggregations;for(u=0;u<x.length;u++)h(r,n,g,x[u]);"string"==typeof a&&h(r,n,g,{target:a,func:"first",enabled:!0}),n._length=g.length}}}},14382:function(r,n,i){"use strict";var a=i(71828),o=i(73972),s=i(89298),l=i(79344).p,u=i(74808),c=u.COMPARISON_OPS,f=u.INTERVAL_OPS,h=u.SET_OPS;n.moduleType="transform",n.name="filter",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(c).concat(f).concat(h),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},n.supplyDefaults=function(r){var i={};function s(o,s){return a.coerce(r,i,n.attributes,o,s)}if(s("enabled")){var l=s("target");if(a.isArrayOrTypedArray(l)&&0===l.length)return i.enabled=!1,i;s("preservegaps"),s("operation"),s("value");var u=o.getComponentMethod("calendars","handleDefaults");u(r,i,"valuecalendar",null),u(r,i,"targetcalendar",null)}return i},n.calcTransform=function(r,n,i){if(i.enabled){var o=a.getTargetArray(n,i);if(o){var u=i.target,p=o.length;n._length&&(p=Math.min(p,n._length));var d=i.targetcalendar,v=n._arrayAttrs,g=i.preservegaps;if("string"==typeof u){var y=a.nestedProperty(n,u+"calendar").get();y&&(d=y)}var m,x,b=function(r,n,i){var o=r.operation,s=r.value,l=a.isArrayOrTypedArray(s);function u(r){return -1!==r.indexOf(o)}var p,d=function(i){return n(i,0,r.valuecalendar)},v=function(r){return n(r,0,i)};switch(u(c)?p=d(l?s[0]:s):u(f)?p=l?[d(s[0]),d(s[1])]:[d(s),d(s)]:u(h)&&(p=l?s.map(d):[d(s)]),o){case"=":return function(r){return v(r)===p};case"!=":return function(r){return v(r)!==p};case"<":return function(r){return v(r)<p};case"<=":return function(r){return v(r)<=p};case">":return function(r){return v(r)>p};case">=":return function(r){return v(r)>=p};case"[]":return function(r){var n=v(r);return n>=p[0]&&n<=p[1]};case"()":return function(r){var n=v(r);return n>p[0]&&n<p[1]};case"[)":return function(r){var n=v(r);return n>=p[0]&&n<p[1]};case"(]":return function(r){var n=v(r);return n>p[0]&&n<=p[1]};case"][":return function(r){var n=v(r);return n<=p[0]||n>=p[1]};case")(":return function(r){var n=v(r);return n<p[0]||n>p[1]};case"](":return function(r){var n=v(r);return n<=p[0]||n>p[1]};case")[":return function(r){var n=v(r);return n<p[0]||n>=p[1]};case"{}":return function(r){return -1!==p.indexOf(v(r))};case"}{":return function(r){return -1===p.indexOf(v(r))}}}(i,s.getDataToCoordFunc(r,n,u,o),d),_={},w={},T=0;g?(m=function(r){_[r.astr]=a.extendDeep([],r.get()),r.set(Array(p))},x=function(r,n){var i=_[r.astr][n];r.get()[n]=i}):(m=function(r){_[r.astr]=a.extendDeep([],r.get()),r.set([])},x=function(r,n){var i=_[r.astr][n];r.get().push(i)}),M(m);for(var k=l(n.transforms,i),A=0;A<p;A++)b(o[A])?(M(x,A),w[T++]=k(A)):g&&T++;i._indexToPoints=w,n._length=T}}function M(r,i){for(var o=0;o<v.length;o++)r(a.nestedProperty(n,v[o]),i)}}},43102:function(r,n,i){"use strict";var a=i(71828),o=i(86281),s=i(74875),l=i(79344).p;n.moduleType="transform",n.name="groupby",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},n.supplyDefaults=function(r,i,o){var s,l={};function u(i,o){return a.coerce(r,l,n.attributes,i,o)}if(!u("enabled"))return l;u("groups"),u("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var c=r.styles,f=l.styles=[];if(c)for(s=0;s<c.length;s++){var h=f[s]={};a.coerce(c[s],f[s],n.attributes.styles,"target");var p=a.coerce(c[s],f[s],n.attributes.styles,"value");a.isPlainObject(p)?h.value=a.extendDeep({},p):p&&delete h.value}return l},n.transform=function(r,n){var i,u,c,f=[];for(u=0;u<r.length;u++)for(i=function(r,n){var i,u,c,f,h,p,d,v,g,y,m=n.transform,x=n.transformIndex,b=r.transforms[x].groups,_=l(r.transforms,m);if(!a.isArrayOrTypedArray(b)||0===b.length)return[r];var w=a.filterUnique(b),T=Array(w.length),k=b.length,A=o.findArrayAttributes(r),M=m.styles||[],S={};for(i=0;i<M.length;i++)S[M[i].target]=M[i].value;m.styles&&(y=a.keyedContainer(m,"styles","target","value.name"));var E={},L={};for(i=0;i<w.length;i++){E[p=w[i]]=i,L[p]=0,(d=T[i]=a.extendDeepNoArrays({},r))._group=p,d.transforms[x]._indexToPoints={};var C=null;for(y&&(C=y.get(p)),d.name=C||""===C?C:a.templateString(m.nameformat,{trace:r.name,group:p}),v=d.transforms,d.transforms=[],u=0;u<v.length;u++)d.transforms[u]=a.extendDeepNoArrays({},v[u]);for(u=0;u<A.length;u++)a.nestedProperty(d,A[u]).set([])}for(c=0;c<A.length;c++){for(f=A[c],u=0,g=[];u<w.length;u++)g[u]=a.nestedProperty(T[u],f).get();for(h=a.nestedProperty(r,f).get(),u=0;u<k;u++)g[E[b[u]]].push(h[u])}for(u=0;u<k;u++)(d=T[E[b[u]]]).transforms[x]._indexToPoints[L[b[u]]]=_(u),L[b[u]]++;for(i=0;i<w.length;i++)p=w[i],d=T[i],s.clearExpandedTraceDefaultColors(d),d=a.extendDeepNoArrays(d,S[p]||{});return T}(r[u],n),c=0;c<i.length;c++)f.push(i[c]);return f}},79344:function(r,n){"use strict";n.p=function(r,n){for(var i,a,o=0;o<r.length&&(i=r[o])!==n;o++)i._indexToPoints&&!1!==i.enabled&&(a=i._indexToPoints);return a?function(r){return a[r]}:function(r){return[r]}}},32275:function(r,n,i){"use strict";var a=i(71828),o=i(89298),s=i(79344).p,l=i(50606).BADNUM;n.moduleType="transform",n.name="sort",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},n.supplyDefaults=function(r){var i={};function o(o,s){return a.coerce(r,i,n.attributes,o,s)}return o("enabled")&&(o("target"),o("order")),i},n.calcTransform=function(r,n,i){if(i.enabled){var u=a.getTargetArray(n,i);if(u){var c=i.target,f=u.length;n._length&&(f=Math.min(f,n._length));var h,p,d=n._arrayAttrs,v=function(r,n,i,a){var o,s=Array(a),u=Array(a);for(o=0;o<a;o++)s[o]={v:n[o],i:o};for(s.sort(function(r,n){switch(r.order){case"ascending":return function(r,i){var a=n(r.v),o=n(i.v);return a===l?1:o===l?-1:a-o};case"descending":return function(r,i){var a=n(r.v),o=n(i.v);return a===l?1:o===l?-1:o-a}}}(r,i)),o=0;o<a;o++)u[o]=s[o].i;return u}(i,u,o.getDataToCoordFunc(r,n,c,u),f),g=s(n.transforms,i),y={};for(h=0;h<d.length;h++){var m=a.nestedProperty(n,d[h]),x=m.get(),b=Array(f);for(p=0;p<f;p++)b[p]=x[v[p]];m.set(b)}for(p=0;p<f;p++)y[p]=g(v[p]);i._indexToPoints=y,n._length=f}}}},11506:function(r,n){"use strict";n.version="2.28.0"},9330:function(r,n,i){var a,s=i(90386);self,a=function(){return function(){var r={7386:function(r,n,i){r.exports={alpha_shape:i(2350),convex_hull:i(5537),delaunay_triangulate:i(4419),gl_cone3d:i(1140),gl_error3d:i(3110),gl_heatmap2d:i(6386),gl_line3d:i(6086),gl_mesh3d:i(8116),gl_plot2d:i(2117),gl_plot3d:i(1059),gl_pointcloud2d:i(8271),gl_scatter3d:i(2182),gl_select_box:i(6623),gl_spikes2d:i(3050),gl_streamtube3d:i(7307),gl_surface3d:i(3754),ndarray:i(5050),ndarray_linear_interpolate:i(3581)}},2146:function(r,n,i){"use strict";function a(r,n){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r})(r,n)}function o(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function s(r){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function l(r){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var u=i(3910),c=i(3187),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function h(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');var n=new Uint8Array(r);return Object.setPrototypeOf(n,p.prototype),n}function p(r,n,i){if("number"==typeof r){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return g(r)}return d(r,n,i)}function d(r,n,i){if("string"==typeof r)return function(r,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw TypeError("Unknown encoding: "+n);var i=0|b(r,n),a=h(i),o=a.write(r,n);return o!==i&&(a=a.slice(0,o)),a}(r,n);if(ArrayBuffer.isView(r))return function(r){if(q(r,Uint8Array)){var n=new Uint8Array(r);return m(n.buffer,n.byteOffset,n.byteLength)}return y(r)}(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r));if(q(r,ArrayBuffer)||r&&q(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(r,SharedArrayBuffer)||r&&q(r.buffer,SharedArrayBuffer)))return m(r,n,i);if("number"==typeof r)throw TypeError('The "value" argument must not be of type number. Received type number');var a=r.valueOf&&r.valueOf();if(null!=a&&a!==r)return p.from(a,n,i);var o=function(r){if(p.isBuffer(r)){var n,i=0|x(r.length),a=h(i);return 0===a.length||r.copy(a,0,0,i),a}return void 0!==r.length?"number"!=typeof r.length||(n=r.length)!=n?h(0):y(r):"Buffer"===r.type&&Array.isArray(r.data)?y(r.data):void 0}(r);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return p.from(r[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r))}function v(r){if("number"!=typeof r)throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function g(r){return v(r),h(r<0?0:0|x(r))}function y(r){for(var n=r.length<0?0:0|x(r.length),i=h(n),a=0;a<n;a+=1)i[a]=255&r[a];return i}function m(r,n,i){var a;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),p.prototype),a}function x(r){if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function b(r,n){if(p.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||q(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(r));var i=r.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===i)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return U(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(r).length;default:if(o)return a?-1:U(r).length;n=(""+n).toLowerCase(),o=!0}}function _(r,n,i){var a,o,s=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(n>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return function(r,n,i){var a=r.length;(!n||n<0)&&(n=0),(!i||i<0||i>a)&&(i=a);for(var o="",s=n;s<i;++s)o+=G[r[s]];return o}(this,n,i);case"utf8":case"utf-8":return A(this,n,i);case"ascii":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(127&r[o]);return a}(this,n,i);case"latin1":case"binary":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(r[o]);return a}(this,n,i);case"base64":return a=n,o=i,0===a&&o===this.length?u.fromByteArray(this):u.fromByteArray(this.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(r,n,i){for(var a=r.slice(n,i),o="",s=0;s<a.length-1;s+=2)o+=String.fromCharCode(a[s]+256*a[s+1]);return o}(this,n,i);default:if(s)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),s=!0}}function w(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function T(r,n,i,a,o){var s;if(0===r.length)return -1;if("string"==typeof i?(a=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=o?0:r.length-1),i<0&&(i=r.length+i),i>=r.length){if(o)return -1;i=r.length-1}else if(i<0){if(!o)return -1;i=0}if("string"==typeof n&&(n=p.from(n,a)),p.isBuffer(n))return 0===n.length?-1:k(r,n,i,a,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(r,n,i):Uint8Array.prototype.lastIndexOf.call(r,n,i):k(r,[n],i,a,o);throw TypeError("val must be string, number or Buffer")}function k(r,n,i,a,o){var s,l=1,u=r.length,c=n.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||n.length<2)return -1;l=2,u/=2,c/=2,i/=2}function f(r,n){return 1===l?r[n]:r.readUInt16BE(n*l)}if(o){var h=-1;for(s=i;s<u;s++)if(f(r,s)===f(n,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===c)return h*l}else -1!==h&&(s-=s-h),h=-1}else for(i+c>u&&(i=u-c),s=i;s>=0;s--){for(var p=!0,d=0;d<c;d++)if(f(r,s+d)!==f(n,d)){p=!1;break}if(p)return s}return -1}function A(r,n,i){i=Math.min(r.length,i);for(var a=[],o=n;o<i;){var s=r[o],l=null,u=s>239?4:s>223?3:s>191?2:1;if(o+u<=i){var c=void 0,f=void 0,h=void 0,p=void 0;switch(u){case 1:s<128&&(l=s);break;case 2:128==(192&(c=r[o+1]))&&(p=(31&s)<<6|63&c)>127&&(l=p);break;case 3:c=r[o+1],f=r[o+2],128==(192&c)&&128==(192&f)&&(p=(15&s)<<12|(63&c)<<6|63&f)>2047&&(p<55296||p>57343)&&(l=p);break;case 4:c=r[o+1],f=r[o+2],h=r[o+3],128==(192&c)&&128==(192&f)&&128==(192&h)&&(p=(15&s)<<18|(63&c)<<12|(63&f)<<6|63&h)>65535&&p<1114112&&(l=p)}}null===l?(l=65533,u=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|1023&l),a.push(l),o+=u}return function(r){var n=r.length;if(n<=M)return String.fromCharCode.apply(String,r);for(var i="",a=0;a<n;)i+=String.fromCharCode.apply(String,r.slice(a,a+=M));return i}(a)}n.lW=p,n.h2=50,p.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),42===r.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(r,n,i){return d(r,n,i)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(r,n,i){return v(r),r<=0?h(r):void 0!==n?"string"==typeof i?h(r).fill(n,i):h(r).fill(n):h(r)},p.allocUnsafe=function(r){return g(r)},p.allocUnsafeSlow=function(r){return g(r)},p.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==p.prototype},p.compare=function(r,n){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),q(n,Uint8Array)&&(n=p.from(n,n.offset,n.byteLength)),!p.isBuffer(r)||!p.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;for(var i=r.length,a=n.length,o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0},p.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(r,n){if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return p.alloc(0);if(void 0===n)for(n=0,i=0;i<r.length;++i)n+=r[i].length;var i,a=p.allocUnsafe(n),o=0;for(i=0;i<r.length;++i){var s=r[i];if(q(s,Uint8Array))o+s.length>a.length?(p.isBuffer(s)||(s=p.from(s)),s.copy(a,o)):Uint8Array.prototype.set.call(a,s,o);else{if(!p.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(a,o)}o+=s.length}return a},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)w(this,n,n+1);return this},p.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)w(this,n,n+3),w(this,n+1,n+2);return this},p.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)w(this,n,n+7),w(this,n+1,n+6),w(this,n+2,n+5),w(this,n+3,n+4);return this},p.prototype.toString=function(){var r=this.length;return 0===r?"":0==arguments.length?A(this,0,r):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(r){if(!p.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||0===p.compare(this,r)},p.prototype.inspect=function(){var r="",i=n.h2;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},f&&(p.prototype[f]=p.prototype.inspect),p.prototype.compare=function(r,n,i,a,o){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),!p.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(r));if(void 0===n&&(n=0),void 0===i&&(i=r?r.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),n<0||i>r.length||a<0||o>this.length)throw RangeError("out of range index");if(a>=o&&n>=i)return 0;if(a>=o)return -1;if(n>=i)return 1;if(this===r)return 0;for(var s=(o>>>=0)-(a>>>=0),u=(i>>>=0)-(n>>>=0),c=Math.min(s,u),f=this.slice(a,o),h=r.slice(n,i),d=0;d<c;++d)if(f[d]!==h[d]){s=f[d],u=h[d];break}return s<u?-1:u<s?1:0},p.prototype.includes=function(r,n,i){return -1!==this.indexOf(r,n,i)},p.prototype.indexOf=function(r,n,i){return T(this,r,n,i,!0)},p.prototype.lastIndexOf=function(r,n,i){return T(this,r,n,i,!1)},p.prototype.write=function(r,n,i,a){if(void 0===n)a="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)a=n,i=this.length,n=0;else{if(!isFinite(n))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}var o,s,l,u,c,f,h,p,d=this.length-n;if((void 0===i||i>d)&&(i=d),r.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var v=!1;;)switch(a){case"hex":return function(r,n,i,a){i=Number(i)||0;var o=r.length-i;a?(a=Number(a))>o&&(a=o):a=o;var s,l=n.length;for(a>l/2&&(a=l/2),s=0;s<a;++s){var u=parseInt(n.substr(2*s,2),16);if(u!=u)break;r[i+s]=u}return s}(this,r,n,i);case"utf8":case"utf-8":return o=n,s=i,H(U(r,this.length-o),this,o,s);case"ascii":case"latin1":case"binary":return l=n,u=i,H(function(r){for(var n=[],i=0;i<r.length;++i)n.push(255&r.charCodeAt(i));return n}(r),this,l,u);case"base64":return c=n,f=i,H(V(r),this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=n,p=i,H(function(r,n){for(var i,a,o=[],s=0;s<r.length&&!((n-=2)<0);++s)a=(i=r.charCodeAt(s))>>8,o.push(i%256),o.push(a);return o}(r,this.length-h),this,h,p);default:if(v)throw TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),v=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function S(r,n,i){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>i)throw RangeError("Trying to access beyond buffer length")}function E(r,n,i,a,o,s){if(!p.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw RangeError('"value" argument is out of bounds');if(i+a>r.length)throw RangeError("Index out of range")}function L(r,n,i,a,o){F(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,i}function C(r,n,i,a,o){F(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i+7]=s,s>>=8,r[i+6]=s,s>>=8,r[i+5]=s,s>>=8,r[i+4]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i+3]=l,l>>=8,r[i+2]=l,l>>=8,r[i+1]=l,l>>=8,r[i]=l,i+8}function O(r,n,i,a,o,s){if(i+a>r.length||i<0)throw RangeError("Index out of range")}function P(r,n,i,a,o){return n=+n,i>>>=0,o||O(r,0,i,4),c.write(r,n,i,a,23,4),i+4}function I(r,n,i,a,o){return n=+n,i>>>=0,o||O(r,0,i,8),c.write(r,n,i,a,52,8),i+8}p.prototype.slice=function(r,n){var i=this.length;(r=~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),(n=void 0===n?i:~~n)<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<r&&(n=r);var a=this.subarray(r,n);return Object.setPrototypeOf(a,p.prototype),a},p.prototype.readUintLE=p.prototype.readUIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a},p.prototype.readUintBE=p.prototype.readUIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r+--n],o=1;n>0&&(o*=256);)a+=this[r+--n]*o;return a},p.prototype.readUint8=p.prototype.readUInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),this[r]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]|this[r+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]<<8|this[r+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},p.prototype.readBigUInt64LE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=n+256*this[++r]+65536*this[++r]+16777216*this[++r],o=this[++r]+256*this[++r]+65536*this[++r]+16777216*i;return BigInt(a)+(BigInt(o)<<BigInt(32))}),p.prototype.readBigUInt64BE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=16777216*n+65536*this[++r]+256*this[++r]+this[++r],o=16777216*this[++r]+65536*this[++r]+256*this[++r]+i;return(BigInt(a)<<BigInt(32))+BigInt(o)}),p.prototype.readIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*n)),a},p.prototype.readIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=n,o=1,s=this[r+--a];a>0&&(o*=256);)s+=this[r+--a]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},p.prototype.readInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},p.prototype.readInt16LE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r]|this[r+1]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt16BE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r+1]|this[r]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},p.prototype.readInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},p.prototype.readBigInt64LE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(i<<24))<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])}),p.prototype.readBigInt64BE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt((n<<24)+65536*this[++r]+256*this[++r]+this[++r])<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+i)}),p.prototype.readFloatLE=function(r,n){return r>>>=0,n||S(r,4,this.length),c.read(this,r,!0,23,4)},p.prototype.readFloatBE=function(r,n){return r>>>=0,n||S(r,4,this.length),c.read(this,r,!1,23,4)},p.prototype.readDoubleLE=function(r,n){return r>>>=0,n||S(r,8,this.length),c.read(this,r,!0,52,8)},p.prototype.readDoubleBE=function(r,n){return r>>>=0,n||S(r,8,this.length),c.read(this,r,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=1,s=0;for(this[n]=255&r;++s<i&&(o*=256);)this[n+s]=r/o&255;return n+i},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=i-1,s=1;for(this[n+o]=255&r;--o>=0&&(s*=256);)this[n+o]=r/s&255;return n+i},p.prototype.writeUint8=p.prototype.writeUInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,255,0),this[n]=255&r,n+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigUInt64LE=Z(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Z(function(r){return C(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=0,l=1,u=0;for(this[n]=255&r;++s<i&&(l*=256);)r<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(r/l>>0)-u&255;return n+i},p.prototype.writeIntBE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=i-1,l=1,u=0;for(this[n+s]=255&r;--s>=0&&(l*=256);)r<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(r/l>>0)-u&255;return n+i},p.prototype.writeInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},p.prototype.writeInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},p.prototype.writeInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigInt64LE=Z(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Z(function(r){return C(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(r,n,i){return P(this,r,n,!0,i)},p.prototype.writeFloatBE=function(r,n,i){return P(this,r,n,!1,i)},p.prototype.writeDoubleLE=function(r,n,i){return I(this,r,n,!0,i)},p.prototype.writeDoubleBE=function(r,n,i){return I(this,r,n,!1,i)},p.prototype.copy=function(r,n,i,a){if(!p.isBuffer(r))throw TypeError("argument should be a Buffer");if(i||(i=0),a||0===a||(a=this.length),n>=r.length&&(n=r.length),n||(n=0),a>0&&a<i&&(a=i),a===i||0===r.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-n<a-i&&(a=r.length-n+i);var o=a-i;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,i,a):Uint8Array.prototype.set.call(r,this.subarray(i,a),n),o},p.prototype.fill=function(r,n,i,a){if("string"==typeof r){if("string"==typeof n?(a=n,n=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw TypeError("encoding must be a string");if("string"==typeof a&&!p.isEncoding(a))throw TypeError("Unknown encoding: "+a);if(1===r.length){var o,s=r.charCodeAt(0);("utf8"===a&&s<128||"latin1"===a)&&(r=s)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,r||(r=0),"number"==typeof r)for(o=n;o<i;++o)this[o]=r;else{var l=p.isBuffer(r)?r:p.from(r,a),u=l.length;if(0===u)throw TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<i-n;++o)this[o+n]=l[o%u]}return this};var D={};function z(r,n,i){D[r]=function(i){!function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&a(r,n)}(h,i);var u,c,f=(c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}(),function(){var r,n=s(h);return r=c?Reflect.construct(n,arguments,s(this).constructor):n.apply(this,arguments),function(r,n){if(n&&("object"===l(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return o(r)}(this,r)});function h(){var i;return function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,h),Object.defineProperty(o(i=f.call(this)),"message",{value:n.apply(o(i),arguments),writable:!0,configurable:!0}),i.name="".concat(i.name," [").concat(r,"]"),i.stack,delete i.name,i}return u=[{key:"code",get:function(){return r},set:function(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(r,"]: ").concat(this.message)}}],function(r,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(h.prototype,u),Object.defineProperty(h,"prototype",{writable:!1}),h}(i)}function R(r){for(var n="",i=r.length,a="-"===r[0]?1:0;i>=a+4;i-=3)n="_".concat(r.slice(i-3,i)).concat(n);return"".concat(r.slice(0,i)).concat(n)}function F(r,n,i,a,o,s){if(r>i||r<n){var l,u="bigint"==typeof n?"n":"";throw l=s>3?0===n||n===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(s+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(s+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(s+1)-1).concat(u):">= ".concat(n).concat(u," and <= ").concat(i).concat(u),new D.ERR_OUT_OF_RANGE("value",l,r)}B(o,"offset"),void 0!==a[o]&&void 0!==a[o+s]||N(o,a.length-(s+1))}function B(r,n){if("number"!=typeof r)throw new D.ERR_INVALID_ARG_TYPE(n,"number",r)}function N(r,n,i){if(Math.floor(r)!==r)throw B(r,i),new D.ERR_OUT_OF_RANGE(i||"offset","an integer",r);if(n<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(i||"offset",">= ".concat(i?1:0," and <= ").concat(n),r)}z("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?"".concat(r," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(r,n){return'The "'.concat(r,'" argument must be of type number. Received type ').concat(l(n))},TypeError),z("ERR_OUT_OF_RANGE",function(r,n,i){var a=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?a=R(String(i)):"bigint"==typeof i&&(a=String(i),(i>Math.pow(BigInt(2),BigInt(32))||i<-Math.pow(BigInt(2),BigInt(32)))&&(a=R(a)),a+="n"),'The value of "'.concat(r,'" is out of range.')+" It must be ".concat(n,". Received ").concat(a)},RangeError);var j=/[^+/0-9A-Za-z-_]/g;function U(r,n){var i;n=n||1/0;for(var a=r.length,o=null,s=[],l=0;l<a;++l){if((i=r.charCodeAt(l))>55295&&i<57344){if(!o){if(i>56319||l+1===a){(n-=3)>-1&&s.push(239,191,189);continue}o=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(n-=3)>-1&&s.push(239,191,189);if(o=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function V(r){return u.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function H(r,n,i,a){var o;for(o=0;o<a&&!(o+i>=n.length||o>=r.length);++o)n[o+i]=r[o];return o}function q(r,n){return r instanceof n||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===n.name}var G=function(){for(var r="0123456789abcdef",n=Array(256),i=0;i<16;++i)for(var a=16*i,o=0;o<16;++o)n[a+o]=r[i]+r[o];return n}();function Z(r){return"undefined"==typeof BigInt?Y:r}function Y(){throw Error("BigInt not supported")}},2321:function(r){"use strict";r.exports=o,r.exports.isMobile=o,r.exports.default=o;var n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,a=/android|ipad|playbook|silk/i;function o(r){r||(r={});var o=r.ua;if(o||"undefined"==typeof navigator||(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),"string"!=typeof o)return!1;var s=n.test(o)&&!i.test(o)||!!r.tablet&&a.test(o);return!s&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==o.indexOf("Macintosh")&&-1!==o.indexOf("Safari")&&(s=!0),s}},3910:function(r,n){"use strict";n.byteLength=function(r){var n=u(r),i=n[0],a=n[1];return 3*(i+a)/4-a},n.toByteArray=function(r){var n,i,s=u(r),l=s[0],c=s[1],f=new o(3*(l+c)/4-c),h=0,p=c>0?l-4:l;for(i=0;i<p;i+=4)n=a[r.charCodeAt(i)]<<18|a[r.charCodeAt(i+1)]<<12|a[r.charCodeAt(i+2)]<<6|a[r.charCodeAt(i+3)],f[h++]=n>>16&255,f[h++]=n>>8&255,f[h++]=255&n;return 2===c&&(n=a[r.charCodeAt(i)]<<2|a[r.charCodeAt(i+1)]>>4,f[h++]=255&n),1===c&&(n=a[r.charCodeAt(i)]<<10|a[r.charCodeAt(i+1)]<<4|a[r.charCodeAt(i+2)]>>2,f[h++]=n>>8&255,f[h++]=255&n),f},n.fromByteArray=function(r){for(var n,a=r.length,o=a%3,s=[],l=0,u=a-o;l<u;l+=16383)s.push(function(r,n,a){for(var o,s=[],l=n;l<a;l+=3)s.push(i[(o=(r[l]<<16&16711680)+(r[l+1]<<8&65280)+(255&r[l+2]))>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}(r,l,l+16383>u?u:l+16383));return 1===o?s.push(i[(n=r[a-1])>>2]+i[n<<4&63]+"=="):2===o&&s.push(i[(n=(r[a-2]<<8)+r[a-1])>>10]+i[n>>4&63]+i[n<<2&63]+"="),s.join("")};for(var i=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)i[l]=s[l],a[s.charCodeAt(l)]=l;function u(r){var n=r.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");return -1===i&&(i=n),[i,i===n?0:4-i%4]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},3187:function(r,n){n.read=function(r,n,i,a,o){var s,l,u=8*o-a-1,c=(1<<u)-1,f=c>>1,h=-7,p=i?o-1:0,d=i?-1:1,v=r[n+p];for(p+=d,s=v&(1<<-h)-1,v>>=-h,h+=u;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===c)return l?NaN:1/0*(v?-1:1);l+=Math.pow(2,a),s-=f}return(v?-1:1)*l*Math.pow(2,s-a)},n.write=function(r,n,i,a,o,s){var l,u,c,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,v=a?0:s-1,g=a?1:-1,y=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(u=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-l))<1&&(l--,c*=2),(n+=l+p>=1?d/c:d*Math.pow(2,1-p))*c>=2&&(l++,c/=2),l+p>=h?(u=0,l=h):l+p>=1?(u=(n*c-1)*Math.pow(2,o),l+=p):(u=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+v]=255&u,v+=g,u/=256,o-=8);for(l=l<<o|u,f+=o;f>0;r[i+v]=255&l,v+=g,l/=256,f-=8);r[i+v-g]|=128*y}},1152:function(r,n,i){"use strict";r.exports=function(r){var n=(r=r||{}).eye||[0,0,1],i=r.center||[0,0,0],u=r.up||[0,1,0],c=r.distanceLimits||[0,1/0],f=r.mode||"turntable",h=a(),p=o(),d=s();return h.setDistanceLimits(c[0],c[1]),h.lookAt(0,n,i,u),p.setDistanceLimits(c[0],c[1]),p.lookAt(0,n,i,u),d.setDistanceLimits(c[0],c[1]),d.lookAt(0,n,i,u),new l({turntable:h,orbit:p,matrix:d},f)};var a=i(3440),o=i(7774),s=i(9298);function l(r,n){this._controllerNames=Object.keys(r),this._controllerList=this._controllerNames.map(function(n){return r[n]}),this._mode=n,this._active=r[n],this._active||(this._mode="turntable",this._active=r.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var u=l.prototype;u.flush=function(r){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].flush(r)},u.idle=function(r){for(var n=this._controllerList,i=0;i<n.length;++i)n[i].idle(r)},u.lookAt=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].lookAt(r,n,i,a)},u.rotate=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].rotate(r,n,i,a)},u.pan=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].pan(r,n,i,a)},u.translate=function(r,n,i,a){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].translate(r,n,i,a)},u.setMatrix=function(r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].setMatrix(r,n)},u.setDistanceLimits=function(r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].setDistanceLimits(r,n)},u.setDistance=function(r,n){for(var i=this._controllerList,a=0;a<i.length;++a)i[a].setDistance(r,n)},u.recalcMatrix=function(r){this._active.recalcMatrix(r)},u.getDistance=function(r){return this._active.getDistance(r)},u.getDistanceLimits=function(r){return this._active.getDistanceLimits(r)},u.lastT=function(){return this._active.lastT()},u.setMode=function(r){if(r!==this._mode){var n=this._controllerNames.indexOf(r);if(!(n<0)){var i=this._active,a=this._controllerList[n],o=Math.max(i.lastT(),a.lastT());i.recalcMatrix(o),a.setMatrix(o,i.computedMatrix),this._active=a,this._mode=r,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},u.getMode=function(){return this._mode}},8126:function(r,n,i){"use strict";var a="undefined"==typeof WeakMap?i(5346):WeakMap,o=i(5827),s=i(2944),l=new a;r.exports=function(r){var n=l.get(r),i=n&&(n._triangleBuffer.handle||n._triangleBuffer.buffer);if(!i||!r.isBuffer(i)){var a=o(r,new Float32Array([-1,-1,-1,4,4,-1]));(n=s(r,[{buffer:a,type:r.FLOAT,size:2}]))._triangleBuffer=a,l.set(r,n)}n.bind(),r.drawArrays(r.TRIANGLES,0,3),n.unbind()}},8008:function(r,n,i){var a=i(4930);r.exports=function(r,n,i){n="number"==typeof n?n:1,i=i||": ";var o=r.split(/\r?\n/),s=String(o.length+n-1).length;return o.map(function(r,o){var l=o+n,u=String(l).length;return a(l,s-u)+i+r}).join("\n")}},2153:function(r,n,i){"use strict";r.exports=function(r){var n=r.length;if(0===n)return[];if(1===n)return[0];for(var i=r[0].length,o=[r[0]],s=[0],l=1;l<n;++l)if(o.push(r[l]),function(r,n){for(var i=Array(n+1),o=0;o<r.length;++o)i[o]=r[o];for(o=0;o<=r.length;++o){for(var s=r.length;s<=n;++s){for(var l=Array(n),u=0;u<n;++u)l[u]=Math.pow(s+1-o,u);i[s]=l}if(a.apply(void 0,i))return!0}return!1}(o,i)){if(s.push(l),s.length===i+1)break}else o.pop();return s};var a=i(417)},4653:function(r,n,i){"use strict";r.exports=function(r,n){return a(n).filter(function(i){for(var a=Array(i.length),s=0;s<i.length;++s)a[s]=n[i[s]];return o(a)*r<1})};var a=i(4419),o=i(1778)},2350:function(r,n,i){r.exports=function(r,n){return o(a(r,n))};var a=i(4653),o=i(8691)},7896:function(r){r.exports=function(r){return atob(r)}},957:function(r,n,i){"use strict";r.exports=function(r,n){for(var i=n.length,s=Array(i+1),l=0;l<i;++l){for(var u=Array(i+1),c=0;c<=i;++c)u[c]=r[c][l];s[l]=u}for(s[i]=Array(i+1),l=0;l<=i;++l)s[i][l]=1;var f=Array(i+1);for(l=0;l<i;++l)f[l]=n[l];f[i]=1;var h=a(s,f),p=o(h[i+1]);0===p&&(p=1);var d=Array(i+1);for(l=0;l<=i;++l)d[l]=o(h[l])/p;return d};var a=i(6606);function o(r){for(var n=0,i=0;i<r.length;++i)n+=r[i];return n}},1539:function(r,n,i){"use strict";var a=i(8524);r.exports=function(r,n){return a(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(r){"use strict";r.exports=function(r,n){return r[0].mul(n[1]).cmp(n[0].mul(r[1]))}},9189:function(r,n,i){"use strict";var a=i(8524);r.exports=function(r,n){return a(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(r,n,i){"use strict";var a=i(234),o=i(3218),s=i(5514),l=i(2813),u=i(8524),c=i(9189);r.exports=function r(n,i){if(a(n))return i?c(n,r(i)):[n[0].clone(),n[1].clone()];var f,h,p=0;if(o(n))f=n.clone();else if("string"==typeof n)f=l(n);else{if(0===n)return[s(0),s(1)];if(n===Math.floor(n))f=s(n);else{for(;n!==Math.floor(n);)n*=1157920892373162e62,p-=256;f=s(n)}}if(a(i))f.mul(i[1]),h=i[0].clone();else if(o(i))h=i.clone();else if("string"==typeof i)h=l(i);else if(i){if(i===Math.floor(i))h=s(i);else{for(;i!==Math.floor(i);)i*=1157920892373162e62,p+=256;h=s(i)}}else h=s(1);return p>0?f=f.ushln(p):p<0&&(h=h.ushln(-p)),u(f,h)}},234:function(r,n,i){"use strict";var a=i(3218);r.exports=function(r){return Array.isArray(r)&&2===r.length&&a(r[0])&&a(r[1])}},4275:function(r,n,i){"use strict";var a=i(1928);r.exports=function(r){return r.cmp(new a(0))}},9958:function(r,n,i){"use strict";var a=i(4275);r.exports=function(r){var n=r.length,i=r.words,o=0;if(1===n)o=i[0];else if(2===n)o=i[0]+67108864*i[1];else for(var s=0;s<n;s++)o+=i[s]*Math.pow(67108864,s);return a(r)*o}},1112:function(r,n,i){"use strict";var a=i(8362),o=i(2288).countTrailingZeros;r.exports=function(r){var n=o(a.lo(r));if(n<32)return n;var i=o(a.hi(r));return i>20?52:i+32}},3218:function(r,n,i){"use strict";i(1928),r.exports=function(r){return r&&"object"==typeof r&&!!r.words}},5514:function(r,n,i){"use strict";var a=i(1928),o=i(8362);r.exports=function(r){var n=o.exponent(r);return n<52?new a(r):new a(r*Math.pow(2,52-n)).ushln(n-52)}},8524:function(r,n,i){"use strict";var a=i(5514),o=i(4275);r.exports=function(r,n){var i=o(r),s=o(n);if(0===i)return[a(0),a(1)];if(0===s)return[a(0),a(0)];s<0&&(r=r.neg(),n=n.neg());var l=r.gcd(n);return l.cmpn(1)?[r.div(l),n.div(l)]:[r,n]}},2813:function(r,n,i){"use strict";var a=i(1928);r.exports=function(r){return new a(r)}},3962:function(r,n,i){"use strict";var a=i(8524);r.exports=function(r,n){return a(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(r,n,i){"use strict";var a=i(4275);r.exports=function(r){return a(r[0])*a(r[1])}},4354:function(r,n,i){"use strict";var a=i(8524);r.exports=function(r,n){return a(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(r,n,i){"use strict";var a=i(9958),o=i(1112);r.exports=function(r){var n=r[0],i=r[1];if(0===n.cmpn(0))return 0;var s=n.abs().divmod(i.abs()),l=a(s.div),u=s.mod,c=n.negative!==i.negative?-1:1;if(0===u.cmpn(0))return c*l;if(l){var f=o(l)+4;return c*(l+(p=a(u.ushln(f).divRound(i)))*Math.pow(2,-f))}var h=i.bitLength()-u.bitLength()+53,p=a(u.ushln(h).divRound(i));return h<1023?c*p*Math.pow(2,-h):c*(p*=11125369292536007e-324)*Math.pow(2,1023-h)}},5070:function(r){"use strict";function n(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)>=0?(s=l,o=l-1):a=l+1}return s}function i(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)>0?(s=l,o=l-1):a=l+1}return s}function a(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)<0?(s=l,a=l+1):o=l-1}return s}function o(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)<=0?(s=l,a=l+1):o=l-1}return s}function s(r,n,i,a,o){for(;a<=o;){var s=a+o>>>1,l=r[s],u=void 0!==i?i(l,n):l-n;if(0===u)return s;u<=0?a=s+1:o=s-1}return -1}function l(r,n,i,a,o,s){return"function"==typeof i?s(r,n,i,void 0===a?0:0|a,void 0===o?r.length-1:0|o):s(r,n,void 0,void 0===i?0:0|i,void 0===a?r.length-1:0|a)}r.exports={ge:function(r,i,a,o,s){return l(r,i,a,o,s,n)},gt:function(r,n,a,o,s){return l(r,n,a,o,s,i)},lt:function(r,n,i,o,s){return l(r,n,i,o,s,a)},le:function(r,n,i,a,s){return l(r,n,i,a,s,o)},eq:function(r,n,i,a,o){return l(r,n,i,a,o,s)}}},2288:function(r,n){"use strict";function i(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-2147483648,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var n=r>>31;return(r^n)-n},n.min=function(r,n){return n^(r^n)&-(r<n)},n.max=function(r,n){return r^(r^n)&-(r<n)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var n,i;return n=(r>65535)<<4,n|=i=((r>>>=n)>255)<<3,n|=i=((r>>>=i)>15)<<2,(n|=i=((r>>>=i)>3)<<1)|(r>>>=i)>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=Array(256);(function(r){for(var n=0;n<256;++n){var i=n,a=n,o=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=a<<o&255}})(a),n.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},n.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},n.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},n.interleave3=function(r,n,i){return(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},n.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},n.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},1928:function(r,n,i){!function(r,n){"use strict";function a(r,n){if(!r)throw Error(n||"Assertion failed")}function o(r,n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}function s(r,n,i){if(s.isBN(r))return r;this.negative=0,this.words=null,this.length=0,this.red=null,null!==r&&("le"!==n&&"be"!==n||(i=n,n=10),this._init(r||0,n||10,i||"be"))}"object"==typeof r?r.exports=s:n.BN=s,s.BN=s,s.wordSize=26;try{f="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(6601).Buffer}catch(r){}function l(r,n){var i=r.charCodeAt(n);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(r,n,i){var a=l(r,i);return i-1>=n&&(a|=l(r,i-1)<<4),a}function c(r,n,i,a){for(var o=0,s=Math.min(r.length,i),l=n;l<s;l++){var u=r.charCodeAt(l)-48;o*=a,o+=u>=49?u-49+10:u>=17?u-17+10:u}return o}s.isBN=function(r){return r instanceof s||null!==r&&"object"==typeof r&&r.constructor.wordSize===s.wordSize&&Array.isArray(r.words)},s.max=function(r,n){return r.cmp(n)>0?r:n},s.min=function(r,n){return 0>r.cmp(n)?r:n},s.prototype._init=function(r,n,i){if("number"==typeof r)return this._initNumber(r,n,i);if("object"==typeof r)return this._initArray(r,n,i);"hex"===n&&(n=16),a(n===(0|n)&&n>=2&&n<=36);var o=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<r.length&&(16===n?this._parseHex(r,o,i):(this._parseBase(r,n,o),"le"===i&&this._initArray(this.toArray(),n,i)))},s.prototype._initNumber=function(r,n,i){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(a(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),n,i)},s.prototype._initArray=function(r,n,i){if(a("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var s,l,u=0;if("be"===i)for(o=r.length-1,s=0;o>=0;o-=3)l=r[o]|r[o-1]<<8|r[o-2]<<16,this.words[s]|=l<<u&67108863,this.words[s+1]=l>>>26-u&67108863,(u+=24)>=26&&(u-=26,s++);else if("le"===i)for(o=0,s=0;o<r.length;o+=3)l=r[o]|r[o+1]<<8|r[o+2]<<16,this.words[s]|=l<<u&67108863,this.words[s+1]=l>>>26-u&67108863,(u+=24)>=26&&(u-=26,s++);return this.strip()},s.prototype._parseHex=function(r,n,i){this.length=Math.ceil((r.length-n)/6),this.words=Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var o,s=0,l=0;if("be"===i)for(a=r.length-1;a>=n;a-=2)o=u(r,n,a)<<s,this.words[l]|=67108863&o,s>=18?(s-=18,l+=1,this.words[l]|=o>>>26):s+=8;else for(a=(r.length-n)%2==0?n+1:n;a<r.length;a+=2)o=u(r,n,a)<<s,this.words[l]|=67108863&o,s>=18?(s-=18,l+=1,this.words[l]|=o>>>26):s+=8;this.strip()},s.prototype._parseBase=function(r,n,i){this.words=[0],this.length=1;for(var a=0,o=1;o<=67108863;o*=n)a++;a--,o=o/n|0;for(var s=r.length-i,l=s%a,u=Math.min(s,s-l)+i,f=0,h=i;h<u;h+=a)f=c(r,h,h+a,n),this.imuln(o),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(0!==l){var p=1;for(f=c(r,h,r.length,n),h=0;h<l;h++)p*=n;this.imuln(p),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this.strip()},s.prototype.copy=function(r){r.words=Array(this.length);for(var n=0;n<this.length;n++)r.words[n]=this.words[n];r.length=this.length,r.negative=this.negative,r.red=this.red},s.prototype.clone=function(){var r=new s(null);return this.copy(r),r},s.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(r,n,i){i.negative=n.negative^r.negative;var a=r.length+n.length|0;i.length=a,a=a-1|0;var o=0|r.words[0],s=0|n.words[0],l=o*s,u=67108863&l,c=l/67108864|0;i.words[0]=u;for(var f=1;f<a;f++){for(var h=c>>>26,p=67108863&c,d=Math.min(f,n.length-1),v=Math.max(0,f-r.length+1);v<=d;v++){var g=f-v|0;h+=(l=(o=0|r.words[g])*(s=0|n.words[v])+p)/67108864|0,p=67108863&l}i.words[f]=0|p,c=0|h}return 0!==c?i.words[f]=0|c:i.length--,i.strip()}s.prototype.toString=function(r,n){var i;if(n=0|n||1,16===(r=r||10)||"hex"===r){i="";for(var o=0,s=0,l=0;l<this.length;l++){var u=this.words[l],c=(16777215&(u<<o|s)).toString(16);i=0!=(s=u>>>24-o&16777215)||l!==this.length-1?h[6-c.length]+c+i:c+i,(o+=2)>=26&&(o-=26,l--)}for(0!==s&&(i=s.toString(16)+i);i.length%n!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(r===(0|r)&&r>=2&&r<=36){var f=p[r],v=d[r];i="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(v).toString(r);i=(g=g.idivn(v)).isZero()?y+i:h[f-y.length]+y+i}for(this.isZero()&&(i="0"+i);i.length%n!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}a(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(r,n){return a(void 0!==f),this.toArrayLike(f,r,n)},s.prototype.toArray=function(r,n){return this.toArrayLike(Array,r,n)},s.prototype.toArrayLike=function(r,n,i){var o=this.byteLength(),s=i||Math.max(1,o);a(o<=s,"byte array longer than desired length"),a(s>0,"Requested array length <= 0"),this.strip();var l,u,c=new r(s),f=this.clone();if("le"===n){for(u=0;!f.isZero();u++)l=f.andln(255),f.iushrn(8),c[u]=l;for(;u<s;u++)c[u]=0}else{for(u=0;u<s-o;u++)c[u]=0;for(u=0;!f.isZero();u++)l=f.andln(255),f.iushrn(8),c[s-u-1]=l}return c},Math.clz32?s.prototype._countBits=function(r){return 32-Math.clz32(r)}:s.prototype._countBits=function(r){var n=r,i=0;return n>=4096&&(i+=13,n>>>=13),n>=64&&(i+=7,n>>>=7),n>=8&&(i+=4,n>>>=4),n>=2&&(i+=2,n>>>=2),i+n},s.prototype._zeroBits=function(r){if(0===r)return 26;var n=r,i=0;return 0==(8191&n)&&(i+=13,n>>>=13),0==(127&n)&&(i+=7,n>>>=7),0==(15&n)&&(i+=4,n>>>=4),0==(3&n)&&(i+=2,n>>>=2),0==(1&n)&&i++,i},s.prototype.bitLength=function(){var r=this.words[this.length-1],n=this._countBits(r);return 26*(this.length-1)+n},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,n=0;n<this.length;n++){var i=this._zeroBits(this.words[n]);if(r+=i,26!==i)break}return r},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},s.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]|r.words[n];return this.strip()},s.prototype.ior=function(r){return a(0==(this.negative|r.negative)),this.iuor(r)},s.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},s.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},s.prototype.iuand=function(r){var n;n=this.length>r.length?r:this;for(var i=0;i<n.length;i++)this.words[i]=this.words[i]&r.words[i];return this.length=n.length,this.strip()},s.prototype.iand=function(r){return a(0==(this.negative|r.negative)),this.iuand(r)},s.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},s.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},s.prototype.iuxor=function(r){var n,i;this.length>r.length?(n=this,i=r):(n=r,i=this);for(var a=0;a<i.length;a++)this.words[a]=n.words[a]^i.words[a];if(this!==n)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=n.length,this.strip()},s.prototype.ixor=function(r){return a(0==(this.negative|r.negative)),this.iuxor(r)},s.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},s.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},s.prototype.inotn=function(r){a("number"==typeof r&&r>=0);var n=0|Math.ceil(r/26),i=r%26;this._expand(n),i>0&&n--;for(var o=0;o<n;o++)this.words[o]=67108863&~this.words[o];return i>0&&(this.words[o]=~this.words[o]&67108863>>26-i),this.strip()},s.prototype.notn=function(r){return this.clone().inotn(r)},s.prototype.setn=function(r,n){a("number"==typeof r&&r>=0);var i=r/26|0,o=r%26;return this._expand(i+1),this.words[i]=n?this.words[i]|1<<o:this.words[i]&~(1<<o),this.strip()},s.prototype.iadd=function(r){var n,i,a;if(0!==this.negative&&0===r.negative)return this.negative=0,n=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,n=this.isub(r),r.negative=1,n._normSign();this.length>r.length?(i=this,a=r):(i=r,a=this);for(var o=0,s=0;s<a.length;s++)n=(0|i.words[s])+(0|a.words[s])+o,this.words[s]=67108863&n,o=n>>>26;for(;0!==o&&s<i.length;s++)n=(0|i.words[s])+o,this.words[s]=67108863&n,o=n>>>26;if(this.length=i.length,0!==o)this.words[this.length]=o,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(r){var n;return 0!==r.negative&&0===this.negative?(r.negative=0,n=this.sub(r),r.negative^=1,n):0===r.negative&&0!==this.negative?(this.negative=0,n=r.sub(this),this.negative=1,n):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},s.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var n=this.iadd(r);return r.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var i,a,o=this.cmp(r);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(i=this,a=r):(i=r,a=this);for(var s=0,l=0;l<a.length;l++)s=(n=(0|i.words[l])-(0|a.words[l])+s)>>26,this.words[l]=67108863&n;for(;0!==s&&l<i.length;l++)s=(n=(0|i.words[l])+s)>>26,this.words[l]=67108863&n;if(0===s&&l<i.length&&i!==this)for(;l<i.length;l++)this.words[l]=i.words[l];return this.length=Math.max(this.length,l),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(r){return this.clone().isub(r)};var g=function(r,n,i){var a,o,s,l=r.words,u=n.words,c=i.words,f=0,h=0|l[0],p=8191&h,d=h>>>13,v=0|l[1],g=8191&v,y=v>>>13,m=0|l[2],x=8191&m,b=m>>>13,_=0|l[3],w=8191&_,T=_>>>13,k=0|l[4],A=8191&k,M=k>>>13,S=0|l[5],E=8191&S,L=S>>>13,C=0|l[6],O=8191&C,P=C>>>13,I=0|l[7],D=8191&I,z=I>>>13,R=0|l[8],F=8191&R,B=R>>>13,N=0|l[9],j=8191&N,U=N>>>13,V=0|u[0],H=8191&V,q=V>>>13,G=0|u[1],Z=8191&G,Y=G>>>13,W=0|u[2],X=8191&W,J=W>>>13,K=0|u[3],$=8191&K,Q=K>>>13,tt=0|u[4],te=8191&tt,tr=tt>>>13,tn=0|u[5],ti=8191&tn,ta=tn>>>13,to=0|u[6],ts=8191&to,tl=to>>>13,tu=0|u[7],tc=8191&tu,tf=tu>>>13,th=0|u[8],tp=8191&th,td=th>>>13,tv=0|u[9],tg=8191&tv,ty=tv>>>13;i.negative=r.negative^n.negative,i.length=19;var tm=(f+(a=Math.imul(p,H))|0)+((8191&(o=(o=Math.imul(p,q))+Math.imul(d,H)|0))<<13)|0;f=((s=Math.imul(d,q))+(o>>>13)|0)+(tm>>>26)|0,tm&=67108863,a=Math.imul(g,H),o=(o=Math.imul(g,q))+Math.imul(y,H)|0,s=Math.imul(y,q);var tx=(f+(a=a+Math.imul(p,Z)|0)|0)+((8191&(o=(o=o+Math.imul(p,Y)|0)+Math.imul(d,Z)|0))<<13)|0;f=((s=s+Math.imul(d,Y)|0)+(o>>>13)|0)+(tx>>>26)|0,tx&=67108863,a=Math.imul(x,H),o=(o=Math.imul(x,q))+Math.imul(b,H)|0,s=Math.imul(b,q),a=a+Math.imul(g,Z)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(y,Z)|0,s=s+Math.imul(y,Y)|0;var tb=(f+(a=a+Math.imul(p,X)|0)|0)+((8191&(o=(o=o+Math.imul(p,J)|0)+Math.imul(d,X)|0))<<13)|0;f=((s=s+Math.imul(d,J)|0)+(o>>>13)|0)+(tb>>>26)|0,tb&=67108863,a=Math.imul(w,H),o=(o=Math.imul(w,q))+Math.imul(T,H)|0,s=Math.imul(T,q),a=a+Math.imul(x,Z)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(b,Z)|0,s=s+Math.imul(b,Y)|0,a=a+Math.imul(g,X)|0,o=(o=o+Math.imul(g,J)|0)+Math.imul(y,X)|0,s=s+Math.imul(y,J)|0;var t_=(f+(a=a+Math.imul(p,$)|0)|0)+((8191&(o=(o=o+Math.imul(p,Q)|0)+Math.imul(d,$)|0))<<13)|0;f=((s=s+Math.imul(d,Q)|0)+(o>>>13)|0)+(t_>>>26)|0,t_&=67108863,a=Math.imul(A,H),o=(o=Math.imul(A,q))+Math.imul(M,H)|0,s=Math.imul(M,q),a=a+Math.imul(w,Z)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(T,Z)|0,s=s+Math.imul(T,Y)|0,a=a+Math.imul(x,X)|0,o=(o=o+Math.imul(x,J)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,J)|0,a=a+Math.imul(g,$)|0,o=(o=o+Math.imul(g,Q)|0)+Math.imul(y,$)|0,s=s+Math.imul(y,Q)|0;var tw=(f+(a=a+Math.imul(p,te)|0)|0)+((8191&(o=(o=o+Math.imul(p,tr)|0)+Math.imul(d,te)|0))<<13)|0;f=((s=s+Math.imul(d,tr)|0)+(o>>>13)|0)+(tw>>>26)|0,tw&=67108863,a=Math.imul(E,H),o=(o=Math.imul(E,q))+Math.imul(L,H)|0,s=Math.imul(L,q),a=a+Math.imul(A,Z)|0,o=(o=o+Math.imul(A,Y)|0)+Math.imul(M,Z)|0,s=s+Math.imul(M,Y)|0,a=a+Math.imul(w,X)|0,o=(o=o+Math.imul(w,J)|0)+Math.imul(T,X)|0,s=s+Math.imul(T,J)|0,a=a+Math.imul(x,$)|0,o=(o=o+Math.imul(x,Q)|0)+Math.imul(b,$)|0,s=s+Math.imul(b,Q)|0,a=a+Math.imul(g,te)|0,o=(o=o+Math.imul(g,tr)|0)+Math.imul(y,te)|0,s=s+Math.imul(y,tr)|0;var tT=(f+(a=a+Math.imul(p,ti)|0)|0)+((8191&(o=(o=o+Math.imul(p,ta)|0)+Math.imul(d,ti)|0))<<13)|0;f=((s=s+Math.imul(d,ta)|0)+(o>>>13)|0)+(tT>>>26)|0,tT&=67108863,a=Math.imul(O,H),o=(o=Math.imul(O,q))+Math.imul(P,H)|0,s=Math.imul(P,q),a=a+Math.imul(E,Z)|0,o=(o=o+Math.imul(E,Y)|0)+Math.imul(L,Z)|0,s=s+Math.imul(L,Y)|0,a=a+Math.imul(A,X)|0,o=(o=o+Math.imul(A,J)|0)+Math.imul(M,X)|0,s=s+Math.imul(M,J)|0,a=a+Math.imul(w,$)|0,o=(o=o+Math.imul(w,Q)|0)+Math.imul(T,$)|0,s=s+Math.imul(T,Q)|0,a=a+Math.imul(x,te)|0,o=(o=o+Math.imul(x,tr)|0)+Math.imul(b,te)|0,s=s+Math.imul(b,tr)|0,a=a+Math.imul(g,ti)|0,o=(o=o+Math.imul(g,ta)|0)+Math.imul(y,ti)|0,s=s+Math.imul(y,ta)|0;var tk=(f+(a=a+Math.imul(p,ts)|0)|0)+((8191&(o=(o=o+Math.imul(p,tl)|0)+Math.imul(d,ts)|0))<<13)|0;f=((s=s+Math.imul(d,tl)|0)+(o>>>13)|0)+(tk>>>26)|0,tk&=67108863,a=Math.imul(D,H),o=(o=Math.imul(D,q))+Math.imul(z,H)|0,s=Math.imul(z,q),a=a+Math.imul(O,Z)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,Y)|0,a=a+Math.imul(E,X)|0,o=(o=o+Math.imul(E,J)|0)+Math.imul(L,X)|0,s=s+Math.imul(L,J)|0,a=a+Math.imul(A,$)|0,o=(o=o+Math.imul(A,Q)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,Q)|0,a=a+Math.imul(w,te)|0,o=(o=o+Math.imul(w,tr)|0)+Math.imul(T,te)|0,s=s+Math.imul(T,tr)|0,a=a+Math.imul(x,ti)|0,o=(o=o+Math.imul(x,ta)|0)+Math.imul(b,ti)|0,s=s+Math.imul(b,ta)|0,a=a+Math.imul(g,ts)|0,o=(o=o+Math.imul(g,tl)|0)+Math.imul(y,ts)|0,s=s+Math.imul(y,tl)|0;var tA=(f+(a=a+Math.imul(p,tc)|0)|0)+((8191&(o=(o=o+Math.imul(p,tf)|0)+Math.imul(d,tc)|0))<<13)|0;f=((s=s+Math.imul(d,tf)|0)+(o>>>13)|0)+(tA>>>26)|0,tA&=67108863,a=Math.imul(F,H),o=(o=Math.imul(F,q))+Math.imul(B,H)|0,s=Math.imul(B,q),a=a+Math.imul(D,Z)|0,o=(o=o+Math.imul(D,Y)|0)+Math.imul(z,Z)|0,s=s+Math.imul(z,Y)|0,a=a+Math.imul(O,X)|0,o=(o=o+Math.imul(O,J)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,J)|0,a=a+Math.imul(E,$)|0,o=(o=o+Math.imul(E,Q)|0)+Math.imul(L,$)|0,s=s+Math.imul(L,Q)|0,a=a+Math.imul(A,te)|0,o=(o=o+Math.imul(A,tr)|0)+Math.imul(M,te)|0,s=s+Math.imul(M,tr)|0,a=a+Math.imul(w,ti)|0,o=(o=o+Math.imul(w,ta)|0)+Math.imul(T,ti)|0,s=s+Math.imul(T,ta)|0,a=a+Math.imul(x,ts)|0,o=(o=o+Math.imul(x,tl)|0)+Math.imul(b,ts)|0,s=s+Math.imul(b,tl)|0,a=a+Math.imul(g,tc)|0,o=(o=o+Math.imul(g,tf)|0)+Math.imul(y,tc)|0,s=s+Math.imul(y,tf)|0;var tM=(f+(a=a+Math.imul(p,tp)|0)|0)+((8191&(o=(o=o+Math.imul(p,td)|0)+Math.imul(d,tp)|0))<<13)|0;f=((s=s+Math.imul(d,td)|0)+(o>>>13)|0)+(tM>>>26)|0,tM&=67108863,a=Math.imul(j,H),o=(o=Math.imul(j,q))+Math.imul(U,H)|0,s=Math.imul(U,q),a=a+Math.imul(F,Z)|0,o=(o=o+Math.imul(F,Y)|0)+Math.imul(B,Z)|0,s=s+Math.imul(B,Y)|0,a=a+Math.imul(D,X)|0,o=(o=o+Math.imul(D,J)|0)+Math.imul(z,X)|0,s=s+Math.imul(z,J)|0,a=a+Math.imul(O,$)|0,o=(o=o+Math.imul(O,Q)|0)+Math.imul(P,$)|0,s=s+Math.imul(P,Q)|0,a=a+Math.imul(E,te)|0,o=(o=o+Math.imul(E,tr)|0)+Math.imul(L,te)|0,s=s+Math.imul(L,tr)|0,a=a+Math.imul(A,ti)|0,o=(o=o+Math.imul(A,ta)|0)+Math.imul(M,ti)|0,s=s+Math.imul(M,ta)|0,a=a+Math.imul(w,ts)|0,o=(o=o+Math.imul(w,tl)|0)+Math.imul(T,ts)|0,s=s+Math.imul(T,tl)|0,a=a+Math.imul(x,tc)|0,o=(o=o+Math.imul(x,tf)|0)+Math.imul(b,tc)|0,s=s+Math.imul(b,tf)|0,a=a+Math.imul(g,tp)|0,o=(o=o+Math.imul(g,td)|0)+Math.imul(y,tp)|0,s=s+Math.imul(y,td)|0;var tS=(f+(a=a+Math.imul(p,tg)|0)|0)+((8191&(o=(o=o+Math.imul(p,ty)|0)+Math.imul(d,tg)|0))<<13)|0;f=((s=s+Math.imul(d,ty)|0)+(o>>>13)|0)+(tS>>>26)|0,tS&=67108863,a=Math.imul(j,Z),o=(o=Math.imul(j,Y))+Math.imul(U,Z)|0,s=Math.imul(U,Y),a=a+Math.imul(F,X)|0,o=(o=o+Math.imul(F,J)|0)+Math.imul(B,X)|0,s=s+Math.imul(B,J)|0,a=a+Math.imul(D,$)|0,o=(o=o+Math.imul(D,Q)|0)+Math.imul(z,$)|0,s=s+Math.imul(z,Q)|0,a=a+Math.imul(O,te)|0,o=(o=o+Math.imul(O,tr)|0)+Math.imul(P,te)|0,s=s+Math.imul(P,tr)|0,a=a+Math.imul(E,ti)|0,o=(o=o+Math.imul(E,ta)|0)+Math.imul(L,ti)|0,s=s+Math.imul(L,ta)|0,a=a+Math.imul(A,ts)|0,o=(o=o+Math.imul(A,tl)|0)+Math.imul(M,ts)|0,s=s+Math.imul(M,tl)|0,a=a+Math.imul(w,tc)|0,o=(o=o+Math.imul(w,tf)|0)+Math.imul(T,tc)|0,s=s+Math.imul(T,tf)|0,a=a+Math.imul(x,tp)|0,o=(o=o+Math.imul(x,td)|0)+Math.imul(b,tp)|0,s=s+Math.imul(b,td)|0;var tE=(f+(a=a+Math.imul(g,tg)|0)|0)+((8191&(o=(o=o+Math.imul(g,ty)|0)+Math.imul(y,tg)|0))<<13)|0;f=((s=s+Math.imul(y,ty)|0)+(o>>>13)|0)+(tE>>>26)|0,tE&=67108863,a=Math.imul(j,X),o=(o=Math.imul(j,J))+Math.imul(U,X)|0,s=Math.imul(U,J),a=a+Math.imul(F,$)|0,o=(o=o+Math.imul(F,Q)|0)+Math.imul(B,$)|0,s=s+Math.imul(B,Q)|0,a=a+Math.imul(D,te)|0,o=(o=o+Math.imul(D,tr)|0)+Math.imul(z,te)|0,s=s+Math.imul(z,tr)|0,a=a+Math.imul(O,ti)|0,o=(o=o+Math.imul(O,ta)|0)+Math.imul(P,ti)|0,s=s+Math.imul(P,ta)|0,a=a+Math.imul(E,ts)|0,o=(o=o+Math.imul(E,tl)|0)+Math.imul(L,ts)|0,s=s+Math.imul(L,tl)|0,a=a+Math.imul(A,tc)|0,o=(o=o+Math.imul(A,tf)|0)+Math.imul(M,tc)|0,s=s+Math.imul(M,tf)|0,a=a+Math.imul(w,tp)|0,o=(o=o+Math.imul(w,td)|0)+Math.imul(T,tp)|0,s=s+Math.imul(T,td)|0;var tL=(f+(a=a+Math.imul(x,tg)|0)|0)+((8191&(o=(o=o+Math.imul(x,ty)|0)+Math.imul(b,tg)|0))<<13)|0;f=((s=s+Math.imul(b,ty)|0)+(o>>>13)|0)+(tL>>>26)|0,tL&=67108863,a=Math.imul(j,$),o=(o=Math.imul(j,Q))+Math.imul(U,$)|0,s=Math.imul(U,Q),a=a+Math.imul(F,te)|0,o=(o=o+Math.imul(F,tr)|0)+Math.imul(B,te)|0,s=s+Math.imul(B,tr)|0,a=a+Math.imul(D,ti)|0,o=(o=o+Math.imul(D,ta)|0)+Math.imul(z,ti)|0,s=s+Math.imul(z,ta)|0,a=a+Math.imul(O,ts)|0,o=(o=o+Math.imul(O,tl)|0)+Math.imul(P,ts)|0,s=s+Math.imul(P,tl)|0,a=a+Math.imul(E,tc)|0,o=(o=o+Math.imul(E,tf)|0)+Math.imul(L,tc)|0,s=s+Math.imul(L,tf)|0,a=a+Math.imul(A,tp)|0,o=(o=o+Math.imul(A,td)|0)+Math.imul(M,tp)|0,s=s+Math.imul(M,td)|0;var tC=(f+(a=a+Math.imul(w,tg)|0)|0)+((8191&(o=(o=o+Math.imul(w,ty)|0)+Math.imul(T,tg)|0))<<13)|0;f=((s=s+Math.imul(T,ty)|0)+(o>>>13)|0)+(tC>>>26)|0,tC&=67108863,a=Math.imul(j,te),o=(o=Math.imul(j,tr))+Math.imul(U,te)|0,s=Math.imul(U,tr),a=a+Math.imul(F,ti)|0,o=(o=o+Math.imul(F,ta)|0)+Math.imul(B,ti)|0,s=s+Math.imul(B,ta)|0,a=a+Math.imul(D,ts)|0,o=(o=o+Math.imul(D,tl)|0)+Math.imul(z,ts)|0,s=s+Math.imul(z,tl)|0,a=a+Math.imul(O,tc)|0,o=(o=o+Math.imul(O,tf)|0)+Math.imul(P,tc)|0,s=s+Math.imul(P,tf)|0,a=a+Math.imul(E,tp)|0,o=(o=o+Math.imul(E,td)|0)+Math.imul(L,tp)|0,s=s+Math.imul(L,td)|0;var tO=(f+(a=a+Math.imul(A,tg)|0)|0)+((8191&(o=(o=o+Math.imul(A,ty)|0)+Math.imul(M,tg)|0))<<13)|0;f=((s=s+Math.imul(M,ty)|0)+(o>>>13)|0)+(tO>>>26)|0,tO&=67108863,a=Math.imul(j,ti),o=(o=Math.imul(j,ta))+Math.imul(U,ti)|0,s=Math.imul(U,ta),a=a+Math.imul(F,ts)|0,o=(o=o+Math.imul(F,tl)|0)+Math.imul(B,ts)|0,s=s+Math.imul(B,tl)|0,a=a+Math.imul(D,tc)|0,o=(o=o+Math.imul(D,tf)|0)+Math.imul(z,tc)|0,s=s+Math.imul(z,tf)|0,a=a+Math.imul(O,tp)|0,o=(o=o+Math.imul(O,td)|0)+Math.imul(P,tp)|0,s=s+Math.imul(P,td)|0;var tP=(f+(a=a+Math.imul(E,tg)|0)|0)+((8191&(o=(o=o+Math.imul(E,ty)|0)+Math.imul(L,tg)|0))<<13)|0;f=((s=s+Math.imul(L,ty)|0)+(o>>>13)|0)+(tP>>>26)|0,tP&=67108863,a=Math.imul(j,ts),o=(o=Math.imul(j,tl))+Math.imul(U,ts)|0,s=Math.imul(U,tl),a=a+Math.imul(F,tc)|0,o=(o=o+Math.imul(F,tf)|0)+Math.imul(B,tc)|0,s=s+Math.imul(B,tf)|0,a=a+Math.imul(D,tp)|0,o=(o=o+Math.imul(D,td)|0)+Math.imul(z,tp)|0,s=s+Math.imul(z,td)|0;var tI=(f+(a=a+Math.imul(O,tg)|0)|0)+((8191&(o=(o=o+Math.imul(O,ty)|0)+Math.imul(P,tg)|0))<<13)|0;f=((s=s+Math.imul(P,ty)|0)+(o>>>13)|0)+(tI>>>26)|0,tI&=67108863,a=Math.imul(j,tc),o=(o=Math.imul(j,tf))+Math.imul(U,tc)|0,s=Math.imul(U,tf),a=a+Math.imul(F,tp)|0,o=(o=o+Math.imul(F,td)|0)+Math.imul(B,tp)|0,s=s+Math.imul(B,td)|0;var tD=(f+(a=a+Math.imul(D,tg)|0)|0)+((8191&(o=(o=o+Math.imul(D,ty)|0)+Math.imul(z,tg)|0))<<13)|0;f=((s=s+Math.imul(z,ty)|0)+(o>>>13)|0)+(tD>>>26)|0,tD&=67108863,a=Math.imul(j,tp),o=(o=Math.imul(j,td))+Math.imul(U,tp)|0,s=Math.imul(U,td);var tz=(f+(a=a+Math.imul(F,tg)|0)|0)+((8191&(o=(o=o+Math.imul(F,ty)|0)+Math.imul(B,tg)|0))<<13)|0;f=((s=s+Math.imul(B,ty)|0)+(o>>>13)|0)+(tz>>>26)|0,tz&=67108863;var tR=(f+(a=Math.imul(j,tg))|0)+((8191&(o=(o=Math.imul(j,ty))+Math.imul(U,tg)|0))<<13)|0;return f=((s=Math.imul(U,ty))+(o>>>13)|0)+(tR>>>26)|0,tR&=67108863,c[0]=tm,c[1]=tx,c[2]=tb,c[3]=t_,c[4]=tw,c[5]=tT,c[6]=tk,c[7]=tA,c[8]=tM,c[9]=tS,c[10]=tE,c[11]=tL,c[12]=tC,c[13]=tO,c[14]=tP,c[15]=tI,c[16]=tD,c[17]=tz,c[18]=tR,0!==f&&(c[19]=f,i.length++),i};function y(r,n,i){return(new m).mulp(r,n,i)}function m(r,n){this.x=r,this.y=n}Math.imul||(g=v),s.prototype.mulTo=function(r,n){var i=this.length+r.length;return 10===this.length&&10===r.length?g(this,r,n):i<63?v(this,r,n):i<1024?function(r,n,i){i.negative=n.negative^r.negative,i.length=r.length+n.length;for(var a=0,o=0,s=0;s<i.length-1;s++){var l=o;o=0;for(var u=67108863&a,c=Math.min(s,n.length-1),f=Math.max(0,s-r.length+1);f<=c;f++){var h=s-f,p=(0|r.words[h])*(0|n.words[f]),d=67108863&p;u=67108863&(d=d+u|0),o+=(l=(l=l+(p/67108864|0)|0)+(d>>>26)|0)>>>26,l&=67108863}i.words[s]=u,a=l,l=o}return 0!==a?i.words[s]=a:i.length--,i.strip()}(this,r,n):y(this,r,n)},m.prototype.makeRBT=function(r){for(var n=Array(r),i=s.prototype._countBits(r)-1,a=0;a<r;a++)n[a]=this.revBin(a,i,r);return n},m.prototype.revBin=function(r,n,i){if(0===r||r===i-1)return r;for(var a=0,o=0;o<n;o++)a|=(1&r)<<n-o-1,r>>=1;return a},m.prototype.permute=function(r,n,i,a,o,s){for(var l=0;l<s;l++)a[l]=n[r[l]],o[l]=i[r[l]]},m.prototype.transform=function(r,n,i,a,o,s){this.permute(s,r,n,i,a,o);for(var l=1;l<o;l<<=1)for(var u=l<<1,c=Math.cos(2*Math.PI/u),f=Math.sin(2*Math.PI/u),h=0;h<o;h+=u)for(var p=c,d=f,v=0;v<l;v++){var g=i[h+v],y=a[h+v],m=i[h+v+l],x=a[h+v+l],b=p*m-d*x;x=p*x+d*m,m=b,i[h+v]=g+m,a[h+v]=y+x,i[h+v+l]=g-m,a[h+v+l]=y-x,v!==u&&(b=c*p-f*d,d=c*d+f*p,p=b)}},m.prototype.guessLen13b=function(r,n){var i=1|Math.max(n,r),a=1&i,o=0;for(i=i/2|0;i;i>>>=1)o++;return 1<<o+1+a},m.prototype.conjugate=function(r,n,i){if(!(i<=1))for(var a=0;a<i/2;a++){var o=r[a];r[a]=r[i-a-1],r[i-a-1]=o,o=n[a],n[a]=-n[i-a-1],n[i-a-1]=-o}},m.prototype.normalize13b=function(r,n){for(var i=0,a=0;a<n/2;a++){var o=8192*Math.round(r[2*a+1]/n)+Math.round(r[2*a]/n)+i;r[a]=67108863&o,i=o<67108864?0:o/67108864|0}return r},m.prototype.convert13b=function(r,n,i,o){for(var s=0,l=0;l<n;l++)s+=0|r[l],i[2*l]=8191&s,s>>>=13,i[2*l+1]=8191&s,s>>>=13;for(l=2*n;l<o;++l)i[l]=0;a(0===s),a(0==(-8192&s))},m.prototype.stub=function(r){for(var n=Array(r),i=0;i<r;i++)n[i]=0;return n},m.prototype.mulp=function(r,n,i){var a=2*this.guessLen13b(r.length,n.length),o=this.makeRBT(a),s=this.stub(a),l=Array(a),u=Array(a),c=Array(a),f=Array(a),h=Array(a),p=Array(a),d=i.words;d.length=a,this.convert13b(r.words,r.length,l,a),this.convert13b(n.words,n.length,f,a),this.transform(l,s,u,c,a,o),this.transform(f,s,h,p,a,o);for(var v=0;v<a;v++){var g=u[v]*h[v]-c[v]*p[v];c[v]=u[v]*p[v]+c[v]*h[v],u[v]=g}return this.conjugate(u,c,a),this.transform(u,c,d,s,a,o),this.conjugate(d,s,a),this.normalize13b(d,a),i.negative=r.negative^n.negative,i.length=r.length+n.length,i.strip()},s.prototype.mul=function(r){var n=new s(null);return n.words=Array(this.length+r.length),this.mulTo(r,n)},s.prototype.mulf=function(r){var n=new s(null);return n.words=Array(this.length+r.length),y(this,r,n)},s.prototype.imul=function(r){return this.clone().mulTo(r,this)},s.prototype.imuln=function(r){a("number"==typeof r),a(r<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*r,s=(67108863&o)+(67108863&n);n>>=26,n+=(o/67108864|0)+(s>>>26),this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),this},s.prototype.muln=function(r){return this.clone().imuln(r)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(r){var n=function(r){for(var n=Array(r.bitLength()),i=0;i<n.length;i++){var a=i/26|0,o=i%26;n[i]=(r.words[a]&1<<o)>>>o}return n}(r);if(0===n.length)return new s(1);for(var i=this,a=0;a<n.length&&0===n[a];a++,i=i.sqr());if(++a<n.length)for(var o=i.sqr();a<n.length;a++,o=o.sqr())0!==n[a]&&(i=i.mul(o));return i},s.prototype.iushln=function(r){a("number"==typeof r&&r>=0);var n,i=r%26,o=(r-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var l=0;for(n=0;n<this.length;n++){var u=this.words[n]&s,c=(0|this.words[n])-u<<i;this.words[n]=c|l,l=u>>>26-i}l&&(this.words[n]=l,this.length++)}if(0!==o){for(n=this.length-1;n>=0;n--)this.words[n+o]=this.words[n];for(n=0;n<o;n++)this.words[n]=0;this.length+=o}return this.strip()},s.prototype.ishln=function(r){return a(0===this.negative),this.iushln(r)},s.prototype.iushrn=function(r,n,i){a("number"==typeof r&&r>=0),o=n?(n-n%26)/26:0;var o,s=r%26,l=Math.min((r-s)/26,this.length),u=67108863^67108863>>>s<<s;if(o-=l,o=Math.max(0,o),i){for(var c=0;c<l;c++)i.words[c]=this.words[c];i.length=l}if(0===l);else if(this.length>l)for(this.length-=l,c=0;c<this.length;c++)this.words[c]=this.words[c+l];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(0!==f||c>=o);c--){var h=0|this.words[c];this.words[c]=f<<26-s|h>>>s,f=h&u}return i&&0!==f&&(i.words[i.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(r,n,i){return a(0===this.negative),this.iushrn(r,n,i)},s.prototype.shln=function(r){return this.clone().ishln(r)},s.prototype.ushln=function(r){return this.clone().iushln(r)},s.prototype.shrn=function(r){return this.clone().ishrn(r)},s.prototype.ushrn=function(r){return this.clone().iushrn(r)},s.prototype.testn=function(r){a("number"==typeof r&&r>=0);var n=r%26,i=(r-n)/26;return!(this.length<=i||!(this.words[i]&1<<n))},s.prototype.imaskn=function(r){a("number"==typeof r&&r>=0);var n=r%26,i=(r-n)/26;return(a(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)?this:(0!==n&&i++,this.length=Math.min(i,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},s.prototype.maskn=function(r){return this.clone().imaskn(r)},s.prototype.iaddn=function(r){return a("number"==typeof r),a(r<67108864),r<0?this.isubn(-r):0!==this.negative?(1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(r),this.negative=1),this):this._iaddn(r)},s.prototype._iaddn=function(r){this.words[0]+=r;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},s.prototype.isubn=function(r){if(a("number"==typeof r),a(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},s.prototype.addn=function(r){return this.clone().iaddn(r)},s.prototype.subn=function(r){return this.clone().isubn(r)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(r,n,i){var o,s,l=r.length+i;this._expand(l);var u=0;for(o=0;o<r.length;o++){s=(0|this.words[o+i])+u;var c=(0|r.words[o])*n;u=((s-=67108863&c)>>26)-(c/67108864|0),this.words[o+i]=67108863&s}for(;o<this.length-i;o++)u=(s=(0|this.words[o+i])+u)>>26,this.words[o+i]=67108863&s;if(0===u)return this.strip();for(a(-1===u),u=0,o=0;o<this.length;o++)u=(s=-(0|this.words[o])+u)>>26,this.words[o]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(r,n){var i=(this.length,r.length),a=this.clone(),o=r,l=0|o.words[o.length-1];0!=(i=26-this._countBits(l))&&(o=o.ushln(i),a.iushln(i),l=0|o.words[o.length-1]);var u,c=a.length-o.length;if("mod"!==n){(u=new s(null)).length=c+1,u.words=Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var h=a.clone()._ishlnsubmul(o,1,c);0===h.negative&&(a=h,u&&(u.words[c]=1));for(var p=c-1;p>=0;p--){var d=67108864*(0|a.words[o.length+p])+(0|a.words[o.length+p-1]);for(d=Math.min(d/l|0,67108863),a._ishlnsubmul(o,d,p);0!==a.negative;)d--,a.negative=0,a._ishlnsubmul(o,1,p),a.isZero()||(a.negative^=1);u&&(u.words[p]=d)}return u&&u.strip(),a.strip(),"div"!==n&&0!==i&&a.iushrn(i),{div:u||null,mod:a}},s.prototype.divmod=function(r,n,i){var o,l,u;return a(!r.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===r.negative?(u=this.neg().divmod(r,n),"mod"!==n&&(o=u.div.neg()),"div"!==n&&(l=u.mod.neg(),i&&0!==l.negative&&l.iadd(r)),{div:o,mod:l}):0===this.negative&&0!==r.negative?(u=this.divmod(r.neg(),n),"mod"!==n&&(o=u.div.neg()),{div:o,mod:u.mod}):0!=(this.negative&r.negative)?(u=this.neg().divmod(r.neg(),n),"div"!==n&&(l=u.mod.neg(),i&&0!==l.negative&&l.isub(r)),{div:u.div,mod:l}):r.length>this.length||0>this.cmp(r)?{div:new s(0),mod:this}:1===r.length?"div"===n?{div:this.divn(r.words[0]),mod:null}:"mod"===n?{div:null,mod:new s(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new s(this.modn(r.words[0]))}:this._wordDiv(r,n)},s.prototype.div=function(r){return this.divmod(r,"div",!1).div},s.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},s.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},s.prototype.divRound=function(r){var n=this.divmod(r);if(n.mod.isZero())return n.div;var i=0!==n.div.negative?n.mod.isub(r):n.mod,a=r.ushrn(1),o=r.andln(1),s=i.cmp(a);return s<0||1===o&&0===s?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},s.prototype.modn=function(r){a(r<=67108863);for(var n=67108864%r,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%r;return i},s.prototype.idivn=function(r){a(r<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/r|0,n=o%r}return this.strip()},s.prototype.divn=function(r){return this.clone().idivn(r)},s.prototype.egcd=function(r){a(0===r.negative),a(!r.isZero());var n=this,i=r.clone();n=0!==n.negative?n.umod(r):n.clone();for(var o=new s(1),l=new s(0),u=new s(0),c=new s(1),f=0;n.isEven()&&i.isEven();)n.iushrn(1),i.iushrn(1),++f;for(var h=i.clone(),p=n.clone();!n.isZero();){for(var d=0,v=1;0==(n.words[0]&v)&&d<26;++d,v<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(h),l.isub(p)),o.iushrn(1),l.iushrn(1);for(var g=0,y=1;0==(i.words[0]&y)&&g<26;++g,y<<=1);if(g>0)for(i.iushrn(g);g-- >0;)(u.isOdd()||c.isOdd())&&(u.iadd(h),c.isub(p)),u.iushrn(1),c.iushrn(1);n.cmp(i)>=0?(n.isub(i),o.isub(u),l.isub(c)):(i.isub(n),u.isub(o),c.isub(l))}return{a:u,b:c,gcd:i.iushln(f)}},s.prototype._invmp=function(r){a(0===r.negative),a(!r.isZero());var n=this,i=r.clone();n=0!==n.negative?n.umod(r):n.clone();for(var o,l=new s(1),u=new s(0),c=i.clone();n.cmpn(1)>0&&i.cmpn(1)>0;){for(var f=0,h=1;0==(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)l.isOdd()&&l.iadd(c),l.iushrn(1);for(var p=0,d=1;0==(i.words[0]&d)&&p<26;++p,d<<=1);if(p>0)for(i.iushrn(p);p-- >0;)u.isOdd()&&u.iadd(c),u.iushrn(1);n.cmp(i)>=0?(n.isub(i),l.isub(u)):(i.isub(n),u.isub(l))}return 0>(o=0===n.cmpn(1)?l:u).cmpn(0)&&o.iadd(r),o},s.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var n=this.clone(),i=r.clone();n.negative=0,i.negative=0;for(var a=0;n.isEven()&&i.isEven();a++)n.iushrn(1),i.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;i.isEven();)i.iushrn(1);var o=n.cmp(i);if(o<0){var s=n;n=i,i=s}else if(0===o||0===i.cmpn(1))break;n.isub(i)}return i.iushln(a)},s.prototype.invm=function(r){return this.egcd(r).a.umod(r)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(r){return this.words[0]&r},s.prototype.bincn=function(r){a("number"==typeof r);var n=r%26,i=(r-n)/26,o=1<<n;if(this.length<=i)return this._expand(i+1),this.words[i]|=o,this;for(var s=o,l=i;0!==s&&l<this.length;l++){var u=0|this.words[l];s=(u+=s)>>>26,u&=67108863,this.words[l]=u}return 0!==s&&(this.words[l]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(r){var n,i=r<0;if(0!==this.negative&&!i)return -1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)n=1;else{i&&(r=-r),a(r<=67108863,"Number is too big");var o=0|this.words[0];n=o===r?0:o<r?-1:1}return 0!==this.negative?0|-n:n},s.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return -1;if(0===this.negative&&0!==r.negative)return 1;var n=this.ucmp(r);return 0!==this.negative?0|-n:n},s.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return -1;for(var n=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],o=0|r.words[i];if(a!==o){a<o?n=-1:a>o&&(n=1);break}}return n},s.prototype.gtn=function(r){return 1===this.cmpn(r)},s.prototype.gt=function(r){return 1===this.cmp(r)},s.prototype.gten=function(r){return this.cmpn(r)>=0},s.prototype.gte=function(r){return this.cmp(r)>=0},s.prototype.ltn=function(r){return -1===this.cmpn(r)},s.prototype.lt=function(r){return -1===this.cmp(r)},s.prototype.lten=function(r){return 0>=this.cmpn(r)},s.prototype.lte=function(r){return 0>=this.cmp(r)},s.prototype.eqn=function(r){return 0===this.cmpn(r)},s.prototype.eq=function(r){return 0===this.cmp(r)},s.red=function(r){return new A(r)},s.prototype.toRed=function(r){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},s.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(r){return this.red=r,this},s.prototype.forceRed=function(r){return a(!this.red,"Already a number in reduction context"),this._forceRed(r)},s.prototype.redAdd=function(r){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},s.prototype.redIAdd=function(r){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},s.prototype.redSub=function(r){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},s.prototype.redISub=function(r){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},s.prototype.redShl=function(r){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},s.prototype.redMul=function(r){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},s.prototype.redIMul=function(r){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},s.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(r){return a(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var x={k256:null,p224:null,p192:null,p25519:null};function b(r,n){this.name=r,this.p=new s(n,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(r){if("string"==typeof r){var n=s._prime(r);this.m=n.p,this.prime=n}else a(r.gtn(1),"modulus must be greater than 1"),this.m=r,this.prime=null}function M(r){A.call(this,r),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var r=new s(null);return r.words=Array(Math.ceil(this.n/13)),r},b.prototype.ireduce=function(r){var n,i=r;do this.split(i,this.tmp),n=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength();while(n>this.n);var a=n<this.n?-1:i.ucmp(this.p);return 0===a?(i.words[0]=0,i.length=1):a>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(r,n){r.iushrn(this.n,0,n)},b.prototype.imulK=function(r){return r.imul(this.k)},o(_,b),_.prototype.split=function(r,n){for(var i=Math.min(r.length,9),a=0;a<i;a++)n.words[a]=r.words[a];if(n.length=i,r.length<=9)return r.words[0]=0,void(r.length=1);var o=r.words[9];for(n.words[n.length++]=4194303&o,a=10;a<r.length;a++){var s=0|r.words[a];r.words[a-10]=(4194303&s)<<4|o>>>22,o=s}o>>>=22,r.words[a-10]=o,0===o&&r.length>10?r.length-=10:r.length-=9},_.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var n=0,i=0;i<r.length;i++){var a=0|r.words[i];n+=977*a,r.words[i]=67108863&n,n=64*a+(n/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},o(w,b),o(T,b),o(k,b),k.prototype.imulK=function(r){for(var n=0,i=0;i<r.length;i++){var a=19*(0|r.words[i])+n,o=67108863&a;a>>>=26,r.words[i]=o,n=a}return 0!==n&&(r.words[r.length++]=n),r},s._prime=function(r){var n;if(x[r])return x[r];if("k256"===r)n=new _;else if("p224"===r)n=new w;else if("p192"===r)n=new T;else{if("p25519"!==r)throw Error("Unknown prime "+r);n=new k}return x[r]=n,n},A.prototype._verify1=function(r){a(0===r.negative,"red works only with positives"),a(r.red,"red works only with red numbers")},A.prototype._verify2=function(r,n){a(0==(r.negative|n.negative),"red works only with positives"),a(r.red&&r.red===n.red,"red works only with red numbers")},A.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},A.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},A.prototype.add=function(r,n){this._verify2(r,n);var i=r.add(n);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},A.prototype.iadd=function(r,n){this._verify2(r,n);var i=r.iadd(n);return i.cmp(this.m)>=0&&i.isub(this.m),i},A.prototype.sub=function(r,n){this._verify2(r,n);var i=r.sub(n);return 0>i.cmpn(0)&&i.iadd(this.m),i._forceRed(this)},A.prototype.isub=function(r,n){this._verify2(r,n);var i=r.isub(n);return 0>i.cmpn(0)&&i.iadd(this.m),i},A.prototype.shl=function(r,n){return this._verify1(r),this.imod(r.ushln(n))},A.prototype.imul=function(r,n){return this._verify2(r,n),this.imod(r.imul(n))},A.prototype.mul=function(r,n){return this._verify2(r,n),this.imod(r.mul(n))},A.prototype.isqr=function(r){return this.imul(r,r.clone())},A.prototype.sqr=function(r){return this.mul(r,r)},A.prototype.sqrt=function(r){if(r.isZero())return r.clone();var n=this.m.andln(3);if(a(n%2==1),3===n){var i=this.m.add(new s(1)).iushrn(2);return this.pow(r,i)}for(var o=this.m.subn(1),l=0;!o.isZero()&&0===o.andln(1);)l++,o.iushrn(1);a(!o.isZero());var u=new s(1).toRed(this),c=u.redNeg(),f=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,f).cmp(c);)h.redIAdd(c);for(var p=this.pow(h,o),d=this.pow(r,o.addn(1).iushrn(1)),v=this.pow(r,o),g=l;0!==v.cmp(u);){for(var y=v,m=0;0!==y.cmp(u);m++)y=y.redSqr();a(m<g);var x=this.pow(p,new s(1).iushln(g-m-1));d=d.redMul(x),p=x.redSqr(),v=v.redMul(p),g=m}return d},A.prototype.invm=function(r){var n=r._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},A.prototype.pow=function(r,n){if(n.isZero())return new s(1).toRed(this);if(0===n.cmpn(1))return r.clone();var i=Array(16);i[0]=new s(1).toRed(this),i[1]=r;for(var a=2;a<i.length;a++)i[a]=this.mul(i[a-1],r);var o=i[0],l=0,u=0,c=n.bitLength()%26;for(0===c&&(c=26),a=n.length-1;a>=0;a--){for(var f=n.words[a],h=c-1;h>=0;h--){var p=f>>h&1;o!==i[0]&&(o=this.sqr(o)),0!==p||0!==l?(l<<=1,l|=p,(4==++u||0===a&&0===h)&&(o=this.mul(o,i[l]),u=0,l=0)):u=0}c=26}return o},A.prototype.convertTo=function(r){var n=r.umod(this.m);return n===r?n.clone():n},A.prototype.convertFrom=function(r){var n=r.clone();return n.red=null,n},s.mont=function(r){return new M(r)},o(M,A),M.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},M.prototype.convertFrom=function(r){var n=this.imod(r.mul(this.rinv));return n.red=null,n},M.prototype.imul=function(r,n){if(r.isZero()||n.isZero())return r.words[0]=0,r.length=1,r;var i=r.imul(n),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(a).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):0>o.cmpn(0)&&(s=o.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(r,n){if(r.isZero()||n.isZero())return new s(0)._forceRed(this);var i=r.mul(n),a=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=i.isub(a).iushrn(this.shift),l=o;return o.cmp(this.m)>=0?l=o.isub(this.m):0>o.cmpn(0)&&(l=o.iadd(this.m)),l._forceRed(this)},M.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(r=i.nmd(r),this)},2692:function(r){"use strict";r.exports=function(r){var n,i,a,o=r.length,s=0;for(n=0;n<o;++n)s+=r[n].length;var l=Array(s),u=0;for(n=0;n<o;++n){var c=r[n],f=c.length;for(i=0;i<f;++i){var h=l[u++]=Array(f-1),p=0;for(a=0;a<f;++a)a!==i&&(h[p++]=c[a]);if(1&i){var d=h[1];h[1]=h[0],h[0]=d}}}return l}},2569:function(r,n,i){"use strict";r.exports=function(r,n,i){switch(arguments.length){case 1:return a=[],c(r,r,f,!0),a;case 2:return"function"==typeof n?c(r,r,n,!0):(a=[],c(r,n,f,!1),a);case 3:return c(r,n,i,!1);default:throw Error("box-intersect: Invalid arguments")}};var a,o=i(5306),s=i(1390),l=i(2337);function u(r,n,i,a){for(var o=0,s=0,l=0,u=r.length;l<u;++l){var c=r[l];if(!function(r,n){for(var i=0;i<r;++i)if(!(n[i]<=n[i+r]))return!0;return!1}(n,c)){for(var f=0;f<2*n;++f)i[o++]=c[f];a[s++]=l}}return s}function c(r,n,i,a){var c=r.length,f=n.length;if(!(c<=0||f<=0)){var h=r[0].length>>>1;if(!(h<=0)){var p,d=o.mallocDouble(2*h*c),v=o.mallocInt32(c);if((c=u(r,h,d,v))>0){if(1===h&&a)s.init(c),p=s.sweepComplete(h,i,0,c,d,v,0,c,d,v);else{var g=o.mallocDouble(2*h*f),y=o.mallocInt32(f);(f=u(n,h,g,y))>0&&(s.init(c+f),p=1===h?s.sweepBipartite(h,i,0,c,d,v,0,f,g,y):l(h,i,a,c,d,v,f,g,y),o.free(g),o.free(y))}o.free(d),o.free(v)}return p}}}function f(r,n){a.push([r,n])}},7333:function(r,n){"use strict";function i(r){return r?function(r,n,i,a,o,s,l,u,c,f,h){return o-a>c-u?function(r,n,i,a,o,s,l,u,c,f,h){for(var p=2*r,d=a,v=p*a;d<o;++d,v+=p){var g=s[n+v],y=s[n+v+r],m=l[d];t:for(var x=u,b=p*u;x<c;++x,b+=p){var _=f[n+b],w=f[n+b+r],T=h[x];if(!(w<g||y<_)){for(var k=n+1;k<r;++k){var A=s[k+v],M=s[k+r+v],S=f[k+b],E=f[k+r+b];if(M<S||E<A)continue t}var L=i(m,T);if(void 0!==L)return L}}}}(r,n,i,a,o,s,l,u,c,f,h):function(r,n,i,a,o,s,l,u,c,f,h){for(var p=2*r,d=u,v=p*u;d<c;++d,v+=p){var g=f[n+v],y=f[n+v+r],m=h[d];t:for(var x=a,b=p*a;x<o;++x,b+=p){var _=s[n+b],w=s[n+b+r],T=l[x];if(!(y<_||w<g)){for(var k=n+1;k<r;++k){var A=s[k+b],M=s[k+r+b],S=f[k+v],E=f[k+r+v];if(M<S||E<A)continue t}var L=i(T,m);if(void 0!==L)return L}}}}(r,n,i,a,o,s,l,u,c,f,h)}:function(r,n,i,a,o,s,l,u,c,f,h,p){return s-o>f-c?a?function(r,n,i,a,o,s,l,u,c,f,h){for(var p=2*r,d=a,v=p*a;d<o;++d,v+=p){var g=s[n+v],y=s[n+v+r],m=l[d];t:for(var x=u,b=p*u;x<c;++x,b+=p){var _=f[n+b],w=h[x];if(!(_<=g||y<_)){for(var T=n+1;T<r;++T){var k=s[T+v],A=s[T+r+v],M=f[T+b],S=f[T+r+b];if(A<M||S<k)continue t}var E=i(w,m);if(void 0!==E)return E}}}}(r,n,i,o,s,l,u,c,f,h,p):function(r,n,i,a,o,s,l,u,c,f,h){for(var p=2*r,d=a,v=p*a;d<o;++d,v+=p){var g=s[n+v],y=s[n+v+r],m=l[d];t:for(var x=u,b=p*u;x<c;++x,b+=p){var _=f[n+b],w=h[x];if(!(_<g||y<_)){for(var T=n+1;T<r;++T){var k=s[T+v],A=s[T+r+v],M=f[T+b],S=f[T+r+b];if(A<M||S<k)continue t}var E=i(m,w);if(void 0!==E)return E}}}}(r,n,i,o,s,l,u,c,f,h,p):a?function(r,n,i,a,o,s,l,u,c,f,h){for(var p=2*r,d=u,v=p*u;d<c;++d,v+=p){var g=f[n+v],y=h[d];t:for(var m=a,x=p*a;m<o;++m,x+=p){var b=s[n+x],_=s[n+x+r],w=l[m];if(!(g<=b||_<g)){for(var T=n+1;T<r;++T){var k=s[T+x],A=s[T+r+x],M=f[T+v],S=f[T+r+v];if(A<M||S<k)continue t}var E=i(y,w);if(void 0!==E)return E}}}}(r,n,i,o,s,l,u,c,f,h,p):function(r,n,i,a,o,s,l,u,c,f,h){for(var p=2*r,d=u,v=p*u;d<c;++d,v+=p){var g=f[n+v],y=h[d];t:for(var m=a,x=p*a;m<o;++m,x+=p){var b=s[n+x],_=s[n+x+r],w=l[m];if(!(g<b||_<g)){for(var T=n+1;T<r;++T){var k=s[T+x],A=s[T+r+x],M=f[T+v],S=f[T+r+v];if(A<M||S<k)continue t}var E=i(w,y);if(void 0!==E)return E}}}}(r,n,i,o,s,l,u,c,f,h,p)}}n.partial=i(!1),n.full=i(!0)},2337:function(r,n,i){"use strict";r.exports=function(r,n,i,s,h,S,E,L,C){O=s+E,P=8*o.log2(O+1)*(r+1)|0,I=o.nextPow2(w*P),k.length<I&&(a.free(k),k=a.mallocInt32(I)),D=o.nextPow2(T*P),A.length<D&&(a.free(A),A=a.mallocDouble(D));var O,P,I,D,z,R=0,F=2*r;for(M(R++,0,0,s,0,E,i?16:0,-1/0,1/0),i||M(R++,0,0,E,0,s,1,-1/0,1/0);R>0;){var B=(R-=1)*w,N=k[B],j=k[B+1],U=k[B+2],V=k[B+3],H=k[B+4],q=k[B+5],G=R*T,Z=A[G],Y=A[G+1],W=1&q,X=!!(16&q),J=h,K=S,$=L,Q=C;if(W&&(J=L,K=C,$=h,Q=S),!(2&q&&j>=(U=m(r,N,j,U,J,K,Y))||4&q&&(j=x(r,N,j,U,J,K,Z))>=U)){var tt=U-j,te=H-V;if(X){if(r*tt*(tt+te)<v){if(void 0!==(z=c.scanComplete(r,N,n,j,U,J,K,V,H,$,Q)))return z;continue}}else{if(r*Math.min(tt,te)<p){if(void 0!==(z=l(r,N,n,W,j,U,J,K,V,H,$,Q)))return z;continue}if(r*tt*te<d){if(void 0!==(z=c.scanBipartite(r,N,n,W,j,U,J,K,V,H,$,Q)))return z;continue}}var tr=g(r,N,j,U,J,K,Z,Y);if(j<tr){if(r*(tr-j)<p){if(void 0!==(z=u(r,N+1,n,j,tr,J,K,V,H,$,Q)))return z}else if(N===r-2){if(void 0!==(z=W?c.sweepBipartite(r,n,V,H,$,Q,j,tr,J,K):c.sweepBipartite(r,n,j,tr,J,K,V,H,$,Q)))return z}else M(R++,N+1,j,tr,V,H,W,-1/0,1/0),M(R++,N+1,V,H,j,tr,1^W,-1/0,1/0)}if(tr<U){var tn,ti=f(r,N,V,H,$,Q),ta=$[F*ti+N],to=y(r,N,ti,H,$,Q,ta);if(to<H&&M(R++,N,tr,U,to,H,(4|W)+(X?16:0),ta,Y),V<ti&&M(R++,N,tr,U,V,ti,(2|W)+(X?16:0),Z,ta),ti+1===to){if(void 0!==(z=X?function(r,n,i,a,o,s,l,u,c,f){var h=2*r,p=u*h,d=c[p+n];t:for(var v=a,g=a*h;v<o;++v,g+=h){var y=l[v];if(y!==f){var m=s[g+n],x=s[g+n+r];if(!(d<m||x<d)){for(var b=n+1;b<r;++b){m=s[g+b],x=s[g+b+r];var _=c[p+b],w=c[p+b+r];if(x<_||w<m)continue t}var T=i(y,f);if(void 0!==T)return T}}}}(r,N,n,tr,U,J,K,ti,$,Q[ti]):function(r,n,i,a,o,s,l,u,c,f,h){var p=2*r,d=c*p,v=f[d+n];t:for(var g=o,y=o*p;g<s;++g,y+=p){var m=l[y+n],x=l[y+n+r];if(!(v<m||x<v||a&&v===m)){for(var b,_=u[g],w=n+1;w<r;++w){m=l[y+w],x=l[y+w+r];var T=f[d+w],k=f[d+w+r];if(x<T||k<m)continue t}if(void 0!==(b=a?i(h,_):i(_,h)))return b}}}(r,N,n,W,tr,U,J,K,ti,$,Q[ti])))return z}else if(ti<to){if(X){if(tr<(tn=b(r,N,tr,U,J,K,ta))){var ts=y(r,N,tr,tn,J,K,ta);if(N===r-2){if(tr<ts&&void 0!==(z=c.sweepComplete(r,n,tr,ts,J,K,ti,to,$,Q))||ts<tn&&void 0!==(z=c.sweepBipartite(r,n,ts,tn,J,K,ti,to,$,Q)))return z}else tr<ts&&M(R++,N+1,tr,ts,ti,to,16,-1/0,1/0),ts<tn&&(M(R++,N+1,ts,tn,ti,to,0,-1/0,1/0),M(R++,N+1,ti,to,ts,tn,1,-1/0,1/0))}}else tr<(tn=W?_(r,N,tr,U,J,K,ta):b(r,N,tr,U,J,K,ta))&&(N===r-2?z=W?c.sweepBipartite(r,n,ti,to,$,Q,tr,tn,J,K):c.sweepBipartite(r,n,tr,tn,J,K,ti,to,$,Q):(M(R++,N+1,tr,tn,ti,to,W,-1/0,1/0),M(R++,N+1,ti,to,tr,tn,1^W,-1/0,1/0)))}}}}};var a=i(5306),o=i(2288),s=i(7333),l=s.partial,u=s.full,c=i(1390),f=i(2464),h=i(122),p=128,d=4194304,v=4194304,g=h("!(lo>=p0)&&!(p1>=hi)"),y=h("lo===p0"),m=h("lo<p0"),x=h("hi<=p0"),b=h("lo<=p0&&p0<=hi"),_=h("lo<p0&&p0<=hi"),w=6,T=2,k=a.mallocInt32(1024),A=a.mallocDouble(1024);function M(r,n,i,a,o,s,l,u,c){var f=w*r;k[f]=n,k[f+1]=i,k[f+2]=a,k[f+3]=o,k[f+4]=s,k[f+5]=l;var h=T*r;A[h]=u,A[h+1]=c}},2464:function(r,n,i){"use strict";r.exports=function(r,n,i,s,l,u){if(s<=i+1)return i;for(var c=i,f=s,h=s+i>>>1,p=2*r,d=h,v=l[p*h+n];c<f;){if(f-c<o){(function(r,n,i,a,o,s){for(var l=2*r,u=l*(i+1)+n,c=i+1;c<a;++c,u+=l)for(var f=o[u],h=c,p=l*(c-1);h>i&&o[p+n]>f;--h,p-=l){for(var d=p,v=p+l,g=0;g<l;++g,++d,++v){var y=o[d];o[d]=o[v],o[v]=y}var m=s[h];s[h]=s[h-1],s[h-1]=m}})(r,n,c,f,l,u),v=l[p*h+n];break}var g=f-c,y=Math.random()*g+c|0,m=l[p*y+n],x=Math.random()*g+c|0,b=l[p*x+n],_=Math.random()*g+c|0,w=l[p*_+n];m<=b?w>=b?(d=x,v=b):m>=w?(d=y,v=m):(d=_,v=w):b>=w?(d=x,v=b):w>=m?(d=y,v=m):(d=_,v=w);for(var T=p*(f-1),k=p*d,A=0;A<p;++A,++T,++k){var M=l[T];l[T]=l[k],l[k]=M}var S=u[f-1];for(u[f-1]=u[d],u[d]=S,T=p*(f-1),k=p*(d=a(r,n,c,f-1,l,u,v)),A=0;A<p;++A,++T,++k)M=l[T],l[T]=l[k],l[k]=M;if(S=u[f-1],u[f-1]=u[d],u[d]=S,h<d){for(f=d-1;c<f&&l[p*(f-1)+n]===v;)f-=1;f+=1}else{if(!(d<h))break;for(c=d+1;c<f&&l[p*c+n]===v;)c+=1}}return a(r,n,i,h,l,u,l[p*h+n])};var a=i(122)("lo<p0"),o=8},122:function(r){"use strict";r.exports=function(r){return n[r]};var n={"lo===p0":function(r,n,i,a,o,s,l){for(var u=2*r,c=u*i,f=c,h=i,p=i;a>p;++p,c+=u)if(o[c+n]===l){if(h===p)h+=1,f+=u;else{for(var d=0;u>d;++d){var v=o[c+d];o[c+d]=o[f],o[f++]=v}var g=s[p];s[p]=s[h],s[h++]=g}}return h},"lo<p0":function(r,n,i,a,o,s,l){for(var u=2*r,c=u*i,f=c,h=i,p=i;a>p;++p,c+=u)if(o[c+n]<l){if(h===p)h+=1,f+=u;else{for(var d=0;u>d;++d){var v=o[c+d];o[c+d]=o[f],o[f++]=v}var g=s[p];s[p]=s[h],s[h++]=g}}return h},"lo<=p0":function(r,n,i,a,o,s,l){for(var u=2*r,c=u*i,f=c,h=i,p=r+n,d=i;a>d;++d,c+=u)if(o[c+p]<=l){if(h===d)h+=1,f+=u;else{for(var v=0;u>v;++v){var g=o[c+v];o[c+v]=o[f],o[f++]=g}var y=s[d];s[d]=s[h],s[h++]=y}}return h},"hi<=p0":function(r,n,i,a,o,s,l){for(var u=2*r,c=u*i,f=c,h=i,p=r+n,d=i;a>d;++d,c+=u)if(o[c+p]<=l){if(h===d)h+=1,f+=u;else{for(var v=0;u>v;++v){var g=o[c+v];o[c+v]=o[f],o[f++]=g}var y=s[d];s[d]=s[h],s[h++]=y}}return h},"lo<p0&&p0<=hi":function(r,n,i,a,o,s,l){for(var u=2*r,c=u*i,f=c,h=i,p=r+n,d=i;a>d;++d,c+=u){var v=o[c+n],g=o[c+p];if(v<l&&l<=g){if(h===d)h+=1,f+=u;else{for(var y=0;u>y;++y){var m=o[c+y];o[c+y]=o[f],o[f++]=m}var x=s[d];s[d]=s[h],s[h++]=x}}}return h},"lo<=p0&&p0<=hi":function(r,n,i,a,o,s,l){for(var u=2*r,c=u*i,f=c,h=i,p=r+n,d=i;a>d;++d,c+=u){var v=o[c+n],g=o[c+p];if(v<=l&&l<=g){if(h===d)h+=1,f+=u;else{for(var y=0;u>y;++y){var m=o[c+y];o[c+y]=o[f],o[f++]=m}var x=s[d];s[d]=s[h],s[h++]=x}}}return h},"!(lo>=p0)&&!(p1>=hi)":function(r,n,i,a,o,s,l,u){for(var c=2*r,f=c*i,h=f,p=i,d=r+n,v=i;a>v;++v,f+=c){var g=o[f+n],y=o[f+d];if(!(g>=l||u>=y)){if(p===v)p+=1,h+=c;else{for(var m=0;c>m;++m){var x=o[f+m];o[f+m]=o[h],o[h++]=x}var b=s[v];s[v]=s[p],s[p++]=b}}}return p}}},309:function(r){"use strict";r.exports=function(r,c){c<=4*n?i(0,c-1,r):function r(c,f,h){var p=(f-c+1)/6|0,d=c+p,v=f-p,g=c+f>>1,y=g-p,m=g+p,x=d,b=y,_=g,w=m,T=v,k=c+1,A=f-1,M=0;l(x,b,h)&&(M=x,x=b,b=M),l(w,T,h)&&(M=w,w=T,T=M),l(x,_,h)&&(M=x,x=_,_=M),l(b,_,h)&&(M=b,b=_,_=M),l(x,w,h)&&(M=x,x=w,w=M),l(_,w,h)&&(M=_,_=w,w=M),l(b,T,h)&&(M=b,b=T,T=M),l(b,_,h)&&(M=b,b=_,_=M),l(w,T,h)&&(M=w,w=T,T=M);for(var S=h[2*b],E=h[2*b+1],L=h[2*w],C=h[2*w+1],O=2*x,P=2*_,I=2*T,D=2*d,z=2*g,R=2*v,F=0;F<2;++F){var B=h[O+F],N=h[P+F],j=h[I+F];h[D+F]=B,h[z+F]=N,h[R+F]=j}o(y,c,h),o(m,f,h);for(var U=k;U<=A;++U)if(u(U,S,E,h))U!==k&&a(U,k,h),++k;else if(!u(U,L,C,h))for(;;){if(u(A,L,C,h)){u(A,S,E,h)?(function(r,n,i,a){n*=2,i*=2;var o=a[r*=2],s=a[r+1];a[r]=a[n],a[r+1]=a[n+1],a[n]=a[i],a[n+1]=a[i+1],a[i]=o,a[i+1]=s}(U,k,A,h),++k):a(U,A,h),--A;break}if(--A<U)break}s(c,k-1,S,E,h),s(f,A+1,L,C,h),k-2-c<=n?i(c,k-2,h):r(c,k-2,h),f-(A+2)<=n?i(A+2,f,h):r(A+2,f,h),A-k<=n?i(k,A,h):r(k,A,h)}(0,c-1,r)};var n=32;function i(r,n,i){for(var a=2*(r+1),o=r+1;o<=n;++o){for(var s=i[a++],l=i[a++],u=o,c=a-2;u-- >r;){var f=i[c-2],h=i[c-1];if(f<s||f===s&&h<l)break;i[c]=f,i[c+1]=h,c-=2}i[c]=s,i[c+1]=l}}function a(r,n,i){n*=2;var a=i[r*=2],o=i[r+1];i[r]=i[n],i[r+1]=i[n+1],i[n]=a,i[n+1]=o}function o(r,n,i){n*=2,i[r*=2]=i[n],i[r+1]=i[n+1]}function s(r,n,i,a,o){n*=2,o[r*=2]=o[n],o[n]=i,o[r+1]=o[n+1],o[n+1]=a}function l(r,n,i){n*=2;var a=i[r*=2],o=i[n];return!(a<o)&&(a!==o||i[r+1]>i[n+1])}function u(r,n,i,a){var o=a[r*=2];return o<n||o===n&&a[r+1]<i}},1390:function(r,n,i){"use strict";r.exports={init:function(r){var n=o.nextPow2(r);u.length<n&&(a.free(u),u=a.mallocInt32(n)),c.length<n&&(a.free(c),c=a.mallocInt32(n)),f.length<n&&(a.free(f),f=a.mallocInt32(n)),h.length<n&&(a.free(h),h=a.mallocInt32(n)),p.length<n&&(a.free(p),p=a.mallocInt32(n)),d.length<n&&(a.free(d),d=a.mallocInt32(n));var i=8*n;v.length<i&&(a.free(v),v=a.mallocDouble(i))},sweepBipartite:function(r,n,i,a,o,p,d,m,x,b){for(var _=0,w=2*r,T=r-1,k=w-1,A=i;A<a;++A){var M=p[A],S=w*A;v[_++]=o[S+T],v[_++]=-(M+1),v[_++]=o[S+k],v[_++]=M}for(A=d;A<m;++A){M=b[A]+l;var E=w*A;v[_++]=x[E+T],v[_++]=-M,v[_++]=x[E+k],v[_++]=M}var L=_>>>1;s(v,L);var C=0,O=0;for(A=0;A<L;++A){var P,I=0|v[2*A+1];if(I>=l)g(f,h,O--,I=I-l|0);else if(I>=0)g(u,c,C--,I);else if(I<=-l){I=-I-l|0;for(var D=0;D<C;++D)if(void 0!==(P=n(u[D],I)))return P;y(f,h,O++,I)}else{for(I=-I-1|0,D=0;D<O;++D)if(void 0!==(P=n(I,f[D])))return P;y(u,c,C++,I)}}},sweepComplete:function(r,n,i,a,o,l,m,x,b,_){for(var w=0,T=2*r,k=r-1,A=T-1,M=i;M<a;++M){var S=l[M]+1<<1,E=T*M;v[w++]=o[E+k],v[w++]=-S,v[w++]=o[E+A],v[w++]=S}for(M=m;M<x;++M){S=_[M]+1<<1;var L=T*M;v[w++]=b[L+k],v[w++]=1|-S,v[w++]=b[L+A],v[w++]=1|S}var C=w>>>1;s(v,C);var O=0,P=0,I=0;for(M=0;M<C;++M){var D=0|v[2*M+1],z=1&D;if(M<C-1&&D>>1==v[2*M+3]>>1&&(z=2,M+=1),D<0){for(var R,F=-(D>>1)-1,B=0;B<I;++B)if(void 0!==(R=n(p[B],F)))return R;if(0!==z){for(B=0;B<O;++B)if(void 0!==(R=n(u[B],F)))return R}if(1!==z){for(B=0;B<P;++B)if(void 0!==(R=n(f[B],F)))return R}0===z?y(u,c,O++,F):1===z?y(f,h,P++,F):2===z&&y(p,d,I++,F)}else F=(D>>1)-1,0===z?g(u,c,O--,F):1===z?g(f,h,P--,F):2===z&&g(p,d,I--,F)}},scanBipartite:function(r,n,i,a,o,f,h,p,d,m,x,b){var _=0,w=2*r,T=n+r,k=1,A=1;a?A=l:k=l;for(var M=o;M<f;++M){var S=M+k,E=w*M;v[_++]=h[E+n],v[_++]=-S,v[_++]=h[E+T],v[_++]=S}for(M=d;M<m;++M){S=M+A;var L=w*M;v[_++]=x[L+n],v[_++]=-S}var C=_>>>1;s(v,C);var O=0;for(M=0;M<C;++M){var P=0|v[2*M+1];if(P<0){var I=!1;if((S=-P)>=l?(I=!a,S-=l):(I=!!a,S-=1),I)y(u,c,O++,S);else{var D=b[S],z=w*S,R=x[z+n+1],F=x[z+n+1+r];t:for(var B=0;B<O;++B){var N=u[B],j=w*N;if(!(F<h[j+n+1]||h[j+n+1+r]<R)){for(var U=n+2;U<r;++U)if(x[z+U+r]<h[j+U]||h[j+U+r]<x[z+U])continue t;var V,H=p[N];if(void 0!==(V=a?i(D,H):i(H,D)))return V}}}}else g(u,c,O--,P-k)}},scanComplete:function(r,n,i,a,o,c,f,h,p,d,g){for(var y=0,m=2*r,x=n+r,b=a;b<o;++b){var _=b+l,w=m*b;v[y++]=c[w+n],v[y++]=-_,v[y++]=c[w+x],v[y++]=_}for(b=h;b<p;++b){_=b+1;var T=m*b;v[y++]=d[T+n],v[y++]=-_}var k=y>>>1;s(v,k);var A=0;for(b=0;b<k;++b){var M=0|v[2*b+1];if(M<0){if((_=-M)>=l)u[A++]=_-l;else{var S=g[_-=1],E=m*_,L=d[E+n+1],C=d[E+n+1+r];t:for(var O=0;O<A;++O){var P=u[O],I=f[P];if(I===S)break;var D=m*P;if(!(C<c[D+n+1]||c[D+n+1+r]<L)){for(var z=n+2;z<r;++z)if(d[E+z+r]<c[D+z]||c[D+z+r]<d[E+z])continue t;var R=i(I,S);if(void 0!==R)return R}}}}else{for(_=M-l,O=A-1;O>=0;--O)if(u[O]===_){for(z=O+1;z<A;++z)u[z-1]=u[z];break}--A}}}};var a=i(5306),o=i(2288),s=i(309),l=268435456,u=a.mallocInt32(1024),c=a.mallocInt32(1024),f=a.mallocInt32(1024),h=a.mallocInt32(1024),p=a.mallocInt32(1024),d=a.mallocInt32(1024),v=a.mallocDouble(8192);function g(r,n,i,a){var o=n[a],s=r[i-1];r[o]=s,n[s]=o}function y(r,n,i,a){r[i]=a,n[a]=i}},7761:function(r,n,i){"use strict";var a=i(9971),o=i(743),s=i(2161),l=i(7098);function u(r){return[Math.min(r[0],r[1]),Math.max(r[0],r[1])]}function c(r,n){return r[0]-n[0]||r[1]-n[1]}function f(r,n,i){return n in r?r[n]:i}r.exports=function(r,n,i){Array.isArray(n)?(i=i||{},n=n||[]):(i=n||{},n=[]);var h=!!f(i,"delaunay",!0),p=!!f(i,"interior",!0),d=!!f(i,"exterior",!0),v=!!f(i,"infinity",!1);if(!p&&!d||0===r.length)return[];var g=a(r,n);if(h||p!==d||v){for(var y=o(r.length,n.map(u).sort(c)),m=0;m<g.length;++m){var x=g[m];y.addTriangle(x[0],x[1],x[2])}return h&&s(r,y),d?p?v?l(y,0,v):y.cells():l(y,1,v):l(y,-1)}return g}},2161:function(r,n,i){"use strict";var a=i(2227)[4];function o(r,n,i,o,s,l){var u=n.opposite(o,s);if(!(u<0)){if(s<o){var c=o;o=s,s=c,c=l,l=u,u=c}n.isConstraint(o,s)||0>a(r[o],r[s],r[l],r[u])&&i.push(o,s)}}i(5070),r.exports=function(r,n){for(var i=[],s=r.length,l=n.stars,u=0;u<s;++u)for(var c=l[u],f=1;f<c.length;f+=2)if(!((v=c[f])<u||n.isConstraint(u,v))){for(var h=c[f-1],p=-1,d=1;d<c.length;d+=2)if(c[d-1]===v){p=c[d];break}p<0||0>a(r[u],r[v],r[h],r[p])&&i.push(u,v)}for(;i.length>0;){for(var v=i.pop(),g=(h=-1,p=-1,c=l[u=i.pop()],1);g<c.length;g+=2){var y=c[g-1],m=c[g];y===v?p=m:m===v&&(h=y)}h<0||p<0||a(r[u],r[v],r[h],r[p])>=0||(n.flip(u,v),o(r,n,i,h,u,p),o(r,n,i,u,p,h),o(r,n,i,p,v,h),o(r,n,i,v,h,p))}}},7098:function(r,n,i){"use strict";var a,o=i(5070);function s(r,n,i,a,o,s,l){this.cells=r,this.neighbor=n,this.flags=a,this.constraint=i,this.active=o,this.next=s,this.boundary=l}function l(r,n){return r[0]-n[0]||r[1]-n[1]||r[2]-n[2]}r.exports=function(r,n,i){var a=function(r,n){for(var i=r.cells(),a=i.length,o=0;o<a;++o){var u=(x=i[o])[0],c=x[1],f=x[2];c<f?c<u&&(x[0]=c,x[1]=f,x[2]=u):f<u&&(x[0]=f,x[1]=u,x[2]=c)}i.sort(l);var h=Array(a);for(o=0;o<h.length;++o)h[o]=0;var p=[],d=[],v=Array(3*a),g=Array(3*a),y=null;n&&(y=[]);var m=new s(i,v,g,h,p,d,y);for(o=0;o<a;++o)for(var x=i[o],b=0;b<3;++b){u=x[b],c=x[(b+1)%3];var _=v[3*o+b]=m.locate(c,u,r.opposite(c,u)),w=g[3*o+b]=r.isConstraint(u,c);_<0&&(w?d.push(o):(p.push(o),h[o]=1),n&&y.push([c,u,-1]))}return m}(r,i);if(0===n)return i?a.cells.concat(a.boundary):a.cells;for(var o=1,u=a.active,c=a.next,f=a.flags,h=a.cells,p=a.constraint,d=a.neighbor;u.length>0||c.length>0;){for(;u.length>0;){var v=u.pop();if(f[v]!==-o){f[v]=o,h[v];for(var g=0;g<3;++g){var y=d[3*v+g];y>=0&&0===f[y]&&(p[3*v+g]?c.push(y):(u.push(y),f[y]=o))}}}var m=c;c=u,u=m,c.length=0,o=-o}var x=function(r,n,i){for(var a=0,o=0;o<r.length;++o)n[o]===i&&(r[a++]=r[o]);return r.length=a,r}(h,f,n);return i?x.concat(a.boundary):x},s.prototype.locate=(a=[0,0,0],function(r,n,i){var s=r,u=n,c=i;return n<i?n<r&&(s=n,u=i,c=r):i<r&&(s=i,u=r,c=n),s<0?-1:(a[0]=s,a[1]=u,a[2]=c,o.eq(this.cells,a,l))})},9971:function(r,n,i){"use strict";var a=i(5070),o=i(417)[3];function s(r,n,i,a,o){this.a=r,this.b=n,this.idx=i,this.lowerIds=a,this.upperIds=o}function l(r,n,i,a){this.a=r,this.b=n,this.type=i,this.idx=a}function u(r,n){var i=r.a[0]-n.a[0]||r.a[1]-n.a[1]||r.type-n.type;return i||(0!==r.type&&(i=o(r.a,r.b,n.b))?i:r.idx-n.idx)}function c(r,n){return o(r.a,r.b,n)}function f(r,n){var i;return(i=r.a[0]<n.a[0]?o(r.a,r.b,n.a):o(n.b,n.a,r.a))?i:(i=n.b[0]<r.b[0]?o(r.a,r.b,n.b):o(n.b,n.a,r.b))||r.idx-n.idx}r.exports=function(r,n){for(var i=r.length,h=n.length,p=[],d=0;d<i;++d)p.push(new l(r[d],null,0,d));for(d=0;d<h;++d){var v=n[d],g=r[v[0]],y=r[v[1]];g[0]<y[0]?p.push(new l(g,y,2,d),new l(y,g,1,d)):g[0]>y[0]&&p.push(new l(y,g,2,d),new l(g,y,1,d))}p.sort(u);for(var m=p[0].a[0]-(1+Math.abs(p[0].a[0]))*2220446049250313e-31,x=[new s([m,1],[m,0],-1,[],[],[],[])],b=[],_=(d=0,p.length);d<_;++d){var w=p[d],T=w.type;0===T?function(r,n,i,s,l){for(var u=a.lt(n,s,c),f=a.gt(n,s,c),h=u;h<f;++h){for(var p=n[h],d=p.lowerIds,v=d.length;v>1&&o(i[d[v-2]],i[d[v-1]],s)>0;)r.push([d[v-1],d[v-2],l]),v-=1;d.length=v,d.push(l);var g=p.upperIds;for(v=g.length;v>1&&0>o(i[g[v-2]],i[g[v-1]],s);)r.push([g[v-2],g[v-1],l]),v-=1;g.length=v,g.push(l)}}(b,x,r,w.a,w.idx):2===T?function(r,n,i){var o=a.le(r,i,f),l=r[o],u=l.upperIds,c=u[u.length-1];l.upperIds=[c],r.splice(o+1,0,new s(i.a,i.b,i.idx,[c],u))}(x,0,w):function(r,n,i){var o=i.a;i.a=i.b,i.b=o;var s=a.eq(r,i,f),l=r[s];r[s-1].upperIds=l.upperIds,r.splice(s,1)}(x,0,w)}return b}},743:function(r,n,i){"use strict";var a=i(5070);function o(r,n){this.stars=r,this.edges=n}r.exports=function(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=[];return new o(i,n)};var s=o.prototype;function l(r,n,i){for(var a=1,o=r.length;a<o;a+=2)if(r[a-1]===n&&r[a]===i)return r[a-1]=r[o-2],r[a]=r[o-1],void(r.length=o-2)}s.isConstraint=function(){var r=[0,0];function n(r,n){return r[0]-n[0]||r[1]-n[1]}return function(i,o){return r[0]=Math.min(i,o),r[1]=Math.max(i,o),a.eq(this.edges,r,n)>=0}}(),s.removeTriangle=function(r,n,i){var a=this.stars;l(a[r],n,i),l(a[n],i,r),l(a[i],r,n)},s.addTriangle=function(r,n,i){var a=this.stars;a[r].push(n,i),a[n].push(i,r),a[i].push(r,n)},s.opposite=function(r,n){for(var i=this.stars[n],a=1,o=i.length;a<o;a+=2)if(i[a]===r)return i[a-1];return -1},s.flip=function(r,n){var i=this.opposite(r,n),a=this.opposite(n,r);this.removeTriangle(r,n,i),this.removeTriangle(n,r,a),this.addTriangle(r,a,i),this.addTriangle(n,i,a)},s.edges=function(){for(var r=this.stars,n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0,l=o.length;s<l;s+=2)n.push([o[s],o[s+1]]);return n},s.cells=function(){for(var r=this.stars,n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0,l=o.length;s<l;s+=2){var u=o[s],c=o[s+1];i<Math.min(u,c)&&n.push([i,u,c])}return n}},9887:function(r){"use strict";r.exports=function(r){for(var n=1,i=1;i<r.length;++i)for(var a=0;a<i;++a)if(r[i]<r[a])n=-n;else if(r[a]===r[i])return 0;return n}},9243:function(r,n,i){"use strict";var a=i(3094),o=i(6606);function s(r,n){for(var i=0,a=r.length,o=0;o<a;++o)i+=r[o]*n[o];return i}function l(r){var n=r.length;if(0===n)return[];r[0].length;var i=a([r.length+1,r.length+1],1),l=a([r.length+1],1);i[n][n]=0;for(var u=0;u<n;++u){for(var c=0;c<=u;++c)i[c][u]=i[u][c]=2*s(r[u],r[c]);l[u]=s(r[u],r[u])}var f=o(i,l),h=0,p=f[n+1];for(u=0;u<p.length;++u)h+=p[u];var d=Array(n);for(u=0;u<n;++u){p=f[u];var v=0;for(c=0;c<p.length;++c)v+=p[c];d[u]=v/h}return d}function u(r){if(0===r.length)return[];for(var n=r[0].length,i=a([n]),o=l(r),s=0;s<r.length;++s)for(var u=0;u<n;++u)i[u]+=r[s][u]*o[s];return i}u.barycenetric=l,r.exports=u},1778:function(r,n,i){r.exports=function(r){for(var n=a(r),i=0,o=0;o<r.length;++o)for(var s=r[o],l=0;l<n.length;++l)i+=Math.pow(s[l]-n[l],2);return Math.sqrt(i/r.length)};var a=i(9243)},197:function(r,n,i){"use strict";r.exports=function(r,n,i){if(i){S=n;for(var a,d,y,m,b,_,w,T,k,A,M,S,E,L,C,O=Array(n.length),P=0;P<n.length;++P){var I=n[P];O[P]=[I[0],I[1],i[P]]}n=O}for(var D=(E=n,L=!!i,x(E,C=g(r,[],v(r)),L),!!C);a=r,d=n,y=!!i,T=(m=[],o(w=function(r,n){for(var i=Array(n.length),a=0;a<n.length;++a){var o=n[a],s=r[o[0]],l=r[o[1]];i[a]=[h(Math.min(s[0],l[0]),-1/0),h(Math.min(s[1],l[1]),-1/0),h(Math.max(s[0],l[0]),1/0),h(Math.max(s[1],l[1]),1/0)]}return i}(a,d),function(r,n){var i=d[r],o=d[n];i[0]!==o[0]&&i[0]!==o[1]&&i[1]!==o[0]&&i[1]!==o[1]&&s(a[i[0]],a[i[1]],a[o[0]],a[o[1]])&&m.push([r,n])}),m),k=(b=v(a),_=[],o(w,b,function(r,n){var i=d[r];if(i[0]!==n&&i[1]!==n){var o=a[n];s(a[i[0]],a[i[1]],o,o)&&_.push([r,n])}}),_),A=function(r,n,i,a,o){var s,h,d=r.map(function(r){return[l(r[0]),l(r[1])]});for(s=0;s<i.length;++s){var v=i[s];h=v[0];var g=v[1],y=n[h],m=n[g],x=p(f(r[y[0]]),f(r[y[1]]),f(r[m[0]]),f(r[m[1]]));if(x){var b=r.length;r.push([c(x[0]),c(x[1])]),d.push(x),a.push([h,b],[g,b])}}for(a.sort(function(r,n){if(r[0]!==n[0])return r[0]-n[0];var i=d[r[1]],a=d[n[1]];return u(i[0],a[0])||u(i[1],a[1])}),s=a.length-1;s>=0;--s){var _=n[h=(L=a[s])[0]],w=_[0],T=_[1],k=r[w],A=r[T];if(0>(k[0]-A[0]||k[1]-A[1])){var M=w;w=T,T=M}_[0]=w;var S,E=_[1]=L[1];for(o&&(S=_[2]);s>0&&a[s-1][0]===h;){var L,C=(L=a[--s])[1];o?n.push([E,C,S]):n.push([E,C]),E=C}o?n.push([E,T,S]):n.push([E,T])}return d}(a,d,T,k,y),x(d,M=g(a,A),y),M||T.length>0||k.length>0;)D=!0;if(i&&D)for(S.length=0,i.length=0,P=0;P<n.length;++P)I=n[P],S.push([I[0],I[1]]),i.push(I[2]);return D};var a=i(1731),o=i(2569),s=i(4434),l=i(5125),u=i(8846),c=i(7999),f=i(2826),h=i(8551),p=i(5528);function d(r){var n=c(r);return[h(n,-1/0),h(n,1/0)]}function v(r){for(var n=Array(r.length),i=0;i<r.length;++i){var a=r[i];n[i]=[h(a[0],-1/0),h(a[1],-1/0),h(a[0],1/0),h(a[1],1/0)]}return n}function g(r,n,i){for(var s,l=n.length,u=new a(l),c=[],f=0;f<n.length;++f){var p=n[f],v=d(p[0]),g=d(p[1]);c.push([h(v[0],-1/0),h(g[0],-1/0),h(v[1],1/0),h(g[1],1/0)])}o(c,function(r,n){u.link(r,n)});var y=!0,m=Array(l);for(f=0;f<l;++f)(s=u.find(f))!==f&&(y=!1,r[s]=[Math.min(r[f][0],r[s][0]),Math.min(r[f][1],r[s][1])]);if(y)return null;var x=0;for(f=0;f<l;++f)(s=u.find(f))===f?(m[f]=x,r[x++]=r[f]):m[f]=-1;for(r.length=x,f=0;f<l;++f)m[f]<0&&(m[f]=m[u.find(f)]);return m}function y(r,n){return r[0]-n[0]||r[1]-n[1]}function m(r,n){return r[0]-n[0]||r[1]-n[1]||(r[2]<n[2]?-1:r[2]>n[2]?1:0)}function x(r,n,i){if(0!==r.length){if(n)for(var a,o=0;o<r.length;++o){var s=n[(a=r[o])[0]],l=n[a[1]];a[0]=Math.min(s,l),a[1]=Math.max(s,l)}else for(o=0;o<r.length;++o)s=(a=r[o])[0],l=a[1],a[0]=Math.min(s,l),a[1]=Math.max(s,l);i?r.sort(m):r.sort(y);var u=1;for(o=1;o<r.length;++o){var c=r[o-1],f=r[o];(f[0]!==c[0]||f[1]!==c[1]||i&&f[2]!==c[2])&&(r[u++]=f)}r.length=u}}},5528:function(r,n,i){"use strict";r.exports=function(r,n,i,a){var s=u(n,r),p=u(a,i),d=h(s,p);if(0===l(d))return null;var v=f(s,o(h(p,u(r,i)),d));return c(r,v)};var a=i(3962),o=i(9189),s=i(4354),l=i(4951),u=i(6695),c=i(7584),f=i(4469);function h(r,n){return s(a(r[0],n[1]),a(r[1],n[0]))}},5692:function(r){r.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(r,n,i){"use strict";var a=i(5692),o=i(3578);function s(r){return[r[0]/255,r[1]/255,r[2]/255,r[3]]}function l(r){for(var n,i="#",a=0;a<3;++a)i+=("00"+(n=(n=r[a]).toString(16))).substr(n.length);return i}function u(r){return"rgba("+r.join(",")+")"}r.exports=function(r){if(r||(r={}),v=(r.nshades||72)-1,d=r.format||"hex",(p=r.colormap)||(p="jet"),"string"==typeof p){if(!a[p=p.toLowerCase()])throw Error(p+" not a supported colorscale");h=a[p]}else{if(!Array.isArray(p))throw Error("unsupported colormap option",p);h=p.slice()}if(h.length>v+1)throw Error(p+" map requires nshades to be at least size "+h.length);g=Array.isArray(r.alpha)?2!==r.alpha.length?[1,1]:r.alpha.slice():"number"==typeof r.alpha?[r.alpha,r.alpha]:[1,1],n=h.map(function(r){return Math.round(r.index*v)}),g[0]=Math.min(Math.max(g[0],0),1),g[1]=Math.min(Math.max(g[1],0),1);var n,i,c,f,h,p,d,v,g,y,m=h.map(function(r,n){var i=h[n].index,a=h[n].rgb.slice();return 4===a.length&&a[3]>=0&&a[3]<=1||(a[3]=g[0]+(g[1]-g[0])*i),a}),x=[];for(y=0;y<n.length-1;++y){f=n[y+1]-n[y],i=m[y],c=m[y+1];for(var b=0;b<f;b++){var _=b/f;x.push([Math.round(o(i[0],c[0],_)),Math.round(o(i[1],c[1],_)),Math.round(o(i[2],c[2],_)),o(i[3],c[3],_)])}}return x.push(h[h.length-1].rgb.concat(g[1])),"hex"===d?x=x.map(l):"rgbaString"===d?x=x.map(u):"float"===d&&(x=x.map(s)),x}},9398:function(r,n,i){"use strict";r.exports=function(r,n,i,s){var l=a(n,i,s);if(0===l){var u=o(a(r,n,i)),f=o(a(r,n,s));if(u===f){if(0===u){var h=c(r,n,i);return h===c(r,n,s)?0:h?1:-1}return 0}return 0===f?u>0||c(r,n,s)?-1:1:0===u?f>0||c(r,n,i)?1:-1:o(f-u)}var p=a(r,n,i);return p>0?l>0&&a(r,n,s)>0?1:-1:p<0?l>0||a(r,n,s)>0?1:-1:a(r,n,s)>0||c(r,n,i)?1:-1};var a=i(417),o=i(7538),s=i(87),l=i(2019),u=i(9662);function c(r,n,i){var a=s(r[0],-n[0]),o=s(r[1],-n[1]),c=s(i[0],-n[0]),f=s(i[1],-n[1]),h=u(l(a,c),l(o,f));return h[h.length-1]>=0}},7538:function(r){"use strict";r.exports=function(r){return r<0?-1:r>0?1:0}},9209:function(r){r.exports=function(r,a){var o=r.length,s=r.length-a.length;if(s)return s;switch(o){case 0:return 0;case 1:return r[0]-a[0];case 2:return r[0]+r[1]-a[0]-a[1]||n(r[0],r[1])-n(a[0],a[1]);case 3:var l=r[0]+r[1],u=a[0]+a[1];if(s=l+r[2]-(u+a[2]))return s;var c=n(r[0],r[1]),f=n(a[0],a[1]);return n(c,r[2])-n(f,a[2])||n(c+r[2],l)-n(f+a[2],u);case 4:var h=r[0],p=r[1],d=r[2],v=r[3],g=a[0],y=a[1],m=a[2],x=a[3];return h+p+d+v-(g+y+m+x)||n(h,p,d,v)-n(g,y,m,x,g)||n(h+p,h+d,h+v,p+d,p+v,d+v)-n(g+y,g+m,g+x,y+m,y+x,m+x)||n(h+p+d,h+p+v,h+d+v,p+d+v)-n(g+y+m,g+y+x,g+m+x,y+m+x);default:for(var b=r.slice().sort(i),_=a.slice().sort(i),w=0;w<o;++w)if(s=b[w]-_[w])return s;return 0}};var n=Math.min;function i(r,n){return r-n}},1284:function(r,n,i){"use strict";var a=i(9209),o=i(9887);r.exports=function(r,n){return a(r,n)||o(r)-o(n)}},5537:function(r,n,i){"use strict";var a=i(8950),o=i(8722),s=i(3332);r.exports=function(r){var n=r.length;if(0===n)return[];if(1===n)return[[0]];var i=r[0].length;return 0===i?[]:1===i?a(r):2===i?o(r):s(r,i)}},8950:function(r){"use strict";r.exports=function(r){for(var n=0,i=0,a=1;a<r.length;++a)r[a][0]<r[n][0]&&(n=a),r[a][0]>r[i][0]&&(i=a);return n<i?[[n],[i]]:n>i?[[i],[n]]:[[n]]}},8722:function(r,n,i){"use strict";r.exports=function(r){var n=a(r),i=n.length;if(i<=2)return[];for(var o=Array(i),s=n[i-1],l=0;l<i;++l){var u=n[l];o[l]=[s,u],s=u}return o};var a=i(3266)},3332:function(r,n,i){"use strict";r.exports=function(r,n){try{return a(r,!0)}catch(s){var i=o(r);if(i.length<=n)return[];return function(r,n){for(var i=r.length,a=n.length,o=0;o<i;++o)for(var s=r[o],l=0;l<s.length;++l){var u=s[l];if(u<a)s[l]=n[u];else{u-=a;for(var c=0;c<a;++c)u>=n[c]&&(u+=1);s[l]=u}}return r}(a(function(r,n){for(var i=r.length,a=Array(i),o=0;o<n.length;++o)a[o]=r[n[o]];var s=n.length;for(o=0;o<i;++o)0>n.indexOf(o)&&(a[s++]=r[o]);return a}(r,i),!0),i)}};var a=i(2183),o=i(2153)},9680:function(r){"use strict";r.exports=function(r,n,i,a,o,s){var l=o-1,u=o*o,c=l*l,f=(1+2*o)*c,h=o*c,p=u*(3-2*o),d=u*l;if(r.length){s||(s=Array(r.length));for(var v=r.length-1;v>=0;--v)s[v]=f*r[v]+h*n[v]+p*i[v]+d*a[v];return s}return f*r+h*n+p*i+d*a},r.exports.derivative=function(r,n,i,a,o,s){var l=6*o*o-6*o,u=3*o*o-4*o+1,c=-6*o*o+6*o,f=3*o*o-2*o;if(r.length){s||(s=Array(r.length));for(var h=r.length-1;h>=0;--h)s[h]=l*r[h]+u*n[h]+c*i[h]+f*a[h];return s}return l*r+u*n+c*i[h]+f*a}},4419:function(r,n,i){"use strict";var a=i(2183),o=i(1215);function s(r,n){this.point=r,this.index=n}function l(r,n){for(var i=r.point,a=n.point,o=i.length,s=0;s<o;++s){var l=a[s]-i[s];if(l)return l}return 0}r.exports=function(r,n){var i=r.length;if(0===i)return[];var u=r[0].length;if(u<1)return[];if(1===u)return function(r,n,i){if(1===r)return i?[[-1,0]]:[];var a=n.map(function(r,n){return[r[0],n]});a.sort(function(r,n){return r[0]-n[0]});for(var o=Array(r-1),s=1;s<r;++s){var l=a[s-1],u=a[s];o[s-1]=[l[1],u[1]]}return i&&o.push([-1,o[0][1]],[o[r-1][1],-1]),o}(i,r,n);for(var c=Array(i),f=1,h=0;h<i;++h){for(var p=r[h],d=Array(u+1),v=0,g=0;g<u;++g){var y=p[g];d[g]=y,v+=y*y}d[u]=v,c[h]=new s(d,h),f=Math.max(v,f)}o(c,l);var m=Array((i=c.length)+u+1),x=Array(i+u+1),b=(u+1)*(u+1)*f,_=Array(u+1);for(h=0;h<=u;++h)_[h]=0;for(_[u]=b,m[0]=_.slice(),x[0]=-1,h=0;h<=u;++h)(d=_.slice())[h]=1,m[h+1]=d,x[h+1]=-1;for(h=0;h<i;++h){var w=c[h];m[h+u+1]=w.point,x[h+u+1]=w.index}var T=a(m,!1);if(T=n?T.filter(function(r){for(var n=0,i=0;i<=u;++i){var a=x[r[i]];if(a<0&&++n>=2)return!1;r[i]=a}return!0}):T.filter(function(r){for(var n=0;n<=u;++n){var i=x[r[n]];if(i<0)return!1;r[n]=i}return!0}),1&u)for(h=0;h<T.length;++h)d=(w=T[h])[0],w[0]=w[1],w[1]=d;return T}},8362:function(r){var n=!1;if("undefined"!=typeof Float64Array){var i=new Float64Array(1),a=new Uint32Array(i.buffer);i[0]=1,n=!0,1072693248===a[1]?(r.exports=function(r){return i[0]=r,[a[0],a[1]]},r.exports.pack=function(r,n){return a[0]=r,a[1]=n,i[0]},r.exports.lo=function(r){return i[0]=r,a[0]},r.exports.hi=function(r){return i[0]=r,a[1]}):1072693248===a[0]?(r.exports=function(r){return i[0]=r,[a[1],a[0]]},r.exports.pack=function(r,n){return a[1]=r,a[0]=n,i[0]},r.exports.lo=function(r){return i[0]=r,a[1]},r.exports.hi=function(r){return i[0]=r,a[0]}):n=!1}if(!n){var s=new o(8);r.exports=function(r){return s.writeDoubleLE(r,0,!0),[s.readUInt32LE(0,!0),s.readUInt32LE(4,!0)]},r.exports.pack=function(r,n){return s.writeUInt32LE(r,0,!0),s.writeUInt32LE(n,4,!0),s.readDoubleLE(0,!0)},r.exports.lo=function(r){return s.writeDoubleLE(r,0,!0),s.readUInt32LE(0,!0)},r.exports.hi=function(r){return s.writeDoubleLE(r,0,!0),s.readUInt32LE(4,!0)}}r.exports.sign=function(n){return r.exports.hi(n)>>>31},r.exports.exponent=function(n){return(r.exports.hi(n)<<1>>>21)-1023},r.exports.fraction=function(n){var i=r.exports.lo(n),a=r.exports.hi(n),o=1048575&a;return 2146435072&a&&(o+=1048576),[i,o]},r.exports.denormalized=function(n){return!(2146435072&r.exports.hi(n))}},3094:function(r){"use strict";r.exports=function(r,n){switch(void 0===n&&(n=0),typeof r){case"number":if(r>0)return function(r,n){var i,a;for(i=Array(r),a=0;a<r;++a)i[a]=n;return i}(0|r,n);break;case"object":if("number"==typeof r.length)return function r(n,i,a){var o=0|n[a];if(o<=0)return[];var s,l=Array(o);if(a===n.length-1)for(s=0;s<o;++s)l[s]=i;else for(s=0;s<o;++s)l[s]=r(n,i,a+1);return l}(r,n,0)}return[]}},8348:function(r,n,i){"use strict";r.exports=function(r,n){var i=r.length;if("number"!=typeof n){n=0;for(var o=0;o<i;++o){var s=r[o];n=Math.max(n,s[0],s[1])}n=1+(0|n)}var l=Array(n|=0);for(o=0;o<n;++o)l[o]=[];for(o=0;o<i;++o)l[(s=r[o])[0]].push(s[1]),l[s[1]].push(s[0]);for(var u=0;u<n;++u)a(l[u],function(r,n){return r-n});return l};var a=i(1215)},5795:function(r){"use strict";r.exports=function(r,n,i){var a=n||0,o=i||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[a*r[12]+r[8],a*r[13]+r[9],a*r[14]+r[10],a*r[15]+r[11]],[o*r[12]-r[8],o*r[13]-r[9],o*r[14]-r[10],o*r[15]-r[11]]]}},8444:function(r,n,i){"use strict";r.exports=function(r,n,i){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof r?new l(a=c(r),a,0):new l(r,c(r.length),0);case 2:var a;if("number"==typeof n)return new l(r,a=c(r.length),+n);i=0;case 3:if(r.length!==n.length)throw Error("state and velocity lengths must match");return new l(r,n,i)}};var a=i(9680),o=i(5070);function s(r,n,i){return Math.min(n,Math.max(r,i))}function l(r,n,i){this.dimension=r.length,this.bounds=[Array(this.dimension),Array(this.dimension)];for(var a=0;a<this.dimension;++a)this.bounds[0][a]=-1/0,this.bounds[1][a]=1/0;this._state=r.slice().reverse(),this._velocity=n.slice().reverse(),this._time=[i],this._scratch=[r.slice(),r.slice(),r.slice(),r.slice(),r.slice()]}var u=l.prototype;function c(r){for(var n=Array(r),i=0;i<r;++i)n[i]=0;return n}u.flush=function(r){var n=o.gt(this._time,r)-1;n<=0||(this._time.splice(0,n),this._state.splice(0,n*this.dimension),this._velocity.splice(0,n*this.dimension))},u.curve=function(r){var n=this._time,i=n.length,l=o.le(n,r),u=this._scratch[0],c=this._state,f=this._velocity,h=this.dimension,p=this.bounds;if(l<0)for(var d=h-1,v=0;v<h;++v,--d)u[v]=c[d];else if(l>=i-1){d=c.length-1;var g=r-n[i-1];for(v=0;v<h;++v,--d)u[v]=c[d]+g*f[d]}else{d=h*(l+1)-1;var y=n[l],m=n[l+1]-y||1,x=this._scratch[1],b=this._scratch[2],_=this._scratch[3],w=this._scratch[4],T=!0;for(v=0;v<h;++v,--d)x[v]=c[d],_[v]=f[d]*m,b[v]=c[d+h],w[v]=f[d+h]*m,T=T&&x[v]===b[v]&&_[v]===w[v]&&0===_[v];if(T)for(v=0;v<h;++v)u[v]=x[v];else a(x,_,b,w,(r-y)/m,u)}var k=p[0],A=p[1];for(v=0;v<h;++v)u[v]=s(k[v],A[v],u[v]);return u},u.dcurve=function(r){var n=this._time,i=n.length,s=o.le(n,r),l=this._scratch[0],u=this._state,c=this._velocity,f=this.dimension;if(s>=i-1)for(var h=u.length-1,p=(n[i-1],0);p<f;++p,--h)l[p]=c[h];else{h=f*(s+1)-1;var d=n[s],v=n[s+1]-d||1,g=this._scratch[1],y=this._scratch[2],m=this._scratch[3],x=this._scratch[4],b=!0;for(p=0;p<f;++p,--h)g[p]=u[h],m[p]=c[h]*v,y[p]=u[h+f],x[p]=c[h+f]*v,b=b&&g[p]===y[p]&&m[p]===x[p]&&0===m[p];if(b)for(p=0;p<f;++p)l[p]=0;else for(a.derivative(g,m,y,x,(r-d)/v,l),p=0;p<f;++p)l[p]/=v}return l},u.lastT=function(){var r=this._time;return r[r.length-1]},u.stable=function(){for(var r=this._velocity,n=r.length,i=this.dimension-1;i>=0;--i)if(r[--n])return!1;return!0},u.jump=function(r){var n=this.lastT(),i=this.dimension;if(!(r<n||arguments.length!==i+1)){var a=this._state,o=this._velocity,l=a.length-this.dimension,u=this.bounds,c=u[0],f=u[1];this._time.push(n,r);for(var h=0;h<2;++h)for(var p=0;p<i;++p)a.push(a[l++]),o.push(0);for(this._time.push(r),p=i;p>0;--p)a.push(s(c[p-1],f[p-1],arguments[p])),o.push(0)}},u.push=function(r){var n=this.lastT(),i=this.dimension;if(!(r<n||arguments.length!==i+1)){var a=this._state,o=this._velocity,l=a.length-this.dimension,u=r-n,c=this.bounds,f=c[0],h=c[1],p=u>1e-6?1/u:0;this._time.push(r);for(var d=i;d>0;--d){var v=s(f[d-1],h[d-1],arguments[d]);a.push(v),o.push((v-a[l++])*p)}}},u.set=function(r){var n=this.dimension;if(!(r<this.lastT()||arguments.length!==n+1)){var i=this._state,a=this._velocity,o=this.bounds,l=o[0],u=o[1];this._time.push(r);for(var c=n;c>0;--c)i.push(s(l[c-1],u[c-1],arguments[c])),a.push(0)}},u.move=function(r){var n=this.lastT(),i=this.dimension;if(!(r<=n||arguments.length!==i+1)){var a=this._state,o=this._velocity,l=a.length-this.dimension,u=this.bounds,c=u[0],f=u[1],h=r-n,p=h>1e-6?1/h:0;this._time.push(r);for(var d=i;d>0;--d){var v=arguments[d];a.push(s(c[d-1],f[d-1],a[l++]+v)),o.push(v*p)}}},u.idle=function(r){var n=this.lastT();if(!(r<n)){var i=this.dimension,a=this._state,o=this._velocity,l=a.length-i,u=this.bounds,c=u[0],f=u[1],h=r-n;this._time.push(r);for(var p=i-1;p>=0;--p)a.push(s(c[p],f[p],a[l]+h*o[l])),o.push(0),l+=1}}},7080:function(r){"use strict";function n(r,n,i,a,o,s){this._color=r,this.key=n,this.value=i,this.left=a,this.right=o,this._count=s}function i(r){return new n(r._color,r.key,r.value,r.left,r.right,r._count)}function a(r,i){return new n(r,i.key,i.value,i.left,i.right,i._count)}function o(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function s(r,n){this._compare=r,this.root=n}r.exports=function(r){return new s(r||h,null)};var l=s.prototype;function u(r,n){this.tree=r,this._stack=n}Object.defineProperty(l,"keys",{get:function(){var r=[];return this.forEach(function(n,i){r.push(n)}),r}}),Object.defineProperty(l,"values",{get:function(){var r=[];return this.forEach(function(n,i){r.push(i)}),r}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(r,i){for(var l=this._compare,u=this.root,c=[],f=[];u;){var h=l(r,u.key);c.push(u),f.push(h),u=h<=0?u.left:u.right}c.push(new n(0,r,i,null,null,1));for(var p=c.length-2;p>=0;--p)u=c[p],f[p]<=0?c[p]=new n(u._color,u.key,u.value,c[p+1],u.right,u._count+1):c[p]=new n(u._color,u.key,u.value,u.left,c[p+1],u._count+1);for(p=c.length-1;p>1;--p){var d,v,g=c[p-1];if(u=c[p],1===g._color||1===u._color)break;var y=c[p-2];if(y.left===g){if(g.left===u){if(!(d=y.right)||0!==d._color){y._color=0,y.left=g.right,g._color=1,g.right=y,c[p-2]=g,c[p-1]=u,o(y),o(g),p>=3&&((v=c[p-3]).left===y?v.left=g:v.right=g);break}g._color=1,y.right=a(1,d),y._color=0,p-=1}else{if(!(d=y.right)||0!==d._color){g.right=u.left,y._color=0,y.left=u.right,u._color=1,u.left=g,u.right=y,c[p-2]=u,c[p-1]=g,o(y),o(g),o(u),p>=3&&((v=c[p-3]).left===y?v.left=u:v.right=u);break}g._color=1,y.right=a(1,d),y._color=0,p-=1}}else if(g.right===u){if(!(d=y.left)||0!==d._color){y._color=0,y.right=g.left,g._color=1,g.left=y,c[p-2]=g,c[p-1]=u,o(y),o(g),p>=3&&((v=c[p-3]).right===y?v.right=g:v.left=g);break}g._color=1,y.left=a(1,d),y._color=0,p-=1}else{if(!(d=y.left)||0!==d._color){g.left=u.right,y._color=0,y.right=u.left,u._color=1,u.right=g,u.left=y,c[p-2]=u,c[p-1]=g,o(y),o(g),o(u),p>=3&&((v=c[p-3]).right===y?v.right=u:v.left=u);break}g._color=1,y.left=a(1,d),y._color=0,p-=1}}return c[0]._color=1,new s(l,c[0])},l.forEach=function(r,n,i){if(this.root)switch(arguments.length){case 1:return function r(n,i){var a;return i.left&&(a=r(n,i.left))?a:(a=n(i.key,i.value))||(i.right?r(n,i.right):void 0)}(r,this.root);case 2:return function r(n,i,a,o){if(0>=i(n,o.key)){var s;if(o.left&&(s=r(n,i,a,o.left))||(s=a(o.key,o.value)))return s}if(o.right)return r(n,i,a,o.right)}(n,this._compare,r,this.root);case 3:if(this._compare(n,i)>=0)return;return function r(n,i,a,o,s){var l,u=a(n,s.key),c=a(i,s.key);return u<=0&&(s.left&&(l=r(n,i,a,o,s.left))||c>0&&(l=o(s.key,s.value)))?l:c>0&&s.right?r(n,i,a,o,s.right):void 0}(n,i,this._compare,r,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var r=[],n=this.root;n;)r.push(n),n=n.left;return new u(this,r)}}),Object.defineProperty(l,"end",{get:function(){for(var r=[],n=this.root;n;)r.push(n),n=n.right;return new u(this,r)}}),l.at=function(r){if(r<0)return new u(this,[]);for(var n=this.root,i=[];;){if(i.push(n),n.left){if(r<n.left._count){n=n.left;continue}r-=n.left._count}if(!r)return new u(this,i);if(r-=1,!n.right||r>=n.right._count)break;n=n.right}return new u(this,[])},l.ge=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s<=0&&(o=a.length),i=s<=0?i.left:i.right}return a.length=o,new u(this,a)},l.gt=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s<0&&(o=a.length),i=s<0?i.left:i.right}return a.length=o,new u(this,a)},l.lt=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s>0&&(o=a.length),i=s<=0?i.left:i.right}return a.length=o,new u(this,a)},l.le=function(r){for(var n=this._compare,i=this.root,a=[],o=0;i;){var s=n(r,i.key);a.push(i),s>=0&&(o=a.length),i=s<0?i.left:i.right}return a.length=o,new u(this,a)},l.find=function(r){for(var n=this._compare,i=this.root,a=[];i;){var o=n(r,i.key);if(a.push(i),0===o)return new u(this,a);i=o<=0?i.left:i.right}return new u(this,[])},l.remove=function(r){var n=this.find(r);return n?n.remove():this},l.get=function(r){for(var n=this._compare,i=this.root;i;){var a=n(r,i.key);if(0===a)return i.value;i=a<=0?i.left:i.right}};var c=u.prototype;function f(r,n){r.key=n.key,r.value=n.value,r.left=n.left,r.right=n.right,r._color=n._color,r._count=n._count}function h(r,n){return r<n?-1:r>n?1:0}Object.defineProperty(c,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(c,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),c.clone=function(){return new u(this.tree,this._stack.slice())},c.remove=function(){var r=this._stack;if(0===r.length)return this.tree;var l=Array(r.length),u=r[r.length-1];l[l.length-1]=new n(u._color,u.key,u.value,u.left,u.right,u._count);for(var c=r.length-2;c>=0;--c)(u=r[c]).left===r[c+1]?l[c]=new n(u._color,u.key,u.value,l[c+1],u.right,u._count):l[c]=new n(u._color,u.key,u.value,u.left,l[c+1],u._count);if((u=l[l.length-1]).left&&u.right){var h=l.length;for(u=u.left;u.right;)l.push(u),u=u.right;var p=l[h-1];for(l.push(new n(u._color,p.key,p.value,u.left,u.right,u._count)),l[h-1].key=u.key,l[h-1].value=u.value,c=l.length-2;c>=h;--c)u=l[c],l[c]=new n(u._color,u.key,u.value,u.left,l[c+1],u._count);l[h-1].left=l[h]}if(0===(u=l[l.length-1])._color){var d=l[l.length-2];for(d.left===u?d.left=null:d.right===u&&(d.right=null),l.pop(),c=0;c<l.length;++c)l[c]._count--;return new s(this.tree._compare,l[0])}if(u.left||u.right){for(u.left?f(u,u.left):u.right&&f(u,u.right),u._color=1,c=0;c<l.length-1;++c)l[c]._count--;return new s(this.tree._compare,l[0])}if(1===l.length)return new s(this.tree._compare,null);for(c=0;c<l.length;++c)l[c]._count--;var v=l[l.length-2];return function(r){for(var n,s,l,u,c,f=r.length-1;f>=0;--f){if(s=r[f],0===f)return void(s._color=1);if((l=r[f-1]).left===s){if((u=l.right).right&&0===u.right._color)return c=(u=l.right=i(u)).right=i(u.right),l.right=u.left,u.left=l,u.right=c,u._color=l._color,s._color=1,l._color=1,c._color=1,o(l),o(u),f>1&&((n=r[f-2]).left===l?n.left=u:n.right=u),void(r[f-1]=u);if(u.left&&0===u.left._color)return c=(u=l.right=i(u)).left=i(u.left),l.right=c.left,u.left=c.right,c.left=l,c.right=u,c._color=l._color,l._color=1,u._color=1,s._color=1,o(l),o(u),o(c),f>1&&((n=r[f-2]).left===l?n.left=c:n.right=c),void(r[f-1]=c);if(1===u._color){if(0===l._color)return l._color=1,void(l.right=a(0,u));l.right=a(0,u);continue}u=i(u),l.right=u.left,u.left=l,u._color=l._color,l._color=0,o(l),o(u),f>1&&((n=r[f-2]).left===l?n.left=u:n.right=u),r[f-1]=u,r[f]=l,f+1<r.length?r[f+1]=s:r.push(s),f+=2}else{if((u=l.left).left&&0===u.left._color)return c=(u=l.left=i(u)).left=i(u.left),l.left=u.right,u.right=l,u.left=c,u._color=l._color,s._color=1,l._color=1,c._color=1,o(l),o(u),f>1&&((n=r[f-2]).right===l?n.right=u:n.left=u),void(r[f-1]=u);if(u.right&&0===u.right._color)return c=(u=l.left=i(u)).right=i(u.right),l.left=c.right,u.right=c.left,c.right=l,c.left=u,c._color=l._color,l._color=1,u._color=1,s._color=1,o(l),o(u),o(c),f>1&&((n=r[f-2]).right===l?n.right=c:n.left=c),void(r[f-1]=c);if(1===u._color){if(0===l._color)return l._color=1,void(l.left=a(0,u));l.left=a(0,u);continue}u=i(u),l.left=u.right,u.right=l,u._color=l._color,l._color=0,o(l),o(u),f>1&&((n=r[f-2]).right===l?n.right=u:n.left=u),r[f-1]=u,r[f]=l,f+1<r.length?r[f+1]=s:r.push(s),f+=2}}}(l),v.left===u?v.left=null:v.right=null,new s(this.tree._compare,l[0])},Object.defineProperty(c,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(c,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(c,"index",{get:function(){var r=0,n=this._stack;if(0===n.length){var i=this.tree.root;return i?i._count:0}n[n.length-1].left&&(r=n[n.length-1].left._count);for(var a=n.length-2;a>=0;--a)n[a+1]===n[a].right&&(++r,n[a].left&&(r+=n[a].left._count));return r},enumerable:!0}),c.next=function(){var r=this._stack;if(0!==r.length){var n=r[r.length-1];if(n.right)for(n=n.right;n;)r.push(n),n=n.left;else for(r.pop();r.length>0&&r[r.length-1].right===n;)n=r[r.length-1],r.pop()}},Object.defineProperty(c,"hasNext",{get:function(){var r=this._stack;if(0===r.length)return!1;if(r[r.length-1].right)return!0;for(var n=r.length-1;n>0;--n)if(r[n-1].left===r[n])return!0;return!1}}),c.update=function(r){var i=this._stack;if(0===i.length)throw Error("Can't update empty node!");var a=Array(i.length),o=i[i.length-1];a[a.length-1]=new n(o._color,o.key,r,o.left,o.right,o._count);for(var l=i.length-2;l>=0;--l)(o=i[l]).left===i[l+1]?a[l]=new n(o._color,o.key,o.value,a[l+1],o.right,o._count):a[l]=new n(o._color,o.key,o.value,o.left,a[l+1],o._count);return new s(this.tree._compare,a[0])},c.prev=function(){var r=this._stack;if(0!==r.length){var n=r[r.length-1];if(n.left)for(n=n.left;n;)r.push(n),n=n.right;else for(r.pop();r.length>0&&r[r.length-1].left===n;)n=r[r.length-1],r.pop()}},Object.defineProperty(c,"hasPrev",{get:function(){var r=this._stack;if(0===r.length)return!1;if(r[r.length-1].left)return!0;for(var n=r.length-1;n>0;--n)if(r[n-1].right===r[n])return!0;return!1}})},7453:function(r,n,i){"use strict";r.exports=function(r,n){var i=new h(r);return i.update(n),i};var a=i(9557),o=i(1681),s=i(1011),l=i(2864),u=i(8468),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function f(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function h(r){this.gl=r,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=s(r)}var p=h.prototype;function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}p.update=function(r){function n(n,i,a){if(a in r){var o,s=r[a],l=this[a];(n?Array.isArray(s)&&Array.isArray(s[0]):Array.isArray(s))?this[a]=o=[i(s[0]),i(s[1]),i(s[2])]:this[a]=o=[i(s),i(s),i(s)];for(var u=0;u<3;++u)if(o[u]!==l[u])return!0}return!1}r=r||{};var i,s=n.bind(this,!1,Number),l=n.bind(this,!1,Boolean),c=n.bind(this,!1,String),f=n.bind(this,!0,function(r){if(Array.isArray(r)){if(3===r.length)return[+r[0],+r[1],+r[2],1];if(4===r.length)return[+r[0],+r[1],+r[2],+r[3]]}return[0,0,0,1]}),h=!1,p=!1;if("bounds"in r)for(var d=r.bounds,v=0;v<2;++v)for(var g=0;g<3;++g)d[v][g]!==this.bounds[v][g]&&(p=!0),this.bounds[v][g]=d[v][g];if("ticks"in r)for(i=r.ticks,h=!0,this.autoTicks=!1,v=0;v<3;++v)this.tickSpacing[v]=0;else s("tickSpacing")&&(this.autoTicks=!0,p=!0);if(this._firstInit&&("ticks"in r||"tickSpacing"in r||(this.autoTicks=!0),p=!0,h=!0,this._firstInit=!1),p&&this.autoTicks&&(i=u.create(this.bounds,this.tickSpacing),h=!0),h){for(v=0;v<3;++v)i[v].sort(function(r,n){return r.x-n.x});u.equal(i,this.ticks)?h=!1:this.ticks=i}l("tickEnable"),c("tickFont")&&(h=!0),s("tickSize"),s("tickAngle"),s("tickPad"),f("tickColor");var y=c("labels");c("labelFont")&&(y=!0),l("labelEnable"),s("labelSize"),s("labelPad"),f("labelColor"),l("lineEnable"),l("lineMirror"),s("lineWidth"),f("lineColor"),l("lineTickEnable"),l("lineTickMirror"),s("lineTickLength"),s("lineTickWidth"),f("lineTickColor"),l("gridEnable"),s("gridWidth"),f("gridColor"),l("zeroEnable"),f("zeroLineColor"),s("zeroLineWidth"),l("backgroundEnable"),f("backgroundColor"),this._text?this._text&&(y||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};var v=[new d,new d,new d],g=[0,0,0],y={model:c,view:c,projection:c,_ortho:!1};p.isOpaque=function(){return!0},p.isTransparent=function(){return!1},p.drawTransparent=function(r){};var m=[0,0,0],x=[0,0,0],b=[0,0,0];p.draw=function(r){r=r||y;for(var n,i,a,o=this.gl,s=r.model||c,u=r.view||c,h=r.projection||c,p=this.bounds,d=r._ortho||!1,_=l(s,u,h,p,d),w=_.cubeEdges,T=_.axis,k=u[12],A=u[13],M=u[14],S=u[15],E=(d?2:1)*this.pixelRatio*(h[3]*k+h[7]*A+h[11]*M+h[15]*S)/o.drawingBufferHeight,L=0;L<3;++L)this.lastCubeProps.cubeEdges[L]=w[L],this.lastCubeProps.axis[L]=T[L];for(L=0;L<3;++L)(function(r,n,i,a,o){for(var s=r.primalOffset,l=r.primalMinor,u=r.mirrorOffset,c=r.mirrorMinor,f=a[n],h=0;h<3;++h)if(n!==h){var p=s,d=u,v=l,g=c;f&1<<h&&(p=u,d=s,v=c,g=l),p[h]=i[0][h],d[h]=i[1][h],o[h]>0?(v[h]=-1,g[h]=0):(v[h]=0,g[h]=1)}})(v[L],L,this.bounds,w,T);for(L=0,o=this.gl;L<3;++L)this.backgroundEnable[L]?g[L]=T[L]:g[L]=0;for(this._background.draw(s,u,h,p,g,this.backgroundColor),this._lines.bind(s,u,h,this),L=0;L<3;++L){var C=[0,0,0];T[L]>0?C[L]=p[1][L]:C[L]=p[0][L];for(var O=0;O<2;++O){var P=(L+1+O)%3,I=(L+1+(1^O))%3;this.gridEnable[P]&&this._lines.drawGrid(P,I,this.bounds,C,this.gridColor[P],this.gridWidth[P]*this.pixelRatio)}for(O=0;O<2;++O)P=(L+1+O)%3,I=(L+1+(1^O))%3,this.zeroEnable[I]&&0>=Math.min(p[0][I],p[1][I])&&Math.max(p[0][I],p[1][I])>=0&&this._lines.drawZero(P,I,this.bounds,C,this.zeroLineColor[I],this.zeroLineWidth[I]*this.pixelRatio)}for(L=0;L<3;++L){this.lineEnable[L]&&this._lines.drawAxisLine(L,this.bounds,v[L].primalOffset,this.lineColor[L],this.lineWidth[L]*this.pixelRatio),this.lineMirror[L]&&this._lines.drawAxisLine(L,this.bounds,v[L].mirrorOffset,this.lineColor[L],this.lineWidth[L]*this.pixelRatio);var D=f(m,v[L].primalMinor),z=f(x,v[L].mirrorMinor),R=this.lineTickLength;for(O=0;O<3;++O){var F=E/s[5*O];D[O]*=R[O]*F,z[O]*=R[O]*F}this.lineTickEnable[L]&&this._lines.drawAxisTicks(L,v[L].primalOffset,D,this.lineTickColor[L],this.lineTickWidth[L]*this.pixelRatio),this.lineTickMirror[L]&&this._lines.drawAxisTicks(L,v[L].mirrorOffset,z,this.lineTickColor[L],this.lineTickWidth[L]*this.pixelRatio)}function B(r){(a=[0,0,0])[r]=1}for(this._lines.unbind(),this._text.bind(s,u,h,this.pixelRatio),L=0;L<3;++L){var N=v[L].primalMinor,j=v[L].mirrorMinor,U=f(b,v[L].primalOffset);for(O=0;O<3;++O)this.lineTickEnable[L]&&(U[O]+=E*N[O]*Math.max(this.lineTickLength[O],0)/s[5*O]);var V=[0,0,0];if(V[L]=1,this.tickEnable[L]){for(-3600===this.tickAngle[L]?(this.tickAngle[L]=0,this.tickAlign[L]="auto"):this.tickAlign[L]=-1,i=1,"auto"===(n=[this.tickAlign[L],.5,i])[0]?n[0]=0:n[0]=parseInt(""+n[0]),a=[0,0,0],function(r,n,i){var a=(r+1)%3,o=(r+2)%3,s=n[a],l=n[o],u=i[a],c=i[o];s>0&&c>0||s>0&&c<0||s<0&&c>0||s<0&&c<0?B(a):(l>0&&u>0||l>0&&u<0||l<0&&u>0||l<0&&u<0)&&B(o)}(L,N,j),O=0;O<3;++O)U[O]+=E*N[O]*this.tickPad[O]/s[5*O];this._text.drawTicks(L,this.tickSize[L],this.tickAngle[L],U,this.tickColor[L],V,a,n)}if(this.labelEnable[L]){for(i=0,a=[0,0,0],this.labels[L].length>4&&(B(L),i=1),"auto"===(n=[this.labelAlign[L],.5,i])[0]?n[0]=0:n[0]=parseInt(""+n[0]),O=0;O<3;++O)U[O]+=E*N[O]*this.labelPad[O]/s[5*O];U[L]+=.5*(p[0][L]+p[1][L]),this._text.drawLabel(L,this.labelSize[L],this.labelAngle[L],U,this.labelColor[L],[0,0,0],a,n)}}this._text.unbind()},p.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(r,n,i){"use strict";r.exports=function(r){for(var n=[],i=[],u=0,c=0;c<3;++c)for(var f=(c+1)%3,h=(c+2)%3,p=[0,0,0],d=[0,0,0],v=-1;v<=1;v+=2){i.push(u,u+2,u+1,u+1,u+2,u+3),p[c]=v,d[c]=v;for(var g=-1;g<=1;g+=2){p[f]=g;for(var y=-1;y<=1;y+=2)p[h]=y,n.push(p[0],p[1],p[2],d[0],d[1],d[2]),u+=1}var m=f;f=h,h=m}var x=a(r,new Float32Array(n)),b=a(r,new Uint16Array(i),r.ELEMENT_ARRAY_BUFFER),_=o(r,[{buffer:x,type:r.FLOAT,size:3,offset:0,stride:24},{buffer:x,type:r.FLOAT,size:3,offset:12,stride:24}],b),w=s(r);return w.attributes.position.location=0,w.attributes.normal.location=1,new l(r,x,_,w)};var a=i(5827),o=i(2944),s=i(1943).bg;function l(r,n,i,a){this.gl=r,this.buffer=n,this.vao=i,this.shader=a}var u=l.prototype;u.draw=function(r,n,i,a,o,s){for(var l=!1,u=0;u<3;++u)l=l||o[u];if(l){var c=this.gl;c.enable(c.POLYGON_OFFSET_FILL),c.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:r,view:n,projection:i,bounds:a,enable:o,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),c.disable(c.POLYGON_OFFSET_FILL)}},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(r,n,i){"use strict";r.exports=function(r,n,i,m,x){o(u,n,r),o(u,i,u);for(var b,_=0,w=0;w<2;++w){h[2]=m[w][2];for(var T=0;T<2;++T){h[1]=m[T][1];for(var k=0;k<2;++k)h[0]=m[k][0],function(r,n,i){for(var a=0;a<4;++a){r[a]=i[12+a];for(var o=0;o<3;++o)r[a]+=n[o]*i[4*o+a]}}(c[_],h,u),_+=1}}var A=-1;for(w=0;w<8;++w){for(var M=c[w][3],S=0;S<3;++S)f[w][S]=c[w][S]/M;x&&(f[w][2]*=-1),M<0&&(A<0||f[w][2]<f[A][2])&&(A=w)}if(A<0){A=0;for(var E=0;E<3;++E){for(var L=(E+2)%3,C=(E+1)%3,O=-1,P=-1,I=0;I<2;++I){var D=(R=I<<E)+(I<<L)+(1-I<<C),z=R+(1-I<<L)+(I<<C);0>l(f[R],f[D],f[z],p)||(I?O=1:P=1)}if(O<0||P<0)P>O&&(A|=1<<E);else{for(I=0;I<2;++I){D=(R=I<<E)+(I<<L)+(1-I<<C),z=R+(1-I<<L)+(I<<C);var R,F=function(r){for(var n=0;n<d.length;++n)if((r=s.positive(r,d[n])).length<3)return 0;var i=r[0],a=i[0]/i[3],o=i[1]/i[3],l=0;for(n=1;n+1<r.length;++n){var u=r[n],c=r[n+1],f=u[0]/u[3]-a,h=u[1]/u[3]-o,p=c[0]/c[3]-a;l+=Math.abs(f*(c[1]/c[3]-o)-h*p)}return l}([c[R],c[D],c[z],c[R+(1<<L)+(1<<C)]]);I?O=F:P=F}P>O&&(A|=1<<E)}}}var B=7^A,N=-1;for(w=0;w<8;++w)w!==A&&w!==B&&(N<0||f[N][1]>f[w][1])&&(N=w);var j=-1;for(w=0;w<3;++w)(b=N^1<<w)!==A&&b!==B&&(j<0&&(j=b),(C=f[b])[0]<f[j][0]&&(j=b));var U=-1;for(w=0;w<3;++w)(b=N^1<<w)!==A&&b!==B&&b!==j&&(U<0&&(U=b),(C=f[b])[0]>f[U][0]&&(U=b));v[0]=v[1]=v[2]=0,v[a.log2(j^N)]=N&j,v[a.log2(N^U)]=N&U;var V=7^U;V===A||V===B?(V=7^j,v[a.log2(U^V)]=V&U):v[a.log2(j^V)]=V&j;var H=A;for(E=0;E<3;++E)g[E]=H&1<<E?-1:1;return y};var a=i(2288),o=i(104),s=i(4670),l=i(417),u=Array(16),c=Array(8),f=Array(8),h=[,,,],p=[0,0,0];!function(){for(var r=0;r<8;++r)c[r]=[1,1,1,1],f[r]=[1,1,1]}();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],v=[1,1,1],g=[0,0,0],y={cubeEdges:v,axis:g}},1681:function(r,n,i){"use strict";r.exports=function(r,n,i){var l=[],u=[0,0,0],c=[0,0,0],f=[0,0,0],h=[0,0,0];l.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var p=0;p<3;++p){for(var d=l.length/3|0,g=0;g<i[p].length;++g){var y=+i[p][g].x;l.push(y,0,1,y,1,1,y,0,-1,y,0,-1,y,1,1,y,1,-1)}var m=l.length/3|0;u[p]=d,c[p]=m-d,d=l.length/3|0;for(var x=0;x<i[p].length;++x)y=+i[p][x].x,l.push(y,0,1,y,1,1,y,0,-1,y,0,-1,y,1,1,y,1,-1);m=l.length/3|0,f[p]=d,h[p]=m-d}var b=a(r,new Float32Array(l)),_=o(r,[{buffer:b,type:r.FLOAT,size:3,stride:0,offset:0}]),w=s(r);return w.attributes.position.location=0,new v(r,b,_,w,c,u,h,f)};var a=i(5827),o=i(2944),s=i(1943).j,l=[0,0,0],u=[0,0,0],c=[0,0,0],f=[0,0,0],h=[1,1];function p(r){return r[0]=r[1]=r[2]=0,r}function d(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function v(r,n,i,a,o,s,l,u){this.gl=r,this.vertBuffer=n,this.vao=i,this.shader=a,this.tickCount=o,this.tickOffset=s,this.gridCount=l,this.gridOffset=u}var g=v.prototype;g.bind=function(r,n,i){this.shader.bind(),this.shader.uniforms.model=r,this.shader.uniforms.view=n,this.shader.uniforms.projection=i,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(r,n,i,a,o){var s=p(u);this.shader.uniforms.majorAxis=u,s[r]=n[1][r]-n[0][r],this.shader.uniforms.minorAxis=s;var l,h=d(f,i);h[r]+=n[0][r],this.shader.uniforms.offset=h,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=a,(l=p(c))[(r+2)%3]=1,this.shader.uniforms.screenAxis=l,this.vao.draw(this.gl.TRIANGLES,6),(l=p(c))[(r+1)%3]=1,this.shader.uniforms.screenAxis=l,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(r,n,i,a,o){if(this.tickCount[r]){var s=p(l);s[r]=1,this.shader.uniforms.majorAxis=s,this.shader.uniforms.offset=n,this.shader.uniforms.minorAxis=i,this.shader.uniforms.color=a,this.shader.uniforms.lineWidth=o;var u=p(c);u[r]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[r],this.tickOffset[r])}},g.drawGrid=function(r,n,i,a,o,s){if(this.gridCount[r]){var h=p(u);h[n]=i[1][n]-i[0][n],this.shader.uniforms.minorAxis=h;var v=d(f,a);v[n]+=i[0][n],this.shader.uniforms.offset=v;var g=p(l);g[r]=1,this.shader.uniforms.majorAxis=g;var y=p(c);y[r]=1,this.shader.uniforms.screenAxis=y,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,this.gridCount[r],this.gridOffset[r])}},g.drawZero=function(r,n,i,a,o,s){var l=p(u);this.shader.uniforms.majorAxis=l,l[r]=i[1][r]-i[0][r],this.shader.uniforms.minorAxis=l;var h=d(f,a);h[r]+=i[0][r],this.shader.uniforms.offset=h;var v=p(c);v[n]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=s,this.shader.uniforms.color=o,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(r,n,i){"use strict";var a=i(6832),o=i(5158),s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.j=function(r){return o(r,s,l,null,[{name:"position",type:"vec3"}])};var u=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),c=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);n.f=function(r){return o(r,u,c,null,[{name:"position",type:"vec3"}])};var f=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),h=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);n.bg=function(r){return o(r,f,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(r,n,i){"use strict";r.exports=function(r,n,i,s,l,c){var f=a(r),p=o(r,[{buffer:f,size:3}]),d=u(r);d.attributes.position.location=0;var v=new h(r,d,f,p);return v.update(n,i,s,l,c),v};var a=i(5827),o=i(2944),l=i(875),u=i(1943).f,c=window||s.global||{},f=c.__TEXT_CACHE||{};function h(r,n,i,a){this.gl=r,this.shader=n,this.buffer=i,this.vao=a,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}c.__TEXT_CACHE={};var p=h.prototype,d=[0,0];p.bind=function(r,n,i,a){this.vao.bind(),this.shader.bind();var o=this.shader.uniforms;o.model=r,o.view=n,o.projection=i,o.pixelScale=a,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},p.unbind=function(){this.vao.unbind()},p.update=function(r,n,i,a,o){var s=[];function u(r,n,i,a,o,u){var c=f[i];c||(c=f[i]={});var h=c[n];h||(h=c[n]=function(r,n){try{return l(r,n)}catch(n){return console.warn('error vectorizing text:"'+r+'" error:',n),{cells:[],positions:[]}}}(n,{triangles:!0,font:i,textAlign:"center",textBaseline:"middle",lineSpacing:o,styletags:u}));for(var p=(a||12)/12,d=h.positions,v=h.cells,g=0,y=v.length;g<y;++g)for(var m=v[g],x=2;x>=0;--x){var b=d[m[x]];s.push(p*b[0],-p*b[1],r)}}for(var c=[0,0,0],h=[0,0,0],p=[0,0,0],d=[0,0,0],v={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},g=0;g<3;++g){p[g]=s.length/3|0,u(.5*(r[0][g]+r[1][g]),n[g],i[g],12,1.25,v),d[g]=(s.length/3|0)-p[g],c[g]=s.length/3|0;for(var y=0;y<a[g].length;++y)a[g][y].text&&u(a[g][y].x,a[g][y].text,a[g][y].font||o,a[g][y].fontSize||12,1.25,v);h[g]=(s.length/3|0)-c[g]}this.buffer.update(s),this.tickOffset=c,this.tickCount=h,this.labelOffset=p,this.labelCount=d},p.drawTicks=function(r,n,i,a,o,s,l,u){this.tickCount[r]&&(this.shader.uniforms.axis=s,this.shader.uniforms.color=o,this.shader.uniforms.angle=i,this.shader.uniforms.scale=n,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=l,this.shader.uniforms.alignOpt=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[r],this.tickOffset[r]))},p.drawLabel=function(r,n,i,a,o,s,l,u){this.labelCount[r]&&(this.shader.uniforms.axis=s,this.shader.uniforms.color=o,this.shader.uniforms.angle=i,this.shader.uniforms.scale=n,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=l,this.shader.uniforms.alignOpt=u,this.vao.draw(this.gl.TRIANGLES,this.labelCount[r],this.labelOffset[r]))},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(r,n){"use strict";function i(r,n){var i=r+"",a=i.indexOf("."),o=0;a>=0&&(o=i.length-a-1);var s=Math.pow(10,o),l=Math.round(r*n*s),u=l+"";if(u.indexOf("e")>=0)return u;var c=l/s,f=l%s;l<0?(c=0|-Math.ceil(c),f=0|-f):(c=0|Math.floor(c),f|=0);var h=""+c;if(l<0&&(h="-"+h),o){for(var p=""+f;p.length<o;)p="0"+p;return h+"."+p}return h}n.create=function(r,n){for(var a=[],o=0;o<3;++o){for(var s=[],l=(r[0][o],r[1][o],0);l*n[o]<=r[1][o];++l)s.push({x:l*n[o],text:i(n[o],l)});for(l=-1;l*n[o]>=r[0][o];--l)s.push({x:l*n[o],text:i(n[o],l)});a.push(s)}return a},n.equal=function(r,n){for(var i=0;i<3;++i){if(r[i].length!==n[i].length)return!1;for(var a=0;a<r[i].length;++a){var o=r[i][a],s=n[i][a];if(o.x!==s.x||o.text!==s.text||o.font!==s.font||o.fontColor!==s.fontColor||o.fontSize!==s.fontSize||o.dx!==s.dx||o.dy!==s.dy)return!1}}return!0}},2771:function(r,n,i){"use strict";r.exports=function(r,n,i,p,m){var x=n.model||f,b=n.view||f,_=n.projection||f,w=n._ortho||!1,T=r.bounds,k=(m=m||s(x,b,_,T,w)).axis;l(h,b,x),l(h,_,h);for(var A=0;A<3;++A)g[A].lo=1/0,g[A].hi=-1/0,g[A].pixelsPerDataUnit=1/0;var M=a(u(h,h));u(h,h);for(var S=0;S<3;++S){var E=(S+1)%3,L=(S+2)%3;t:for(A=0;A<2;++A){var C=[];if(k[S]<0!=!!A){y[S]=T[A][S];for(var O=0;O<2;++O){y[E]=T[O^A][E];for(var P=0;P<2;++P)y[L]=T[P^O^A][L],C.push(y.slice())}var I=w?5:4;for(O=I;O===I;++O){if(0===C.length)continue t;C=o.positive(C,M[O])}for(O=0;O<C.length;++O){var D=function(r,n,i,a,o){for(var s=0;s<3;++s){for(var l=0;l<3;++l)v[l]=d[l]=i[l];v[3]=d[3]=1,v[s]+=1,c(v,v,n),v[3]<0&&(r[s]=1/0),d[s]-=1,c(d,d,n),d[3]<0&&(r[s]=1/0);var u=(d[0]/d[3]-v[0]/v[3])*a,f=(d[1]/d[3]-v[1]/v[3])*o;r[s]=.25*Math.sqrt(u*u+f*f)}return r}(y,h,L=C[O],i,p);for(P=0;P<3;++P)g[P].lo=Math.min(g[P].lo,L[P]),g[P].hi=Math.max(g[P].hi,L[P]),P!==S&&(g[P].pixelsPerDataUnit=Math.min(g[P].pixelsPerDataUnit,Math.abs(D[P])))}}}}return g};var a=i(5795),o=i(4670),s=i(2864),l=i(104),u=i(2142),c=i(6342),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function p(r,n,i){this.lo=r,this.hi=n,this.pixelsPerDataUnit=i}var d=[0,0,0,1],v=[0,0,0,1],g=[new p(1/0,-1/0,1/0),new p(1/0,-1/0,1/0),new p(1/0,-1/0,1/0)],y=[0,0,0]},5827:function(r,n,i){"use strict";var a=i(5306),o=i(7498),s=i(5050),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(r,n,i,a,o){this.gl=r,this.type=n,this.handle=i,this.length=a,this.usage=o}var c=u.prototype;function f(r,n,i,a,o,s){var l=o.length*o.BYTES_PER_ELEMENT;if(s<0)return r.bufferData(n,o,a),l;if(l+s>i)throw Error("gl-buffer: If resizing buffer, must not specify offset");return r.bufferSubData(n,s,o),i}function h(r,n){for(var i=a.malloc(r.length,n),o=r.length,s=0;s<o;++s)i[s]=r[s];return i}c.bind=function(){this.gl.bindBuffer(this.type,this.handle)},c.unbind=function(){this.gl.bindBuffer(this.type,null)},c.dispose=function(){this.gl.deleteBuffer(this.handle)},c.update=function(r,n){if("number"!=typeof n&&(n=-1),this.bind(),"object"==typeof r&&void 0!==r.shape){var i,u=r.dtype;if(0>l.indexOf(u)&&(u="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(u=gl.getExtension("OES_element_index_uint")&&"uint16"!==u?"uint32":"uint16"),u===r.dtype&&function(r,n){for(var i=1,a=n.length-1;a>=0;--a){if(n[a]!==i)return!1;i*=r[a]}return!0}(r.shape,r.stride))0===r.offset&&r.data.length===r.shape[0]?this.length=f(this.gl,this.type,this.length,this.usage,r.data,n):this.length=f(this.gl,this.type,this.length,this.usage,r.data.subarray(r.offset,r.shape[0]),n);else{var c=a.malloc(r.size,u),p=s(c,r.shape);o.assign(p,r),this.length=f(this.gl,this.type,this.length,this.usage,n<0?c:c.subarray(0,r.size),n),a.free(c)}}else if(Array.isArray(r))i=this.type===this.gl.ELEMENT_ARRAY_BUFFER?h(r,"uint16"):h(r,"float32"),this.length=f(this.gl,this.type,this.length,this.usage,n<0?i:i.subarray(0,r.length),n),a.free(i);else if("object"==typeof r&&"number"==typeof r.length)this.length=f(this.gl,this.type,this.length,this.usage,r,n);else{if("number"!=typeof r&&void 0!==r)throw Error("gl-buffer: Invalid data type");if(n>=0)throw Error("gl-buffer: Cannot specify offset when resizing buffer");(r|=0)<=0&&(r=1),this.gl.bufferData(this.type,0|r,this.usage),this.length=r}},r.exports=function(r,n,i,a){if(i=i||r.ARRAY_BUFFER,a=a||r.DYNAMIC_DRAW,i!==r.ARRAY_BUFFER&&i!==r.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(a!==r.DYNAMIC_DRAW&&a!==r.STATIC_DRAW&&a!==r.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var o=r.createBuffer(),s=new u(r,i,o,0,a);return s.update(n),s}},1140:function(r,n,i){"use strict";var a=i(2858);r.exports=function(r,n){var i=r.positions,o=r.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(0===r.positions.length)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var l=0,u=1/0,c=-1/0,f=1/0,h=-1/0,p=1/0,d=-1/0,v=null,g=null,y=[],m=1/0,x=!1,b=0;b<i.length;b++){var _=i[b];u=Math.min(_[0],u),c=Math.max(_[0],c),f=Math.min(_[1],f),h=Math.max(_[1],h),p=Math.min(_[2],p),d=Math.max(_[2],d);var w=o[b];if(a.length(w)>l&&(l=a.length(w)),b){var T=2*a.distance(v,_)/(a.length(g)+a.length(w));T?(m=Math.min(m,T),x=!1):x=!0}x||(v=_,g=w),y.push(w)}var k=[u,f,p],A=[c,h,d];n&&(n[0]=k,n[1]=A),0===l&&(l=1);var M=1/l;isFinite(m)||(m=1),s.vectorScale=m;var S=r.coneSize||.5;r.absoluteConeSize&&(S=r.absoluteConeSize*M),s.coneScale=S,b=0;for(var E=0;b<i.length;b++)for(var L=(_=i[b])[0],C=_[1],O=_[2],P=y[b],I=a.length(P)*M,D=0;D<8;D++){s.positions.push([L,C,O,E++]),s.positions.push([L,C,O,E++]),s.positions.push([L,C,O,E++]),s.positions.push([L,C,O,E++]),s.positions.push([L,C,O,E++]),s.positions.push([L,C,O,E++]),s.vectors.push(P),s.vectors.push(P),s.vectors.push(P),s.vectors.push(P),s.vectors.push(P),s.vectors.push(P),s.vertexIntensity.push(I,I,I),s.vertexIntensity.push(I,I,I);var z=s.positions.length;s.cells.push([z-6,z-5,z-4],[z-3,z-2,z-1])}return s};var o=i(7234);r.exports.createMesh=i(5028),r.exports.createConeMesh=function(n,i){return r.exports.createMesh(n,i,{shaders:o,traceType:"cone"})}},5028:function(r,n,i){"use strict";var a=i(5158),o=i(5827),s=i(2944),l=i(8931),u=i(104),c=i(7437),f=i(5050),h=i(9156),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(r,n,i,a,o,s,l,u,c,f,h){this.gl=r,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=n,this.dirty=!0,this.triShader=i,this.pickShader=a,this.trianglePositions=o,this.triangleVectors=s,this.triangleColors=u,this.triangleUVs=c,this.triangleIds=l,this.triangleVAO=f,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=h,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=p,this._view=p,this._projection=p,this._resolution=[1,1]}var v=d.prototype;v.isOpaque=function(){return this.opacity>=1},v.isTransparent=function(){return this.opacity<1},v.pickSlots=1,v.setPickBase=function(r){this.pickId=r},v.update=function(r){r=r||{};var n=this.gl;this.dirty=!0,"lightPosition"in r&&(this.lightPosition=r.lightPosition),"opacity"in r&&(this.opacity=r.opacity),"ambient"in r&&(this.ambientLight=r.ambient),"diffuse"in r&&(this.diffuseLight=r.diffuse),"specular"in r&&(this.specularLight=r.specular),"roughness"in r&&(this.roughness=r.roughness),"fresnel"in r&&(this.fresnel=r.fresnel),void 0!==r.tubeScale&&(this.tubeScale=r.tubeScale),void 0!==r.vectorScale&&(this.vectorScale=r.vectorScale),void 0!==r.coneScale&&(this.coneScale=r.coneScale),void 0!==r.coneOffset&&(this.coneOffset=r.coneOffset),r.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=n.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=n.LINEAR,this.texture.setPixels(function(r){for(var n=h({colormap:r,nshades:256,format:"rgba"}),i=new Uint8Array(1024),a=0;a<256;++a){for(var o=n[a],s=0;s<3;++s)i[4*a+s]=o[s];i[4*a+3]=255*o[3]}return f(i,[256,256,4],[4,0,1])}(r.colormap)),this.texture.generateMipmap());var i=r.cells,a=r.positions,o=r.vectors;if(a&&i&&o){var s=[],l=[],u=[],c=[],p=[];this.cells=i,this.positions=a,this.vectors=o;var d=r.meshColor||[1,1,1,1],v=r.vertexIntensity,g=1/0,y=-1/0;if(v){if(r.vertexIntensityBounds)g=+r.vertexIntensityBounds[0],y=+r.vertexIntensityBounds[1];else for(var m=0;m<v.length;++m){var x=v[m];g=Math.min(g,x),y=Math.max(y,x)}}else for(m=0;m<a.length;++m)g=Math.min(g,x=a[m][2]),y=Math.max(y,x);for(this.intensity=v||function(r){for(var n=r.length,i=Array(n),a=0;a<n;++a)i[a]=r[a][2];return i}(a),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],m=0;m<a.length;++m)for(var b=a[m],_=0;_<3;++_)!isNaN(b[_])&&isFinite(b[_])&&(this.bounds[0][_]=Math.min(this.bounds[0][_],b[_]),this.bounds[1][_]=Math.max(this.bounds[1][_],b[_]));var w=0;t:for(m=0;m<i.length;++m){var T=i[m];if(3===T.length){for(_=0;_<3;++_){b=a[A=T[_]];for(var k=0;k<3;++k)if(isNaN(b[k])||!isFinite(b[k]))continue t}for(_=0;_<3;++_){b=a[A=T[2-_]],s.push(b[0],b[1],b[2],b[3]);var A,M,S=o[A];l.push(S[0],S[1],S[2],S[3]||0),3===d.length?u.push(d[0],d[1],d[2],1):u.push(d[0],d[1],d[2],d[3]),M=v?[(v[A]-g)/(y-g),0]:[(b[2]-g)/(y-g),0],c.push(M[0],M[1]),p.push(m)}w+=1}}this.triangleCount=w,this.trianglePositions.update(s),this.triangleVectors.update(l),this.triangleColors.update(u),this.triangleUVs.update(c),this.triangleIds.update(new Uint32Array(p))}},v.drawTransparent=v.draw=function(r){r=r||{};for(var n=this.gl,i=r.model||p,a=r.view||p,o=r.projection||p,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);var f={model:i,view:a,projection:o,inverseModel:p.slice(),clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};f.inverseModel=c(f.inverseModel,f.model),n.disable(n.CULL_FACE),this.texture.bind(0);var h=Array(16);for(u(h,f.view,f.model),u(h,f.projection,h),c(h,h),l=0;l<3;++l)f.eyePosition[l]=h[12+l]/h[15];var d=h[15];for(l=0;l<3;++l)d+=this.lightPosition[l]*h[4*l+3];for(l=0;l<3;++l){for(var v=h[12+l],g=0;g<3;++g)v+=h[4*g+l]*this.lightPosition[g];f.lightPosition[l]=v/d}if(this.triangleCount>0){var y=this.triShader;y.bind(),y.uniforms=f,this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},v.drawPick=function(r){r=r||{};for(var n=this.gl,i=r.model||p,a=r.view||p,o=r.projection||p,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);this._model=[].slice.call(i),this._view=[].slice.call(a),this._projection=[].slice.call(o),this._resolution=[n.drawingBufferWidth,n.drawingBufferHeight];var u={model:i,view:a,projection:o,clipBounds:s,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},c=this.pickShader;c.bind(),c.uniforms=u,this.triangleCount>0&&(this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},v.pick=function(r){if(!r||r.id!==this.pickId)return null;var n=r.value[0]+256*r.value[1]+65536*r.value[2],i=this.cells[n],a=this.positions[i[1]].slice(0,3),o={position:a,dataCoordinate:a,index:Math.floor(i[1]/48)};return"cone"===this.traceType?o.index=Math.floor(i[1]/48):"streamtube"===this.traceType&&(o.intensity=this.intensity[i[1]],o.velocity=this.vectors[i[1]].slice(0,3),o.divergence=this.vectors[i[1]][3],o.index=n),o},v.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},r.exports=function(r,n,i){var u,c,h=i.shaders;1==arguments.length&&(r=(n=r).gl);var p=((u=a(r,h.meshShader.vertex,h.meshShader.fragment,null,h.meshShader.attributes)).attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u),v=((c=a(r,h.pickShader.vertex,h.pickShader.fragment,null,h.pickShader.attributes)).attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c),g=l(r,f(new Uint8Array([255,255,255,255]),[1,1,4]));g.generateMipmap(),g.minFilter=r.LINEAR_MIPMAP_LINEAR,g.magFilter=r.LINEAR;var y=o(r),m=o(r),x=o(r),b=o(r),_=o(r),w=new d(r,g,p,v,y,m,_,x,b,s(r,[{buffer:y,type:r.FLOAT,size:4},{buffer:_,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:r.FLOAT,size:4},{buffer:b,type:r.FLOAT,size:2},{buffer:m,type:r.FLOAT,size:4}]),i.traceType||"cone");return w.update(n),w}},7234:function(r,n,i){var a=i(6832),o=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),s=a(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},n.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(r){r.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(r,n,i){var a=i(1950);r.exports=function(r){return a[r]}},3110:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl,i=a(n),l=o(n,[{buffer:i,type:n.FLOAT,size:3,offset:0,stride:40},{buffer:i,type:n.FLOAT,size:4,offset:12,stride:40},{buffer:i,type:n.FLOAT,size:3,offset:28,stride:40}]),c=s(n);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.offset.location=2;var f=new u(n,i,l,c);return f.update(r),f};var a=i(5827),o=i(2944),s=i(7667),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(r,n,i,a){this.gl=r,this.shader=a,this.buffer=n,this.vao=i,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var c=u.prototype;function f(r,n){for(var i=0;i<3;++i)r[0][i]=Math.min(r[0][i],n[i]),r[1][i]=Math.max(r[1][i],n[i])}c.isOpaque=function(){return!this.hasAlpha},c.isTransparent=function(){return this.hasAlpha},c.drawTransparent=c.draw=function(r){var n=this.gl,i=this.shader.uniforms;this.shader.bind();var a=i.view=r.view||l,o=i.projection=r.projection||l;i.model=r.model||l,i.clipBounds=this.clipBounds,i.opacity=this.opacity;var s=a[12],u=a[13],c=a[14],f=a[15],h=(r._ortho?2:1)*this.pixelRatio*(o[3]*s+o[7]*u+o[11]*c+o[15]*f)/n.drawingBufferHeight;this.vao.bind();for(var p=0;p<3;++p)n.lineWidth(this.lineWidth[p]*this.pixelRatio),i.capSize=this.capSize[p]*h,this.lineCount[p]&&n.drawArrays(n.LINES,this.lineOffset[p],this.lineCount[p]);this.vao.unbind()};var h=function(){for(var r=[,,,],n=0;n<3;++n){for(var i=[],a=1;a<=2;++a)for(var o=-1;o<=1;o+=2){var s=[0,0,0];s[(a+n)%3]=o,i.push(s)}r[n]=i}return r}();function p(r,n,i,a){for(var o=h[a],s=0;s<o.length;++s){var l=o[s];r.push(n[0],n[1],n[2],i[0],i[1],i[2],i[3],l[0],l[1],l[2])}return o.length}c.update=function(r){"lineWidth"in(r=r||{})&&(this.lineWidth=r.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in r&&(this.capSize=r.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in r&&(this.opacity=+r.opacity,this.opacity<1&&(this.hasAlpha=!0));var n=r.color||[[0,0,0],[0,0,0],[0,0,0]],i=r.position,a=r.error;if(Array.isArray(n[0])||(n=[n,n,n]),i&&a){var o=[],s=i.length,l=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var u=0;u<3;++u){this.lineOffset[u]=l;t:for(var c=0;c<s;++c){for(var h=i[c],d=0;d<3;++d)if(isNaN(h[d])||!isFinite(h[d]))continue t;var v,g=a[c],y=n[u];Array.isArray(y[0])&&(y=n[c]),3===y.length?y=[y[0],y[1],y[2],1]:4===y.length&&(y=[y[0],y[1],y[2],y[3]],!this.hasAlpha&&y[3]<1&&(this.hasAlpha=!0)),isNaN(g[0][u])||isNaN(g[1][u])||(g[0][u]<0&&((v=h.slice())[u]+=g[0][u],o.push(h[0],h[1],h[2],y[0],y[1],y[2],y[3],0,0,0,v[0],v[1],v[2],y[0],y[1],y[2],y[3],0,0,0),f(this.bounds,v),l+=2+p(o,v,y,u)),g[1][u]>0&&((v=h.slice())[u]+=g[1][u],o.push(h[0],h[1],h[2],y[0],y[1],y[2],y[3],0,0,0,v[0],v[1],v[2],y[0],y[1],y[2],y[3],0,0,0),f(this.bounds,v),l+=2+p(o,v,y,u)))}this.lineCount[u]=l-this.lineOffset[u]}this.buffer.update(o)}},c.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(r,n,i){"use strict";var a=i(6832),o=i(5158),s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);r.exports=function(r){return o(r,s,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(r,n,i){"use strict";var a=i(8931);r.exports=function(r,n,i,a){o||(o=r.FRAMEBUFFER_UNSUPPORTED,s=r.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=r.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=r.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var f=r.getExtension("WEBGL_draw_buffers");if(!c&&f&&function(r,n){var i=r.getParameter(n.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(i+1);for(var a=0;a<=i;++a){for(var o=Array(i),s=0;s<a;++s)o[s]=r.COLOR_ATTACHMENT0+s;for(s=a;s<i;++s)o[s]=r.NONE;c[a]=o}}(r,f),Array.isArray(n)&&(a=i,i=0|n[1],n=0|n[0]),"number"!=typeof n)throw Error("gl-fbo: Missing shape parameter");var h=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(n<0||n>h||i<0||i>h)throw Error("gl-fbo: Parameters are too large for FBO");var p=1;if("color"in(a=a||{})){if((p=Math.max(0|a.color,0))<0)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(p>1){if(!f)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(p>r.getParameter(f.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+p+" draw buffers")}}var d=r.UNSIGNED_BYTE,v=r.getExtension("OES_texture_float");if(a.float&&p>0){if(!v)throw Error("gl-fbo: Context does not support floating point textures");d=r.FLOAT}else a.preferFloat&&p>0&&v&&(d=r.FLOAT);var y=!0;"depth"in a&&(y=!!a.depth);var m=!1;return"stencil"in a&&(m=!!a.stencil),new g(r,n,i,d,p,y,m,f)};var o,s,l,u,c=null;function f(r){return[r.getParameter(r.FRAMEBUFFER_BINDING),r.getParameter(r.RENDERBUFFER_BINDING),r.getParameter(r.TEXTURE_BINDING_2D)]}function h(r,n){r.bindFramebuffer(r.FRAMEBUFFER,n[0]),r.bindRenderbuffer(r.RENDERBUFFER,n[1]),r.bindTexture(r.TEXTURE_2D,n[2])}function p(r){switch(r){case o:throw Error("gl-fbo: Framebuffer unsupported");case s:throw Error("gl-fbo: Framebuffer incomplete attachment");case l:throw Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(r,n,i,o,s,l){if(!o)return null;var u=a(r,n,i,s,o);return u.magFilter=r.NEAREST,u.minFilter=r.NEAREST,u.mipSamples=1,u.bind(),r.framebufferTexture2D(r.FRAMEBUFFER,l,r.TEXTURE_2D,u.handle,0),u}function v(r,n,i,a,o){var s=r.createRenderbuffer();return r.bindRenderbuffer(r.RENDERBUFFER,s),r.renderbufferStorage(r.RENDERBUFFER,a,n,i),r.framebufferRenderbuffer(r.FRAMEBUFFER,o,r.RENDERBUFFER,s),s}function g(r,n,i,a,o,s,l,u){this.gl=r,this._shape=[0|n,0|i],this._destroyed=!1,this._ext=u,this.color=Array(o);for(var g=0;g<o;++g)this.color[g]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=a,this._useDepth=s,this._useStencil=l;var y=this,m=[0|n,0|i];Object.defineProperties(m,{0:{get:function(){return y._shape[0]},set:function(r){return y.width=r}},1:{get:function(){return y._shape[1]},set:function(r){return y.height=r}}}),this._shapeVector=m,function(r){var n=f(r.gl),i=r.gl,a=r.handle=i.createFramebuffer(),o=r._shape[0],s=r._shape[1],l=r.color.length,u=r._ext,g=r._useStencil,y=r._useDepth,m=r._colorType;i.bindFramebuffer(i.FRAMEBUFFER,a);for(var x=0;x<l;++x)r.color[x]=d(i,o,s,m,i.RGBA,i.COLOR_ATTACHMENT0+x);0===l?(r._color_rb=v(i,o,s,i.RGBA4,i.COLOR_ATTACHMENT0),u&&u.drawBuffersWEBGL(c[0])):l>1&&u.drawBuffersWEBGL(c[l]);var b=i.getExtension("WEBGL_depth_texture");b?g?r.depth=d(i,o,s,b.UNSIGNED_INT_24_8_WEBGL,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):y&&(r.depth=d(i,o,s,i.UNSIGNED_SHORT,i.DEPTH_COMPONENT,i.DEPTH_ATTACHMENT)):y&&g?r._depth_rb=v(i,o,s,i.DEPTH_STENCIL,i.DEPTH_STENCIL_ATTACHMENT):y?r._depth_rb=v(i,o,s,i.DEPTH_COMPONENT16,i.DEPTH_ATTACHMENT):g&&(r._depth_rb=v(i,o,s,i.STENCIL_INDEX,i.STENCIL_ATTACHMENT));var _=i.checkFramebufferStatus(i.FRAMEBUFFER);if(_!==i.FRAMEBUFFER_COMPLETE){for(r._destroyed=!0,i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(r.handle),r.handle=null,r.depth&&(r.depth.dispose(),r.depth=null),r._depth_rb&&(i.deleteRenderbuffer(r._depth_rb),r._depth_rb=null),x=0;x<r.color.length;++x)r.color[x].dispose(),r.color[x]=null;r._color_rb&&(i.deleteRenderbuffer(r._color_rb),r._color_rb=null),h(i,n),p(_)}h(i,n)}(this)}var y=g.prototype;function m(r,n,i){if(r._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(r._shape[0]!==n||r._shape[1]!==i){var a=r.gl,o=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(n<0||n>o||i<0||i>o)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");r._shape[0]=n,r._shape[1]=i;for(var s=f(a),l=0;l<r.color.length;++l)r.color[l].shape=r._shape;r._color_rb&&(a.bindRenderbuffer(a.RENDERBUFFER,r._color_rb),a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,r._shape[0],r._shape[1])),r.depth&&(r.depth.shape=r._shape),r._depth_rb&&(a.bindRenderbuffer(a.RENDERBUFFER,r._depth_rb),r._useDepth&&r._useStencil?a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,r._shape[0],r._shape[1]):r._useDepth?a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r._shape[0],r._shape[1]):r._useStencil&&a.renderbufferStorage(a.RENDERBUFFER,a.STENCIL_INDEX,r._shape[0],r._shape[1])),a.bindFramebuffer(a.FRAMEBUFFER,r.handle);var u=a.checkFramebufferStatus(a.FRAMEBUFFER);u!==a.FRAMEBUFFER_COMPLETE&&(r.dispose(),h(a,s),p(u)),h(a,s)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(r){if(Array.isArray(r)||(r=[0|r,0|r]),2!==r.length)throw Error("gl-fbo: Shape vector must be length 2");var n=0|r[0],i=0|r[1];return m(this,n,i),[n,i]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(r){return m(this,r|=0,this._shape[1]),r},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(r){return r|=0,m(this,this._shape[0],r),r},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,this.handle),r.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var r=this.gl;r.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(r.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var n=0;n<this.color.length;++n)this.color[n].dispose(),this.color[n]=null;this._color_rb&&(r.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(r,n,i){var a=i(8974).sprintf,o=i(6603),s=i(9365),l=i(8008);r.exports=function(r,n,i){"use strict";var u=s(n)||"of unknown name (see npm glsl-shader-name)",c="unknown type";void 0!==i&&(c=i===o.FRAGMENT_SHADER?"fragment":"vertex");for(var f=a("Error compiling %s shader %s:\n",c,u),h=a("%s%s",f,r),p=r.split("\n"),d={},v=0;v<p.length;v++){var g=p[v];if(""!==g&&"\0"!==g){var y=parseInt(g.split(":")[2]);if(isNaN(y))throw Error(a("Could not parse error: %s",g));d[y]=g}}var m=l(n).split("\n");for(v=0;v<m.length;v++)if((d[v+3]||d[v+2]||d[v+1])&&(f+=m[v]+"\n",d[v+1])){var x=d[v+1];f+=a("^^^ %s\n\n",x=x.substr(x.split(":",3).join(":").length+1).trim())}return{long:f.trim(),short:h.trim()}}},6386:function(r,n,i){"use strict";r.exports=function(r,n){var i=r.gl,a=new p(r,c(i,h.vertex,h.fragment),c(i,h.pickVertex,h.pickFragment),f(i),f(i),f(i),f(i));return a.update(n),r.addObject(a),a};var a,o,s=i(5070),l=i(9560),u=i(5306),c=i(5158),f=i(5827),h=i(1292);function p(r,n,i,a,o,s,l){this.plot=r,this.shader=n,this.pickShader=i,this.positionBuffer=a,this.weightBuffer=o,this.colorBuffer=s,this.idBuffer=l,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d,v=p.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];v.draw=(d=[1,0,0,0,1,0,0,0,1],function(){var r=this.plot,n=this.shader,i=this.bounds,a=this.numVertices;if(!(a<=0)){var o=r.gl,s=r.dataBox,l=i[2]-i[0],u=i[3]-i[1],c=s[2]-s[0],f=s[3]-s[1];d[0]=2*l/c,d[4]=2*u/f,d[6]=2*(i[0]-s[0])/c-1,d[7]=2*(i[1]-s[1])/f-1,n.bind();var h=n.uniforms;h.viewTransform=d,h.shape=this.shape;var p=n.attributes;this.positionBuffer.bind(),p.position.pointer(),this.weightBuffer.bind(),p.weight.pointer(o.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),p.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,a)}}),v.drawPick=(a=[1,0,0,0,1,0,0,0,1],o=[0,0,0,0],function(r){var n=this.plot,i=this.pickShader,s=this.bounds,l=this.numVertices;if(!(l<=0)){var u=n.gl,c=n.dataBox,f=s[2]-s[0],h=s[3]-s[1],p=c[2]-c[0],d=c[3]-c[1];a[0]=2*f/p,a[4]=2*h/d,a[6]=2*(s[0]-c[0])/p-1,a[7]=2*(s[1]-c[1])/d-1;for(var v=0;v<4;++v)o[v]=r>>8*v&255;this.pickOffset=r,i.bind();var g=i.uniforms;g.viewTransform=a,g.pickOffset=o,g.shape=this.shape;var y=i.attributes;return this.positionBuffer.bind(),y.position.pointer(),this.weightBuffer.bind(),y.weight.pointer(u.UNSIGNED_BYTE,!1),this.idBuffer.bind(),y.pickId.pointer(u.UNSIGNED_BYTE,!1),u.drawArrays(u.TRIANGLES,0,l),r+this.shape[0]*this.shape[1]}}),v.pick=function(r,n,i){var a=this.pickOffset,o=this.shape[0]*this.shape[1];if(i<a||i>=a+o)return null;var s=i-a,l=this.xData,u=this.yData;return{object:this,pointId:s,dataCoord:[l[s%this.shape[0]],u[s/this.shape[0]|0]]}},v.update=function(r){var n=(r=r||{}).shape||[0,0],i=r.x||l(n[0]),a=r.y||l(n[1]),o=r.z||new Float32Array(n[0]*n[1]),c=!1!==r.zsmooth;this.xData=i,this.yData=a;var f,h,p,d,v=r.colorLevels||[0],y=r.colorValues||[0,0,0,1],m=v.length,x=this.bounds;c?(f=x[0]=i[0],h=x[1]=a[0],p=x[2]=i[i.length-1],d=x[3]=a[a.length-1]):(f=x[0]=i[0]+(i[1]-i[0])/2,h=x[1]=a[0]+(a[1]-a[0])/2,p=x[2]=i[i.length-1]+(i[i.length-1]-i[i.length-2])/2,d=x[3]=a[a.length-1]+(a[a.length-1]-a[a.length-2])/2);var b=1/(p-f),_=1/(d-h),w=n[0],T=n[1];this.shape=[w,T];var k=(c?(w-1)*(T-1):w*T)*(g.length>>>1);this.numVertices=k;for(var A=u.mallocUint8(4*k),M=u.mallocFloat32(2*k),S=u.mallocUint8(2*k),E=u.mallocUint32(k),L=0,C=c?w-1:w,O=c?T-1:T,P=0;P<O;++P){c?(z=_*(a[P]-h),R=_*(a[P+1]-h)):(z=P<T-1?_*(a[P]-(a[P+1]-a[P])/2-h):_*(a[P]-(a[P]-a[P-1])/2-h),R=P<T-1?_*(a[P]+(a[P+1]-a[P])/2-h):_*(a[P]+(a[P]-a[P-1])/2-h));for(var I=0;I<C;++I){c?(F=b*(i[I]-f),B=b*(i[I+1]-f)):(F=I<w-1?b*(i[I]-(i[I+1]-i[I])/2-f):b*(i[I]-(i[I]-i[I-1])/2-f),B=I<w-1?b*(i[I]+(i[I+1]-i[I])/2-f):b*(i[I]+(i[I]-i[I-1])/2-f));for(var D=0;D<g.length;D+=2){var z,R,F,B,N,j,U,V,H=g[D],q=g[D+1],G=o[c?(P+q)*w+(I+H):P*w+I],Z=s.le(v,G);if(Z<0)N=y[0],j=y[1],U=y[2],V=y[3];else if(Z===m-1)N=y[4*m-4],j=y[4*m-3],U=y[4*m-2],V=y[4*m-1];else{var Y=(G-v[Z])/(v[Z+1]-v[Z]),W=1-Y,X=4*Z,J=4*(Z+1);N=W*y[X]+Y*y[J],j=W*y[X+1]+Y*y[J+1],U=W*y[X+2]+Y*y[J+2],V=W*y[X+3]+Y*y[J+3]}A[4*L]=255*N,A[4*L+1]=255*j,A[4*L+2]=255*U,A[4*L+3]=255*V,M[2*L]=.5*F+.5*B,M[2*L+1]=.5*z+.5*R,S[2*L]=H,S[2*L+1]=q,E[L]=P*w+I,L+=1}}}this.positionBuffer.update(M),this.weightBuffer.update(S),this.colorBuffer.update(A),this.idBuffer.update(E),u.free(M),u.free(A),u.free(S),u.free(E)},v.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(r,n,i){"use strict";var a=i(6832);r.exports={fragment:a(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(r,n,i){var a=i(6832),o=i(5158),s=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),c=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];n.createShader=function(r){return o(r,s,l,null,c)},n.createPickShader=function(r){return o(r,s,u,null,c)}},6086:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl||r.scene&&r.scene.gl,i=p(n);i.attributes.position.location=0,i.attributes.nextPosition.location=1,i.attributes.arcLength.location=2,i.attributes.lineWidth.location=3,i.attributes.color.location=4;var l=d(n);l.attributes.position.location=0,l.attributes.nextPosition.location=1,l.attributes.arcLength.location=2,l.attributes.lineWidth.location=3,l.attributes.color.location=4;for(var u=a(n),c=o(n,[{buffer:u,size:3,offset:0,stride:48},{buffer:u,size:3,offset:12,stride:48},{buffer:u,size:1,offset:24,stride:48},{buffer:u,size:1,offset:28,stride:48},{buffer:u,size:4,offset:32,stride:48}]),h=f(Array(1024),[256,1,4]),v=0;v<1024;++v)h.data[v]=255;var g=s(n,h);g.wrap=n.REPEAT;var y=new m(n,i,l,u,c,g);return y.update(r),y};var a=i(5827),o=i(2944),s=i(8931),l=new Uint8Array(4),u=new Float32Array(l.buffer),c=i(5070),f=i(5050),h=i(248),p=h.createShader,d=h.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(r){for(var n=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],i=0;i<3;++i)n[0][i]=Math.max(r[0][i],n[0][i]),n[1][i]=Math.min(r[1][i],n[1][i]);return n}function y(r,n,i,a){this.arcLength=r,this.position=n,this.index=i,this.dataCoordinate=a}function m(r,n,i,a,o,s){this.gl=r,this.shader=n,this.pickShader=i,this.buffer=a,this.vao=o,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=s,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var x=m.prototype;x.isTransparent=function(){return this.hasAlpha},x.isOpaque=function(){return!this.hasAlpha},x.pickSlots=1,x.setPickBase=function(r){this.pickId=r},x.drawTransparent=x.draw=function(r){if(this.vertexCount){var n=this.gl,i=this.shader,a=this.vao;i.bind(),i.uniforms={model:r.model||v,view:r.view||v,projection:r.projection||v,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[n.drawingBufferWidth,n.drawingBufferHeight],pixelRatio:this.pixelRatio},a.bind(),a.draw(n.TRIANGLE_STRIP,this.vertexCount),a.unbind()}},x.drawPick=function(r){if(this.vertexCount){var n=this.gl,i=this.pickShader,a=this.vao;i.bind(),i.uniforms={model:r.model||v,view:r.view||v,projection:r.projection||v,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[n.drawingBufferWidth,n.drawingBufferHeight],pixelRatio:this.pixelRatio},a.bind(),a.draw(n.TRIANGLE_STRIP,this.vertexCount),a.unbind()}},x.update=function(r){this.dirty=!0;var n=!!r.connectGaps;"dashScale"in r&&(this.dashScale=r.dashScale),this.hasAlpha=!1,"opacity"in r&&(this.opacity=+r.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],a=[],o=[],s=0,l=0,u=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=r.position||r.positions;if(h){var p=r.color||r.colors||[0,0,0,1],d=r.lineWidth||1,v=!1;t:for(g=1;g<h.length;++g){var g,y,m,x,b,_=h[g-1],w=h[g];for(a.push(s),o.push(_.slice()),y=0;y<3;++y){if(isNaN(_[y])||isNaN(w[y])||!isFinite(_[y])||!isFinite(w[y])){if(!n&&i.length>0){for(var T=0;T<24;++T)i.push(i[i.length-12]);l+=2,v=!0}continue t}u[0][y]=Math.min(u[0][y],_[y],w[y]),u[1][y]=Math.max(u[1][y],_[y],w[y])}Array.isArray(p[0])?(m=p.length>g-1?p[g-1]:p.length>0?p[p.length-1]:[0,0,0,1],x=p.length>g?p[g]:p.length>0?p[p.length-1]:[0,0,0,1]):m=x=p,3===m.length&&(m=[m[0],m[1],m[2],1]),3===x.length&&(x=[x[0],x[1],x[2],1]),!this.hasAlpha&&m[3]<1&&(this.hasAlpha=!0),b=Array.isArray(d)?d.length>g-1?d[g-1]:d.length>0?d[d.length-1]:[0,0,0,1]:d;var k=s;if(s+=function(r,n){for(var i=0,a=0;a<3;++a){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)}(_,w),v){for(y=0;y<2;++y)i.push(_[0],_[1],_[2],w[0],w[1],w[2],k,b,m[0],m[1],m[2],m[3]);l+=2,v=!1}i.push(_[0],_[1],_[2],w[0],w[1],w[2],k,b,m[0],m[1],m[2],m[3],_[0],_[1],_[2],w[0],w[1],w[2],k,-b,m[0],m[1],m[2],m[3],w[0],w[1],w[2],_[0],_[1],_[2],s,-b,x[0],x[1],x[2],x[3],w[0],w[1],w[2],_[0],_[1],_[2],s,b,x[0],x[1],x[2],x[3]),l+=4}}if(this.buffer.update(i),a.push(s),o.push(h[h.length-1].slice()),this.bounds=u,this.vertexCount=l,this.points=o,this.arcLength=a,"dashes"in r){var A=r.dashes.slice();for(A.unshift(0),g=1;g<A.length;++g)A[g]=A[g-1]+A[g];var M=f(Array(1024),[256,1,4]);for(g=0;g<256;++g){for(y=0;y<4;++y)M.set(g,0,y,0);1&c.le(A,A[A.length-1]*g/255)?M.set(g,0,0,0):M.set(g,0,0,255)}this.texture.setPixels(M)}},x.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},x.pick=function(r){if(!r||r.id!==this.pickId)return null;var n,i,a,o=(n=r.value[0],i=r.value[1],a=r.value[2],l[0]=0,l[1]=a,l[2]=i,l[3]=n,u[0]),s=c.le(this.arcLength,o);if(s<0)return null;if(s===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),s);for(var f=this.points[s],h=this.points[Math.min(s+1,this.points.length-1)],p=(o-this.arcLength[s])/(this.arcLength[s+1]-this.arcLength[s]),d=1-p,v=[0,0,0],g=0;g<3;++g)v[g]=d*f[g]+p*h[g];var m=Math.min(p<.5?s:s+1,this.points.length-1);return new y(o,v,m,this.points[m])}},7332:function(r){r.exports=function(r){var n=new Float32Array(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}},9823:function(r){r.exports=function(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7787:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],h=r[9],p=r[10],d=r[11],v=r[12],g=r[13],y=r[14],m=r[15];return(n*l-i*s)*(p*m-d*y)-(n*u-a*s)*(h*m-d*g)+(n*c-o*s)*(h*y-p*g)+(i*u-a*l)*(f*m-d*v)-(i*c-o*l)*(f*y-p*v)+(a*c-o*u)*(f*g-h*v)}},5950:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=i+i,u=a+a,c=o+o,f=i*l,h=a*l,p=a*u,d=o*l,v=o*u,g=o*c,y=s*l,m=s*u,x=s*c;return r[0]=1-p-g,r[1]=h+x,r[2]=d-m,r[3]=0,r[4]=h-x,r[5]=1-f-g,r[6]=v+y,r[7]=0,r[8]=d+m,r[9]=v-y,r[10]=1-f-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7280:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=a+a,c=o+o,f=s+s,h=a*u,p=a*c,d=a*f,v=o*c,g=o*f,y=s*f,m=l*u,x=l*c,b=l*f;return r[0]=1-(v+y),r[1]=p+b,r[2]=d-x,r[3]=0,r[4]=p-b,r[5]=1-(h+y),r[6]=g+m,r[7]=0,r[8]=d+x,r[9]=g-m,r[10]=1-(h+v),r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r}},9947:function(r){r.exports=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7437:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],p=n[9],d=n[10],v=n[11],g=n[12],y=n[13],m=n[14],x=n[15],b=i*u-a*l,_=i*c-o*l,w=i*f-s*l,T=a*c-o*u,k=a*f-s*u,A=o*f-s*c,M=h*y-p*g,S=h*m-d*g,E=h*x-v*g,L=p*m-d*y,C=p*x-v*y,O=d*x-v*m,P=b*O-_*C+w*L+T*E-k*S+A*M;return P?(P=1/P,r[0]=(u*O-c*C+f*L)*P,r[1]=(o*C-a*O-s*L)*P,r[2]=(y*A-m*k+x*T)*P,r[3]=(d*k-p*A-v*T)*P,r[4]=(c*E-l*O-f*S)*P,r[5]=(i*O-o*E+s*S)*P,r[6]=(m*w-g*A-x*_)*P,r[7]=(h*A-d*w+v*_)*P,r[8]=(l*C-u*E+f*M)*P,r[9]=(a*E-i*C-s*M)*P,r[10]=(g*k-y*w+x*b)*P,r[11]=(p*w-h*k-v*b)*P,r[12]=(u*S-l*L-c*M)*P,r[13]=(i*L-a*S+o*M)*P,r[14]=(y*_-g*T-m*b)*P,r[15]=(h*T-p*_+d*b)*P,r):null}},3012:function(r,n,i){var a=i(9947);r.exports=function(r,n,i,o){var s,l,u,c,f,h,p,d,v,g,y=n[0],m=n[1],x=n[2],b=o[0],_=o[1],w=o[2],T=i[0],k=i[1],A=i[2];return 1e-6>Math.abs(y-T)&&1e-6>Math.abs(m-k)&&1e-6>Math.abs(x-A)?a(r):(p=y-T,d=m-k,v=x-A,(g=Math.sqrt((s=_*(v*=g=1/Math.sqrt(p*p+d*d+v*v))-w*(d*=g))*s+(l=w*(p*=g)-b*v)*l+(u=b*d-_*p)*u))?(s*=g=1/g,l*=g,u*=g):(s=0,l=0,u=0),(g=Math.sqrt((c=d*u-v*l)*c+(f=v*s-p*u)*f+(h=p*l-d*s)*h))?(c*=g=1/g,f*=g,h*=g):(c=0,f=0,h=0),r[0]=s,r[1]=c,r[2]=p,r[3]=0,r[4]=l,r[5]=f,r[6]=d,r[7]=0,r[8]=u,r[9]=h,r[10]=v,r[11]=0,r[12]=-(s*y+l*m+u*x),r[13]=-(c*y+f*m+h*x),r[14]=-(p*y+d*m+v*x),r[15]=1,r)}},104:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],v=n[10],g=n[11],y=n[12],m=n[13],x=n[14],b=n[15],_=i[0],w=i[1],T=i[2],k=i[3];return r[0]=_*a+w*u+T*p+k*y,r[1]=_*o+w*c+T*d+k*m,r[2]=_*s+w*f+T*v+k*x,r[3]=_*l+w*h+T*g+k*b,_=i[4],w=i[5],T=i[6],k=i[7],r[4]=_*a+w*u+T*p+k*y,r[5]=_*o+w*c+T*d+k*m,r[6]=_*s+w*f+T*v+k*x,r[7]=_*l+w*h+T*g+k*b,_=i[8],w=i[9],T=i[10],k=i[11],r[8]=_*a+w*u+T*p+k*y,r[9]=_*o+w*c+T*d+k*m,r[10]=_*s+w*f+T*v+k*x,r[11]=_*l+w*h+T*g+k*b,_=i[12],w=i[13],T=i[14],k=i[15],r[12]=_*a+w*u+T*p+k*y,r[13]=_*o+w*c+T*d+k*m,r[14]=_*s+w*f+T*v+k*x,r[15]=_*l+w*h+T*g+k*b,r}},5268:function(r){r.exports=function(r,n,i,a,o,s,l){var u=1/(n-i),c=1/(a-o),f=1/(s-l);return r[0]=-2*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(n+i)*u,r[13]=(o+a)*c,r[14]=(l+s)*f,r[15]=1,r}},1120:function(r){r.exports=function(r,n,i,a,o){var s=1/Math.tan(n/2),l=1/(a-o);return r[0]=s/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(o+a)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*o*a*l,r[15]=0,r}},4422:function(r){r.exports=function(r,n,i,a){var o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C=a[0],O=a[1],P=a[2],I=Math.sqrt(C*C+O*O+P*P);return 1e-6>Math.abs(I)?null:(C*=I=1/I,O*=I,P*=I,o=Math.sin(i),l=1-(s=Math.cos(i)),u=n[0],c=n[1],f=n[2],h=n[3],p=n[4],d=n[5],v=n[6],g=n[7],y=n[8],m=n[9],x=n[10],b=n[11],_=C*C*l+s,w=O*C*l+P*o,T=P*C*l-O*o,k=C*O*l-P*o,A=O*O*l+s,M=P*O*l+C*o,S=C*P*l+O*o,E=O*P*l-C*o,L=P*P*l+s,r[0]=u*_+p*w+y*T,r[1]=c*_+d*w+m*T,r[2]=f*_+v*w+x*T,r[3]=h*_+g*w+b*T,r[4]=u*k+p*A+y*M,r[5]=c*k+d*A+m*M,r[6]=f*k+v*A+x*M,r[7]=h*k+g*A+b*M,r[8]=u*S+p*E+y*L,r[9]=c*S+d*E+m*L,r[10]=f*S+v*E+x*L,r[11]=h*S+g*E+b*L,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}},6109:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*o+f*a,r[5]=l*o+h*a,r[6]=u*o+p*a,r[7]=c*o+d*a,r[8]=f*o-s*a,r[9]=h*o-l*a,r[10]=p*o-u*a,r[11]=d*o-c*a,r}},7115:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o-f*a,r[1]=l*o-h*a,r[2]=u*o-p*a,r[3]=c*o-d*a,r[8]=s*a+f*o,r[9]=l*a+h*o,r[10]=u*a+p*o,r[11]=c*a+d*o,r}},5240:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],f=n[4],h=n[5],p=n[6],d=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o+f*a,r[1]=l*o+h*a,r[2]=u*o+p*a,r[3]=c*o+d*a,r[4]=f*o-s*a,r[5]=h*o-l*a,r[6]=p*o-u*a,r[7]=d*o-c*a,r}},3668:function(r){r.exports=function(r,n,i){var a=i[0],o=i[1],s=i[2];return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=n[3]*a,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=n[7]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}},998:function(r){r.exports=function(r,n,i){var a,o,s,l,u,c,f,h,p,d,v,g,y=i[0],m=i[1],x=i[2];return n===r?(r[12]=n[0]*y+n[4]*m+n[8]*x+n[12],r[13]=n[1]*y+n[5]*m+n[9]*x+n[13],r[14]=n[2]*y+n[6]*m+n[10]*x+n[14],r[15]=n[3]*y+n[7]*m+n[11]*x+n[15]):(a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],v=n[10],g=n[11],r[0]=a,r[1]=o,r[2]=s,r[3]=l,r[4]=u,r[5]=c,r[6]=f,r[7]=h,r[8]=p,r[9]=d,r[10]=v,r[11]=g,r[12]=a*y+u*m+p*x+n[12],r[13]=o*y+c*m+d*x+n[13],r[14]=s*y+f*m+v*x+n[14],r[15]=l*y+h*m+g*x+n[15]),r}},2142:function(r){r.exports=function(r,n){if(r===n){var i=n[1],a=n[2],o=n[3],s=n[6],l=n[7],u=n[11];r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=i,r[6]=n[9],r[7]=n[13],r[8]=a,r[9]=s,r[11]=n[14],r[12]=o,r[13]=l,r[14]=u}else r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15];return r}},4340:function(r,n,i){"use strict";var a=i(957),o=i(7309);function s(r,n){for(var i=[0,0,0,0],a=0;a<4;++a)for(var o=0;o<4;++o)i[o]+=r[4*a+o]*n[a];return i}r.exports=function(r,n,i,l,u,c){if(1===r.length)return[0,r[0].slice()];for(var f=Array(r.length),h=0;h<r.length;++h)f[h]=function(r,n,i,a,o){for(var l=s(a,s(i,s(n,[r[0],r[1],r[2],1]))),u=0;u<3;++u)l[u]/=l[3];return[.5*o[0]*(1+l[0]),.5*o[1]*(1-l[1])]}(r[h],i,l,u,c);var p=0,d=1/0;for(h=0;h<f.length;++h){for(var v=0,g=0;g<2;++g)v+=Math.pow(f[h][g]-n[g],2);v<d&&(d=v,p=h)}var y=function(r,n){if(2===r.length){for(var i=0,s=0,l=0;l<2;++l)i+=Math.pow(n[l]-r[0][l],2),s+=Math.pow(n[l]-r[1][l],2);return(i=Math.sqrt(i))+(s=Math.sqrt(s))<1e-6?[1,0]:[s/(i+s),i/(s+i)]}if(3===r.length){var u=[0,0];return o(r[0],r[1],r[2],n,u),a(r,u)}return[]}(f,n),m=0;for(h=0;h<3;++h){if(y[h]<-.001||y[h]>1.0001)return null;m+=y[h]}return Math.abs(m-1)>.001?null:[p,function(r,n){for(var i=[0,0,0],a=0;a<r.length;++a)for(var o=r[a],s=n[a],l=0;l<3;++l)i[l]+=s*o[l];return i}(r,y),y]}},2056:function(r,n,i){var a=i(6832),o=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),s=a(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),f=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),h=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),p=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),d=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),v=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),g=a(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);n.meshShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.wireShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},n.pointShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},n.pickShader={vertex:h,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},n.pointPickShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},n.contourShader={vertex:v,fragment:g,attributes:[{name:"position",type:"vec3"}]}},8116:function(r,n,i){"use strict";var a=i(5158),o=i(5827),s=i(2944),l=i(8931),u=i(115),c=i(104),f=i(7437),h=i(5050),p=i(9156),d=i(7212),v=i(5306),g=i(2056),y=i(4340),m=g.meshShader,x=g.wireShader,b=g.pointShader,_=g.pickShader,w=g.pointPickShader,T=g.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,A,M,S,E,L){this.gl=r,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=n,this.dirty=!0,this.triShader=i,this.lineShader=a,this.pointShader=o,this.pickShader=s,this.pointPickShader=l,this.contourShader=u,this.trianglePositions=c,this.triangleColors=h,this.triangleNormals=d,this.triangleUVs=p,this.triangleIds=f,this.triangleVAO=v,this.triangleCount=0,this.lineWidth=1,this.edgePositions=g,this.edgeColors=m,this.edgeUVs=x,this.edgeIds=y,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=_,this.pointColors=T,this.pointUVs=A,this.pointSizes=M,this.pointIds=w,this.pointVAO=S,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=E,this.contourVAO=L,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var M=A.prototype;function S(r,n){if(!n||!n.length)return 1;for(var i=0;i<n.length&&!(n.length<2);++i){if(n[i][0]===r)return n[i][1];if(n[i][0]>r&&i>0){var a=(n[i][0]-r)/(n[i][0]-n[i-1][0]);return n[i][1]*(1-a)+a*n[i-1][1]}}return 1}M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(r){this.pickId=r},M.highlight=function(r){if(r&&this.contourEnable){for(var n=d(this.cells,this.intensity,r.intensity),i=n.cells,a=n.vertexIds,o=n.vertexWeights,s=i.length,l=v.mallocFloat32(6*s),u=0,c=0;c<s;++c)for(var f=i[c],h=0;h<2;++h){var p=f[0];2===f.length&&(p=f[h]);for(var g=a[p][0],y=a[p][1],m=o[p],x=1-m,b=this.positions[g],_=this.positions[y],w=0;w<3;++w)l[u++]=m*b[w]+x*_[w]}this.contourCount=u/3|0,this.contourPositions.update(l.subarray(0,u)),v.free(l)}else this.contourCount=0},M.update=function(r){r=r||{};var n=this.gl;this.dirty=!0,"contourEnable"in r&&(this.contourEnable=r.contourEnable),"contourColor"in r&&(this.contourColor=r.contourColor),"lineWidth"in r&&(this.lineWidth=r.lineWidth),"lightPosition"in r&&(this.lightPosition=r.lightPosition),this.hasAlpha=!1,"opacity"in r&&(this.opacity=r.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in r&&(this.opacityscale=r.opacityscale,this.hasAlpha=!0),"ambient"in r&&(this.ambientLight=r.ambient),"diffuse"in r&&(this.diffuseLight=r.diffuse),"specular"in r&&(this.specularLight=r.specular),"roughness"in r&&(this.roughness=r.roughness),"fresnel"in r&&(this.fresnel=r.fresnel),r.texture?(this.texture.dispose(),this.texture=l(n,r.texture)):r.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=n.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=n.LINEAR,this.texture.setPixels(function(r,n){for(var i=p({colormap:r,nshades:256,format:"rgba"}),a=new Uint8Array(1024),o=0;o<256;++o){for(var s=i[o],l=0;l<3;++l)a[4*o+l]=s[l];a[4*o+3]=n?255*S(o/255,n):255*s[3]}return h(a,[256,256,4],[4,0,1])}(r.colormap,this.opacityscale)),this.texture.generateMipmap());var i=r.cells,a=r.positions;if(a&&i){var o=[],s=[],c=[],f=[],d=[],v=[],g=[],y=[],m=[],x=[],b=[],_=[],w=[],T=[];this.cells=i,this.positions=a;var k=r.vertexNormals,A=r.cellNormals,M=void 0===r.vertexNormalsEpsilon?1e-6:r.vertexNormalsEpsilon,E=void 0===r.faceNormalsEpsilon?1e-6:r.faceNormalsEpsilon;r.useFacetNormals&&!A&&(A=u.faceNormals(i,a,E)),A||k||(k=u.vertexNormals(i,a,M));var L=r.vertexColors,C=r.cellColors,O=r.meshColor||[1,1,1,1],P=r.vertexUVs,I=r.vertexIntensity,D=r.cellUVs,z=r.cellIntensity,R=1/0,F=-1/0;if(!P&&!D){if(I){if(r.vertexIntensityBounds)R=+r.vertexIntensityBounds[0],F=+r.vertexIntensityBounds[1];else for(var B=0;B<I.length;++B){var N=I[B];R=Math.min(R,N),F=Math.max(F,N)}}else if(z){if(r.cellIntensityBounds)R=+r.cellIntensityBounds[0],F=+r.cellIntensityBounds[1];else for(B=0;B<z.length;++B)R=Math.min(R,N=z[B]),F=Math.max(F,N)}else for(B=0;B<a.length;++B)R=Math.min(R,N=a[B][2]),F=Math.max(F,N)}this.intensity=I||z||function(r){for(var n=r.length,i=Array(n),a=0;a<n;++a)i[a]=r[a][2];return i}(a),this.pickVertex=!(z||C);var j=r.pointSizes,U=r.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=0;B<a.length;++B)for(var V=a[B],H=0;H<3;++H)!isNaN(V[H])&&isFinite(V[H])&&(this.bounds[0][H]=Math.min(this.bounds[0][H],V[H]),this.bounds[1][H]=Math.max(this.bounds[1][H],V[H]));var q=0,G=0,Z=0;t:for(B=0;B<i.length;++B){var Y,W,X,J,K=i[B];switch(K.length){case 1:for(V=a[Y=K[0]],H=0;H<3;++H)if(isNaN(V[H])||!isFinite(V[H]))continue t;x.push(V[0],V[1],V[2]),W=L?L[Y]:C?C[B]:O,this.opacityscale&&I?s.push(W[0],W[1],W[2],this.opacity*S((I[Y]-R)/(F-R),this.opacityscale)):3===W.length?b.push(W[0],W[1],W[2],this.opacity):(b.push(W[0],W[1],W[2],W[3]*this.opacity),W[3]<1&&(this.hasAlpha=!0)),X=P?P[Y]:I?[(I[Y]-R)/(F-R),0]:D?D[B]:z?[(z[B]-R)/(F-R),0]:[(V[2]-R)/(F-R),0],_.push(X[0],X[1]),j?w.push(j[Y]):w.push(U),T.push(B),Z+=1;break;case 2:for(H=0;H<2;++H){V=a[Y=K[H]];for(var $=0;$<3;++$)if(isNaN(V[$])||!isFinite(V[$]))continue t}for(H=0;H<2;++H)V=a[Y=K[H]],v.push(V[0],V[1],V[2]),W=L?L[Y]:C?C[B]:O,this.opacityscale&&I?s.push(W[0],W[1],W[2],this.opacity*S((I[Y]-R)/(F-R),this.opacityscale)):3===W.length?g.push(W[0],W[1],W[2],this.opacity):(g.push(W[0],W[1],W[2],W[3]*this.opacity),W[3]<1&&(this.hasAlpha=!0)),X=P?P[Y]:I?[(I[Y]-R)/(F-R),0]:D?D[B]:z?[(z[B]-R)/(F-R),0]:[(V[2]-R)/(F-R),0],y.push(X[0],X[1]),m.push(B);G+=1;break;case 3:for(H=0;H<3;++H)for(V=a[Y=K[H]],$=0;$<3;++$)if(isNaN(V[$])||!isFinite(V[$]))continue t;for(H=0;H<3;++H)V=a[Y=K[2-H]],o.push(V[0],V[1],V[2]),(W=L?L[Y]:C?C[B]:O)?this.opacityscale&&I?s.push(W[0],W[1],W[2],this.opacity*S((I[Y]-R)/(F-R),this.opacityscale)):3===W.length?s.push(W[0],W[1],W[2],this.opacity):(s.push(W[0],W[1],W[2],W[3]*this.opacity),W[3]<1&&(this.hasAlpha=!0)):s.push(.5,.5,.5,1),X=P?P[Y]:I?[(I[Y]-R)/(F-R),0]:D?D[B]:z?[(z[B]-R)/(F-R),0]:[(V[2]-R)/(F-R),0],f.push(X[0],X[1]),J=k?k[Y]:A[B],c.push(J[0],J[1],J[2]),d.push(B);q+=1}}this.pointCount=Z,this.edgeCount=G,this.triangleCount=q,this.pointPositions.update(x),this.pointColors.update(b),this.pointUVs.update(_),this.pointSizes.update(w),this.pointIds.update(new Uint32Array(T)),this.edgePositions.update(v),this.edgeColors.update(g),this.edgeUVs.update(y),this.edgeIds.update(new Uint32Array(m)),this.trianglePositions.update(o),this.triangleColors.update(s),this.triangleUVs.update(f),this.triangleNormals.update(c),this.triangleIds.update(new Uint32Array(d))}},M.drawTransparent=M.draw=function(r){r=r||{};for(var n=this.gl,i=r.model||k,a=r.view||k,o=r.projection||k,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);var u={model:i,view:a,projection:o,inverseModel:k.slice(),clipBounds:s,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};u.inverseModel=f(u.inverseModel,u.model),n.disable(n.CULL_FACE),this.texture.bind(0);var h=Array(16);for(c(h,u.view,u.model),c(h,u.projection,h),f(h,h),l=0;l<3;++l)u.eyePosition[l]=h[12+l]/h[15];var p,d=h[15];for(l=0;l<3;++l)d+=this.lightPosition[l]*h[4*l+3];for(l=0;l<3;++l){for(var v=h[12+l],g=0;g<3;++g)v+=h[4*g+l]*this.lightPosition[g];u.lightPosition[l]=v/d}this.triangleCount>0&&((p=this.triShader).bind(),p.uniforms=u,this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((p=this.lineShader).bind(),p.uniforms=u,this.edgeVAO.bind(),n.lineWidth(this.lineWidth*this.pixelRatio),n.drawArrays(n.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((p=this.pointShader).bind(),p.uniforms=u,this.pointVAO.bind(),n.drawArrays(n.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((p=this.contourShader).bind(),p.uniforms=u,this.contourVAO.bind(),n.drawArrays(n.LINES,0,this.contourCount),this.contourVAO.unbind())},M.drawPick=function(r){r=r||{};for(var n=this.gl,i=r.model||k,a=r.view||k,o=r.projection||k,s=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],l=0;l<3;++l)s[0][l]=Math.max(s[0][l],this.clipBounds[0][l]),s[1][l]=Math.min(s[1][l],this.clipBounds[1][l]);this._model=[].slice.call(i),this._view=[].slice.call(a),this._projection=[].slice.call(o),this._resolution=[n.drawingBufferWidth,n.drawingBufferHeight];var u,c={model:i,view:a,projection:o,clipBounds:s,pickId:this.pickId/255};(u=this.pickShader).bind(),u.uniforms=c,this.triangleCount>0&&(this.triangleVAO.bind(),n.drawArrays(n.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),n.lineWidth(this.lineWidth*this.pixelRatio),n.drawArrays(n.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((u=this.pointPickShader).bind(),u.uniforms=c,this.pointVAO.bind(),n.drawArrays(n.POINTS,0,this.pointCount),this.pointVAO.unbind())},M.pick=function(r){if(!r||r.id!==this.pickId)return null;for(var n=r.value[0]+256*r.value[1]+65536*r.value[2],i=this.cells[n],a=this.positions,o=Array(i.length),s=0;s<i.length;++s)o[s]=a[i[s]];var l=r.coord[0],u=r.coord[1];if(!this.pickVertex){var c=this.positions[i[0]],f=this.positions[i[1]],h=this.positions[i[2]],p=[(c[0]+f[0]+h[0])/3,(c[1]+f[1]+h[1])/3,(c[2]+f[2]+h[2])/3];return{_cellCenter:!0,position:[l,u],index:n,cell:i,cellId:n,intensity:this.intensity[n],dataCoordinate:p}}var d=y(o,[l*this.pixelRatio,this._resolution[1]-u*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!d)return null;var v=d[2],g=0;for(s=0;s<i.length;++s)g+=v[s]*this.intensity[i[s]];return{position:d[1],index:i[d[0]],cell:i,cellId:n,intensity:g,dataCoordinate:this.positions[i[d[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},r.exports=function(r,n){if(1==arguments.length&&(r=(n=r).gl),!(r.getExtension("OES_standard_derivatives")||r.getExtension("MOZ_OES_standard_derivatives")||r.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var i,u,c,f,p,d,v=((i=a(r,m.vertex,m.fragment)).attributes.position.location=0,i.attributes.color.location=2,i.attributes.uv.location=3,i.attributes.normal.location=4,i),g=((u=a(r,x.vertex,x.fragment)).attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u),y=((c=a(r,b.vertex,b.fragment)).attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.pointSize.location=4,c),k=((f=a(r,_.vertex,_.fragment)).attributes.position.location=0,f.attributes.id.location=1,f),M=((p=a(r,w.vertex,w.fragment)).attributes.position.location=0,p.attributes.id.location=1,p.attributes.pointSize.location=4,p),S=((d=a(r,T.vertex,T.fragment)).attributes.position.location=0,d),E=l(r,h(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=r.LINEAR_MIPMAP_LINEAR,E.magFilter=r.LINEAR;var L=o(r),C=o(r),O=o(r),P=o(r),I=o(r),D=s(r,[{buffer:L,type:r.FLOAT,size:3},{buffer:I,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:r.FLOAT,size:4},{buffer:O,type:r.FLOAT,size:2},{buffer:P,type:r.FLOAT,size:3}]),z=o(r),R=o(r),F=o(r),B=o(r),N=s(r,[{buffer:z,type:r.FLOAT,size:3},{buffer:B,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:r.FLOAT,size:4},{buffer:F,type:r.FLOAT,size:2}]),j=o(r),U=o(r),V=o(r),H=o(r),q=o(r),G=s(r,[{buffer:j,type:r.FLOAT,size:3},{buffer:q,type:r.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:U,type:r.FLOAT,size:4},{buffer:V,type:r.FLOAT,size:2},{buffer:H,type:r.FLOAT,size:1}]),Z=o(r),Y=new A(r,E,v,g,y,k,M,S,L,I,C,O,P,D,z,B,R,F,N,j,q,U,V,H,G,Z,s(r,[{buffer:Z,type:r.FLOAT,size:3}]));return Y.update(n),Y}},4554:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl;return new l(r,a(n,[0,0,0,1,1,0,1,1]),o(n,s.boxVert,s.lineFrag))};var a=i(5827),o=i(5158),s=i(2709);function l(r,n,i){this.plot=r,this.vbo=n,this.shader=i}var u,c,f=l.prototype;f.bind=function(){var r=this.shader;this.vbo.bind(),this.shader.bind(),r.attributes.coord.pointer(),r.uniforms.screenBox=this.plot.screenBox},f.drawBox=(u=[0,0],c=[0,0],function(r,n,i,a,o){var s=this.plot,l=this.shader,f=s.gl;u[0]=r,u[1]=n,c[0]=i,c[1]=a,l.uniforms.lo=u,l.uniforms.hi=c,l.uniforms.color=o,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl;return new v(r,f(n),h(n,d.gridVert,d.gridFrag),h(n,d.tickVert,d.gridFrag))};var a,o,s,l,u,c,f=i(5827),h=i(5158),p=i(5070),d=i(2709);function v(r,n,i,a){this.plot=r,this.vbo=n,this.shader=i,this.tickShader=a,this.ticks=[[],[]]}function g(r,n){return r-n}var y,m,x,b,_,w=v.prototype;w.draw=(y=[0,0],m=[0,0],x=[0,0],function(){for(var r=this.plot,n=this.vbo,i=this.shader,a=this.ticks,o=r.gl,s=r._tickBounds,l=r.dataBox,u=r.viewBox,c=r.gridLineWidth,f=r.gridLineColor,h=r.gridLineEnable,p=r.pixelRatio,d=0;d<2;++d){var v=s[d],g=s[d+2]-v,b=.5*(l[d+2]+l[d]),_=l[d+2]-l[d];m[d]=2*g/_,y[d]=2*(v-b)/_}i.bind(),n.bind(),i.attributes.dataCoord.pointer(),i.uniforms.dataShift=y,i.uniforms.dataScale=m;var w=0;for(d=0;d<2;++d){x[0]=x[1]=0,x[d]=1,i.uniforms.dataAxis=x,i.uniforms.lineWidth=c[d]/(u[d+2]-u[d])*p,i.uniforms.color=f[d];var T=6*a[d].length;h[d]&&T&&o.drawArrays(o.TRIANGLES,w,T),w+=T}}),w.drawTickMarks=(a=[0,0],o=[0,0],s=[1,0],l=[0,1],u=[0,0],c=[0,0],function(){for(var r=this.plot,n=this.vbo,i=this.tickShader,f=this.ticks,h=r.gl,d=r._tickBounds,v=r.dataBox,y=r.viewBox,m=r.pixelRatio,x=r.screenBox,b=x[2]-x[0],_=x[3]-x[1],w=y[2]-y[0],T=y[3]-y[1],k=0;k<2;++k){var A=d[k],M=d[k+2]-A,S=.5*(v[k+2]+v[k]),E=v[k+2]-v[k];o[k]=2*M/E,a[k]=2*(A-S)/E}o[0]*=w/b,a[0]*=w/b,o[1]*=T/_,a[1]*=T/_,i.bind(),n.bind(),i.attributes.dataCoord.pointer();var L=i.uniforms;L.dataShift=a,L.dataScale=o;var C=r.tickMarkLength,O=r.tickMarkWidth,P=r.tickMarkColor,I=6*f[0].length,D=Math.min(p.ge(f[0],(v[0]-d[0])/(d[2]-d[0]),g),f[0].length),z=Math.min(p.gt(f[0],(v[2]-d[0])/(d[2]-d[0]),g),f[0].length),R=0+6*D,F=6*Math.max(0,z-D),B=Math.min(p.ge(f[1],(v[1]-d[1])/(d[3]-d[1]),g),f[1].length),N=Math.min(p.gt(f[1],(v[3]-d[1])/(d[3]-d[1]),g),f[1].length),j=I+6*B,U=6*Math.max(0,N-B);u[0]=2*(y[0]-C[1])/b-1,u[1]=(y[3]+y[1])/_-1,c[0]=C[1]*m/b,c[1]=O[1]*m/_,U&&(L.color=P[1],L.tickScale=c,L.dataAxis=l,L.screenOffset=u,h.drawArrays(h.TRIANGLES,j,U)),u[0]=(y[2]+y[0])/b-1,u[1]=2*(y[1]-C[0])/_-1,c[0]=O[0]*m/b,c[1]=C[0]*m/_,F&&(L.color=P[0],L.tickScale=c,L.dataAxis=s,L.screenOffset=u,h.drawArrays(h.TRIANGLES,R,F)),u[0]=2*(y[2]+C[3])/b-1,u[1]=(y[3]+y[1])/_-1,c[0]=C[3]*m/b,c[1]=O[3]*m/_,U&&(L.color=P[3],L.tickScale=c,L.dataAxis=l,L.screenOffset=u,h.drawArrays(h.TRIANGLES,j,U)),u[0]=(y[2]+y[0])/b-1,u[1]=2*(y[3]+C[2])/_-1,c[0]=O[2]*m/b,c[1]=C[2]*m/_,F&&(L.color=P[2],L.tickScale=c,L.dataAxis=s,L.screenOffset=u,h.drawArrays(h.TRIANGLES,R,F))}),w.update=(b=[1,1,-1,-1,1,-1],_=[1,-1,1,1,-1,-1],function(r){for(var n=r.ticks,i=r.bounds,a=new Float32Array(18*(n[0].length+n[1].length)),o=(this.plot.zeroLineEnable,0),s=[[],[]],l=0;l<2;++l)for(var u=s[l],c=n[l],f=i[l],h=i[l+2],p=0;p<c.length;++p){var d=(c[p].x-f)/(h-f);u.push(d);for(var v=0;v<6;++v)a[o++]=d,a[o++]=b[v],a[o++]=_[v]}this.ticks=s,this.vbo.update(a)}),w.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl;return new l(r,a(n,[-1,-1,-1,1,1,-1,1,1]),o(n,s.lineVert,s.lineFrag))};var a=i(5827),o=i(5158),s=i(2709);function l(r,n,i){this.plot=r,this.vbo=n,this.shader=i}var u,c,f=l.prototype;f.bind=function(){var r=this.shader;this.vbo.bind(),this.shader.bind(),r.attributes.coord.pointer(),r.uniforms.screenBox=this.plot.screenBox},f.drawLine=(u=[0,0],c=[0,0],function(r,n,i,a,o,s){var l=this.plot,f=this.shader,h=l.gl;u[0]=r,u[1]=n,c[0]=i,c[1]=a,f.uniforms.start=u,f.uniforms.end=c,f.uniforms.width=o*l.pixelRatio,f.uniforms.color=s,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(r,n,i){"use strict";var a=i(6832),o=a(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);r.exports={lineVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:o,textVert:a(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:o,gridVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:o,boxVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl;return new h(r,s(n),l(n,f.textVert,f.textFrag))};var a,o,s=i(5827),l=i(5158),u=i(6946),c=i(5070),f=i(2709);function h(r,n,i){this.plot=r,this.vbo=n,this.shader=i,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,d,v,g,y,m,x=h.prototype;x.drawTicks=(p=[0,0],d=[0,0],v=[0,0],function(r){var n=this.plot,i=this.shader,a=this.tickX[r],o=this.tickOffset[r],s=n.gl,l=n.viewBox,u=n.dataBox,f=n.screenBox,h=n.pixelRatio,g=n.tickEnable,y=n.tickPad,m=n.tickColor,x=n.tickAngle,b=n.labelEnable,_=n.labelPad,w=n.labelColor,T=n.labelAngle,k=this.labelOffset[r],A=this.labelCount[r],M=c.lt(a,u[r]),S=c.le(a,u[r+2]);p[0]=p[1]=0,p[r]=1,d[r]=(l[2+r]+l[r])/(f[2+r]-f[r])-1;var E=2/f[2+(1^r)]-f[1^r];d[1^r]=E*l[1^r]-1,g[r]&&(d[1^r]-=E*h*y[r],M<S&&o[S]>o[M]&&(i.uniforms.dataAxis=p,i.uniforms.screenOffset=d,i.uniforms.color=m[r],i.uniforms.angle=x[r],s.drawArrays(s.TRIANGLES,o[M],o[S]-o[M]))),b[r]&&A&&(d[1^r]-=E*h*_[r],i.uniforms.dataAxis=v,i.uniforms.screenOffset=d,i.uniforms.color=w[r],i.uniforms.angle=T[r],s.drawArrays(s.TRIANGLES,k,A)),d[1^r]=E*l[2+(1^r)]-1,g[r+2]&&(d[1^r]+=E*h*y[r+2],M<S&&o[S]>o[M]&&(i.uniforms.dataAxis=p,i.uniforms.screenOffset=d,i.uniforms.color=m[r+2],i.uniforms.angle=x[r+2],s.drawArrays(s.TRIANGLES,o[M],o[S]-o[M]))),b[r+2]&&A&&(d[1^r]+=E*h*_[r+2],i.uniforms.dataAxis=v,i.uniforms.screenOffset=d,i.uniforms.color=w[r+2],i.uniforms.angle=T[r+2],s.drawArrays(s.TRIANGLES,k,A))}),x.drawTitle=(a=[0,0],o=[0,0],function(){var r=this.plot,n=this.shader,i=r.gl,s=r.screenBox,l=r.titleCenter,u=r.titleAngle,c=r.titleColor,f=r.pixelRatio;if(this.titleCount){for(var h=0;h<2;++h)o[h]=2*(l[h]*f-s[h])/(s[2+h]-s[h])-1;n.bind(),n.uniforms.dataAxis=a,n.uniforms.screenOffset=o,n.uniforms.angle=u,n.uniforms.color=c,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}),x.bind=(g=[0,0],y=[0,0],m=[0,0],function(){var r=this.plot,n=this.shader,i=r._tickBounds,a=r.dataBox,o=r.screenBox,s=r.viewBox;n.bind();for(var l=0;l<2;++l){var u=i[l],c=i[l+2]-u,f=.5*(a[l+2]+a[l]),h=a[l+2]-a[l],p=s[l],d=s[l+2]-p,v=o[l],x=o[l+2]-v;y[l]=2*c/h*d/x,g[l]=2*(u-f)/h*d/x}m[1]=2*r.pixelRatio/(o[3]-o[1]),m[0]=m[1]*(o[3]-o[1])/(o[2]-o[0]),n.uniforms.dataScale=y,n.uniforms.dataShift=g,n.uniforms.textScale=m,this.vbo.bind(),n.attributes.textCoordinate.pointer()}),x.update=function(r){var n,i,a,o,s,l=[],c=r.ticks,f=r.bounds;for(s=0;s<2;++s){var h=[Math.floor(l.length/3)],p=[-1/0],d=c[s];for(n=0;n<d.length;++n){var v=d[n],g=v.x,y=v.text,m=v.font||"sans-serif";o=v.fontSize||12;for(var x=1/(f[s+2]-f[s]),b=f[s],_=y.split("\n"),w=0;w<_.length;w++)for(a=u(m,_[w]).data,i=0;i<a.length;i+=2)l.push(a[i]*o,-a[i+1]*o-w*o*1.2,(g-b)*x);h.push(Math.floor(l.length/3)),p.push(g)}this.tickOffset[s]=h,this.tickX[s]=p}for(s=0;s<2;++s){for(this.labelOffset[s]=Math.floor(l.length/3),a=u(r.labelFont[s],r.labels[s],{textAlign:"center"}).data,o=r.labelSize[s],n=0;n<a.length;n+=2)l.push(a[n]*o,-a[n+1]*o,0);this.labelCount[s]=Math.floor(l.length/3)-this.labelOffset[s]}for(this.titleOffset=Math.floor(l.length/3),a=u(r.titleFont,r.title).data,o=r.titleSize,n=0;n<a.length;n+=2)l.push(a[n]*o,-a[n+1]*o,0);this.titleCount=Math.floor(l.length/3)-this.titleOffset,this.vbo.update(l)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl,i=new c(n,a(n,[n.drawingBufferWidth,n.drawingBufferHeight]));return i.grid=o(i),i.text=s(i),i.line=l(i),i.box=u(i),i.update(r),i};var a=i(2611),o=i(3016),s=i(5613),l=i(1154),u=i(4554);function c(r,n){this.gl=r,this.pickBuffer=n,this.screenBox=[0,0,r.drawingBufferWidth,r.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var f=c.prototype;function h(r){for(var n=r.slice(),i=0;i<n.length;++i)n[i]=n[i].slice();return n}function p(r,n){return r.x-n.x}f.setDirty=function(){this.dirty=this.pickDirty=!0},f.setOverlayDirty=function(){this.dirty=!0},f.nextDepthValue=function(){return this._depthCounter++/65536},f.draw=function(){var r=this.gl,n=this.screenBox,i=this.viewBox,a=this.dataBox,o=this.pixelRatio,s=this.grid,l=this.line,u=this.text,c=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),r.disable(r.DEPTH_TEST),r.depthFunc(r.LESS),r.depthMask(!1),r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD,r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this.borderColor){r.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]);var f=this.borderColor;r.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}r.scissor(i[0],i[1],i[2]-i[0],i[3]-i[1]),r.viewport(i[0],i[1],i[2]-i[0],i[3]-i[1]);var h=this.backgroundColor;r.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),r.clear(r.COLOR_BUFFER_BIT),s.draw();var p=this.zeroLineEnable,d=this.zeroLineColor,v=this.zeroLineWidth;if(p[0]||p[1]){l.bind();for(var g=0;g<2;++g)if(p[g]&&a[g]<=0&&a[g+2]>=0){var y=n[g]-a[g]*(n[g+2]-n[g])/(a[g+2]-a[g]);0===g?l.drawLine(y,n[1],y,n[3],v[g],d[g]):l.drawLine(n[0],y,n[2],y,v[g],d[g])}}for(g=0;g<c.length;++g)c[g].draw();r.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]),r.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),this.grid.drawTickMarks(),l.bind();var m=this.borderLineEnable,x=this.borderLineWidth,b=this.borderLineColor;for(m[1]&&l.drawLine(i[0],i[1]-.5*x[1]*o,i[0],i[3]+.5*x[3]*o,x[1],b[1]),m[0]&&l.drawLine(i[0]-.5*x[0]*o,i[1],i[2]+.5*x[2]*o,i[1],x[0],b[0]),m[3]&&l.drawLine(i[2],i[1]-.5*x[1]*o,i[2],i[3]+.5*x[3]*o,x[3],b[3]),m[2]&&l.drawLine(i[0]-.5*x[0]*o,i[3],i[2]+.5*x[2]*o,i[3],x[2],b[2]),u.bind(),g=0;g<2;++g)u.drawTicks(g);this.titleEnable&&u.drawTitle();var _=this.overlays;for(g=0;g<_.length;++g)_[g].draw();r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.depthMask(!0)}},f.drawPick=function(){if(!this.static){var r=this.pickBuffer;this.gl,this._pickTimeout=null,r.begin();for(var n=1,i=this.objects,a=0;a<i.length;++a)n=i[a].drawPick(n);r.end()}},f.pick=function(r,n){if(!this.static){var i=this.pixelRatio,a=this.pickPixelRatio,o=this.viewBox,s=0|Math.round((r-o[0]/i)*a),l=0|Math.round((n-o[1]/i)*a),u=this.pickBuffer.query(s,l,this.pickRadius);if(!u)return null;for(var c=u.id+(u.value[0]<<8)+(u.value[1]<<16)+(u.value[2]<<24),f=this.objects,h=0;h<f.length;++h){var p=f[h].pick(s,l,c);if(p)return p}return null}},f.setScreenBox=function(r){var n=this.screenBox,i=this.pixelRatio;n[0]=0|Math.round(r[0]*i),n[1]=0|Math.round(r[1]*i),n[2]=0|Math.round(r[2]*i),n[3]=0|Math.round(r[3]*i),this.setDirty()},f.setDataBox=function(r){var n=this.dataBox;(n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3])&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],this.setDirty())},f.setViewBox=function(r){var n=this.pixelRatio,i=this.viewBox;i[0]=0|Math.round(r[0]*n),i[1]=0|Math.round(r[1]*n),i[2]=0|Math.round(r[2]*n),i[3]=0|Math.round(r[3]*n);var a=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((r[2]-r[0])*a),0|Math.round((r[3]-r[1])*a)],this.setDirty()},f.update=function(r){r=r||{};var n=this.gl;this.pixelRatio=r.pixelRatio||1;var i=this.pixelRatio;this.pickPixelRatio=Math.max(i,1),this.setScreenBox(r.screenBox||[0,0,n.drawingBufferWidth/i,n.drawingBufferHeight/i]),this.screenBox,this.setViewBox(r.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/i,.125*(this.screenBox[3]-this.screenBox[1])/i,.875*(this.screenBox[2]-this.screenBox[0])/i,.875*(this.screenBox[3]-this.screenBox[1])/i]);var a=this.viewBox,o=(a[2]-a[0])/(a[3]-a[1]);this.setDataBox(r.dataBox||[-10,-10/o,10,10/o]),this.borderColor=!1!==r.borderColor&&(r.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(r.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(r.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(r.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(r.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(r.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(r.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(r.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(r.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(r.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(r.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(r.titleCenter||[.5*(a[0]+a[2])/i,(a[3]+120)/i]).slice(),this.titleEnable=!("titleEnable"in r)||!!r.titleEnable,this.titleAngle=r.titleAngle||0,this.titleColor=(r.titleColor||[0,0,0,1]).slice(),this.labelPad=(r.labelPad||[15,15,15,15]).slice(),this.labelAngle=(r.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(r.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(r.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(r.tickPad||[15,15,15,15]).slice(),this.tickAngle=(r.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(r.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(r.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(r.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(r.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(r.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var s=r.ticks||[[],[]],l=this._tickBounds;l[0]=l[1]=1/0,l[2]=l[3]=-1/0;for(var u=0;u<2;++u){var c=s[u].slice(0);0!==c.length&&(c.sort(p),l[u]=Math.min(l[u],c[0].x),l[u+2]=Math.max(l[u+2],c[c.length-1].x))}this.grid.update({bounds:l,ticks:s}),this.text.update({bounds:l,ticks:s,labels:r.labels||["x","y"],labelSize:r.labelSize||[12,12],labelFont:r.labelFont||["sans-serif","sans-serif"],title:r.title||"",titleSize:r.titleSize||18,titleFont:r.titleFont||"sans-serif"}),this.static=!!r.static,this.setDirty()},f.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var r=this.objects.length-1;r>=0;--r)this.objects[r].dispose();for(this.objects.length=0,r=this.overlays.length-1;r>=0;--r)this.overlays[r].dispose();this.overlays.length=0,this.gl=null},f.addObject=function(r){0>this.objects.indexOf(r)&&(this.objects.push(r),this.setDirty())},f.removeObject=function(r){for(var n=this.objects,i=0;i<n.length;++i)if(n[i]===r){n.splice(i,1),this.setDirty();break}},f.addOverlay=function(r){0>this.overlays.indexOf(r)&&(this.overlays.push(r),this.setOverlayDirty())},f.removeOverlay=function(r){for(var n=this.overlays,i=0;i<n.length;++i)if(n[i]===r){n.splice(i,1),this.setOverlayDirty();break}}},4296:function(r,n,i){"use strict";r.exports=function(r,n){r=r||document.body;var i=[.01,1/0];"distanceLimits"in(n=n||{})&&(i[0]=n.distanceLimits[0],i[1]=n.distanceLimits[1]),"zoomMin"in n&&(i[0]=n.zoomMin),"zoomMax"in n&&(i[1]=n.zoomMax);var f=o({center:n.center||[0,0,0],up:n.up||[0,1,0],eye:n.eye||[0,0,10],mode:n.mode||"orbit",distanceLimits:i}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,d=r.clientWidth,v=r.clientHeight,g={keyBindingMode:"rotate",enableWheel:!0,view:f,element:r,delay:n.delay||16,rotateSpeed:n.rotateSpeed||1,zoomSpeed:n.zoomSpeed||1,translateSpeed:n.translateSpeed||1,flipX:!!n.flipX,flipY:!!n.flipY,modes:f.modes,_ortho:n._ortho||n.projection&&"orthographic"===n.projection.type||!1,tick:function(){var n=a(),i=this.delay;f.idle(n-i),f.recalcMatrix(n-2*i),f.flush(n-(100+2*i));for(var o=!0,s=f.computedMatrix,l=0;l<16;++l)o=o&&h[l]===s[l],h[l]=s[l];var u=r.clientWidth===d&&r.clientHeight===v;return d=r.clientWidth,v=r.clientHeight,o?!u:(p=Math.exp(f.computedRadius[0]),!0)},lookAt:function(r,n,i){f.lookAt(f.lastT(),r,n,i)},rotate:function(r,n,i){f.rotate(f.lastT(),r,n,i)},pan:function(r,n,i){f.pan(f.lastT(),r,n,i)},translate:function(r,n,i){f.translate(f.lastT(),r,n,i)}};return Object.defineProperties(g,{matrix:{get:function(){return f.computedMatrix},set:function(r){return f.setMatrix(f.lastT(),r),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(r){var n=f.computedUp.slice(),i=f.computedEye.slice(),o=f.computedCenter.slice();if(f.setMode(r),"turntable"===r){var s=a();f._active.lookAt(s,i,o,n),f._active.lookAt(s+500,i,o,[0,0,1]),f._active.flush(s)}return f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(r){return f.lookAt(f.lastT(),null,r),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(r){return f.lookAt(f.lastT(),r),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(r){return f.lookAt(f.lastT(),null,null,r),f.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(r){return f.setDistance(f.lastT(),r),r},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(i)},set:function(r){return f.setDistanceLimits(r),r},enumerable:!0}}),r.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),g._lastX=-1,g._lastY=-1,g._lastMods={shift:!1,control:!1,alt:!1,meta:!1},g.enableMouseListeners=function(){function n(n,i,o,s){var l=g.keyBindingMode;if(!1!==l){var u=!!s.control,c=!!s.alt,h=!!s.shift,d=!!(1&n),v=1/r.clientHeight,y=v*(i-g._lastX),m=v*(o-g._lastY),x=g.flipX?1:-1,b=g.flipY?1:-1,_=Math.PI*g.rotateSpeed,w=a();if(-1!==g._lastX&&-1!==g._lastY&&(("rotate"!==l||!d||u||c||h)&&(!d||u||c||!h)||f.rotate(w,x*_*y,-b*_*m,0),("pan"!==l||!d||u||c||h)&&!(2&n)&&(!d||!u||c||h)||f.pan(w,-g.translateSpeed*y*p,g.translateSpeed*m*p,0),"zoom"===l&&d&&!u&&!c&&!h||4&n||d&&!u&&c&&!h)){var T=-g.zoomSpeed*m/window.innerHeight*(w-f.lastT())*100;f.pan(w,0,0,p*(Math.exp(T)-1))}return g._lastX=i,g._lastY=o,g._lastMods=s,!0}}g.mouseListener=s(r,n),r.addEventListener("touchstart",function(i){var a=u(i.changedTouches[0],r);n(0,a[0],a[1],g._lastMods),n(1,a[0],a[1],g._lastMods)},!!c&&{passive:!0}),r.addEventListener("touchmove",function(i){var a=u(i.changedTouches[0],r);n(1,a[0],a[1],g._lastMods),i.preventDefault()},!!c&&{passive:!1}),r.addEventListener("touchend",function(r){n(0,g._lastX,g._lastY,g._lastMods)},!!c&&{passive:!0}),g.wheelListener=l(r,function(r,n){if(!1!==g.keyBindingMode&&g.enableWheel){var i=g.flipX?1:-1,o=g.flipY?1:-1,s=a();if(Math.abs(r)>Math.abs(n))f.rotate(s,0,0,-r*i*Math.PI*g.rotateSpeed/window.innerWidth);else if(!g._ortho){var l=-g.zoomSpeed*o*n/window.innerHeight*(s-f.lastT())/20;f.pan(s,0,0,p*(Math.exp(l)-1))}}},!0)},g.enableMouseListeners(),g};var a=i(8161),o=i(1152),s=i(6145),l=i(6475),u=i(2565),c=i(5233)},8245:function(r,n,i){var a=i(6832),o=i(5158),s=a(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);r.exports=function(r){return o(r,s,l,null,[{name:"position",type:"vec2"}])}},1059:function(r,n,i){"use strict";var a=i(4296),o=i(7453),s=i(2771),l=i(6496),u=i(2611),c=i(4234),f=i(8126),h=i(6145),p=i(1120),d=i(5268),v=i(8245),g=i(2321)({tablet:!0,featureDetect:!0});function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function m(r){return"boolean"!=typeof r||r}r.exports={createScene:function(r){(r=r||{}).camera=r.camera||{};var n=r.canvas;n||(n=document.createElement("canvas"),r.container?r.container.appendChild(n):document.body.appendChild(n));var i=r.gl;if(i||(r.glOptions&&(g=!!r.glOptions.preserveDrawingBuffer),i=function(r,n){var i=null;try{(i=r.getContext("webgl",n))||(i=r.getContext("experimental-webgl",n))}catch(r){return null}return i}(n,r.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!i)throw Error("webgl not supported");var x=r.bounds||[[-10,-10,-10],[10,10,10]],b=new y,_=c(i,i.drawingBufferWidth,i.drawingBufferHeight,{preferFloat:!g}),w=v(i),T=r.cameraObject&&!0===r.cameraObject._ortho||r.camera.projection&&"orthographic"===r.camera.projection.type||!1,k={eye:r.camera.eye||[2,0,0],center:r.camera.center||[0,0,0],up:r.camera.up||[0,1,0],zoomMin:r.camera.zoomMax||.1,zoomMax:r.camera.zoomMin||100,mode:r.camera.mode||"turntable",_ortho:T},A=r.axes||{},M=o(i,A);M.enable=!A.disable;var S=r.spikes||{},E=l(i,S),L=[],C=[],O=[],P=[],I=!0,D=!0,z={view:null,projection:Array(16),model:Array(16),_ortho:!1},R=(D=!0,[i.drawingBufferWidth,i.drawingBufferHeight]),F=r.cameraObject||a(n,k),B={gl:i,contextLost:!1,pixelRatio:r.pixelRatio||1,canvas:n,selection:b,camera:F,axes:M,axesPixels:null,spikes:E,bounds:x,objects:L,shape:R,aspect:r.aspectRatio||[1,1,1],pickRadius:r.pickRadius||10,zNear:r.zNear||.01,zFar:r.zFar||1e3,fovy:r.fovy||Math.PI/4,clearColor:r.clearColor||[0,0,0,0],autoResize:m(r.autoResize),autoBounds:m(r.autoBounds),autoScale:!!r.autoScale,autoCenter:m(r.autoCenter),clipToBounds:m(r.clipToBounds),snapToData:!!r.snapToData,onselect:r.onselect||null,onrender:r.onrender||null,onclick:r.onclick||null,cameraParams:z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(r){this.aspect[0]=r.x,this.aspect[1]=r.y,this.aspect[2]=r.z,D=!0},setBounds:function(r,n){this.bounds[0][r]=n.min,this.bounds[1][r]=n.max},setClearColor:function(r){this.clearColor=r},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},N=[i.drawingBufferWidth/B.pixelRatio|0,i.drawingBufferHeight/B.pixelRatio|0];function j(){if(!B._stopped&&B.autoResize){var r=n.parentNode,i=1,a=1;r&&r!==document.body?(i=r.clientWidth,a=r.clientHeight):(i=window.innerWidth,a=window.innerHeight);var o=0|Math.ceil(i*B.pixelRatio),s=0|Math.ceil(a*B.pixelRatio);if(o!==n.width||s!==n.height){n.width=o,n.height=s;var l=n.style;l.position=l.position||"absolute",l.left="0px",l.top="0px",l.width=i+"px",l.height=a+"px",I=!0}}}function U(){for(var r=L.length,n=P.length,a=0;a<n;++a)O[a]=0;t:for(a=0;a<r;++a){var o=L[a],s=o.pickSlots;if(s){for(var l=0;l<n;++l)if(O[l]+s<255){C[a]=l,o.setPickBase(O[l]+1),O[l]+=s;continue t}var c=u(i,R);C[a]=n,P.push(c),O.push(s),o.setPickBase(1),n+=1}else C[a]=-1}for(;n>0&&0===O[n-1];)O.pop(),P.pop().dispose()}function V(){if(B.contextLost)return!0;i.isContextLost()&&(B.contextLost=!0,B.mouseListener.enabled=!1,B.selection.object=null,B.oncontextloss&&B.oncontextloss())}B.autoResize&&j(),window.addEventListener("resize",j),B.update=function(r){B._stopped||(r=r||{},I=!0,D=!0)},B.add=function(r){B._stopped||(r.axes=M,L.push(r),C.push(-1),I=!0,D=!0,U())},B.remove=function(r){if(!B._stopped){var n=L.indexOf(r);n<0||(L.splice(n,1),C.pop(),I=!0,D=!0,U())}},B.dispose=function(){if(!B._stopped&&(B._stopped=!0,window.removeEventListener("resize",j),n.removeEventListener("webglcontextlost",V),B.mouseListener.enabled=!1,!B.contextLost)){M.dispose(),E.dispose();for(var r=0;r<L.length;++r)L[r].dispose();for(_.dispose(),r=0;r<P.length;++r)P[r].dispose();w.dispose(),i=null,M=null,E=null,L=[]}},B._mouseRotating=!1,B._prevButtons=0,B.enableMouseListeners=function(){B.mouseListener=h(n,function(r,n,i){if(!B._stopped){var a=P.length,o=L.length,s=b.object;b.distance=1/0,b.mouse[0]=n,b.mouse[1]=i,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var l=!1;if(r&&B._prevButtons)B._mouseRotating=!0;else{B._mouseRotating&&(D=!0),B._mouseRotating=!1;for(var u=0;u<a;++u){var c=P[u].query(n,N[1]-i-1,B.pickRadius);if(c){if(c.distance>b.distance)continue;for(var f=0;f<o;++f){var h=L[f];if(C[f]===u){var p=h.pick(c);p&&(b.buttons=r,b.screen=c.coord,b.distance=c.distance,b.object=h,b.index=p.distance,b.dataPosition=p.position,b.dataCoordinate=p.dataCoordinate,b.data=p,l=!0)}}}}}s&&s!==b.object&&(s.highlight&&s.highlight(null),I=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),I=!0),(l=l||b.object!==s)&&B.onselect&&B.onselect(b),1&r&&!(1&B._prevButtons)&&B.onclick&&B.onclick(b),B._prevButtons=r}})},n.addEventListener("webglcontextlost",V);var H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],q=[H[0].slice(),H[1].slice()];function G(){if(!V()){j();var r=B.camera.tick();z.view=B.camera.matrix,I=I||r,D=D||r,M.pixelRatio=B.pixelRatio,E.pixelRatio=B.pixelRatio;var n=L.length,a=H[0],o=H[1];a[0]=a[1]=a[2]=1/0,o[0]=o[1]=o[2]=-1/0;for(var l=0;l<n;++l){(x=L[l]).pixelRatio=B.pixelRatio,x.axes=B.axes,I=I||!!x.dirty,D=D||!!x.dirty;var u=x.bounds;if(u)for(var c=u[0],h=u[1],v=0;v<3;++v)a[v]=Math.min(a[v],c[v]),o[v]=Math.max(o[v],h[v])}var g=B.bounds;if(B.autoBounds)for(v=0;v<3;++v){if(o[v]<a[v])a[v]=-1,o[v]=1;else{a[v]===o[v]&&(a[v]-=1,o[v]+=1);var y=.05*(o[v]-a[v]);a[v]=a[v]-y,o[v]=o[v]+y}g[0][v]=a[v],g[1][v]=o[v]}var m=!1;for(v=0;v<3;++v)m=m||q[0][v]!==g[0][v]||q[1][v]!==g[1][v],q[0][v]=g[0][v],q[1][v]=g[1][v];if(D=D||m,I=I||m){if(m){var x,k=[0,0,0];for(l=0;l<3;++l)k[l]=function(r){var n=Math.round(Math.log(Math.abs(r))/Math.log(10));if(n<0){var i=Math.round(Math.pow(10,-n));return Math.ceil(r*i)/i}return n>0?Math.ceil(r/(i=Math.round(Math.pow(10,n))))*i:Math.ceil(r)}((g[1][l]-g[0][l])/10);M.autoTicks?M.update({bounds:g,tickSpacing:k}):M.update({bounds:g})}var A=i.drawingBufferWidth,S=i.drawingBufferHeight;for(R[0]=A,R[1]=S,N[0]=0|Math.max(A/B.pixelRatio,1),N[1]=0|Math.max(S/B.pixelRatio,1),function(r,n){var i=r.bounds,a=r.cameraParams,o=a.projection,s=a.model,l=r.gl.drawingBufferWidth,u=r.gl.drawingBufferHeight,c=r.zNear,f=r.zFar,h=r.fovy,v=l/u;n?(d(o,-v,v,-1,1,c,f),a._ortho=!0):(p(o,h,v,c,f),a._ortho=!1);for(var g=0;g<16;++g)s[g]=0;s[15]=1;var y=0;for(g=0;g<3;++g)y=Math.max(y,i[1][g]-i[0][g]);for(g=0;g<3;++g)r.autoScale?s[5*g]=r.aspect[g]/(i[1][g]-i[0][g]):s[5*g]=1/y,r.autoCenter&&(s[12+g]=-(.5*s[5*g])*(i[0][g]+i[1][g]))}(B,T),l=0;l<n;++l)(x=L[l]).axesBounds=g,B.clipToBounds&&(x.clipBounds=g);b.object&&(B.snapToData?E.position=b.dataCoordinate:E.position=b.dataPosition,E.bounds=g),D&&(D=!1,function(){if(!V()){i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.disable(i.BLEND),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL);for(var r=L.length,n=P.length,a=0;a<n;++a){var o=P[a];o.shape=N,o.begin();for(var s=0;s<r;++s)if(C[s]===a){var l=L[s];l.drawPick&&(l.pixelRatio=1,l.drawPick(z))}o.end()}}}()),B.axesPixels=s(B.axes,z,A,S),B.onrender&&B.onrender(),i.bindFramebuffer(i.FRAMEBUFFER,null),i.viewport(0,0,A,S),B.clearRGBA(),i.depthMask(!0),i.colorMask(!0,!0,!0,!0),i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL),i.disable(i.BLEND),i.disable(i.CULL_FACE);var O=!1;for(M.enable&&(O=O||M.isTransparent(),M.draw(z)),E.axes=M,b.object&&E.draw(z),i.disable(i.CULL_FACE),l=0;l<n;++l)(x=L[l]).axes=M,x.pixelRatio=B.pixelRatio,x.isOpaque&&x.isOpaque()&&x.draw(z),x.isTransparent&&x.isTransparent()&&(O=!0);if(O){for(_.shape=R,_.bind(),i.clear(i.DEPTH_BUFFER_BIT),i.colorMask(!1,!1,!1,!1),i.depthMask(!0),i.depthFunc(i.LESS),M.enable&&M.isTransparent()&&M.drawTransparent(z),l=0;l<n;++l)(x=L[l]).isOpaque&&x.isOpaque()&&x.draw(z);for(i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.colorMask(!0,!0,!0,!0),i.depthMask(!1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),M.isTransparent()&&M.drawTransparent(z),l=0;l<n;++l)(x=L[l]).isTransparent&&x.isTransparent()&&x.drawTransparent(z);i.bindFramebuffer(i.FRAMEBUFFER,null),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.disable(i.DEPTH_TEST),w.bind(),_.color[0].bind(0),w.uniforms.accumBuffer=0,f(i),i.disable(i.BLEND)}for(I=!1,l=0;l<n;++l)L[l].dirty=!1}}}return B.enableMouseListeners(),function r(){B._stopped||B.contextLost||(G(),requestAnimationFrame(r))}(),B.redraw=function(){B._stopped||(I=!0,G())},B},createCamera:a}},8023:function(r,n,i){var a=i(6832);n.pointVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),n.pointFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),n.pickVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),n.pickFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(r,n,i){"use strict";var a=i(5158),o=i(5827),s=i(5306),l=i(8023);function u(r,n,i,a,o){this.plot=r,this.offsetBuffer=n,this.pickBuffer=i,this.shader=a,this.pickShader=o,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}r.exports=function(r,n){var i=r.gl,s=new u(r,o(i),o(i),a(i,l.pointVertex,l.pointFragment),a(i,l.pickVertex,l.pickFragment));return s.update(n),r.addObject(s),s};var c,f,h=u.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(r){function n(n,i){return n in r?r[n]:i}r=r||{},this.sizeMin=n("sizeMin",.5),this.sizeMax=n("sizeMax",20),this.color=n("color",[1,0,0,1]).slice(),this.areaRatio=n("areaRatio",1),this.borderColor=n("borderColor",[0,0,0,1]).slice(),this.blend=n("blend",!1);var i,a=r.positions.length>>>1,o=r.positions instanceof Float32Array,l=r.idToIndex instanceof Int32Array&&r.idToIndex.length>=a,u=r.positions,c=o?u:s.mallocFloat32(u.length),f=l?r.idToIndex:s.mallocInt32(a);if(o||c.set(u),!l)for(c.set(u),i=0;i<a;i++)f[i]=i;this.points=u,this.offsetBuffer.update(c),this.pickBuffer.update(f),o||s.free(c),l||s.free(f),this.pointCount=a,this.pickOffset=0},h.unifiedDraw=(c=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0],function(r){var n=void 0!==r,i=n?this.pickShader:this.shader,a=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return r;var s=o[2]-o[0],l=o[3]-o[1],u=function(r,n){var i,a=0,o=r.length>>>1;for(i=0;i<o;i++){var s=r[2*i],l=r[2*i+1];s>=n[0]&&s<=n[2]&&l>=n[1]&&l<=n[3]&&a++}return a}(this.points,o),h=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));c[0]=2/s,c[4]=2/l,c[6]=-2*o[0]/s-1,c[7]=-2*o[1]/l-1,this.offsetBuffer.bind(),i.bind(),i.attributes.position.pointer(),i.uniforms.matrix=c,i.uniforms.color=this.color,i.uniforms.borderColor=this.borderColor,i.uniforms.pointCloud=h<5,i.uniforms.pointSize=h,i.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),n&&(f[0]=255&r,f[1]=r>>8&255,f[2]=r>>16&255,f[3]=r>>24&255,this.pickBuffer.bind(),i.attributes.pickId.pointer(a.UNSIGNED_BYTE),i.uniforms.pickOffset=f,this.pickOffset=r);var p=a.getParameter(a.BLEND),d=a.getParameter(a.DITHER);return p&&!this.blend&&a.disable(a.BLEND),d&&a.disable(a.DITHER),a.drawArrays(a.POINTS,0,this.pointCount),p&&!this.blend&&a.enable(a.BLEND),d&&a.enable(a.DITHER),r+this.pointCount}),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(r,n,i){var a=this.pickOffset,o=this.pointCount;if(i<a||i>=a+o)return null;var s=i-a,l=this.points;return{object:this,pointId:s,dataCoord:[l[2*s],l[2*s+1]]}}},6093:function(r){r.exports=function(r,n,i,a){var o,s,l,u,c,f=n[0],h=n[1],p=n[2],d=n[3],v=i[0],g=i[1],y=i[2],m=i[3];return(s=f*v+h*g+p*y+d*m)<0&&(s=-s,v=-v,g=-g,y=-y,m=-m),1-s>1e-6?(l=Math.sin(o=Math.acos(s)),u=Math.sin((1-a)*o)/l,c=Math.sin(a*o)/l):(u=1-a,c=a),r[0]=u*f+c*v,r[1]=u*h+c*g,r[2]=u*p+c*y,r[3]=u*d+c*m,r}},8240:function(r){"use strict";r.exports=function(r){return r||0===r?r.toString():""}},4123:function(r,n,i){"use strict";var a=i(875);r.exports=function(r,n,i){var s=o[n];if(s||(s=o[n]={}),r in s)return s[r];var l={textAlign:"center",textBaseline:"middle",lineHeight:1,font:n,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},u=a(r,l);l.triangles=!1;var c,f,h=a(r,l);if(i&&1!==i){for(c=0;c<u.positions.length;++c)for(f=0;f<u.positions[c].length;++f)u.positions[c][f]/=i;for(c=0;c<h.positions.length;++c)for(f=0;f<h.positions[c].length;++f)h.positions[c][f]/=i}var p=[[1/0,1/0],[-1/0,-1/0]],d=h.positions.length;for(c=0;c<d;++c){var v=h.positions[c];for(f=0;f<2;++f)p[0][f]=Math.min(p[0][f],v[f]),p[1][f]=Math.max(p[1][f],v[f])}return s[r]=[u,h,p]};var o={}},9282:function(r,n,i){var a=i(5158),o=i(6832),s=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),u=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),f=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],p={vertex:s,fragment:c,attributes:h},d={vertex:l,fragment:c,attributes:h},v={vertex:u,fragment:c,attributes:h},g={vertex:s,fragment:f,attributes:h},y={vertex:l,fragment:f,attributes:h},m={vertex:u,fragment:f,attributes:h};function x(r,n){var i=a(r,n),o=i.attributes;return o.position.location=0,o.color.location=1,o.glyph.location=2,o.id.location=3,i}n.createPerspective=function(r){return x(r,p)},n.createOrtho=function(r){return x(r,d)},n.createProject=function(r){return x(r,v)},n.createPickPerspective=function(r){return x(r,g)},n.createPickOrtho=function(r){return x(r,y)},n.createPickProject=function(r){return x(r,m)}},2182:function(r,n,i){"use strict";var a=i(3596),o=i(5827),s=i(2944),l=i(5306),u=i(104),c=i(9282),f=i(4123),h=i(8240),p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(r,n){var i=r[0],a=r[1],o=r[2],s=r[3];return r[0]=n[0]*i+n[4]*a+n[8]*o+n[12]*s,r[1]=n[1]*i+n[5]*a+n[9]*o+n[13]*s,r[2]=n[2]*i+n[6]*a+n[10]*o+n[14]*s,r[3]=n[3]*i+n[7]*a+n[11]*o+n[15]*s,r}function v(r,n,i,a){return d(a,a),d(a,a),d(a,a)}function g(r,n){this.index=r,this.dataCoordinate=this.position=n}function y(r){return!0===r||r>1?1:r}function m(r,n,i,a,o,s,l,u,c,f,h,p){this.gl=r,this.pixelRatio=1,this.shader=n,this.orthoShader=i,this.projectShader=a,this.pointBuffer=o,this.colorBuffer=s,this.glyphBuffer=l,this.idBuffer=u,this.vao=c,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=f,this.pickOrthoShader=h,this.pickProjectShader=p,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}r.exports=function(r){var n=r.gl,i=c.createPerspective(n),a=c.createOrtho(n),l=c.createProject(n),u=c.createPickPerspective(n),f=c.createPickOrtho(n),h=c.createPickProject(n),p=o(n),d=o(n),v=o(n),g=o(n),y=new m(n,i,a,l,p,d,v,g,s(n,[{buffer:p,size:3,type:n.FLOAT},{buffer:d,size:4,type:n.FLOAT},{buffer:v,size:2,type:n.FLOAT},{buffer:g,size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),u,f,h);return y.update(r),y};var x=m.prototype;x.pickSlots=1,x.setPickBase=function(r){this.pickId=r},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var r=0;r<3;++r)if(this.axesProject[r]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var r=0;r<3;++r)if(this.axesProject[r]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],_=[0,0,0],w=[0,0,0],T=[0,0,0,1],k=[0,0,0,1],A=p.slice(),M=[0,0,0],S=[[0,0,0],[0,0,0]];function E(r){return r[0]=r[1]=r[2]=0,r}function L(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=1,r}function C(r,n,i,a){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[i]=a,r}var O=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function P(r,n,i,a,o,s,l){var c=i.gl;if((s===i.projectHasAlpha||l)&&function(r,n,i,a){var o,s=n.axesProject,l=n.gl,c=r.uniforms,f=i.model||p,h=i.view||p,d=i.projection||p,g=n.axesBounds,y=function(r){for(var n=0;n<2;++n)for(var i=0;i<3;++i)S[n][i]=Math.max(Math.min(r[n][i],1e8),-1e8);return S}(n.clipBounds);o=n.axes&&n.axes.lastCubeProps?n.axes.lastCubeProps.axis:[1,1,1],b[0]=2/l.drawingBufferWidth,b[1]=2/l.drawingBufferHeight,r.bind(),c.view=h,c.projection=d,c.screenSize=b,c.highlightId=n.highlightId,c.highlightScale=n.highlightScale,c.clipBounds=y,c.pickGroup=n.pickId/255,c.pixelRatio=a;for(var m=0;m<3;++m)if(s[m]){c.scale=n.projectScale[m],c.opacity=n.projectOpacity[m];for(var x=0;x<16;++x)A[x]=0;for(x=0;x<4;++x)A[5*x]=1;A[5*m]=0,o[m]<0?A[12+m]=g[0][m]:A[12+m]=g[1][m],u(A,f,A),c.model=A;var O=(m+1)%3,P=(m+2)%3,I=E(_),D=E(w);I[O]=1,D[P]=1;var z=v(0,0,0,L(T,I)),R=v(0,0,0,L(k,D));if(Math.abs(z[1])>Math.abs(R[1])){var F=z;z=R,R=F,F=I,I=D,D=F;var B=O;O=P,P=B}z[0]<0&&(I[O]=-1),R[1]>0&&(D[P]=-1);var N=0,j=0;for(x=0;x<4;++x)N+=Math.pow(f[4*O+x],2),j+=Math.pow(f[4*P+x],2);I[O]/=Math.sqrt(N),D[P]/=Math.sqrt(j),c.axes[0]=I,c.axes[1]=D,c.fragClipBounds[0]=C(M,y[0],m,-1e8),c.fragClipBounds[1]=C(M,y[1],m,1e8),n.vao.bind(),n.vao.draw(l.TRIANGLES,n.vertexCount),n.lineWidth>0&&(l.lineWidth(n.lineWidth*a),n.vao.draw(l.LINES,n.lineVertexCount,n.vertexCount)),n.vao.unbind()}}(n,i,a,o),s===i.hasAlpha||l){r.bind();var f=r.uniforms;f.model=a.model||p,f.view=a.view||p,f.projection=a.projection||p,b[0]=2/c.drawingBufferWidth,b[1]=2/c.drawingBufferHeight,f.screenSize=b,f.highlightId=i.highlightId,f.highlightScale=i.highlightScale,f.fragClipBounds=O,f.clipBounds=i.axes.bounds,f.opacity=i.opacity,f.pickGroup=i.pickId/255,f.pixelRatio=o,i.vao.bind(),i.vao.draw(c.TRIANGLES,i.vertexCount),i.lineWidth>0&&(c.lineWidth(i.lineWidth*o),i.vao.draw(c.LINES,i.lineVertexCount,i.vertexCount)),i.vao.unbind()}}function I(r,n,i,o){s=h(s=Array.isArray(r)?n<r.length?r[n]:void 0:r);var s,l=!0;a(s)&&(s="▼",l=!1);var u=f(s,i,o);return{mesh:u[0],lines:u[1],bounds:u[2],visible:l}}x.draw=function(r){P(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,r,this.pixelRatio,!1,!1)},x.drawTransparent=function(r){P(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,r,this.pixelRatio,!0,!1)},x.drawPick=function(r){P(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,r,1,!0,!0)},x.pick=function(r){if(!r||r.id!==this.pickId)return null;var n=r.value[2]+(r.value[1]<<8)+(r.value[0]<<16);if(n>=this.pointCount||n<0)return null;var i=this.points[n],a=this._selectResult;a.index=n;for(var o=0;o<3;++o)a.position[o]=a.dataCoordinate[o]=i[o];return a},x.highlight=function(r){if(r){var n=r.index;this.highlightId=[(255&n)/255,(n>>8&255)/255,(n>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(r){if("perspective"in(r=r||{})&&(this.useOrtho=!r.perspective),"orthographic"in r&&(this.useOrtho=!!r.orthographic),"lineWidth"in r&&(this.lineWidth=r.lineWidth),"project"in r){if(Array.isArray(r.project))this.axesProject=r.project;else{var n=!!r.project;this.axesProject=[n,n,n]}}if("projectScale"in r){if(Array.isArray(r.projectScale))this.projectScale=r.projectScale.slice();else{var i=+r.projectScale;this.projectScale=[i,i,i]}}if(this.projectHasAlpha=!1,"projectOpacity"in r){Array.isArray(r.projectOpacity)?this.projectOpacity=r.projectOpacity.slice():(i=+r.projectOpacity,this.projectOpacity=[i,i,i]);for(var a=0;a<3;++a)this.projectOpacity[a]=y(this.projectOpacity[a]),this.projectOpacity[a]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in r&&(this.opacity=y(r.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var o,s,u=r.position,c=r.font||"normal",f=r.alignment||[0,0];if(2===f.length)o=f[0],s=f[1];else for(o=[],s=[],a=0;a<f.length;++a)o[a]=f[a][0],s[a]=f[a][1];var h=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0],d=r.glyph,v=r.color,g=r.size,m=r.angle,x=r.lineColor,b=-1,_=0,w=0,T=0;if(u.length){T=u.length;t:for(a=0;a<T;++a){for(var k=u[a],A=0;A<3;++A)if(isNaN(k[A])||!isFinite(k[A]))continue t;var M=(V=I(d,a,c,this.pixelRatio)).mesh,S=V.lines,E=V.bounds;_+=3*M.cells.length,w+=2*S.edges.length}}var L=_+w,C=l.mallocFloat(3*L),O=l.mallocFloat(4*L),P=l.mallocFloat(2*L),D=l.mallocUint32(L);if(L>0){var z=0,R=_,F=[0,0,0,1],B=[0,0,0,1],N=Array.isArray(v)&&Array.isArray(v[0]),j=Array.isArray(x)&&Array.isArray(x[0]);t:for(a=0;a<T;++a){for(b+=1,k=u[a],A=0;A<3;++A){if(isNaN(k[A])||!isFinite(k[A]))continue t;p[A]=Math.max(p[A],k[A]),h[A]=Math.min(h[A],k[A])}M=(V=I(d,a,c,this.pixelRatio)).mesh,S=V.lines,E=V.bounds;var U,V,H=V.visible;if(H){if(Array.isArray(v)){if(3===(U=N?a<v.length?v[a]:[0,0,0,0]:v).length){for(A=0;A<3;++A)F[A]=U[A];F[3]=1}else if(4===U.length){for(A=0;A<4;++A)F[A]=U[A];!this.hasAlpha&&U[3]<1&&(this.hasAlpha=!0)}}else F[0]=F[1]=F[2]=0,F[3]=1}else F=[1,1,1,0];if(H){if(Array.isArray(x)){if(3===(U=j?a<x.length?x[a]:[0,0,0,0]:x).length){for(A=0;A<3;++A)B[A]=U[A];B[A]=1}else if(4===U.length){for(A=0;A<4;++A)B[A]=U[A];!this.hasAlpha&&U[3]<1&&(this.hasAlpha=!0)}}else B[0]=B[1]=B[2]=0,B[3]=1}else B=[1,1,1,0];var q=.5;H?Array.isArray(g)?q=a<g.length?+g[a]:12:g?q=+g:this.useOrtho&&(q=12):q=0;var G=0;Array.isArray(m)?G=a<m.length?+m[a]:0:m&&(G=+m);var Z=Math.cos(G),Y=Math.sin(G);for(k=u[a],A=0;A<3;++A)p[A]=Math.max(p[A],k[A]),h[A]=Math.min(h[A],k[A]);var W=o,X=s;W=0,Array.isArray(o)?W=a<o.length?o[a]:0:o&&(W=o),X=0,Array.isArray(s)?X=a<s.length?s[a]:0:s&&(X=s);var J=[W*=W>0?1-E[0][0]:W<0?1+E[1][0]:1,X*=X>0?1-E[0][1]:X<0?1+E[1][1]:1],K=M.cells||[],$=M.positions||[];for(A=0;A<K.length;++A)for(var Q=K[A],tt=0;tt<3;++tt){for(var te=0;te<3;++te)C[3*z+te]=k[te];for(te=0;te<4;++te)O[4*z+te]=F[te];D[z]=b;var tr=$[Q[tt]];P[2*z]=q*(Z*tr[0]-Y*tr[1]+J[0]),P[2*z+1]=q*(Y*tr[0]+Z*tr[1]+J[1]),z+=1}for(K=S.edges,$=S.positions,A=0;A<K.length;++A)for(Q=K[A],tt=0;tt<2;++tt){for(te=0;te<3;++te)C[3*R+te]=k[te];for(te=0;te<4;++te)O[4*R+te]=B[te];D[R]=b,tr=$[Q[tt]],P[2*R]=q*(Z*tr[0]-Y*tr[1]+J[0]),P[2*R+1]=q*(Y*tr[0]+Z*tr[1]+J[1]),R+=1}}}this.bounds=[h,p],this.points=u,this.pointCount=u.length,this.vertexCount=_,this.lineVertexCount=w,this.pointBuffer.update(C),this.colorBuffer.update(O),this.glyphBuffer.update(P),this.idBuffer.update(D),l.free(C),l.free(O),l.free(P),l.free(D)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(r,n,i){"use strict";var a=i(6832);n.boxVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),n.boxFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(r,n,i){"use strict";var a=i(5158),o=i(5827),s=i(1884);function l(r,n,i){this.plot=r,this.boxBuffer=n,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}r.exports=function(r,n){var i=r.gl,u=new l(r,o(i,[0,0,0,1,1,0,1,1]),a(i,s.boxVertex,s.boxFragment));return u.update(n),r.addOverlay(u),u};var u=l.prototype;u.draw=function(){if(this.enabled){var r=this.plot,n=this.selectBox,i=this.borderWidth,a=(this.innerFill,this.innerColor),o=(this.outerFill,this.outerColor),s=this.borderColor,l=r.box,u=r.screenBox,c=r.dataBox,f=r.viewBox,h=r.pixelRatio,p=(n[0]-c[0])*(f[2]-f[0])/(c[2]-c[0])+f[0],d=(n[1]-c[1])*(f[3]-f[1])/(c[3]-c[1])+f[1],v=(n[2]-c[0])*(f[2]-f[0])/(c[2]-c[0])+f[0],g=(n[3]-c[1])*(f[3]-f[1])/(c[3]-c[1])+f[1];if(p=Math.max(p,f[0]),d=Math.max(d,f[1]),v=Math.min(v,f[2]),g=Math.min(g,f[3]),!(v<p||g<d)){l.bind();var y=u[2]-u[0],m=u[3]-u[1];if(this.outerFill&&(l.drawBox(0,0,y,d,o),l.drawBox(0,d,p,g,o),l.drawBox(0,g,y,m,o),l.drawBox(v,d,y,g,o)),this.innerFill&&l.drawBox(p,d,v,g,a),i>0){var x=i*h;l.drawBox(p-x,d-x,v+x,d+x,s),l.drawBox(p-x,g-x,v+x,g+x,s),l.drawBox(p-x,d-x,p+x,g+x,s),l.drawBox(v-x,d-x,v+x,g+x,s)}}}},u.update=function(r){r=r||{},this.innerFill=!!r.innerFill,this.outerFill=!!r.outerFill,this.innerColor=(r.innerColor||[0,0,0,.5]).slice(),this.outerColor=(r.outerColor||[0,0,0,.5]).slice(),this.borderColor=(r.borderColor||[0,0,0,1]).slice(),this.borderWidth=r.borderWidth||0,this.selectBox=(r.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(r,n,i){"use strict";r.exports=function(r,n){var i=n[0],s=n[1];return new c(r,a(r,i,s,{}),o.mallocUint8(i*s*4))};var a=i(4234),o=i(5306),s=i(5050),l=i(2288).nextPow2;function u(r,n,i,a,o){this.coord=[r,n],this.id=i,this.value=a,this.distance=o}function c(r,n,i){this.gl=r,this.fbo=n,this.buffer=i,this._readTimeout=null;var a=this;this._readCallback=function(){a.gl&&(n.bind(),r.readPixels(0,0,n.shape[0],n.shape[1],r.RGBA,r.UNSIGNED_BYTE,a.buffer),a._readTimeout=null)}}var f=c.prototype;Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(r){if(this.gl){this.fbo.shape=r;var n=this.fbo.shape[0],i=this.fbo.shape[1];if(i*n*4>this.buffer.length){o.free(this.buffer);for(var a=this.buffer=o.mallocUint8(l(i*n*4)),s=0;s<i*n*4;++s)a[s]=255}return r}}}),f.begin=function(){var r=this.gl;this.shape,r&&(this.fbo.bind(),r.clearColor(1,1,1,1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT))},f.end=function(){var r=this.gl;r&&(r.bindFramebuffer(r.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(r,n,i){if(!this.gl)return null;var a=this.fbo.shape.slice();r|=0,n|=0,"number"!=typeof i&&(i=1);var o=0|Math.min(Math.max(r-i,0),a[0]),l=0|Math.min(Math.max(r+i,0),a[0]),c=0|Math.min(Math.max(n-i,0),a[1]),f=0|Math.min(Math.max(n+i,0),a[1]);if(l<=o||f<=c)return null;var h=[l-o,f-c],p=s(this.buffer,[h[0],h[1],4],[4,4*a[0],1],4*(o+a[0]*c)),d=function(r,n,i){for(var a=1e8,o=-1,s=-1,l=r.shape[0],u=r.shape[1],c=0;c<l;c++)for(var f=0;f<u;f++){var h=r.get(c,f,0),p=r.get(c,f,1),d=r.get(c,f,2),v=r.get(c,f,3);if(h<255||p<255||d<255||v<255){var g=n-c,y=i-f,m=g*g+y*y;m<a&&(a=m,o=c,s=f)}}return[o,s,a]}(p.hi(h[0],h[1],1),i,i),v=d[0],g=d[1];return v<0||Math.pow(this.radius,2)<d[2]?null:new u(v+o|0,g+c|0,p.get(v,g,0),[p.get(v,g,1),p.get(v,g,2),p.get(v,g,3)],Math.sqrt(d[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(r,n,i){"use strict";var a=i(9016),o=i(4280),s=i(3984),l=i(1628),u=i(2631),c=i(9068);function f(r){this.gl=r,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=f.prototype;function p(r,n){return r.name<n.name?-1:1}h.bind=function(){this.program||this._relink();var r,n=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),i=this.gl.lastAttribCount;if(n>i)for(r=i;r<n;r++)this.gl.enableVertexAttribArray(r);else if(i>n)for(r=n;r<i;r++)this.gl.disableVertexAttribArray(r);this.gl.lastAttribCount=n,this.gl.useProgram(this.program)},h.dispose=function(){for(var r=this.gl.lastAttribCount,n=0;n<r;n++)this.gl.disableVertexAttribArray(n);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(r,n,i,f){if(!n||1==arguments.length){var h=r;r=h.vertex,n=h.fragment,i=h.uniforms,f=h.attributes}var d=this,v=d.gl,g=d._vref;d._vref=l.shader(v,v.VERTEX_SHADER,r),g&&g.dispose(),d.vertShader=d._vref.shader;var y=this._fref;if(d._fref=l.shader(v,v.FRAGMENT_SHADER,n),y&&y.dispose(),d.fragShader=d._fref.shader,!i||!f){var m=v.createProgram();if(v.attachShader(m,d.fragShader),v.attachShader(m,d.vertShader),v.linkProgram(m),!v.getProgramParameter(m,v.LINK_STATUS)){var x=v.getProgramInfoLog(m);throw new c(x,"Error linking program:"+x)}i=i||u.uniforms(v,m),f=f||u.attributes(v,m),v.deleteProgram(m)}(f=f.slice()).sort(p);var b,_=[],w=[],T=[];for(b=0;b<f.length;++b){var k=f[b];if(k.type.indexOf("mat")>=0){for(var A=0|k.type.charAt(k.type.length-1),M=Array(A),S=0;S<A;++S)M[S]=T.length,w.push(k.name+"["+S+"]"),"number"==typeof k.location?T.push(k.location+S):Array.isArray(k.location)&&k.location.length===A&&"number"==typeof k.location[S]?T.push(0|k.location[S]):T.push(-1);_.push({name:k.name,type:k.type,locations:M})}else _.push({name:k.name,type:k.type,locations:[T.length]}),w.push(k.name),"number"==typeof k.location?T.push(0|k.location):T.push(-1)}var E=0;for(b=0;b<T.length;++b)if(T[b]<0){for(;T.indexOf(E)>=0;)E+=1;T[b]=E}var L=Array(i.length);function C(){d.program=l.program(v,d._vref,d._fref,w,T);for(var r=0;r<i.length;++r)L[r]=v.getUniformLocation(d.program,i[r].name)}C(),d._relink=C,d.types={uniforms:s(i),attributes:s(f)},d.attributes=o(v,d,_,T),Object.defineProperty(d,"uniforms",a(v,d,i,L))},r.exports=function(r,n,i,a,o){var s=new f(r);return s.update(n,i,a,o),s}},9068:function(r){function n(r,n,i){this.shortMessage=n||"",this.longMessage=i||"",this.rawError=r||"",this.message="gl-shader: "+(n||r||"")+(i?"\n"+i:""),this.stack=Error().stack}n.prototype=Error(),n.prototype.name="GLError",n.prototype.constructor=n,r.exports=n},4280:function(r,n,i){"use strict";r.exports=function(r,n,i,o){for(var s={},l=0,c=i.length;l<c;++l){var f,h=i[l],p=h.name,d=h.type,v=h.locations;switch(d){case"bool":case"int":case"float":u(r,n,v[0],o,1,s,p);break;default:if(d.indexOf("vec")>=0){if((f=d.charCodeAt(d.length-1)-48)<2||f>4)throw new a("","Invalid data type for attribute "+p+": "+d);u(r,n,v[0],o,f,s,p)}else{if(!(d.indexOf("mat")>=0))throw new a("","Unknown data type for attribute "+p+": "+d);if((f=d.charCodeAt(d.length-1)-48)<2||f>4)throw new a("","Invalid data type for attribute "+p+": "+d);(function(r,n,i,a,o,s,l){for(var c=Array(o),f=Array(o),h=0;h<o;++h)u(r,n,i[h],a,o,c,h),f[h]=c[h];Object.defineProperty(c,"location",{set:function(r){if(Array.isArray(r))for(var n=0;n<o;++n)f[n].location=r[n];else for(n=0;n<o;++n)f[n].location=r+n;return r},get:function(){for(var r=Array(o),n=0;n<o;++n)r[n]=a[i[n]];return r},enumerable:!0}),c.pointer=function(n,s,l,u){n=n||r.FLOAT,s=!!s,l=l||o*o,u=u||0;for(var c=0;c<o;++c){var f=a[i[c]];r.vertexAttribPointer(f,o,n,s,l,u+c*o),r.enableVertexAttribArray(f)}};var p=Array(o),d=r["vertexAttrib"+o+"fv"];Object.defineProperty(s,l,{set:function(n){for(var s=0;s<o;++s){var l=a[i[s]];if(r.disableVertexAttribArray(l),Array.isArray(n[0]))d.call(r,l,n[s]);else{for(var u=0;u<o;++u)p[u]=n[o*s+u];d.call(r,l,p)}}return n},get:function(){return c},enumerable:!0})})(r,n,v,o,f,s,p)}}}return s};var a=i(9068);function o(r,n,i,a,o,s){this._gl=r,this._wrapper=n,this._index=i,this._locations=a,this._dimension=o,this._constFunc=s}var s=o.prototype;s.pointer=function(r,n,i,a){var o=this._gl,s=this._locations[this._index];o.vertexAttribPointer(s,this._dimension,r||o.FLOAT,!!n,i||0,a||0),o.enableVertexAttribArray(s)},s.set=function(r,n,i,a){return this._constFunc(this._locations[this._index],r,n,i,a)},Object.defineProperty(s,"location",{get:function(){return this._locations[this._index]},set:function(r){return r!==this._locations[this._index]&&(this._locations[this._index]=0|r,this._wrapper.program=null),0|r}});var l=[function(r,n,i){return void 0===i.length?r.vertexAttrib1f(n,i):r.vertexAttrib1fv(n,i)},function(r,n,i,a){return void 0===i.length?r.vertexAttrib2f(n,i,a):r.vertexAttrib2fv(n,i)},function(r,n,i,a,o){return void 0===i.length?r.vertexAttrib3f(n,i,a,o):r.vertexAttrib3fv(n,i)},function(r,n,i,a,o,s){return void 0===i.length?r.vertexAttrib4f(n,i,a,o,s):r.vertexAttrib4fv(n,i)}];function u(r,n,i,a,s,u,c){var f=l[s],h=new o(r,n,i,a,s,f);Object.defineProperty(u,c,{set:function(n){return r.disableVertexAttribArray(a[i]),f(r,a[i],n),n},get:function(){return h},enumerable:!0})}},9016:function(r,n,i){"use strict";var a=i(3984),o=i(9068);function s(r){return function(){return r}}function l(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=n;return i}r.exports=function(r,n,i,u){function c(n){return function(a){for(var s=function r(n,i){if("object"!=typeof i)return[[n,i]];var a=[];for(var o in i){var s=i[o],l=n;parseInt(o)+""===o?l+="["+o+"]":l+="."+o,"object"==typeof s?a.push.apply(a,r(l,s)):a.push([l,s])}return a}("",n),l=0;l<s.length;++l){var c=s[l],f=c[0],h=c[1];if(u[h]){var p=a;if("string"==typeof f&&(0===f.indexOf(".")||0===f.indexOf("["))){var d=f;if(0===f.indexOf(".")&&(d=f.slice(1)),d.indexOf("]")===d.length-1){var v=d.indexOf("["),g=d.slice(0,v),y=d.slice(v+1,d.length-1);p=g?a[g][y]:a[y]}else p=a[d]}var m,x=i[h].type;switch(x){case"bool":case"int":case"sampler2D":case"samplerCube":r.uniform1i(u[h],p);break;case"float":r.uniform1f(u[h],p);break;default:var b=x.indexOf("vec");if(!(0<=b&&b<=1&&x.length===4+b)){if(0===x.indexOf("mat")&&4===x.length){if((m=x.charCodeAt(x.length-1)-48)<2||m>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+x);r["uniformMatrix"+m+"fv"](u[h],!1,p);break}throw new o("","Unknown uniform data type for "+name+": "+x)}if((m=x.charCodeAt(x.length-1)-48)<2||m>4)throw new o("","Invalid data type");switch(x.charAt(0)){case"b":case"i":r["uniform"+m+"iv"](u[h],p);break;case"v":r["uniform"+m+"fv"](u[h],p);break;default:throw new o("","Unrecognized data type for vector "+name+": "+x)}}}}}}function f(r,n,a){"object"==typeof a?Object.defineProperty(r,n,{get:s(h(a)),set:c(a),enumerable:!0,configurable:!1}):u[a]?Object.defineProperty(r,n,{get:function(r,n,i){return r.getUniform(n.program,i[a])},set:c(a),enumerable:!0,configurable:!1}):r[n]=function(r){switch(r){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var n,i=r.indexOf("vec");if(0<=i&&i<=1&&r.length===4+i){if((n=r.charCodeAt(r.length-1)-48)<2||n>4)throw new o("","Invalid data type");return"b"===r.charAt(0)?l(n,!1):l(n,0)}if(0===r.indexOf("mat")&&4===r.length){if((n=r.charCodeAt(r.length-1)-48)<2||n>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+r);return l(n*n,0)}throw new o("","Unknown uniform data type for "+name+": "+r)}}(i[a].type)}function h(r){var n;if(Array.isArray(r)){n=Array(r.length);for(var i=0;i<r.length;++i)f(n,i,r[i])}else for(var a in n={},r)f(n,a,r[a]);return n}var p=a(i,!0);return{get:s(h(p)),set:c(p),enumerable:!0,configurable:!0}}},3984:function(r){"use strict";r.exports=function(r,n){for(var i={},a=0;a<r.length;++a)for(var o=r[a].name.split("."),s=i,l=0;l<o.length;++l){var u=o[l].split("[");if(u.length>1){u[0]in s||(s[u[0]]=[]),s=s[u[0]];for(var c=1;c<u.length;++c){var f=parseInt(u[c]);c<u.length-1||l<o.length-1?(f in s||(c<u.length-1?s[f]=[]:s[f]={}),s=s[f]):s[f]=n?a:r[a].type}}else l<o.length-1?(u[0]in s||(s[u[0]]={}),s=s[u[0]]):s[u[0]]=n?a:r[a].type}return i}},2631:function(r,n){"use strict";n.uniforms=function(r,n){for(var i=r.getProgramParameter(n,r.ACTIVE_UNIFORMS),a=[],s=0;s<i;++s){var l=r.getActiveUniform(n,s);if(l){var u=o(r,l.type);if(l.size>1)for(var c=0;c<l.size;++c)a.push({name:l.name.replace("[0]","["+c+"]"),type:u});else a.push({name:l.name,type:u})}}return a},n.attributes=function(r,n){for(var i=r.getProgramParameter(n,r.ACTIVE_ATTRIBUTES),a=[],s=0;s<i;++s){var l=r.getActiveAttrib(n,s);l&&a.push({name:l.name,type:o(r,l.type)})}return a};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function o(r,n){if(!a){var o=Object.keys(i);a={};for(var s=0;s<o.length;++s){var l=o[s];a[r[l]]=i[l]}}return a[n]}},1628:function(r,n,i){"use strict";n.shader=function(r,n,i){return h(r).getShaderReference(n,i)},n.program=function(r,n,i,a,o){return h(r).getProgram(n,i,a,o)};var a=i(9068),o=i(3530),s=new("undefined"==typeof WeakMap?i(4037):WeakMap),l=0;function u(r,n,i,a,o,s,l){this.id=r,this.src=n,this.type=i,this.shader=a,this.count=s,this.programs=[],this.cache=l}function c(r){this.gl=r,this.shaders=[{},{}],this.programs={}}u.prototype.dispose=function(){if(0==--this.count){for(var r=this.cache,n=r.gl,i=this.programs,a=0,o=i.length;a<o;++a){var s=r.programs[i[a]];s&&(delete r.programs[a],n.deleteProgram(s))}n.deleteShader(this.shader),delete r.shaders[this.type===n.FRAGMENT_SHADER|0][this.src]}};var f=c.prototype;function h(r){var n=s.get(r);return n||(n=new c(r),s.set(r,n)),n}f.getShaderReference=function(r,n){var i=this.gl,s=this.shaders[r===i.FRAGMENT_SHADER|0],c=s[n];if(c&&i.isShader(c.shader))c.count+=1;else{var f=function(r,n,i){var s=r.createShader(n);if(r.shaderSource(s,i),r.compileShader(s),!r.getShaderParameter(s,r.COMPILE_STATUS)){var l=r.getShaderInfoLog(s);try{var u=o(l,i,n)}catch(r){throw console.warn("Failed to format compiler error: "+r),new a(l,"Error compiling shader:\n"+l)}throw new a(l,u.short,u.long)}return s}(i,r,n);c=s[n]=new u(l++,n,r,f,[],1,this)}return c},f.getProgram=function(r,n,i,o){var s=[r.id,n.id,i.join(":"),o.join(":")].join("@"),l=this.programs[s];return l&&this.gl.isProgram(l)||(this.programs[s]=l=function(r,n,i,o,s){var l=r.createProgram();r.attachShader(l,n),r.attachShader(l,i);for(var u=0;u<o.length;++u)r.bindAttribLocation(l,s[u],o[u]);if(r.linkProgram(l),!r.getProgramParameter(l,r.LINK_STATUS)){var c=r.getProgramInfoLog(l);throw new a(c,"Error linking program: "+c)}return l}(this.gl,r.shader,n.shader,i,o),r.programs.push(s),n.programs.push(s)),l}},3050:function(r){"use strict";function n(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}r.exports=function(r,i){var a=new n(r);return a.update(i),r.addOverlay(a),a};var i=n.prototype;i.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var r=this.enable,n=this.width,i=this.color,a=this.center,o=this.plot,s=o.line,l=o.dataBox,u=o.viewBox;if(s.bind(),l[0]<=a[0]&&a[0]<=l[2]&&l[1]<=a[1]&&a[1]<=l[3]){var c=u[0]+(a[0]-l[0])/(l[2]-l[0])*(u[2]-u[0]),f=u[1]+(a[1]-l[1])/(l[3]-l[1])*(u[3]-u[1]);r[0]&&s.drawLine(c,f,u[0],f,n[0],i[0]),r[1]&&s.drawLine(c,f,c,u[1],n[1],i[1]),r[2]&&s.drawLine(c,f,u[2],f,n[2],i[2]),r[3]&&s.drawLine(c,f,c,u[3],n[3],i[3])}},i.dispose=function(){this.plot.removeOverlay(this)}},3540:function(r,n,i){"use strict";var a=i(6832),o=i(5158),s=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);r.exports=function(r){return o(r,s,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(r,n,i){"use strict";var a=i(5827),o=i(2944),s=i(3540);r.exports=function(r,n){var i=[];function l(r,n,a,o,s,l){var u=[r,n,a,0,0,0,1];u[o+3]=1,u[o]=s,i.push.apply(i,u),u[6]=-1,i.push.apply(i,u),u[o]=l,i.push.apply(i,u),i.push.apply(i,u),u[6]=1,i.push.apply(i,u),u[o]=s,i.push.apply(i,u)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var c=a(r,i),f=o(r,[{type:r.FLOAT,buffer:c,size:3,offset:0,stride:28},{type:r.FLOAT,buffer:c,size:3,offset:12,stride:28},{type:r.FLOAT,buffer:c,size:1,offset:24,stride:28}]),h=s(r);h.attributes.position.location=0,h.attributes.color.location=1,h.attributes.weight.location=2;var p=new u(r,c,f,h);return p.update(n),p};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(r,n,i,a){this.gl=r,this.buffer=n,this.vao=i,this.shader=a,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var c=u.prototype,f=[0,0,0],h=[0,0,0],p=[0,0];c.isTransparent=function(){return!1},c.drawTransparent=function(r){},c.draw=function(r){var n=this.gl,i=this.vao,a=this.shader;i.bind(),a.bind();var o,s=r.model||l,u=r.view||l,c=r.projection||l;this.axes&&(o=this.axes.lastCubeProps.axis);for(var d=0;d<3;++d)o&&o[d]<0?(f[d]=this.bounds[0][d],h[d]=this.bounds[1][d]):(f[d]=this.bounds[1][d],h[d]=this.bounds[0][d]);for(p[0]=n.drawingBufferWidth,p[1]=n.drawingBufferHeight,a.uniforms.model=s,a.uniforms.view=u,a.uniforms.projection=c,a.uniforms.coordinates=[this.position,f,h],a.uniforms.colors=this.colors,a.uniforms.screenShape=p,d=0;d<3;++d)a.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(i.draw(n.TRIANGLES,6,6*d),this.drawSides[d]&&i.draw(n.TRIANGLES,12,18+12*d));i.unbind()},c.update=function(r){r&&("bounds"in r&&(this.bounds=r.bounds),"position"in r&&(this.position=r.position),"lineWidth"in r&&(this.lineWidth=r.lineWidth),"colors"in r&&(this.colors=r.colors),"enabled"in r&&(this.enabled=r.enabled),"drawSides"in r&&(this.drawSides=r.drawSides))},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(r,n,i){var a=i(6832),o=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),s=a(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=a(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);n.meshShader={vertex:o,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},n.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(r,n,i){"use strict";var a=i(2858),o=i(4020),s=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(r,n){var i,a=r.length;for(i=0;i<a;i++){var o=r[i];if(o===n)break;if(o>n)return i-1}return i},u=function(r,n,i){return r<n?n:r>i?i:r},c=function(r){var n=1/0;r.sort(function(r,n){return r-n});for(var i=r.length,a=1;a<i;a++){var o=Math.abs(r[a]-r[a-1]);o<n&&(n=o)}return n};r.exports=function(r,n){var i=r.startingPositions,f=r.maxLength||1e3,h=r.tubeSize||1,p=r.absoluteTubeSize,d=r.gridFill||"+x+y+z",v={};-1!==d.indexOf("-x")&&(v.reversedX=!0),-1!==d.indexOf("-y")&&(v.reversedY=!0),-1!==d.indexOf("-z")&&(v.reversedZ=!0),v.filled=s.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var g=r.getVelocity||function(n){return function(r,n,i){var o=n.vectors,s=n.meshgrid,c=r[0],f=r[1],h=r[2],p=s[0].length,d=s[1].length,v=s[2].length,g=l(s[0],c),y=l(s[1],f),m=l(s[2],h),x=g+1,b=y+1,_=m+1;if(g=u(g,0,p-1),x=u(x,0,p-1),y=u(y,0,d-1),b=u(b,0,d-1),m=u(m,0,v-1),_=u(_,0,v-1),g<0||y<0||m<0||x>p-1||b>d-1||_>v-1)return a.create();var w,T,k,A,M,S,E=s[0][g],L=s[0][x],C=s[1][y],O=s[1][b],P=s[2][m],I=(c-E)/(L-E),D=(f-C)/(O-C),z=(h-P)/(s[2][_]-P);switch(isFinite(I)||(I=.5),isFinite(D)||(D=.5),isFinite(z)||(z=.5),i.reversedX&&(g=p-1-g,x=p-1-x),i.reversedY&&(y=d-1-y,b=d-1-b),i.reversedZ&&(m=v-1-m,_=v-1-_),i.filled){case 5:M=m,S=_,k=y*v,A=b*v,w=g*v*d,T=x*v*d;break;case 4:M=m,S=_,w=g*v,T=x*v,k=y*v*p,A=b*v*p;break;case 3:k=y,A=b,M=m*d,S=_*d,w=g*d*v,T=x*d*v;break;case 2:k=y,A=b,w=g*d,T=x*d,M=m*d*p,S=_*d*p;break;case 1:w=g,T=x,M=m*p,S=_*p,k=y*p*v,A=b*p*v;break;default:w=g,T=x,k=y*p,A=b*p,M=m*p*d,S=_*p*d}var R=o[w+k+M],F=o[w+k+S],B=o[w+A+M],N=o[w+A+S],j=o[T+k+M],U=o[T+k+S],V=o[T+A+M],H=o[T+A+S],q=a.create(),G=a.create(),Z=a.create(),Y=a.create();a.lerp(q,R,j,I),a.lerp(G,F,U,I),a.lerp(Z,B,V,I),a.lerp(Y,N,H,I);var W=a.create(),X=a.create();a.lerp(W,q,Z,D),a.lerp(X,G,Y,D);var J=a.create();return a.lerp(J,W,X,z),J}(n,r,v)},y=r.getDivergence||function(r,n){var i=a.create();a.add(i,r,[1e-4,0,0]);var o=g(i);a.subtract(o,o,n),a.scale(o,o,1e4),a.add(i,r,[0,1e-4,0]);var s=g(i);a.subtract(s,s,n),a.scale(s,s,1e4),a.add(i,r,[0,0,1e-4]);var l=g(i);return a.subtract(l,l,n),a.scale(l,l,1e4),a.add(i,o,s),a.add(i,i,l),i},m=[],x=n[0][0],b=n[0][1],_=n[0][2],w=n[1][0],T=n[1][1],k=n[1][2],A=10*a.distance(n[0],n[1])/f,M=A*A,S=1,E=0,L=i.length;L>1&&(S=function(r){for(var n=[],i=[],a=[],o={},s={},l={},u=r.length,f=0;f<u;f++){var h=r[f],p=h[0],d=h[1],v=h[2];o[p]||(n.push(p),o[p]=!0),s[d]||(i.push(d),s[d]=!0),l[v]||(a.push(v),l[v]=!0)}var g=Math.min(c(n),c(i),c(a));return isFinite(g)?g:1}(i));for(var C=0;C<L;C++){var O=a.create();a.copy(O,i[C]);var P=[O],I=[],D=g(O),z=O;I.push(D);var R=[],F=y(O,D),B=a.length(F);isFinite(B)&&B>E&&(E=B),R.push(B),m.push({points:P,velocities:I,divergences:R});for(var N=0;N<100*f&&P.length<f&&function(r){var n=r[0],i=r[1],a=r[2];return!(n<x||n>w||i<b||i>T||a<_||a>k)}(O);){N++;var j=a.clone(D),U=a.squaredLength(j);if(0===U)break;U>M&&a.scale(j,j,A/Math.sqrt(U)),a.add(j,j,O),D=g(j),a.squaredDistance(z,j)-M>-.0001*M&&(P.push(j),z=j,I.push(D),F=y(j,D),isFinite(B=a.length(F))&&B>E&&(E=B),R.push(B)),O=j}}var V=function(r,n,i,s){for(var l=0,u=0;u<r.length;u++)for(var c=r[u].velocities,f=0;f<c.length;f++)l=Math.max(l,a.length(c[f]));var h=r.map(function(r){return function(r,n,i,s){for(var l=r.points,u=r.velocities,c=r.divergences,f=[],h=[],p=[],d=[],v=[],g=[],y=0,m=0,x=o.create(),b=o.create(),_=0;_<l.length;_++){var w=l[_],T=u[_],k=c[_];0===n&&(k=.05*i),m=a.length(T)/s,x=o.create(),a.copy(x,T),x[3]=k;for(var A=0;A<8;A++)v[A]=[w[0],w[1],w[2],A];if(d.length>0)for(A=0;A<8;A++){var M=(A+1)%8;f.push(d[A],v[A],v[M],v[M],d[M],d[A]),p.push(b,x,x,x,b,b),g.push(y,m,m,m,y,y);var S=f.length;h.push([S-6,S-5,S-4],[S-3,S-2,S-1])}var E=d;d=v,v=E;var L=b;b=x,x=L;var C=y;y=m,m=C}return{positions:f,cells:h,vectors:p,vertexIntensity:g}}(r,i,s,l)}),p=[],d=[],v=[],g=[];for(u=0;u<h.length;u++){var y=h[u],m=p.length;for(p=p.concat(y.positions),v=v.concat(y.vectors),g=g.concat(y.vertexIntensity),f=0;f<y.cells.length;f++){var x=y.cells[f],b=[];d.push(b);for(var _=0;_<x.length;_++)b.push(x[_]+m)}}return{positions:p,cells:d,vectors:v,vertexIntensity:g,colormap:n}}(m,r.colormap,E,S);return p?V.tubeScale=p:(0===E&&(E=1),V.tubeScale=.5*h*S/E),V};var f=i(9578),h=i(1140).createMesh;r.exports.createTubeMesh=function(r,n){return h(r,n,{shaders:f,traceType:"streamtube"})}},9054:function(r,n,i){var a=i(5158),o=i(6832),s=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),u=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),c=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);n.createShader=function(r){var n=a(r,s,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n.attributes.normal.location=2,n},n.createPickShader=function(r){var n=a(r,s,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n.attributes.normal.location=2,n},n.createContourShader=function(r){var n=a(r,u,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n},n.createPickContourShader=function(r){var n=a(r,u,c,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return n.attributes.uv.location=0,n.attributes.f.location=1,n}},3754:function(r,n,i){"use strict";r.exports=function(r){var n=r.gl,i=b(n),a=w(n),u=_(n),c=T(n),f=o(n),h=s(n,[{buffer:f,size:4,stride:k,offset:0},{buffer:f,size:3,stride:k,offset:16},{buffer:f,size:3,stride:k,offset:28}]),p=o(n),d=s(n,[{buffer:p,size:4,stride:20,offset:0},{buffer:p,size:1,stride:20,offset:16}]),v=o(n),g=s(n,[{buffer:v,size:2,type:n.FLOAT}]),y=l(n,1,L,n.RGBA,n.UNSIGNED_BYTE);y.minFilter=n.LINEAR,y.magFilter=n.LINEAR;var m=new C(n,[0,0],[[0,0,0],[0,0,0]],i,a,f,h,y,u,c,p,d,v,g,[0,0,0]),x={levels:[[],[],[]]};for(var A in r)x[A]=r[A];return x.colormap=x.colormap||"jet",m.update(x),m};var a=i(2288),o=i(5827),s=i(2944),l=i(8931),u=i(5306),c=i(9156),f=i(7498),h=i(7382),p=i(5050),d=i(4162),v=i(104),g=i(7437),y=i(5070),m=i(9144),x=i(9054),b=x.createShader,_=x.createContourShader,w=x.createPickShader,T=x.createPickContourShader,k=40,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],M=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function E(r,n,i,a,o){this.position=r,this.index=n,this.uv=i,this.level=a,this.dataCoordinate=o}!function(){for(var r=0;r<3;++r){var n=S[r],i=(r+2)%3;n[(r+1)%3+0]=1,n[i+3]=1,n[r+6]=1}}();var L=256;function C(r,n,i,a,o,s,l,c,f,h,d,v,g,y,m){this.gl=r,this.shape=n,this.bounds=i,this.objectOffset=m,this.intensityBounds=[],this._shader=a,this._pickShader=o,this._coordinateBuffer=s,this._vao=l,this._colorMap=c,this._contourShader=f,this._contourPickShader=h,this._contourBuffer=d,this._contourVAO=v,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=g,this._dynamicVAO=y,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[p(u.mallocFloat(1024),[0,0]),p(u.mallocFloat(1024),[0,0]),p(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var O=C.prototype;O.genColormap=function(r,n){var i=!1,a=h([c({colormap:r,nshades:L,format:"rgba"}).map(function(r,a){var o=n?function(r,n){if(!n||!n.length)return 1;for(var i=0;i<n.length&&!(n.length<2);++i){if(n[i][0]===r)return n[i][1];if(n[i][0]>r&&i>0){var a=(n[i][0]-r)/(n[i][0]-n[i-1][0]);return n[i][1]*(1-a)+a*n[i-1][1]}}return 1}(a/255,n):r[3];return o<1&&(i=!0),[r[0],r[1],r[2],255*o]})]);return f.divseq(a,255),this.hasAlphaScale=i,a},O.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},O.isOpaque=function(){return!this.isTransparent()},O.pickSlots=1,O.setPickBase=function(r){this.pickId=r};var P=[0,0,0],I={showSurface:!1,showContour:!1,projections:[A.slice(),A.slice(),A.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function D(r,n){var i,a,o,s=n.axes&&n.axes.lastCubeProps.axis||P,l=n.showSurface,u=n.showContour;for(i=0;i<3;++i)for(l=l||n.surfaceProject[i],a=0;a<3;++a)u=u||n.contourProject[i][a];for(i=0;i<3;++i){var c=I.projections[i];for(a=0;a<16;++a)c[a]=0;for(a=0;a<4;++a)c[5*a]=1;c[5*i]=0,c[12+i]=n.axesBounds[+(s[i]>0)][i],v(c,r.model,c);var f=I.clipBounds[i];for(o=0;o<2;++o)for(a=0;a<3;++a)f[o][a]=r.clipBounds[o][a];f[0][i]=-1e8,f[1][i]=1e8}return I.showSurface=l,I.showContour=u,I}var z={model:A,view:A,projection:A,inverseModel:A.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-.0001,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},R=A.slice(),F=[1,0,0,0,1,0,0,0,1];function B(r,n){r=r||{};var i=this.gl;i.disable(i.CULL_FACE),this._colorMap.bind(0),z.model=r.model||A,z.view=r.view||A,z.projection=r.projection||A,z.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],z.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],z.objectOffset=this.objectOffset,z.contourColor=this.contourColor[0],z.inverseModel=g(z.inverseModel,z.model);for(var a=0;a<2;++a)for(var o=z.clipBounds[a],s=0;s<3;++s)o[s]=Math.min(Math.max(this.clipBounds[a][s],-1e8),1e8);for(z.kambient=this.ambientLight,z.kdiffuse=this.diffuseLight,z.kspecular=this.specularLight,z.roughness=this.roughness,z.fresnel=this.fresnel,z.opacity=this.opacity,z.height=0,z.permutation=F,z.vertexColor=this.vertexColor,v(R,z.view,z.model),v(R,z.projection,R),g(R,R),a=0;a<3;++a)z.eyePosition[a]=R[12+a]/R[15];var l=R[15];for(a=0;a<3;++a)l+=this.lightPosition[a]*R[4*a+3];for(a=0;a<3;++a){var u=R[12+a];for(s=0;s<3;++s)u+=R[4*s+a]*this.lightPosition[s];z.lightPosition[a]=u/l}var c=D(z,this);if(c.showSurface){for(this._shader.bind(),this._shader.uniforms=z,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(i.TRIANGLES,this._vertexCount),a=0;a<3;++a)this.surfaceProject[a]&&this.vertexCount&&(this._shader.uniforms.model=c.projections[a],this._shader.uniforms.clipBounds=c.clipBounds[a],this._vao.draw(i.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour){var f=this._contourShader;z.kambient=1,z.kdiffuse=0,z.kspecular=0,z.opacity=1,f.bind(),f.uniforms=z;var h=this._contourVAO;for(h.bind(),a=0;a<3;++a)for(f.uniforms.permutation=S[a],i.lineWidth(this.contourWidth[a]*this.pixelRatio),s=0;s<this.contourLevels[a].length;++s)s===this.highlightLevel[a]?(f.uniforms.contourColor=this.highlightColor[a],f.uniforms.contourTint=this.highlightTint[a]):0!==s&&s-1!==this.highlightLevel[a]||(f.uniforms.contourColor=this.contourColor[a],f.uniforms.contourTint=this.contourTint[a]),this._contourCounts[a][s]&&(f.uniforms.height=this.contourLevels[a][s],h.draw(i.LINES,this._contourCounts[a][s],this._contourOffsets[a][s]));for(a=0;a<3;++a)for(f.uniforms.model=c.projections[a],f.uniforms.clipBounds=c.clipBounds[a],s=0;s<3;++s)if(this.contourProject[a][s]){f.uniforms.permutation=S[s],i.lineWidth(this.contourWidth[s]*this.pixelRatio);for(var p=0;p<this.contourLevels[s].length;++p)p===this.highlightLevel[s]?(f.uniforms.contourColor=this.highlightColor[s],f.uniforms.contourTint=this.highlightTint[s]):0!==p&&p-1!==this.highlightLevel[s]||(f.uniforms.contourColor=this.contourColor[s],f.uniforms.contourTint=this.contourTint[s]),this._contourCounts[s][p]&&(f.uniforms.height=this.contourLevels[s][p],h.draw(i.LINES,this._contourCounts[s][p],this._contourOffsets[s][p]))}for(h.unbind(),(h=this._dynamicVAO).bind(),a=0;a<3;++a)if(0!==this._dynamicCounts[a])for(f.uniforms.model=z.model,f.uniforms.clipBounds=z.clipBounds,f.uniforms.permutation=S[a],i.lineWidth(this.dynamicWidth[a]*this.pixelRatio),f.uniforms.contourColor=this.dynamicColor[a],f.uniforms.contourTint=this.dynamicTint[a],f.uniforms.height=this.dynamicLevel[a],h.draw(i.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]),s=0;s<3;++s)this.contourProject[s][a]&&(f.uniforms.model=c.projections[s],f.uniforms.clipBounds=c.clipBounds[s],h.draw(i.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]));h.unbind()}}O.draw=function(r){return B.call(this,r,!1)},O.drawTransparent=function(r){return B.call(this,r,!0)};var N={model:A,view:A,projection:A,inverseModel:A,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function j(r,n){return Array.isArray(r)?[n(r[0]),n(r[1]),n(r[2])]:[n(r),n(r),n(r)]}function U(r){return Array.isArray(r)?3===r.length?[r[0],r[1],r[2],1]:[r[0],r[1],r[2],r[3]]:[0,0,0,1]}function V(r){if(Array.isArray(r)){if(Array.isArray(r))return[U(r[0]),U(r[1]),U(r[2])];var n=U(r);return[n.slice(),n.slice(),n.slice()]}}O.drawPick=function(r){r=r||{};var n=this.gl;n.disable(n.CULL_FACE),N.model=r.model||A,N.view=r.view||A,N.projection=r.projection||A,N.shape=this._field[2].shape,N.pickId=this.pickId/255,N.lowerBound=this.bounds[0],N.upperBound=this.bounds[1],N.objectOffset=this.objectOffset,N.permutation=F;for(var i=0;i<2;++i)for(var a=N.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);var s=D(N,this);if(s.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=N,this._vao.bind(),this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&(this._pickShader.uniforms.model=s.projections[i],this._pickShader.uniforms.clipBounds=s.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(s.showContour){var l=this._contourPickShader;l.bind(),l.uniforms=N;var u=this._contourVAO;for(u.bind(),o=0;o<3;++o)for(n.lineWidth(this.contourWidth[o]*this.pixelRatio),l.uniforms.permutation=S[o],i=0;i<this.contourLevels[o].length;++i)this._contourCounts[o][i]&&(l.uniforms.height=this.contourLevels[o][i],u.draw(n.LINES,this._contourCounts[o][i],this._contourOffsets[o][i]));for(i=0;i<3;++i)for(l.uniforms.model=s.projections[i],l.uniforms.clipBounds=s.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){l.uniforms.permutation=S[o],n.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var c=0;c<this.contourLevels[o].length;++c)this._contourCounts[o][c]&&(l.uniforms.height=this.contourLevels[o][c],u.draw(n.LINES,this._contourCounts[o][c],this._contourOffsets[o][c]))}u.unbind()}},O.pick=function(r){if(!r||r.id!==this.pickId)return null;var n=this._field[2].shape,i=this._pickResult,a=n[0]*(r.value[0]+(r.value[2]>>4)/16)/255,o=Math.floor(a),s=a-o,l=n[1]*(r.value[1]+(15&r.value[2])/16)/255,u=Math.floor(l),c=l-u;o+=1,u+=1;var f=i.position;f[0]=f[1]=f[2]=0;for(var h=0;h<2;++h)for(var p=h?s:1-s,d=0;d<2;++d)for(var v=o+h,g=u+d,m=p*(d?c:1-c),x=0;x<3;++x)f[x]+=this._field[x].get(v,g)*m;for(var b=this._pickResult.level,_=0;_<3;++_)if(b[_]=y.le(this.contourLevels[_],f[_]),b[_]<0)this.contourLevels[_].length>0&&(b[_]=0);else if(b[_]<this.contourLevels[_].length-1){var w=this.contourLevels[_][b[_]],T=this.contourLevels[_][b[_]+1];Math.abs(w-f[_])>Math.abs(T-f[_])&&(b[_]+=1)}for(i.index[0]=s<.5?o:o+1,i.index[1]=c<.5?u:u+1,i.uv[0]=a/n[0],i.uv[1]=l/n[1],x=0;x<3;++x)i.dataCoordinate[x]=this._field[x].get(i.index[0],i.index[1]);return i},O.padField=function(r,n){var i=n.shape.slice(),a=r.shape.slice();f.assign(r.lo(1,1).hi(i[0],i[1]),n),f.assign(r.lo(1).hi(i[0],1),n.hi(i[0],1)),f.assign(r.lo(1,a[1]-1).hi(i[0],1),n.lo(0,i[1]-1).hi(i[0],1)),f.assign(r.lo(0,1).hi(1,i[1]),n.hi(1)),f.assign(r.lo(a[0]-1,1).hi(1,i[1]),n.lo(i[0]-1)),r.set(0,0,n.get(0,0)),r.set(0,a[1]-1,n.get(0,i[1]-1)),r.set(a[0]-1,0,n.get(i[0]-1,0)),r.set(a[0]-1,a[1]-1,n.get(i[0]-1,i[1]-1))},O.update=function(r){r=r||{},this.objectOffset=r.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in r&&(this.contourWidth=j(r.contourWidth,Number)),"showContour"in r&&(this.showContour=j(r.showContour,Boolean)),"showSurface"in r&&(this.showSurface=!!r.showSurface),"contourTint"in r&&(this.contourTint=j(r.contourTint,Boolean)),"contourColor"in r&&(this.contourColor=V(r.contourColor)),"contourProject"in r&&(this.contourProject=j(r.contourProject,function(r){return j(r,Boolean)})),"surfaceProject"in r&&(this.surfaceProject=r.surfaceProject),"dynamicColor"in r&&(this.dynamicColor=V(r.dynamicColor)),"dynamicTint"in r&&(this.dynamicTint=j(r.dynamicTint,Number)),"dynamicWidth"in r&&(this.dynamicWidth=j(r.dynamicWidth,Number)),"opacity"in r&&(this.opacity=r.opacity),"opacityscale"in r&&(this.opacityscale=r.opacityscale),"colorBounds"in r&&(this.colorBounds=r.colorBounds),"vertexColor"in r&&(this.vertexColor=r.vertexColor?1:0),"colormap"in r&&this._colorMap.setPixels(this.genColormap(r.colormap,this.opacityscale));var n=r.field||r.coords&&r.coords[2]||null,i=!1;if(n||(n=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in r||"coords"in r){var o=(n.shape[0]+2)*(n.shape[1]+2);o>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(a.nextPow2(o))),this._field[2]=p(this._field[2].data,[n.shape[0]+2,n.shape[1]+2]),this.padField(this._field[2],n),this.shape=n.shape.slice();for(var s=this.shape,l=0;l<2;++l)this._field[2].size>this._field[l].data.length&&(u.freeFloat(this._field[l].data),this._field[l].data=u.mallocFloat(this._field[2].size)),this._field[l]=p(this._field[l].data,[s[0]+2,s[1]+2]);if(r.coords){var c=r.coords;if(!Array.isArray(c)||3!==c.length)throw Error("gl-surface: invalid coordinates for x/y");for(l=0;l<2;++l){var f=c[l];for(x=0;x<2;++x)if(f.shape[x]!==s[x])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[l],f)}}else if(r.ticks){var h=r.ticks;if(!Array.isArray(h)||2!==h.length)throw Error("gl-surface: invalid ticks");for(l=0;l<2;++l){var v=h[l];if((Array.isArray(v)||v.length)&&(v=p(v)),v.shape[0]!==s[l])throw Error("gl-surface: invalid tick length");var g=p(v.data,s);g.stride[l]=v.stride[0],g.stride[1^l]=0,this.padField(this._field[l],g)}}else{for(l=0;l<2;++l){var y=[0,0];y[l]=1,this._field[l]=p(this._field[l].data,[s[0]+2,s[1]+2],y,0)}this._field[0].set(0,0,0);for(var x=0;x<s[0];++x)this._field[0].set(x+1,0,x);for(this._field[0].set(s[0]+1,0,s[0]-1),this._field[1].set(0,0,0),x=0;x<s[1];++x)this._field[1].set(0,x+1,x);this._field[1].set(0,s[1]+1,s[1]-1)}var b=this._field,_=p(u.mallocFloat(3*b[2].size*2),[3,s[0]+2,s[1]+2,2]);for(l=0;l<3;++l)m(_.pick(l),b[l],"mirror");var w=p(u.mallocFloat(3*b[2].size),[s[0]+2,s[1]+2,3]);for(l=0;l<s[0]+2;++l)for(x=0;x<s[1]+2;++x){var T=_.get(0,l,x,0),k=_.get(0,l,x,1),A=_.get(1,l,x,0),S=_.get(1,l,x,1),E=_.get(2,l,x,0),L=_.get(2,l,x,1),C=A*L-S*E,O=E*k-L*T,P=T*S-k*A,I=Math.sqrt(C*C+O*O+P*P);I<1e-8?(I=Math.max(Math.abs(C),Math.abs(O),Math.abs(P)))<1e-8?(P=1,O=C=0,I=1):I=1/I:I=1/Math.sqrt(I),w.set(l,x,0,C*I),w.set(l,x,1,O*I),w.set(l,x,2,P*I)}u.free(_.data);var D=[1/0,1/0,1/0],z=[-1/0,-1/0,-1/0],R=1/0,F=-1/0,B=(s[0]-1)*(s[1]-1)*6,N=u.mallocFloat(a.nextPow2(10*B)),U=0,H=0;for(l=0;l<s[0]-1;++l)t:for(x=0;x<s[1]-1;++x){for(var q=0;q<2;++q)for(var G=0;G<2;++G)for(var Z=0;Z<3;++Z){var Y=this._field[Z].get(1+l+q,1+x+G);if(isNaN(Y)||!isFinite(Y))continue t}for(Z=0;Z<6;++Z){var W=l+M[Z][0],X=x+M[Z][1],J=this._field[0].get(W+1,X+1),K=this._field[1].get(W+1,X+1);Y=this._field[2].get(W+1,X+1),C=w.get(W+1,X+1,0),O=w.get(W+1,X+1,1),P=w.get(W+1,X+1,2),r.intensity&&($=r.intensity.get(W,X));var $=r.intensity?r.intensity.get(W,X):Y+this.objectOffset[2];N[U++]=W,N[U++]=X,N[U++]=J,N[U++]=K,N[U++]=Y,N[U++]=0,N[U++]=$,N[U++]=C,N[U++]=O,N[U++]=P,D[0]=Math.min(D[0],J+this.objectOffset[0]),D[1]=Math.min(D[1],K+this.objectOffset[1]),D[2]=Math.min(D[2],Y+this.objectOffset[2]),R=Math.min(R,$),z[0]=Math.max(z[0],J+this.objectOffset[0]),z[1]=Math.max(z[1],K+this.objectOffset[1]),z[2]=Math.max(z[2],Y+this.objectOffset[2]),F=Math.max(F,$),H+=1}}for(r.intensityBounds&&(R=+r.intensityBounds[0],F=+r.intensityBounds[1]),l=6;l<U;l+=10)N[l]=(N[l]-R)/(F-R);this._vertexCount=H,this._coordinateBuffer.update(N.subarray(0,U)),u.freeFloat(N),u.free(w.data),this.bounds=[D,z],this.intensity=r.intensity||this._field[2],this.intensityBounds[0]===R&&this.intensityBounds[1]===F||(i=!0),this.intensityBounds=[R,F]}if("levels"in r){var Q=r.levels;for(Q=Array.isArray(Q[0])?Q.slice():[[],[],Q],l=0;l<3;++l)Q[l]=Q[l].slice(),Q[l].sort(function(r,n){return r-n});for(l=0;l<3;++l)for(x=0;x<Q[l].length;++x)Q[l][x]-=this.objectOffset[l];t:for(l=0;l<3;++l){if(Q[l].length!==this.contourLevels[l].length){i=!0;break}for(x=0;x<Q[l].length;++x)if(Q[l][x]!==this.contourLevels[l][x]){i=!0;break t}}this.contourLevels=Q}if(i){b=this._field,s=this.shape;for(var tt=[],te=0;te<3;++te){var tr=this.contourLevels[te],tn=[],ti=[],ta=[0,0,0];for(l=0;l<tr.length;++l){var to=d(this._field[te],tr[l]);tn.push(tt.length/5|0),H=0;t:for(x=0;x<to.cells.length;++x){var ts=to.cells[x];for(Z=0;Z<2;++Z){var tl=to.positions[ts[Z]],tu=tl[0],tc=0|Math.floor(tu),tf=tu-tc,th=tl[1],tp=0|Math.floor(th),td=th-tp,tv=!1;e:for(var tg=0;tg<3;++tg){ta[tg]=0;var ty=(te+tg+1)%3;for(q=0;q<2;++q){var tm=q?tf:1-tf;for(W=0|Math.min(Math.max(tc+q,0),s[0]),G=0;G<2;++G){var tx=G?td:1-td;if(X=0|Math.min(Math.max(tp+G,0),s[1]),!isFinite(Y=tg<2?this._field[ty].get(W,X):(this.intensity.get(W,X)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]))||isNaN(Y)){tv=!0;break e}var tb=tm*tx;ta[tg]+=tb*Y}}}if(tv){if(Z>0){for(var t_=0;t_<5;++t_)tt.pop();H-=1}continue t}tt.push(ta[0],ta[1],tl[0],tl[1],ta[2]),H+=1}}ti.push(H)}this._contourOffsets[te]=tn,this._contourCounts[te]=ti}var tw=u.mallocFloat(tt.length);for(l=0;l<tt.length;++l)tw[l]=tt[l];this._contourBuffer.update(tw),u.freeFloat(tw)}},O.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var r=0;r<3;++r)u.freeFloat(this._field[r].data)},O.highlight=function(r){var n,i;if(!r)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(n=0;n<3;++n)this.enableHighlight[n]?this.highlightLevel[n]=r.level[n]:this.highlightLevel[n]=-1;for(i=this.snapToData?r.dataCoordinate:r.position,n=0;n<3;++n)i[n]-=this.objectOffset[n];if(this.enableDynamic[0]&&i[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&i[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&i[2]!==this.dynamicLevel[2]){for(var a=0,o=this.shape,s=u.mallocFloat(12*o[0]*o[1]),l=0;l<3;++l)if(this.enableDynamic[l]){this.dynamicLevel[l]=i[l];var c=(l+1)%3,f=(l+2)%3,h=this._field[l],p=this._field[c],v=this._field[f],g=d(h,i[l]),y=g.cells,m=g.positions;for(this._dynamicOffsets[l]=a,n=0;n<y.length;++n)for(var x=y[n],b=0;b<2;++b){var _=m[x[b]],w=+_[0],T=0|w,k=0|Math.min(T+1,o[0]),A=w-T,M=1-A,S=+_[1],E=0|S,L=0|Math.min(E+1,o[1]),C=S-E,O=1-C,P=M*O,I=M*C,D=A*O,z=A*C,R=P*p.get(T,E)+I*p.get(T,L)+D*p.get(k,E)+z*p.get(k,L),F=P*v.get(T,E)+I*v.get(T,L)+D*v.get(k,E)+z*v.get(k,L);if(isNaN(R)||isNaN(F)){b&&(a-=1);break}s[2*a+0]=R,s[2*a+1]=F,a+=1}this._dynamicCounts[l]=a-this._dynamicOffsets[l]}else this.dynamicLevel[l]=NaN,this._dynamicCounts[l]=0;this._dynamicBuffer.update(s.subarray(0,2*a)),u.freeFloat(s)}}},8931:function(r,n,i){"use strict";var a=i(5050),o=i(7498),s=i(5306);r.exports=function(r){if(arguments.length<=1)throw Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||(l=[r.LINEAR,r.NEAREST_MIPMAP_LINEAR,r.LINEAR_MIPMAP_NEAREST,r.LINEAR_MIPMAP_NEAREST],u=[r.NEAREST,r.LINEAR,r.NEAREST_MIPMAP_NEAREST,r.NEAREST_MIPMAP_LINEAR,r.LINEAR_MIPMAP_NEAREST,r.LINEAR_MIPMAP_LINEAR],c=[r.REPEAT,r.CLAMP_TO_EDGE,r.MIRRORED_REPEAT]),"number"==typeof arguments[1])return m(r,arguments[1],arguments[2],arguments[3]||r.RGBA,arguments[4]||r.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return m(r,0|arguments[1][0],0|arguments[1][1],arguments[2]||r.RGBA,arguments[3]||r.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var n,i,p,v,x,b=arguments[1],_=f(b)?b:b.raw;if(_)return n=0|b.width,i=0|b.height,p=arguments[2]||r.RGBA,v=arguments[3]||r.UNSIGNED_BYTE,x=y(r),r.texImage2D(r.TEXTURE_2D,0,p,p,v,_),new d(r,x,n,i,p,v);if(b.shape&&b.data&&b.stride)return function(r,n){var i=n.dtype,l=n.shape.slice(),u=r.getParameter(r.MAX_TEXTURE_SIZE);if(l[0]<0||l[0]>u||l[1]<0||l[1]>u)throw Error("gl-texture2d: Invalid texture size");var c=g(l,n.stride.slice()),f=0;"float32"===i?f=r.FLOAT:"float64"===i?(f=r.FLOAT,c=!1,i="float32"):"uint8"===i?f=r.UNSIGNED_BYTE:(f=r.UNSIGNED_BYTE,c=!1,i="uint8");var p,v,m=0;if(2===l.length)m=r.LUMINANCE,l=[l[0],l[1],1],n=a(n.data,l,[n.stride[0],n.stride[1],1],n.offset);else{if(3!==l.length)throw Error("gl-texture2d: Invalid shape for texture");if(1===l[2])m=r.ALPHA;else if(2===l[2])m=r.LUMINANCE_ALPHA;else if(3===l[2])m=r.RGB;else{if(4!==l[2])throw Error("gl-texture2d: Invalid shape for pixel coords");m=r.RGBA}}f!==r.FLOAT||r.getExtension("OES_texture_float")||(f=r.UNSIGNED_BYTE,c=!1);var x=n.size;if(c)p=0===n.offset&&n.data.length===x?n.data:n.data.subarray(n.offset,n.offset+x);else{var b=[l[2],l[2]*l[0],1],_=a(v=s.malloc(x,i),l,b,0);"float32"!==i&&"float64"!==i||f!==r.UNSIGNED_BYTE?o.assign(_,n):h(_,n),p=v.subarray(0,x)}var w=y(r);return r.texImage2D(r.TEXTURE_2D,0,m,l[0],l[1],0,m,f,p),c||s.free(v),new d(r,w,l[0],l[1],m,f)}(r,b)}throw Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,u=null,c=null;function f(r){return"undefined"!=typeof HTMLCanvasElement&&r instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&r instanceof ImageData}var h=function(r,n){o.muls(r,n,255)};function p(r,n,i){var a=r.gl,o=a.getParameter(a.MAX_TEXTURE_SIZE);if(n<0||n>o||i<0||i>o)throw Error("gl-texture2d: Invalid texture size");return r._shape=[n,i],r.bind(),a.texImage2D(a.TEXTURE_2D,0,r.format,n,i,0,r.format,r.type,null),r._mipLevels=[0],r}function d(r,n,i,a,o,s){this.gl=r,this.handle=n,this.format=o,this.type=s,this._shape=[i,a],this._mipLevels=[0],this._magFilter=r.NEAREST,this._minFilter=r.NEAREST,this._wrapS=r.CLAMP_TO_EDGE,this._wrapT=r.CLAMP_TO_EDGE,this._anisoSamples=1;var l=this,u=[this._wrapS,this._wrapT];Object.defineProperties(u,[{get:function(){return l._wrapS},set:function(r){return l.wrapS=r}},{get:function(){return l._wrapT},set:function(r){return l.wrapT=r}}]),this._wrapVector=u;var c=[this._shape[0],this._shape[1]];Object.defineProperties(c,[{get:function(){return l._shape[0]},set:function(r){return l.width=r}},{get:function(){return l._shape[1]},set:function(r){return l.height=r}}]),this._shapeVector=c}var v=d.prototype;function g(r,n){return 3===r.length?1===n[2]&&n[1]===r[0]*r[2]&&n[0]===r[2]:1===n[0]&&n[1]===r[0]}function y(r){var n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}function m(r,n,i,a,o){var s=r.getParameter(r.MAX_TEXTURE_SIZE);if(n<0||n>s||i<0||i>s)throw Error("gl-texture2d: Invalid texture shape");if(o===r.FLOAT&&!r.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");var l=y(r);return r.texImage2D(r.TEXTURE_2D,0,a,n,i,0,a,o,null),new d(r,l,n,i,a,o)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(r){this.bind();var n=this.gl;if(this.type===n.FLOAT&&l.indexOf(r)>=0&&(n.getExtension("OES_texture_float_linear")||(r=n.NEAREST)),0>u.indexOf(r))throw Error("gl-texture2d: Unknown filter mode "+r);return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),this._minFilter=r}},magFilter:{get:function(){return this._magFilter},set:function(r){this.bind();var n=this.gl;if(this.type===n.FLOAT&&l.indexOf(r)>=0&&(n.getExtension("OES_texture_float_linear")||(r=n.NEAREST)),0>u.indexOf(r))throw Error("gl-texture2d: Unknown filter mode "+r);return n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r),this._magFilter=r}},mipSamples:{get:function(){return this._anisoSamples},set:function(r){var n=this._anisoSamples;if(this._anisoSamples=0|Math.max(r,1),n!==this._anisoSamples){var i=this.gl.getExtension("EXT_texture_filter_anisotropic");i&&this.gl.texParameterf(this.gl.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(r){if(this.bind(),0>c.indexOf(r))throw Error("gl-texture2d: Unknown wrap mode "+r);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,r),this._wrapS=r}},wrapT:{get:function(){return this._wrapT},set:function(r){if(this.bind(),0>c.indexOf(r))throw Error("gl-texture2d: Unknown wrap mode "+r);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,r),this._wrapT=r}},wrap:{get:function(){return this._wrapVector},set:function(r){if(Array.isArray(r)||(r=[r,r]),2!==r.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var n=0;n<2;++n)if(0>c.indexOf(r[n]))throw Error("gl-texture2d: Unknown wrap mode "+r);this._wrapS=r[0],this._wrapT=r[1];var i=this.gl;return this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,this._wrapS),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,this._wrapT),r}},shape:{get:function(){return this._shapeVector},set:function(r){if(Array.isArray(r)){if(2!==r.length)throw Error("gl-texture2d: Invalid texture shape")}else r=[0|r,0|r];return p(this,0|r[0],0|r[1]),[0|r[0],0|r[1]]}},width:{get:function(){return this._shape[0]},set:function(r){return p(this,r|=0,this._shape[1]),r}},height:{get:function(){return this._shape[1]},set:function(r){return r|=0,p(this,this._shape[0],r),r}}}),v.bind=function(r){var n=this.gl;return void 0!==r&&n.activeTexture(n.TEXTURE0+(0|r)),n.bindTexture(n.TEXTURE_2D,this.handle),void 0!==r?0|r:n.getParameter(n.ACTIVE_TEXTURE)-n.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var r=Math.min(this._shape[0],this._shape[1]),n=0;r>0;++n,r>>>=1)0>this._mipLevels.indexOf(n)&&this._mipLevels.push(n)},v.setPixels=function(r,n,i,l){var u=this.gl;this.bind(),Array.isArray(n)?(l=i,i=0|n[1],n=0|n[0]):(n=n||0,i=i||0),l=l||0;var c=f(r)?r:r.raw;if(c)0>this._mipLevels.indexOf(l)?(u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,this.type,c),this._mipLevels.push(l)):u.texSubImage2D(u.TEXTURE_2D,l,n,i,this.format,this.type,c);else{if(!(r.shape&&r.stride&&r.data))throw Error("gl-texture2d: Unsupported data type");if(r.shape.length<2||n+r.shape[1]>this._shape[1]>>>l||i+r.shape[0]>this._shape[0]>>>l||n<0||i<0)throw Error("gl-texture2d: Texture dimensions are out of bounds");!function(r,n,i,l,u,c,f,p){var d=p.dtype,v=p.shape.slice();if(v.length<2||v.length>3)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var y=0,m=0,x=g(v,p.stride.slice());if("float32"===d?y=r.FLOAT:"float64"===d?(y=r.FLOAT,x=!1,d="float32"):"uint8"===d?y=r.UNSIGNED_BYTE:(y=r.UNSIGNED_BYTE,x=!1,d="uint8"),2===v.length)m=r.LUMINANCE,v=[v[0],v[1],1],p=a(p.data,v,[p.stride[0],p.stride[1],1],p.offset);else{if(3!==v.length)throw Error("gl-texture2d: Invalid shape for texture");if(1===v[2])m=r.ALPHA;else if(2===v[2])m=r.LUMINANCE_ALPHA;else if(3===v[2])m=r.RGB;else{if(4!==v[2])throw Error("gl-texture2d: Invalid shape for pixel coords");m=r.RGBA}v[2]}if(m!==r.LUMINANCE&&m!==r.ALPHA||u!==r.LUMINANCE&&u!==r.ALPHA||(m=u),m!==u)throw Error("gl-texture2d: Incompatible texture format for setPixels");var b=p.size,_=0>f.indexOf(l);if(_&&f.push(l),y===c&&x)0===p.offset&&p.data.length===b?_?r.texImage2D(r.TEXTURE_2D,l,u,v[0],v[1],0,u,c,p.data):r.texSubImage2D(r.TEXTURE_2D,l,n,i,v[0],v[1],u,c,p.data):_?r.texImage2D(r.TEXTURE_2D,l,u,v[0],v[1],0,u,c,p.data.subarray(p.offset,p.offset+b)):r.texSubImage2D(r.TEXTURE_2D,l,n,i,v[0],v[1],u,c,p.data.subarray(p.offset,p.offset+b));else{var w,T=a(w=c===r.FLOAT?s.mallocFloat32(b):s.mallocUint8(b),v,[v[2],v[2]*v[0],1]);y===r.FLOAT&&c===r.UNSIGNED_BYTE?h(T,p):o.assign(T,p),_?r.texImage2D(r.TEXTURE_2D,l,u,v[0],v[1],0,u,c,w.subarray(0,b)):r.texSubImage2D(r.TEXTURE_2D,l,n,i,v[0],v[1],u,c,w.subarray(0,b)),c===r.FLOAT?s.freeFloat32(w):s.freeUint8(w)}}(u,n,i,l,this.format,this.type,this._mipLevels,r)}}},3056:function(r){"use strict";r.exports=function(r,n,i){n?n.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);var a=0|r.getParameter(r.MAX_VERTEX_ATTRIBS);if(i){if(i.length>a)throw Error("gl-vao: Too many vertex attributes");for(var o=0;o<i.length;++o){var s=i[o];if(s.buffer){var l=s.buffer,u=s.size||4,c=s.type||r.FLOAT,f=!!s.normalized,h=s.stride||0,p=s.offset||0;l.bind(),r.enableVertexAttribArray(o),r.vertexAttribPointer(o,u,c,f,h,p)}else{if("number"==typeof s)r.vertexAttrib1f(o,s);else if(1===s.length)r.vertexAttrib1f(o,s[0]);else if(2===s.length)r.vertexAttrib2f(o,s[0],s[1]);else if(3===s.length)r.vertexAttrib3f(o,s[0],s[1],s[2]);else{if(4!==s.length)throw Error("gl-vao: Invalid vertex attribute");r.vertexAttrib4f(o,s[0],s[1],s[2],s[3])}r.disableVertexAttribArray(o)}}for(;o<a;++o)r.disableVertexAttribArray(o)}else for(r.bindBuffer(r.ARRAY_BUFFER,null),o=0;o<a;++o)r.disableVertexAttribArray(o)}},7220:function(r,n,i){"use strict";var a=i(3056);function o(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}o.prototype.bind=function(){a(this.gl,this._elements,this._attributes)},o.prototype.update=function(r,n,i){this._elements=n,this._attributes=r,this._elementsType=i||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(r,n,i){i=i||0;var a=this.gl;this._elements?a.drawElements(r,n,this._elementsType,i):a.drawArrays(r,i,n)},r.exports=function(r){return new o(r)}},3778:function(r,n,i){"use strict";var a=i(3056);function o(r,n,i,a,o,s){this.location=r,this.dimension=n,this.a=i,this.b=a,this.c=o,this.d=s}function s(r,n,i){this.gl=r,this._ext=n,this.handle=i,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}o.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},s.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},s.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},s.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},s.prototype.update=function(r,n,i){if(this.bind(),a(this.gl,n,r),this.unbind(),this._attribs.length=0,r)for(var s=0;s<r.length;++s){var l=r[s];"number"==typeof l?this._attribs.push(new o(s,1,l)):Array.isArray(l)&&this._attribs.push(new o(s,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!n,this._elementsType=i||this.gl.UNSIGNED_SHORT},s.prototype.draw=function(r,n,i){i=i||0;var a=this.gl;this._useElements?a.drawElements(r,n,this._elementsType,i):a.drawArrays(r,i,n)},r.exports=function(r,n){return new s(r,n,n.createVertexArrayOES())}},2944:function(r,n,i){"use strict";var a=i(3778),o=i(7220);function s(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}r.exports=function(r,n,i,l){var u,c=r.createVertexArray?new s(r):r.getExtension("OES_vertex_array_object");return(u=c?a(r,c):o(r)).update(n,i,l),u}},2598:function(r){r.exports=function(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r}},5879:function(r,n,i){r.exports=function(r,n){var i=a(r[0],r[1],r[2]),l=a(n[0],n[1],n[2]);o(i,i),o(l,l);var u=s(i,l);return u>1?0:Math.acos(u)};var a=i(5415),o=i(899),s=i(9305)},8827:function(r){r.exports=function(r,n){return r[0]=Math.ceil(n[0]),r[1]=Math.ceil(n[1]),r[2]=Math.ceil(n[2]),r}},7622:function(r){r.exports=function(r){var n=new Float32Array(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n}},8782:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}},8501:function(r){r.exports=function(){var r=new Float32Array(3);return r[0]=0,r[1]=0,r[2]=0,r}},903:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],u=i[1],c=i[2];return r[0]=o*c-s*u,r[1]=s*l-a*c,r[2]=a*u-o*l,r}},5981:function(r,n,i){r.exports=i(8288)},8288:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return Math.sqrt(i*i+a*a+o*o)}},8629:function(r,n,i){r.exports=i(7979)},7979:function(r){r.exports=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r}},9305:function(r){r.exports=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}},154:function(r){r.exports=1e-6},4932:function(r,n,i){r.exports=function(r,n){var i=r[0],o=r[1],s=r[2],l=n[0],u=n[1],c=n[2];return Math.abs(i-l)<=a*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-u)<=a*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(s-c)<=a*Math.max(1,Math.abs(s),Math.abs(c))};var a=i(154)},5777:function(r){r.exports=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]}},3306:function(r){r.exports=function(r,n){return r[0]=Math.floor(n[0]),r[1]=Math.floor(n[1]),r[2]=Math.floor(n[2]),r}},7447:function(r,n,i){r.exports=function(r,n,i,o,s,l){var u,c;for(n||(n=3),i||(i=0),c=o?Math.min(o*n+i,r.length):r.length,u=i;u<c;u+=n)a[0]=r[u],a[1]=r[u+1],a[2]=r[u+2],s(a,a,l),r[u]=a[0],r[u+1]=a[1],r[u+2]=a[2];return r};var a=i(8501)()},5415:function(r){r.exports=function(r,n,i){var a=new Float32Array(3);return a[0]=r,a[1]=n,a[2]=i,a}},2858:function(r,n,i){r.exports={EPSILON:i(154),create:i(8501),clone:i(7622),angle:i(5879),fromValues:i(5415),copy:i(8782),set:i(831),equals:i(4932),exactEquals:i(5777),add:i(2598),subtract:i(911),sub:i(8921),multiply:i(105),mul:i(5733),divide:i(7979),div:i(8629),min:i(3605),max:i(1716),floor:i(3306),ceil:i(8827),round:i(1624),scale:i(5685),scaleAndAdd:i(6722),distance:i(8288),dist:i(5981),squaredDistance:i(6403),sqrDist:i(5294),length:i(4693),len:i(1468),squaredLength:i(4337),sqrLen:i(3303),negate:i(435),inverse:i(2073),normalize:i(899),dot:i(9305),cross:i(903),lerp:i(1868),random:i(6660),transformMat4:i(3255),transformMat3:i(9908),transformQuat:i(6568),rotateX:i(392),rotateY:i(3222),rotateZ:i(3388),forEach:i(7447)}},2073:function(r){r.exports=function(r,n){return r[0]=1/n[0],r[1]=1/n[1],r[2]=1/n[2],r}},1468:function(r,n,i){r.exports=i(4693)},4693:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2];return Math.sqrt(n*n+i*i+a*a)}},1868:function(r){r.exports=function(r,n,i,a){var o=n[0],s=n[1],l=n[2];return r[0]=o+a*(i[0]-o),r[1]=s+a*(i[1]-s),r[2]=l+a*(i[2]-l),r}},1716:function(r){r.exports=function(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r}},3605:function(r){r.exports=function(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r}},5733:function(r,n,i){r.exports=i(105)},105:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r}},435:function(r){r.exports=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r}},899:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s),r}},6660:function(r){r.exports=function(r,n){var i=2*Math.random()*Math.PI,a=2*Math.random()-1,o=Math.sqrt(1-a*a)*(n=n||1);return r[0]=Math.cos(i)*o,r[1]=Math.sin(i)*o,r[2]=a*n,r}},392:function(r){r.exports=function(r,n,i,a){var o=i[1],s=i[2],l=n[1]-o,u=n[2]-s,c=Math.sin(a),f=Math.cos(a);return r[0]=n[0],r[1]=o+l*f-u*c,r[2]=s+l*c+u*f,r}},3222:function(r){r.exports=function(r,n,i,a){var o=i[0],s=i[2],l=n[0]-o,u=n[2]-s,c=Math.sin(a),f=Math.cos(a);return r[0]=o+u*c+l*f,r[1]=n[1],r[2]=s+u*f-l*c,r}},3388:function(r){r.exports=function(r,n,i,a){var o=i[0],s=i[1],l=n[0]-o,u=n[1]-s,c=Math.sin(a),f=Math.cos(a);return r[0]=o+l*f-u*c,r[1]=s+l*c+u*f,r[2]=n[2],r}},1624:function(r){r.exports=function(r,n){return r[0]=Math.round(n[0]),r[1]=Math.round(n[1]),r[2]=Math.round(n[2]),r}},5685:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r}},6722:function(r){r.exports=function(r,n,i,a){return r[0]=n[0]+i[0]*a,r[1]=n[1]+i[1]*a,r[2]=n[2]+i[2]*a,r}},831:function(r){r.exports=function(r,n,i,a){return r[0]=n,r[1]=i,r[2]=a,r}},5294:function(r,n,i){r.exports=i(6403)},3303:function(r,n,i){r.exports=i(4337)},6403:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return i*i+a*a+o*o}},4337:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2];return n*n+i*i+a*a}},8921:function(r,n,i){r.exports=i(911)},911:function(r){r.exports=function(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r}},9908:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2];return r[0]=a*i[0]+o*i[3]+s*i[6],r[1]=a*i[1]+o*i[4]+s*i[7],r[2]=a*i[2]+o*i[5]+s*i[8],r}},3255:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[3]*a+i[7]*o+i[11]*s+i[15];return l=l||1,r[0]=(i[0]*a+i[4]*o+i[8]*s+i[12])/l,r[1]=(i[1]*a+i[5]*o+i[9]*s+i[13])/l,r[2]=(i[2]*a+i[6]*o+i[10]*s+i[14])/l,r}},6568:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],u=i[1],c=i[2],f=i[3],h=f*a+u*s-c*o,p=f*o+c*a-l*s,d=f*s+l*o-u*a,v=-l*a-u*o-c*s;return r[0]=h*f+-(v*l)+-(p*c)- -(d*u),r[1]=p*f+-(v*u)+-(d*l)- -(h*c),r[2]=d*f+-(v*c)+-(h*u)- -(p*l),r}},3433:function(r){r.exports=function(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r[3]=n[3]+i[3],r}},1413:function(r){r.exports=function(r){var n=new Float32Array(4);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n}},3470:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}},5313:function(r){r.exports=function(){var r=new Float32Array(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}},5446:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(i*i+a*a+o*o+s*s)}},205:function(r){r.exports=function(r,n,i){return r[0]=n[0]/i[0],r[1]=n[1]/i[1],r[2]=n[2]/i[2],r[3]=n[3]/i[3],r}},4242:function(r){r.exports=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]}},5680:function(r){r.exports=function(r,n,i,a){var o=new Float32Array(4);return o[0]=r,o[1]=n,o[2]=i,o[3]=a,o}},4020:function(r,n,i){r.exports={create:i(5313),clone:i(1413),fromValues:i(5680),copy:i(3470),set:i(6453),add:i(3433),subtract:i(2705),multiply:i(746),divide:i(205),min:i(2170),max:i(3030),scale:i(5510),scaleAndAdd:i(4224),distance:i(5446),squaredDistance:i(1542),length:i(8177),squaredLength:i(9037),negate:i(6459),inverse:i(8057),normalize:i(381),dot:i(4242),lerp:i(8746),random:i(3770),transformMat4:i(6342),transformQuat:i(5022)}},8057:function(r){r.exports=function(r,n){return r[0]=1/n[0],r[1]=1/n[1],r[2]=1/n[2],r[3]=1/n[3],r}},8177:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3];return Math.sqrt(n*n+i*i+a*a+o*o)}},8746:function(r){r.exports=function(r,n,i,a){var o=n[0],s=n[1],l=n[2],u=n[3];return r[0]=o+a*(i[0]-o),r[1]=s+a*(i[1]-s),r[2]=l+a*(i[2]-l),r[3]=u+a*(i[3]-u),r}},3030:function(r){r.exports=function(r,n,i){return r[0]=Math.max(n[0],i[0]),r[1]=Math.max(n[1],i[1]),r[2]=Math.max(n[2],i[2]),r[3]=Math.max(n[3],i[3]),r}},2170:function(r){r.exports=function(r,n,i){return r[0]=Math.min(n[0],i[0]),r[1]=Math.min(n[1],i[1]),r[2]=Math.min(n[2],i[2]),r[3]=Math.min(n[3],i[3]),r}},746:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i[0],r[1]=n[1]*i[1],r[2]=n[2]*i[2],r[3]=n[3]*i[3],r}},6459:function(r){r.exports=function(r,n){return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=-n[3],r}},381:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=i*i+a*a+o*o+s*s;return l>0&&(l=1/Math.sqrt(l),r[0]=i*l,r[1]=a*l,r[2]=o*l,r[3]=s*l),r}},3770:function(r,n,i){var a=i(381),o=i(5510);r.exports=function(r,n){return n=n||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),a(r,r),o(r,r,n),r}},5510:function(r){r.exports=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r}},4224:function(r){r.exports=function(r,n,i,a){return r[0]=n[0]+i[0]*a,r[1]=n[1]+i[1]*a,r[2]=n[2]+i[2]*a,r[3]=n[3]+i[3]*a,r}},6453:function(r){r.exports=function(r,n,i,a,o){return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r}},1542:function(r){r.exports=function(r,n){var i=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2],s=n[3]-r[3];return i*i+a*a+o*o+s*s}},9037:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3];return n*n+i*i+a*a+o*o}},2705:function(r){r.exports=function(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r[3]=n[3]-i[3],r}},6342:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3];return r[0]=i[0]*a+i[4]*o+i[8]*s+i[12]*l,r[1]=i[1]*a+i[5]*o+i[9]*s+i[13]*l,r[2]=i[2]*a+i[6]*o+i[10]*s+i[14]*l,r[3]=i[3]*a+i[7]*o+i[11]*s+i[15]*l,r}},5022:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],u=i[1],c=i[2],f=i[3],h=f*a+u*s-c*o,p=f*o+c*a-l*s,d=f*s+l*o-u*a,v=-l*a-u*o-c*s;return r[0]=h*f+-(v*l)+-(p*c)- -(d*u),r[1]=p*f+-(v*u)+-(d*l)- -(h*c),r[2]=d*f+-(v*c)+-(h*u)- -(p*l),r[3]=n[3],r}},9365:function(r,n,i){var a=i(8096),o=i(7896);r.exports=function(r){for(var n=Array.isArray(r)?r:a(r),i=0;i<n.length;i++){var s=n[i];if("preprocessor"===s.type){var l=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(l&&l[2]){var u=l[1],c=l[2];return(u?o(c):c).trim()}}}}},3193:function(r,n,i){r.exports=function(r){var n,i,A,M=0,S=0,E=c,L=[],C=[],O=1,P=0,I=0,D=!1,z=!1,R="",F=s,B=a;"300 es"===(r=r||{}).version&&(F=u,B=l);var N={},j={};for(M=0;M<F.length;M++)N[F[M]]=!0;for(M=0;M<B.length;M++)j[B[M]]=!0;return function(r){return C=[],null!==r?function(r){var a;for(M=0,r.toString&&(r=r.toString()),R+=r.replace(/\r\n/g,"\n"),A=R.length;n=R[M],M<A;){switch(a=M,E){case h:"/"===n&&"*"===i?(L.push(n),U(L.join("")),E=c):(L.push(n),i=n),M+=1;break;case p:case d:M="\r"!==n&&"\n"!==n||"\\"===i?(L.push(n),i=n,M+1):(U(L.join("")),E=c,M);break;case v:M=function(){if("."===i&&/\d/.test(n))return E=y,M;if("/"===i&&"*"===n)return E=h,M;if("/"===i&&"/"===n)return E=p,M;if("."===n&&L.length){for(;V(L););return E=y,M}if(";"===n||")"===n||"("===n){if(L.length)for(;V(L););return U(n),E=c,M+1}var r=2===L.length&&"="!==n;if(/[\w_\d\s]/.test(n)||r){for(;V(L););return E=c,M}return L.push(n),i=n,M+1}();break;case g:M="."===n||/[eE]/.test(n)?(L.push(n),E=y,i=n,M+1):"x"===n&&1===L.length&&"0"===L[0]?(E=T,L.push(n),i=n,M+1):/[^\d]/.test(n)?(U(L.join("")),E=c,M):(L.push(n),i=n,M+1);break;case T:M=/[^a-fA-F0-9]/.test(n)?(U(L.join("")),E=c,M):(L.push(n),i=n,M+1);break;case y:"f"===n&&(L.push(n),i=n,M+=1),M=/[eE]/.test(n)?(L.push(n),i=n,M+1):("-"!==n&&"+"!==n||!/[eE]/.test(i))&&/[^\d]/.test(n)?(U(L.join("")),E=c,M):(L.push(n),i=n,M+1);break;case f:M=function(){if(/[^\d\w_]/.test(n)){var r=L.join("");return E=j[r]?b:N[r]?x:m,U(L.join("")),E=c,M}return L.push(n),i=n,M+1}();break;case _:M=/[^\s]/g.test(n)?(U(L.join("")),E=c,M):(L.push(n),i=n,M+1);break;case c:L=L.length?[]:L,M="/"===i&&"*"===n?(I=S+M-1,E=h,i=n,M+1):"/"===i&&"/"===n?(I=S+M-1,E=p,i=n,M+1):("#"===n?(E=d,I=S+M):/\s/.test(n)?(E=_,I=S+M):(D=/\d/.test(n),z=/[^\w_]/.test(n),I=S+M,E=D?g:z?v:f),M)}a!==M&&("\n"===R[a]?(P=0,++O):++P)}return S+=M,R=R.slice(M),C}(r):(L.length&&U(L.join("")),E=w,U("(eof)"),C)};function U(r){r.length&&C.push({type:k[E],data:r,position:I,line:O,column:P})}function V(r){for(var n,i,a=0;;){if(n=o.indexOf(r.slice(0,r.length+a).join("")),i=o[n],-1===n){if(a--+r.length>0)continue;i=r.slice(0,1).join("")}return U(i),I+=i.length,(L=L.slice(i.length)).length}}};var a=i(399),o=i(9746),s=i(9525),l=i(9458),u=i(3585),c=999,f=9999,h=0,p=1,d=2,v=3,g=4,y=5,m=6,x=7,b=8,_=9,w=10,T=11,k=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(r,n,i){var a=i(9525);a=a.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),r.exports=a.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(r){r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(r,n,i){var a=i(399);r.exports=a.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(r){r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(r){r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(r,n,i){var a=i(3193);r.exports=function(r,n){var i=a(n),o=[];return(o=o.concat(i(r))).concat(i(null))}},6832:function(r){r.exports=function(r){"string"==typeof r&&(r=[r]);for(var n=[].slice.call(arguments,1),i=[],a=0;a<r.length-1;a++)i.push(r[a],n[a]||"");return i.push(r[a]),i.join("")}},5233:function(r,n,i){"use strict";var a=i(4846);r.exports=a&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(n){r=!1}return r}()},2183:function(r,n,i){"use strict";r.exports=function(r,n){var i=r.length;if(0===i)throw Error("Must have at least d+1 points");var o=r[0].length;if(i<=o)throw Error("Must input at least d+1 points");var l=r.slice(0,o+1),u=a.apply(void 0,l);if(0===u)throw Error("Input not in general position");for(var c=Array(o+1),h=0;h<=o;++h)c[h]=h;u<0&&(c[0]=1,c[1]=0);var p=new s(c,Array(o+1),!1),d=p.adjacent,v=Array(o+2);for(h=0;h<=o;++h){for(var g=c.slice(),y=0;y<=o;++y)y===h&&(g[y]=-1);var m=g[0];g[0]=g[1],g[1]=m;var x=new s(g,Array(o+1),!0);d[h]=x,v[h]=x}for(v[o+1]=p,h=0;h<=o;++h){g=d[h].vertices;var b=d[h].adjacent;for(y=0;y<=o;++y){var _=g[y];if(_<0)b[y]=p;else for(var w=0;w<=o;++w)0>d[w].vertices.indexOf(_)&&(b[y]=d[w])}}var T=new f(o,l,v),k=!!n;for(h=o+1;h<i;++h)T.insert(r[h],k);return T.boundary()};var a=i(417),o=i(8211).H;function s(r,n,i){this.vertices=r,this.adjacent=n,this.boundary=i,this.lastVisited=-1}function l(r,n,i){this.vertices=r,this.cell=n,this.index=i}function u(r,n){return o(r.vertices,n.vertices)}s.prototype.flip=function(){var r=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=r;var n=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=n};var c=[];function f(r,n,i){this.dimension=r,this.vertices=n,this.simplices=i,this.interior=i.filter(function(r){return!r.boundary}),this.tuple=Array(r+1);for(var o,s=0;s<=r;++s)this.tuple[s]=this.vertices[s];var l,u=c[r];u||(u=c[r]=((l=a[r+1])||(l=a),o=l,function(){var r=this.tuple;return o.apply(this,r)})),this.orient=u}var h=f.prototype;h.handleBoundaryDegeneracy=function(r,n){var i=this.dimension,a=this.vertices.length-1,o=this.tuple,s=this.vertices,l=[r];for(r.lastVisited=-a;l.length>0;)for(var u=(r=l.pop()).adjacent,c=0;c<=i;++c){var f=u[c];if(f.boundary&&!(f.lastVisited<=-a)){for(var h=f.vertices,p=0;p<=i;++p){var d=h[p];o[p]=d<0?n:s[d]}var v=this.orient();if(v>0)return f;f.lastVisited=-a,0===v&&l.push(f)}}return null},h.walk=function(r,n){var i=this.vertices.length-1,a=this.dimension,o=this.vertices,s=this.tuple,l=n?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[l];t:for(;!u.boundary;){for(var c=u.vertices,f=u.adjacent,h=0;h<=a;++h)s[h]=o[c[h]];for(u.lastVisited=i,h=0;h<=a;++h){var p=f[h];if(!(p.lastVisited>=i)){var d=s[h];s[h]=r;var v=this.orient();if(s[h]=d,v<0){u=p;continue t}p.boundary?p.lastVisited=-i:p.lastVisited=i}}return}return u},h.addPeaks=function(r,n){var i=this.vertices.length-1,a=this.dimension,o=this.vertices,c=this.tuple,f=this.interior,h=this.simplices,p=[n];n.lastVisited=i,n.vertices[n.vertices.indexOf(-1)]=i,n.boundary=!1,f.push(n);for(var d=[];p.length>0;){var v=(n=p.pop()).vertices,g=n.adjacent,y=v.indexOf(i);if(!(y<0)){for(var m=0;m<=a;++m)if(m!==y){var x=g[m];if(x.boundary&&!(x.lastVisited>=i)){var b=x.vertices;if(x.lastVisited!==-i){for(var _=0,w=0;w<=a;++w)b[w]<0?(_=w,c[w]=r):c[w]=o[b[w]];if(this.orient()>0){b[_]=i,x.boundary=!1,f.push(x),p.push(x),x.lastVisited=i;continue}x.lastVisited=-i}var T=x.adjacent,k=v.slice(),A=g.slice(),M=new s(k,A,!0);h.push(M);var S=T.indexOf(n);if(!(S<0))for(T[S]=M,A[y]=x,k[m]=-1,A[m]=n,g[m]=M,M.flip(),w=0;w<=a;++w){var E=k[w];if(!(E<0||E===i)){for(var L=Array(a-1),C=0,O=0;O<=a;++O){var P=k[O];P<0||O===w||(L[C++]=P)}d.push(new l(L,M,w))}}}}}}for(d.sort(u),m=0;m+1<d.length;m+=2){var I=d[m],D=d[m+1],z=I.index,R=D.index;z<0||R<0||(I.cell.adjacent[I.index]=D.cell,D.cell.adjacent[D.index]=I.cell)}},h.insert=function(r,n){var i=this.vertices;i.push(r);var a=this.walk(r,n);if(a){for(var o=this.dimension,s=this.tuple,l=0;l<=o;++l){var u=a.vertices[l];s[l]=u<0?r:i[u]}var c=this.orient(s);c<0||(0!==c||(a=this.handleBoundaryDegeneracy(a,r)))&&this.addPeaks(r,a)}},h.boundary=function(){for(var r=this.dimension,n=[],i=this.simplices,a=i.length,o=0;o<a;++o){var s=i[o];if(s.boundary){for(var l=Array(r),u=s.vertices,c=0,f=0,h=0;h<=r;++h)u[h]>=0?l[c++]=u[h]:f=1&h;if(f===(1&r)){var p=l[0];l[0]=l[1],l[1]=p}n.push(l)}}return n}},9014:function(r,n,i){"use strict";var a=i(5070);function o(r,n,i,a,o){this.mid=r,this.left=n,this.right=i,this.leftPoints=a,this.rightPoints=o,this.count=(n?n.count:0)+(i?i.count:0)+a.length}r.exports=function(r){return new x(r&&0!==r.length?m(r):null)};var s=o.prototype;function l(r,n){r.mid=n.mid,r.left=n.left,r.right=n.right,r.leftPoints=n.leftPoints,r.rightPoints=n.rightPoints,r.count=n.count}function u(r,n){var i=m(n);r.mid=i.mid,r.left=i.left,r.right=i.right,r.leftPoints=i.leftPoints,r.rightPoints=i.rightPoints,r.count=i.count}function c(r,n){var i=r.intervals([]);i.push(n),u(r,i)}function f(r,n){var i=r.intervals([]),a=i.indexOf(n);return a<0?0:(i.splice(a,1),u(r,i),1)}function h(r,n,i){for(var a=0;a<r.length&&r[a][0]<=n;++a){var o=i(r[a]);if(o)return o}}function p(r,n,i){for(var a=r.length-1;a>=0&&r[a][1]>=n;--a){var o=i(r[a]);if(o)return o}}function d(r,n){for(var i=0;i<r.length;++i){var a=n(r[i]);if(a)return a}}function v(r,n){return r-n}function g(r,n){return r[0]-n[0]||r[1]-n[1]}function y(r,n){return r[1]-n[1]||r[0]-n[0]}function m(r){if(0===r.length)return null;for(var n=[],i=0;i<r.length;++i)n.push(r[i][0],r[i][1]);n.sort(v);var a=n[n.length>>1],s=[],l=[],u=[];for(i=0;i<r.length;++i){var c=r[i];c[1]<a?s.push(c):a<c[0]?l.push(c):u.push(c)}var f=u.slice();return u.sort(g),f.sort(y),new o(a,m(s),m(l),u,f)}function x(r){this.root=r}s.intervals=function(r){return r.push.apply(r,this.leftPoints),this.left&&this.left.intervals(r),this.right&&this.right.intervals(r),r},s.insert=function(r){var n=this.count-this.leftPoints.length;if(this.count+=1,r[1]<this.mid)this.left?4*(this.left.count+1)>3*(n+1)?c(this,r):this.left.insert(r):this.left=m([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(n+1)?c(this,r):this.right.insert(r):this.right=m([r]);else{var i=a.ge(this.leftPoints,r,g),o=a.ge(this.rightPoints,r,y);this.leftPoints.splice(i,0,r),this.rightPoints.splice(o,0,r)}},s.remove=function(r){var n=this.count-this.leftPoints;if(r[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(n-1)?f(this,r):2===(u=this.left.remove(r))?(this.left=null,this.count-=1,1):(1===u&&(this.count-=1),u):0;if(r[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(n-1)?f(this,r):2===(u=this.right.remove(r))?(this.right=null,this.count-=1,1):(1===u&&(this.count-=1),u):0;if(1===this.count)return this.leftPoints[0]===r?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===r){if(this.left&&this.right){for(var i=this,o=this.left;o.right;)i=o,o=o.right;if(i===this)o.right=this.right;else{var s=this.left,u=this.right;i.count-=o.count,i.right=o.left,o.left=s,o.right=u}l(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return 1}for(s=a.ge(this.leftPoints,r,g);s<this.leftPoints.length&&this.leftPoints[s][0]===r[0];++s)if(this.leftPoints[s]===r){for(this.count-=1,this.leftPoints.splice(s,1),u=a.ge(this.rightPoints,r,y);u<this.rightPoints.length&&this.rightPoints[u][1]===r[1];++u)if(this.rightPoints[u]===r)return this.rightPoints.splice(u,1),1}return 0},s.queryPoint=function(r,n){var i;return r<this.mid?this.left&&(i=this.left.queryPoint(r,n))?i:h(this.leftPoints,r,n):r>this.mid?this.right&&(i=this.right.queryPoint(r,n))?i:p(this.rightPoints,r,n):d(this.leftPoints,n)},s.queryInterval=function(r,n,i){var a;return r<this.mid&&this.left&&(a=this.left.queryInterval(r,n,i))||n>this.mid&&this.right&&(a=this.right.queryInterval(r,n,i))?a:n<this.mid?h(this.leftPoints,n,i):r>this.mid?p(this.rightPoints,r,i):d(this.leftPoints,i)};var b=x.prototype;b.insert=function(r){this.root?this.root.insert(r):this.root=new o(r[0],null,null,[r],[r])},b.remove=function(r){if(this.root){var n=this.root.remove(r);return 2===n&&(this.root=null),0!==n}return!1},b.queryPoint=function(r,n){if(this.root)return this.root.queryPoint(r,n)},b.queryInterval=function(r,n,i){if(r<=n&&this.root)return this.root.queryInterval(r,n,i)},Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(r){"use strict";r.exports=function(r){for(var n=Array(r),i=0;i<r;++i)n[i]=i;return n}},4846:function(r){r.exports=!0},4780:function(r){function n(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}r.exports=function(r){return null!=r&&(n(r)||"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&n(r.slice(0,0))||!!r._isBuffer)}},3596:function(r){"use strict";r.exports=function(r){for(var n,i=r.length,a=0;a<i;a++)if(((n=r.charCodeAt(a))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},3578:function(r){r.exports=function(r,n,i){return r*(1-i)+n*i}},7191:function(r,n,i){var a=i(4690),o=i(9823),s=i(7332),l=i(7787),u=i(7437),c=i(2142),f={length:i(4693),normalize:i(899),dot:i(9305),cross:i(903)},h=o(),p=o(),d=[0,0,0,0],v=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function y(r,n,i,a,o){r[0]=n[0]*a+i[0]*o,r[1]=n[1]*a+i[1]*o,r[2]=n[2]*a+i[2]*o}r.exports=function(r,n,i,o,m,x){if(n||(n=[0,0,0]),i||(i=[0,0,0]),o||(o=[0,0,0]),m||(m=[0,0,0,1]),x||(x=[0,0,0,1]),!a(h,r)||(s(p,h),p[3]=0,p[7]=0,p[11]=0,p[15]=1,Math.abs(1e-8>l(p))))return!1;var b,_,w,T,k,A=h[3],M=h[7],S=h[11],E=h[12],L=h[13],C=h[14],O=h[15];if(0!==A||0!==M||0!==S){if(d[0]=A,d[1]=M,d[2]=S,d[3]=O,!u(p,p))return!1;c(p,p),b=m,_=d[0],w=d[1],T=d[2],k=d[3],b[0]=p[0]*_+p[4]*w+p[8]*T+p[12]*k,b[1]=p[1]*_+p[5]*w+p[9]*T+p[13]*k,b[2]=p[2]*_+p[6]*w+p[10]*T+p[14]*k,b[3]=p[3]*_+p[7]*w+p[11]*T+p[15]*k}else m[0]=m[1]=m[2]=0,m[3]=1;if(n[0]=E,n[1]=L,n[2]=C,v[0][0]=h[0],v[0][1]=h[1],v[0][2]=h[2],v[1][0]=h[4],v[1][1]=h[5],v[1][2]=h[6],v[2][0]=h[8],v[2][1]=h[9],v[2][2]=h[10],i[0]=f.length(v[0]),f.normalize(v[0],v[0]),o[0]=f.dot(v[0],v[1]),y(v[1],v[1],v[0],1,-o[0]),i[1]=f.length(v[1]),f.normalize(v[1],v[1]),o[0]/=i[1],o[1]=f.dot(v[0],v[2]),y(v[2],v[2],v[0],1,-o[1]),o[2]=f.dot(v[1],v[2]),y(v[2],v[2],v[1],1,-o[2]),i[2]=f.length(v[2]),f.normalize(v[2],v[2]),o[1]/=i[2],o[2]/=i[2],f.cross(g,v[1],v[2]),0>f.dot(v[0],g))for(var P=0;P<3;P++)i[P]*=-1,v[P][0]*=-1,v[P][1]*=-1,v[P][2]*=-1;return x[0]=.5*Math.sqrt(Math.max(1+v[0][0]-v[1][1]-v[2][2],0)),x[1]=.5*Math.sqrt(Math.max(1-v[0][0]+v[1][1]-v[2][2],0)),x[2]=.5*Math.sqrt(Math.max(1-v[0][0]-v[1][1]+v[2][2],0)),x[3]=.5*Math.sqrt(Math.max(1+v[0][0]+v[1][1]+v[2][2],0)),v[2][1]>v[1][2]&&(x[0]=-x[0]),v[0][2]>v[2][0]&&(x[1]=-x[1]),v[1][0]>v[0][1]&&(x[2]=-x[2]),!0}},4690:function(r){r.exports=function(r,n){var i=n[15];if(0===i)return!1;for(var a=1/i,o=0;o<16;o++)r[o]=n[o]*a;return!0}},7649:function(r,n,i){var a=i(1868),o=i(1102),s=i(7191),l=i(7787),u=i(1116),c=p(),f=p(),h=p();function p(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(r){return[r||0,r||0,r||0]}r.exports=function(r,n,i,p){if(0===l(n)||0===l(i))return!1;var d=s(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion),v=s(i,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!(!d||!v||(a(h.translate,c.translate,f.translate,p),a(h.skew,c.skew,f.skew,p),a(h.scale,c.scale,f.scale,p),a(h.perspective,c.perspective,f.perspective,p),u(h.quaternion,c.quaternion,f.quaternion,p),o(r,h.translate,h.scale,h.skew,h.perspective,h.quaternion),0))}},1102:function(r,n,i){var a={identity:i(9947),translate:i(998),multiply:i(104),create:i(9823),scale:i(3668),fromRotationTranslation:i(7280)},o=(a.create(),a.create());r.exports=function(r,n,i,s,l,u){return a.identity(r),a.fromRotationTranslation(r,u,n),r[3]=l[0],r[7]=l[1],r[11]=l[2],r[15]=l[3],a.identity(o),0!==s[2]&&(o[9]=s[2],a.multiply(r,r,o)),0!==s[1]&&(o[9]=0,o[8]=s[1],a.multiply(r,r,o)),0!==s[0]&&(o[8]=0,o[4]=s[0],a.multiply(r,r,o)),a.scale(r,r,i),r}},9298:function(r,n,i){"use strict";var a=i(5070),o=i(7649),s=i(7437),l=i(6109),u=i(7115),c=i(5240),f=i(3012),h=i(998),p=(i(3668),i(899)),d=[0,0,0];function v(r){this._components=r.slice(),this._time=[0],this.prevMatrix=r.slice(),this.nextMatrix=r.slice(),this.computedMatrix=r.slice(),this.computedInverse=r.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}r.exports=function(r){return new v((r=r||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=v.prototype;g.recalcMatrix=function(r){var n=this._time,i=a.le(n,r),l=this.computedMatrix;if(!(i<0)){var u=this._components;if(i===n.length-1)for(var c=16*i,f=0;f<16;++f)l[f]=u[c++];else{var h=n[i+1]-n[i],d=(c=16*i,this.prevMatrix),v=!0;for(f=0;f<16;++f)d[f]=u[c++];var g=this.nextMatrix;for(f=0;f<16;++f)g[f]=u[c++],v=v&&d[f]===g[f];if(h<1e-6||v)for(f=0;f<16;++f)l[f]=d[f];else o(l,d,g,(r-n[i])/h)}var y=this.computedUp;y[0]=l[1],y[1]=l[5],y[2]=l[9],p(y,y);var m=this.computedInverse;s(m,l);var x=this.computedEye,b=m[15];x[0]=m[12]/b,x[1]=m[13]/b,x[2]=m[14]/b;var _=this.computedCenter,w=Math.exp(this.computedRadius[0]);for(f=0;f<3;++f)_[f]=x[f]-l[2+4*f]*w}},g.idle=function(r){if(!(r<this.lastT())){for(var n=this._components,i=n.length-16,a=0;a<16;++a)n.push(n[i++]);this._time.push(r)}},g.flush=function(r){var n=a.gt(this._time,r)-2;n<0||(this._time.splice(0,n),this._components.splice(0,16*n))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(r,n,i,a){this.recalcMatrix(r),n=n||this.computedEye,i=i||d,a=a||this.computedUp,this.setMatrix(r,f(this.computedMatrix,n,i,a));for(var o=0,s=0;s<3;++s)o+=Math.pow(i[s]-n[s],2);o=Math.log(Math.sqrt(o)),this.computedRadius[0]=o},g.rotate=function(r,n,i,a){this.recalcMatrix(r);var o=this.computedInverse;n&&u(o,o,n),i&&l(o,o,i),a&&c(o,o,a),this.setMatrix(r,s(this.computedMatrix,o))};var y=[0,0,0];g.pan=function(r,n,i,a){y[0]=-(n||0),y[1]=-(i||0),y[2]=-(a||0),this.recalcMatrix(r);var o=this.computedInverse;h(o,o,y),this.setMatrix(r,s(o,o))},g.translate=function(r,n,i,a){y[0]=n||0,y[1]=i||0,y[2]=a||0,this.recalcMatrix(r);var o=this.computedMatrix;h(o,o,y),this.setMatrix(r,o)},g.setMatrix=function(r,n){if(!(r<this.lastT())){this._time.push(r);for(var i=0;i<16;++i)this._components.push(n[i])}},g.setDistance=function(r,n){this.computedRadius[0]=n},g.setDistanceLimits=function(r,n){var i=this._limits;i[0]=r,i[1]=n},g.getDistanceLimits=function(r){var n=this._limits;return r?(r[0]=n[0],r[1]=n[1],r):n}},3266:function(r,n,i){"use strict";r.exports=function(r){var n=r.length;if(n<3){for(var i=Array(n),o=0;o<n;++o)i[o]=o;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:i}var s=Array(n);for(o=0;o<n;++o)s[o]=o;s.sort(function(n,i){return r[n][0]-r[i][0]||r[n][1]-r[i][1]});var l=[s[0],s[1]],u=[s[0],s[1]];for(o=2;o<n;++o){for(var c=s[o],f=r[c],h=l.length;h>1&&0>=a(r[l[h-2]],r[l[h-1]],f);)h-=1,l.pop();for(l.push(c),h=u.length;h>1&&a(r[u[h-2]],r[u[h-1]],f)>=0;)h-=1,u.pop();u.push(c)}i=Array(u.length+l.length-2);for(var p=0,d=(o=0,l.length);o<d;++o)i[p++]=l[o];for(var v=u.length-2;v>0;--v)i[p++]=u[v];return i};var a=i(417)[3]},6145:function(r,n,i){"use strict";r.exports=function(r,n){n||(n=r,r=window);var i=0,o=0,s=0,l={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function c(r){var n=!1;return"altKey"in r&&(n=n||r.altKey!==l.alt,l.alt=!!r.altKey),"shiftKey"in r&&(n=n||r.shiftKey!==l.shift,l.shift=!!r.shiftKey),"ctrlKey"in r&&(n=n||r.ctrlKey!==l.control,l.control=!!r.ctrlKey),"metaKey"in r&&(n=n||r.metaKey!==l.meta,l.meta=!!r.metaKey),n}function f(r,u){var f=a.x(u),h=a.y(u);"buttons"in u&&(r=0|u.buttons),(r!==i||f!==o||h!==s||c(u))&&(i=0|r,o=f||0,s=h||0,n&&n(i,o,s,l))}function h(r){f(0,r)}function p(){(i||o||s||l.shift||l.alt||l.meta||l.control)&&(o=s=0,i=0,l.shift=l.alt=l.control=l.meta=!1,n&&n(0,0,0,l))}function d(r){c(r)&&n&&n(i,o,s,l)}function v(r){0===a.buttons(r)?f(0,r):f(i,r)}function g(r){f(i|a.buttons(r),r)}function y(r){f(i&~a.buttons(r),r)}function m(){u||(u=!0,r.addEventListener("mousemove",v),r.addEventListener("mousedown",g),r.addEventListener("mouseup",y),r.addEventListener("mouseleave",h),r.addEventListener("mouseenter",h),r.addEventListener("mouseout",h),r.addEventListener("mouseover",h),r.addEventListener("blur",p),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var x={element:r};return Object.defineProperties(x,{enabled:{get:function(){return u},set:function(n){n?m():u&&(u=!1,r.removeEventListener("mousemove",v),r.removeEventListener("mousedown",g),r.removeEventListener("mouseup",y),r.removeEventListener("mouseleave",h),r.removeEventListener("mouseenter",h),r.removeEventListener("mouseout",h),r.removeEventListener("mouseover",h),r.removeEventListener("blur",p),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),x};var a=i(4110)},2565:function(r){var n={left:0,top:0};r.exports=function(r,i,a){i=i||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var o,s=r.clientX||0,l=r.clientY||0,u=(o=i)===window||o===document||o===document.body?n:o.getBoundingClientRect();return a[0]=s-u.left,a[1]=l-u.top,a}},4110:function(r,n){"use strict";function i(r){return r.target||r.srcElement||window}n.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(n=r.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in r){var n;if(1===(n=r.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},n.element=i,n.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var n=i(r).getBoundingClientRect();return r.clientX-n.left}return 0},n.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var n=i(r).getBoundingClientRect();return r.clientY-n.top}return 0}},6475:function(r,n,i){"use strict";var a=i(14);r.exports=function(r,n,i){"function"==typeof r&&(i=!!n,n=r,r=window);var o=a("ex",r),s=function(r){i&&r.preventDefault();var a=r.deltaX||0,s=r.deltaY||0,l=r.deltaZ||0,u=1;switch(r.deltaMode){case 1:u=o;break;case 2:u=window.innerHeight}if(s*=u,l*=u,(a*=u)||s||l)return n(a,s,l,r)};return r.addEventListener("wheel",s),s}},9284:function(r,n,i){"use strict";var a=i(5306);r.exports=function(r){function n(r){throw Error("ndarray-extract-contour: "+r)}"object"!=typeof r&&n("Must specify arguments");var i,s,l,u=r.order;Array.isArray(u)||n("Must specify order");var c=r.arrayArguments||1;c<1&&n("Must have at least one array argument"),0>(r.scalarArguments||0)&&n("Scalar arg count must be > 0"),"function"!=typeof r.vertex&&n("Must specify vertex creation function"),"function"!=typeof r.cell&&n("Must specify cell creation function"),"function"!=typeof r.phase&&n("Must specify phase function");for(var f=r.getters||[],h=Array(c),p=0;p<c;++p)f.indexOf(p)>=0?h[p]=!0:h[p]=!1;return i=r.vertex,s=r.cell,l=r.phase,(0,o[[h,u].join(",")])(i,s,l,a.mallocUint32,a.freeUint32)};var o={"false,0,1":function(r,n,i,a,o){return function(s,l,u,c){var f,h=0|s.shape[0],p=0|s.shape[1],d=s.data,v=0|s.offset,g=0|s.stride[0],y=0|s.stride[1],m=v,x=0|-g,b=0,_=0|-y,w=0,T=-g-y|0,k=0,A=0|g,M=y-g*h|0,S=0,E=0,L=0,C=2*h|0,O=a(C),P=a(C),I=0,D=0,z=-1,R=-1,F=0,B=0|-h,N=0|h,j=0,U=-h-1|0,V=h-1|0,H=0,q=0,G=0;for(S=0;S<h;++S)O[I++]=i(d[m],l,u,c),m+=A;if(m+=M,p>0){if(E=1,O[I++]=i(d[m],l,u,c),m+=A,h>0)for(S=1,f=d[m],D=O[I]=i(f,l,u,c),F=O[I+z],j=O[I+B],H=O[I+U],D===F&&D===j&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,F,j,H,l,u,c),q=P[I]=L++),I+=1,m+=A,S=2;S<h;++S)f=d[m],D=O[I]=i(f,l,u,c),F=O[I+z],j=O[I+B],H=O[I+U],D===F&&D===j&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,F,j,H,l,u,c),q=P[I]=L++,H!==F&&n(P[I+z],q,k,b,H,F,l,u,c)),I+=1,m+=A;for(m+=M,I=0,G=z,z=R,R=G,G=B,B=N,N=G,G=U,U=V,V=G,E=2;E<p;++E){if(O[I++]=i(d[m],l,u,c),m+=A,h>0)for(S=1,f=d[m],D=O[I]=i(f,l,u,c),F=O[I+z],j=O[I+B],H=O[I+U],D===F&&D===j&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,F,j,H,l,u,c),q=P[I]=L++,H!==j&&n(P[I+B],q,w,k,j,H,l,u,c)),I+=1,m+=A,S=2;S<h;++S)f=d[m],D=O[I]=i(f,l,u,c),F=O[I+z],j=O[I+B],H=O[I+U],D===F&&D===j&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,F,j,H,l,u,c),q=P[I]=L++,H!==j&&n(P[I+B],q,w,k,j,H,l,u,c),H!==F&&n(P[I+z],q,k,b,H,F,l,u,c)),I+=1,m+=A;1&E&&(I=0),G=z,z=R,R=G,G=B,B=N,N=G,G=U,U=V,V=G,m+=M}}o(P),o(O)}},"false,1,0":function(r,n,i,a,o){return function(s,l,u,c){var f,h=0|s.shape[0],p=0|s.shape[1],d=s.data,v=0|s.offset,g=0|s.stride[0],y=0|s.stride[1],m=v,x=0|-g,b=0,_=0|-y,w=0,T=-g-y|0,k=0,A=0|y,M=g-y*p|0,S=0,E=0,L=0,C=2*p|0,O=a(C),P=a(C),I=0,D=0,z=-1,R=-1,F=0,B=0|-p,N=0|p,j=0,U=-p-1|0,V=p-1|0,H=0,q=0,G=0;for(E=0;E<p;++E)O[I++]=i(d[m],l,u,c),m+=A;if(m+=M,h>0){if(S=1,O[I++]=i(d[m],l,u,c),m+=A,p>0)for(E=1,f=d[m],D=O[I]=i(f,l,u,c),j=O[I+B],F=O[I+z],H=O[I+U],D===j&&D===F&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,j,F,H,l,u,c),q=P[I]=L++),I+=1,m+=A,E=2;E<p;++E)f=d[m],D=O[I]=i(f,l,u,c),j=O[I+B],F=O[I+z],H=O[I+U],D===j&&D===F&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,j,F,H,l,u,c),q=P[I]=L++,H!==F&&n(P[I+z],q,w,k,F,H,l,u,c)),I+=1,m+=A;for(m+=M,I=0,G=B,B=N,N=G,G=z,z=R,R=G,G=U,U=V,V=G,S=2;S<h;++S){if(O[I++]=i(d[m],l,u,c),m+=A,p>0)for(E=1,f=d[m],D=O[I]=i(f,l,u,c),j=O[I+B],F=O[I+z],H=O[I+U],D===j&&D===F&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,j,F,H,l,u,c),q=P[I]=L++,H!==j&&n(P[I+B],q,k,b,H,j,l,u,c)),I+=1,m+=A,E=2;E<p;++E)f=d[m],D=O[I]=i(f,l,u,c),j=O[I+B],F=O[I+z],H=O[I+U],D===j&&D===F&&D===H||(r(S,E,f,b=d[m+x],w=d[m+_],k=d[m+T],D,j,F,H,l,u,c),q=P[I]=L++,H!==F&&n(P[I+z],q,w,k,F,H,l,u,c),H!==j&&n(P[I+B],q,k,b,H,j,l,u,c)),I+=1,m+=A;1&S&&(I=0),G=B,B=N,N=G,G=z,z=R,R=G,G=U,U=V,V=G,m+=M}}o(P),o(O)}}}},9144:function(r,n,i){"use strict";var a=i(3094),o={zero:function(r,n,i,a){var o=r[0];a|=0;var s=0,l=i[0];for(s=0;s<o;++s)n[a]=0,a+=l},fdTemplate1:function(r,n,i,a,o,s,l){var u=r[0],c=i[0],f=-1*c;a|=0,l|=0;var h=0,p=s[0];for(h=0;h<u;++h)o[l]=.5*(n[a+f]-n[a+c]),a+=c,l+=p},fdTemplate2:function(r,n,i,a,o,s,l,u,c,f){var h=r[0],p=r[1],d=i[0],v=i[1],g=s[0],y=s[1],m=c[0],x=c[1],b=-1*d,_=-1*v;a|=0,l|=0,f|=0;var w=0,T=0,k=d-p*v,A=g-p*y,M=m-p*x;for(T=0;T<h;++T){for(w=0;w<p;++w)o[l]=.5*(n[a+b]-n[a+d]),u[f]=.5*(n[a+_]-n[a+v]),a+=v,l+=y,f+=x;a+=k,l+=A,f+=M}}},s={cdiff:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,u=a.dtype,c=a.order,f=o.dtype,h=o.order,p=[s,l.join(),u,c.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,u,c,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}},zero:function(r){var n={};return function(i){var a=i.dtype,o=i.order,s=[a,o.join()].join(),l=n[s];return l||(n[s]=l=r([a,o])),l(i.shape.slice(0),i.data,i.stride,0|i.offset)}},fdTemplate1:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=a.dtype,u=a.order,c=[o,s.join(),l,u.join()].join(),f=n[c];return f||(n[c]=f=r([o,s,l,u])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset)}},fdTemplate2:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,u=a.dtype,c=a.order,f=o.dtype,h=o.order,p=[s,l.join(),u,c.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,u,c,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}}};function l(r){return o[r.funcName]}function u(r){var n;return(0,s[(n={funcName:r.funcName}).funcName])(l.bind(void 0,n))}var c={},f={},h=u({funcName:"cdiff"}),p=u({funcName:"zero"});function d(r,n,i,a){return function(r,o){var s=o.shape.slice();return s[0]>2&&s[1]>2&&a(o.pick(-1,-1).lo(1,1).hi(s[0]-2,s[1]-2),r.pick(-1,-1,0).lo(1,1).hi(s[0]-2,s[1]-2),r.pick(-1,-1,1).lo(1,1).hi(s[0]-2,s[1]-2)),s[1]>2&&(i(o.pick(0,-1).lo(1).hi(s[1]-2),r.pick(0,-1,1).lo(1).hi(s[1]-2)),n(r.pick(0,-1,0).lo(1).hi(s[1]-2))),s[1]>2&&(i(o.pick(s[0]-1,-1).lo(1).hi(s[1]-2),r.pick(s[0]-1,-1,1).lo(1).hi(s[1]-2)),n(r.pick(s[0]-1,-1,0).lo(1).hi(s[1]-2))),s[0]>2&&(i(o.pick(-1,0).lo(1).hi(s[0]-2),r.pick(-1,0,0).lo(1).hi(s[0]-2)),n(r.pick(-1,0,1).lo(1).hi(s[0]-2))),s[0]>2&&(i(o.pick(-1,s[1]-1).lo(1).hi(s[0]-2),r.pick(-1,s[1]-1,0).lo(1).hi(s[0]-2)),n(r.pick(-1,s[1]-1,1).lo(1).hi(s[0]-2))),r.set(0,0,0,0),r.set(0,0,1,0),r.set(s[0]-1,0,0,0),r.set(s[0]-1,0,1,0),r.set(0,s[1]-1,0,0),r.set(0,s[1]-1,1,0),r.set(s[0]-1,s[1]-1,0,0),r.set(s[0]-1,s[1]-1,1,0),r}}r.exports=function(r,n,i){return Array.isArray(i)||(i=a(n.dimension,"string"==typeof i?i:"clamp")),0===n.size?r:0===n.dimension?(r.set(0),r):(function(r){var n,i=r.join();if(l=f[i])return l;for(var a=r.length,o=[h,p],s=1;s<=a;++s)o.push((n=s)in c?c[n]:c[n]=u({funcName:"fdTemplate"+n}));var l=d.apply(void 0,o);return f[i]=l,l})(i)(r,n)}},3581:function(r){"use strict";function n(r,n){var i=Math.floor(n),a=n-i,o=0<=i&&i<r.shape[0],s=0<=i+1&&i+1<r.shape[0];return(1-a)*(o?+r.get(i):0)+a*(s?+r.get(i+1):0)}function i(r,n,i){var a=Math.floor(n),o=n-a,s=0<=a&&a<r.shape[0],l=0<=a+1&&a+1<r.shape[0],u=Math.floor(i),c=i-u,f=0<=u&&u<r.shape[1],h=0<=u+1&&u+1<r.shape[1],p=s&&f?r.get(a,u):0,d=s&&h?r.get(a,u+1):0;return(1-c)*((1-o)*p+o*(l&&f?r.get(a+1,u):0))+c*((1-o)*d+o*(l&&h?r.get(a+1,u+1):0))}function a(r,n,i,a){var o=Math.floor(n),s=n-o,l=0<=o&&o<r.shape[0],u=0<=o+1&&o+1<r.shape[0],c=Math.floor(i),f=i-c,h=0<=c&&c<r.shape[1],p=0<=c+1&&c+1<r.shape[1],d=Math.floor(a),v=a-d,g=0<=d&&d<r.shape[2],y=0<=d+1&&d+1<r.shape[2],m=l&&h&&g?r.get(o,c,d):0,x=l&&p&&g?r.get(o,c+1,d):0,b=u&&h&&g?r.get(o+1,c,d):0,_=u&&p&&g?r.get(o+1,c+1,d):0,w=l&&h&&y?r.get(o,c,d+1):0,T=l&&p&&y?r.get(o,c+1,d+1):0;return(1-v)*((1-f)*((1-s)*m+s*b)+f*((1-s)*x+s*_))+v*((1-f)*((1-s)*w+s*(u&&h&&y?r.get(o+1,c,d+1):0))+f*((1-s)*T+s*(u&&p&&y?r.get(o+1,c+1,d+1):0)))}function o(r){var n,i,a=0|r.shape.length,o=Array(a),s=Array(a),l=Array(a),u=Array(a);for(n=0;n<a;++n)i=+arguments[n+1],o[n]=Math.floor(i),s[n]=i-o[n],l[n]=0<=o[n]&&o[n]<r.shape[n],u[n]=0<=o[n]+1&&o[n]+1<r.shape[n];var c,f,h,p=0;t:for(n=0;n<1<<a;++n){for(f=1,h=r.offset,c=0;c<a;++c)if(n&1<<c){if(!u[c])continue t;f*=s[c],h+=r.stride[c]*(o[c]+1)}else{if(!l[c])continue t;f*=1-s[c],h+=r.stride[c]*o[c]}p+=f*r.data[h]}return p}r.exports=function(r,s,l,u){switch(r.shape.length){case 0:return 0;case 1:return n(r,s);case 2:return i(r,s,l);case 3:return a(r,s,l,u);default:return o.apply(void 0,arguments)}},r.exports.d1=n,r.exports.d2=i,r.exports.d3=a},7498:function(r,n){"use strict";var i={"float64,2,1,0":function(){return function(r,n,i,a,o){var s=r[0],l=r[1],u=r[2],c=i[0],f=i[1],h=i[2];a|=0;var p=0,d=0,v=0,g=f-u*h,y=c-l*f;for(v=0;v<s;++v){for(d=0;d<l;++d){for(p=0;p<u;++p)n[a]/=o,a+=h;a+=g}a+=y}}},"uint8,2,0,1,float64,2,1,0":function(){return function(r,n,i,a,o,s,l,u){for(var c=r[0],f=r[1],h=r[2],p=i[0],d=i[1],v=i[2],g=s[0],y=s[1],m=s[2],x=a|=0,b=l|=0,_=0|r[0];_>0;){_<64?(c=_,_=0):(c=64,_-=64);for(var w=0|r[1];w>0;){w<64?(f=w,w=0):(f=64,w-=64),a=x+_*p+w*d,l=b+_*g+w*y;var T=0,k=0,A=0,M=p-h*v,S=d-c*p,E=g-h*m,L=y-c*g;for(A=0;A<f;++A){for(k=0;k<c;++k){for(T=0;T<h;++T)n[a]=o[l]*u,a+=v,l+=m;a+=M,l+=E}a+=S,l+=L}}}}},"float32,1,0,float32,1,0":function(){return function(r,n,i,a,o,s,l){var u=r[0],c=r[1],f=i[0],h=i[1],p=s[0],d=s[1];a|=0,l|=0;var v=0,g=0,y=f-c*h,m=p-c*d;for(g=0;g<u;++g){for(v=0;v<c;++v)n[a]=o[l],a+=h,l+=d;a+=y,l+=m}}},"float32,1,0,float32,0,1":function(){return function(r,n,i,a,o,s,l){for(var u=r[0],c=r[1],f=i[0],h=i[1],p=s[0],d=s[1],v=a|=0,g=l|=0,y=0|r[1];y>0;){y<64?(c=y,y=0):(c=64,y-=64);for(var m=0|r[0];m>0;){m<64?(u=m,m=0):(u=64,m-=64),a=v+y*h+m*f,l=g+y*d+m*p;var x=0,b=0,_=f-c*h,w=p-c*d;for(b=0;b<u;++b){for(x=0;x<c;++x)n[a]=o[l],a+=h,l+=d;a+=_,l+=w}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(r,n,i,a,o,s,l){for(var u=r[0],c=r[1],f=r[2],h=i[0],p=i[1],d=i[2],v=s[0],g=s[1],y=s[2],m=a|=0,x=l|=0,b=0|r[2];b>0;){b<64?(f=b,b=0):(f=64,b-=64);for(var _=0|r[0];_>0;){_<64?(u=_,_=0):(u=64,_-=64);for(var w=0|r[1];w>0;){w<64?(c=w,w=0):(c=64,w-=64),a=m+b*d+_*h+w*p,l=x+b*y+_*v+w*g;var T=0,k=0,A=0,M=h-f*d,S=p-u*h,E=v-f*y,L=g-u*v;for(A=0;A<c;++A){for(k=0;k<u;++k){for(T=0;T<f;++T)n[a]=o[l],a+=d,l+=y;a+=M,l+=E}a+=S,l+=L}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(r,n,i,a,o,s,l){var u=r[0],c=r[1],f=r[2],h=i[0],p=i[1],d=i[2],v=s[0],g=s[1],y=s[2];a|=0,l|=0;var m=0,x=0,b=0,_=h-f*d,w=p-u*h,T=v-f*y,k=g-u*v;for(b=0;b<c;++b){for(x=0;x<u;++x){for(m=0;m<f;++m)n[a]=o[l],a+=d,l+=y;a+=_,l+=T}a+=w,l+=k}}}},a=function(r,n){return(0,i[n.join(",")])()},o={mul:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,u=a.dtype,c=a.order,f=o.dtype,h=o.order,p=[s,l.join(),u,c.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,u,c,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}},muls:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,u=a.dtype,c=a.order,f=[s,l.join(),u,c.join()].join(),h=n[f];return h||(n[f]=h=r([s,l,u,c])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o)}},mulseq:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=[o,s.join()].join(),u=n[l];return u||(n[l]=u=r([o,s])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,a)}},div:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,u=a.dtype,c=a.order,f=o.dtype,h=o.order,p=[s,l.join(),u,c.join(),f,h.join()].join(),d=n[p];return d||(n[p]=d=r([s,l,u,c,f,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o.data,o.stride,0|o.offset)}},divs:function(r){var n={};return function(i,a,o){var s=i.dtype,l=i.order,u=a.dtype,c=a.order,f=[s,l.join(),u,c.join()].join(),h=n[f];return h||(n[f]=h=r([s,l,u,c])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset,o)}},divseq:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=[o,s.join()].join(),u=n[l];return u||(n[l]=u=r([o,s])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,a)}},assign:function(r){var n={};return function(i,a){var o=i.dtype,s=i.order,l=a.dtype,u=a.order,c=[o,s.join(),l,u.join()].join(),f=n[c];return f||(n[c]=f=r([o,s,l,u])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,a.data,a.stride,0|a.offset)}}};function s(r){var n;return(0,o[(n={funcName:r.funcName}).funcName])(a.bind(void 0,n))}var l={mul:"*",div:"/"};(function(){for(var r in l)n[r]=s({funcName:r}),n[r+"s"]=s({funcName:r+"s"}),n[r+"seq"]=s({funcName:r+"seq"})})(),n.assign=s({funcName:"assign"})},7382:function(r,n,i){"use strict";var a=i(5050),o=i(9262);r.exports=function(r,n){for(var i=[],s=r,l=1;Array.isArray(s);)i.push(s.length),l*=s.length,s=s[0];return 0===i.length?a():(n||(n=a(new Float64Array(l),i)),o(n,r),n)}},9262:function(r){"use strict";var n,i;r.exports=(n=(function(){return function(r,n,i,a,o){var s=r[0],l=r[1],u=r[2],c=i[0],f=i[1],h=i[2],p=[0,0,0];a|=0;var d=0,v=0,g=0,y=f-u*h,m=c-l*f;for(g=0;g<s;++g){for(v=0;v<l;++v){for(d=0;d<u;++d){var x,b=o;for(x=0;x<p.length-1;++x)b=b[p[x]];n[a]=b[p[p.length-1]],a+=h,++p[2]}a+=y,p[2]-=u,++p[1]}a+=m,p[1]-=l,++p[0]}}}).bind(void 0,{funcName:"convert"}),i={},function(r,a){var o=r.dtype,s=r.order,l=[o,s.join()].join(),u=i[l];return u||(i[l]=u=n([o,s])),u(r.shape.slice(0),r.data,r.stride,0|r.offset,a)})},8139:function(r,n,i){"use strict";var a=i(5306);function o(r){return"uint32"===r?[a.mallocUint32,a.freeUint32]:null}var s={"uint32,1,0":function(r,n){return function(i,a,o,s,l,u,c,f,h,p,d){var v,g,y,m,x,b,_,w,T=i*l+s,k=r(f);for(v=i+1;v<=a;++v){for(g=v,y=T+=l,x=0,b=T,m=0;m<f;++m)k[x++]=o[b],b+=h;t:for(;g-- >i;){for(x=0,b=y-l,m=0;m<f;++m){if((_=o[b])<(w=k[x]))break t;if(_>w)break;b+=p,x+=d}for(x=y,b=y-l,m=0;m<f;++m)o[x]=o[b],x+=h,b+=h;y-=l}for(x=y,b=0,m=0;m<f;++m)o[x]=k[b++],x+=h}n(k)}}},l={"uint32,1,0":function(r,n,i){return function a(o,s,l,u,c,f,h,p,d,v,g){var y,m,x,b,_,w,T,k,A,M,S,E,L,C,O,P,I,D,z,R,F,B,N,j,U,V=(s-o+1)/6|0,H=o+V,q=s-V,G=o+s>>1,Z=G-V,Y=G+V,W=H,X=Z,J=G,K=Y,$=q,Q=o+1,tt=s-1,te=!0,tr=0,tn=0,ti=0,ta=n(p),to=n(p);for(S=c*W,E=c*X,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=W,W=X,X=m;break}if(ti<0)break;U+=v}for(S=c*K,E=c*$,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=K,K=$,$=m;break}if(ti<0)break;U+=v}for(S=c*W,E=c*J,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=W,W=J,J=m;break}if(ti<0)break;U+=v}for(S=c*X,E=c*J,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=X,X=J,J=m;break}if(ti<0)break;U+=v}for(S=c*W,E=c*K,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=W,W=K,K=m;break}if(ti<0)break;U+=v}for(S=c*J,E=c*K,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=J,J=K,K=m;break}if(ti<0)break;U+=v}for(S=c*X,E=c*$,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=X,X=$,$=m;break}if(ti<0)break;U+=v}for(S=c*X,E=c*J,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=X,X=J,J=m;break}if(ti<0)break;U+=v}for(S=c*K,E=c*$,U=u,M=0;M<p;++M){if(k=E+U,(ti=l[T=S+U]-l[k])>0){m=K,K=$,$=m;break}if(ti<0)break;U+=v}for(S=c*W,E=c*X,L=c*J,C=c*K,O=c*$,P=c*H,I=c*G,D=c*q,j=0,U=u,M=0;M<p;++M)T=S+U,k=E+U,A=L+U,z=C+U,R=O+U,F=P+U,B=I+U,N=D+U,ta[j]=l[k],to[j]=l[z],te=te&&ta[j]===to[j],x=l[T],b=l[A],_=l[R],l[F]=x,l[B]=b,l[N]=_,++j,U+=d;for(S=c*Z,E=c*o,U=u,M=0;M<p;++M)k=E+U,l[T=S+U]=l[k],U+=d;for(S=c*Y,E=c*s,U=u,M=0;M<p;++M)k=E+U,l[T=S+U]=l[k],U+=d;if(te)for(w=Q;w<=tt;++w){for(T=u+w*c,j=0,M=0;M<p&&0==(ti=l[T]-ta[j]);++M)j+=g,T+=v;if(0!==ti){if(ti<0){if(w!==Q)for(S=c*w,E=c*Q,U=u,M=0;M<p;++M)k=E+U,y=l[T=S+U],l[T]=l[k],l[k]=y,U+=d;++Q}else for(;;){for(T=u+tt*c,j=0,M=0;M<p&&0==(ti=l[T]-ta[j]);++M)j+=g,T+=v;if(!(ti>0)){if(ti<0){for(S=c*w,E=c*Q,L=c*tt,U=u,M=0;M<p;++M)k=E+U,A=L+U,y=l[T=S+U],l[T]=l[k],l[k]=l[A],l[A]=y,U+=d;++Q,--tt;break}for(S=c*w,E=c*tt,U=u,M=0;M<p;++M)k=E+U,y=l[T=S+U],l[T]=l[k],l[k]=y,U+=d;--tt;break}tt--}}}else for(w=Q;w<=tt;++w){for(T=u+w*c,j=0,M=0;M<p&&0==(tr=l[T]-ta[j]);++M)j+=g,T+=v;if(tr<0){if(w!==Q)for(S=c*w,E=c*Q,U=u,M=0;M<p;++M)k=E+U,y=l[T=S+U],l[T]=l[k],l[k]=y,U+=d;++Q}else{for(T=u+w*c,j=0,M=0;M<p&&0==(tn=l[T]-to[j]);++M)j+=g,T+=v;if(tn>0)for(;;){for(T=u+tt*c,j=0,M=0;M<p&&0==(ti=l[T]-to[j]);++M)j+=g,T+=v;if(!(ti>0)){for(T=u+tt*c,j=0,M=0;M<p&&0==(ti=l[T]-ta[j]);++M)j+=g,T+=v;if(ti<0){for(S=c*w,E=c*Q,L=c*tt,U=u,M=0;M<p;++M)k=E+U,A=L+U,y=l[T=S+U],l[T]=l[k],l[k]=l[A],l[A]=y,U+=d;++Q,--tt}else{for(S=c*w,E=c*tt,U=u,M=0;M<p;++M)k=E+U,y=l[T=S+U],l[T]=l[k],l[k]=y,U+=d;--tt}break}if(--tt<w)break}}}for(S=c*o,E=c*(Q-1),j=0,U=u,M=0;M<p;++M)k=E+U,l[T=S+U]=l[k],l[k]=ta[j],++j,U+=d;for(S=c*s,E=c*(tt+1),j=0,U=u,M=0;M<p;++M)k=E+U,l[T=S+U]=l[k],l[k]=to[j],++j,U+=d;if(Q-2-o<=32?r(o,Q-2,l,u,c,f,h,p,d,v,g):a(o,Q-2,l,u,c,f,h,p,d,v,g),s-(tt+2)<=32?r(tt+2,s,l,u,c,f,h,p,d,v,g):a(tt+2,s,l,u,c,f,h,p,d,v,g),te)return i(ta),void i(to);if(Q<H&&tt>q){t:for(;;){for(T=u+Q*c,j=0,U=u,M=0;M<p;++M){if(l[T]!==ta[j])break t;++j,T+=d}++Q}t:for(;;){for(T=u+tt*c,j=0,U=u,M=0;M<p;++M){if(l[T]!==to[j])break t;++j,T+=d}--tt}for(w=Q;w<=tt;++w){for(T=u+w*c,j=0,M=0;M<p&&0==(tr=l[T]-ta[j]);++M)j+=g,T+=v;if(0===tr){if(w!==Q)for(S=c*w,E=c*Q,U=u,M=0;M<p;++M)k=E+U,y=l[T=S+U],l[T]=l[k],l[k]=y,U+=d;++Q}else{for(T=u+w*c,j=0,M=0;M<p&&0==(tn=l[T]-to[j]);++M)j+=g,T+=v;if(0===tn)for(;;){for(T=u+tt*c,j=0,M=0;M<p&&0==(ti=l[T]-to[j]);++M)j+=g,T+=v;if(0!==ti){for(T=u+tt*c,j=0,M=0;M<p&&0==(ti=l[T]-ta[j]);++M)j+=g,T+=v;if(ti<0){for(S=c*w,E=c*Q,L=c*tt,U=u,M=0;M<p;++M)k=E+U,A=L+U,y=l[T=S+U],l[T]=l[k],l[k]=l[A],l[A]=y,U+=d;++Q,--tt}else{for(S=c*w,E=c*tt,U=u,M=0;M<p;++M)k=E+U,y=l[T=S+U],l[T]=l[k],l[k]=y,U+=d;--tt}break}if(--tt<w)break}}}}i(ta),i(to),tt-Q<=32?r(Q,tt,l,u,c,f,h,p,d,v,g):a(Q,tt,l,u,c,f,h,p,d,v,g)}}},u={"uint32,1,0":function(r,n){return function(i){var a=i.data,o=0|i.offset,s=i.shape,l=i.stride,u=0|l[0],c=0|s[0],f=0|l[1],h=0|s[1];c<=32?r(0,c-1,a,o,u,f,c,h,f,f,1):n(0,c-1,a,o,u,f,c,h,f,f,1)}}};r.exports=function(r,n){var i,a,c,f,h=u[[n,r].join(",")],p=(i=o(n),a=s[[n,r].join(",")],i?a(i[0],i[1]):a()),d=(c=o(n),f=l[[n,r].join(",")],r.length>1&&c?f(p,c[0],c[1]):f(p));return h(p,d)}},8729:function(r,n,i){"use strict";var a=i(8139),o={};r.exports=function(r){var n=r.order,i=r.dtype,s=[n,i].join(":"),l=o[s];return l||(o[s]=l=a(n,i)),l(r),r}},5050:function(r,n,i){var a=i(4780),o="undefined"!=typeof Float64Array;function s(r,n){return r[0]-n[0]}function l(){var r,n=this.stride,i=Array(n.length);for(r=0;r<i.length;++r)i[r]=[Math.abs(n[r]),r];i.sort(s);var a=Array(i.length);for(r=0;r<a.length;++r)a[r]=i[r][1];return a}var u={T:function(r){function n(r){this.data=r}var i=n.prototype;return i.dtype=r,i.index=function(){return -1},i.size=0,i.dimension=-1,i.shape=i.stride=i.order=[],i.lo=i.hi=i.transpose=i.step=function(){return new n(this.data)},i.get=i.set=function(){},i.pick=function(){return null},function(r){return new n(r)}},0:function(r,n){function i(r,n){this.data=r,this.offset=n}var a=i.prototype;return a.dtype=r,a.index=function(){return this.offset},a.dimension=0,a.size=1,a.shape=a.stride=a.order=[],a.lo=a.hi=a.transpose=a.step=function(){return new i(this.data,this.offset)},a.pick=function(){return n(this.data)},a.valueOf=a.get=function(){return"generic"===r?this.data.get(this.offset):this.data[this.offset]},a.set=function(n){return"generic"===r?this.data.set(this.offset,n):this.data[this.offset]=n},function(r,n,a,o){return new i(r,o)}},1:function(r,n,i){function a(r,n,i,a){this.data=r,this.shape=[n],this.stride=[i],this.offset=0|a}var o=a.prototype;return o.dtype=r,o.dimension=1,Object.defineProperty(o,"size",{get:function(){return this.shape[0]}}),o.order=[0],o.set=function(n,i){return"generic"===r?this.data.set(this.offset+this.stride[0]*n,i):this.data[this.offset+this.stride[0]*n]=i},o.get=function(n){return"generic"===r?this.data.get(this.offset+this.stride[0]*n):this.data[this.offset+this.stride[0]*n]},o.index=function(r){return this.offset+this.stride[0]*r},o.hi=function(r){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,this.stride[0],this.offset)},o.lo=function(r){var n=this.offset,i=0,o=this.shape[0],s=this.stride[0];return"number"==typeof r&&r>=0&&(n+=s*(i=0|r),o-=i),new a(this.data,o,s,n)},o.step=function(r){var n=this.shape[0],i=this.stride[0],o=this.offset,s=0,l=Math.ceil;return"number"==typeof r&&((s=0|r)<0?(o+=i*(n-1),n=l(-n/s)):n=l(n/s),i*=s),new a(this.data,n,i,o)},o.transpose=function(r){r=void 0===r?0:0|r;var n=this.shape,i=this.stride;return new a(this.data,n[r],i[r],this.offset)},o.pick=function(r){var i=[],a=[],o=this.offset;return"number"==typeof r&&r>=0?o=o+this.stride[0]*r|0:(i.push(this.shape[0]),a.push(this.stride[0])),(0,n[i.length+1])(this.data,i,a,o)},function(r,n,i,o){return new a(r,n[0],i[0],o)}},2:function(r,n,i){function a(r,n,i,a,o,s){this.data=r,this.shape=[n,i],this.stride=[a,o],this.offset=0|s}var o=a.prototype;return o.dtype=r,o.dimension=2,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(o,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),o.set=function(n,i,a){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i,a):this.data[this.offset+this.stride[0]*n+this.stride[1]*i]=a},o.get=function(n,i){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i):this.data[this.offset+this.stride[0]*n+this.stride[1]*i]},o.index=function(r,n){return this.offset+this.stride[0]*r+this.stride[1]*n},o.hi=function(r,n){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,this.stride[0],this.stride[1],this.offset)},o.lo=function(r,n){var i=this.offset,o=0,s=this.shape[0],l=this.shape[1],u=this.stride[0],c=this.stride[1];return"number"==typeof r&&r>=0&&(i+=u*(o=0|r),s-=o),"number"==typeof n&&n>=0&&(i+=c*(o=0|n),l-=o),new a(this.data,s,l,u,c,i)},o.step=function(r,n){var i=this.shape[0],o=this.shape[1],s=this.stride[0],l=this.stride[1],u=this.offset,c=0,f=Math.ceil;return"number"==typeof r&&((c=0|r)<0?(u+=s*(i-1),i=f(-i/c)):i=f(i/c),s*=c),"number"==typeof n&&((c=0|n)<0?(u+=l*(o-1),o=f(-o/c)):o=f(o/c),l*=c),new a(this.data,i,o,s,l,u)},o.transpose=function(r,n){r=void 0===r?0:0|r,n=void 0===n?1:0|n;var i=this.shape,o=this.stride;return new a(this.data,i[r],i[n],o[r],o[n],this.offset)},o.pick=function(r,i){var a=[],o=[],s=this.offset;return"number"==typeof r&&r>=0?s=s+this.stride[0]*r|0:(a.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof i&&i>=0?s=s+this.stride[1]*i|0:(a.push(this.shape[1]),o.push(this.stride[1])),(0,n[a.length+1])(this.data,a,o,s)},function(r,n,i,o){return new a(r,n[0],n[1],i[0],i[1],o)}},3:function(r,n,i){function a(r,n,i,a,o,s,l,u){this.data=r,this.shape=[n,i,a],this.stride=[o,s,l],this.offset=0|u}var o=a.prototype;return o.dtype=r,o.dimension=3,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(o,"order",{get:function(){var r=Math.abs(this.stride[0]),n=Math.abs(this.stride[1]),i=Math.abs(this.stride[2]);return r>n?n>i?[2,1,0]:r>i?[1,2,0]:[1,0,2]:r>i?[2,0,1]:i>n?[0,1,2]:[0,2,1]}}),o.set=function(n,i,a,o){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a,o):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a]=o},o.get=function(n,i,a){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a]},o.index=function(r,n,i){return this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*i},o.hi=function(r,n,i){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,"number"!=typeof i||i<0?this.shape[2]:0|i,this.stride[0],this.stride[1],this.stride[2],this.offset)},o.lo=function(r,n,i){var o=this.offset,s=0,l=this.shape[0],u=this.shape[1],c=this.shape[2],f=this.stride[0],h=this.stride[1],p=this.stride[2];return"number"==typeof r&&r>=0&&(o+=f*(s=0|r),l-=s),"number"==typeof n&&n>=0&&(o+=h*(s=0|n),u-=s),"number"==typeof i&&i>=0&&(o+=p*(s=0|i),c-=s),new a(this.data,l,u,c,f,h,p,o)},o.step=function(r,n,i){var o=this.shape[0],s=this.shape[1],l=this.shape[2],u=this.stride[0],c=this.stride[1],f=this.stride[2],h=this.offset,p=0,d=Math.ceil;return"number"==typeof r&&((p=0|r)<0?(h+=u*(o-1),o=d(-o/p)):o=d(o/p),u*=p),"number"==typeof n&&((p=0|n)<0?(h+=c*(s-1),s=d(-s/p)):s=d(s/p),c*=p),"number"==typeof i&&((p=0|i)<0?(h+=f*(l-1),l=d(-l/p)):l=d(l/p),f*=p),new a(this.data,o,s,l,u,c,f,h)},o.transpose=function(r,n,i){r=void 0===r?0:0|r,n=void 0===n?1:0|n,i=void 0===i?2:0|i;var o=this.shape,s=this.stride;return new a(this.data,o[r],o[n],o[i],s[r],s[n],s[i],this.offset)},o.pick=function(r,i,a){var o=[],s=[],l=this.offset;return"number"==typeof r&&r>=0?l=l+this.stride[0]*r|0:(o.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof i&&i>=0?l=l+this.stride[1]*i|0:(o.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof a&&a>=0?l=l+this.stride[2]*a|0:(o.push(this.shape[2]),s.push(this.stride[2])),(0,n[o.length+1])(this.data,o,s,l)},function(r,n,i,o){return new a(r,n[0],n[1],n[2],i[0],i[1],i[2],o)}},4:function(r,n,i){function a(r,n,i,a,o,s,l,u,c,f){this.data=r,this.shape=[n,i,a,o],this.stride=[s,l,u,c],this.offset=0|f}var o=a.prototype;return o.dtype=r,o.dimension=4,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(o,"order",{get:i}),o.set=function(n,i,a,o,s){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o,s):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o]=s},o.get=function(n,i,a,o){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o]},o.index=function(r,n,i,a){return this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*i+this.stride[3]*a},o.hi=function(r,n,i,o){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,"number"!=typeof i||i<0?this.shape[2]:0|i,"number"!=typeof o||o<0?this.shape[3]:0|o,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},o.lo=function(r,n,i,o){var s=this.offset,l=0,u=this.shape[0],c=this.shape[1],f=this.shape[2],h=this.shape[3],p=this.stride[0],d=this.stride[1],v=this.stride[2],g=this.stride[3];return"number"==typeof r&&r>=0&&(s+=p*(l=0|r),u-=l),"number"==typeof n&&n>=0&&(s+=d*(l=0|n),c-=l),"number"==typeof i&&i>=0&&(s+=v*(l=0|i),f-=l),"number"==typeof o&&o>=0&&(s+=g*(l=0|o),h-=l),new a(this.data,u,c,f,h,p,d,v,g,s)},o.step=function(r,n,i,o){var s=this.shape[0],l=this.shape[1],u=this.shape[2],c=this.shape[3],f=this.stride[0],h=this.stride[1],p=this.stride[2],d=this.stride[3],v=this.offset,g=0,y=Math.ceil;return"number"==typeof r&&((g=0|r)<0?(v+=f*(s-1),s=y(-s/g)):s=y(s/g),f*=g),"number"==typeof n&&((g=0|n)<0?(v+=h*(l-1),l=y(-l/g)):l=y(l/g),h*=g),"number"==typeof i&&((g=0|i)<0?(v+=p*(u-1),u=y(-u/g)):u=y(u/g),p*=g),"number"==typeof o&&((g=0|o)<0?(v+=d*(c-1),c=y(-c/g)):c=y(c/g),d*=g),new a(this.data,s,l,u,c,f,h,p,d,v)},o.transpose=function(r,n,i,o){r=void 0===r?0:0|r,n=void 0===n?1:0|n,i=void 0===i?2:0|i,o=void 0===o?3:0|o;var s=this.shape,l=this.stride;return new a(this.data,s[r],s[n],s[i],s[o],l[r],l[n],l[i],l[o],this.offset)},o.pick=function(r,i,a,o){var s=[],l=[],u=this.offset;return"number"==typeof r&&r>=0?u=u+this.stride[0]*r|0:(s.push(this.shape[0]),l.push(this.stride[0])),"number"==typeof i&&i>=0?u=u+this.stride[1]*i|0:(s.push(this.shape[1]),l.push(this.stride[1])),"number"==typeof a&&a>=0?u=u+this.stride[2]*a|0:(s.push(this.shape[2]),l.push(this.stride[2])),"number"==typeof o&&o>=0?u=u+this.stride[3]*o|0:(s.push(this.shape[3]),l.push(this.stride[3])),(0,n[s.length+1])(this.data,s,l,u)},function(r,n,i,o){return new a(r,n[0],n[1],n[2],n[3],i[0],i[1],i[2],i[3],o)}},5:function(r,n,i){function a(r,n,i,a,o,s,l,u,c,f,h,p){this.data=r,this.shape=[n,i,a,o,s],this.stride=[l,u,c,f,h],this.offset=0|p}var o=a.prototype;return o.dtype=r,o.dimension=5,Object.defineProperty(o,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(o,"order",{get:i}),o.set=function(n,i,a,o,s,l){return"generic"===r?this.data.set(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s,l):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s]=l},o.get=function(n,i,a,o,s){return"generic"===r?this.data.get(this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s):this.data[this.offset+this.stride[0]*n+this.stride[1]*i+this.stride[2]*a+this.stride[3]*o+this.stride[4]*s]},o.index=function(r,n,i,a,o){return this.offset+this.stride[0]*r+this.stride[1]*n+this.stride[2]*i+this.stride[3]*a+this.stride[4]*o},o.hi=function(r,n,i,o,s){return new a(this.data,"number"!=typeof r||r<0?this.shape[0]:0|r,"number"!=typeof n||n<0?this.shape[1]:0|n,"number"!=typeof i||i<0?this.shape[2]:0|i,"number"!=typeof o||o<0?this.shape[3]:0|o,"number"!=typeof s||s<0?this.shape[4]:0|s,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},o.lo=function(r,n,i,o,s){var l=this.offset,u=0,c=this.shape[0],f=this.shape[1],h=this.shape[2],p=this.shape[3],d=this.shape[4],v=this.stride[0],g=this.stride[1],y=this.stride[2],m=this.stride[3],x=this.stride[4];return"number"==typeof r&&r>=0&&(l+=v*(u=0|r),c-=u),"number"==typeof n&&n>=0&&(l+=g*(u=0|n),f-=u),"number"==typeof i&&i>=0&&(l+=y*(u=0|i),h-=u),"number"==typeof o&&o>=0&&(l+=m*(u=0|o),p-=u),"number"==typeof s&&s>=0&&(l+=x*(u=0|s),d-=u),new a(this.data,c,f,h,p,d,v,g,y,m,x,l)},o.step=function(r,n,i,o,s){var l=this.shape[0],u=this.shape[1],c=this.shape[2],f=this.shape[3],h=this.shape[4],p=this.stride[0],d=this.stride[1],v=this.stride[2],g=this.stride[3],y=this.stride[4],m=this.offset,x=0,b=Math.ceil;return"number"==typeof r&&((x=0|r)<0?(m+=p*(l-1),l=b(-l/x)):l=b(l/x),p*=x),"number"==typeof n&&((x=0|n)<0?(m+=d*(u-1),u=b(-u/x)):u=b(u/x),d*=x),"number"==typeof i&&((x=0|i)<0?(m+=v*(c-1),c=b(-c/x)):c=b(c/x),v*=x),"number"==typeof o&&((x=0|o)<0?(m+=g*(f-1),f=b(-f/x)):f=b(f/x),g*=x),"number"==typeof s&&((x=0|s)<0?(m+=y*(h-1),h=b(-h/x)):h=b(h/x),y*=x),new a(this.data,l,u,c,f,h,p,d,v,g,y,m)},o.transpose=function(r,n,i,o,s){r=void 0===r?0:0|r,n=void 0===n?1:0|n,i=void 0===i?2:0|i,o=void 0===o?3:0|o,s=void 0===s?4:0|s;var l=this.shape,u=this.stride;return new a(this.data,l[r],l[n],l[i],l[o],l[s],u[r],u[n],u[i],u[o],u[s],this.offset)},o.pick=function(r,i,a,o,s){var l=[],u=[],c=this.offset;return"number"==typeof r&&r>=0?c=c+this.stride[0]*r|0:(l.push(this.shape[0]),u.push(this.stride[0])),"number"==typeof i&&i>=0?c=c+this.stride[1]*i|0:(l.push(this.shape[1]),u.push(this.stride[1])),"number"==typeof a&&a>=0?c=c+this.stride[2]*a|0:(l.push(this.shape[2]),u.push(this.stride[2])),"number"==typeof o&&o>=0?c=c+this.stride[3]*o|0:(l.push(this.shape[3]),u.push(this.stride[3])),"number"==typeof s&&s>=0?c=c+this.stride[4]*s|0:(l.push(this.shape[4]),u.push(this.stride[4])),(0,n[l.length+1])(this.data,l,u,c)},function(r,n,i,o){return new a(r,n[0],n[1],n[2],n[3],n[4],i[0],i[1],i[2],i[3],i[4],o)}}},c={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};r.exports=function(r,n,i,s){if(void 0===r)return(0,c.array[0])([]);"number"==typeof r&&(r=[r]),void 0===n&&(n=[r.length]);var f=n.length;if(void 0===i){i=Array(f);for(var h=f-1,p=1;h>=0;--h)i[h]=p,p*=n[h]}if(void 0===s)for(s=0,h=0;h<f;++h)i[h]<0&&(s-=(n[h]-1)*i[h]);for(var d=function(r){if(a(r))return"buffer";if(o)switch(Object.prototype.toString.call(r)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(r)?"array":"generic"}(r),v=c[d];v.length<=f+1;)v.push(function(r,n){var i=u[-1===n?"T":String(n)];return -1===n?i(r):0===n?i(r,c[r][0]):i(r,c[r],l)}(d,v.length-1));return(0,v[f+1])(r,n,i,s)}},8551:function(r,n,i){"use strict";var a=i(8362);r.exports=function(r,n){if(isNaN(r)||isNaN(n))return NaN;if(r===n)return r;if(0===r)return n<0?-.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005:5e-324;var i=a.hi(r),o=a.lo(r);return n>r==r>0?4294967295===o?(i+=1,o=0):o+=1:0===o?(o=4294967295,i-=1):o-=1,a.pack(o,i)}},115:function(r,n){n.vertexNormals=function(r,n,i){for(var a=n.length,o=Array(a),s=void 0===i?1e-6:i,l=0;l<a;++l)o[l]=[0,0,0];for(l=0;l<r.length;++l)for(var u=r[l],c=0,f=u[u.length-1],h=u[0],p=0;p<u.length;++p){c=f,f=h,h=u[(p+1)%u.length];for(var d=n[c],v=n[f],g=n[h],y=[,,,],m=0,x=[,,,],b=0,_=0;_<3;++_)y[_]=d[_]-v[_],m+=y[_]*y[_],x[_]=g[_]-v[_],b+=x[_]*x[_];if(m*b>s){var w=o[f],T=1/Math.sqrt(m*b);for(_=0;_<3;++_){var k=(_+1)%3,A=(_+2)%3;w[_]+=T*(x[k]*y[A]-x[A]*y[k])}}}for(l=0;l<a;++l){w=o[l];var M=0;for(_=0;_<3;++_)M+=w[_]*w[_];if(M>s)for(T=1/Math.sqrt(M),_=0;_<3;++_)w[_]*=T;else for(_=0;_<3;++_)w[_]=0}return o},n.faceNormals=function(r,n,i){for(var a=r.length,o=Array(a),s=void 0===i?1e-6:i,l=0;l<a;++l){for(var u=r[l],c=[,,,],f=0;f<3;++f)c[f]=n[u[f]];var h=[,,,],p=[,,,];for(f=0;f<3;++f)h[f]=c[1][f]-c[0][f],p[f]=c[2][f]-c[0][f];var d=[,,,],v=0;for(f=0;f<3;++f){var g=(f+1)%3,y=(f+2)%3;d[f]=h[g]*p[y]-h[y]*p[g],v+=d[f]*d[f]}for(v=v>s?1/Math.sqrt(v):0,f=0;f<3;++f)d[f]*=v;o[l]=d}return o}},567:function(r){"use strict";r.exports=function(r,n,i,a,o,s,l,u,c,f){var h=n+s+f;if(p>0){var p=Math.sqrt(h+1);r[0]=.5*(l-c)/p,r[1]=.5*(u-a)/p,r[2]=.5*(i-s)/p,r[3]=.5*p}else{var d=Math.max(n,s,f);p=Math.sqrt(2*d-h+1),n>=d?(r[0]=.5*p,r[1]=.5*(o+i)/p,r[2]=.5*(u+a)/p,r[3]=.5*(l-c)/p):s>=d?(r[0]=.5*(i+o)/p,r[1]=.5*p,r[2]=.5*(c+l)/p,r[3]=.5*(u-a)/p):(r[0]=.5*(a+u)/p,r[1]=.5*(l+c)/p,r[2]=.5*p,r[3]=.5*(i-o)/p)}return r}},7774:function(r,n,i){"use strict";r.exports=function(r){var n=(r=r||{}).center||[0,0,0],i=r.rotation||[0,0,0,1],a=r.radius||1;n=[].slice.call(n,0,3),h(i=[].slice.call(i,0,4),i);var o=new p(i,n,Math.log(a));return o.setDistanceLimits(r.zoomMin,r.zoomMax),("eye"in r||"up"in r)&&o.lookAt(0,r.eye,r.center,r.up),o};var a=i(8444),o=i(3012),s=i(5950),l=i(7437),u=i(567);function c(r,n,i){return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2))}function f(r,n,i,a){return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2)+Math.pow(a,2))}function h(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=f(i,a,o,s);l>1e-6?(r[0]=i/l,r[1]=a/l,r[2]=o/l,r[3]=s/l):(r[0]=r[1]=r[2]=0,r[3]=1)}function p(r,n,i){this.radius=a([i]),this.center=a(n),this.rotation=a(r),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=p.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(r){this.radius.curve(r),this.center.curve(r),this.rotation.curve(r);var n=this.computedRotation;h(n,n);var i=this.computedMatrix;s(i,n);var a=this.computedCenter,o=this.computedEye,l=this.computedUp,u=Math.exp(this.computedRadius[0]);o[0]=a[0]+u*i[2],o[1]=a[1]+u*i[6],o[2]=a[2]+u*i[10],l[0]=i[1],l[1]=i[5],l[2]=i[9];for(var c=0;c<3;++c){for(var f=0,p=0;p<3;++p)f+=i[c+4*p]*o[p];i[12+c]=-f}},d.getMatrix=function(r,n){this.recalcMatrix(r);var i=this.computedMatrix;if(n){for(var a=0;a<16;++a)n[a]=i[a];return n}return i},d.idle=function(r){this.center.idle(r),this.radius.idle(r),this.rotation.idle(r)},d.flush=function(r){this.center.flush(r),this.radius.flush(r),this.rotation.flush(r)},d.pan=function(r,n,i,a){n=n||0,i=i||0,a=a||0,this.recalcMatrix(r);var o=this.computedMatrix,s=o[1],l=o[5],u=o[9],f=c(s,l,u);s/=f,l/=f,u/=f;var h=o[0],p=o[4],d=o[8],v=h*s+p*l+d*u,g=c(h-=s*v,p-=l*v,d-=u*v);h/=g,p/=g,d/=g;var y=o[2],m=o[6],x=o[10],b=y*s+m*l+x*u,_=y*h+m*p+x*d,w=c(y-=b*s+_*h,m-=b*l+_*p,x-=b*u+_*d);y/=w,m/=w,x/=w;var T=h*n+s*i,k=p*n+l*i,A=d*n+u*i;this.center.move(r,T,k,A);var M=Math.exp(this.computedRadius[0]);M=Math.max(1e-4,M+a),this.radius.set(r,Math.log(M))},d.rotate=function(r,n,i,a){this.recalcMatrix(r),n=n||0,i=i||0;var o=this.computedMatrix,s=o[0],l=o[4],u=o[8],h=o[1],p=o[5],d=o[9],v=o[2],g=o[6],y=o[10],m=n*s+i*h,x=n*l+i*p,b=n*u+i*d,_=-(g*b-y*x),w=-(y*m-v*b),T=-(v*x-g*m),k=Math.sqrt(Math.max(0,1-Math.pow(_,2)-Math.pow(w,2)-Math.pow(T,2))),A=f(_,w,T,k);A>1e-6?(_/=A,w/=A,T/=A,k/=A):(_=w=T=0,k=1);var M=this.computedRotation,S=M[0],E=M[1],L=M[2],C=M[3],O=S*k+C*_+E*T-L*w,P=E*k+C*w+L*_-S*T,I=L*k+C*T+S*w-E*_,D=C*k-S*_-E*w-L*T;if(a){var z=Math.sin(a)/c(_=v,w=g,T=y);_*=z,w*=z,T*=z,D=D*(k=Math.cos(n))-(O=O*k+D*_+P*T-I*w)*_-(P=P*k+D*w+I*_-O*T)*w-(I=I*k+D*T+O*w-P*_)*T}var R=f(O,P,I,D);R>1e-6?(O/=R,P/=R,I/=R,D/=R):(O=P=I=0,D=1),this.rotation.set(r,O,P,I,D)},d.lookAt=function(r,n,i,a){this.recalcMatrix(r),i=i||this.computedCenter,n=n||this.computedEye,a=a||this.computedUp;var s=this.computedMatrix;o(s,n,i,a);var l=this.computedRotation;u(l,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),h(l,l),this.rotation.set(r,l[0],l[1],l[2],l[3]);for(var c=0,f=0;f<3;++f)c+=Math.pow(i[f]-n[f],2);this.radius.set(r,.5*Math.log(Math.max(c,1e-6))),this.center.set(r,i[0],i[1],i[2])},d.translate=function(r,n,i,a){this.center.move(r,n||0,i||0,a||0)},d.setMatrix=function(r,n){var i=this.computedRotation;u(i,n[0],n[1],n[2],n[4],n[5],n[6],n[8],n[9],n[10]),h(i,i),this.rotation.set(r,i[0],i[1],i[2],i[3]);var a=this.computedMatrix;l(a,n);var o=a[15];if(Math.abs(o)>1e-6){var s=a[12]/o,c=a[13]/o,f=a[14]/o;this.recalcMatrix(r);var p=Math.exp(this.computedRadius[0]);this.center.set(r,s-a[2]*p,c-a[6]*p,f-a[10]*p),this.radius.idle(r)}else this.center.idle(r),this.radius.idle(r)},d.setDistance=function(r,n){n>0&&this.radius.set(r,Math.log(n))},d.setDistanceLimits=function(r,n){r=r>0?Math.log(r):-1/0,n=Math.max(n=n>0?Math.log(n):1/0,r),this.radius.bounds[0][0]=r,this.radius.bounds[1][0]=n},d.getDistanceLimits=function(r){var n=this.radius.bounds;return r?(r[0]=Math.exp(n[0][0]),r[1]=Math.exp(n[1][0]),r):[Math.exp(n[0][0]),Math.exp(n[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(r){var n=this.lastT(),i=r.center;i&&this.center.set(n,i[0],i[1],i[2]);var a=r.rotation;a&&this.rotation.set(n,a[0],a[1],a[2],a[3]);var o=r.distance;o&&o>0&&this.radius.set(n,Math.log(o)),this.setDistanceLimits(r.zoomMin,r.zoomMax)}},4930:function(r,n,i){"use strict";var a=i(6184);r.exports=function(r,n,i){return a(i=void 0!==i?i+"":" ",n)+r}},4405:function(r){r.exports=function(r,n){n||(n=[0,""]);var i=parseFloat(r=String(r),10);return n[0]=i,n[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},4166:function(r,n,i){"use strict";r.exports=function(r,n){for(var i=0|n.length,o=r.length,s=[Array(i),Array(i)],l=0;l<i;++l)s[0][l]=[],s[1][l]=[];for(l=0;l<o;++l){var u=r[l];s[0][u[0]].push(u),s[1][u[1]].push(u)}var c=[];for(l=0;l<i;++l)s[0][l].length+s[1][l].length===0&&c.push([l]);function f(r,n){var i=s[n][r[n]];i.splice(i.indexOf(r),1)}function h(r,i,o){for(var l,u,c,h=0;h<2;++h)if(s[h][i].length>0){l=s[h][i][0],c=h;break}u=l[1^c];for(var p=0;p<2;++p)for(var d=s[p][i],v=0;v<d.length;++v){var g=d[v],y=g[1^p];a(n[r],n[i],n[u],n[y])>0&&(l=g,u=y,c=p)}return o||l&&f(l,c),u}for(l=0;l<i;++l)for(var p=0;p<2;++p){for(var d=[];s[p][l].length>0;){s[0][l].length;var v=function(r,i){var o=s[i][r][0],l=[r];f(o,i);for(var u=o[1^i];;){for(;u!==r;)l.push(u),u=h(l[l.length-2],u,!1);if(s[0][r].length+s[1][r].length===0)break;var c=l[l.length-1],p=l[1],d=h(c,r,!0);if(0>a(n[c],n[r],n[p],n[d]))break;l.push(r),u=h(c,r)}return l}(l,p);v[1]===v[v.length-1]?d.push.apply(d,v):(d.length>0&&c.push(d),d=v)}d.length>0&&c.push(d)}return c};var a=i(9398)},3959:function(r,n,i){"use strict";r.exports=function(r,n){for(var i=a(r,n.length),o=Array(n.length),s=Array(n.length),l=[],u=0;u<n.length;++u){var c=i[u].length;s[u]=c,o[u]=!0,c<=1&&l.push(u)}for(;l.length>0;){o[v=l.pop()]=!1;var f=i[v];for(u=0;u<f.length;++u){var h=f[u];0==--s[h]&&l.push(h)}}var p=Array(n.length),d=[];for(u=0;u<n.length;++u)if(o[u]){var v=d.length;p[u]=v,d.push(n[u])}else p[u]=-1;var g=[];for(u=0;u<r.length;++u){var y=r[u];o[y[0]]&&o[y[1]]&&g.push([p[y[0]],p[y[1]]])}return[g,d]};var a=i(8348)},8040:function(r,n,i){"use strict";r.exports=function(r,n){var i=f(r,n);r=i[0];for(var p=(n=i[1]).length,d=(r.length,a(r,n.length)),v=0;v<p;++v)if(d[v].length%2==1)throw Error("planar-graph-to-polyline: graph must be manifold");var g=o(r,n),y=(g=g.filter(function(r){for(var i=r.length,a=[0],o=0;o<i;++o){var s=n[r[o]],c=n[r[(o+1)%i]],f=l(-s[0],s[1]),h=l(-s[0],c[1]),p=l(c[0],s[1]),d=l(c[0],c[1]);a=u(a,u(u(f,h),u(p,d)))}return a[a.length-1]>0})).length,m=Array(y),x=Array(y);for(v=0;v<y;++v){m[v]=v;var b=Array(y),_=s([g[v].map(function(r){return n[r]})]),w=0;t:for(var T=0;T<y;++T)if(b[T]=0,v!==T){for(var k=(q=g[T]).length,A=0;A<k;++A){var M=_(n[q[A]]);if(0!==M){M<0&&(b[T]=1,w+=1);continue t}}b[T]=1,w+=1}x[v]=[w,v,b]}for(x.sort(function(r,n){return n[0]-r[0]}),v=0;v<y;++v){var S=(b=x[v])[1],E=b[2];for(T=0;T<y;++T)E[T]&&(m[T]=S)}var L=function(r){for(var n=Array(r),i=0;i<r;++i)n[i]=[];return n}(y);for(v=0;v<y;++v)L[v].push(m[v]),L[m[v]].push(v);var C={},O=h(p,!1);for(v=0;v<y;++v)for(k=(q=g[v]).length,T=0;T<k;++T){var P=q[T],I=q[(T+1)%k],D=Math.min(P,I)+":"+Math.max(P,I);if(D in C){var z=C[D];L[z].push(v),L[v].push(z),O[P]=O[I]=!0}else C[D]=v}function R(r){for(var n=r.length,i=0;i<n;++i)if(!O[r[i]])return!1;return!0}var F=[],B=h(y,-1);for(v=0;v<y;++v)m[v]!==v||R(g[v])?B[v]=-1:(F.push(v),B[v]=0);for(i=[];F.length>0;){var N=F.pop(),j=L[N];c(j,function(r,n){return r-n});var U,V=j.length,H=B[N];for(0===H&&(U=[q=g[N]]),v=0;v<V;++v){var q,G=j[v];B[G]>=0||(B[G]=1^H,F.push(G),0===H&&(R(q=g[G])||(q.reverse(),U.push(q))))}0===H&&i.push(U)}return i};var a=i(8348),o=i(4166),s=i(211),l=i(9660),u=i(9662),c=i(1215),f=i(3959);function h(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=n;return i}},211:function(r,n,i){r.exports=function(r){for(var n,i=r.length,s=[],u=[],h=0;h<i;++h)for(var p=r[h],d=p.length,v=d-1,g=0;g<d;v=g++){var y=p[v],m=p[g];y[0]===m[0]?u.push([y,m]):s.push([y,m])}if(0===s.length)return 0===u.length?f:(_=c(u),function(r){return _(r[0],r[1])?0:1});var x,b,_,w=o(s),T=(x=w.slabs,b=w.coordinates,function(r){var n=l.le(b,r[0]);if(n<0)return 1;var i=x[n];if(!i){if(!(n>0&&b[n]===r[0]))return 1;i=x[n-1]}for(var o=1;i;){var s=i.key,u=a(r,s[0],s[1]);if(s[0][0]<s[1][0]){if(u<0)i=i.left;else{if(!(u>0))return 0;o=-1,i=i.right}}else if(u>0)i=i.left;else{if(!(u<0))return 0;o=1,i=i.right}}return o});return 0===u.length?T:(n=c(u),function(r){return n(r[0],r[1])?0:T(r)})};var a=i(417)[3],o=i(4385),s=i(9014),l=i(5070);function u(){return!0}function c(r){for(var n={},i=0;i<r.length;++i){var a=r[i],o=a[0][0],l=a[0][1],c=a[1][1],f=[Math.min(l,c),Math.max(l,c)];o in n?n[o].push(f):n[o]=[f]}var h={},p=Object.keys(n);for(i=0;i<p.length;++i){var d=n[p[i]];h[p[i]]=s(d)}return function(r,n){var i=h[r];return!!i&&!!i.queryPoint(n,u)}}function f(r){return 1}},7309:function(r){"use strict";var n=new Float64Array(4),i=new Float64Array(4),a=new Float64Array(4);r.exports=function(r,o,s,l,u){n.length<l.length&&(n=new Float64Array(l.length),i=new Float64Array(l.length),a=new Float64Array(l.length));for(var c=0;c<l.length;++c)n[c]=r[c]-l[c],i[c]=o[c]-r[c],a[c]=s[c]-r[c];var f=0,h=0,p=0,d=0,v=0,g=0;for(c=0;c<l.length;++c){var y=i[c],m=a[c],x=n[c];f+=y*y,h+=y*m,p+=m*m,d+=x*y,v+=x*m,g+=x*x}var b,_,w,T,k,A=Math.abs(f*p-h*h),M=h*v-p*d,S=h*d-f*v;if(M+S<=A){if(M<0)S<0&&d<0?(S=0,-d>=f?(M=1,b=f+2*d+g):b=d*(M=-d/f)+g):(M=0,v>=0?(S=0,b=g):-v>=p?(S=1,b=p+2*v+g):b=v*(S=-v/p)+g);else if(S<0)S=0,d>=0?(M=0,b=g):-d>=f?(M=1,b=f+2*d+g):b=d*(M=-d/f)+g;else{var E=1/A;b=(M*=E)*(f*M+h*(S*=E)+2*d)+S*(h*M+p*S+2*v)+g}}else M<0?(w=p+v)>(_=h+d)?(T=w-_)>=(k=f-2*h+p)?(M=1,S=0,b=f+2*d+g):b=(M=T/k)*(f*M+h*(S=1-M)+2*d)+S*(h*M+p*S+2*v)+g:(M=0,w<=0?(S=1,b=p+2*v+g):v>=0?(S=0,b=g):b=v*(S=-v/p)+g):S<0?(w=f+d)>(_=h+v)?(T=w-_)>=(k=f-2*h+p)?(S=1,M=0,b=p+2*v+g):b=(M=1-(S=T/k))*(f*M+h*S+2*d)+S*(h*M+p*S+2*v)+g:(S=0,w<=0?(M=1,b=f+2*d+g):d>=0?(M=0,b=g):b=d*(M=-d/f)+g):(T=p+v-h-d)<=0?(M=0,S=1,b=p+2*v+g):T>=(k=f-2*h+p)?(M=1,S=0,b=f+2*d+g):b=(M=T/k)*(f*M+h*(S=1-M)+2*d)+S*(h*M+p*S+2*v)+g;var L=1-M-S;for(c=0;c<l.length;++c)u[c]=L*r[c]+M*o[c]+S*s[c];return b<0?0:b}},1116:function(r,n,i){r.exports=i(6093)},7584:function(r,n,i){"use strict";var a=i(1539);r.exports=function(r,n){for(var i=r.length,o=Array(i),s=0;s<i;++s)o[s]=a(r[s],n[s]);return o}},2826:function(r,n,i){"use strict";r.exports=function(r){for(var n=Array(r.length),i=0;i<r.length;++i)n[i]=a(r[i]);return n};var a=i(5125)},4469:function(r,n,i){"use strict";var a=i(5125),o=i(3962);r.exports=function(r,n){for(var i=a(n),s=r.length,l=Array(s),u=0;u<s;++u)l[u]=o(r[u],i);return l}},6695:function(r,n,i){"use strict";var a=i(4354);r.exports=function(r,n){for(var i=r.length,o=Array(i),s=0;s<i;++s)o[s]=a(r[s],n[s]);return o}},7037:function(r,n,i){"use strict";var a=i(9209),o=i(1284),s=i(9887);r.exports=function(r){r.sort(o);for(var n=r.length,i=0,l=0;l<n;++l){var u=r[l],c=s(u);if(0!==c){if(i>0){var f=r[i-1];if(0===a(u,f)&&s(f)!==c){i-=1;continue}}r[i++]=u}}return r.length=i,r}},6184:function(r){"use strict";var n,i="";r.exports=function(r,a){if("string"!=typeof r)throw TypeError("expected a string");if(1===a)return r;if(2===a)return r+r;var o=r.length*a;if(n!==r||void 0===n)n=r,i="";else if(i.length>=o)return i.substr(0,o);for(;o>i.length&&a>1;)1&a&&(i+=r),a>>=1,r+=r;return i=(i+=r).substr(0,o)}},8161:function(r,n,i){r.exports=i.g.performance&&i.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(r){"use strict";r.exports=function(r){for(var n,i,a=r.length,o=r[r.length-1],s=a,l=a-2;l>=0;--l){var u=o;(i=(n=r[l])-((o=u+n)-u))&&(r[--s]=o,o=i)}var c=0;for(l=s;l<a;++l)(i=(n=o)-((o=(u=r[l])+n)-u))&&(r[c++]=i);return r[c++]=o,r.length=c,r}},8167:function(r,n,i){"use strict";var a=i(9660),o=i(9662),s=i(8289),l=i(402);function u(r){return(2===r?function(r,n,i,a){return function(n){return a(r(i(n[0][0],n[1][1]),i(-n[0][1],n[1][0])))}}:3===r?function(r,n,i,a){return function(o){return a(r(n(r(i(o[1][1],o[2][2]),i(-o[1][2],o[2][1])),o[0][0]),r(n(r(i(o[1][0],o[2][2]),i(-o[1][2],o[2][0])),-o[0][1]),n(r(i(o[1][0],o[2][1]),i(-o[1][1],o[2][0])),o[0][2]))))}}:4===r?function(r,n,i,a){return function(o){return a(r(r(n(r(n(r(i(o[2][2],o[3][3]),i(-o[2][3],o[3][2])),o[1][1]),r(n(r(i(o[2][1],o[3][3]),i(-o[2][3],o[3][1])),-o[1][2]),n(r(i(o[2][1],o[3][2]),i(-o[2][2],o[3][1])),o[1][3]))),o[0][0]),n(r(n(r(i(o[2][2],o[3][3]),i(-o[2][3],o[3][2])),o[1][0]),r(n(r(i(o[2][0],o[3][3]),i(-o[2][3],o[3][0])),-o[1][2]),n(r(i(o[2][0],o[3][2]),i(-o[2][2],o[3][0])),o[1][3]))),-o[0][1])),r(n(r(n(r(i(o[2][1],o[3][3]),i(-o[2][3],o[3][1])),o[1][0]),r(n(r(i(o[2][0],o[3][3]),i(-o[2][3],o[3][0])),-o[1][1]),n(r(i(o[2][0],o[3][1]),i(-o[2][1],o[3][0])),o[1][3]))),o[0][2]),n(r(n(r(i(o[2][1],o[3][2]),i(-o[2][2],o[3][1])),o[1][0]),r(n(r(i(o[2][0],o[3][2]),i(-o[2][2],o[3][0])),-o[1][1]),n(r(i(o[2][0],o[3][1]),i(-o[2][1],o[3][0])),o[1][2]))),-o[0][3]))))}}:5===r?function(r,n,i,a){return function(o){return a(r(r(n(r(r(n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][2]),r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),-o[2][3]),n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][4]))),o[1][1]),n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][3]),n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][4]))),-o[1][2])),r(n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][4]))),o[1][3]),n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][3]))),-o[1][4]))),o[0][0]),n(r(r(n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][2]),r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),-o[2][3]),n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][4]))),o[1][0]),n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][3]),n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),o[2][4]))),-o[1][2])),r(n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][4]))),o[1][3]),n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][3]))),-o[1][4]))),-o[0][1])),r(n(r(r(n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][3]),n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][4]))),o[1][0]),n(r(n(r(i(o[3][3],o[4][4]),i(-o[3][4],o[4][3])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][3]),n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),o[2][4]))),-o[1][1])),r(n(r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][4]))),o[1][3]),n(r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][3]))),-o[1][4]))),o[0][2]),r(n(r(r(n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][4]))),o[1][0]),n(r(n(r(i(o[3][2],o[4][4]),i(-o[3][4],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][4]))),-o[1][1])),r(n(r(n(r(i(o[3][1],o[4][4]),i(-o[3][4],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][4]),i(-o[3][4],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][4]))),o[1][2]),n(r(n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][2]))),-o[1][4]))),-o[0][3]),n(r(r(n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][1]),r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),-o[2][2]),n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][3]))),o[1][0]),n(r(n(r(i(o[3][2],o[4][3]),i(-o[3][3],o[4][2])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][2]),n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),o[2][3]))),-o[1][1])),r(n(r(n(r(i(o[3][1],o[4][3]),i(-o[3][3],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][3]),i(-o[3][3],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][3]))),o[1][2]),n(r(n(r(i(o[3][1],o[4][2]),i(-o[3][2],o[4][1])),o[2][0]),r(n(r(i(o[3][0],o[4][2]),i(-o[3][2],o[4][0])),-o[2][1]),n(r(i(o[3][0],o[4][1]),i(-o[3][1],o[4][0])),o[2][2]))),-o[1][3]))),o[0][4])))))}}:void 0)(o,s,a,l)}var c=[function(){return[0]},function(r){return[r[0][0]]}];function f(r,n,i,a,o,s,l,u){return function(c){switch(c.length){case 0:return r(c);case 1:return n(c);case 2:return i(c);case 3:return a(c);case 4:return o(c);case 5:return s(c)}var f=l[c.length];return f||(f=l[c.length]=u(c.length)),f(c)}}!function(){for(;c.length<6;)c.push(u(c.length));r.exports=f.apply(void 0,c.concat([c,u]));for(var n=0;n<c.length;++n)r.exports[n]=c[n]}()},9130:function(r,n,i){"use strict";var a=i(9660),o=i(9662);r.exports=function(r,n){for(var i=a(r[0],n[0]),s=1;s<r.length;++s)i=o(i,a(r[s],n[s]));return i}},2227:function(r,n,i){"use strict";var a=i(9660),o=i(9662),s=i(4078),l=i(8289);function u(r){return(3===r?function(r,n,i,a){return function(o,s,l){var u=i(o[0],o[0]),c=a(u,s[0]),f=a(u,l[0]),h=i(s[0],s[0]),p=a(h,o[0]),d=a(h,l[0]),v=i(l[0],l[0]),g=a(v,o[0]),y=r(n(a(v,s[0]),d),n(p,c)),m=n(g,f),x=n(y,m);return x[x.length-1]}}:4===r?function(r,n,i,a){return function(o,s,l,u){var c=r(i(o[0],o[0]),i(o[1],o[1])),f=a(c,s[0]),h=a(c,l[0]),p=a(c,u[0]),d=r(i(s[0],s[0]),i(s[1],s[1])),v=a(d,o[0]),g=a(d,l[0]),y=a(d,u[0]),m=r(i(l[0],l[0]),i(l[1],l[1])),x=a(m,o[0]),b=a(m,s[0]),_=a(m,u[0]),w=r(i(u[0],u[0]),i(u[1],u[1])),T=a(w,o[0]),k=a(w,s[0]),A=a(w,l[0]),M=r(r(a(n(A,_),s[1]),r(a(n(k,y),-l[1]),a(n(b,g),u[1]))),r(a(n(k,y),o[1]),r(a(n(T,p),-s[1]),a(n(v,f),u[1])))),S=r(r(a(n(A,_),o[1]),r(a(n(T,p),-l[1]),a(n(x,h),u[1]))),r(a(n(b,g),o[1]),r(a(n(x,h),-s[1]),a(n(v,f),l[1])))),E=n(M,S);return E[E.length-1]}}:5===r?function(r,n,i,a){return function(o,s,l,u,c){var f=r(i(o[0],o[0]),r(i(o[1],o[1]),i(o[2],o[2]))),h=a(f,s[0]),p=a(f,l[0]),d=a(f,u[0]),v=a(f,c[0]),g=r(i(s[0],s[0]),r(i(s[1],s[1]),i(s[2],s[2]))),y=a(g,o[0]),m=a(g,l[0]),x=a(g,u[0]),b=a(g,c[0]),_=r(i(l[0],l[0]),r(i(l[1],l[1]),i(l[2],l[2]))),w=a(_,o[0]),T=a(_,s[0]),k=a(_,u[0]),A=a(_,c[0]),M=r(i(u[0],u[0]),r(i(u[1],u[1]),i(u[2],u[2]))),S=a(M,o[0]),E=a(M,s[0]),L=a(M,l[0]),C=a(M,c[0]),O=r(i(c[0],c[0]),r(i(c[1],c[1]),i(c[2],c[2]))),P=a(O,o[0]),I=a(O,s[0]),D=a(O,l[0]),z=a(O,u[0]),R=r(r(r(a(r(a(n(z,C),l[1]),r(a(n(D,A),-u[1]),a(n(L,k),c[1]))),s[2]),r(a(r(a(n(z,C),s[1]),r(a(n(I,b),-u[1]),a(n(E,x),c[1]))),-l[2]),a(r(a(n(D,A),s[1]),r(a(n(I,b),-l[1]),a(n(T,m),c[1]))),u[2]))),r(a(r(a(n(L,k),s[1]),r(a(n(E,x),-l[1]),a(n(T,m),u[1]))),-c[2]),r(a(r(a(n(z,C),s[1]),r(a(n(I,b),-u[1]),a(n(E,x),c[1]))),o[2]),a(r(a(n(z,C),o[1]),r(a(n(P,v),-u[1]),a(n(S,d),c[1]))),-s[2])))),r(r(a(r(a(n(I,b),o[1]),r(a(n(P,v),-s[1]),a(n(y,h),c[1]))),u[2]),r(a(r(a(n(E,x),o[1]),r(a(n(S,d),-s[1]),a(n(y,h),u[1]))),-c[2]),a(r(a(n(L,k),s[1]),r(a(n(E,x),-l[1]),a(n(T,m),u[1]))),o[2]))),r(a(r(a(n(L,k),o[1]),r(a(n(S,d),-l[1]),a(n(w,p),u[1]))),-s[2]),r(a(r(a(n(E,x),o[1]),r(a(n(S,d),-s[1]),a(n(y,h),u[1]))),l[2]),a(r(a(n(T,m),o[1]),r(a(n(w,p),-s[1]),a(n(y,h),l[1]))),-u[2]))))),F=r(r(r(a(r(a(n(z,C),l[1]),r(a(n(D,A),-u[1]),a(n(L,k),c[1]))),o[2]),a(r(a(n(z,C),o[1]),r(a(n(P,v),-u[1]),a(n(S,d),c[1]))),-l[2])),r(a(r(a(n(D,A),o[1]),r(a(n(P,v),-l[1]),a(n(w,p),c[1]))),u[2]),a(r(a(n(L,k),o[1]),r(a(n(S,d),-l[1]),a(n(w,p),u[1]))),-c[2]))),r(r(a(r(a(n(D,A),s[1]),r(a(n(I,b),-l[1]),a(n(T,m),c[1]))),o[2]),a(r(a(n(D,A),o[1]),r(a(n(P,v),-l[1]),a(n(w,p),c[1]))),-s[2])),r(a(r(a(n(I,b),o[1]),r(a(n(P,v),-s[1]),a(n(y,h),c[1]))),l[2]),a(r(a(n(T,m),o[1]),r(a(n(w,p),-s[1]),a(n(y,h),l[1]))),-c[2])))),B=n(R,F);return B[B.length-1]}}:function(r,n,i,a){return function(o,s,l,u,c,f){var h=r(r(i(o[0],o[0]),i(o[1],o[1])),r(i(o[2],o[2]),i(o[3],o[3]))),p=a(h,s[0]),d=a(h,l[0]),v=a(h,u[0]),g=a(h,c[0]),y=a(h,f[0]),m=r(r(i(s[0],s[0]),i(s[1],s[1])),r(i(s[2],s[2]),i(s[3],s[3]))),x=a(m,o[0]),b=a(m,l[0]),_=a(m,u[0]),w=a(m,c[0]),T=a(m,f[0]),k=r(r(i(l[0],l[0]),i(l[1],l[1])),r(i(l[2],l[2]),i(l[3],l[3]))),A=a(k,o[0]),M=a(k,s[0]),S=a(k,u[0]),E=a(k,c[0]),L=a(k,f[0]),C=r(r(i(u[0],u[0]),i(u[1],u[1])),r(i(u[2],u[2]),i(u[3],u[3]))),O=a(C,o[0]),P=a(C,s[0]),I=a(C,l[0]),D=a(C,c[0]),z=a(C,f[0]),R=r(r(i(c[0],c[0]),i(c[1],c[1])),r(i(c[2],c[2]),i(c[3],c[3]))),F=a(R,o[0]),B=a(R,s[0]),N=a(R,l[0]),j=a(R,u[0]),U=a(R,f[0]),V=r(r(i(f[0],f[0]),i(f[1],f[1])),r(i(f[2],f[2]),i(f[3],f[3]))),H=a(V,o[0]),q=a(V,s[0]),G=a(V,l[0]),Z=a(V,u[0]),Y=a(V,c[0]),W=r(r(r(a(r(r(a(r(a(n(Y,U),u[1]),r(a(n(Z,z),-c[1]),a(n(j,D),f[1]))),l[2]),a(r(a(n(Y,U),l[1]),r(a(n(G,L),-c[1]),a(n(N,E),f[1]))),-u[2])),r(a(r(a(n(Z,z),l[1]),r(a(n(G,L),-u[1]),a(n(I,S),f[1]))),c[2]),a(r(a(n(j,D),l[1]),r(a(n(N,E),-u[1]),a(n(I,S),c[1]))),-f[2]))),s[3]),r(a(r(r(a(r(a(n(Y,U),u[1]),r(a(n(Z,z),-c[1]),a(n(j,D),f[1]))),s[2]),a(r(a(n(Y,U),s[1]),r(a(n(q,T),-c[1]),a(n(B,w),f[1]))),-u[2])),r(a(r(a(n(Z,z),s[1]),r(a(n(q,T),-u[1]),a(n(P,_),f[1]))),c[2]),a(r(a(n(j,D),s[1]),r(a(n(B,w),-u[1]),a(n(P,_),c[1]))),-f[2]))),-l[3]),a(r(r(a(r(a(n(Y,U),l[1]),r(a(n(G,L),-c[1]),a(n(N,E),f[1]))),s[2]),a(r(a(n(Y,U),s[1]),r(a(n(q,T),-c[1]),a(n(B,w),f[1]))),-l[2])),r(a(r(a(n(G,L),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),c[2]),a(r(a(n(N,E),s[1]),r(a(n(B,w),-l[1]),a(n(M,b),c[1]))),-f[2]))),u[3]))),r(r(a(r(r(a(r(a(n(Z,z),l[1]),r(a(n(G,L),-u[1]),a(n(I,S),f[1]))),s[2]),a(r(a(n(Z,z),s[1]),r(a(n(q,T),-u[1]),a(n(P,_),f[1]))),-l[2])),r(a(r(a(n(G,L),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),u[2]),a(r(a(n(I,S),s[1]),r(a(n(P,_),-l[1]),a(n(M,b),u[1]))),-f[2]))),-c[3]),a(r(r(a(r(a(n(j,D),l[1]),r(a(n(N,E),-u[1]),a(n(I,S),c[1]))),s[2]),a(r(a(n(j,D),s[1]),r(a(n(B,w),-u[1]),a(n(P,_),c[1]))),-l[2])),r(a(r(a(n(N,E),s[1]),r(a(n(B,w),-l[1]),a(n(M,b),c[1]))),u[2]),a(r(a(n(I,S),s[1]),r(a(n(P,_),-l[1]),a(n(M,b),u[1]))),-c[2]))),f[3])),r(a(r(r(a(r(a(n(Y,U),u[1]),r(a(n(Z,z),-c[1]),a(n(j,D),f[1]))),s[2]),a(r(a(n(Y,U),s[1]),r(a(n(q,T),-c[1]),a(n(B,w),f[1]))),-u[2])),r(a(r(a(n(Z,z),s[1]),r(a(n(q,T),-u[1]),a(n(P,_),f[1]))),c[2]),a(r(a(n(j,D),s[1]),r(a(n(B,w),-u[1]),a(n(P,_),c[1]))),-f[2]))),o[3]),a(r(r(a(r(a(n(Y,U),u[1]),r(a(n(Z,z),-c[1]),a(n(j,D),f[1]))),o[2]),a(r(a(n(Y,U),o[1]),r(a(n(H,y),-c[1]),a(n(F,g),f[1]))),-u[2])),r(a(r(a(n(Z,z),o[1]),r(a(n(H,y),-u[1]),a(n(O,v),f[1]))),c[2]),a(r(a(n(j,D),o[1]),r(a(n(F,g),-u[1]),a(n(O,v),c[1]))),-f[2]))),-s[3])))),r(r(r(a(r(r(a(r(a(n(Y,U),s[1]),r(a(n(q,T),-c[1]),a(n(B,w),f[1]))),o[2]),a(r(a(n(Y,U),o[1]),r(a(n(H,y),-c[1]),a(n(F,g),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,y),-s[1]),a(n(x,p),f[1]))),c[2]),a(r(a(n(B,w),o[1]),r(a(n(F,g),-s[1]),a(n(x,p),c[1]))),-f[2]))),u[3]),a(r(r(a(r(a(n(Z,z),s[1]),r(a(n(q,T),-u[1]),a(n(P,_),f[1]))),o[2]),a(r(a(n(Z,z),o[1]),r(a(n(H,y),-u[1]),a(n(O,v),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,y),-s[1]),a(n(x,p),f[1]))),u[2]),a(r(a(n(P,_),o[1]),r(a(n(O,v),-s[1]),a(n(x,p),u[1]))),-f[2]))),-c[3])),r(a(r(r(a(r(a(n(j,D),s[1]),r(a(n(B,w),-u[1]),a(n(P,_),c[1]))),o[2]),a(r(a(n(j,D),o[1]),r(a(n(F,g),-u[1]),a(n(O,v),c[1]))),-s[2])),r(a(r(a(n(B,w),o[1]),r(a(n(F,g),-s[1]),a(n(x,p),c[1]))),u[2]),a(r(a(n(P,_),o[1]),r(a(n(O,v),-s[1]),a(n(x,p),u[1]))),-c[2]))),f[3]),a(r(r(a(r(a(n(Z,z),l[1]),r(a(n(G,L),-u[1]),a(n(I,S),f[1]))),s[2]),a(r(a(n(Z,z),s[1]),r(a(n(q,T),-u[1]),a(n(P,_),f[1]))),-l[2])),r(a(r(a(n(G,L),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),u[2]),a(r(a(n(I,S),s[1]),r(a(n(P,_),-l[1]),a(n(M,b),u[1]))),-f[2]))),o[3]))),r(r(a(r(r(a(r(a(n(Z,z),l[1]),r(a(n(G,L),-u[1]),a(n(I,S),f[1]))),o[2]),a(r(a(n(Z,z),o[1]),r(a(n(H,y),-u[1]),a(n(O,v),f[1]))),-l[2])),r(a(r(a(n(G,L),o[1]),r(a(n(H,y),-l[1]),a(n(A,d),f[1]))),u[2]),a(r(a(n(I,S),o[1]),r(a(n(O,v),-l[1]),a(n(A,d),u[1]))),-f[2]))),-s[3]),a(r(r(a(r(a(n(Z,z),s[1]),r(a(n(q,T),-u[1]),a(n(P,_),f[1]))),o[2]),a(r(a(n(Z,z),o[1]),r(a(n(H,y),-u[1]),a(n(O,v),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,y),-s[1]),a(n(x,p),f[1]))),u[2]),a(r(a(n(P,_),o[1]),r(a(n(O,v),-s[1]),a(n(x,p),u[1]))),-f[2]))),l[3])),r(a(r(r(a(r(a(n(G,L),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),o[2]),a(r(a(n(G,L),o[1]),r(a(n(H,y),-l[1]),a(n(A,d),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,y),-s[1]),a(n(x,p),f[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(A,d),-s[1]),a(n(x,p),l[1]))),-f[2]))),-u[3]),a(r(r(a(r(a(n(I,S),s[1]),r(a(n(P,_),-l[1]),a(n(M,b),u[1]))),o[2]),a(r(a(n(I,S),o[1]),r(a(n(O,v),-l[1]),a(n(A,d),u[1]))),-s[2])),r(a(r(a(n(P,_),o[1]),r(a(n(O,v),-s[1]),a(n(x,p),u[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(A,d),-s[1]),a(n(x,p),l[1]))),-u[2]))),f[3]))))),X=r(r(r(a(r(r(a(r(a(n(Y,U),u[1]),r(a(n(Z,z),-c[1]),a(n(j,D),f[1]))),l[2]),a(r(a(n(Y,U),l[1]),r(a(n(G,L),-c[1]),a(n(N,E),f[1]))),-u[2])),r(a(r(a(n(Z,z),l[1]),r(a(n(G,L),-u[1]),a(n(I,S),f[1]))),c[2]),a(r(a(n(j,D),l[1]),r(a(n(N,E),-u[1]),a(n(I,S),c[1]))),-f[2]))),o[3]),r(a(r(r(a(r(a(n(Y,U),u[1]),r(a(n(Z,z),-c[1]),a(n(j,D),f[1]))),o[2]),a(r(a(n(Y,U),o[1]),r(a(n(H,y),-c[1]),a(n(F,g),f[1]))),-u[2])),r(a(r(a(n(Z,z),o[1]),r(a(n(H,y),-u[1]),a(n(O,v),f[1]))),c[2]),a(r(a(n(j,D),o[1]),r(a(n(F,g),-u[1]),a(n(O,v),c[1]))),-f[2]))),-l[3]),a(r(r(a(r(a(n(Y,U),l[1]),r(a(n(G,L),-c[1]),a(n(N,E),f[1]))),o[2]),a(r(a(n(Y,U),o[1]),r(a(n(H,y),-c[1]),a(n(F,g),f[1]))),-l[2])),r(a(r(a(n(G,L),o[1]),r(a(n(H,y),-l[1]),a(n(A,d),f[1]))),c[2]),a(r(a(n(N,E),o[1]),r(a(n(F,g),-l[1]),a(n(A,d),c[1]))),-f[2]))),u[3]))),r(r(a(r(r(a(r(a(n(Z,z),l[1]),r(a(n(G,L),-u[1]),a(n(I,S),f[1]))),o[2]),a(r(a(n(Z,z),o[1]),r(a(n(H,y),-u[1]),a(n(O,v),f[1]))),-l[2])),r(a(r(a(n(G,L),o[1]),r(a(n(H,y),-l[1]),a(n(A,d),f[1]))),u[2]),a(r(a(n(I,S),o[1]),r(a(n(O,v),-l[1]),a(n(A,d),u[1]))),-f[2]))),-c[3]),a(r(r(a(r(a(n(j,D),l[1]),r(a(n(N,E),-u[1]),a(n(I,S),c[1]))),o[2]),a(r(a(n(j,D),o[1]),r(a(n(F,g),-u[1]),a(n(O,v),c[1]))),-l[2])),r(a(r(a(n(N,E),o[1]),r(a(n(F,g),-l[1]),a(n(A,d),c[1]))),u[2]),a(r(a(n(I,S),o[1]),r(a(n(O,v),-l[1]),a(n(A,d),u[1]))),-c[2]))),f[3])),r(a(r(r(a(r(a(n(Y,U),l[1]),r(a(n(G,L),-c[1]),a(n(N,E),f[1]))),s[2]),a(r(a(n(Y,U),s[1]),r(a(n(q,T),-c[1]),a(n(B,w),f[1]))),-l[2])),r(a(r(a(n(G,L),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),c[2]),a(r(a(n(N,E),s[1]),r(a(n(B,w),-l[1]),a(n(M,b),c[1]))),-f[2]))),o[3]),a(r(r(a(r(a(n(Y,U),l[1]),r(a(n(G,L),-c[1]),a(n(N,E),f[1]))),o[2]),a(r(a(n(Y,U),o[1]),r(a(n(H,y),-c[1]),a(n(F,g),f[1]))),-l[2])),r(a(r(a(n(G,L),o[1]),r(a(n(H,y),-l[1]),a(n(A,d),f[1]))),c[2]),a(r(a(n(N,E),o[1]),r(a(n(F,g),-l[1]),a(n(A,d),c[1]))),-f[2]))),-s[3])))),r(r(r(a(r(r(a(r(a(n(Y,U),s[1]),r(a(n(q,T),-c[1]),a(n(B,w),f[1]))),o[2]),a(r(a(n(Y,U),o[1]),r(a(n(H,y),-c[1]),a(n(F,g),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,y),-s[1]),a(n(x,p),f[1]))),c[2]),a(r(a(n(B,w),o[1]),r(a(n(F,g),-s[1]),a(n(x,p),c[1]))),-f[2]))),l[3]),a(r(r(a(r(a(n(G,L),s[1]),r(a(n(q,T),-l[1]),a(n(M,b),f[1]))),o[2]),a(r(a(n(G,L),o[1]),r(a(n(H,y),-l[1]),a(n(A,d),f[1]))),-s[2])),r(a(r(a(n(q,T),o[1]),r(a(n(H,y),-s[1]),a(n(x,p),f[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(A,d),-s[1]),a(n(x,p),l[1]))),-f[2]))),-c[3])),r(a(r(r(a(r(a(n(N,E),s[1]),r(a(n(B,w),-l[1]),a(n(M,b),c[1]))),o[2]),a(r(a(n(N,E),o[1]),r(a(n(F,g),-l[1]),a(n(A,d),c[1]))),-s[2])),r(a(r(a(n(B,w),o[1]),r(a(n(F,g),-s[1]),a(n(x,p),c[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(A,d),-s[1]),a(n(x,p),l[1]))),-c[2]))),f[3]),a(r(r(a(r(a(n(j,D),l[1]),r(a(n(N,E),-u[1]),a(n(I,S),c[1]))),s[2]),a(r(a(n(j,D),s[1]),r(a(n(B,w),-u[1]),a(n(P,_),c[1]))),-l[2])),r(a(r(a(n(N,E),s[1]),r(a(n(B,w),-l[1]),a(n(M,b),c[1]))),u[2]),a(r(a(n(I,S),s[1]),r(a(n(P,_),-l[1]),a(n(M,b),u[1]))),-c[2]))),o[3]))),r(r(a(r(r(a(r(a(n(j,D),l[1]),r(a(n(N,E),-u[1]),a(n(I,S),c[1]))),o[2]),a(r(a(n(j,D),o[1]),r(a(n(F,g),-u[1]),a(n(O,v),c[1]))),-l[2])),r(a(r(a(n(N,E),o[1]),r(a(n(F,g),-l[1]),a(n(A,d),c[1]))),u[2]),a(r(a(n(I,S),o[1]),r(a(n(O,v),-l[1]),a(n(A,d),u[1]))),-c[2]))),-s[3]),a(r(r(a(r(a(n(j,D),s[1]),r(a(n(B,w),-u[1]),a(n(P,_),c[1]))),o[2]),a(r(a(n(j,D),o[1]),r(a(n(F,g),-u[1]),a(n(O,v),c[1]))),-s[2])),r(a(r(a(n(B,w),o[1]),r(a(n(F,g),-s[1]),a(n(x,p),c[1]))),u[2]),a(r(a(n(P,_),o[1]),r(a(n(O,v),-s[1]),a(n(x,p),u[1]))),-c[2]))),l[3])),r(a(r(r(a(r(a(n(N,E),s[1]),r(a(n(B,w),-l[1]),a(n(M,b),c[1]))),o[2]),a(r(a(n(N,E),o[1]),r(a(n(F,g),-l[1]),a(n(A,d),c[1]))),-s[2])),r(a(r(a(n(B,w),o[1]),r(a(n(F,g),-s[1]),a(n(x,p),c[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(A,d),-s[1]),a(n(x,p),l[1]))),-c[2]))),-u[3]),a(r(r(a(r(a(n(I,S),s[1]),r(a(n(P,_),-l[1]),a(n(M,b),u[1]))),o[2]),a(r(a(n(I,S),o[1]),r(a(n(O,v),-l[1]),a(n(A,d),u[1]))),-s[2])),r(a(r(a(n(P,_),o[1]),r(a(n(O,v),-s[1]),a(n(x,p),u[1]))),l[2]),a(r(a(n(M,b),o[1]),r(a(n(A,d),-s[1]),a(n(x,p),l[1]))),-u[2]))),c[3]))))),J=n(W,X);return J[J.length-1]}})(o,s,a,l)}var c=[function(){return 0},function(){return 0},function(){return 0}];function f(r){var n=c[r.length];return n||(n=c[r.length]=u(r.length)),n.apply(void 0,r)}function h(r,n,i,a,o,s,l,u){return function(n,i,c,f,h,p){switch(arguments.length){case 0:case 1:return 0;case 2:return a(n,i);case 3:return o(n,i,c);case 4:return s(n,i,c,f);case 5:return l(n,i,c,f,h);case 6:return u(n,i,c,f,h,p)}for(var d=Array(arguments.length),v=0;v<arguments.length;++v)d[v]=arguments[v];return r(d)}}!function(){for(;c.length<=6;)c.push(u(c.length));r.exports=h.apply(void 0,[f].concat(c));for(var n=0;n<=6;++n)r.exports[n]=c[n]}()},6606:function(r,n,i){"use strict";var a=i(8167);function o(r){return(2===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1]],[+i[1],+n[1][1]]]),r([[+n[0][0],+i[0]],[+n[1][0],+i[1]]]),r(n)]}}:3===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2]],[+i[1],+n[1][1],+n[1][2]],[+i[2],+n[2][1],+n[2][2]]]),r([[+n[0][0],+i[0],+n[0][2]],[+n[1][0],+i[1],+n[1][2]],[+n[2][0],+i[2],+n[2][2]]]),r([[+n[0][0],+n[0][1],+i[0]],[+n[1][0],+n[1][1],+i[1]],[+n[2][0],+n[2][1],+i[2]]]),r(n)]}}:4===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2],+n[0][3]],[+i[1],+n[1][1],+n[1][2],+n[1][3]],[+i[2],+n[2][1],+n[2][2],+n[2][3]],[+i[3],+n[3][1],+n[3][2],+n[3][3]]]),r([[+n[0][0],+i[0],+n[0][2],+n[0][3]],[+n[1][0],+i[1],+n[1][2],+n[1][3]],[+n[2][0],+i[2],+n[2][2],+n[2][3]],[+n[3][0],+i[3],+n[3][2],+n[3][3]]]),r([[+n[0][0],+n[0][1],+i[0],+n[0][3]],[+n[1][0],+n[1][1],+i[1],+n[1][3]],[+n[2][0],+n[2][1],+i[2],+n[2][3]],[+n[3][0],+n[3][1],+i[3],+n[3][3]]]),r([[+n[0][0],+n[0][1],+n[0][2],+i[0]],[+n[1][0],+n[1][1],+n[1][2],+i[1]],[+n[2][0],+n[2][1],+n[2][2],+i[2]],[+n[3][0],+n[3][1],+n[3][2],+i[3]]]),r(n)]}}:5===r?function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2],+n[0][3],+n[0][4]],[+i[1],+n[1][1],+n[1][2],+n[1][3],+n[1][4]],[+i[2],+n[2][1],+n[2][2],+n[2][3],+n[2][4]],[+i[3],+n[3][1],+n[3][2],+n[3][3],+n[3][4]],[+i[4],+n[4][1],+n[4][2],+n[4][3],+n[4][4]]]),r([[+n[0][0],+i[0],+n[0][2],+n[0][3],+n[0][4]],[+n[1][0],+i[1],+n[1][2],+n[1][3],+n[1][4]],[+n[2][0],+i[2],+n[2][2],+n[2][3],+n[2][4]],[+n[3][0],+i[3],+n[3][2],+n[3][3],+n[3][4]],[+n[4][0],+i[4],+n[4][2],+n[4][3],+n[4][4]]]),r([[+n[0][0],+n[0][1],+i[0],+n[0][3],+n[0][4]],[+n[1][0],+n[1][1],+i[1],+n[1][3],+n[1][4]],[+n[2][0],+n[2][1],+i[2],+n[2][3],+n[2][4]],[+n[3][0],+n[3][1],+i[3],+n[3][3],+n[3][4]],[+n[4][0],+n[4][1],+i[4],+n[4][3],+n[4][4]]]),r([[+n[0][0],+n[0][1],+n[0][2],+i[0],+n[0][4]],[+n[1][0],+n[1][1],+n[1][2],+i[1],+n[1][4]],[+n[2][0],+n[2][1],+n[2][2],+i[2],+n[2][4]],[+n[3][0],+n[3][1],+n[3][2],+i[3],+n[3][4]],[+n[4][0],+n[4][1],+n[4][2],+i[4],+n[4][4]]]),r([[+n[0][0],+n[0][1],+n[0][2],+n[0][3],+i[0]],[+n[1][0],+n[1][1],+n[1][2],+n[1][3],+i[1]],[+n[2][0],+n[2][1],+n[2][2],+n[2][3],+i[2]],[+n[3][0],+n[3][1],+n[3][2],+n[3][3],+i[3]],[+n[4][0],+n[4][1],+n[4][2],+n[4][3],+i[4]]]),r(n)]}}:function(r){return function(n,i){return[r([[+i[0],+n[0][1],+n[0][2],+n[0][3],+n[0][4],+n[0][5]],[+i[1],+n[1][1],+n[1][2],+n[1][3],+n[1][4],+n[1][5]],[+i[2],+n[2][1],+n[2][2],+n[2][3],+n[2][4],+n[2][5]],[+i[3],+n[3][1],+n[3][2],+n[3][3],+n[3][4],+n[3][5]],[+i[4],+n[4][1],+n[4][2],+n[4][3],+n[4][4],+n[4][5]],[+i[5],+n[5][1],+n[5][2],+n[5][3],+n[5][4],+n[5][5]]]),r([[+n[0][0],+i[0],+n[0][2],+n[0][3],+n[0][4],+n[0][5]],[+n[1][0],+i[1],+n[1][2],+n[1][3],+n[1][4],+n[1][5]],[+n[2][0],+i[2],+n[2][2],+n[2][3],+n[2][4],+n[2][5]],[+n[3][0],+i[3],+n[3][2],+n[3][3],+n[3][4],+n[3][5]],[+n[4][0],+i[4],+n[4][2],+n[4][3],+n[4][4],+n[4][5]],[+n[5][0],+i[5],+n[5][2],+n[5][3],+n[5][4],+n[5][5]]]),r([[+n[0][0],+n[0][1],+i[0],+n[0][3],+n[0][4],+n[0][5]],[+n[1][0],+n[1][1],+i[1],+n[1][3],+n[1][4],+n[1][5]],[+n[2][0],+n[2][1],+i[2],+n[2][3],+n[2][4],+n[2][5]],[+n[3][0],+n[3][1],+i[3],+n[3][3],+n[3][4],+n[3][5]],[+n[4][0],+n[4][1],+i[4],+n[4][3],+n[4][4],+n[4][5]],[+n[5][0],+n[5][1],+i[5],+n[5][3],+n[5][4],+n[5][5]]]),r([[+n[0][0],+n[0][1],+n[0][2],+i[0],+n[0][4],+n[0][5]],[+n[1][0],+n[1][1],+n[1][2],+i[1],+n[1][4],+n[1][5]],[+n[2][0],+n[2][1],+n[2][2],+i[2],+n[2][4],+n[2][5]],[+n[3][0],+n[3][1],+n[3][2],+i[3],+n[3][4],+n[3][5]],[+n[4][0],+n[4][1],+n[4][2],+i[4],+n[4][4],+n[4][5]],[+n[5][0],+n[5][1],+n[5][2],+i[5],+n[5][4],+n[5][5]]]),r([[+n[0][0],+n[0][1],+n[0][2],+n[0][3],+i[0],+n[0][5]],[+n[1][0],+n[1][1],+n[1][2],+n[1][3],+i[1],+n[1][5]],[+n[2][0],+n[2][1],+n[2][2],+n[2][3],+i[2],+n[2][5]],[+n[3][0],+n[3][1],+n[3][2],+n[3][3],+i[3],+n[3][5]],[+n[4][0],+n[4][1],+n[4][2],+n[4][3],+i[4],+n[4][5]],[+n[5][0],+n[5][1],+n[5][2],+n[5][3],+i[5],+n[5][5]]]),r([[+n[0][0],+n[0][1],+n[0][2],+n[0][3],+n[0][4],+i[0]],[+n[1][0],+n[1][1],+n[1][2],+n[1][3],+n[1][4],+i[1]],[+n[2][0],+n[2][1],+n[2][2],+n[2][3],+n[2][4],+i[2]],[+n[3][0],+n[3][1],+n[3][2],+n[3][3],+n[3][4],+i[3]],[+n[4][0],+n[4][1],+n[4][2],+n[4][3],+n[4][4],+i[4]],[+n[5][0],+n[5][1],+n[5][2],+n[5][3],+n[5][4],+i[5]]]),r(n)]}})(r<6?a[r]:a)}var s=[function(){return[[0]]},function(r,n){return[[n[0]],[r[0][0]]]}];function l(r,n,i,a,o,s,l,u){return function(c,f){switch(c.length){case 0:return r(c,f);case 1:return n(c,f);case 2:return i(c,f);case 3:return a(c,f);case 4:return o(c,f);case 5:return s(c,f)}var h=l[c.length];return h||(h=l[c.length]=u(c.length)),h(c,f)}}!function(){for(;s.length<6;)s.push(o(s.length));r.exports=l.apply(void 0,s.concat([s,o]));for(var n=0;n<6;++n)r.exports[n]=s[n]}()},417:function(r,n,i){"use strict";var a=i(9660),o=i(9662),s=i(8289),l=i(4078);function u(r){return(3===r?function(r,n,i,a){return function(i,o,s){var l=a(r(r(n(o[1],s[0]),n(-s[1],o[0])),r(n(i[1],o[0]),n(-o[1],i[0]))),r(n(i[1],s[0]),n(-s[1],i[0])));return l[l.length-1]}}:4===r?function(r,n,i,a){return function(o,s,l,u){var c=a(r(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),u[2]))),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),u[2])))),r(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),u[2]))),r(i(r(n(s[1],l[0]),n(-l[1],s[0])),o[2]),r(i(r(n(o[1],l[0]),n(-l[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),l[2])))));return c[c.length-1]}}:function(r,n,i,a){return function(o,s,l,u,c){var f=a(r(r(r(i(r(i(r(n(u[1],c[0]),n(-c[1],u[0])),l[2]),r(i(r(n(l[1],c[0]),n(-c[1],l[0])),-u[2]),i(r(n(l[1],u[0]),n(-u[1],l[0])),c[2]))),s[3]),r(i(r(i(r(n(u[1],c[0]),n(-c[1],u[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-u[2]),i(r(n(s[1],u[0]),n(-u[1],s[0])),c[2]))),-l[3]),i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),c[2]))),u[3]))),r(i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),u[2]))),-c[3]),r(i(r(i(r(n(u[1],c[0]),n(-c[1],u[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-u[2]),i(r(n(s[1],u[0]),n(-u[1],s[0])),c[2]))),o[3]),i(r(i(r(n(u[1],c[0]),n(-c[1],u[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-u[2]),i(r(n(o[1],u[0]),n(-u[1],o[0])),c[2]))),-s[3])))),r(r(i(r(i(r(n(s[1],c[0]),n(-c[1],s[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),c[2]))),u[3]),r(i(r(i(r(n(s[1],u[0]),n(-u[1],s[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),-c[3]),i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),s[2]),r(i(r(n(s[1],u[0]),n(-u[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),u[2]))),o[3]))),r(i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),u[2]))),-s[3]),r(i(r(i(r(n(s[1],u[0]),n(-u[1],s[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),u[2]))),l[3]),i(r(i(r(n(s[1],l[0]),n(-l[1],s[0])),o[2]),r(i(r(n(o[1],l[0]),n(-l[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),l[2]))),-u[3]))))),r(r(r(i(r(i(r(n(u[1],c[0]),n(-c[1],u[0])),l[2]),r(i(r(n(l[1],c[0]),n(-c[1],l[0])),-u[2]),i(r(n(l[1],u[0]),n(-u[1],l[0])),c[2]))),o[3]),i(r(i(r(n(u[1],c[0]),n(-c[1],u[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-u[2]),i(r(n(o[1],u[0]),n(-u[1],o[0])),c[2]))),-l[3])),r(i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),c[2]))),u[3]),i(r(i(r(n(l[1],u[0]),n(-u[1],l[0])),o[2]),r(i(r(n(o[1],u[0]),n(-u[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),u[2]))),-c[3]))),r(r(i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),s[2]),r(i(r(n(s[1],c[0]),n(-c[1],s[0])),-l[2]),i(r(n(s[1],l[0]),n(-l[1],s[0])),c[2]))),o[3]),i(r(i(r(n(l[1],c[0]),n(-c[1],l[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-l[2]),i(r(n(o[1],l[0]),n(-l[1],o[0])),c[2]))),-s[3])),r(i(r(i(r(n(s[1],c[0]),n(-c[1],s[0])),o[2]),r(i(r(n(o[1],c[0]),n(-c[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),c[2]))),l[3]),i(r(i(r(n(s[1],l[0]),n(-l[1],s[0])),o[2]),r(i(r(n(o[1],l[0]),n(-l[1],o[0])),-s[2]),i(r(n(o[1],s[0]),n(-s[1],o[0])),l[2]))),-c[3])))));return f[f.length-1]}})(o,a,s,l)}var c=u(3),f=u(4),h=[function(){return 0},function(){return 0},function(r,n){return n[0]-r[0]},function(r,n,i){var a,o=(r[1]-i[1])*(n[0]-i[0]),s=(r[0]-i[0])*(n[1]-i[1]),l=o-s;if(o>0){if(s<=0)return l;a=o+s}else{if(!(o<0)||s>=0)return l;a=-(o+s)}var u=33306690738754716e-32*a;return l>=u||l<=-u?l:c(r,n,i)},function(r,n,i,a){var o=r[0]-a[0],s=n[0]-a[0],l=i[0]-a[0],u=r[1]-a[1],c=n[1]-a[1],h=i[1]-a[1],p=r[2]-a[2],d=n[2]-a[2],v=i[2]-a[2],g=s*h,y=l*c,m=l*u,x=o*h,b=o*c,_=s*u,w=p*(g-y)+d*(m-x)+v*(b-_),T=7771561172376103e-31*((Math.abs(g)+Math.abs(y))*Math.abs(p)+(Math.abs(m)+Math.abs(x))*Math.abs(d)+(Math.abs(b)+Math.abs(_))*Math.abs(v));return w>T||-w>T?w:f(r,n,i,a)}];function p(r){var n=h[r.length];return n||(n=h[r.length]=u(r.length)),n.apply(void 0,r)}function d(r,n,i,a,o,s,l){return function(n,i,u,c,f){switch(arguments.length){case 0:case 1:return 0;case 2:return a(n,i);case 3:return o(n,i,u);case 4:return s(n,i,u,c);case 5:return l(n,i,u,c,f)}for(var h=Array(arguments.length),p=0;p<arguments.length;++p)h[p]=arguments[p];return r(h)}}!function(){for(;h.length<=5;)h.push(u(h.length));r.exports=d.apply(void 0,[p].concat(h));for(var n=0;n<=5;++n)r.exports[n]=h[n]}()},2019:function(r,n,i){"use strict";var a=i(9662),o=i(8289);r.exports=function(r,n){if(1===r.length)return o(n,r[0]);if(1===n.length)return o(r,n[0]);if(0===r.length||0===n.length)return[0];var i=[0];if(r.length<n.length)for(var s=0;s<r.length;++s)i=a(i,o(n,r[s]));else for(s=0;s<n.length;++s)i=a(i,o(r,n[s]));return i}},8289:function(r,n,i){"use strict";var a=i(9660),o=i(87);r.exports=function(r,n){var i=r.length;if(1===i){var s=a(r[0],n);return s[0]?s:[s[1]]}var l=Array(2*i),u=[.1,.1],c=[.1,.1],f=0;a(r[0],n,u),u[0]&&(l[f++]=u[0]);for(var h=1;h<i;++h){a(r[h],n,c),o(u[1],c[0],u),u[0]&&(l[f++]=u[0]);var p=c[1],d=u[1],v=p+d,g=d-(v-p);u[1]=v,g&&(l[f++]=g)}return u[1]&&(l[f++]=u[1]),0===f&&(l[f++]=0),l.length=f,l}},4434:function(r,n,i){"use strict";r.exports=function(r,n,i,o){var s=a(r,i,o),l=a(n,i,o);if(s>0&&l>0||s<0&&l<0)return!1;var u=a(i,r,n),c=a(o,r,n);return!(u>0&&c>0||u<0&&c<0)&&(0!==s||0!==l||0!==u||0!==c||function(r,n,i,a){for(var o=0;o<2;++o){var s=r[o],l=n[o],u=Math.min(s,l),c=Math.max(s,l),f=i[o],h=a[o],p=Math.min(f,h);if(Math.max(f,h)<u||c<p)return!1}return!0}(r,n,i,o))};var a=i(417)[3]},4078:function(r){"use strict";r.exports=function(r,n){var i=0|r.length,a=0|n.length;if(1===i&&1===a)return u=(l=(o=r[0])+(s=-n[0]))-o,(c=o-(l-u)+(s-u))?[c,l]:[l];var o,s,l,u,c,f,h,p=Array(i+a),d=0,v=0,g=0,y=Math.abs,m=r[0],x=y(m),b=-n[g],_=y(b);x<_?(h=m,(v+=1)<i&&(x=y(m=r[v]))):(h=b,(g+=1)<a&&(_=y(b=-n[g]))),v<i&&x<_||g>=a?(f=m,(v+=1)<i&&(x=y(m=r[v]))):(f=b,(g+=1)<a&&(_=y(b=-n[g])));for(var w,T,k=f+h,A=k-f,M=h-A,S=M,E=k;v<i&&g<a;)x<_?(f=m,(v+=1)<i&&(x=y(m=r[v]))):(f=b,(g+=1)<a&&(_=y(b=-n[g]))),(M=(h=S)-(A=(k=f+h)-f))&&(p[d++]=M),S=E-((w=E+k)-(T=w-E))+(k-T),E=w;for(;v<i;)(M=(h=S)-(A=(k=(f=m)+h)-f))&&(p[d++]=M),S=E-((w=E+k)-(T=w-E))+(k-T),E=w,(v+=1)<i&&(m=r[v]);for(;g<a;)(M=(h=S)-(A=(k=(f=b)+h)-f))&&(p[d++]=M),S=E-((w=E+k)-(T=w-E))+(k-T),E=w,(g+=1)<a&&(b=-n[g]);return S&&(p[d++]=S),E&&(p[d++]=E),d||(p[d++]=0),p.length=d,p}},9662:function(r){"use strict";r.exports=function(r,n){var i=0|r.length,a=0|n.length;if(1===i&&1===a)return u=(l=(o=r[0])+(s=n[0]))-o,(c=o-(l-u)+(s-u))?[c,l]:[l];var o,s,l,u,c,f,h,p=Array(i+a),d=0,v=0,g=0,y=Math.abs,m=r[0],x=y(m),b=n[g],_=y(b);x<_?(h=m,(v+=1)<i&&(x=y(m=r[v]))):(h=b,(g+=1)<a&&(_=y(b=n[g]))),v<i&&x<_||g>=a?(f=m,(v+=1)<i&&(x=y(m=r[v]))):(f=b,(g+=1)<a&&(_=y(b=n[g])));for(var w,T,k=f+h,A=k-f,M=h-A,S=M,E=k;v<i&&g<a;)x<_?(f=m,(v+=1)<i&&(x=y(m=r[v]))):(f=b,(g+=1)<a&&(_=y(b=n[g]))),(M=(h=S)-(A=(k=f+h)-f))&&(p[d++]=M),S=E-((w=E+k)-(T=w-E))+(k-T),E=w;for(;v<i;)(M=(h=S)-(A=(k=(f=m)+h)-f))&&(p[d++]=M),S=E-((w=E+k)-(T=w-E))+(k-T),E=w,(v+=1)<i&&(m=r[v]);for(;g<a;)(M=(h=S)-(A=(k=(f=b)+h)-f))&&(p[d++]=M),S=E-((w=E+k)-(T=w-E))+(k-T),E=w,(g+=1)<a&&(b=n[g]);return S&&(p[d++]=S),E&&(p[d++]=E),d||(p[d++]=0),p.length=d,p}},8691:function(r,n,i){"use strict";r.exports=function(r){return o(a(r))};var a=i(2692),o=i(7037)},7212:function(r,n,i){"use strict";r.exports=function(r,n,i,u){if(i=i||0,void 0===u&&(u=function(r){for(var n=r.length,i=0,a=0;a<n;++a)i=0|Math.max(i,r[a].length);return i-1}(r)),0===r.length||u<1)return{cells:[],vertexIds:[],vertexWeights:[]};var c=function(r,n){for(var i=r.length,a=o.mallocUint8(i),s=0;s<i;++s)a[s]=r[s]<n|0;return a}(n,+i),f=function(r,n){for(var i=r.length,l=n*(n+1)/2*i|0,u=o.mallocUint32(2*l),c=0,f=0;f<i;++f)for(var h=r[f],p=(n=h.length,0);p<n;++p)for(var d=0;d<p;++d){var v=h[d],g=h[p];u[c++]=0|Math.min(v,g),u[c++]=0|Math.max(v,g)}s(a(u,[c/2|0,2]));var y=2;for(f=2;f<c;f+=2)u[f-2]===u[f]&&u[f-1]===u[f+1]||(u[y++]=u[f],u[y++]=u[f+1]);return a(u,[y/2|0,2])}(r,u),h=function(r,n,i,s){for(var l=r.data,u=r.shape[0],c=o.mallocDouble(u),f=0,h=0;h<u;++h){var p=l[2*h],d=l[2*h+1];if(i[p]!==i[d]){var v=n[p],g=n[d];l[2*f]=p,l[2*f+1]=d,c[f++]=(g-s)/(g-v)}}return r.shape[0]=f,a(c,[f])}(f,n,c,+i),p=function(r,n){var i=o.mallocInt32(2*n),a=r.shape[0],s=r.data;i[0]=0;for(var l=0,u=0;u<a;++u){var c=s[2*u];if(c!==l){for(i[2*l+1]=u;++l<c;)i[2*l]=u,i[2*l+1]=u;i[2*l]=u}}for(i[2*l+1]=a;++l<n;)i[2*l]=i[2*l+1]=a;return i}(f,0|n.length),d=l(u)(r,f.data,p,c),v=function(r){for(var n=0|r.shape[0],i=r.data,a=Array(n),o=0;o<n;++o)a[o]=[i[2*o],i[2*o+1]];return a}(f),g=[].slice.call(h.data,0,h.shape[0]);return o.free(c),o.free(f.data),o.free(h.data),o.free(p),{cells:d,vertexIds:v,vertexWeights:g}};var a=i(5050),o=i(5306),s=i(8729),l=i(1168)},1168:function(r){"use strict";r.exports=function(r){return n[r]()};var n=[function(){return function(r,n,i,a){for(var o=r.length,s=0;s<o;++s)r[s].length;return[]}},function(){function r(r,n,i,a){for(var o=0|Math.min(i,a),s=0|Math.max(i,a),l=r[2*o],u=r[2*o+1];l<u;){var c=l+u>>1,f=n[2*c+1];if(f===s)return c;s<f?u=c:l=c+1}return l}return function(n,i,a,o){for(var s=n.length,l=[],u=0;u<s;++u){var c=n[u];if(2===c.length){var f=(o[c[0]]<<0)+(o[c[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:case 3:break;case 1:l.push([r(a,i,c[0],c[1])]);break;case 2:l.push([r(a,i,c[1],c[0])])}}}return l}},function(){function r(r,n,i,a){for(var o=0|Math.min(i,a),s=0|Math.max(i,a),l=r[2*o],u=r[2*o+1];l<u;){var c=l+u>>1,f=n[2*c+1];if(f===s)return c;s<f?u=c:l=c+1}return l}return function(n,i,a,o){for(var s=n.length,l=[],u=0;u<s;++u){var c,f=n[u],h=f.length;if(3===h){if(0==(c=(o[f[0]]<<0)+(o[f[1]]<<1)+(o[f[2]]<<2))||7===c)continue;switch(c){case 0:case 7:break;case 1:l.push([r(a,i,f[0],f[2]),r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0]),r(a,i,f[1],f[2])]);break;case 3:l.push([r(a,i,f[0],f[2]),r(a,i,f[1],f[2])]);break;case 4:l.push([r(a,i,f[2],f[1]),r(a,i,f[2],f[0])]);break;case 5:l.push([r(a,i,f[2],f[1]),r(a,i,f[0],f[1])]);break;case 6:l.push([r(a,i,f[1],f[0]),r(a,i,f[2],f[0])])}}else if(2===h){if(0==(c=(o[f[0]]<<0)+(o[f[1]]<<1))||3===c)continue;switch(c){case 0:case 3:break;case 1:l.push([r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0])])}}}return l}},function(){function r(r,n,i,a){for(var o=0|Math.min(i,a),s=0|Math.max(i,a),l=r[2*o],u=r[2*o+1];l<u;){var c=l+u>>1,f=n[2*c+1];if(f===s)return c;s<f?u=c:l=c+1}return l}return function(n,i,a,o){for(var s=n.length,l=[],u=0;u<s;++u){var c,f=n[u],h=f.length;if(4===h){if(0==(c=(o[f[0]]<<0)+(o[f[1]]<<1)+(o[f[2]]<<2)+(o[f[3]]<<3))||15===c)continue;switch(c){case 0:case 15:break;case 1:l.push([r(a,i,f[0],f[1]),r(a,i,f[0],f[2]),r(a,i,f[0],f[3])]);break;case 2:l.push([r(a,i,f[1],f[2]),r(a,i,f[1],f[0]),r(a,i,f[1],f[3])]);break;case 3:l.push([r(a,i,f[1],f[2]),r(a,i,f[0],f[2]),r(a,i,f[0],f[3])],[r(a,i,f[1],f[3]),r(a,i,f[1],f[2]),r(a,i,f[0],f[3])]);break;case 4:l.push([r(a,i,f[2],f[0]),r(a,i,f[2],f[1]),r(a,i,f[2],f[3])]);break;case 5:l.push([r(a,i,f[0],f[1]),r(a,i,f[2],f[1]),r(a,i,f[0],f[3])],[r(a,i,f[2],f[1]),r(a,i,f[2],f[3]),r(a,i,f[0],f[3])]);break;case 6:l.push([r(a,i,f[2],f[0]),r(a,i,f[1],f[0]),r(a,i,f[1],f[3])],[r(a,i,f[2],f[3]),r(a,i,f[2],f[0]),r(a,i,f[1],f[3])]);break;case 7:l.push([r(a,i,f[0],f[3]),r(a,i,f[1],f[3]),r(a,i,f[2],f[3])]);break;case 8:l.push([r(a,i,f[3],f[1]),r(a,i,f[3],f[0]),r(a,i,f[3],f[2])]);break;case 9:l.push([r(a,i,f[3],f[1]),r(a,i,f[0],f[1]),r(a,i,f[0],f[2])],[r(a,i,f[3],f[2]),r(a,i,f[3],f[1]),r(a,i,f[0],f[2])]);break;case 10:l.push([r(a,i,f[1],f[0]),r(a,i,f[3],f[0]),r(a,i,f[1],f[2])],[r(a,i,f[3],f[0]),r(a,i,f[3],f[2]),r(a,i,f[1],f[2])]);break;case 11:l.push([r(a,i,f[1],f[2]),r(a,i,f[0],f[2]),r(a,i,f[3],f[2])]);break;case 12:l.push([r(a,i,f[3],f[0]),r(a,i,f[2],f[0]),r(a,i,f[2],f[1])],[r(a,i,f[3],f[1]),r(a,i,f[3],f[0]),r(a,i,f[2],f[1])]);break;case 13:l.push([r(a,i,f[0],f[1]),r(a,i,f[2],f[1]),r(a,i,f[3],f[1])]);break;case 14:l.push([r(a,i,f[2],f[0]),r(a,i,f[1],f[0]),r(a,i,f[3],f[0])])}}else if(3===h){if(0==(c=(o[f[0]]<<0)+(o[f[1]]<<1)+(o[f[2]]<<2))||7===c)continue;switch(c){case 0:case 7:break;case 1:l.push([r(a,i,f[0],f[2]),r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0]),r(a,i,f[1],f[2])]);break;case 3:l.push([r(a,i,f[0],f[2]),r(a,i,f[1],f[2])]);break;case 4:l.push([r(a,i,f[2],f[1]),r(a,i,f[2],f[0])]);break;case 5:l.push([r(a,i,f[2],f[1]),r(a,i,f[0],f[1])]);break;case 6:l.push([r(a,i,f[1],f[0]),r(a,i,f[2],f[0])])}}else if(2===h){if(0==(c=(o[f[0]]<<0)+(o[f[1]]<<1))||3===c)continue;switch(c){case 0:case 3:break;case 1:l.push([r(a,i,f[0],f[1])]);break;case 2:l.push([r(a,i,f[1],f[0])])}}}return l}}]},8211:function(r,n,i){"use strict";i(2288),i(1731),n.H=function(r,n){var i=r.length,a=r.length-n.length,o=Math.min;if(a)return a;switch(i){case 0:return 0;case 1:return r[0]-n[0];case 2:return(u=r[0]+r[1]-n[0]-n[1])||o(r[0],r[1])-o(n[0],n[1]);case 3:var s=r[0]+r[1],l=n[0]+n[1];if(u=s+r[2]-(l+n[2]))return u;var u,c=o(r[0],r[1]),f=o(n[0],n[1]);return(u=o(c,r[2])-o(f,n[2]))||o(c+r[2],s)-o(f+n[2],l);default:var h=r.slice(0);h.sort();var p=n.slice(0);p.sort();for(var d=0;d<i;++d)if(a=h[d]-p[d])return a;return 0}}},9392:function(r,n){"use strict";function i(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-2147483648,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var n=r>>31;return(r^n)-n},n.min=function(r,n){return n^(r^n)&-(r<n)},n.max=function(r,n){return r^(r^n)&-(r<n)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var n,i;return n=(r>65535)<<4,n|=i=((r>>>=n)>255)<<3,n|=i=((r>>>=i)>15)<<2,(n|=i=((r>>>=i)>3)<<1)|(r>>>=i)>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=Array(256);(function(r){for(var n=0;n<256;++n){var i=n,a=n,o=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=a<<o&255}})(a),n.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},n.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},n.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},n.interleave3=function(r,n,i){return(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},n.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},n.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},6656:function(r,n,i){"use strict";var a=i(9392),o=i(9521);function s(r,n){var i=r.length,a=r.length-n.length,o=Math.min;if(a)return a;switch(i){case 0:return 0;case 1:return r[0]-n[0];case 2:return(u=r[0]+r[1]-n[0]-n[1])||o(r[0],r[1])-o(n[0],n[1]);case 3:var s=r[0]+r[1],l=n[0]+n[1];if(u=s+r[2]-(l+n[2]))return u;var u,c=o(r[0],r[1]),f=o(n[0],n[1]);return(u=o(c,r[2])-o(f,n[2]))||o(c+r[2],s)-o(f+n[2],l);default:var h=r.slice(0);h.sort();var p=n.slice(0);p.sort();for(var d=0;d<i;++d)if(a=h[d]-p[d])return a;return 0}}function l(r,n){return s(r[0],n[0])}function u(r,n){if(n){for(var i=r.length,a=Array(i),o=0;o<i;++o)a[o]=[r[o],n[o]];for(a.sort(l),o=0;o<i;++o)r[o]=a[o][0],n[o]=a[o][1];return r}return r.sort(s),r}function c(r){if(0===r.length)return[];for(var n=1,i=r.length,a=1;a<i;++a){var o=r[a];if(s(o,r[a-1])){if(a===n){n++;continue}r[n++]=o}}return r.length=n,r}function f(r,n){for(var i=0,a=r.length-1,o=-1;i<=a;){var l=i+a>>1,u=s(r[l],n);u<=0?(0===u&&(o=l),i=l+1):u>0&&(a=l-1)}return o}function h(r,n){for(var i=Array(r.length),o=0,l=i.length;o<l;++o)i[o]=[];for(var u=[],c=(o=0,n.length);o<c;++o)for(var h=n[o],p=h.length,d=1,v=1<<p;d<v;++d){u.length=a.popCount(d);for(var g=0,y=0;y<p;++y)d&1<<y&&(u[g++]=h[y]);var m=f(r,u);if(!(m<0))for(;i[m++].push(o),!(m>=r.length||0!==s(r[m],u)););}return i}function p(r,n){if(n<0)return[];for(var i=[],o=(1<<n+1)-1,s=0;s<r.length;++s)for(var l=r[s],c=o;c<1<<l.length;c=a.nextCombination(c)){for(var f=Array(n+1),h=0,p=0;p<l.length;++p)c&1<<p&&(f[h++]=l[p]);i.push(f)}return u(i)}n.dimension=function(r){for(var n=0,i=Math.max,a=0,o=r.length;a<o;++a)n=i(n,r[a].length);return n-1},n.countVertices=function(r){for(var n=-1,i=Math.max,a=0,o=r.length;a<o;++a)for(var s=r[a],l=0,u=s.length;l<u;++l)n=i(n,s[l]);return n+1},n.cloneCells=function(r){for(var n=Array(r.length),i=0,a=r.length;i<a;++i)n[i]=r[i].slice(0);return n},n.compareCells=s,n.normalize=u,n.unique=c,n.findCell=f,n.incidence=h,n.dual=function(r,n){if(!n)return h(c(p(r,0)),r);for(var i=Array(n),a=0;a<n;++a)i[a]=[];a=0;for(var o=r.length;a<o;++a)for(var s=r[a],l=0,u=s.length;l<u;++l)i[s[l]].push(a);return i},n.explode=function(r){for(var n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0|o.length,l=1,c=1<<s;l<c;++l){for(var f=[],h=0;h<s;++h)l>>>h&1&&f.push(o[h]);n.push(f)}return u(n)},n.skeleton=p,n.boundary=function(r){for(var n=[],i=0,a=r.length;i<a;++i)for(var o=r[i],s=0,l=o.length;s<l;++s){for(var c=Array(o.length-1),f=0,h=0;f<l;++f)f!==s&&(c[h++]=o[f]);n.push(c)}return u(n)},n.connectedComponents=function(r,n){return n?function(r,n){for(var i=new o(n),a=0;a<r.length;++a)for(var s=r[a],l=0;l<s.length;++l)for(var u=l+1;u<s.length;++u)i.link(s[l],s[u]);var c=[],f=i.ranks;for(a=0;a<f.length;++a)f[a]=-1;for(a=0;a<r.length;++a){var h=i.find(r[a][0]);f[h]<0?(f[h]=c.length,c.push([r[a].slice(0)])):c[f[h]].push(r[a].slice(0))}return c}(r,n):function(r){for(var n=c(u(p(r,0))),i=new o(n.length),a=0;a<r.length;++a)for(var s=r[a],l=0;l<s.length;++l)for(var h=f(n,[s[l]]),d=l+1;d<s.length;++d)i.link(h,f(n,[s[d]]));var v=[],g=i.ranks;for(a=0;a<g.length;++a)g[a]=-1;for(a=0;a<r.length;++a){var y=i.find(f(n,[r[a][0]]));g[y]<0?(g[y]=v.length,v.push([r[a].slice(0)])):v[g[y]].push(r[a].slice(0))}return v}(r)}},9521:function(r){"use strict";function n(r){this.roots=Array(r),this.ranks=Array(r);for(var n=0;n<r;++n)this.roots[n]=n,this.ranks[n]=0}r.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},n.prototype.find=function(r){for(var n=this.roots;n[r]!==r;){var i=n[r];n[r]=n[i],r=i}return r},n.prototype.link=function(r,n){var i=this.find(r),a=this.find(n);if(i!==a){var o=this.ranks,s=this.roots,l=o[i],u=o[a];l<u?s[i]=a:u<l?s[a]=i:(s[a]=i,++o[i])}}},8243:function(r,n,i){"use strict";r.exports=function(r,n,i){for(var s=n.length,l=r.length,u=Array(s),c=Array(s),f=Array(s),h=Array(s),p=0;p<s;++p)u[p]=c[p]=-1,f[p]=1/0,h[p]=!1;for(p=0;p<l;++p){var d=r[p];if(2!==d.length)throw Error("Input must be a graph");var v=d[1],g=d[0];-1!==c[g]?c[g]=-2:c[g]=v,-1!==u[v]?u[v]=-2:u[v]=g}function y(r){if(h[r])return 1/0;var i,o,s=u[r],l=c[r];return s<0||l<0?1/0:Math.abs(a(n[r],i=n[s],o=n[l]))/Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2))}function m(r,n){var i=k[r],a=k[n];k[r]=a,k[n]=i,A[i]=n,A[a]=r}function x(r){return f[k[r]]}function b(r){for(var n=x(r);;){var i=n,a=2*r+1,o=2*(r+1),s=r;if(a<M){var l=x(a);l<i&&(s=a,i=l)}if(o<M&&x(o)<i&&(s=o),s===r)return r;m(r,s),r=s}}function _(r){for(var n=x(r);r>0;){var i,a=1&(i=r)?i-1>>1:(i>>1)-1;if(!(a>=0&&n<x(a)))return r;m(r,a),r=a}}function w(){if(M>0){var r=k[0];return m(0,M-1),M-=1,b(0),r}return -1}function T(r,n){var i=k[r];return f[i]===n?r:(f[i]=-1/0,_(r),w(),f[i]=n,_((M+=1)-1))}var k=[],A=Array(s);for(p=0;p<s;++p)(f[p]=y(p))<1/0?(A[p]=k.length,k.push(p)):A[p]=-1;var M=k.length;for(p=M>>1;p>=0;--p)b(p);for(;;){var S=w();if(S<0||f[S]>i)break;(function(r){if(!h[r]){h[r]=!0;var n=u[r],i=c[r];u[i]>=0&&(u[i]=n),c[n]>=0&&(c[n]=i),A[n]>=0&&T(A[n],y(n)),A[i]>=0&&T(A[i],y(i))}})(S)}var E=[];for(p=0;p<s;++p)h[p]||(A[p]=E.length,E.push(n[p].slice()));function L(r,n){if(r[n]<0)return n;var i=n,a=n;do{var o=r[a];if(!h[a]||o<0||o===a||(o=r[a=o],!h[a]||o<0||o===a))break;a=o,i=r[i]}while(i!==a);for(var s=n;s!==a;s=r[s])r[s]=a;return a}var C=[];return r.forEach(function(r){var n=L(u,r[0]),i=L(c,r[1]);if(n>=0&&i>=0&&n!==i){var a=A[n],o=A[i];a!==o&&C.push([a,o])}}),o.unique(o.normalize(C)),{positions:E,edges:C}};var a=i(417),o=i(6656)},6638:function(r,n,i){"use strict";r.exports=function(r,n){if(n[0][0]<n[1][0])i=n[0],s=n[1];else{if(!(n[0][0]>n[1][0]))return o(n,r);i=n[1],s=n[0]}if(r[0][0]<r[1][0])l=r[0],u=r[1];else{if(!(r[0][0]>r[1][0]))return-o(r,n);l=r[1],u=r[0]}var i,s,l,u,c=a(i,s,u),f=a(i,s,l);if(c<0){if(f<=0)return c}else if(c>0){if(f>=0)return c}else if(f)return f;if(c=a(u,l,s),f=a(u,l,i),c<0){if(f<=0)return c}else if(c>0){if(f>=0)return c}else if(f)return f;return s[0]-u[0]};var a=i(417);function o(r,n){if(n[0][0]<n[1][0])i=n[0],o=n[1];else{if(!(n[0][0]>n[1][0])){var i,o,s,l,u=Math.min(r[0][1],r[1][1]),c=Math.max(r[0][1],r[1][1]),f=Math.min(n[0][1],n[1][1]),h=Math.max(n[0][1],n[1][1]);return c<f?c-f:u>h?u-h:c-h}i=n[1],o=n[0]}r[0][1]<r[1][1]?(s=r[0],l=r[1]):(s=r[1],l=r[0]);var p=a(o,i,s);return p||(p=a(o,i,l))||l-o}},4385:function(r,n,i){"use strict";r.exports=function(r){for(var n=r.length,i=2*n,a=Array(i),s=0;s<n;++s){var c=r[s],f=c[0][0]<c[1][0];a[2*s]=new p(c[0][0],c,f,s),a[2*s+1]=new p(c[1][0],c,!f,s)}a.sort(function(r,n){var i=r.x-n.x;return i||(i=r.create-n.create)||Math.min(r.segment[0][1],r.segment[1][1])-Math.min(n.segment[0][1],n.segment[1][1])});var d=o(l),v=[],g=[],y=[];for(s=0;s<i;){for(var m=a[s].x,x=[];s<i;){var b=a[s];if(b.x!==m)break;s+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(x.push(new h(b.segment[0][1],b.index,!0,!0)),x.push(new h(b.segment[1][1],b.index,!1,!1))):(x.push(new h(b.segment[1][1],b.index,!0,!1)),x.push(new h(b.segment[0][1],b.index,!1,!0)))):d=b.create?d.insert(b.segment,b.index):d.remove(b.segment)}v.push(d.root),g.push(m),y.push(x)}return new u(v,g,y)};var a=i(5070),o=i(7080),s=i(417),l=i(6638);function u(r,n,i){this.slabs=r,this.coordinates=n,this.horizontal=i}function c(r,n){return r.y-n}function f(r,n){for(var i=null;r;){var a,o,l,u=r.key;u[0][0]<u[1][0]?(o=u[0],l=u[1]):(o=u[1],l=u[0]);var c=s(o,l,n);if(c<0)r=r.left;else if(c>0){if(n[0]!==u[1][0])i=r,r=r.right;else{if(a=f(r.right,n))return a;r=r.left}}else{if(n[0]!==u[1][0])return r;if(a=f(r.right,n))return a;r=r.left}}return i}function h(r,n,i,a){this.y=r,this.index=n,this.start=i,this.closed=a}function p(r,n,i,a){this.x=r,this.segment=n,this.create=i,this.index=a}u.prototype.castUp=function(r){var n=a.le(this.coordinates,r[0]);if(n<0)return -1;this.slabs[n];var i=f(this.slabs[n],r),o=-1;if(i&&(o=i.value),this.coordinates[n]===r[0]){var u=null;if(i&&(u=i.key),n>0){var h=f(this.slabs[n-1],r);h&&(u?l(h.key,u)>0&&(u=h.key,o=h.value):(o=h.value,u=h.key))}var p=this.horizontal[n];if(p.length>0){var d=a.ge(p,r[1],c);if(d<p.length){var v=p[d];if(r[1]===v.y){if(v.closed)return v.index;for(;d<p.length-1&&p[d+1].y===r[1];)if((v=p[d+=1]).closed)return v.index;if(v.y===r[1]&&!v.start){if((d+=1)>=p.length)return o;v=p[d]}}if(v.start){if(u){var g=s(u[0],u[1],[r[0],v.y]);u[0][0]>u[1][0]&&(g=-g),g>0&&(o=v.index)}else o=v.index}else v.y!==r[1]&&(o=v.index)}}}return o}},4670:function(r,n,i){"use strict";var a=i(9130),o=i(9662);function s(r,n){var i=o(a(r,n),[n[n.length-1]]);return i[i.length-1]}function l(r,n,i,a){var o=-n/(a-n);o<0?o=0:o>1&&(o=1);for(var s=1-o,l=r.length,u=Array(l),c=0;c<l;++c)u[c]=o*r[c]+s*i[c];return u}r.exports=function(r,n){for(var i=[],a=[],o=s(r[r.length-1],n),u=r[r.length-1],c=r[0],f=0;f<r.length;++f,u=c){var h=s(c=r[f],n);if(o<0&&h>0||o>0&&h<0){var p=l(u,h,c,o);i.push(p),a.push(p.slice())}h<0?a.push(c.slice()):h>0?i.push(c.slice()):(i.push(c.slice()),a.push(c.slice())),o=h}return{positive:i,negative:a}},r.exports.positive=function(r,n){for(var i=[],a=s(r[r.length-1],n),o=r[r.length-1],u=r[0],c=0;c<r.length;++c,o=u){var f=s(u=r[c],n);(a<0&&f>0||a>0&&f<0)&&i.push(l(o,f,u,a)),f>=0&&i.push(u.slice()),a=f}return i},r.exports.negative=function(r,n){for(var i=[],a=s(r[r.length-1],n),o=r[r.length-1],u=r[0],c=0;c<r.length;++c,o=u){var f=s(u=r[c],n);(a<0&&f>0||a>0&&f<0)&&i.push(l(o,f,u,a)),f<=0&&i.push(u.slice()),a=f}return i}},8974:function(r,n,i){var a;!function(){"use strict";var o={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(r){return function(r,n){var i,a,l,u,c,f,h,p,d,v=1,g=r.length,y="";for(a=0;a<g;a++)if("string"==typeof r[a])y+=r[a];else if("object"==typeof r[a]){if((u=r[a]).keys)for(i=n[v],l=0;l<u.keys.length;l++){if(null==i)throw Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',u.keys[l],u.keys[l-1]));i=i[u.keys[l]]}else i=u.param_no?n[u.param_no]:n[v++];if(o.not_type.test(u.type)&&o.not_primitive.test(u.type)&&i instanceof Function&&(i=i()),o.numeric_arg.test(u.type)&&"number"!=typeof i&&isNaN(i))throw TypeError(s("[sprintf] expecting number but found %T",i));switch(o.number.test(u.type)&&(p=i>=0),u.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,u.width?parseInt(u.width):0);break;case"e":i=u.precision?parseFloat(i).toExponential(u.precision):parseFloat(i).toExponential();break;case"f":i=u.precision?parseFloat(i).toFixed(u.precision):parseFloat(i);break;case"g":i=u.precision?String(Number(i.toPrecision(u.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=u.precision?i.substring(0,u.precision):i;break;case"t":i=String(!!i),i=u.precision?i.substring(0,u.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=u.precision?i.substring(0,u.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=u.precision?i.substring(0,u.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}o.json.test(u.type)?y+=i:(o.number.test(u.type)&&(!p||u.sign)?(d=p?"+":"-",i=i.toString().replace(o.sign,"")):d="",f=u.pad_char?"0"===u.pad_char?"0":u.pad_char.charAt(1):" ",h=u.width-(d+i).length,c=u.width&&h>0?f.repeat(h):"",y+=u.align?d+i+c:"0"===f?d+c+i:c+d+i)}return y}(function(r){if(u[r])return u[r];for(var n,i=r,a=[],s=0;i;){if(null!==(n=o.text.exec(i)))a.push(n[0]);else if(null!==(n=o.modulo.exec(i)))a.push("%");else{if(null===(n=o.placeholder.exec(i)))throw SyntaxError("[sprintf] unexpected placeholder");if(n[2]){s|=1;var l=[],c=n[2],f=[];if(null===(f=o.key.exec(c)))throw SyntaxError("[sprintf] failed to parse named argument key");for(l.push(f[1]);""!==(c=c.substring(f[0].length));)if(null!==(f=o.key_access.exec(c)))l.push(f[1]);else{if(null===(f=o.index_access.exec(c)))throw SyntaxError("[sprintf] failed to parse named argument key");l.push(f[1])}n[2]=l}else s|=2;if(3===s)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}i=i.substring(n[0].length)}return u[r]=a}(r),arguments)}function l(r,n){return s.apply(null,[r].concat(n||[]))}var u=Object.create(null);n.sprintf=s,n.vsprintf=l,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=l,void 0===(a=(function(){return{sprintf:s,vsprintf:l}}).call(n,i,n,r))||(r.exports=a))}()},4162:function(r,n,i){"use strict";r.exports=function(r,n){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(r,n){for(var i=o(r,n),a=i.length,s=Array(a),l=Array(a),u=0;u<a;++u)s[u]=[i[u]],l[u]=[u];return{positions:s,cells:l}}(r,n);var i=r.order.join()+"-"+r.dtype,u=l[i];return n=+n||0,u||(u=l[i]=function(r,n){var i=s[r.length+"d"];if(i)return i(a,r,n)}(r.order,r.dtype)),u(r,n)};var a=i(9284),o=i(9584),s={"2d":function(r,n,i){var a=r({order:n,scalarArguments:3,getters:"generic"===i?[0]:void 0,phase:function(r,n,i,a){return r>a|0},vertex:function(r,n,i,a,o,s,l,u,c,f,h,p,d){var v=(l<<0)+(u<<1)+(c<<2)+(f<<3)|0;if(0!==v&&15!==v)switch(v){case 0:case 15:h.push([r-.5,n-.5]);break;case 1:h.push([r-.25-.25*(a+i-2*d)/(i-a),n-.25-.25*(o+i-2*d)/(i-o)]);break;case 2:h.push([r-.75-.25*(-a-i+2*d)/(a-i),n-.25-.25*(s+a-2*d)/(a-s)]);break;case 3:h.push([r-.5,n-.5-.5*(o+i+s+a-4*d)/(i-o+a-s)]);break;case 4:h.push([r-.25-.25*(s+o-2*d)/(o-s),n-.75-.25*(-o-i+2*d)/(o-i)]);break;case 5:h.push([r-.5-.5*(a+i+s+o-4*d)/(i-a+o-s),n-.5]);break;case 6:h.push([r-.5-.25*(-a-i+s+o)/(a-i+o-s),n-.5-.25*(-o-i+s+a)/(o-i+a-s)]);break;case 7:h.push([r-.75-.25*(s+o-2*d)/(o-s),n-.75-.25*(s+a-2*d)/(a-s)]);break;case 8:h.push([r-.75-.25*(-s-o+2*d)/(s-o),n-.75-.25*(-s-a+2*d)/(s-a)]);break;case 9:h.push([r-.5-.25*(a+i+-s-o)/(i-a+s-o),n-.5-.25*(o+i+-s-a)/(i-o+s-a)]);break;case 10:h.push([r-.5-.5*(-a-i-s-o+4*d)/(a-i+s-o),n-.5]);break;case 11:h.push([r-.25-.25*(-s-o+2*d)/(s-o),n-.75-.25*(o+i-2*d)/(i-o)]);break;case 12:h.push([r-.5,n-.5-.5*(-o-i-s-a+4*d)/(o-i+s-a)]);break;case 13:h.push([r-.75-.25*(a+i-2*d)/(i-a),n-.25-.25*(-s-a+2*d)/(s-a)]);break;case 14:h.push([r-.25-.25*(-a-i+2*d)/(a-i),n-.25-.25*(-o-i+2*d)/(o-i)])}},cell:function(r,n,i,a,o,s,l,u,c){o?u.push([r,n]):u.push([n,r])}});return function(r,n){var i=[],o=[];return a(r,i,o,n),{positions:i,cells:o}}}},l={}},6946:function(r,n,i){"use strict";r.exports=function r(n,i,o){o=o||{};var s=l[n];s||(s=l[n]={" ":{data:new Float32Array(0),shape:.2}});var u=s[i];if(!u){if(i.length<=1||!/\d/.test(i))u=s[i]=function(r){for(var n=r.cells,i=r.positions,a=new Float32Array(6*n.length),o=0,s=0,l=0;l<n.length;++l)for(var u=n[l],c=0;c<3;++c){var f=i[u[c]];a[o++]=f[0],a[o++]=f[1]+1.4,s=Math.max(f[0],s)}return{data:a,shape:s}}(a(i,{triangles:!0,font:n,textAlign:o.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var c=i.split(/(\d|\s)/),f=Array(c.length),h=0,p=0,d=0;d<c.length;++d)f[d]=r(n,c[d]),h+=f[d].data.length,p+=f[d].shape,d>0&&(p+=.02);var v=new Float32Array(h),g=0,y=-.5*p;for(d=0;d<f.length;++d){for(var m=f[d].data,x=0;x<m.length;x+=2)v[g++]=m[x]+y,v[g++]=m[x+1];y+=f[d].shape+.02}u=s[i]={data:v,shape:p}}}return u};var a=i(875),o=window||s.global||{},l=o.__TEXT_CACHE||{};o.__TEXT_CACHE={}},14:function(r,n,i){"use strict";var a=i(4405);function o(r,n){var i=a(getComputedStyle(r).getPropertyValue(n));return i[0]*s(i[1],r)}function s(r,n){switch(n=n||document.body,r=(r||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),r){case"%":return n.clientHeight/100;case"ch":case"ex":var i,a,s,l;return i=r,a=n,(s=document.createElement("div")).style["font-size"]="128"+i,a.appendChild(s),l=o(s,"font-size")/128,a.removeChild(s),l;case"em":return o(n,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}r.exports=s},3440:function(r,n,i){"use strict";r.exports=function(r){var n=(r=r||{}).center||[0,0,0],i=r.up||[0,1,0],a=r.right||p(i),o=r.radius||1,s=r.theta||0,h=r.phi||0;if(n=[].slice.call(n,0,3),u(i=[].slice.call(i,0,3),i),u(a=[].slice.call(a,0,3),a),"eye"in r){var v=r.eye,g=[v[0]-n[0],v[1]-n[1],v[2]-n[2]];l(a,g,i),1e-6>f(a[0],a[1],a[2])?a=p(i):u(a,a),o=f(g[0],g[1],g[2]);var y=c(i,g)/o,m=c(a,g)/o;h=Math.acos(y),s=Math.acos(m)}return o=Math.log(o),new d(r.zoomMin,r.zoomMax,n,i,a,o,s,h)};var a=i(8444),o=i(7437),s=i(4422),l=i(903),u=i(899),c=i(9305);function f(r,n,i){return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2))}function h(r){return Math.min(1,Math.max(-1,r))}function p(r){var n=Math.abs(r[0]),i=Math.abs(r[1]),a=Math.abs(r[2]),o=[0,0,0];n>Math.max(i,a)?o[2]=1:i>Math.max(n,a)?o[0]=1:o[1]=1;for(var s=0,l=0,c=0;c<3;++c)s+=r[c]*r[c],l+=o[c]*r[c];for(c=0;c<3;++c)o[c]-=l/s*r[c];return u(o,o),o}function d(r,n,i,o,s,l,u,c){this.center=a(i),this.up=a(o),this.right=a(s),this.radius=a([l]),this.angle=a([u,c]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(r,n),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=Array(16);for(var f=0;f<16;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}var v=d.prototype;v.setDistanceLimits=function(r,n){r=r>0?Math.log(r):-1/0,n=Math.max(n=n>0?Math.log(n):1/0,r),this.radius.bounds[0][0]=r,this.radius.bounds[1][0]=n},v.getDistanceLimits=function(r){var n=this.radius.bounds[0];return r?(r[0]=Math.exp(n[0][0]),r[1]=Math.exp(n[1][0]),r):[Math.exp(n[0][0]),Math.exp(n[1][0])]},v.recalcMatrix=function(r){this.center.curve(r),this.up.curve(r),this.right.curve(r),this.radius.curve(r),this.angle.curve(r);for(var n=this.computedUp,i=this.computedRight,a=0,o=0,s=0;s<3;++s)o+=n[s]*i[s],a+=n[s]*n[s];var c=Math.sqrt(a),h=0;for(s=0;s<3;++s)i[s]-=n[s]*o/a,h+=i[s]*i[s],n[s]/=c;var p=Math.sqrt(h);for(s=0;s<3;++s)i[s]/=p;var d=this.computedToward;l(d,n,i),u(d,d);var v=Math.exp(this.computedRadius[0]),g=this.computedAngle[0],y=this.computedAngle[1],m=Math.cos(g),x=Math.sin(g),b=Math.cos(y),_=Math.sin(y),w=this.computedCenter,T=m*b,k=x*b,A=-m*_,M=-x*_,S=this.computedEye,E=this.computedMatrix;for(s=0;s<3;++s){var L=T*i[s]+k*d[s]+_*n[s];E[4*s+1]=A*i[s]+M*d[s]+b*n[s],E[4*s+2]=L,E[4*s+3]=0}var C=E[1],O=E[5],P=E[9],I=E[2],D=E[6],z=E[10],R=O*z-P*D,F=P*I-C*z,B=C*D-O*I,N=f(R,F,B);for(R/=N,F/=N,B/=N,E[0]=R,E[4]=F,E[8]=B,s=0;s<3;++s)S[s]=w[s]+E[2+4*s]*v;for(s=0;s<3;++s){h=0;for(var j=0;j<3;++j)h+=E[s+4*j]*S[j];E[12+s]=-h}E[15]=1},v.getMatrix=function(r,n){this.recalcMatrix(r);var i=this.computedMatrix;if(n){for(var a=0;a<16;++a)n[a]=i[a];return n}return i};var g=[0,0,0];v.rotate=function(r,n,i,a){if(this.angle.move(r,n,i),a){this.recalcMatrix(r);var o=this.computedMatrix;g[0]=o[2],g[1]=o[6],g[2]=o[10];for(var l=this.computedUp,u=this.computedRight,c=this.computedToward,f=0;f<3;++f)o[4*f]=l[f],o[4*f+1]=u[f],o[4*f+2]=c[f];for(s(o,o,a,g),f=0;f<3;++f)l[f]=o[4*f],u[f]=o[4*f+1];this.up.set(r,l[0],l[1],l[2]),this.right.set(r,u[0],u[1],u[2])}},v.pan=function(r,n,i,a){n=n||0,i=i||0,a=a||0,this.recalcMatrix(r);var o=this.computedMatrix,s=(this.computedRadius[0],o[1]),l=o[5],u=o[9],c=f(s,l,u);s/=c,l/=c,u/=c;var h=o[0],p=o[4],d=o[8],v=h*s+p*l+d*u,g=f(h-=s*v,p-=l*v,d-=u*v),y=(h/=g)*n+s*i,m=(p/=g)*n+l*i,x=(d/=g)*n+u*i;this.center.move(r,y,m,x);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+a),this.radius.set(r,Math.log(b))},v.translate=function(r,n,i,a){this.center.move(r,n||0,i||0,a||0)},v.setMatrix=function(r,n,i,a){var s=1;"number"==typeof i&&(s=0|i),(s<0||s>3)&&(s=1);var l=(s+2)%3;n||(this.recalcMatrix(r),n=this.computedMatrix);var u=n[s],c=n[s+4],p=n[s+8];if(a){var d=Math.abs(u),v=Math.abs(p),g=Math.max(d,Math.abs(c),v);d===g?(u=u<0?-1:1,c=p=0):v===g?(p=p<0?-1:1,u=c=0):(c=c<0?-1:1,u=p=0)}else{var y=f(u,c,p);u/=y,c/=y,p/=y}var m,x,b=n[l],_=n[l+4],w=n[l+8],T=b*u+_*c+w*p,k=f(b-=u*T,_-=c*T,w-=p*T),A=c*(w/=k)-p*(_/=k),M=p*(b/=k)-u*w,S=u*_-c*b,E=f(A,M,S);if(A/=E,M/=E,S/=E,this.center.jump(r,G,Z,Y),this.radius.idle(r),this.up.jump(r,u,c,p),this.right.jump(r,b,_,w),2===s){var L=n[1],C=n[5],O=n[9],P=L*b+C*_+O*w,I=L*A+C*M+O*S;m=F<0?-Math.PI/2:Math.PI/2,x=Math.atan2(I,P)}else{var D=n[2],z=n[6],R=n[10],F=D*u+z*c+R*p,B=D*b+z*_+R*w,N=D*A+z*M+R*S;m=Math.asin(h(F)),x=Math.atan2(N,B)}this.angle.jump(r,x,m),this.recalcMatrix(r);var j=n[2],U=n[6],V=n[10],H=this.computedMatrix;o(H,n);var q=H[15],G=H[12]/q,Z=H[13]/q,Y=H[14]/q,W=Math.exp(this.computedRadius[0]);this.center.jump(r,G-j*W,Z-U*W,Y-V*W)},v.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},v.idle=function(r){this.center.idle(r),this.up.idle(r),this.right.idle(r),this.radius.idle(r),this.angle.idle(r)},v.flush=function(r){this.center.flush(r),this.up.flush(r),this.right.flush(r),this.radius.flush(r),this.angle.flush(r)},v.setDistance=function(r,n){n>0&&this.radius.set(r,Math.log(n))},v.lookAt=function(r,n,i,a){this.recalcMatrix(r),n=n||this.computedEye,i=i||this.computedCenter;var o=(a=a||this.computedUp)[0],s=a[1],l=a[2],u=f(o,s,l);if(!(u<1e-6)){o/=u,s/=u,l/=u;var c=n[0]-i[0],p=n[1]-i[1],d=n[2]-i[2],v=f(c,p,d);if(!(v<1e-6)){c/=v,p/=v,d/=v;var g=this.computedRight,y=g[0],m=g[1],x=g[2],b=o*y+s*m+l*x,_=f(y-=b*o,m-=b*s,x-=b*l);if(!(_<.01&&(_=f(y=s*d-l*p,m=l*c-o*d,x=o*p-s*c))<1e-6)){y/=_,m/=_,x/=_,this.up.set(r,o,s,l),this.right.set(r,y,m,x),this.center.set(r,i[0],i[1],i[2]),this.radius.set(r,Math.log(v));var w=s*x-l*m,T=l*y-o*x,k=o*m-s*y,A=f(w,T,k),M=o*c+s*p+l*d,S=y*c+m*p+x*d,E=(w/=A)*c+(T/=A)*p+(k/=A)*d,L=Math.asin(h(M)),C=Math.atan2(E,S),O=this.angle._state,P=O[O.length-1],I=O[O.length-2],D=Math.abs((P%=2*Math.PI)+2*Math.PI-C),z=Math.abs(P-C),R=Math.abs(P-2*Math.PI-C);D<z&&(P+=2*Math.PI),R<z&&(P-=2*Math.PI),this.angle.jump(this.angle.lastT(),P,I),this.angle.set(r,C,L)}}}}},9660:function(r){"use strict";r.exports=function(r,i,a){var o=r*i,s=n*r,l=s-(s-r),u=r-l,c=n*i,f=c-(c-i),h=i-f,p=u*h-(o-l*f-u*f-l*h);return a?(a[0]=p,a[1]=o,a):[p,o]};var n=134217729},87:function(r){"use strict";r.exports=function(r,n,i){var a=r+n,o=a-r,s=n-o,l=r-(a-o);return i?(i[0]=l+s,i[1]=a,i):[l+s,a]}},5306:function(r,n,i){"use strict";var a=i(2288),o=i(3094),s=i(2146).lW;i.g.__TYPEDARRAY_POOL||(i.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var l="undefined"!=typeof Uint8ClampedArray,u="undefined"!=typeof BigUint64Array,c="undefined"!=typeof BigInt64Array,f=i.g.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=o([32,0])),f.BIGUINT64||(f.BIGUINT64=o([32,0])),f.BIGINT64||(f.BIGINT64=o([32,0])),f.BUFFER||(f.BUFFER=o([32,0]));var h=f.DATA,p=f.BUFFER;function d(r){if(r){var n=r.length||r.byteLength;h[a.log2(n)].push(r)}}function v(r){r=a.nextPow2(r);var n=h[a.log2(r)];return n.length>0?n.pop():new ArrayBuffer(r)}function g(r){return new Uint8Array(v(r),0,r)}function y(r){return new Uint16Array(v(2*r),0,r)}function m(r){return new Uint32Array(v(4*r),0,r)}function x(r){return new Int8Array(v(r),0,r)}function b(r){return new Int16Array(v(2*r),0,r)}function _(r){return new Int32Array(v(4*r),0,r)}function w(r){return new Float32Array(v(4*r),0,r)}function T(r){return new Float64Array(v(8*r),0,r)}function k(r){return l?new Uint8ClampedArray(v(r),0,r):g(r)}function A(r){return u?new BigUint64Array(v(8*r),0,r):null}function M(r){return c?new BigInt64Array(v(8*r),0,r):null}function S(r){return new DataView(v(r),0,r)}function E(r){r=a.nextPow2(r);var n=p[a.log2(r)];return n.length>0?n.pop():new s(r)}n.free=function(r){if(s.isBuffer(r))p[a.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var n=r.length||r.byteLength;h[0|a.log2(n)].push(r)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeBigUint64=n.freeInt8=n.freeInt16=n.freeInt32=n.freeBigInt64=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(r){d(r.buffer)},n.freeArrayBuffer=d,n.freeBuffer=function(r){p[a.log2(r.length)].push(r)},n.malloc=function(r,n){if(void 0===n||"arraybuffer"===n)return v(r);switch(n){case"uint8":return g(r);case"uint16":return y(r);case"uint32":return m(r);case"int8":return x(r);case"int16":return b(r);case"int32":return _(r);case"float":case"float32":return w(r);case"double":case"float64":return T(r);case"uint8_clamped":return k(r);case"bigint64":return M(r);case"biguint64":return A(r);case"buffer":return E(r);case"data":case"dataview":return S(r)}return null},n.mallocArrayBuffer=v,n.mallocUint8=g,n.mallocUint16=y,n.mallocUint32=m,n.mallocInt8=x,n.mallocInt16=b,n.mallocInt32=_,n.mallocFloat32=n.mallocFloat=w,n.mallocFloat64=n.mallocDouble=T,n.mallocUint8Clamped=k,n.mallocBigUint64=A,n.mallocBigInt64=M,n.mallocDataView=S,n.mallocBuffer=E,n.clearCache=function(){for(var r=0;r<32;++r)f.UINT8[r].length=0,f.UINT16[r].length=0,f.UINT32[r].length=0,f.INT8[r].length=0,f.INT16[r].length=0,f.INT32[r].length=0,f.FLOAT[r].length=0,f.DOUBLE[r].length=0,f.BIGUINT64[r].length=0,f.BIGINT64[r].length=0,f.UINT8C[r].length=0,h[r].length=0,p[r].length=0}},1731:function(r){"use strict";function n(r){this.roots=Array(r),this.ranks=Array(r);for(var n=0;n<r;++n)this.roots[n]=n,this.ranks[n]=0}r.exports=n;var i=n.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},i.find=function(r){for(var n=r,i=this.roots;i[r]!==r;)r=i[r];for(;i[n]!==r;){var a=i[n];i[n]=r,n=a}return r},i.link=function(r,n){var i=this.find(r),a=this.find(n);if(i!==a){var o=this.ranks,s=this.roots,l=o[i],u=o[a];l<u?s[i]=a:u<l?s[a]=i:(s[a]=i,++o[i])}}},1215:function(r){"use strict";r.exports=function(r,n,i){return 0===r.length?r:n?(i||r.sort(n),function(r,n){for(var i=1,a=r.length,o=r[0],s=r[0],l=1;l<a;++l)if(s=o,n(o=r[l],s)){if(l===i){i++;continue}r[i++]=o}return r.length=i,r}(r,n)):(i||r.sort(),function(r){for(var n=1,i=r.length,a=r[0],o=r[0],s=1;s<i;++s,o=a)if(o=a,(a=r[s])!==o){if(s===n){n++;continue}r[n++]=a}return r.length=n,r}(r))}},875:function(r,n,i){"use strict";r.exports=function(r,n){return"object"==typeof n&&null!==n||(n={}),a(r,n.canvas||o,n.context||s,n)};var a=i(712),o=null,s=null;"undefined"!=typeof document&&((o=document.createElement("canvas")).width=8192,o.height=1024,s=o.getContext("2d"))},712:function(r,n,i){r.exports=function(r,n,i,a){var s=64,l=1.25,u={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return a&&(a.size&&a.size>0&&(s=a.size),a.lineSpacing&&a.lineSpacing>0&&(l=a.lineSpacing),a.styletags&&a.styletags.breaklines&&(u.breaklines=!!a.styletags.breaklines),a.styletags&&a.styletags.bolds&&(u.bolds=!!a.styletags.bolds),a.styletags&&a.styletags.italics&&(u.italics=!!a.styletags.italics),a.styletags&&a.styletags.subscripts&&(u.subscripts=!!a.styletags.subscripts),a.styletags&&a.styletags.superscripts&&(u.superscripts=!!a.styletags.superscripts)),i.font=[a.fontStyle,a.fontVariant,a.fontWeight,s+"px",a.font].filter(function(r){return r}).join(" "),i.textAlign="start",i.textBaseline="alphabetic",i.direction="ltr",T(function(r,n,i,a,s,l){i=i.replace(/\n/g,""),i=!0===l.breaklines?i.replace(/\<br\>/g,"\n"):i.replace(/\<br\>/g," ");var u="",c=[];for(A=0;A<i.length;++A)c[A]=u;!0===l.bolds&&(c=_(f,h,i,c)),!0===l.italics&&(c=_(p,d,i,c)),!0===l.superscripts&&(c=_(v,y,i,c)),!0===l.subscripts&&(c=_(m,b,i,c));var w=[],T="";for(A=0;A<i.length;++A)null!==c[A]&&(T+=i[A],w.push(c[A]));var k,A,M,S,E,L=T.split("\n"),C=L.length,O=Math.round(s*a),P=2*a,I=0,D=C*O+P;r.height<D&&(r.height=D),n.fillStyle="#000",n.fillRect(0,0,r.width,r.height),n.fillStyle="#fff";var z=0,R="";function F(){if(""!==R){var r=n.measureText(R).width;n.fillText(R,a+M,P+S),M+=r}}function B(){return Math.round(E)+"px "}for(k=0;k<C;++k){var N=L[k]+"\n";for(M=0,S=k*O,E=a,R="",A=0;A<N.length;++A){var j=A+z<w.length?w[A+z]:w[w.length-1];u===j?R+=N[A]:(F(),R=N[A],void 0!==j&&(function(r,i){var a=""+n.font;if(!0===l.subscripts){var o=r.indexOf(x),s=i.indexOf(x),u=o>-1?parseInt(r[1+o]):0,c=s>-1?parseInt(i[1+s]):0;u!==c&&(a=a.replace(B(),"?px "),E*=Math.pow(.75,c-u),a=a.replace("?px ",B())),S+=.25*O*(c-u)}if(!0===l.superscripts){var f=r.indexOf(g),p=i.indexOf(g),v=f>-1?parseInt(r[1+f]):0,y=p>-1?parseInt(i[1+p]):0;v!==y&&(a=a.replace(B(),"?px "),E*=Math.pow(.75,y-v),a=a.replace("?px ",B())),S-=.25*O*(y-v)}if(!0===l.bolds){var m=r.indexOf(h)>-1,b=i.indexOf(h)>-1;!m&&b&&(a=_?a.replace("italic ","italic bold "):"bold "+a),m&&!b&&(a=a.replace("bold ",""))}if(!0===l.italics){var _=r.indexOf(d)>-1,w=i.indexOf(d)>-1;!_&&w&&(a="italic "+a),_&&!w&&(a=a.replace("italic ",""))}n.font=a}(u,j),u=j))}F(),z+=N.length;var U=0|Math.round(M+2*a);I<U&&(I=U)}var V=I,H=P+O*C;return o(n.getImageData(0,0,V,H).data,[H,V,4]).pick(-1,-1,0).transpose(1,0)}(n,i,r,s,l,u),a,s)},r.exports.processPixels=T;var a=i(4162),o=i(5050),s=i(8243),l=i(197),u=i(7761),c=i(8040),f="b",h="b|",p="i",d="i|",v="sup",g="+",y="+1",m="sub",x="-",b="-1";function _(r,n,i,a){for(var o="<"+r+">",s="</"+r+">",l=o.length,u=s.length,c=n[0]===g||n[0]===x,f=0,h=-u;f>-1&&-1!==(f=i.indexOf(o,f))&&-1!==(h=i.indexOf(s,f+l))&&!(h<=f);){for(var p=f;p<h+u;++p)if(p<f+l||p>=h)a[p]=null,i=i.substr(0,p)+" "+i.substr(p+1);else if(null!==a[p]){var d=a[p].indexOf(n[0]);-1===d?a[p]+=n:c&&(a[p]=a[p].substr(0,d+1)+(1+parseInt(a[p][d+1]))+a[p].substr(d+2))}var v=f+l,y=i.substr(v,h-v).indexOf(o);f=-1!==y?y:h+u}return a}function w(r,n,i,o){var f,h=(f=a(r,128),o?s(f.cells,f.positions,.25):{edges:f.cells,positions:f.positions}),p=function(r,n,i){for(var a=n.textAlign||"start",o=n.textBaseline||"alphabetic",s=[1073741824,1073741824],l=[0,0],u=r.length,c=0;c<u;++c)for(var f=r[c],h=0;h<2;++h)s[h]=0|Math.min(s[h],f[h]),l[h]=0|Math.max(l[h],f[h]);var p=0;switch(a){case"center":p=-.5*(s[0]+l[0]);break;case"right":case"end":p=-l[0];break;case"left":case"start":p=-s[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+a+"'")}var d=0;switch(o){case"hanging":case"top":d=-s[1];break;case"middle":d=-.5*(s[1]+l[1]);break;case"alphabetic":case"ideographic":d=-3*i;break;case"bottom":d=-l[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+o+"'")}var v=1/i;return"lineHeight"in n?v*=+n.lineHeight:"width"in n?v=n.width/(l[0]-s[0]):"height"in n&&(v=n.height/(l[1]-s[1])),r.map(function(r){return[v*(r[0]+p),v*(r[1]+d)]})}(h.positions,n,i),d=h.edges,v="ccw"===n.orientation;if(l(p,d),n.polygons||n.polygon||n.polyline){for(var g=c(d,p),y=Array(g.length),m=0;m<g.length;++m){for(var x=g[m],b=Array(x.length),_=0;_<x.length;++_){for(var w=x[_],T=Array(w.length),k=0;k<w.length;++k)T[k]=p[w[k]].slice();v&&T.reverse(),b[_]=T}y[m]=b}return y}return n.triangles||n.triangulate||n.triangle?{cells:u(p,d,{delaunay:!1,exterior:!1,interior:!0}),positions:p}:{edges:d,positions:p}}function T(r,n,i){try{return w(r,n,i,!0)}catch(r){}try{return w(r,n,i,!1)}catch(r){}return n.polygons||n.polyline||n.polygon?[]:n.triangles||n.triangulate||n.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(r){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=b);var n,i,a,o=!1;if("function"==typeof WeakMap){var s=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var l=new s,u=Object.freeze({});if(l.set(u,1),1===l.get(u))return void(r.exports=WeakMap);o=!0}}Object.prototype.hasOwnProperty;var c=Object.getOwnPropertyNames,f=Object.defineProperty,h=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new Uint8Array(new ArrayBuffer(25));crypto.getRandomValues(v),d=p+"rand:"+Array.prototype.map.call(v,function(r){return(r%36).toString(36)}).join("")+"___"}if(f(Object,"getOwnPropertyNames",{value:function(r){return c(r).filter(_)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(r){return g(r).filter(_)}})}n=Object.freeze,f(Object,"freeze",{value:function(r){return w(r),n(r)}}),i=Object.seal,f(Object,"seal",{value:function(r){return w(r),i(r)}}),a=Object.preventExtensions,f(Object,"preventExtensions",{value:function(r){return w(r),a(r)}});var y=!1,m=0,x=function(){this instanceof x||k();var r=[],n=[],i=m++;return Object.create(x.prototype,{get___:{value:T(function(a,o){var s,l=w(a);return l?i in l?l[i]:o:(s=r.indexOf(a))>=0?n[s]:o})},has___:{value:T(function(n){var a=w(n);return a?i in a:r.indexOf(n)>=0})},set___:{value:T(function(a,o){var s,l=w(a);return l?l[i]=o:(s=r.indexOf(a))>=0?n[s]=o:(n[s=r.length]=o,r[s]=a),this})},delete___:{value:T(function(a){var o,s,l=w(a);return l?i in l&&delete l[i]:!((o=r.indexOf(a))<0||(s=r.length-1,r[o]=void 0,n[o]=n[s],r[o]=r[s],r.length=s,n.length=s,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(r,n){return this.get___(r,n)},writable:!0,configurable:!0},has:{value:function(r){return this.has___(r)},writable:!0,configurable:!0},set:{value:function(r,n){return this.set___(r,n)},writable:!0,configurable:!0},delete:{value:function(r){return this.delete___(r)},writable:!0,configurable:!0}}),"function"==typeof s?function(){function n(){this instanceof x||k();var r,n=new s,i=void 0,a=!1;return r=o?function(r,a){return n.set(r,a),n.has(r)||(i||(i=new x),i.set(r,a)),this}:function(r,o){if(a)try{n.set(r,o)}catch(n){i||(i=new x),i.set___(r,o)}else n.set(r,o);return this},Object.create(x.prototype,{get___:{value:T(function(r,a){return i?n.has(r)?n.get(r):i.get___(r,a):n.get(r,a)})},has___:{value:T(function(r){return n.has(r)||!!i&&i.has___(r)})},set___:{value:T(r)},delete___:{value:T(function(r){var a=!!n.delete(r);return i&&i.delete___(r)||a})},permitHostObjects___:{value:T(function(r){if(r!==b)throw Error("bogus call to permitHostObjects___");a=!0})}})}o&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=x.prototype,r.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),r.exports=x)}function b(r){r.permitHostObjects___&&r.permitHostObjects___(b)}function _(r){return!(r.substr(0,8)==p&&"___"===r.substr(r.length-3))}function w(r){if(r!==Object(r))throw TypeError("Not an object: "+r);var n=r[d];if(n&&n.key===r)return n;if(h(r)){n={key:r};try{return f(r,d,{value:n,writable:!1,enumerable:!1,configurable:!1}),n}catch(r){return}}}function T(r){return r.prototype=null,Object.freeze(r)}function k(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(r,n,i){var a=i(7178);r.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw Error("Weakmap-shim: Key must be object");var i=n.valueOf(r);return i&&i.identity===r?i:a(n,r)}}},7178:function(r){r.exports=function(r,n){var i={identity:n},a=r.valueOf;return Object.defineProperty(r,"valueOf",{value:function(r){return r!==n?a.apply(this,arguments):i},writable:!0}),i}},4037:function(r,n,i){var a=i(9222);r.exports=function(){var r=a();return{get:function(n,i){var a=r(n);return a.hasOwnProperty("value")?a.value:i},set:function(n,i){return r(n).value=i,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(r){"use strict";var n,i;r.exports=(n=(function(){return function(r,n,i,a,o,s){var l=r[0],u=i[0],c=[0];a|=0;var f=0;for(f=0;f<l;++f){var h=n[a]-s,p=n[a+u]-s;h>=0!=p>=0&&o.push(c[0]+.5+.5*(h+p)/(h-p)),a+=u,++c[0]}}}).bind(void 0,{funcName:"zeroCrossings"}),i={},function(r,a,o){var s=r.dtype,l=r.order,u=[s,l.join()].join(),c=i[u];return c||(i[u]=c=n([s,l])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,a,o)})},9584:function(r,n,i){"use strict";r.exports=function(r,n){var i=[];return n=+n||0,a(r.hi(r.shape[0]-1),i,n),i};var a=i(6183)},6601:function(){}},n={};function i(a){var o=n[a];if(void 0!==o)return o.exports;var s=n[a]={id:a,loaded:!1,exports:{}};return r[a].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}return i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(r){if("object"==typeof window)return window}}(),i.nmd=function(r){return r.paths=[],r.children||(r.children=[]),r},i(7386)}()},r.exports=a()},12856:function(r,n,i){"use strict";function a(r,n){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r})(r,n)}function o(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function s(r){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function l(r){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var u=i(95341),c=i(95280),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function h(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');var n=new Uint8Array(r);return Object.setPrototypeOf(n,p.prototype),n}function p(r,n,i){if("number"==typeof r){if("string"==typeof n)throw TypeError('The "string" argument must be of type string. Received type number');return g(r)}return d(r,n,i)}function d(r,n,i){if("string"==typeof r)return function(r,n){if("string"==typeof n&&""!==n||(n="utf8"),!p.isEncoding(n))throw TypeError("Unknown encoding: "+n);var i=0|b(r,n),a=h(i),o=a.write(r,n);return o!==i&&(a=a.slice(0,o)),a}(r,n);if(ArrayBuffer.isView(r))return function(r){if(q(r,Uint8Array)){var n=new Uint8Array(r);return m(n.buffer,n.byteOffset,n.byteLength)}return y(r)}(r);if(null==r)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r));if(q(r,ArrayBuffer)||r&&q(r.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(r,SharedArrayBuffer)||r&&q(r.buffer,SharedArrayBuffer)))return m(r,n,i);if("number"==typeof r)throw TypeError('The "value" argument must not be of type number. Received type number');var a=r.valueOf&&r.valueOf();if(null!=a&&a!==r)return p.from(a,n,i);var o=function(r){if(p.isBuffer(r)){var n,i=0|x(r.length),a=h(i);return 0===a.length||r.copy(a,0,0,i),a}return void 0!==r.length?"number"!=typeof r.length||(n=r.length)!=n?h(0):y(r):"Buffer"===r.type&&Array.isArray(r.data)?y(r.data):void 0}(r);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof r[Symbol.toPrimitive])return p.from(r[Symbol.toPrimitive]("string"),n,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(r))}function v(r){if("number"!=typeof r)throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function g(r){return v(r),h(r<0?0:0|x(r))}function y(r){for(var n=r.length<0?0:0|x(r.length),i=h(n),a=0;a<n;a+=1)i[a]=255&r[a];return i}function m(r,n,i){var a;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),p.prototype),a}function x(r){if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function b(r,n){if(p.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||q(r,ArrayBuffer))return r.byteLength;if("string"!=typeof r)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(r));var i=r.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===i)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return U(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(r).length;default:if(o)return a?-1:U(r).length;n=(""+n).toLowerCase(),o=!0}}function _(r,n,i){var a,o,s=!1;if((void 0===n||n<0)&&(n=0),n>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0)||(i>>>=0)<=(n>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return function(r,n,i){var a=r.length;(!n||n<0)&&(n=0),(!i||i<0||i>a)&&(i=a);for(var o="",s=n;s<i;++s)o+=G[r[s]];return o}(this,n,i);case"utf8":case"utf-8":return A(this,n,i);case"ascii":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(127&r[o]);return a}(this,n,i);case"latin1":case"binary":return function(r,n,i){var a="";i=Math.min(r.length,i);for(var o=n;o<i;++o)a+=String.fromCharCode(r[o]);return a}(this,n,i);case"base64":return a=n,o=i,0===a&&o===this.length?u.fromByteArray(this):u.fromByteArray(this.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(r,n,i){for(var a=r.slice(n,i),o="",s=0;s<a.length-1;s+=2)o+=String.fromCharCode(a[s]+256*a[s+1]);return o}(this,n,i);default:if(s)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),s=!0}}function w(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function T(r,n,i,a,o){var s;if(0===r.length)return -1;if("string"==typeof i?(a=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=o?0:r.length-1),i<0&&(i=r.length+i),i>=r.length){if(o)return -1;i=r.length-1}else if(i<0){if(!o)return -1;i=0}if("string"==typeof n&&(n=p.from(n,a)),p.isBuffer(n))return 0===n.length?-1:k(r,n,i,a,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(r,n,i):Uint8Array.prototype.lastIndexOf.call(r,n,i):k(r,[n],i,a,o);throw TypeError("val must be string, number or Buffer")}function k(r,n,i,a,o){var s,l=1,u=r.length,c=n.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(r.length<2||n.length<2)return -1;l=2,u/=2,c/=2,i/=2}function f(r,n){return 1===l?r[n]:r.readUInt16BE(n*l)}if(o){var h=-1;for(s=i;s<u;s++)if(f(r,s)===f(n,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===c)return h*l}else -1!==h&&(s-=s-h),h=-1}else for(i+c>u&&(i=u-c),s=i;s>=0;s--){for(var p=!0,d=0;d<c;d++)if(f(r,s+d)!==f(n,d)){p=!1;break}if(p)return s}return -1}function A(r,n,i){i=Math.min(r.length,i);for(var a=[],o=n;o<i;){var s=r[o],l=null,u=s>239?4:s>223?3:s>191?2:1;if(o+u<=i){var c=void 0,f=void 0,h=void 0,p=void 0;switch(u){case 1:s<128&&(l=s);break;case 2:128==(192&(c=r[o+1]))&&(p=(31&s)<<6|63&c)>127&&(l=p);break;case 3:c=r[o+1],f=r[o+2],128==(192&c)&&128==(192&f)&&(p=(15&s)<<12|(63&c)<<6|63&f)>2047&&(p<55296||p>57343)&&(l=p);break;case 4:c=r[o+1],f=r[o+2],h=r[o+3],128==(192&c)&&128==(192&f)&&128==(192&h)&&(p=(15&s)<<18|(63&c)<<12|(63&f)<<6|63&h)>65535&&p<1114112&&(l=p)}}null===l?(l=65533,u=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|1023&l),a.push(l),o+=u}return function(r){var n=r.length;if(n<=M)return String.fromCharCode.apply(String,r);for(var i="",a=0;a<n;)i+=String.fromCharCode.apply(String,r.slice(a,a+=M));return i}(a)}n.Buffer=p,n.SlowBuffer=function(r){return+r!=r&&(r=0),p.alloc(+r)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,p.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),42===r.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(r,n,i){return d(r,n,i)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(r,n,i){return v(r),r<=0?h(r):void 0!==n?"string"==typeof i?h(r).fill(n,i):h(r).fill(n):h(r)},p.allocUnsafe=function(r){return g(r)},p.allocUnsafeSlow=function(r){return g(r)},p.isBuffer=function(r){return null!=r&&!0===r._isBuffer&&r!==p.prototype},p.compare=function(r,n){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),q(n,Uint8Array)&&(n=p.from(n,n.offset,n.byteLength)),!p.isBuffer(r)||!p.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;for(var i=r.length,a=n.length,o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0},p.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(r,n){if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(0===r.length)return p.alloc(0);if(void 0===n)for(n=0,i=0;i<r.length;++i)n+=r[i].length;var i,a=p.allocUnsafe(n),o=0;for(i=0;i<r.length;++i){var s=r[i];if(q(s,Uint8Array))o+s.length>a.length?(p.isBuffer(s)||(s=p.from(s)),s.copy(a,o)):Uint8Array.prototype.set.call(a,s,o);else{if(!p.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(a,o)}o+=s.length}return a},p.byteLength=b,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)w(this,n,n+1);return this},p.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)w(this,n,n+3),w(this,n+1,n+2);return this},p.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)w(this,n,n+7),w(this,n+1,n+6),w(this,n+2,n+5),w(this,n+3,n+4);return this},p.prototype.toString=function(){var r=this.length;return 0===r?"":0==arguments.length?A(this,0,r):_.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(r){if(!p.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||0===p.compare(this,r)},p.prototype.inspect=function(){var r="",i=n.INSPECT_MAX_BYTES;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},f&&(p.prototype[f]=p.prototype.inspect),p.prototype.compare=function(r,n,i,a,o){if(q(r,Uint8Array)&&(r=p.from(r,r.offset,r.byteLength)),!p.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(r));if(void 0===n&&(n=0),void 0===i&&(i=r?r.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),n<0||i>r.length||a<0||o>this.length)throw RangeError("out of range index");if(a>=o&&n>=i)return 0;if(a>=o)return -1;if(n>=i)return 1;if(this===r)return 0;for(var s=(o>>>=0)-(a>>>=0),u=(i>>>=0)-(n>>>=0),c=Math.min(s,u),f=this.slice(a,o),h=r.slice(n,i),d=0;d<c;++d)if(f[d]!==h[d]){s=f[d],u=h[d];break}return s<u?-1:u<s?1:0},p.prototype.includes=function(r,n,i){return -1!==this.indexOf(r,n,i)},p.prototype.indexOf=function(r,n,i){return T(this,r,n,i,!0)},p.prototype.lastIndexOf=function(r,n,i){return T(this,r,n,i,!1)},p.prototype.write=function(r,n,i,a){if(void 0===n)a="utf8",i=this.length,n=0;else if(void 0===i&&"string"==typeof n)a=n,i=this.length,n=0;else{if(!isFinite(n))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(i)?(i>>>=0,void 0===a&&(a="utf8")):(a=i,i=void 0)}var o,s,l,u,c,f,h,p,d=this.length-n;if((void 0===i||i>d)&&(i=d),r.length>0&&(i<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var v=!1;;)switch(a){case"hex":return function(r,n,i,a){i=Number(i)||0;var o=r.length-i;a?(a=Number(a))>o&&(a=o):a=o;var s,l=n.length;for(a>l/2&&(a=l/2),s=0;s<a;++s){var u=parseInt(n.substr(2*s,2),16);if(u!=u)break;r[i+s]=u}return s}(this,r,n,i);case"utf8":case"utf-8":return o=n,s=i,H(U(r,this.length-o),this,o,s);case"ascii":case"latin1":case"binary":return l=n,u=i,H(function(r){for(var n=[],i=0;i<r.length;++i)n.push(255&r.charCodeAt(i));return n}(r),this,l,u);case"base64":return c=n,f=i,H(V(r),this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=n,p=i,H(function(r,n){for(var i,a,o=[],s=0;s<r.length&&!((n-=2)<0);++s)a=(i=r.charCodeAt(s))>>8,o.push(i%256),o.push(a);return o}(r,this.length-h),this,h,p);default:if(v)throw TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),v=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function S(r,n,i){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>i)throw RangeError("Trying to access beyond buffer length")}function E(r,n,i,a,o,s){if(!p.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw RangeError('"value" argument is out of bounds');if(i+a>r.length)throw RangeError("Index out of range")}function L(r,n,i,a,o){F(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s,s>>=8,r[i++]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,l>>=8,r[i++]=l,i}function C(r,n,i,a,o){F(n,a,o,r,i,7);var s=Number(n&BigInt(4294967295));r[i+7]=s,s>>=8,r[i+6]=s,s>>=8,r[i+5]=s,s>>=8,r[i+4]=s;var l=Number(n>>BigInt(32)&BigInt(4294967295));return r[i+3]=l,l>>=8,r[i+2]=l,l>>=8,r[i+1]=l,l>>=8,r[i]=l,i+8}function O(r,n,i,a,o,s){if(i+a>r.length||i<0)throw RangeError("Index out of range")}function P(r,n,i,a,o){return n=+n,i>>>=0,o||O(r,0,i,4),c.write(r,n,i,a,23,4),i+4}function I(r,n,i,a,o){return n=+n,i>>>=0,o||O(r,0,i,8),c.write(r,n,i,a,52,8),i+8}p.prototype.slice=function(r,n){var i=this.length;(r=~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),(n=void 0===n?i:~~n)<0?(n+=i)<0&&(n=0):n>i&&(n=i),n<r&&(n=r);var a=this.subarray(r,n);return Object.setPrototypeOf(a,p.prototype),a},p.prototype.readUintLE=p.prototype.readUIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a},p.prototype.readUintBE=p.prototype.readUIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r+--n],o=1;n>0&&(o*=256);)a+=this[r+--n]*o;return a},p.prototype.readUint8=p.prototype.readUInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),this[r]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]|this[r+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(r,n){return r>>>=0,n||S(r,2,this.length),this[r]<<8|this[r+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},p.prototype.readBigUInt64LE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=n+256*this[++r]+65536*this[++r]+16777216*this[++r],o=this[++r]+256*this[++r]+65536*this[++r]+16777216*i;return BigInt(a)+(BigInt(o)<<BigInt(32))}),p.prototype.readBigUInt64BE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];void 0!==n&&void 0!==i||N(r,this.length-8);var a=16777216*n+65536*this[++r]+256*this[++r]+this[++r],o=16777216*this[++r]+65536*this[++r]+256*this[++r]+i;return(BigInt(a)<<BigInt(32))+BigInt(o)}),p.prototype.readIntLE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=this[r],o=1,s=0;++s<n&&(o*=256);)a+=this[r+s]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*n)),a},p.prototype.readIntBE=function(r,n,i){r>>>=0,n>>>=0,i||S(r,n,this.length);for(var a=n,o=1,s=this[r+--a];a>0&&(o*=256);)s+=this[r+--a]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*n)),s},p.prototype.readInt8=function(r,n){return r>>>=0,n||S(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},p.prototype.readInt16LE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r]|this[r+1]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt16BE=function(r,n){r>>>=0,n||S(r,2,this.length);var i=this[r+1]|this[r]<<8;return 32768&i?4294901760|i:i},p.prototype.readInt32LE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},p.prototype.readInt32BE=function(r,n){return r>>>=0,n||S(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},p.prototype.readBigInt64LE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(i<<24))<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])}),p.prototype.readBigInt64BE=Z(function(r){B(r>>>=0,"offset");var n=this[r],i=this[r+7];return void 0!==n&&void 0!==i||N(r,this.length-8),(BigInt((n<<24)+65536*this[++r]+256*this[++r]+this[++r])<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+i)}),p.prototype.readFloatLE=function(r,n){return r>>>=0,n||S(r,4,this.length),c.read(this,r,!0,23,4)},p.prototype.readFloatBE=function(r,n){return r>>>=0,n||S(r,4,this.length),c.read(this,r,!1,23,4)},p.prototype.readDoubleLE=function(r,n){return r>>>=0,n||S(r,8,this.length),c.read(this,r,!0,52,8)},p.prototype.readDoubleBE=function(r,n){return r>>>=0,n||S(r,8,this.length),c.read(this,r,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=1,s=0;for(this[n]=255&r;++s<i&&(o*=256);)this[n+s]=r/o&255;return n+i},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(r,n,i,a){r=+r,n>>>=0,i>>>=0,a||E(this,r,n,i,Math.pow(2,8*i)-1,0);var o=i-1,s=1;for(this[n+o]=255&r;--o>=0&&(s*=256);)this[n+o]=r/s&255;return n+i},p.prototype.writeUint8=p.prototype.writeUInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,255,0),this[n]=255&r,n+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigUInt64LE=Z(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Z(function(r){return C(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=0,l=1,u=0;for(this[n]=255&r;++s<i&&(l*=256);)r<0&&0===u&&0!==this[n+s-1]&&(u=1),this[n+s]=(r/l>>0)-u&255;return n+i},p.prototype.writeIntBE=function(r,n,i,a){if(r=+r,n>>>=0,!a){var o=Math.pow(2,8*i-1);E(this,r,n,i,o-1,-o)}var s=i-1,l=1,u=0;for(this[n+s]=255&r;--s>=0&&(l*=256);)r<0&&0===u&&0!==this[n+s+1]&&(u=1),this[n+s]=(r/l>>0)-u&255;return n+i},p.prototype.writeInt8=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},p.prototype.writeInt16LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},p.prototype.writeInt16BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},p.prototype.writeInt32LE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},p.prototype.writeInt32BE=function(r,n,i){return r=+r,n>>>=0,i||E(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},p.prototype.writeBigInt64LE=Z(function(r){return L(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Z(function(r){return C(this,r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(r,n,i){return P(this,r,n,!0,i)},p.prototype.writeFloatBE=function(r,n,i){return P(this,r,n,!1,i)},p.prototype.writeDoubleLE=function(r,n,i){return I(this,r,n,!0,i)},p.prototype.writeDoubleBE=function(r,n,i){return I(this,r,n,!1,i)},p.prototype.copy=function(r,n,i,a){if(!p.isBuffer(r))throw TypeError("argument should be a Buffer");if(i||(i=0),a||0===a||(a=this.length),n>=r.length&&(n=r.length),n||(n=0),a>0&&a<i&&(a=i),a===i||0===r.length||0===this.length)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),r.length-n<a-i&&(a=r.length-n+i);var o=a-i;return this===r&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(n,i,a):Uint8Array.prototype.set.call(r,this.subarray(i,a),n),o},p.prototype.fill=function(r,n,i,a){if("string"==typeof r){if("string"==typeof n?(a=n,n=0,i=this.length):"string"==typeof i&&(a=i,i=this.length),void 0!==a&&"string"!=typeof a)throw TypeError("encoding must be a string");if("string"==typeof a&&!p.isEncoding(a))throw TypeError("Unknown encoding: "+a);if(1===r.length){var o,s=r.charCodeAt(0);("utf8"===a&&s<128||"latin1"===a)&&(r=s)}}else"number"==typeof r?r&=255:"boolean"==typeof r&&(r=Number(r));if(n<0||this.length<n||this.length<i)throw RangeError("Out of range index");if(i<=n)return this;if(n>>>=0,i=void 0===i?this.length:i>>>0,r||(r=0),"number"==typeof r)for(o=n;o<i;++o)this[o]=r;else{var l=p.isBuffer(r)?r:p.from(r,a),u=l.length;if(0===u)throw TypeError('The value "'+r+'" is invalid for argument "value"');for(o=0;o<i-n;++o)this[o+n]=l[o%u]}return this};var D={};function z(r,n,i){D[r]=function(i){!function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),n&&a(r,n)}(h,i);var u,c,f=(c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}(),function(){var r,n=s(h);return r=c?Reflect.construct(n,arguments,s(this).constructor):n.apply(this,arguments),function(r,n){if(n&&("object"===l(n)||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");return o(r)}(this,r)});function h(){var i;return function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,h),Object.defineProperty(o(i=f.call(this)),"message",{value:n.apply(o(i),arguments),writable:!0,configurable:!0}),i.name="".concat(i.name," [").concat(r,"]"),i.stack,delete i.name,i}return u=[{key:"code",get:function(){return r},set:function(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(r,"]: ").concat(this.message)}}],function(r,n){for(var i,a=0;a<n.length;a++){var o=n[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,(i=function(r,n){if("object"!==l(r)||null===r)return r;var i=r[Symbol.toPrimitive];if(void 0!==i){var a=i.call(r,"string");if("object"!==l(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(o.key),"symbol"===l(i)?i:String(i)),o)}}(h.prototype,u),Object.defineProperty(h,"prototype",{writable:!1}),h}(i)}function R(r){for(var n="",i=r.length,a="-"===r[0]?1:0;i>=a+4;i-=3)n="_".concat(r.slice(i-3,i)).concat(n);return"".concat(r.slice(0,i)).concat(n)}function F(r,n,i,a,o,s){if(r>i||r<n){var l,u="bigint"==typeof n?"n":"";throw l=s>3?0===n||n===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(s+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(s+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(s+1)-1).concat(u):">= ".concat(n).concat(u," and <= ").concat(i).concat(u),new D.ERR_OUT_OF_RANGE("value",l,r)}B(o,"offset"),void 0!==a[o]&&void 0!==a[o+s]||N(o,a.length-(s+1))}function B(r,n){if("number"!=typeof r)throw new D.ERR_INVALID_ARG_TYPE(n,"number",r)}function N(r,n,i){if(Math.floor(r)!==r)throw B(r,i),new D.ERR_OUT_OF_RANGE(i||"offset","an integer",r);if(n<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(i||"offset",">= ".concat(i?1:0," and <= ").concat(n),r)}z("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?"".concat(r," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(r,n){return'The "'.concat(r,'" argument must be of type number. Received type ').concat(l(n))},TypeError),z("ERR_OUT_OF_RANGE",function(r,n,i){var a=i;return Number.isInteger(i)&&Math.abs(i)>4294967296?a=R(String(i)):"bigint"==typeof i&&(a=String(i),(i>Math.pow(BigInt(2),BigInt(32))||i<-Math.pow(BigInt(2),BigInt(32)))&&(a=R(a)),a+="n"),'The value of "'.concat(r,'" is out of range.')+" It must be ".concat(n,". Received ").concat(a)},RangeError);var j=/[^+/0-9A-Za-z-_]/g;function U(r,n){var i;n=n||1/0;for(var a=r.length,o=null,s=[],l=0;l<a;++l){if((i=r.charCodeAt(l))>55295&&i<57344){if(!o){if(i>56319||l+1===a){(n-=3)>-1&&s.push(239,191,189);continue}o=i;continue}if(i<56320){(n-=3)>-1&&s.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&(n-=3)>-1&&s.push(239,191,189);if(o=null,i<128){if((n-=1)<0)break;s.push(i)}else if(i<2048){if((n-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((n-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw Error("Invalid code point");if((n-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function V(r){return u.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(r))}function H(r,n,i,a){var o;for(o=0;o<a&&!(o+i>=n.length||o>=r.length);++o)n[o+i]=r[o];return o}function q(r,n){return r instanceof n||null!=r&&null!=r.constructor&&null!=r.constructor.name&&r.constructor.name===n.name}var G=function(){for(var r="0123456789abcdef",n=Array(256),i=0;i<16;++i)for(var a=16*i,o=0;o<16;++o)n[a+o]=r[i]+r[o];return n}();function Z(r){return"undefined"==typeof BigInt?Y:r}function Y(){throw Error("BigInt not supported")}},35791:function(r){"use strict";r.exports=o,r.exports.isMobile=o,r.exports.default=o;var n=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,a=/android|ipad|playbook|silk/i;function o(r){r||(r={});var o=r.ua;if(o||"undefined"==typeof navigator||(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),"string"!=typeof o)return!1;var s=n.test(o)&&!i.test(o)||!!r.tablet&&a.test(o);return!s&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==o.indexOf("Macintosh")&&-1!==o.indexOf("Safari")&&(s=!0),s}},86781:function(r,n,i){"use strict";i.r(n),i.d(n,{sankeyCenter:function(){return d},sankeyCircular:function(){return E},sankeyJustify:function(){return p},sankeyLeft:function(){return f},sankeyRight:function(){return h}});var a=i(33064),o=i(15140),s=i(45879),l=i(2502),u=i.n(l);function c(r){return r.target.depth}function f(r){return r.depth}function h(r,n){return n-1-r.height}function p(r,n){return r.sourceLinks.length?r.depth:n-1}function d(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?(0,a.VV)(r.sourceLinks,c)-1:0}function v(r){return function(){return r}}var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function y(r,n){return x(r.source,n.source)||r.index-n.index}function m(r,n){return x(r.target,n.target)||r.index-n.index}function x(r,n){return r.partOfCycle===n.partOfCycle?r.y0-n.y0:"top"===r.circularLinkType||"bottom"===n.circularLinkType?-1:1}function b(r){return r.value}function _(r){return(r.y0+r.y1)/2}function w(r){return _(r.source)}function T(r){return _(r.target)}function k(r){return r.index}function A(r){return r.nodes}function M(r){return r.links}function S(r,n){var i=r.get(n);if(!i)throw Error("missing: "+n);return i}function E(){var r,n,i=0,s=0,l=1,c=1,f=24,h=k,d=p,E=A,C=M,P=32,I=2,z=null;function R(){var p={nodes:E.apply(null,arguments),links:C.apply(null,arguments)};(function(r){r.nodes.forEach(function(r,n){r.index=n,r.sourceLinks=[],r.targetLinks=[]});var n=(0,o.UI)(r.nodes,h);r.links.forEach(function(r,i){r.index=i;var a=r.source,o=r.target;"object"!==(void 0===a?"undefined":g(a))&&(a=r.source=S(n,a)),"object"!==(void 0===o?"undefined":g(o))&&(o=r.target=S(n,o)),a.sourceLinks.push(r),o.targetLinks.push(r)})})(p),function(r,n,i){var a=0;if(null===i){for(var o=[],s=0;s<r.links.length;s++){var l=r.links[s],c=l.source.index,f=l.target.index;o[c]||(o[c]=[]),o[f]||(o[f]=[]),-1===o[c].indexOf(f)&&o[c].push(f)}var h=u()(o);h.sort(function(r,n){return r.length-n.length});var p={};for(s=0;s<h.length;s++){var d=h[s].slice(-2);p[d[0]]||(p[d[0]]={}),p[d[0]][d[1]]=!0}r.links.forEach(function(r){var n=r.target.index,i=r.source.index;n===i||p[i]&&p[i][n]?(r.circular=!0,r.circularLinkID=a,a+=1):r.circular=!1})}else r.links.forEach(function(r){r.source[i]<r.target[i]?r.circular=!1:(r.circular=!0,r.circularLinkID=a,a+=1)})}(p,0,z),function(r){r.nodes.forEach(function(r){r.partOfCycle=!1,r.value=Math.max((0,a.Sm)(r.sourceLinks,b),(0,a.Sm)(r.targetLinks,b)),r.sourceLinks.forEach(function(n){n.circular&&(r.partOfCycle=!0,r.circularLinkType=n.circularLinkType)}),r.targetLinks.forEach(function(n){n.circular&&(r.partOfCycle=!0,r.circularLinkType=n.circularLinkType)})})}(p),function(r){var n,i,a;for(n=r.nodes,i=[],a=0;n.length;++a,n=i,i=[])n.forEach(function(r){r.depth=a,r.sourceLinks.forEach(function(r){0>i.indexOf(r.target)&&!r.circular&&i.push(r.target)})});for(n=r.nodes,i=[],a=0;n.length;++a,n=i,i=[])n.forEach(function(r){r.height=a,r.targetLinks.forEach(function(r){0>i.indexOf(r.source)&&!r.circular&&i.push(r.source)})});r.nodes.forEach(function(r){r.column=Math.floor(d.call(null,r,a))})}(p),L(p,h),function(u,h,p){var d=(0,o.b1)().key(function(r){return r.column}).sortKeys(a.j2).entries(u.nodes).map(function(r){return r.values});(function(o){if(n){var h,p,v,g,y,m,x,_,w,T,k=1/0;d.forEach(function(r){var i=c*n/(r.length+1);k=i<k?i:k}),r=k}var A=(0,a.VV)(d,function(n){return(c-s-(n.length-1)*r)/(0,a.Sm)(n,b)});A*=.3,u.links.forEach(function(r){r.width=r.value*A});var M=(h=0,p=0,v=0,g=0,y=(0,a.Fp)(u.nodes,function(r){return r.column}),u.links.forEach(function(r){r.circular&&("top"==r.circularLinkType?h+=r.width:p+=r.width,0==r.target.column&&(g+=r.width),r.source.column==y&&(v+=r.width))}),{top:h=h>0?h+25+10:h,bottom:p=p>0?p+25+10:p,left:g=g>0?g+25+10:g,right:v=v>0?v+25+10:v}),S=(m=(0,a.Fp)(u.nodes,function(r){return r.column}),x=l-i,_=c-s,w=x/(x+M.right+M.left),T=_/(_+M.top+M.bottom),i=i*w+M.left,l=0==M.right?l:l*w,s=s*T+M.top,c*=T,u.nodes.forEach(function(r){r.x0=i+r.column*((l-i-f)/m),r.x1=r.x0+f}),T);A*=S,u.links.forEach(function(r){r.width=r.value*A}),d.forEach(function(r){var n=r.length;r.forEach(function(r,i){r.depth==d.length-1&&1==n||0==r.depth&&1==n?r.y0=c/2-r.value*A:r.partOfCycle?0==O(r,o)?r.y0=c/2+i:"top"==r.circularLinkType?r.y0=s+i:r.y0=c-r.value*A-i:0==M.top||0==M.bottom?r.y0=(c-s)/n*i:r.y0=(c-s)/2-n/2+i,r.y1=r.y0+r.value*A})})})(p),y();for(var v=1,g=h;g>0;--g)(function(r,n){var i=d.length;d.forEach(function(o){var s=o.length,l=o[0].depth;o.forEach(function(o){var u;if(o.sourceLinks.length||o.targetLinks.length){if(o.partOfCycle&&O(o,n)>0);else if(0==l&&1==s)u=o.y1-o.y0,o.y0=c/2-u/2,o.y1=c/2+u/2;else if(l==i-1&&1==s)u=o.y1-o.y0,o.y0=c/2-u/2,o.y1=c/2+u/2;else{var f=(0,a.J6)(o.sourceLinks,T),h=(0,a.J6)(o.targetLinks,w),p=((f&&h?(f+h)/2:f||h)-_(o))*r;o.y0+=p,o.y1+=p}}})})})(v*=.99,p),y();function y(){d.forEach(function(n){var i,a,o,l=s,u=n.length;for(n.sort(x),o=0;o<u;++o)(a=l-(i=n[o]).y0)>0&&(i.y0+=a,i.y1+=a),l=i.y1+r;if((a=l-r-c)>0)for(l=i.y0-=a,i.y1-=a,o=u-2;o>=0;--o)(a=(i=n[o]).y1+r-l)>0&&(i.y0-=a,i.y1-=a),l=i.y0})}}(p,P,h),F(p);for(var v=0;v<4;v++)G(p,c,h),Z(p,0,h),function(r,n,i,a){r.links.forEach(function(o){if(!o.circular&&o.target.column-o.source.column>1){var s=o.source.column+1,l=o.target.column-1,u=1,c=l-s+1;for(u=1;s<=l;s++,u++)r.nodes.forEach(function(l){if(l.column==s){var f,h=u/(c+1),p=Math.pow(1-h,3),d=3*h*Math.pow(1-h,2),v=3*Math.pow(h,2)*(1-h),g=Math.pow(h,3),y=p*o.y0+d*o.y0+v*o.y1+g*o.y1,m=y-o.width/2,x=y+o.width/2;m>l.y0&&m<l.y1?(f=l.y1-m+10,f="bottom"==l.circularLinkType?f:-f,l=q(l,f,n,i),r.nodes.forEach(function(r){var o;a(r)!=a(l)&&r.column==l.column&&((o=l).y0>r.y0&&o.y0<r.y1||o.y1>r.y0&&o.y1<r.y1||o.y0<r.y0&&o.y1>r.y1)&&q(r,f,n,i)})):(x>l.y0&&x<l.y1||m<l.y0&&x>l.y1)&&(f=x-l.y0+10,l=q(l,f,n,i),r.nodes.forEach(function(r){a(r)!=a(l)&&r.column==l.column&&r.y0<l.y1&&r.y1>l.y1&&q(r,f,n,i)}))}})}})}(p,s,c,h),G(p,c,h),Z(p,0,h);return function(r,n,i){var o=r.nodes,s=r.links,l=!1,u=!1;if(s.forEach(function(r){"top"==r.circularLinkType?l=!0:"bottom"==r.circularLinkType&&(u=!0)}),0==l||0==u){var c=(0,a.VV)(o,function(r){return r.y0}),f=(i-n)/((0,a.Fp)(o,function(r){return r.y1})-c);o.forEach(function(r){var n=(r.y1-r.y0)*f;r.y0=(r.y0-c)*f,r.y1=r.y0+n}),s.forEach(function(r){r.y0=(r.y0-c)*f,r.y1=(r.y1-c)*f,r.width=r.width*f})}}(p,s,c),D(p,I,c,h),p}function F(r){r.nodes.forEach(function(r){r.sourceLinks.sort(m),r.targetLinks.sort(y)}),r.nodes.forEach(function(r){var n=r.y0,i=n,a=r.y1,o=a;r.sourceLinks.forEach(function(r){r.circular?(r.y0=a-r.width/2,a-=r.width):(r.y0=n+r.width/2,n+=r.width)}),r.targetLinks.forEach(function(r){r.circular?(r.y1=o-r.width/2,o-=r.width):(r.y1=i+r.width/2,i+=r.width)})})}return R.nodeId=function(r){return arguments.length?(h="function"==typeof r?r:v(r),R):h},R.nodeAlign=function(r){return arguments.length?(d="function"==typeof r?r:v(r),R):d},R.nodeWidth=function(r){return arguments.length?(f=+r,R):f},R.nodePadding=function(n){return arguments.length?(r=+n,R):r},R.nodes=function(r){return arguments.length?(E="function"==typeof r?r:v(r),R):E},R.links=function(r){return arguments.length?(C="function"==typeof r?r:v(r),R):C},R.size=function(r){return arguments.length?(i=s=0,l=+r[0],c=+r[1],R):[l-i,c-s]},R.extent=function(r){return arguments.length?(i=+r[0][0],l=+r[1][0],s=+r[0][1],c=+r[1][1],R):[[i,s],[l,c]]},R.iterations=function(r){return arguments.length?(P=+r,R):P},R.circularLinkGap=function(r){return arguments.length?(I=+r,R):I},R.nodePaddingRatio=function(r){return arguments.length?(n=+r,R):n},R.sortNodes=function(r){return arguments.length?(z=r,R):z},R.update=function(r){return L(r,h),F(r),r.links.forEach(function(r){r.circular&&(r.circularLinkType=r.y0+r.y1<c?"top":"bottom",r.source.circularLinkType=r.circularLinkType,r.target.circularLinkType=r.circularLinkType)}),G(r,c,h,!1),Z(r,0,h),D(r,I,c,h),r},R}function L(r,n){var i=0,a=0;r.links.forEach(function(o){o.circular&&(o.source.circularLinkType||o.target.circularLinkType?o.circularLinkType=o.source.circularLinkType?o.source.circularLinkType:o.target.circularLinkType:o.circularLinkType=i<a?"top":"bottom","top"==o.circularLinkType?i+=1:a+=1,r.nodes.forEach(function(r){n(r)!=n(o.source)&&n(r)!=n(o.target)||(r.circularLinkType=o.circularLinkType)}))}),r.links.forEach(function(r){r.circular&&(r.source.circularLinkType==r.target.circularLinkType&&(r.circularLinkType=r.source.circularLinkType),W(r,n)&&(r.circularLinkType=r.source.circularLinkType))})}function C(r){var n=Math.abs(r.y1-r.y0);return Math.atan(Math.abs(r.target.x0-r.source.x1)/n)}function O(r,n){var i=0;r.sourceLinks.forEach(function(r){i=r.circular&&!W(r,n)?i+1:i});var a=0;return r.targetLinks.forEach(function(r){a=r.circular&&!W(r,n)?a+1:a}),i+a}function P(r){var n=r.source.sourceLinks,i=0;n.forEach(function(r){i=r.circular?i+1:i});var a=r.target.targetLinks,o=0;return a.forEach(function(r){o=r.circular?o+1:o}),!(i>1||o>1)}function I(r,n,i){return r.sort(z),r.forEach(function(a,o){var s,l,u=0;if(W(a,i)&&P(a))a.circularPathData.verticalBuffer=u+a.width/2;else{for(var c=0;c<o;c++)if(s=r[o],l=r[c],!(s.source.column<l.target.column||s.target.column>l.source.column)){var f=r[c].circularPathData.verticalBuffer+r[c].width/2+n;u=f>u?f:u}a.circularPathData.verticalBuffer=u+a.width/2}}),r}function D(r,n,i,o){var l=(0,a.VV)(r.links,function(r){return r.source.y0});r.links.forEach(function(r){r.circular&&(r.circularPathData={})}),I(r.links.filter(function(r){return"top"==r.circularLinkType}),n,o),I(r.links.filter(function(r){return"bottom"==r.circularLinkType}),n,o),r.links.forEach(function(a){if(a.circular){if(a.circularPathData.arcRadius=a.width+10,a.circularPathData.leftNodeBuffer=5,a.circularPathData.rightNodeBuffer=5,a.circularPathData.sourceWidth=a.source.x1-a.source.x0,a.circularPathData.sourceX=a.source.x0+a.circularPathData.sourceWidth,a.circularPathData.targetX=a.target.x0,a.circularPathData.sourceY=a.y0,a.circularPathData.targetY=a.y1,W(a,o)&&P(a))a.circularPathData.leftSmallArcRadius=10+a.width/2,a.circularPathData.leftLargeArcRadius=10+a.width/2,a.circularPathData.rightSmallArcRadius=10+a.width/2,a.circularPathData.rightLargeArcRadius=10+a.width/2,"bottom"==a.circularLinkType?(a.circularPathData.verticalFullExtent=a.source.y1+25+a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.rightLargeArcRadius):(a.circularPathData.verticalFullExtent=a.source.y0-25-a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.rightLargeArcRadius);else{var u=a.source.column,c=a.circularLinkType,f=r.links.filter(function(r){return r.source.column==u&&r.circularLinkType==c});"bottom"==a.circularLinkType?f.sort(F):f.sort(R);var h=0;f.forEach(function(r,i){r.circularLinkID==a.circularLinkID&&(a.circularPathData.leftSmallArcRadius=10+a.width/2+h,a.circularPathData.leftLargeArcRadius=10+a.width/2+i*n+h),h+=r.width}),u=a.target.column,f=r.links.filter(function(r){return r.target.column==u&&r.circularLinkType==c}),"bottom"==a.circularLinkType?f.sort(N):f.sort(B),h=0,f.forEach(function(r,i){r.circularLinkID==a.circularLinkID&&(a.circularPathData.rightSmallArcRadius=10+a.width/2+h,a.circularPathData.rightLargeArcRadius=10+a.width/2+i*n+h),h+=r.width}),"bottom"==a.circularLinkType?(a.circularPathData.verticalFullExtent=Math.max(i,a.source.y1,a.target.y1)+25+a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent-a.circularPathData.rightLargeArcRadius):(a.circularPathData.verticalFullExtent=l-25-a.circularPathData.verticalBuffer,a.circularPathData.verticalLeftInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.leftLargeArcRadius,a.circularPathData.verticalRightInnerExtent=a.circularPathData.verticalFullExtent+a.circularPathData.rightLargeArcRadius)}a.circularPathData.leftInnerExtent=a.circularPathData.sourceX+a.circularPathData.leftNodeBuffer,a.circularPathData.rightInnerExtent=a.circularPathData.targetX-a.circularPathData.rightNodeBuffer,a.circularPathData.leftFullExtent=a.circularPathData.sourceX+a.circularPathData.leftLargeArcRadius+a.circularPathData.leftNodeBuffer,a.circularPathData.rightFullExtent=a.circularPathData.targetX-a.circularPathData.rightLargeArcRadius-a.circularPathData.rightNodeBuffer}if(a.circular)a.path="top"==a.circularLinkType?"M"+a.circularPathData.sourceX+" "+a.circularPathData.sourceY+" L"+a.circularPathData.leftInnerExtent+" "+a.circularPathData.sourceY+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftSmallArcRadius+" 0 0 0 "+a.circularPathData.leftFullExtent+" "+(a.circularPathData.sourceY-a.circularPathData.leftSmallArcRadius)+" L"+a.circularPathData.leftFullExtent+" "+a.circularPathData.verticalLeftInnerExtent+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftLargeArcRadius+" 0 0 0 "+a.circularPathData.leftInnerExtent+" "+a.circularPathData.verticalFullExtent+" L"+a.circularPathData.rightInnerExtent+" "+a.circularPathData.verticalFullExtent+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightLargeArcRadius+" 0 0 0 "+a.circularPathData.rightFullExtent+" "+a.circularPathData.verticalRightInnerExtent+" L"+a.circularPathData.rightFullExtent+" "+(a.circularPathData.targetY-a.circularPathData.rightSmallArcRadius)+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightSmallArcRadius+" 0 0 0 "+a.circularPathData.rightInnerExtent+" "+a.circularPathData.targetY+" L"+a.circularPathData.targetX+" "+a.circularPathData.targetY:"M"+a.circularPathData.sourceX+" "+a.circularPathData.sourceY+" L"+a.circularPathData.leftInnerExtent+" "+a.circularPathData.sourceY+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftSmallArcRadius+" 0 0 1 "+a.circularPathData.leftFullExtent+" "+(a.circularPathData.sourceY+a.circularPathData.leftSmallArcRadius)+" L"+a.circularPathData.leftFullExtent+" "+a.circularPathData.verticalLeftInnerExtent+" A"+a.circularPathData.leftLargeArcRadius+" "+a.circularPathData.leftLargeArcRadius+" 0 0 1 "+a.circularPathData.leftInnerExtent+" "+a.circularPathData.verticalFullExtent+" L"+a.circularPathData.rightInnerExtent+" "+a.circularPathData.verticalFullExtent+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightLargeArcRadius+" 0 0 1 "+a.circularPathData.rightFullExtent+" "+a.circularPathData.verticalRightInnerExtent+" L"+a.circularPathData.rightFullExtent+" "+(a.circularPathData.targetY+a.circularPathData.rightSmallArcRadius)+" A"+a.circularPathData.rightLargeArcRadius+" "+a.circularPathData.rightSmallArcRadius+" 0 0 1 "+a.circularPathData.rightInnerExtent+" "+a.circularPathData.targetY+" L"+a.circularPathData.targetX+" "+a.circularPathData.targetY;else{var p=(0,s.h5)().source(function(r){return[r.source.x0+(r.source.x1-r.source.x0),r.y0]}).target(function(r){return[r.target.x0,r.y1]});a.path=p(a)}})}function z(r,n){return j(r)==j(n)?"bottom"==r.circularLinkType?F(r,n):R(r,n):j(n)-j(r)}function R(r,n){return r.y0-n.y0}function F(r,n){return n.y0-r.y0}function B(r,n){return r.y1-n.y1}function N(r,n){return n.y1-r.y1}function j(r){return r.target.column-r.source.column}function U(r){return r.target.x0-r.source.x1}function V(r,n){var i=C(r),a=U(n)/Math.tan(i);return"up"==Y(r)?r.y1+a:r.y1-a}function H(r,n){var i=C(r),a=U(n)/Math.tan(i);return"up"==Y(r)?r.y1-a:r.y1+a}function q(r,n,i,a){return r.y0+n>=i&&r.y1+n<=a&&(r.y0=r.y0+n,r.y1=r.y1+n,r.targetLinks.forEach(function(r){r.y1=r.y1+n}),r.sourceLinks.forEach(function(r){r.y0=r.y0+n})),r}function G(r,n,i,a){r.nodes.forEach(function(o){a&&o.y+(o.y1-o.y0)>n&&(o.y=o.y-(o.y+(o.y1-o.y0)-n));var s=r.links.filter(function(r){return i(r.source)==i(o)}),l=s.length;l>1&&s.sort(function(r,n){if(!r.circular&&!n.circular){if(r.target.column==n.target.column||Y(r)!=Y(n))return r.y1-n.y1;if(r.target.column>n.target.column){var i=H(n,r);return r.y1-i}if(n.target.column>r.target.column)return H(r,n)-n.y1}return r.circular&&!n.circular?"top"==r.circularLinkType?-1:1:n.circular&&!r.circular?"top"==n.circularLinkType?1:-1:r.circular&&n.circular?r.circularLinkType===n.circularLinkType&&"top"==r.circularLinkType?r.target.column===n.target.column?r.target.y1-n.target.y1:n.target.column-r.target.column:r.circularLinkType===n.circularLinkType&&"bottom"==r.circularLinkType?r.target.column===n.target.column?n.target.y1-r.target.y1:r.target.column-n.target.column:"top"==r.circularLinkType?-1:1:void 0});var u=o.y0;s.forEach(function(r){r.y0=u+r.width/2,u+=r.width}),s.forEach(function(r,n){if("bottom"==r.circularLinkType){for(var i=n+1,a=0;i<l;i++)a+=s[i].width;r.y0=o.y1-a-r.width/2}})})}function Z(r,n,i){r.nodes.forEach(function(n){var a=r.links.filter(function(r){return i(r.target)==i(n)}),o=a.length;o>1&&a.sort(function(r,n){if(!r.circular&&!n.circular){if(r.source.column==n.source.column||Y(r)!=Y(n))return r.y0-n.y0;if(n.source.column<r.source.column){var i=V(n,r);return r.y0-i}if(r.source.column<n.source.column)return V(r,n)-n.y0}return r.circular&&!n.circular?"top"==r.circularLinkType?-1:1:n.circular&&!r.circular?"top"==n.circularLinkType?1:-1:r.circular&&n.circular?r.circularLinkType===n.circularLinkType&&"top"==r.circularLinkType?r.source.column===n.source.column?r.source.y1-n.source.y1:r.source.column-n.source.column:r.circularLinkType===n.circularLinkType&&"bottom"==r.circularLinkType?r.source.column===n.source.column?r.source.y1-n.source.y1:n.source.column-r.source.column:"top"==r.circularLinkType?-1:1:void 0});var s=n.y0;a.forEach(function(r){r.y1=s+r.width/2,s+=r.width}),a.forEach(function(r,i){if("bottom"==r.circularLinkType){for(var s=i+1,l=0;s<o;s++)l+=a[s].width;r.y1=n.y1-l-r.width/2}})})}function Y(r){return r.y0-r.y1>0?"up":"down"}function W(r,n){return n(r.source)==n(r.target)}},30838:function(r,n,i){"use strict";i.r(n),i.d(n,{sankey:function(){return k},sankeyCenter:function(){return f},sankeyJustify:function(){return c},sankeyLeft:function(){return l},sankeyLinkHorizontal:function(){return E},sankeyRight:function(){return u}});var a=i(33064),o=i(15140);function s(r){return r.target.depth}function l(r){return r.depth}function u(r,n){return n-1-r.height}function c(r,n){return r.sourceLinks.length?r.depth:n-1}function f(r){return r.targetLinks.length?r.depth:r.sourceLinks.length?(0,a.VV)(r.sourceLinks,s)-1:0}function h(r){return function(){return r}}function p(r,n){return v(r.source,n.source)||r.index-n.index}function d(r,n){return v(r.target,n.target)||r.index-n.index}function v(r,n){return r.y0-n.y0}function g(r){return r.value}function y(r){return(r.y0+r.y1)/2}function m(r){return y(r.source)*r.value}function x(r){return y(r.target)*r.value}function b(r){return r.index}function _(r){return r.nodes}function w(r){return r.links}function T(r,n){var i=r.get(n);if(!i)throw Error("missing: "+n);return i}function k(){var r=0,n=0,i=1,s=1,l=24,u=8,f=b,k=c,A=_,M=w,S=32;function E(){var c={nodes:A.apply(null,arguments),links:M.apply(null,arguments)};return function(r){r.nodes.forEach(function(r,n){r.index=n,r.sourceLinks=[],r.targetLinks=[]});var n=(0,o.UI)(r.nodes,f);r.links.forEach(function(r,i){r.index=i;var a=r.source,o=r.target;"object"!=typeof a&&(a=r.source=T(n,a)),"object"!=typeof o&&(o=r.target=T(n,o)),a.sourceLinks.push(r),o.targetLinks.push(r)})}(c),function(r){r.nodes.forEach(function(r){r.value=Math.max((0,a.Sm)(r.sourceLinks,g),(0,a.Sm)(r.targetLinks,g))})}(c),function(n){for(a=n.nodes,o=[],s=0;a.length;++s,a=o,o=[])a.forEach(function(r){r.depth=s,r.sourceLinks.forEach(function(r){0>o.indexOf(r.target)&&o.push(r.target)})});for(a=n.nodes,o=[],s=0;a.length;++s,a=o,o=[])a.forEach(function(r){r.height=s,r.targetLinks.forEach(function(r){0>o.indexOf(r.source)&&o.push(r.source)})});var a,o,s,u=(i-r-l)/(s-1);n.nodes.forEach(function(n){n.x1=(n.x0=r+Math.max(0,Math.min(s-1,Math.floor(k.call(null,n,s))))*u)+l})}(c),function(r){var i,l,c,f=(0,o.b1)().key(function(r){return r.x0}).sortKeys(a.j2).entries(r.nodes).map(function(r){return r.values});i=(0,a.Fp)(f,function(r){return r.length}),u>(l=.6666666666666666*(s-n)/(i-1))&&(u=l),c=(0,a.VV)(f,function(r){return(s-n-(r.length-1)*u)/(0,a.Sm)(r,g)}),f.forEach(function(r){r.forEach(function(r,n){r.y1=(r.y0=n)+r.value*c})}),r.links.forEach(function(r){r.width=r.value*c}),d();for(var h=1,p=S;p>0;--p)(function(r){f.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var i=((0,a.Sm)(n.sourceLinks,x)/(0,a.Sm)(n.sourceLinks,g)-y(n))*r;n.y0+=i,n.y1+=i}})})})(h*=.99),d(),function(r){f.forEach(function(n){n.forEach(function(n){if(n.targetLinks.length){var i=((0,a.Sm)(n.targetLinks,m)/(0,a.Sm)(n.targetLinks,g)-y(n))*r;n.y0+=i,n.y1+=i}})})}(h),d();function d(){f.forEach(function(r){var i,a,o,l=n,c=r.length;for(r.sort(v),o=0;o<c;++o)(a=l-(i=r[o]).y0)>0&&(i.y0+=a,i.y1+=a),l=i.y1+u;if((a=l-u-s)>0)for(l=i.y0-=a,i.y1-=a,o=c-2;o>=0;--o)(a=(i=r[o]).y1+u-l)>0&&(i.y0-=a,i.y1-=a),l=i.y0})}}(c),L(c),c}function L(r){r.nodes.forEach(function(r){r.sourceLinks.sort(d),r.targetLinks.sort(p)}),r.nodes.forEach(function(r){var n=r.y0,i=n;r.sourceLinks.forEach(function(r){r.y0=n+r.width/2,n+=r.width}),r.targetLinks.forEach(function(r){r.y1=i+r.width/2,i+=r.width})})}return E.update=function(r){return L(r),r},E.nodeId=function(r){return arguments.length?(f="function"==typeof r?r:h(r),E):f},E.nodeAlign=function(r){return arguments.length?(k="function"==typeof r?r:h(r),E):k},E.nodeWidth=function(r){return arguments.length?(l=+r,E):l},E.nodePadding=function(r){return arguments.length?(u=+r,E):u},E.nodes=function(r){return arguments.length?(A="function"==typeof r?r:h(r),E):A},E.links=function(r){return arguments.length?(M="function"==typeof r?r:h(r),E):M},E.size=function(a){return arguments.length?(r=n=0,i=+a[0],s=+a[1],E):[i-r,s-n]},E.extent=function(a){return arguments.length?(r=+a[0][0],i=+a[1][0],n=+a[0][1],s=+a[1][1],E):[[r,n],[i,s]]},E.iterations=function(r){return arguments.length?(S=+r,E):S},E}var A=i(45879);function M(r){return[r.source.x1,r.y0]}function S(r){return[r.target.x0,r.y1]}function E(){return(0,A.h5)().source(M).target(S)}},39898:function(r,n,i){var a,o;(function(){var s={version:"3.8.0"},l=[].slice,u=function(r){return l.call(r)},c=self.document;function f(r){return r&&(r.ownerDocument||r.document||r).documentElement}function h(r){return r&&(r.ownerDocument&&r.ownerDocument.defaultView||r.document&&r||r.defaultView)}if(c)try{u(c.documentElement.childNodes)[0].nodeType}catch(r){u=function(r){for(var n=r.length,i=Array(n);n--;)i[n]=r[n];return i}}if(Date.now||(Date.now=function(){return+new Date}),c)try{c.createElement("DIV").style.setProperty("opacity",0,"")}catch(r){var p=this.Element.prototype,d=p.setAttribute,v=p.setAttributeNS,g=this.CSSStyleDeclaration.prototype,y=g.setProperty;p.setAttribute=function(r,n){d.call(this,r,n+"")},p.setAttributeNS=function(r,n,i){v.call(this,r,n,i+"")},g.setProperty=function(r,n,i){y.call(this,r,n+"",i)}}function m(r,n){return r<n?-1:r>n?1:r>=n?0:NaN}function x(r){return null===r?NaN:+r}function b(r){return!isNaN(r)}function _(r){return{left:function(n,i,a,o){for(arguments.length<3&&(a=0),arguments.length<4&&(o=n.length);a<o;){var s=a+o>>>1;0>r(n[s],i)?a=s+1:o=s}return a},right:function(n,i,a,o){for(arguments.length<3&&(a=0),arguments.length<4&&(o=n.length);a<o;){var s=a+o>>>1;r(n[s],i)>0?o=s:a=s+1}return a}}}s.ascending=m,s.descending=function(r,n){return n<r?-1:n>r?1:n>=r?0:NaN},s.min=function(r,n){var i,a,o=-1,s=r.length;if(1==arguments.length){for(;++o<s;)if(null!=(a=r[o])&&a>=a){i=a;break}for(;++o<s;)null!=(a=r[o])&&i>a&&(i=a)}else{for(;++o<s;)if(null!=(a=n.call(r,r[o],o))&&a>=a){i=a;break}for(;++o<s;)null!=(a=n.call(r,r[o],o))&&i>a&&(i=a)}return i},s.max=function(r,n){var i,a,o=-1,s=r.length;if(1==arguments.length){for(;++o<s;)if(null!=(a=r[o])&&a>=a){i=a;break}for(;++o<s;)null!=(a=r[o])&&a>i&&(i=a)}else{for(;++o<s;)if(null!=(a=n.call(r,r[o],o))&&a>=a){i=a;break}for(;++o<s;)null!=(a=n.call(r,r[o],o))&&a>i&&(i=a)}return i},s.extent=function(r,n){var i,a,o,s=-1,l=r.length;if(1==arguments.length){for(;++s<l;)if(null!=(a=r[s])&&a>=a){i=o=a;break}for(;++s<l;)null!=(a=r[s])&&(i>a&&(i=a),o<a&&(o=a))}else{for(;++s<l;)if(null!=(a=n.call(r,r[s],s))&&a>=a){i=o=a;break}for(;++s<l;)null!=(a=n.call(r,r[s],s))&&(i>a&&(i=a),o<a&&(o=a))}return[i,o]},s.sum=function(r,n){var i,a=0,o=r.length,s=-1;if(1==arguments.length)for(;++s<o;)b(i=+r[s])&&(a+=i);else for(;++s<o;)b(i=+n.call(r,r[s],s))&&(a+=i);return a},s.mean=function(r,n){var i,a=0,o=r.length,s=-1,l=o;if(1==arguments.length)for(;++s<o;)b(i=x(r[s]))?a+=i:--l;else for(;++s<o;)b(i=x(n.call(r,r[s],s)))?a+=i:--l;if(l)return a/l},s.quantile=function(r,n){var i=(r.length-1)*n+1,a=Math.floor(i),o=+r[a-1],s=i-a;return s?o+s*(r[a]-o):o},s.median=function(r,n){var i,a=[],o=r.length,l=-1;if(1==arguments.length)for(;++l<o;)b(i=x(r[l]))&&a.push(i);else for(;++l<o;)b(i=x(n.call(r,r[l],l)))&&a.push(i);if(a.length)return s.quantile(a.sort(m),.5)},s.variance=function(r,n){var i,a,o=r.length,s=0,l=0,u=-1,c=0;if(1==arguments.length)for(;++u<o;)b(i=x(r[u]))&&(l+=(a=i-s)*(i-(s+=a/++c)));else for(;++u<o;)b(i=x(n.call(r,r[u],u)))&&(l+=(a=i-s)*(i-(s+=a/++c)));if(c>1)return l/(c-1)},s.deviation=function(){var r=s.variance.apply(this,arguments);return r?Math.sqrt(r):r};var w=_(m);function T(r){return r.length}s.bisectLeft=w.left,s.bisect=s.bisectRight=w.right,s.bisector=function(r){return _(1===r.length?function(n,i){return m(r(n),i)}:r)},s.shuffle=function(r,n,i){(s=arguments.length)<3&&(i=r.length,s<2&&(n=0));for(var a,o,s=i-n;s;)o=Math.random()*s--|0,a=r[s+n],r[s+n]=r[o+n],r[o+n]=a;return r},s.permute=function(r,n){for(var i=n.length,a=Array(i);i--;)a[i]=r[n[i]];return a},s.pairs=function(r){for(var n=0,i=r.length-1,a=r[0],o=Array(i<0?0:i);n<i;)o[n]=[a,a=r[++n]];return o},s.transpose=function(r){if(!(o=r.length))return[];for(var n=-1,i=s.min(r,T),a=Array(i);++n<i;)for(var o,l=-1,u=a[n]=Array(o);++l<o;)u[l]=r[l][n];return a},s.zip=function(){return s.transpose(arguments)},s.keys=function(r){var n=[];for(var i in r)n.push(i);return n},s.values=function(r){var n=[];for(var i in r)n.push(r[i]);return n},s.entries=function(r){var n=[];for(var i in r)n.push({key:i,value:r[i]});return n},s.merge=function(r){for(var n,i,a,o=r.length,s=-1,l=0;++s<o;)l+=r[s].length;for(i=Array(l);--o>=0;)for(n=(a=r[o]).length;--n>=0;)i[--l]=a[n];return i};var k=Math.abs;function A(r,n){for(var i in n)Object.defineProperty(r.prototype,i,{value:n[i],enumerable:!1})}function M(){this._=Object.create(null)}function S(r){return"__proto__"==(r+="")||"\0"===r[0]?"\0"+r:r}function E(r){return"\0"===(r+="")[0]?r.slice(1):r}function L(r){return S(r) in this._}function C(r){return(r=S(r))in this._&&delete this._[r]}function O(){var r=[];for(var n in this._)r.push(E(n));return r}function P(){var r=0;for(var n in this._)++r;return r}function I(){for(var r in this._)return!1;return!0}function D(){this._=Object.create(null)}function z(r){return r}function R(r,n){if(n in r)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var i=0,a=F.length;i<a;++i){var o=F[i]+n;if(o in r)return o}}s.range=function(r,n,i){if(arguments.length<3&&(i=1,arguments.length<2&&(n=r,r=0)),(n-r)/i==1/0)throw Error("infinite range");var a,o=[],s=function(r){for(var n=1;r*n%1;)n*=10;return n}(k(i)),l=-1;if(r*=s,n*=s,(i*=s)<0)for(;(a=r+i*++l)>n;)o.push(a/s);else for(;(a=r+i*++l)<n;)o.push(a/s);return o},s.map=function(r,n){var i=new M;if(r instanceof M)r.forEach(function(r,n){i.set(r,n)});else if(Array.isArray(r)){var a,o=-1,s=r.length;if(1==arguments.length)for(;++o<s;)i.set(o,r[o]);else for(;++o<s;)i.set(n.call(r,a=r[o],o),a)}else for(var l in r)i.set(l,r[l]);return i},A(M,{has:L,get:function(r){return this._[S(r)]},set:function(r,n){return this._[S(r)]=n},remove:C,keys:O,values:function(){var r=[];for(var n in this._)r.push(this._[n]);return r},entries:function(){var r=[];for(var n in this._)r.push({key:E(n),value:this._[n]});return r},size:P,empty:I,forEach:function(r){for(var n in this._)r.call(this,E(n),this._[n])}}),s.nest=function(){var r,n,i={},a=[],o=[];function l(o,s,u){if(u>=a.length)return n?n.call(i,s):r?s.sort(r):s;for(var c,f,h,p,d=-1,v=s.length,g=a[u++],y=new M;++d<v;)(p=y.get(c=g(f=s[d])))?p.push(f):y.set(c,[f]);return o?(f=o(),h=function(r,n){f.set(r,l(o,n,u))}):(f={},h=function(r,n){f[r]=l(o,n,u)}),y.forEach(h),f}return i.map=function(r,n){return l(n,r,0)},i.entries=function(r){return function r(n,i){if(i>=a.length)return n;var s=[],l=o[i++];return n.forEach(function(n,a){s.push({key:n,values:r(a,i)})}),l?s.sort(function(r,n){return l(r.key,n.key)}):s}(l(s.map,r,0),0)},i.key=function(r){return a.push(r),i},i.sortKeys=function(r){return o[a.length-1]=r,i},i.sortValues=function(n){return r=n,i},i.rollup=function(r){return n=r,i},i},s.set=function(r){var n=new D;if(r)for(var i=0,a=r.length;i<a;++i)n.add(r[i]);return n},A(D,{has:L,add:function(r){return this._[S(r+="")]=!0,r},remove:C,values:O,size:P,empty:I,forEach:function(r){for(var n in this._)r.call(this,E(n))}}),s.behavior={},s.rebind=function(r,n){for(var i,a=1,o=arguments.length;++a<o;)r[i=arguments[a]]=function(r,n,i){return function(){var a=i.apply(n,arguments);return a===n?r:a}}(r,n,n[i]);return r};var F=["webkit","ms","moz","Moz","o","O"];function B(){}function N(){}function j(r){var n=[],i=new M;function a(){for(var i,a=n,o=-1,s=a.length;++o<s;)(i=a[o].on)&&i.apply(this,arguments);return r}return a.on=function(a,o){var s,l=i.get(a);return arguments.length<2?l&&l.on:(l&&(l.on=null,n=n.slice(0,s=n.indexOf(l)).concat(n.slice(s+1)),i.remove(a)),o&&n.push(i.set(a,{on:o})),r)},a}function U(){s.event.preventDefault()}function V(){for(var r,n=s.event;r=n.sourceEvent;)n=r;return n}function H(r){for(var n=new N,i=0,a=arguments.length;++i<a;)n[arguments[i]]=j(n);return n.of=function(i,a){return function(o){try{var l=o.sourceEvent=s.event;o.target=r,s.event=o,n[o.type].apply(i,a)}finally{s.event=l}}},n}s.dispatch=function(){for(var r=new N,n=-1,i=arguments.length;++n<i;)r[arguments[n]]=j(r);return r},N.prototype.on=function(r,n){var i=r.indexOf("."),a="";if(i>=0&&(a=r.slice(i+1),r=r.slice(0,i)),r)return arguments.length<2?this[r].on(a):this[r].on(a,n);if(2==arguments.length){if(null==n)for(r in this)this.hasOwnProperty(r)&&this[r].on(a,null);return this}},s.event=null,s.requote=function(r){return r.replace(q,"\\$&")};var q=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(r,n){r.__proto__=n}:function(r,n){for(var i in n)r[i]=n[i]};function Z(r){return G(r,J),r}var Y=function(r,n){return n.querySelector(r)},W=function(r,n){return n.querySelectorAll(r)},X=function(r,n){var i=r.matches||r[R(r,"matchesSelector")];return(X=function(r,n){return i.call(r,n)})(r,n)};"function"==typeof Sizzle&&(Y=function(r,n){return Sizzle(r,n)[0]||null},W=Sizzle,X=Sizzle.matchesSelector),s.selection=function(){return s.select(c.documentElement)};var J=s.selection.prototype=[];function K(r){return"function"==typeof r?r:function(){return Y(r,this)}}function $(r){return"function"==typeof r?r:function(){return W(r,this)}}J.select=function(r){var n,i,a,o,s=[];r=K(r);for(var l=-1,u=this.length;++l<u;){s.push(n=[]),n.parentNode=(a=this[l]).parentNode;for(var c=-1,f=a.length;++c<f;)(o=a[c])?(n.push(i=r.call(o,o.__data__,c,l)),i&&"__data__"in o&&(i.__data__=o.__data__)):n.push(null)}return Z(s)},J.selectAll=function(r){var n,i,a=[];r=$(r);for(var o=-1,s=this.length;++o<s;)for(var l=this[o],c=-1,f=l.length;++c<f;)(i=l[c])&&(a.push(n=u(r.call(i,i.__data__,c,o))),n.parentNode=i);return Z(a)};var Q="http://www.w3.org/1999/xhtml",tt={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(r,n){return r=s.ns.qualify(r),null==n?r.local?function(){this.removeAttributeNS(r.space,r.local)}:function(){this.removeAttribute(r)}:"function"==typeof n?r.local?function(){var i=n.apply(this,arguments);null==i?this.removeAttributeNS(r.space,r.local):this.setAttributeNS(r.space,r.local,i)}:function(){var i=n.apply(this,arguments);null==i?this.removeAttribute(r):this.setAttribute(r,i)}:r.local?function(){this.setAttributeNS(r.space,r.local,n)}:function(){this.setAttribute(r,n)}}function tr(r){return r.trim().replace(/\s+/g," ")}function tn(r){return RegExp("(?:^|\\s+)"+s.requote(r)+"(?:\\s+|$)","g")}function ti(r){return(r+"").trim().split(/^|\s+/)}function ta(r,n){var i=(r=ti(r).map(to)).length;return"function"==typeof n?function(){for(var a=-1,o=n.apply(this,arguments);++a<i;)r[a](this,o)}:function(){for(var a=-1;++a<i;)r[a](this,n)}}function to(r){var n=tn(r);return function(i,a){if(o=i.classList)return a?o.add(r):o.remove(r);var o=i.getAttribute("class")||"";a?(n.lastIndex=0,n.test(o)||i.setAttribute("class",tr(o+" "+r))):i.setAttribute("class",tr(o.replace(n," ")))}}function ts(r,n,i){return null==n?function(){this.style.removeProperty(r)}:"function"==typeof n?function(){var a=n.apply(this,arguments);null==a?this.style.removeProperty(r):this.style.setProperty(r,a,i)}:function(){this.style.setProperty(r,n,i)}}function tl(r,n){return null==n?function(){delete this[r]}:"function"==typeof n?function(){var i=n.apply(this,arguments);null==i?delete this[r]:this[r]=i}:function(){this[r]=n}}function tu(r){return"function"==typeof r?r:(r=s.ns.qualify(r)).local?function(){return this.ownerDocument.createElementNS(r.space,r.local)}:function(){var n=this.ownerDocument,i=this.namespaceURI;return i===Q&&n.documentElement.namespaceURI===Q?n.createElement(r):n.createElementNS(i,r)}}function tc(){var r=this.parentNode;r&&r.removeChild(this)}function tf(r){return{__data__:r}}function th(r){return function(){return X(this,r)}}function tp(r){return arguments.length||(r=m),function(n,i){return n&&i?r(n.__data__,i.__data__):!n-!i}}function td(r,n){for(var i=0,a=r.length;i<a;i++)for(var o,s=r[i],l=0,u=s.length;l<u;l++)(o=s[l])&&n(o,l,i);return r}function tv(r){return G(r,tg),r}s.ns={prefix:tt,qualify:function(r){var n=r.indexOf(":"),i=r;return n>=0&&"xmlns"!==(i=r.slice(0,n))&&(r=r.slice(n+1)),tt.hasOwnProperty(i)?{space:tt[i],local:r}:r}},J.attr=function(r,n){if(arguments.length<2){if("string"==typeof r){var i=this.node();return(r=s.ns.qualify(r)).local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}for(n in r)this.each(te(n,r[n]));return this}return this.each(te(r,n))},J.classed=function(r,n){if(arguments.length<2){if("string"==typeof r){var i=this.node(),a=(r=ti(r)).length,o=-1;if(n=i.classList){for(;++o<a;)if(!n.contains(r[o]))return!1}else for(n=i.getAttribute("class");++o<a;)if(!tn(r[o]).test(n))return!1;return!0}for(n in r)this.each(ta(n,r[n]));return this}return this.each(ta(r,n))},J.style=function(r,n,i){var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(n=""),r)this.each(ts(i,r[i],n));return this}if(a<2){var o=this.node();return h(o).getComputedStyle(o,null).getPropertyValue(r)}i=""}return this.each(ts(r,n,i))},J.property=function(r,n){if(arguments.length<2){if("string"==typeof r)return this.node()[r];for(n in r)this.each(tl(n,r[n]));return this}return this.each(tl(r,n))},J.text=function(r){return arguments.length?this.each("function"==typeof r?function(){var n=r.apply(this,arguments);this.textContent=null==n?"":n}:null==r?function(){this.textContent=""}:function(){this.textContent=r}):this.node().textContent},J.html=function(r){return arguments.length?this.each("function"==typeof r?function(){var n=r.apply(this,arguments);this.innerHTML=null==n?"":n}:null==r?function(){this.innerHTML=""}:function(){this.innerHTML=r}):this.node().innerHTML},J.append=function(r){return r=tu(r),this.select(function(){return this.appendChild(r.apply(this,arguments))})},J.insert=function(r,n){return r=tu(r),n=K(n),this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})},J.remove=function(){return this.each(tc)},J.data=function(r,n){var i,a,o=-1,s=this.length;if(!arguments.length){for(r=Array(s=(i=this[0]).length);++o<s;)(a=i[o])&&(r[o]=a.__data__);return r}function l(r,i){var a,o,s,l=r.length,h=i.length,p=Math.min(l,h),d=Array(h),v=Array(h),g=Array(l);if(n){var y,m=new M,x=Array(l);for(a=-1;++a<l;)(o=r[a])&&(m.has(y=n.call(o,o.__data__,a))?g[a]=o:m.set(y,o),x[a]=y);for(a=-1;++a<h;)(o=m.get(y=n.call(i,s=i[a],a)))?!0!==o&&(d[a]=o,o.__data__=s):v[a]=tf(s),m.set(y,!0);for(a=-1;++a<l;)a in x&&!0!==m.get(x[a])&&(g[a]=r[a])}else{for(a=-1;++a<p;)o=r[a],s=i[a],o?(o.__data__=s,d[a]=o):v[a]=tf(s);for(;a<h;++a)v[a]=tf(i[a]);for(;a<l;++a)g[a]=r[a]}v.update=d,v.parentNode=d.parentNode=g.parentNode=r.parentNode,u.push(v),c.push(d),f.push(g)}var u=tv([]),c=Z([]),f=Z([]);if("function"==typeof r)for(;++o<s;)l(i=this[o],r.call(i,i.parentNode.__data__,o));else for(;++o<s;)l(i=this[o],r);return c.enter=function(){return u},c.exit=function(){return f},c},J.datum=function(r){return arguments.length?this.property("__data__",r):this.property("__data__")},J.filter=function(r){var n,i,a,o=[];"function"!=typeof r&&(r=th(r));for(var s=0,l=this.length;s<l;s++){o.push(n=[]),n.parentNode=(i=this[s]).parentNode;for(var u=0,c=i.length;u<c;u++)(a=i[u])&&r.call(a,a.__data__,u,s)&&n.push(a)}return Z(o)},J.order=function(){for(var r=-1,n=this.length;++r<n;)for(var i,a=this[r],o=a.length-1,s=a[o];--o>=0;)(i=a[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this},J.sort=function(r){r=tp.apply(this,arguments);for(var n=-1,i=this.length;++n<i;)this[n].sort(r);return this.order()},J.each=function(r){return td(this,function(n,i,a){r.call(n,n.__data__,i,a)})},J.call=function(r){var n=u(arguments);return r.apply(n[0]=this,n),this},J.empty=function(){return!this.node()},J.node=function(){for(var r=0,n=this.length;r<n;r++)for(var i=this[r],a=0,o=i.length;a<o;a++){var s=i[a];if(s)return s}return null},J.size=function(){var r=0;return td(this,function(){++r}),r};var tg=[];function ty(r,n,i){var a="__on"+r,o=r.indexOf("."),l=tx;o>0&&(r=r.slice(0,o));var c=tm.get(r);function f(){var n=this[a];n&&(this.removeEventListener(r,n,n.$),delete this[a])}return c&&(r=c,l=tb),o?n?function(){var o=l(n,u(arguments));f.call(this),this.addEventListener(r,this[a]=o,o.$=i),o._=n}:f:n?B:function(){var n,i=RegExp("^__on([^.]+)"+s.requote(r)+"$");for(var a in this)if(n=a.match(i)){var o=this[a];this.removeEventListener(n[1],o,o.$),delete this[a]}}}s.selection.enter=tv,s.selection.enter.prototype=tg,tg.append=J.append,tg.empty=J.empty,tg.node=J.node,tg.call=J.call,tg.size=J.size,tg.select=function(r){for(var n,i,a,o,s,l=[],u=-1,c=this.length;++u<c;){a=(o=this[u]).update,l.push(n=[]),n.parentNode=o.parentNode;for(var f=-1,h=o.length;++f<h;)(s=o[f])?(n.push(a[f]=i=r.call(o.parentNode,s.__data__,f,u)),i.__data__=s.__data__):n.push(null)}return Z(l)},tg.insert=function(r,n){var i,a,o;return arguments.length<2&&(i=this,n=function(r,n,s){var l,u=i[s].update,c=u.length;for(s!=o&&(o=s,a=0),n>=a&&(a=n+1);!(l=u[a])&&++a<c;);return l}),J.insert.call(this,r,n)},s.select=function(r){var n;return"string"==typeof r?(n=[Y(r,c)]).parentNode=c.documentElement:(n=[r]).parentNode=f(r),Z([n])},s.selectAll=function(r){var n;return"string"==typeof r?(n=u(W(r,c))).parentNode=c.documentElement:(n=u(r)).parentNode=null,Z([n])},J.on=function(r,n,i){var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(n=!1),r)this.each(ty(i,r[i],n));return this}if(a<2)return(a=this.node()["__on"+r])&&a._;i=!1}return this.each(ty(r,n,i))};var tm=s.map({mouseenter:"mouseover",mouseleave:"mouseout"});function tx(r,n){return function(i){var a=s.event;s.event=i,n[0]=this.__data__;try{r.apply(this,n)}finally{s.event=a}}}function tb(r,n){var i=tx(r,n);return function(r){var n=r.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||i.call(this,r)}}c&&tm.forEach(function(r){"on"+r in c&&tm.remove(r)});var t_,tw=0;function tT(r){var n=".dragsuppress-"+ ++tw,i="click"+n,a=s.select(h(r)).on("touchmove"+n,U).on("dragstart"+n,U).on("selectstart"+n,U);if(null==t_&&(t_=!("onselectstart"in r)&&R(r.style,"userSelect")),t_){var o=f(r).style,l=o[t_];o[t_]="none"}return function(r){if(a.on(n,null),t_&&(o[t_]=l),r){var s=function(){a.on(i,null)};a.on(i,function(){U(),s()},!0),setTimeout(s,0)}}}s.mouse=function(r){return tA(r,V())};var tk=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function tA(r,n){n.changedTouches&&(n=n.changedTouches[0]);var i=r.ownerSVGElement||r;if(i.createSVGPoint){var a=i.createSVGPoint();if(tk<0){var o=h(r);if(o.scrollX||o.scrollY){var l=(i=s.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();tk=!(l.f||l.e),i.remove()}}return tk?(a.x=n.pageX,a.y=n.pageY):(a.x=n.clientX,a.y=n.clientY),[(a=a.matrixTransform(r.getScreenCTM().inverse())).x,a.y]}var u=r.getBoundingClientRect();return[n.clientX-u.left-r.clientLeft,n.clientY-u.top-r.clientTop]}function tM(){return s.event.changedTouches[0].identifier}s.touch=function(r,n,i){if(arguments.length<3&&(i=n,n=V().changedTouches),n){for(var a,o=0,s=n.length;o<s;++o)if((a=n[o]).identifier===i)return tA(r,a)}},s.behavior.drag=function(){var r=H(o,"drag","dragstart","dragend"),n=null,i=l(B,s.mouse,h,"mousemove","mouseup"),a=l(tM,s.touch,z,"touchmove","touchend");function o(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function l(i,a,o,l,u){return function(){var c,f=s.event.target.correspondingElement||s.event.target,h=this.parentNode,p=r.of(this,arguments),d=0,v=i(),g=".drag"+(null==v?"":"-"+v),y=s.select(o(f)).on(l+g,function(){var r,n,i=a(h,v);i&&(r=i[0]-x[0],n=i[1]-x[1],d|=r|n,x=i,p({type:"drag",x:i[0]+c[0],y:i[1]+c[1],dx:r,dy:n}))}).on(u+g,function(){a(h,v)&&(y.on(l+g,null).on(u+g,null),m(d),p({type:"dragend"}))}),m=tT(f),x=a(h,v);c=n?[(c=n.apply(this,arguments)).x-x[0],c.y-x[1]]:[0,0],p({type:"dragstart"})}}return o.origin=function(r){return arguments.length?(n=r,o):n},s.rebind(o,r,"on")},s.touches=function(r,n){return arguments.length<2&&(n=V().touches),n?u(n).map(function(n){var i=tA(r,n);return i.identifier=n.identifier,i}):[]};var tS=1e-6*1e-6,tE=Math.PI,tL=2*tE,tC=tL-1e-6,tO=tE/2,tP=tE/180,tI=180/tE;function tD(r){return r>1?tO:r<-1?-tO:Math.asin(r)}function tz(r){return((r=Math.exp(r))+1/r)/2}var tR=Math.SQRT2;s.interpolateZoom=function(r,n){var i,a,o=r[0],s=r[1],l=r[2],u=n[0],c=n[1],f=n[2],h=u-o,p=c-s,d=h*h+p*p;if(d<tS)a=Math.log(f/l)/tR,i=function(r){return[o+r*h,s+r*p,l*Math.exp(tR*r*a)]};else{var v=Math.sqrt(d),g=(f*f-l*l+4*d)/(2*l*2*v),y=(f*f-l*l-4*d)/(2*f*2*v),m=Math.log(Math.sqrt(g*g+1)-g);a=(Math.log(Math.sqrt(y*y+1)-y)-m)/tR,i=function(r){var n,i,u=r*a,c=tz(m),f=l/(2*v)*(((i=Math.exp(2*(i=tR*u+m)))-1)/(i+1)*c-((n=Math.exp(n=m))-1/n)/2);return[o+f*h,s+f*p,l*c/tz(tR*u+m)]}}return i.duration=1e3*a,i},s.behavior.zoom=function(){var r,n,i,a,o,l,u,f,p,d={x:0,y:0,k:1},v=[960,500],g=tN,y=250,m=0,x="mousedown.zoom",b="mousemove.zoom",_="mouseup.zoom",w="touchstart.zoom",T=H(k,"zoomstart","zoom","zoomend");function k(r){r.on(x,I).on(tB+".zoom",z).on("dblclick.zoom",R).on(w,D)}function A(r){return[(r[0]-d.x)/d.k,(r[1]-d.y)/d.k]}function M(r){d.k=Math.max(g[0],Math.min(g[1],r))}function S(r,n){var i;n=[(i=n)[0]*d.k+d.x,i[1]*d.k+d.y],d.x+=r[0]-n[0],d.y+=r[1]-n[1]}function E(r,i,a,o){r.__chart__={x:d.x,y:d.y,k:d.k},M(Math.pow(2,o)),S(n=i,a),r=s.select(r),y>0&&(r=r.transition().duration(y)),r.call(k.event)}function L(){u&&u.domain(l.range().map(function(r){return(r-d.x)/d.k}).map(l.invert)),p&&p.domain(f.range().map(function(r){return(r-d.y)/d.k}).map(f.invert))}function C(r){m++||r({type:"zoomstart"})}function O(r){L(),r({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function P(r){--m||(r({type:"zoomend"}),n=null)}function I(){var r=this,n=T.of(r,arguments),i=0,a=s.select(h(r)).on(b,function(){i=1,S(s.mouse(r),o),O(n)}).on(_,function(){a.on(b,null).on(_,null),l(i),P(n)}),o=A(s.mouse(r)),l=tT(r);nW.call(r),C(n)}function D(){var r,n=this,i=T.of(n,arguments),a={},l=0,u=".zoom-"+s.event.changedTouches[0].identifier,c="touchmove"+u,f="touchend"+u,h=[],p=s.select(n),v=tT(n);function g(){var i=s.touches(n);return r=d.k,i.forEach(function(r){r.identifier in a&&(a[r.identifier]=A(r))}),i}function y(){var r=s.event.target;s.select(r).on(c,m).on(f,b),h.push(r);for(var i=s.event.changedTouches,u=0,p=i.length;u<p;++u)a[i[u].identifier]=null;var v=g(),y=Date.now();if(1===v.length){if(y-o<500){var x=v[0];E(n,x,a[x.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),U()}o=y}else if(v.length>1){x=v[0];var _=v[1],w=x[0]-_[0],T=x[1]-_[1];l=w*w+T*T}}function m(){var u,c,f,h,p=s.touches(n);nW.call(n);for(var d=0,v=p.length;d<v;++d,h=null)if(h=a[(f=p[d]).identifier]){if(c)break;u=f,c=h}if(h){var g=(g=f[0]-u[0])*g+(g=f[1]-u[1])*g,y=l&&Math.sqrt(g/l);u=[(u[0]+f[0])/2,(u[1]+f[1])/2],c=[(c[0]+h[0])/2,(c[1]+h[1])/2],M(y*r)}o=null,S(u,c),O(i)}function b(){if(s.event.touches.length){for(var r=s.event.changedTouches,n=0,o=r.length;n<o;++n)delete a[r[n].identifier];for(var l in a)return void g()}s.selectAll(h).on(u,null),p.on(x,I).on(w,D),v(),P(i)}y(),C(i),p.on(x,null).on(w,y)}function z(){var o=T.of(this,arguments);a?clearTimeout(a):(nW.call(this),r=A(n=i||s.mouse(this)),C(o)),a=setTimeout(function(){a=null,P(o)},50),U(),M(Math.pow(2,.002*tF())*d.k),S(n,r),O(o)}function R(){var r=s.mouse(this),n=Math.log(d.k)/Math.LN2;E(this,r,A(r),s.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return tB||(tB="onwheel"in c?(tF=function(){return-s.event.deltaY*(s.event.deltaMode?120:1)},"wheel"):"onmousewheel"in c?(tF=function(){return s.event.wheelDelta},"mousewheel"):(tF=function(){return-s.event.detail},"MozMousePixelScroll")),k.event=function(r){r.each(function(){var r=T.of(this,arguments),i=d;nK?s.select(this).transition().each("start.zoom",function(){d=this.__chart__||{x:0,y:0,k:1},C(r)}).tween("zoom:zoom",function(){var a=v[0],o=v[1],l=n?n[0]:a/2,u=n?n[1]:o/2,c=s.interpolateZoom([(l-d.x)/d.k,(u-d.y)/d.k,a/d.k],[(l-i.x)/i.k,(u-i.y)/i.k,a/i.k]);return function(n){var i=c(n),o=a/i[2];this.__chart__=d={x:l-i[0]*o,y:u-i[1]*o,k:o},O(r)}}).each("interrupt.zoom",function(){P(r)}).each("end.zoom",function(){P(r)}):(this.__chart__=d,C(r),O(r),P(r))})},k.translate=function(r){return arguments.length?(d={x:+r[0],y:+r[1],k:d.k},L(),k):[d.x,d.y]},k.scale=function(r){return arguments.length?(d={x:d.x,y:d.y,k:null},M(+r),L(),k):d.k},k.scaleExtent=function(r){return arguments.length?(g=null==r?tN:[+r[0],+r[1]],k):g},k.center=function(r){return arguments.length?(i=r&&[+r[0],+r[1]],k):i},k.size=function(r){return arguments.length?(v=r&&[+r[0],+r[1]],k):v},k.duration=function(r){return arguments.length?(y=+r,k):y},k.x=function(r){return arguments.length?(u=r,l=r.copy(),d={x:0,y:0,k:1},k):u},k.y=function(r){return arguments.length?(p=r,f=r.copy(),d={x:0,y:0,k:1},k):p},s.rebind(k,T,"on")};var tF,tB,tN=[0,1/0];function tj(){}function tU(r,n,i){return this instanceof tU?(this.h=+r,this.s=+n,void(this.l=+i)):arguments.length<2?r instanceof tU?new tU(r.h,r.s,r.l):t4(""+r,t6,tU):new tU(r,n,i)}s.color=tj,tj.prototype.toString=function(){return this.rgb()+""},s.hsl=tU;var tV=tU.prototype=new tj;function tH(r,n,i){var a,o;function s(r){var n;return Math.round(255*((n=r)>360?n-=360:n<0&&(n+=360),n<60?a+(o-a)*n/60:n<180?o:n<240?a+(o-a)*(240-n)/60:a))}return r=isNaN(r)?0:(r%=360)<0?r+360:r,n=isNaN(n)||n<0?0:n>1?1:n,a=2*(i=i<0?0:i>1?1:i)-(o=i<=.5?i*(1+n):i+n-i*n),new t0(s(r+120),s(r),s(r-120))}function tq(r,n,i){var a,o,l;return this instanceof tq?(this.h=+r,this.c=+n,void(this.l=+i)):arguments.length<2?r instanceof tq?new tq(r.h,r.c,r.l):(a=r instanceof tY?r.l:(r=t8((r=s.rgb(r)).r,r.g,r.b)).l,o=r.a,l=r.b,a>0?new tq(Math.atan2(l,o)*tI,Math.sqrt(o*o+l*l),a):new tq(NaN,NaN,a)):new tq(r,n,i)}tV.brighter=function(r){return r=Math.pow(.7,arguments.length?r:1),new tU(this.h,this.s,this.l/r)},tV.darker=function(r){return r=Math.pow(.7,arguments.length?r:1),new tU(this.h,this.s,r*this.l)},tV.rgb=function(){return tH(this.h,this.s,this.l)},s.hcl=tq;var tG=tq.prototype=new tj;function tZ(r,n,i){return isNaN(r)&&(r=0),isNaN(n)&&(n=0),new tY(i,Math.cos(r*=tP)*n,Math.sin(r)*n)}function tY(r,n,i){return this instanceof tY?(this.l=+r,this.a=+n,void(this.b=+i)):arguments.length<2?r instanceof tY?new tY(r.l,r.a,r.b):r instanceof tq?tZ(r.h,r.c,r.l):t8((r=t0(r)).r,r.g,r.b):new tY(r,n,i)}tG.brighter=function(r){return new tq(this.h,this.c,Math.min(100,this.l+tW*(arguments.length?r:1)))},tG.darker=function(r){return new tq(this.h,this.c,Math.max(0,this.l-tW*(arguments.length?r:1)))},tG.rgb=function(){return tZ(this.h,this.c,this.l).rgb()},s.lab=tY;var tW=18,tX=tY.prototype=new tj;function tJ(r,n,i){var a=(r+16)/116,o=a+n/500,s=a-i/200;return new t0(tQ(3.2404542*(o=.95047*tK(o))-1.5371385*(a=1*tK(a))-.4985314*(s=1.08883*tK(s))),tQ(-.969266*o+1.8760108*a+.041556*s),tQ(.0556434*o-.2040259*a+1.0572252*s))}function tK(r){return r>.206893034?r*r*r:(r-4/29)/7.787037}function t$(r){return r>.008856?Math.pow(r,1/3):7.787037*r+4/29}function tQ(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}function t0(r,n,i){return this instanceof t0?(this.r=~~r,this.g=~~n,void(this.b=~~i)):arguments.length<2?r instanceof t0?new t0(r.r,r.g,r.b):t4(""+r,t0,tH):new t0(r,n,i)}function t1(r){return new t0(r>>16,r>>8&255,255&r)}function t2(r){return t1(r)+""}tX.brighter=function(r){return new tY(Math.min(100,this.l+tW*(arguments.length?r:1)),this.a,this.b)},tX.darker=function(r){return new tY(Math.max(0,this.l-tW*(arguments.length?r:1)),this.a,this.b)},tX.rgb=function(){return tJ(this.l,this.a,this.b)},s.rgb=t0;var t3=t0.prototype=new tj;function t5(r){return r<16?"0"+Math.max(0,r).toString(16):Math.min(255,r).toString(16)}function t4(r,n,i){var a,o,s,l=0,u=0,c=0;if(a=/([a-z]+)\((.*)\)/.exec(r=r.toLowerCase()))switch(o=a[2].split(","),a[1]){case"hsl":return i(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return n(t9(o[0]),t9(o[1]),t9(o[2]))}return(s=et.get(r))?n(s.r,s.g,s.b):(null==r||"#"!==r.charAt(0)||isNaN(s=parseInt(r.slice(1),16))||(4===r.length?(l=(3840&s)>>4,l|=l>>4,u=240&s,u|=u>>4,c=15&s,c|=c<<4):7===r.length&&(l=(16711680&s)>>16,u=(65280&s)>>8,c=255&s)),n(l,u,c))}function t6(r,n,i){var a,o,s=Math.min(r/=255,n/=255,i/=255),l=Math.max(r,n,i),u=l-s,c=(l+s)/2;return u?(o=c<.5?u/(l+s):u/(2-l-s),a=(r==l?(n-i)/u+(n<i?6:0):n==l?(i-r)/u+2:(r-n)/u+4)*60):(a=NaN,o=c>0&&c<1?0:a),new tU(a,o,c)}function t8(r,n,i){var a=t$((.4124564*(r=t7(r))+.3575761*(n=t7(n))+.1804375*(i=t7(i)))/.95047),o=t$((.2126729*r+.7151522*n+.072175*i)/1);return tY(116*o-16,500*(a-o),200*(o-t$((.0193339*r+.119192*n+.9503041*i)/1.08883)))}function t7(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function t9(r){var n=parseFloat(r);return"%"===r.charAt(r.length-1)?Math.round(2.55*n):n}t3.brighter=function(r){r=Math.pow(.7,arguments.length?r:1);var n=this.r,i=this.g,a=this.b;return n||i||a?(n&&n<30&&(n=30),i&&i<30&&(i=30),a&&a<30&&(a=30),new t0(Math.min(255,n/r),Math.min(255,i/r),Math.min(255,a/r))):new t0(30,30,30)},t3.darker=function(r){return new t0((r=Math.pow(.7,arguments.length?r:1))*this.r,r*this.g,r*this.b)},t3.hsl=function(){return t6(this.r,this.g,this.b)},t3.toString=function(){return"#"+t5(this.r)+t5(this.g)+t5(this.b)};var et=s.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ee(r){return"function"==typeof r?r:function(){return r}}function er(r){return function(n,i,a){return 2==arguments.length&&"function"==typeof i&&(a=i,i=null),en(n,i,r,a)}}function en(r,n,i,a){var o={},l=s.dispatch("beforesend","progress","load","error"),c={},f=new XMLHttpRequest,h=null;function p(){var r,n,a,s=f.status;if(!s&&((n=(r=f).responseType)&&"text"!==n?r.response:r.responseText)||s>=200&&s<300||304===s){try{a=i.call(o,f)}catch(r){return void l.error.call(o,r)}l.load.call(o,a)}else l.error.call(o,f)}return self.XDomainRequest&&!("withCredentials"in f)&&/^(http(s)?:)?\/\//.test(r)&&(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=p:f.onreadystatechange=function(){f.readyState>3&&p()},f.onprogress=function(r){var n=s.event;s.event=r;try{l.progress.call(o,f)}finally{s.event=n}},o.header=function(r,n){return r=(r+"").toLowerCase(),arguments.length<2?c[r]:(null==n?delete c[r]:c[r]=n+"",o)},o.mimeType=function(r){return arguments.length?(n=null==r?null:r+"",o):n},o.responseType=function(r){return arguments.length?(h=r,o):h},o.response=function(r){return i=r,o},["get","post"].forEach(function(r){o[r]=function(){return o.send.apply(o,[r].concat(u(arguments)))}}),o.send=function(i,a,s){if(2==arguments.length&&"function"==typeof a&&(s=a,a=null),f.open(i,r,!0),null==n||"accept"in c||(c.accept=n+",*/*"),f.setRequestHeader)for(var u in c)f.setRequestHeader(u,c[u]);return null!=n&&f.overrideMimeType&&f.overrideMimeType(n),null!=h&&(f.responseType=h),null!=s&&o.on("error",s).on("load",function(r){s(null,r)}),l.beforesend.call(o,f),f.send(null==a?null:a),o},o.abort=function(){return f.abort(),o},s.rebind(o,l,"on"),null==a?o:o.get(1===a.length?function(r,n){a(null==r?n:null)}:a)}et.forEach(function(r,n){et.set(r,t1(n))}),s.functor=ee,s.xhr=er(z),s.dsv=function(r,n){var i=RegExp('["'+r+"\n]"),a=r.charCodeAt(0);function o(r,i,a){arguments.length<3&&(a=i,i=null);var o=en(r,n,null==i?s:l(i),a);return o.row=function(r){return arguments.length?o.response(null==(i=r)?s:l(r)):i},o}function s(r){return o.parse(r.responseText)}function l(r){return function(n){return o.parse(n.responseText,r)}}function u(n){return n.map(c).join(r)}function c(r){return i.test(r)?'"'+r.replace(/\"/g,'""')+'"':r}return o.parse=function(r,n){var i;return o.parseRows(r,function(r,a){if(i)return i(r,a-1);var o=function(n){for(var i={},a=r.length,o=0;o<a;++o)i[r[o]]=n[o];return i};i=n?function(r,i){return n(o(r),i)}:o})},o.parseRows=function(r,n){var i,o,s={},l={},u=[],c=r.length,f=0,h=0;function p(){if(f>=c)return l;if(o)return o=!1,s;var n=f;if(34===r.charCodeAt(n)){for(var i=n;i++<c;)if(34===r.charCodeAt(i)){if(34!==r.charCodeAt(i+1))break;++i}return f=i+2,13===(u=r.charCodeAt(i+1))?(o=!0,10===r.charCodeAt(i+2)&&++f):10===u&&(o=!0),r.slice(n+1,i).replace(/""/g,'"')}for(;f<c;){var u,h=1;if(10===(u=r.charCodeAt(f++)))o=!0;else if(13===u)o=!0,10===r.charCodeAt(f)&&(++f,++h);else if(u!==a)continue;return r.slice(n,f-h)}return r.slice(n)}for(;(i=p())!==l;){for(var d=[];i!==s&&i!==l;)d.push(i),i=p();n&&null==(d=n(d,h++))||u.push(d)}return u},o.format=function(n){if(Array.isArray(n[0]))return o.formatRows(n);var i=new D,a=[];return n.forEach(function(r){for(var n in r)i.has(n)||a.push(i.add(n))}),[a.map(c).join(r)].concat(n.map(function(n){return a.map(function(r){return c(n[r])}).join(r)})).join("\n")},o.formatRows=function(r){return r.map(u).join("\n")},o},s.csv=s.dsv(",","text/csv"),s.tsv=s.dsv("	","text/tab-separated-values");var ei,ea,eo,es,el=this[R(this,"requestAnimationFrame")]||function(r){setTimeout(r,17)};function eu(r,n,i){var a=arguments.length;a<2&&(n=0),a<3&&(i=Date.now());var o={c:r,t:i+n,n:null};return ea?ea.n=o:ei=o,ea=o,eo||(es=clearTimeout(es),eo=1,el(ec)),o}function ec(){var r=ef(),n=eh()-r;n>24?(isFinite(n)&&(clearTimeout(es),es=setTimeout(ec,n)),eo=0):(eo=1,el(ec))}function ef(){for(var r=Date.now(),n=ei;n;)r>=n.t&&n.c(r-n.t)&&(n.c=null),n=n.n;return r}function eh(){for(var r,n=ei,i=1/0;n;)n.c?(n.t<i&&(i=n.t),n=(r=n).n):n=r?r.n=n.n:ei=n.n;return ea=r,i}function ep(r){return r[0]}function ed(r){return r[1]}function ev(r){for(var n,i,a,o=r.length,s=[0,1],l=2,u=2;u<o;u++){for(;l>1&&(n=r[s[l-2]],i=r[s[l-1]],a=r[u],(i[0]-n[0])*(a[1]-n[1])-(i[1]-n[1])*(a[0]-n[0])<=0);)--l;s[l++]=u}return s.slice(0,l)}function eg(r,n){return r[0]-n[0]||r[1]-n[1]}s.timer=function(){eu.apply(this,arguments)},s.timer.flush=function(){ef(),eh()},s.round=function(r,n){return n?Math.round(r*(n=Math.pow(10,n)))/n:Math.round(r)},s.geom={},s.geom.hull=function(r){var n=ep,i=ed;if(arguments.length)return a(r);function a(r){if(r.length<3)return[];var a,o=ee(n),s=ee(i),l=r.length,u=[],c=[];for(a=0;a<l;a++)u.push([+o.call(this,r[a],a),+s.call(this,r[a],a),a]);for(u.sort(eg),a=0;a<l;a++)c.push([u[a][0],-u[a][1]]);var f=ev(u),h=ev(c),p=h[0]===f[0],d=h[h.length-1]===f[f.length-1],v=[];for(a=f.length-1;a>=0;--a)v.push(r[u[f[a]][2]]);for(a=+p;a<h.length-d;++a)v.push(r[u[h[a]][2]]);return v}return a.x=function(r){return arguments.length?(n=r,a):n},a.y=function(r){return arguments.length?(i=r,a):i},a},s.geom.polygon=function(r){return G(r,ey),r};var ey=s.geom.polygon.prototype=[];function em(r,n,i){return(i[0]-n[0])*(r[1]-n[1])<(i[1]-n[1])*(r[0]-n[0])}function ex(r,n,i,a){var o=r[0],s=i[0],l=n[0]-o,u=a[0]-s,c=r[1],f=i[1],h=n[1]-c,p=a[1]-f,d=(u*(c-f)-p*(o-s))/(p*l-u*h);return[o+d*l,c+d*h]}function eb(r){var n=r[0],i=r[r.length-1];return!(n[0]-i[0]||n[1]-i[1])}ey.area=function(){for(var r,n=-1,i=this.length,a=this[i-1],o=0;++n<i;)r=a,a=this[n],o+=r[1]*a[0]-r[0]*a[1];return .5*o},ey.centroid=function(r){var n,i,a=-1,o=this.length,s=0,l=0,u=this[o-1];for(arguments.length||(r=-1/(6*this.area()));++a<o;)n=u,u=this[a],i=n[0]*u[1]-u[0]*n[1],s+=(n[0]+u[0])*i,l+=(n[1]+u[1])*i;return[s*r,l*r]},ey.clip=function(r){for(var n,i,a,o,s,l,u=eb(r),c=-1,f=this.length-eb(this),h=this[f-1];++c<f;){for(n=r.slice(),r.length=0,o=this[c],s=n[(a=n.length-u)-1],i=-1;++i<a;)em(l=n[i],h,o)?(em(s,h,o)||r.push(ex(s,l,h,o)),r.push(l)):em(s,h,o)&&r.push(ex(s,l,h,o)),s=l;u&&r.push(r[0]),h=o}return r};var e_,ew,eT,ek,eA,eM=[],eS=[];function eE(){eV(this),this.edge=this.site=this.circle=null}function eL(r){var n=eM.pop()||new eE;return n.site=r,n}function eC(r){eR(r),eT.remove(r),eM.push(r),eV(r)}function eO(r,n){var i=r.site,a=i.x,o=i.y,s=o-n;if(!s)return a;var l=r.P;if(!l)return-1/0;var u=(i=l.site).x,c=i.y,f=c-n;if(!f)return u;var h=u-a,p=1/s-1/f,d=h/f;return p?(-d+Math.sqrt(d*d-2*p*(h*h/(-2*f)-c+f/2+o-s/2)))/p+a:(a+u)/2}function eP(r){this.site=r,this.edges=[]}function eI(r,n){return n.angle-r.angle}function eD(){eV(this),this.x=this.y=this.arc=this.site=this.cy=null}function ez(r){var n=r.P,i=r.N;if(n&&i){var a=n.site,o=r.site,s=i.site;if(a!==s){var l=o.x,u=o.y,c=a.x-l,f=a.y-u,h=s.x-l,p=2*(c*(m=s.y-u)-f*h);if(!(p>=-tS)){var d=c*c+f*f,v=h*h+m*m,g=(m*d-f*v)/p,y=(c*v-h*d)/p,m=y+u,x=eS.pop()||new eD;x.arc=r,x.site=o,x.x=g+l,x.y=m+Math.sqrt(g*g+y*y),x.cy=m,r.circle=x;for(var b=null,_=eA._;_;)if(x.y<_.y||x.y===_.y&&x.x<=_.x){if(!_.L){b=_.P;break}_=_.L}else{if(!_.R){b=_;break}_=_.R}eA.insert(b,x),b||(ek=x)}}}}function eR(r){var n=r.circle;n&&(n.P||(ek=n.N),eA.remove(n),eS.push(n),eV(n),r.circle=null)}function eF(r,n){this.l=r,this.r=n,this.a=this.b=null}function eB(r,n,i,a){var o=new eF(r,n);return e_.push(o),i&&eN(o,r,n,i),a&&eN(o,n,r,a),ew[r.i].edges.push(new ej(o,r,n)),ew[n.i].edges.push(new ej(o,n,r)),o}function eN(r,n,i,a){r.a||r.b?r.l===i?r.b=a:r.a=a:(r.a=a,r.l=n,r.r=i)}function ej(r,n,i){var a=r.a,o=r.b;this.edge=r,this.site=n,this.angle=i?Math.atan2(i.y-n.y,i.x-n.x):r.l===n?Math.atan2(o.x-a.x,a.y-o.y):Math.atan2(a.x-o.x,o.y-a.y)}function eU(){this._=null}function eV(r){r.U=r.C=r.L=r.R=r.P=r.N=null}function eH(r,n){var i=n.R,a=n.U;a?a.L===n?a.L=i:a.R=i:r._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function eq(r,n){var i=n.L,a=n.U;a?a.L===n?a.L=i:a.R=i:r._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function eG(r){for(;r.L;)r=r.L;return r}function eZ(r,n){var i,a,o,s=r.sort(eY).pop();for(e_=[],ew=Array(r.length),eT=new eU,eA=new eU;;)if(o=ek,s&&(!o||s.y<o.y||s.y===o.y&&s.x<o.x))s.x===i&&s.y===a||(ew[s.i]=new eP(s),function(r){for(var n,i,a,o,s=r.x,l=r.y,u=eT._;u;)if((a=eO(u,l)-s)>1e-6)u=u.L;else{if(!((o=s-function(r,n){var i=r.N;if(i)return eO(i,n);var a=r.site;return a.y===n?a.x:1/0}(u,l))>1e-6)){a>-.000001?(n=u.P,i=u):o>-.000001?(n=u,i=u.N):n=i=u;break}if(!u.R){n=u;break}u=u.R}var c=eL(r);if(eT.insert(n,c),n||i){if(n===i)return eR(n),i=eL(n.site),eT.insert(c,i),c.edge=i.edge=eB(n.site,c.site),ez(n),void ez(i);if(i){eR(n),eR(i);var f=n.site,h=f.x,p=f.y,d=r.x-h,v=r.y-p,g=i.site,y=g.x-h,m=g.y-p,x=2*(d*m-v*y),b=d*d+v*v,_=y*y+m*m,w={x:(m*b-v*_)/x+h,y:(d*_-y*b)/x+p};eN(i.edge,f,g,w),c.edge=eB(f,r,null,w),i.edge=eB(r,g,null,w),ez(n),ez(i)}else c.edge=eB(n.site,c.site)}}(s),i=s.x,a=s.y),s=r.pop();else{if(!o)break;!function(r){var n=r.circle,i=n.x,a=n.cy,o={x:i,y:a},s=r.P,l=r.N,u=[r];eC(r);for(var c=s;c.circle&&1e-6>k(i-c.circle.x)&&1e-6>k(a-c.circle.cy);)s=c.P,u.unshift(c),eC(c),c=s;u.unshift(c),eR(c);for(var f=l;f.circle&&1e-6>k(i-f.circle.x)&&1e-6>k(a-f.circle.cy);)l=f.N,u.push(f),eC(f),f=l;u.push(f),eR(f);var h,p=u.length;for(h=1;h<p;++h)f=u[h],c=u[h-1],eN(f.edge,c.site,f.site,o);c=u[0],(f=u[p-1]).edge=eB(c.site,f.site,null,o),ez(c),ez(f)}(o.arc)}n&&(function(r){for(var n,i,a,o,s,l=e_,u=(i=r[0][0],a=r[0][1],o=r[1][0],s=r[1][1],function(r){var n,l=r.a,u=r.b,c=l.x,f=l.y,h=0,p=1,d=u.x-c,v=u.y-f;if(n=i-c,d||!(n>0)){if(n/=d,d<0){if(n<h)return;n<p&&(p=n)}else if(d>0){if(n>p)return;n>h&&(h=n)}if(n=o-c,d||!(n<0)){if(n/=d,d<0){if(n>p)return;n>h&&(h=n)}else if(d>0){if(n<h)return;n<p&&(p=n)}if(n=a-f,v||!(n>0)){if(n/=v,v<0){if(n<h)return;n<p&&(p=n)}else if(v>0){if(n>p)return;n>h&&(h=n)}if(n=s-f,v||!(n<0)){if(n/=v,v<0){if(n>p)return;n>h&&(h=n)}else if(v>0){if(n<h)return;n<p&&(p=n)}return h>0&&(r.a={x:c+h*d,y:f+h*v}),p<1&&(r.b={x:c+p*d,y:f+p*v}),r}}}}}),c=l.length;c--;)(!function(r,n){var i=r.b;if(i)return!0;var a,o,s=r.a,l=n[0][0],u=n[1][0],c=n[0][1],f=n[1][1],h=r.l,p=r.r,d=h.x,v=h.y,g=p.x,y=p.y,m=(d+g)/2;if(y===v){if(m<l||m>=u)return;if(d>g){if(s){if(s.y>=f)return}else s={x:m,y:c};i={x:m,y:f}}else{if(s){if(s.y<c)return}else s={x:m,y:f};i={x:m,y:c}}}else if(o=(v+y)/2-(a=(d-g)/(y-v))*m,a<-1||a>1){if(d>g){if(s){if(s.y>=f)return}else s={x:(c-o)/a,y:c};i={x:(f-o)/a,y:f}}else{if(s){if(s.y<c)return}else s={x:(f-o)/a,y:f};i={x:(c-o)/a,y:c}}}else if(v<y){if(s){if(s.x>=u)return}else s={x:l,y:a*l+o};i={x:u,y:a*u+o}}else{if(s){if(s.x<l)return}else s={x:u,y:a*u+o};i={x:l,y:a*l+o}}return r.a=s,r.b=i,!0}(n=l[c],r)||!u(n)||1e-6>k(n.a.x-n.b.x)&&1e-6>k(n.a.y-n.b.y))&&(n.a=n.b=null,l.splice(c,1))}(n),function(r){for(var n,i,a,o,s,l,u,c,f,h,p,d,v,g=r[0][0],y=r[1][0],m=r[0][1],x=r[1][1],b=ew,_=b.length;_--;)if((c=b[_])&&c.prepare())for(p=(h=c.edges).length,f=0;f<p;)l=(v=h[f].end()).x,u=v.y,o=(d=h[++f%p].start()).x,s=d.y,(k(l-o)>1e-6||k(u-s)>1e-6)&&(h.splice(f,0,new ej((n=c.site,i=1e-6>k(l-g)&&x-u>1e-6?{x:g,y:1e-6>k(o-g)?s:x}:1e-6>k(u-x)&&y-l>1e-6?{x:1e-6>k(s-x)?o:y,y:x}:1e-6>k(l-y)&&u-m>1e-6?{x:y,y:1e-6>k(o-y)?s:m}:1e-6>k(u-m)&&l-g>1e-6?{x:1e-6>k(s-m)?o:g,y:m}:null,a=void 0,(a=new eF(n,null)).a=v,a.b=i,e_.push(a),a),c.site,null)),++p)}(n));var l={cells:ew,edges:e_};return eT=eA=e_=ew=null,l}function eY(r,n){return n.y-r.y||n.x-r.x}eP.prototype.prepare=function(){for(var r,n=this.edges,i=n.length;i--;)(r=n[i].edge).b&&r.a||n.splice(i,1);return n.sort(eI),n.length},ej.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},eU.prototype={insert:function(r,n){var i,a,o;if(r){if(n.P=r,n.N=r.N,r.N&&(r.N.P=n),r.N=n,r.R){for(r=r.R;r.L;)r=r.L;r.L=n}else r.R=n;i=r}else this._?(r=eG(this._),n.P=null,n.N=r,r.P=r.L=n,i=r):(n.P=n.N=null,this._=n,i=null);for(n.L=n.R=null,n.U=i,n.C=!0,r=n;i&&i.C;)i===(a=i.U).L?(o=a.R)&&o.C?(i.C=o.C=!1,a.C=!0,r=a):(r===i.R&&(eH(this,i),i=(r=i).U),i.C=!1,a.C=!0,eq(this,a)):(o=a.L)&&o.C?(i.C=o.C=!1,a.C=!0,r=a):(r===i.L&&(eq(this,i),i=(r=i).U),i.C=!1,a.C=!0,eH(this,a)),i=r.U;this._.C=!1},remove:function(r){r.N&&(r.N.P=r.P),r.P&&(r.P.N=r.N),r.N=r.P=null;var n,i,a,o=r.U,s=r.L,l=r.R;if(i=s?l?eG(l):s:l,o?o.L===r?o.L=i:o.R=i:this._=i,s&&l?(a=i.C,i.C=r.C,i.L=s,s.U=i,i!==l?(o=i.U,i.U=r.U,r=i.R,o.L=r,i.R=l,l.U=i):(i.U=o,o=i,r=i.R)):(a=r.C,r=i),r&&(r.U=o),!a){if(r&&r.C)r.C=!1;else{do{if(r===this._)break;if(r===o.L){if((n=o.R).C&&(n.C=!1,o.C=!0,eH(this,o),n=o.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,eq(this,n),n=o.R),n.C=o.C,o.C=n.R.C=!1,eH(this,o),r=this._;break}}else if((n=o.L).C&&(n.C=!1,o.C=!0,eq(this,o),n=o.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,eH(this,n),n=o.L),n.C=o.C,o.C=n.L.C=!1,eq(this,o),r=this._;break}n.C=!0,r=o,o=o.U}while(!r.C);r&&(r.C=!1)}}}},s.geom.voronoi=function(r){var n=ep,i=ed,a=n,o=i,s=eW;if(r)return l(r);function l(r){var n=Array(r.length),i=s[0][0],a=s[0][1],o=s[1][0],l=s[1][1];return eZ(u(r),s).cells.forEach(function(s,u){var c=s.edges,f=s.site;(n[u]=c.length?c.map(function(r){var n=r.start();return[n.x,n.y]}):f.x>=i&&f.x<=o&&f.y>=a&&f.y<=l?[[i,l],[o,l],[o,a],[i,a]]:[]).point=r[u]}),n}function u(r){return r.map(function(r,n){return{x:1e-6*Math.round(a(r,n)/1e-6),y:1e-6*Math.round(o(r,n)/1e-6),i:n}})}return l.links=function(r){return eZ(u(r)).edges.filter(function(r){return r.l&&r.r}).map(function(n){return{source:r[n.l.i],target:r[n.r.i]}})},l.triangles=function(r){var n=[];return eZ(u(r)).cells.forEach(function(i,a){for(var o,s,l=i.site,u=i.edges.sort(eI),c=-1,f=u.length,h=u[f-1].edge,p=h.l===l?h.r:h.l;++c<f;)o=p,p=(h=u[c].edge).l===l?h.r:h.l,a<o.i&&a<p.i&&(s=p,(l.x-s.x)*(o.y-l.y)-(l.x-o.x)*(s.y-l.y)<0)&&n.push([r[a],r[o.i],r[p.i]])}),n},l.x=function(r){return arguments.length?(a=ee(n=r),l):n},l.y=function(r){return arguments.length?(o=ee(i=r),l):i},l.clipExtent=function(r){return arguments.length?(s=null==r?eW:r,l):s===eW?null:s},l.size=function(r){return arguments.length?l.clipExtent(r&&[[0,0],r]):s===eW?null:s&&s[1]},l};var eW=[[-1e6,-1e6],[1e6,1e6]];function eX(r){return r.x}function eJ(r){return r.y}function eK(r,n){r=s.rgb(r),n=s.rgb(n);var i=r.r,a=r.g,o=r.b,l=n.r-i,u=n.g-a,c=n.b-o;return function(r){return"#"+t5(Math.round(i+l*r))+t5(Math.round(a+u*r))+t5(Math.round(o+c*r))}}function e$(r,n){var i,a={},o={};for(i in r)i in n?a[i]=e3(r[i],n[i]):o[i]=r[i];for(i in n)i in r||(o[i]=n[i]);return function(r){for(i in a)o[i]=a[i](r);return o}}function eQ(r,n){return r=+r,n=+n,function(i){return r*(1-i)+n*i}}function e0(r,n){var i,a,o,s=e1.lastIndex=e2.lastIndex=0,l=-1,u=[],c=[];for(r+="",n+="";(i=e1.exec(r))&&(a=e2.exec(n));)(o=a.index)>s&&(o=n.slice(s,o),u[l]?u[l]+=o:u[++l]=o),(i=i[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,c.push({i:l,x:eQ(i,a)})),s=e2.lastIndex;return s<n.length&&(o=n.slice(s),u[l]?u[l]+=o:u[++l]=o),u.length<2?c[0]?(n=c[0].x,function(r){return n(r)+""}):function(){return n}:(n=c.length,function(r){for(var i,a=0;a<n;++a)u[(i=c[a]).i]=i.x(r);return u.join("")})}s.geom.delaunay=function(r){return s.geom.voronoi().triangles(r)},s.geom.quadtree=function(r,n,i,a,o){var s,l=ep,u=ed;if(s=arguments.length)return l=eX,u=eJ,3===s&&(o=i,a=n,i=n=0),c(r);function c(r){var c,f,h,p,d,v,g,y,m,x=ee(l),b=ee(u);if(null!=n)v=n,g=i,y=a,m=o;else if(y=m=-(v=g=1/0),f=[],h=[],d=r.length,s)for(p=0;p<d;++p)(c=r[p]).x<v&&(v=c.x),c.y<g&&(g=c.y),c.x>y&&(y=c.x),c.y>m&&(m=c.y),f.push(c.x),h.push(c.y);else for(p=0;p<d;++p){var _=+x(c=r[p],p),w=+b(c,p);_<v&&(v=_),w<g&&(g=w),_>y&&(y=_),w>m&&(m=w),f.push(_),h.push(w)}var T=y-v,A=m-g;function M(r,n,i,a,o,s,l,u){if(!isNaN(i)&&!isNaN(a)){if(r.leaf){var c=r.x,f=r.y;if(null!=c){if(k(c-i)+k(f-a)<.01)S(r,n,i,a,o,s,l,u);else{var h=r.point;r.x=r.y=r.point=null,S(r,h,c,f,o,s,l,u),S(r,n,i,a,o,s,l,u)}}else r.x=i,r.y=a,r.point=n}else S(r,n,i,a,o,s,l,u)}}function S(r,n,i,a,o,s,l,u){var c=.5*(o+l),f=.5*(s+u),h=i>=c,p=a>=f,d=p<<1|h;r.leaf=!1,h?o=c:l=c,p?s=f:u=f,M(r=r.nodes[d]||(r.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,i,a,o,s,l,u)}T>A?m=g+T:y=v+A;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(r){M(E,r,+x(r,++p),+b(r,p),v,g,y,m)}};if(E.visit=function(r){(function r(n,i,a,o,s,l){if(!n(i,a,o,s,l)){var u=.5*(a+s),c=.5*(o+l),f=i.nodes;f[0]&&r(n,f[0],a,o,u,c),f[1]&&r(n,f[1],u,o,s,c),f[2]&&r(n,f[2],a,c,u,l),f[3]&&r(n,f[3],u,c,s,l)}})(r,E,v,g,y,m)},E.find=function(r){var n,i,a,o,s,l,u,c;return n=r[0],i=r[1],c=1/0,function r(f,h,p,d,v){if(!(h>s||p>l||d<a||v<o)){if(g=f.point){var g,y=n-f.x,m=i-f.y,x=y*y+m*m;if(x<c){var b=Math.sqrt(c=x);a=n-b,o=i-b,s=n+b,l=i+b,u=g}}for(var _=f.nodes,w=.5*(h+d),T=.5*(p+v),k=(i>=T)<<1|n>=w,A=k+4;k<A;++k)if(f=_[3&k])switch(3&k){case 0:r(f,h,p,w,T);break;case 1:r(f,w,p,d,T);break;case 2:r(f,h,T,w,v);break;case 3:r(f,w,T,d,v)}}}(E,a=v,o=g,s=y,l=m),u},p=-1,null==n){for(;++p<d;)M(E,r[p],f[p],h[p],v,g,y,m);--p}else r.forEach(E.add);return f=h=r=c=null,E}return c.x=function(r){return arguments.length?(l=r,c):l},c.y=function(r){return arguments.length?(u=r,c):u},c.extent=function(r){return arguments.length?(null==r?n=i=a=o=null:(n=+r[0][0],i=+r[0][1],a=+r[1][0],o=+r[1][1]),c):null==n?null:[[n,i],[a,o]]},c.size=function(r){return arguments.length?(null==r?n=i=a=o=null:(n=i=0,a=+r[0],o=+r[1]),c):null==n?null:[a-n,o-i]},c},s.interpolateRgb=eK,s.interpolateObject=e$,s.interpolateNumber=eQ,s.interpolateString=e0;var e1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,e2=RegExp(e1.source,"g");function e3(r,n){for(var i,a=s.interpolators.length;--a>=0&&!(i=s.interpolators[a](r,n)););return i}function e5(r,n){var i,a=[],o=[],s=r.length,l=n.length,u=Math.min(r.length,n.length);for(i=0;i<u;++i)a.push(e3(r[i],n[i]));for(;i<s;++i)o[i]=r[i];for(;i<l;++i)o[i]=n[i];return function(r){for(i=0;i<u;++i)o[i]=a[i](r);return o}}s.interpolate=e3,s.interpolators=[function(r,n){var i=typeof n;return("string"===i?et.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?eK:e0:n instanceof tj?eK:Array.isArray(n)?e5:"object"===i&&isNaN(n)?e$:eQ)(r,n)}],s.interpolateArray=e5;var e4=function(){return z},e6=s.map({linear:e4,poly:function(r){return function(n){return Math.pow(n,r)}},quad:function(){return rt},cubic:function(){return re},sin:function(){return rn},exp:function(){return ri},circle:function(){return ra},elastic:function(r,n){var i;return arguments.length<2&&(n=.45),arguments.length?i=n/tL*Math.asin(1/r):(r=1,i=n/4),function(a){return 1+r*Math.pow(2,-10*a)*Math.sin((a-i)*tL/n)}},back:function(r){return r||(r=1.70158),function(n){return n*n*((r+1)*n-r)}},bounce:function(){return ro}}),e8=s.map({in:z,out:e7,"in-out":e9,"out-in":function(r){return e9(e7(r))}});function e7(r){return function(n){return 1-r(1-n)}}function e9(r){return function(n){return .5*(n<.5?r(2*n):2-r(2-2*n))}}function rt(r){return r*r}function re(r){return r*r*r}function rr(r){if(r<=0)return 0;if(r>=1)return 1;var n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}function rn(r){return 1-Math.cos(r*tO)}function ri(r){return Math.pow(2,10*(r-1))}function ra(r){return 1-Math.sqrt(1-r*r)}function ro(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375}function rs(r,n){return n-=r,function(i){return Math.round(r+n*i)}}function rl(r){var n,i=[r.a,r.b],a=[r.c,r.d],o=rc(i),s=ru(i,a),l=rc((a[0]+=(n=-s)*i[0],a[1]+=n*i[1],a))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*tI,this.translate=[r.e,r.f],this.scale=[o,l],this.skew=l?Math.atan2(s,l)*tI:0}function ru(r,n){return r[0]*n[0]+r[1]*n[1]}function rc(r){var n=Math.sqrt(ru(r,r));return n&&(r[0]/=n,r[1]/=n),n}s.ease=function(r){var n,i=r.indexOf("-"),a=i>=0?r.slice(0,i):r,o=i>=0?r.slice(i+1):"in";return a=e6.get(a)||e4,n=(o=e8.get(o)||z)(a.apply(null,l.call(arguments,1))),function(r){return r<=0?0:r>=1?1:n(r)}},s.interpolateHcl=function(r,n){r=s.hcl(r),n=s.hcl(n);var i=r.h,a=r.c,o=r.l,l=n.h-i,u=n.c-a,c=n.l-o;return isNaN(u)&&(u=0,a=isNaN(a)?n.c:a),isNaN(l)?(l=0,i=isNaN(i)?n.h:i):l>180?l-=360:l<-180&&(l+=360),function(r){return tZ(i+l*r,a+u*r,o+c*r)+""}},s.interpolateHsl=function(r,n){r=s.hsl(r),n=s.hsl(n);var i=r.h,a=r.s,o=r.l,l=n.h-i,u=n.s-a,c=n.l-o;return isNaN(u)&&(u=0,a=isNaN(a)?n.s:a),isNaN(l)?(l=0,i=isNaN(i)?n.h:i):l>180?l-=360:l<-180&&(l+=360),function(r){return tH(i+l*r,a+u*r,o+c*r)+""}},s.interpolateLab=function(r,n){r=s.lab(r),n=s.lab(n);var i=r.l,a=r.a,o=r.b,l=n.l-i,u=n.a-a,c=n.b-o;return function(r){return tJ(i+l*r,a+u*r,o+c*r)+""}},s.interpolateRound=rs,s.transform=function(r){var n=c.createElementNS(s.ns.prefix.svg,"g");return(s.transform=function(r){if(null!=r){n.setAttribute("transform",r);var i=n.transform.baseVal.consolidate()}return new rl(i?i.matrix:rf)})(r)},rl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var rf={a:1,b:0,c:0,d:1,e:0,f:0};function rh(r){return r.length?r.pop()+",":""}function rp(r,n){var i,a,o,l,u=[],c=[];return r=s.transform(r),n=s.transform(n),function(r,n,i,a){if(r[0]!==n[0]||r[1]!==n[1]){var o=i.push("translate(",null,",",null,")");a.push({i:o-4,x:eQ(r[0],n[0])},{i:o-2,x:eQ(r[1],n[1])})}else(n[0]||n[1])&&i.push("translate("+n+")")}(r.translate,n.translate,u,c),(i=r.rotate)!==(a=n.rotate)?(i-a>180?a+=360:a-i>180&&(i+=360),c.push({i:u.push(rh(u)+"rotate(",null,")")-2,x:eQ(i,a)})):a&&u.push(rh(u)+"rotate("+a+")"),(o=r.skew)!==(l=n.skew)?c.push({i:u.push(rh(u)+"skewX(",null,")")-2,x:eQ(o,l)}):l&&u.push(rh(u)+"skewX("+l+")"),function(r,n,i,a){if(r[0]!==n[0]||r[1]!==n[1]){var o=i.push(rh(i)+"scale(",null,",",null,")");a.push({i:o-4,x:eQ(r[0],n[0])},{i:o-2,x:eQ(r[1],n[1])})}else 1===n[0]&&1===n[1]||i.push(rh(i)+"scale("+n+")")}(r.scale,n.scale,u,c),r=n=null,function(r){for(var n,i=-1,a=c.length;++i<a;)u[(n=c[i]).i]=n.x(r);return u.join("")}}function rd(r,n){return n=(n-=r=+r)||1/n,function(i){return(i-r)/n}}function rv(r,n){return n=(n-=r=+r)||1/n,function(i){return Math.max(0,Math.min(1,(i-r)/n))}}function rg(r){for(var n=[],i=r.parent;null!=i;)n.push(r),r=i,i=i.parent;return n.push(r),n}function ry(r){r.fixed|=2}function rm(r){r.fixed&=-7}function rx(r){r.fixed|=4,r.px=r.x,r.py=r.y}function rb(r){r.fixed&=-5}s.interpolateTransform=rp,s.layout={},s.layout.bundle=function(){return function(r){for(var n=[],i=-1,a=r.length;++i<a;)n.push(function(r){for(var n=r.source,i=r.target,a=function(r,n){if(r===n)return r;for(var i=rg(r),a=rg(n),o=i.pop(),s=a.pop(),l=null;o===s;)l=o,o=i.pop(),s=a.pop();return l}(n,i),o=[n];n!==a;)o.push(n=n.parent);for(var s=o.length;i!==a;)o.splice(s,0,i),i=i.parent;return o}(r[i]));return n}},s.layout.chord=function(){var r,n,i,a,o,l,u,c={},f=0;function h(){var c,h,d,v,g,y={},m=[],x=s.range(a),b=[];for(r=[],n=[],c=0,v=-1;++v<a;){for(h=0,g=-1;++g<a;)h+=i[v][g];m.push(h),b.push(s.range(a)),c+=h}for(o&&x.sort(function(r,n){return o(m[r],m[n])}),l&&b.forEach(function(r,n){r.sort(function(r,a){return l(i[n][r],i[n][a])})}),c=(tL-f*a)/c,h=0,v=-1;++v<a;){for(d=h,g=-1;++g<a;){var _=x[v],w=b[_][g],T=i[_][w],k=h,A=h+=T*c;y[_+"-"+w]={index:_,subindex:w,startAngle:k,endAngle:A,value:T}}n[_]={index:_,startAngle:d,endAngle:h,value:m[_]},h+=f}for(v=-1;++v<a;)for(g=v-1;++g<a;){var M=y[v+"-"+g],S=y[g+"-"+v];(M.value||S.value)&&r.push(M.value<S.value?{source:S,target:M}:{source:M,target:S})}u&&p()}function p(){r.sort(function(r,n){return u((r.source.value+r.target.value)/2,(n.source.value+n.target.value)/2)})}return c.matrix=function(o){return arguments.length?(a=(i=o)&&i.length,r=n=null,c):i},c.padding=function(i){return arguments.length?(f=i,r=n=null,c):f},c.sortGroups=function(i){return arguments.length?(o=i,r=n=null,c):o},c.sortSubgroups=function(n){return arguments.length?(l=n,r=null,c):l},c.sortChords=function(n){return arguments.length?(u=n,r&&p(),c):u},c.chords=function(){return r||h(),r},c.groups=function(){return n||h(),n},c},s.layout.force=function(){var r,n,i,a,o,l,u={},c=s.dispatch("start","tick","end"),f=[1,1],h=.9,p=r_,d=rw,v=-30,g=rT,y=.1,m=.64,x=[],b=[];function _(r){r.px=s.event.x,r.py=s.event.y,u.resume()}return u.tick=function(){if((i*=.99)<.005)return r=null,c.end({type:"end",alpha:i=0}),!0;var n,u,p,d,_,w,T,k,A,M=x.length,S=b.length;for(u=0;u<S;++u)d=(p=b[u]).source,(w=(k=(_=p.target).x-d.x)*k+(A=_.y-d.y)*A)&&(k*=w=i*o[u]*((w=Math.sqrt(w))-a[u])/w,A*=w,_.x-=k*(T=d.weight+_.weight?d.weight/(d.weight+_.weight):.5),_.y-=A*T,d.x+=k*(T=1-T),d.y+=A*T);if((T=i*y)&&(k=f[0]/2,A=f[1]/2,u=-1,T))for(;++u<M;)(p=x[u]).x+=(k-p.x)*T,p.y+=(A-p.y)*T;if(v)for(function r(n,i,a){var o=0,s=0;if(n.charge=0,!n.leaf)for(var l,u=n.nodes,c=u.length,f=-1;++f<c;)null!=(l=u[f])&&(r(l,i,a),n.charge+=l.charge,o+=l.charge*l.cx,s+=l.charge*l.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var h=i*a[n.point.index];n.charge+=n.pointCharge=h,o+=h*n.point.x,s+=h*n.point.y}n.cx=o/n.charge,n.cy=s/n.charge}(n=s.geom.quadtree(x),i,l),u=-1;++u<M;)(p=x[u]).fixed||n.visit(function(r){return function(n,i,a,o){if(n.point!==r){var s=n.cx-r.x,l=n.cy-r.y,u=o-i,c=s*s+l*l;if(u*u/m<c){if(c<g){var f=n.charge/c;r.px-=s*f,r.py-=l*f}return!0}n.point&&c&&c<g&&(f=n.pointCharge/c,r.px-=s*f,r.py-=l*f)}return!n.charge}}(p));for(u=-1;++u<M;)(p=x[u]).fixed?(p.x=p.px,p.y=p.py):(p.x-=(p.px-(p.px=p.x))*h,p.y-=(p.py-(p.py=p.y))*h);c.tick({type:"tick",alpha:i})},u.nodes=function(r){return arguments.length?(x=r,u):x},u.links=function(r){return arguments.length?(b=r,u):b},u.size=function(r){return arguments.length?(f=r,u):f},u.linkDistance=function(r){return arguments.length?(p="function"==typeof r?r:+r,u):p},u.distance=u.linkDistance,u.linkStrength=function(r){return arguments.length?(d="function"==typeof r?r:+r,u):d},u.friction=function(r){return arguments.length?(h=+r,u):h},u.charge=function(r){return arguments.length?(v="function"==typeof r?r:+r,u):v},u.chargeDistance=function(r){return arguments.length?(g=r*r,u):Math.sqrt(g)},u.gravity=function(r){return arguments.length?(y=+r,u):y},u.theta=function(r){return arguments.length?(m=r*r,u):Math.sqrt(m)},u.alpha=function(n){return arguments.length?(n=+n,i?n>0?i=n:(r.c=null,r.t=NaN,r=null,c.end({type:"end",alpha:i=0})):n>0&&(c.start({type:"start",alpha:i=n}),r=eu(u.tick)),u):i},u.start=function(){var r,n,i,s=x.length,c=b.length,h=f[0],g=f[1];for(r=0;r<s;++r)(i=x[r]).index=r,i.weight=0;for(r=0;r<c;++r)"number"==typeof(i=b[r]).source&&(i.source=x[i.source]),"number"==typeof i.target&&(i.target=x[i.target]),++i.source.weight,++i.target.weight;for(r=0;r<s;++r)isNaN((i=x[r]).x)&&(i.x=y("x",h)),isNaN(i.y)&&(i.y=y("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(a=[],"function"==typeof p)for(r=0;r<c;++r)a[r]=+p.call(this,b[r],r);else for(r=0;r<c;++r)a[r]=p;if(o=[],"function"==typeof d)for(r=0;r<c;++r)o[r]=+d.call(this,b[r],r);else for(r=0;r<c;++r)o[r]=d;if(l=[],"function"==typeof v)for(r=0;r<s;++r)l[r]=+v.call(this,x[r],r);else for(r=0;r<s;++r)l[r]=v;function y(i,a){if(!n){for(n=Array(s),f=0;f<s;++f)n[f]=[];for(f=0;f<c;++f){var o=b[f];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var l,u=n[r],f=-1,h=u.length;++f<h;)if(!isNaN(l=u[f][i]))return l;return Math.random()*a}return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){if(n||(n=s.behavior.drag().origin(z).on("dragstart.force",ry).on("drag.force",_).on("dragend.force",rm)),!arguments.length)return n;this.on("mouseover.force",rx).on("mouseout.force",rb).call(n)},s.rebind(u,c,"on")};var r_=20,rw=1,rT=1/0;function rk(r,n){return s.rebind(r,n,"sort","children","value"),r.nodes=r,r.links=rC,r}function rA(r,n){for(var i,a,o=[r];null!=(r=o.pop());)if(n(r),(a=r.children)&&(i=a.length))for(;--i>=0;)o.push(a[i])}function rM(r,n){for(var i=[r],a=[];null!=(r=i.pop());)if(a.push(r),(s=r.children)&&(o=s.length))for(var o,s,l=-1;++l<o;)i.push(s[l]);for(;null!=(r=a.pop());)n(r)}function rS(r){return r.children}function rE(r){return r.value}function rL(r,n){return n.value-r.value}function rC(r){return s.merge(r.map(function(r){return(r.children||[]).map(function(n){return{source:r,target:n}})}))}s.layout.hierarchy=function(){var r=rL,n=rS,i=rE;function a(o){var s,l,u,c,f=[o],h=[];for(o.depth=0;null!=(c=f.pop());)if(h.push(c),(l=n.call(a,c,c.depth))&&(s=l.length)){for(;--s>=0;)f.push(u=l[s]),u.parent=c,u.depth=c.depth+1;i&&(c.value=0),c.children=l}else i&&(c.value=+i.call(a,c,c.depth)||0),delete c.children;return rM(o,function(n){var a,o;r&&(a=n.children)&&a.sort(r),i&&(o=n.parent)&&(o.value+=n.value)}),h}return a.sort=function(n){return arguments.length?(r=n,a):r},a.children=function(r){return arguments.length?(n=r,a):n},a.value=function(r){return arguments.length?(i=r,a):i},a.revalue=function(r){return i&&(rA(r,function(r){r.children&&(r.value=0)}),rM(r,function(r){var n;r.children||(r.value=+i.call(a,r,r.depth)||0),(n=r.parent)&&(n.value+=r.value)})),r},a},s.layout.partition=function(){var r=s.layout.hierarchy(),n=[1,1];function i(i,a){var o=r.call(this,i,a);return function r(n,i,a,o){var s=n.children;if(n.x=i,n.y=n.depth*o,n.dx=a,n.dy=o,s&&(l=s.length)){var l,u,c,f=-1;for(a=n.value?a/n.value:0;++f<l;)r(u=s[f],i,c=u.value*a,o),i+=c}}(o[0],0,n[0],n[1]/function r(n){var i=n.children,a=0;if(i&&(o=i.length))for(var o,s=-1;++s<o;)a=Math.max(a,r(i[s]));return 1+a}(o[0])),o}return i.size=function(r){return arguments.length?(n=r,i):n},rk(i,r)},s.layout.pie=function(){var r=Number,n=rO,i=0,a=tL,o=0;function l(u){var c,f=u.length,h=u.map(function(n,i){return+r.call(l,n,i)}),p=+("function"==typeof i?i.apply(this,arguments):i),d=("function"==typeof a?a.apply(this,arguments):a)-p,v=Math.min(Math.abs(d)/f,+("function"==typeof o?o.apply(this,arguments):o)),g=v*(d<0?-1:1),y=s.sum(h),m=y?(d-f*g)/y:0,x=s.range(f),b=[];return null!=n&&x.sort(n===rO?function(r,n){return h[n]-h[r]}:function(r,i){return n(u[r],u[i])}),x.forEach(function(r){b[r]={data:u[r],value:c=h[r],startAngle:p,endAngle:p+=c*m+g,padAngle:v}}),b}return l.value=function(n){return arguments.length?(r=n,l):r},l.sort=function(r){return arguments.length?(n=r,l):n},l.startAngle=function(r){return arguments.length?(i=r,l):i},l.endAngle=function(r){return arguments.length?(a=r,l):a},l.padAngle=function(r){return arguments.length?(o=r,l):o},l};var rO={};function rP(r){return r.x}function rI(r){return r.y}function rD(r,n,i){r.y0=n,r.y=i}s.layout.stack=function(){var r=z,n=rF,i=rB,a=rD,o=rP,l=rI;function u(c,f){if(!(v=c.length))return c;var h=c.map(function(n,i){return r.call(u,n,i)}),p=h.map(function(r){return r.map(function(r,n){return[o.call(u,r,n),l.call(u,r,n)]})}),d=n.call(u,p,f);h=s.permute(h,d),p=s.permute(p,d);var v,g,y,m,x=i.call(u,p,f),b=h[0].length;for(y=0;y<b;++y)for(a.call(u,h[0][y],m=x[y],p[0][y][1]),g=1;g<v;++g)a.call(u,h[g][y],m+=p[g-1][y][1],p[g][y][1]);return c}return u.values=function(n){return arguments.length?(r=n,u):r},u.order=function(r){return arguments.length?(n="function"==typeof r?r:rz.get(r)||rF,u):n},u.offset=function(r){return arguments.length?(i="function"==typeof r?r:rR.get(r)||rB,u):i},u.x=function(r){return arguments.length?(o=r,u):o},u.y=function(r){return arguments.length?(l=r,u):l},u.out=function(r){return arguments.length?(a=r,u):a},u};var rz=s.map({"inside-out":function(r){var n,i,a=r.length,o=r.map(rN),l=r.map(rj),u=s.range(a).sort(function(r,n){return o[r]-o[n]}),c=0,f=0,h=[],p=[];for(n=0;n<a;++n)i=u[n],c<f?(c+=l[i],h.push(i)):(f+=l[i],p.push(i));return p.reverse().concat(h)},reverse:function(r){return s.range(r.length).reverse()},default:rF}),rR=s.map({silhouette:function(r){var n,i,a,o=r.length,s=r[0].length,l=[],u=0,c=[];for(i=0;i<s;++i){for(n=0,a=0;n<o;n++)a+=r[n][i][1];a>u&&(u=a),l.push(a)}for(i=0;i<s;++i)c[i]=(u-l[i])/2;return c},wiggle:function(r){var n,i,a,o,s,l,u,c,f,h=r.length,p=r[0],d=p.length,v=[];for(v[0]=c=f=0,i=1;i<d;++i){for(n=0,o=0;n<h;++n)o+=r[n][i][1];for(n=0,s=0,u=p[i][0]-p[i-1][0];n<h;++n){for(a=0,l=(r[n][i][1]-r[n][i-1][1])/(2*u);a<n;++a)l+=(r[a][i][1]-r[a][i-1][1])/u;s+=l*r[n][i][1]}v[i]=c-=o?s/o*u:0,c<f&&(f=c)}for(i=0;i<d;++i)v[i]-=f;return v},expand:function(r){var n,i,a,o=r.length,s=r[0].length,l=1/o,u=[];for(i=0;i<s;++i){for(n=0,a=0;n<o;n++)a+=r[n][i][1];if(a)for(n=0;n<o;n++)r[n][i][1]/=a;else for(n=0;n<o;n++)r[n][i][1]=l}for(i=0;i<s;++i)u[i]=0;return u},zero:rB});function rF(r){return s.range(r.length)}function rB(r){for(var n=-1,i=r[0].length,a=[];++n<i;)a[n]=0;return a}function rN(r){for(var n,i=1,a=0,o=r[0][1],s=r.length;i<s;++i)(n=r[i][1])>o&&(a=i,o=n);return a}function rj(r){return r.reduce(rU,0)}function rU(r,n){return r+n[1]}function rV(r,n){return rH(r,Math.ceil(Math.log(n.length)/Math.LN2+1))}function rH(r,n){for(var i=-1,a=+r[0],o=(r[1]-a)/n,s=[];++i<=n;)s[i]=o*i+a;return s}function rq(r){return[s.min(r),s.max(r)]}function rG(r,n){return r.value-n.value}function rZ(r,n){var i=r._pack_next;r._pack_next=n,n._pack_prev=r,n._pack_next=i,i._pack_prev=n}function rY(r,n){r._pack_next=n,n._pack_prev=r}function rW(r,n){var i=n.x-r.x,a=n.y-r.y,o=r.r+n.r;return .999*o*o>i*i+a*a}function rX(r){if((n=r.children)&&(c=n.length)){var n,i,a,o,s,l,u,c,f=1/0,h=-1/0,p=1/0,d=-1/0;if(n.forEach(rJ),(i=n[0]).x=-i.r,i.y=0,_(i),c>1&&((a=n[1]).x=a.r,a.y=0,_(a),c>2))for(r$(i,a,o=n[2]),_(o),rZ(i,o),i._pack_prev=o,rZ(o,a),a=i._pack_next,s=3;s<c;s++){r$(i,a,o=n[s]);var v=0,g=1,y=1;for(l=a._pack_next;l!==a;l=l._pack_next,g++)if(rW(l,o)){v=1;break}if(1==v)for(u=i._pack_prev;u!==l._pack_prev&&!rW(u,o);u=u._pack_prev,y++);v?(g<y||g==y&&a.r<i.r?rY(i,a=l):rY(i=u,a),s--):(rZ(i,o),a=o,_(o))}var m=(f+h)/2,x=(p+d)/2,b=0;for(s=0;s<c;s++)(o=n[s]).x-=m,o.y-=x,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));r.r=b,n.forEach(rK)}function _(r){f=Math.min(r.x-r.r,f),h=Math.max(r.x+r.r,h),p=Math.min(r.y-r.r,p),d=Math.max(r.y+r.r,d)}}function rJ(r){r._pack_next=r._pack_prev=r}function rK(r){delete r._pack_next,delete r._pack_prev}function r$(r,n,i){var a=r.r+i.r,o=n.x-r.x,s=n.y-r.y;if(a&&(o||s)){var l=n.r+i.r,u=o*o+s*s,c=.5+((a*=a)-(l*=l))/(2*u),f=Math.sqrt(Math.max(0,2*l*(a+u)-(a-=u)*a-l*l))/(2*u);i.x=r.x+c*o+f*s,i.y=r.y+c*s-f*o}else i.x=r.x+a,i.y=r.y}function rQ(r,n){return r.parent==n.parent?1:2}function r0(r){var n=r.children;return n.length?n[0]:r.t}function r1(r){var n,i=r.children;return(n=i.length)?i[n-1]:r.t}function r2(r){return{x:r.x,y:r.y,dx:r.dx,dy:r.dy}}function r3(r,n){var i=r.x+n[3],a=r.y+n[0],o=r.dx-n[1]-n[3],s=r.dy-n[0]-n[2];return o<0&&(i+=o/2,o=0),s<0&&(a+=s/2,s=0),{x:i,y:a,dx:o,dy:s}}function r5(r){var n=r[0],i=r[r.length-1];return n<i?[n,i]:[i,n]}function r4(r){return r.rangeExtent?r.rangeExtent():r5(r.range())}function r6(r,n,i,a){var o=i(r[0],r[1]),s=a(n[0],n[1]);return function(r){return s(o(r))}}function r8(r,n){var i,a=0,o=r.length-1,s=r[a],l=r[o];return l<s&&(i=a,a=o,o=i,i=s,s=l,l=i),r[a]=n.floor(s),r[o]=n.ceil(l),r}function r7(r){return r?{floor:function(n){return Math.floor(n/r)*r},ceil:function(n){return Math.ceil(n/r)*r}}:r9}s.layout.histogram=function(){var r=!0,n=Number,i=rq,a=rV;function o(o,l){for(var u,c,f=[],h=o.map(n,this),p=i.call(this,h,l),d=a.call(this,p,h,l),v=(l=-1,h.length),g=d.length-1,y=r?1:1/v;++l<g;)(u=f[l]=[]).dx=d[l+1]-(u.x=d[l]),u.y=0;if(g>0)for(l=-1;++l<v;)(c=h[l])>=p[0]&&c<=p[1]&&((u=f[s.bisect(d,c,1,g)-1]).y+=y,u.push(o[l]));return f}return o.value=function(r){return arguments.length?(n=r,o):n},o.range=function(r){return arguments.length?(i=ee(r),o):i},o.bins=function(r){return arguments.length?(a="number"==typeof r?function(n){return rH(n,r)}:ee(r),o):a},o.frequency=function(n){return arguments.length?(r=!!n,o):r},o},s.layout.pack=function(){var r,n=s.layout.hierarchy().sort(rG),i=0,a=[1,1];function o(o,s){var l=n.call(this,o,s),u=l[0],c=a[0],f=a[1],h=null==r?Math.sqrt:"function"==typeof r?r:function(){return r};if(u.x=u.y=0,rM(u,function(r){r.r=+h(r.value)}),rM(u,rX),i){var p=i*(r?1:Math.max(2*u.r/c,2*u.r/f))/2;rM(u,function(r){r.r+=p}),rM(u,rX),rM(u,function(r){r.r-=p})}return function r(n,i,a,o){var s=n.children;if(n.x=i+=o*n.x,n.y=a+=o*n.y,n.r*=o,s)for(var l=-1,u=s.length;++l<u;)r(s[l],i,a,o)}(u,c/2,f/2,r?1:1/Math.max(2*u.r/c,2*u.r/f)),l}return o.size=function(r){return arguments.length?(a=r,o):a},o.radius=function(n){return arguments.length?(r=null==n||"function"==typeof n?n:+n,o):r},o.padding=function(r){return arguments.length?(i=+r,o):i},rk(o,n)},s.layout.tree=function(){var r=s.layout.hierarchy().sort(null).value(null),n=rQ,i=[1,1],a=null;function o(o,s){var f=r.call(this,o,s),h=f[0],p=function(r){for(var n,i={A:null,children:[r]},a=[i];null!=(n=a.pop());)for(var o,s=n.children,l=0,u=s.length;l<u;++l)a.push((s[l]=o={_:s[l],parent:n,children:(o=s[l].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:l}).a=o);return i.children[0]}(h);if(rM(p,l),p.parent.m=-p.z,rA(p,u),a)rA(h,c);else{var d=h,v=h,g=h;rA(h,function(r){r.x<d.x&&(d=r),r.x>v.x&&(v=r),r.depth>g.depth&&(g=r)});var y=n(d,v)/2-d.x,m=i[0]/(v.x+n(v,d)/2+y),x=i[1]/(g.depth||1);rA(h,function(r){r.x=(r.x+y)*m,r.y=r.depth*x})}return f}function l(r){var i=r.children,a=r.parent.children,o=r.i?a[r.i-1]:null;if(i.length){!function(r){for(var n,i=0,a=0,o=r.children,s=o.length;--s>=0;)(n=o[s]).z+=i,n.m+=i,i+=n.s+(a+=n.c)}(r);var s=(i[0].z+i[i.length-1].z)/2;o?(r.z=o.z+n(r._,o._),r.m=r.z-s):r.z=s}else o&&(r.z=o.z+n(r._,o._));r.parent.A=function(r,i,a){if(i){for(var o,s,l,u=r,c=r,f=i,h=u.parent.children[0],p=u.m,d=c.m,v=f.m,g=h.m;f=r1(f),u=r0(u),f&&u;)h=r0(h),(c=r1(c)).a=r,(l=f.z+v-u.z-p+n(f._,u._))>0&&(function(r,n,i){var a=i/(n.i-r.i);n.c-=a,n.s+=i,r.c+=a,n.z+=i,n.m+=i}((o=f,s=a,o.a.parent===r.parent?o.a:s),r,l),p+=l,d+=l),v+=f.m,p+=u.m,g+=h.m,d+=c.m;f&&!r1(c)&&(c.t=f,c.m+=v-d),u&&!r0(h)&&(h.t=u,h.m+=p-g,a=r)}return a}(r,o,r.parent.A||a[0])}function u(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function c(r){r.x*=i[0],r.y=r.depth*i[1]}return o.separation=function(r){return arguments.length?(n=r,o):n},o.size=function(r){return arguments.length?(a=null==(i=r)?c:null,o):a?null:i},o.nodeSize=function(r){return arguments.length?(a=null==(i=r)?null:c,o):a?i:null},rk(o,r)},s.layout.cluster=function(){var r=s.layout.hierarchy().sort(null).value(null),n=rQ,i=[1,1],a=!1;function o(o,l){var u,c=r.call(this,o,l),f=c[0],h=0;rM(f,function(r){var i=r.children;i&&i.length?(r.x=i.reduce(function(r,n){return r+n.x},0)/i.length,r.y=1+s.max(i,function(r){return r.y})):(r.x=u?h+=n(r,u):0,r.y=0,u=r)});var p=function r(n){var i=n.children;return i&&i.length?r(i[0]):n}(f),d=function r(n){var i,a=n.children;return a&&(i=a.length)?r(a[i-1]):n}(f),v=p.x-n(p,d)/2,g=d.x+n(d,p)/2;return rM(f,a?function(r){r.x=(r.x-f.x)*i[0],r.y=(f.y-r.y)*i[1]}:function(r){r.x=(r.x-v)/(g-v)*i[0],r.y=(1-(f.y?r.y/f.y:1))*i[1]}),c}return o.separation=function(r){return arguments.length?(n=r,o):n},o.size=function(r){return arguments.length?(a=null==(i=r),o):a?null:i},o.nodeSize=function(r){return arguments.length?(a=null!=(i=r),o):a?i:null},rk(o,r)},s.layout.treemap=function(){var r,n=s.layout.hierarchy(),i=Math.round,a=[1,1],o=null,l=r2,u=!1,c="squarify",f=.5*(1+Math.sqrt(5));function h(r,n){for(var i,a,o=-1,s=r.length;++o<s;)a=(i=r[o]).value*(n<0?0:n),i.area=isNaN(a)||a<=0?0:a}function p(r,n,a,o){var s,l=-1,u=r.length,c=a.x,f=a.y,h=n?i(r.area/n):0;if(n==a.dx){for((o||h>a.dy)&&(h=a.dy);++l<u;)(s=r[l]).x=c,s.y=f,s.dy=h,c+=s.dx=Math.min(a.x+a.dx-c,h?i(s.area/h):0);s.z=!0,s.dx+=a.x+a.dx-c,a.y+=h,a.dy-=h}else{for((o||h>a.dx)&&(h=a.dx);++l<u;)(s=r[l]).x=c,s.y=f,s.dx=h,f+=s.dy=Math.min(a.y+a.dy-f,h?i(s.area/h):0);s.z=!1,s.dy+=a.y+a.dy-f,a.x+=h,a.dx-=h}}function d(i){var o=r||n(i),s=o[0];return s.x=s.y=0,s.value?(s.dx=a[0],s.dy=a[1]):s.dx=s.dy=0,r&&n.revalue(s),h([s],s.dx*s.dy/s.value),(r?function r(n){var i=n.children;if(i&&i.length){var a,o=l(n),s=i.slice(),u=[];for(h(s,o.dx*o.dy/n.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(p(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);i.forEach(r)}}:function r(n){var i=n.children;if(i&&i.length){var a,o,s,u=l(n),d=[],v=i.slice(),g=1/0,y="slice"===c?u.dx:"dice"===c?u.dy:"slice-dice"===c?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(h(v,u.dx*u.dy/n.value),d.area=0;(s=v.length)>0;)d.push(a=v[s-1]),d.area+=a.area,"squarify"!==c||(o=function(r,n){for(var i,a=r.area,o=0,s=1/0,l=-1,u=r.length;++l<u;)(i=r[l].area)&&(i<s&&(s=i),i>o&&(o=i));return n*=n,(a*=a)?Math.max(n*o*f/a,a/(n*s*f)):1/0}(d,y))<=g?(v.pop(),g=o):(d.area-=d.pop().area,p(d,y,u,!1),y=Math.min(u.dx,u.dy),d.length=d.area=0,g=1/0);d.length&&(p(d,y,u,!0),d.length=d.area=0),i.forEach(r)}})(s),u&&(r=o),o}return d.size=function(r){return arguments.length?(a=r,d):a},d.padding=function(r){var n;return arguments.length?(l=null==(o=r)?r2:"function"==(n=typeof r)?function(n){var i=r.call(d,n,n.depth);return null==i?r2(n):r3(n,"number"==typeof i?[i,i,i,i]:i)}:("number"===n&&(r=[r,r,r,r]),function(n){return r3(n,r)}),d):o},d.round=function(r){return arguments.length?(i=r?Math.round:Number,d):i!=Number},d.sticky=function(n){return arguments.length?(u=n,r=null,d):u},d.ratio=function(r){return arguments.length?(f=r,d):f},d.mode=function(r){return arguments.length?(c=r+"",d):c},rk(d,n)},s.random={normal:function(r,n){var i=arguments.length;return i<2&&(n=1),i<1&&(r=0),function(){var i,a,o;do o=(i=2*Math.random()-1)*i+(a=2*Math.random()-1)*a;while(!o||o>1);return r+n*i*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var r=s.random.normal.apply(s,arguments);return function(){return Math.exp(r())}},bates:function(r){var n=s.random.irwinHall(r);return function(){return n()/r}},irwinHall:function(r){return function(){for(var n=0,i=0;i<r;i++)n+=Math.random();return n}}},s.scale={};var r9={floor:z,ceil:z};function nt(r,n,i,a){var o=[],l=[],u=0,c=Math.min(r.length,n.length)-1;for(r[c]<r[0]&&(r=r.slice().reverse(),n=n.slice().reverse());++u<=c;)o.push(i(r[u-1],r[u])),l.push(a(n[u-1],n[u]));return function(n){var i=s.bisect(r,n,1,c)-1;return l[i](o[i](n))}}function ne(r,n){return s.rebind(r,n,"range","rangeRound","interpolate","clamp")}function nr(r,n){return r8(r,r7(nn(r,n)[2])),r8(r,r7(nn(r,n)[2])),r}function nn(r,n){null==n&&(n=10);var i=r5(r),a=i[1]-i[0],o=Math.pow(10,Math.floor(Math.log(a/n)/Math.LN10)),s=n/a*o;return s<=.15?o*=10:s<=.35?o*=5:s<=.75&&(o*=2),i[0]=Math.ceil(i[0]/o)*o,i[1]=Math.floor(i[1]/o)*o+.5*o,i[2]=o,i}function ni(r,n){return s.range.apply(s,nn(r,n))}s.scale.linear=function(){return function r(n,i,a,o){var s,l;function u(){var r=Math.min(n.length,i.length)>2?nt:r6,u=o?rv:rd;return s=r(n,i,u,a),l=r(i,n,u,e3),c}function c(r){return s(r)}return c.invert=function(r){return l(r)},c.domain=function(r){return arguments.length?(n=r.map(Number),u()):n},c.range=function(r){return arguments.length?(i=r,u()):i},c.rangeRound=function(r){return c.range(r).interpolate(rs)},c.clamp=function(r){return arguments.length?(o=r,u()):o},c.interpolate=function(r){return arguments.length?(a=r,u()):a},c.ticks=function(r){return ni(n,r)},c.tickFormat=function(r,i){return d3_scale_linearTickFormat(n,r,i)},c.nice=function(r){return nr(n,r),u()},c.copy=function(){return r(n,i,a,o)},u()}([0,1],[0,1],e3,!1)},s.scale.log=function(){return function r(n,i,a,o){function s(r){return(a?Math.log(r<0?0:r):-Math.log(r>0?0:-r))/Math.log(i)}function l(r){return a?Math.pow(i,r):-Math.pow(i,-r)}function u(r){return n(s(r))}return u.invert=function(r){return l(n.invert(r))},u.domain=function(r){return arguments.length?(a=r[0]>=0,n.domain((o=r.map(Number)).map(s)),u):o},u.base=function(r){return arguments.length?(i=+r,n.domain(o.map(s)),u):i},u.nice=function(){var r=r8(o.map(s),a?Math:na);return n.domain(r),o=r.map(l),u},u.ticks=function(){var r=r5(o),n=[],u=r[0],c=r[1],f=Math.floor(s(u)),h=Math.ceil(s(c)),p=i%1?2:i;if(isFinite(h-f)){if(a){for(;f<h;f++)for(var d=1;d<p;d++)n.push(l(f)*d);n.push(l(f))}else for(n.push(l(f));f++<h;)for(d=p-1;d>0;d--)n.push(l(f)*d);for(f=0;n[f]<u;f++);for(h=n.length;n[h-1]>c;h--);n=n.slice(f,h)}return n},u.copy=function(){return r(n.copy(),i,a,o)},ne(u,n)}(s.scale.linear().domain([0,1]),10,!0,[1,10])};var na={floor:function(r){return-Math.ceil(-r)},ceil:function(r){return-Math.floor(-r)}};function no(r){return function(n){return n<0?-Math.pow(-n,r):Math.pow(n,r)}}s.scale.pow=function(){return function r(n,i,a){var o=no(i),s=no(1/i);function l(r){return n(o(r))}return l.invert=function(r){return s(n.invert(r))},l.domain=function(r){return arguments.length?(n.domain((a=r.map(Number)).map(o)),l):a},l.ticks=function(r){return ni(a,r)},l.tickFormat=function(r,n){return d3_scale_linearTickFormat(a,r,n)},l.nice=function(r){return l.domain(nr(a,r))},l.exponent=function(r){return arguments.length?(o=no(i=r),s=no(1/i),n.domain(a.map(o)),l):i},l.copy=function(){return r(n.copy(),i,a)},ne(l,n)}(s.scale.linear(),1,[0,1])},s.scale.sqrt=function(){return s.scale.pow().exponent(.5)},s.scale.ordinal=function(){return function r(n,i){var a,o,l;function u(r){return o[((a.get(r)||("range"===i.t?a.set(r,n.push(r)):NaN))-1)%o.length]}function c(r,i){return s.range(n.length).map(function(n){return r+i*n})}return u.domain=function(r){if(!arguments.length)return n;n=[],a=new M;for(var o,s=-1,l=r.length;++s<l;)a.has(o=r[s])||a.set(o,n.push(o));return u[i.t].apply(u,i.a)},u.range=function(r){return arguments.length?(o=r,l=0,i={t:"range",a:arguments},u):o},u.rangePoints=function(r,a){arguments.length<2&&(a=0);var s=r[0],f=r[1],h=n.length<2?(s=(s+f)/2,0):(f-s)/(n.length-1+a);return o=c(s+h*a/2,h),l=0,i={t:"rangePoints",a:arguments},u},u.rangeRoundPoints=function(r,a){arguments.length<2&&(a=0);var s=r[0],f=r[1],h=n.length<2?(s=f=Math.round((s+f)/2),0):(f-s)/(n.length-1+a)|0;return o=c(s+Math.round(h*a/2+(f-s-(n.length-1+a)*h)/2),h),l=0,i={t:"rangeRoundPoints",a:arguments},u},u.rangeBands=function(r,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var f=r[1]<r[0],h=r[f-0],p=(r[1-f]-h)/(n.length-a+2*s);return o=c(h+p*s,p),f&&o.reverse(),l=p*(1-a),i={t:"rangeBands",a:arguments},u},u.rangeRoundBands=function(r,a,s){arguments.length<2&&(a=0),arguments.length<3&&(s=a);var f=r[1]<r[0],h=r[f-0],p=r[1-f],d=Math.floor((p-h)/(n.length-a+2*s));return o=c(h+Math.round((p-h-(n.length-a)*d)/2),d),f&&o.reverse(),l=Math.round(d*(1-a)),i={t:"rangeRoundBands",a:arguments},u},u.rangeBand=function(){return l},u.rangeExtent=function(){return r5(i.a[0])},u.copy=function(){return r(n,i)},u.domain(n)}([],{t:"range",a:[[]]})},s.scale.category10=function(){return s.scale.ordinal().range(ns)},s.scale.category20=function(){return s.scale.ordinal().range(nl)},s.scale.category20b=function(){return s.scale.ordinal().range(nu)},s.scale.category20c=function(){return s.scale.ordinal().range(nc)};var ns=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(t2),nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(t2),nu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(t2),nc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(t2);function nf(){return 0}s.scale.quantile=function(){return function r(n,i){var a;function o(){var r=0,o=i.length;for(a=[];++r<o;)a[r-1]=s.quantile(n,r/o);return l}function l(r){if(!isNaN(r=+r))return i[s.bisect(a,r)]}return l.domain=function(r){return arguments.length?(n=r.map(x).filter(b).sort(m),o()):n},l.range=function(r){return arguments.length?(i=r,o()):i},l.quantiles=function(){return a},l.invertExtent=function(r){return(r=i.indexOf(r))<0?[NaN,NaN]:[r>0?a[r-1]:n[0],r<a.length?a[r]:n[n.length-1]]},l.copy=function(){return r(n,i)},o()}([],[])},s.scale.quantize=function(){return function r(n,i,a){var o,s;function l(r){return a[Math.max(0,Math.min(s,Math.floor(o*(r-n))))]}function u(){return o=a.length/(i-n),s=a.length-1,l}return l.domain=function(r){return arguments.length?(n=+r[0],i=+r[r.length-1],u()):[n,i]},l.range=function(r){return arguments.length?(a=r,u()):a},l.invertExtent=function(r){return[r=(r=a.indexOf(r))<0?NaN:r/o+n,r+1/o]},l.copy=function(){return r(n,i,a)},u()}(0,1,[0,1])},s.scale.threshold=function(){return function r(n,i){function a(r){if(r<=r)return i[s.bisect(n,r)]}return a.domain=function(r){return arguments.length?(n=r,a):n},a.range=function(r){return arguments.length?(i=r,a):i},a.invertExtent=function(r){return[n[(r=i.indexOf(r))-1],n[r]]},a.copy=function(){return r(n,i)},a}([.5],[0,1])},s.scale.identity=function(){return function r(n){function i(r){return+r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(n=r.map(i),i):n},i.ticks=function(r){return ni(n,r)},i.tickFormat=function(r,i){return d3_scale_linearTickFormat(n,r,i)},i.copy=function(){return r(n)},i}([0,1])},s.svg={},s.svg.arc=function(){var r=np,n=nd,i=nf,a=nh,o=nv,s=ng,l=ny;function u(){var u=Math.max(0,+r.apply(this,arguments)),f=Math.max(0,+n.apply(this,arguments)),h=o.apply(this,arguments)-tO,p=s.apply(this,arguments)-tO,d=Math.abs(p-h),v=h>p?0:1;if(f<u&&(g=f,f=u,u=g),d>=tC)return c(f,v)+(u?c(u,1-v):"")+"Z";var g,y,m,x,b,_,w,T,k,A,M,S,E=0,L=0,C=[];if((x=(+l.apply(this,arguments)||0)/2)&&(m=a===nh?Math.sqrt(u*u+f*f):+a.apply(this,arguments),v||(L*=-1),f&&(L=tD(m/f*Math.sin(x))),u&&(E=tD(m/u*Math.sin(x)))),f){b=f*Math.cos(h+L),_=f*Math.sin(h+L),w=f*Math.cos(p-L),T=f*Math.sin(p-L);var O=Math.abs(p-h-2*L)<=tE?0:1;if(L&&nm(b,_,w,T)===v^O){var P=(h+p)/2;b=f*Math.cos(P),_=f*Math.sin(P),w=T=null}}else b=_=0;if(u){k=u*Math.cos(p-E),A=u*Math.sin(p-E),M=u*Math.cos(h+E),S=u*Math.sin(h+E);var I=Math.abs(h-p+2*E)<=tE?0:1;if(E&&nm(k,A,M,S)===1-v^I){var D=(h+p)/2;k=u*Math.cos(D),A=u*Math.sin(D),M=S=null}}else k=A=0;if(d>1e-6&&(g=Math.min(Math.abs(f-u)/2,+i.apply(this,arguments)))>.001){y=u<f^v?0:1;var z=g,R=g;if(d<tE){var F=null==M?[k,A]:null==w?[b,_]:ex([b,_],[M,S],[w,T],[k,A]),B=b-F[0],N=_-F[1],j=w-F[0],U=T-F[1],V=1/Math.sin(Math.acos((B*j+N*U)/(Math.sqrt(B*B+N*N)*Math.sqrt(j*j+U*U)))/2),H=Math.sqrt(F[0]*F[0]+F[1]*F[1]);R=Math.min(g,(u-H)/(V-1)),z=Math.min(g,(f-H)/(V+1))}if(null!=w){var q=nx(null==M?[k,A]:[M,S],[b,_],f,z,v),G=nx([w,T],[k,A],f,z,v);g===z?C.push("M",q[0],"A",z,",",z," 0 0,",y," ",q[1],"A",f,",",f," 0 ",1-v^nm(q[1][0],q[1][1],G[1][0],G[1][1]),",",v," ",G[1],"A",z,",",z," 0 0,",y," ",G[0]):C.push("M",q[0],"A",z,",",z," 0 1,",y," ",G[0])}else C.push("M",b,",",_);if(null!=M){var Z=nx([b,_],[M,S],u,-R,v),Y=nx([k,A],null==w?[b,_]:[w,T],u,-R,v);g===R?C.push("L",Y[0],"A",R,",",R," 0 0,",y," ",Y[1],"A",u,",",u," 0 ",v^nm(Y[1][0],Y[1][1],Z[1][0],Z[1][1]),",",1-v," ",Z[1],"A",R,",",R," 0 0,",y," ",Z[0]):C.push("L",Y[0],"A",R,",",R," 0 0,",y," ",Z[0])}else C.push("L",k,",",A)}else C.push("M",b,",",_),null!=w&&C.push("A",f,",",f," 0 ",O,",",v," ",w,",",T),C.push("L",k,",",A),null!=M&&C.push("A",u,",",u," 0 ",I,",",1-v," ",M,",",S);return C.push("Z"),C.join("")}function c(r,n){return"M0,"+r+"A"+r+","+r+" 0 1,"+n+" 0,"+-r+"A"+r+","+r+" 0 1,"+n+" 0,"+r}return u.innerRadius=function(n){return arguments.length?(r=ee(n),u):r},u.outerRadius=function(r){return arguments.length?(n=ee(r),u):n},u.cornerRadius=function(r){return arguments.length?(i=ee(r),u):i},u.padRadius=function(r){return arguments.length?(a=r==nh?nh:ee(r),u):a},u.startAngle=function(r){return arguments.length?(o=ee(r),u):o},u.endAngle=function(r){return arguments.length?(s=ee(r),u):s},u.padAngle=function(r){return arguments.length?(l=ee(r),u):l},u.centroid=function(){var i=(+r.apply(this,arguments)+ +n.apply(this,arguments))/2,a=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-tO;return[Math.cos(a)*i,Math.sin(a)*i]},u};var nh="auto";function np(r){return r.innerRadius}function nd(r){return r.outerRadius}function nv(r){return r.startAngle}function ng(r){return r.endAngle}function ny(r){return r&&r.padAngle}function nm(r,n,i,a){return(r-i)*n-(n-a)*r>0?0:1}function nx(r,n,i,a,o){var s=r[0]-n[0],l=r[1]-n[1],u=(o?a:-a)/Math.sqrt(s*s+l*l),c=u*l,f=-u*s,h=r[0]+c,p=r[1]+f,d=n[0]+c,v=n[1]+f,g=(h+d)/2,y=(p+v)/2,m=d-h,x=v-p,b=m*m+x*x,_=i-a,w=h*v-d*p,T=(x<0?-1:1)*Math.sqrt(Math.max(0,_*_*b-w*w)),k=(w*x-m*T)/b,A=(-w*m-x*T)/b,M=(w*x+m*T)/b,S=(-w*m+x*T)/b,E=k-g,L=A-y,C=M-g,O=S-y;return E*E+L*L>C*C+O*O&&(k=M,A=S),[[k-c,A-f],[k*i/_,A*i/_]]}function nb(){return!0}function n_(r){var n=ep,i=ed,a=nb,o=nT,s=o.key,l=.7;function u(s){var u,c=[],f=[],h=-1,p=s.length,d=ee(n),v=ee(i);function g(){c.push("M",o(r(f),l))}for(;++h<p;)a.call(this,u=s[h],h)?f.push([+d.call(this,u,h),+v.call(this,u,h)]):f.length&&(g(),f=[]);return f.length&&g(),c.length?c.join(""):null}return u.x=function(r){return arguments.length?(n=r,u):n},u.y=function(r){return arguments.length?(i=r,u):i},u.defined=function(r){return arguments.length?(a=r,u):a},u.interpolate=function(r){return arguments.length?(s="function"==typeof r?o=r:(o=nw.get(r)||nT).key,u):s},u.tension=function(r){return arguments.length?(l=r,u):l},u}s.svg.line=function(){return n_(z)};var nw=s.map({linear:nT,"linear-closed":nk,step:function(r){for(var n=0,i=r.length,a=r[0],o=[a[0],",",a[1]];++n<i;)o.push("H",(a[0]+(a=r[n])[0])/2,"V",a[1]);return i>1&&o.push("H",a[0]),o.join("")},"step-before":nA,"step-after":nM,basis:nL,"basis-open":function(r){if(r.length<4)return nT(r);for(var n,i=[],a=-1,o=r.length,s=[0],l=[0];++a<3;)n=r[a],s.push(n[0]),l.push(n[1]);for(i.push(nC(nI,s)+","+nC(nI,l)),--a;++a<o;)n=r[a],s.shift(),s.push(n[0]),l.shift(),l.push(n[1]),nD(i,s,l);return i.join("")},"basis-closed":function(r){for(var n,i,a=-1,o=r.length,s=o+4,l=[],u=[];++a<4;)i=r[a%o],l.push(i[0]),u.push(i[1]);for(n=[nC(nI,l),",",nC(nI,u)],--a;++a<s;)i=r[a%o],l.shift(),l.push(i[0]),u.shift(),u.push(i[1]),nD(n,l,u);return n.join("")},bundle:function(r,n){var i=r.length-1;if(i)for(var a,o,s=r[0][0],l=r[0][1],u=r[i][0]-s,c=r[i][1]-l,f=-1;++f<=i;)o=f/i,(a=r[f])[0]=n*a[0]+(1-n)*(s+o*u),a[1]=n*a[1]+(1-n)*(l+o*c);return nL(r)},cardinal:function(r,n){return r.length<3?nT(r):r[0]+nS(r,nE(r,n))},"cardinal-open":function(r,n){return r.length<4?nT(r):r[1]+nS(r.slice(1,-1),nE(r,n))},"cardinal-closed":function(r,n){return r.length<3?nk(r):r[0]+nS((r.push(r[0]),r),nE([r[r.length-2]].concat(r,[r[1]]),n))},monotone:function(r){return r.length<3?nT(r):r[0]+nS(r,function(r){for(var n,i,a,o,s=[],l=function(r){for(var n=0,i=r.length-1,a=[],o=r[0],s=r[1],l=a[0]=nz(o,s);++n<i;)a[n]=(l+(l=nz(o=s,s=r[n+1])))/2;return a[n]=l,a}(r),u=-1,c=r.length-1;++u<c;)1e-6>k(n=nz(r[u],r[u+1]))?l[u]=l[u+1]=0:(o=(i=l[u]/n)*i+(a=l[u+1]/n)*a)>9&&(o=3*n/Math.sqrt(o),l[u]=o*i,l[u+1]=o*a);for(u=-1;++u<=c;)s.push([(o=(r[Math.min(c,u+1)][0]-r[Math.max(0,u-1)][0])/(6*(1+l[u]*l[u])))||0,l[u]*o||0]);return s}(r))}});function nT(r){return r.length>1?r.join("L"):r+"Z"}function nk(r){return r.join("L")+"Z"}function nA(r){for(var n=0,i=r.length,a=r[0],o=[a[0],",",a[1]];++n<i;)o.push("V",(a=r[n])[1],"H",a[0]);return o.join("")}function nM(r){for(var n=0,i=r.length,a=r[0],o=[a[0],",",a[1]];++n<i;)o.push("H",(a=r[n])[0],"V",a[1]);return o.join("")}function nS(r,n){if(n.length<1||r.length!=n.length&&r.length!=n.length+2)return nT(r);var i=r.length!=n.length,a="",o=r[0],s=r[1],l=n[0],u=l,c=1;if(i&&(a+="Q"+(s[0]-2*l[0]/3)+","+(s[1]-2*l[1]/3)+","+s[0]+","+s[1],o=r[1],c=2),n.length>1){u=n[1],s=r[c],c++,a+="C"+(o[0]+l[0])+","+(o[1]+l[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<n.length;f++,c++)s=r[c],u=n[f],a+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(i){var h=r[c];a+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+h[0]+","+h[1]}return a}function nE(r,n){for(var i,a=[],o=(1-n)/2,s=r[0],l=r[1],u=1,c=r.length;++u<c;)i=s,s=l,a.push([o*((l=r[u])[0]-i[0]),o*(l[1]-i[1])]);return a}function nL(r){if(r.length<3)return nT(r);var n=1,i=r.length,a=r[0],o=a[0],s=a[1],l=[o,o,o,(a=r[1])[0]],u=[s,s,s,a[1]],c=[o,",",s,"L",nC(nI,l),",",nC(nI,u)];for(r.push(r[i-1]);++n<=i;)a=r[n],l.shift(),l.push(a[0]),u.shift(),u.push(a[1]),nD(c,l,u);return r.pop(),c.push("L",a),c.join("")}function nC(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]}nw.forEach(function(r,n){n.key=r,n.closed=/-closed$/.test(r)});var nO=[0,2/3,1/3,0],nP=[0,1/3,2/3,0],nI=[0,1/6,2/3,1/6];function nD(r,n,i){r.push("C",nC(nO,n),",",nC(nO,i),",",nC(nP,n),",",nC(nP,i),",",nC(nI,n),",",nC(nI,i))}function nz(r,n){return(n[1]-r[1])/(n[0]-r[0])}function nR(r){for(var n,i,a,o=-1,s=r.length;++o<s;)i=(n=r[o])[0],a=n[1]-tO,n[0]=i*Math.cos(a),n[1]=i*Math.sin(a);return r}function nF(r){var n=ep,i=ep,a=0,o=ed,s=nb,l=nT,u=l.key,c=l,f="L",h=.7;function p(u){var p,d,v,g=[],y=[],m=[],x=-1,b=u.length,_=ee(n),w=ee(a),T=n===i?function(){return d}:ee(i),k=a===o?function(){return v}:ee(o);function A(){g.push("M",l(r(m),h),f,c(r(y.reverse()),h),"Z")}for(;++x<b;)s.call(this,p=u[x],x)?(y.push([d=+_.call(this,p,x),v=+w.call(this,p,x)]),m.push([+T.call(this,p,x),+k.call(this,p,x)])):y.length&&(A(),y=[],m=[]);return y.length&&A(),g.length?g.join(""):null}return p.x=function(r){return arguments.length?(n=i=r,p):i},p.x0=function(r){return arguments.length?(n=r,p):n},p.x1=function(r){return arguments.length?(i=r,p):i},p.y=function(r){return arguments.length?(a=o=r,p):o},p.y0=function(r){return arguments.length?(a=r,p):a},p.y1=function(r){return arguments.length?(o=r,p):o},p.defined=function(r){return arguments.length?(s=r,p):s},p.interpolate=function(r){return arguments.length?(u="function"==typeof r?l=r:(l=nw.get(r)||nT).key,c=l.reverse||l,f=l.closed?"M":"L",p):u},p.tension=function(r){return arguments.length?(h=r,p):h},p}function nB(r){return r.source}function nN(r){return r.target}function nj(r){return r.radius}function nU(r){return[r.x,r.y]}function nV(){return 64}function nH(){return"circle"}function nq(r){var n=Math.sqrt(r/tE);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}s.svg.line.radial=function(){var r=n_(nR);return r.radius=r.x,delete r.x,r.angle=r.y,delete r.y,r},nA.reverse=nM,nM.reverse=nA,s.svg.area=function(){return nF(z)},s.svg.area.radial=function(){var r=nF(nR);return r.radius=r.x,delete r.x,r.innerRadius=r.x0,delete r.x0,r.outerRadius=r.x1,delete r.x1,r.angle=r.y,delete r.y,r.startAngle=r.y0,delete r.y0,r.endAngle=r.y1,delete r.y1,r},s.svg.chord=function(){var r=nB,n=nN,i=nj,a=nv,o=ng;function s(i,a){var o,s,c,f,h,p,d,v,g,y=l(this,r,i,a),m=l(this,n,i,a);return"M"+y.p0+u(y.r,y.p1,y.a1-y.a0)+(y.a0==m.a0&&y.a1==m.a1?(y.r,y.p1,y.r,"Q 0,0 "+y.p0):(y.r,y.p1,m.r,"Q 0,0 "+m.p0+u(m.r,m.p1,m.a1-m.a0)+(m.r,m.p1,y.r,"Q 0,0 "+y.p0)))+"Z"}function l(r,n,s,l){var u=n.call(r,s,l),c=i.call(r,u,l),f=a.call(r,u,l)-tO,h=o.call(r,u,l)-tO;return{r:c,a0:f,a1:h,p0:[c*Math.cos(f),c*Math.sin(f)],p1:[c*Math.cos(h),c*Math.sin(h)]}}function u(r,n,i){return"A"+r+","+r+" 0 "+ +(i>tE)+",1 "+n}return s.radius=function(r){return arguments.length?(i=ee(r),s):i},s.source=function(n){return arguments.length?(r=ee(n),s):r},s.target=function(r){return arguments.length?(n=ee(r),s):n},s.startAngle=function(r){return arguments.length?(a=ee(r),s):a},s.endAngle=function(r){return arguments.length?(o=ee(r),s):o},s},s.svg.diagonal=function(){var r=nB,n=nN,i=nU;function a(a,o){var s=r.call(this,a,o),l=n.call(this,a,o),u=(s.y+l.y)/2,c=[s,{x:s.x,y:u},{x:l.x,y:u},l];return"M"+(c=c.map(i))[0]+"C"+c[1]+" "+c[2]+" "+c[3]}return a.source=function(n){return arguments.length?(r=ee(n),a):r},a.target=function(r){return arguments.length?(n=ee(r),a):n},a.projection=function(r){return arguments.length?(i=r,a):i},a},s.svg.diagonal.radial=function(){var r=s.svg.diagonal(),n=nU,i=r.projection;return r.projection=function(r){var a;return arguments.length?i((a=n=r,function(){var r=a.apply(this,arguments),n=r[0],i=r[1]-tO;return[n*Math.cos(i),n*Math.sin(i)]})):n},r},s.svg.symbol=function(){var r=nH,n=nV;function i(i,a){return(nG.get(r.call(this,i,a))||nq)(n.call(this,i,a))}return i.type=function(n){return arguments.length?(r=ee(n),i):r},i.size=function(r){return arguments.length?(n=ee(r),i):n},i};var nG=s.map({circle:nq,cross:function(r){var n=Math.sqrt(r/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(r){var n=Math.sqrt(r/(2*nY)),i=n*nY;return"M0,"+-n+"L"+i+",0 0,"+n+" "+-i+",0Z"},square:function(r){var n=Math.sqrt(r)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(r){var n=Math.sqrt(r/nZ),i=n*nZ/2;return"M0,"+i+"L"+n+","+-i+" "+-n+","+-i+"Z"},"triangle-up":function(r){var n=Math.sqrt(r/nZ),i=n*nZ/2;return"M0,"+-i+"L"+n+","+i+" "+-n+","+i+"Z"}});s.svg.symbolTypes=nG.keys();var nZ=Math.sqrt(3),nY=Math.tan(30*tP);J.transition=function(r){for(var n,i,a=nK||++n0,o=n3(r),s=[],l=n$||{time:Date.now(),ease:rr,delay:0,duration:250},u=-1,c=this.length;++u<c;){s.push(n=[]);for(var f=this[u],h=-1,p=f.length;++h<p;)(i=f[h])&&n5(i,h,o,a,l),n.push(i)}return nJ(s,o,a)},J.interrupt=function(r){return this.each(null==r?nW:nX(n3(r)))};var nW=nX(n3());function nX(r){return function(){var n,i,a;(n=this[r])&&(a=n[i=n.active])&&(a.timer.c=null,a.timer.t=NaN,--n.count?delete n[i]:delete this[r],n.active+=.5,a.event&&a.event.interrupt.call(this,this.__data__,a.index))}}function nJ(r,n,i){return G(r,nQ),r.namespace=n,r.id=i,r}var nK,n$,nQ=[],n0=0;function n1(r,n,i,a){var o=r.id,s=r.namespace;return td(r,"function"==typeof i?function(r,l,u){r[s][o].tween.set(n,a(i.call(r,r.__data__,l,u)))}:(i=a(i),function(r){r[s][o].tween.set(n,i)}))}function n2(r){return null==r&&(r=""),function(){this.textContent=r}}function n3(r){return null==r?"__transition__":"__transition_"+r+"__"}function n5(r,n,i,a,o){var s,l,u,c,f,h=r[i]||(r[i]={active:0,count:0}),p=h[a];function d(i){var o=h.active,d=h[o];for(var g in d&&(d.timer.c=null,d.timer.t=NaN,--h.count,delete h[o],d.event&&d.event.interrupt.call(r,r.__data__,d.index)),h)if(+g<a){var y=h[g];y.timer.c=null,y.timer.t=NaN,--h.count,delete h[g]}l.c=v,eu(function(){return l.c&&v(i||1)&&(l.c=null,l.t=NaN),1},0,s),h.active=a,p.event&&p.event.start.call(r,r.__data__,n),f=[],p.tween.forEach(function(i,a){(a=a.call(r,r.__data__,n))&&f.push(a)}),c=p.ease,u=p.duration}function v(o){for(var s=o/u,l=c(s),d=f.length;d>0;)f[--d].call(r,l);if(s>=1)return p.event&&p.event.end.call(r,r.__data__,n),--h.count?delete h[a]:delete r[i],1}p||(l=eu(function(r){var n=p.delay;if(l.t=n+s,n<=r)return d(r-n);l.c=d},0,s=o.time),p=h[a]={tween:new M,time:s,timer:l,delay:o.delay,duration:o.duration,ease:o.ease,index:n},o=null,++h.count)}nQ.call=J.call,nQ.empty=J.empty,nQ.node=J.node,nQ.size=J.size,s.transition=function(r,n){return r&&r.transition?nK?r.transition(n):r:s.selection().transition(r)},s.transition.prototype=nQ,nQ.select=function(r){var n,i,a,o=this.id,s=this.namespace,l=[];r=K(r);for(var u=-1,c=this.length;++u<c;){l.push(n=[]);for(var f=this[u],h=-1,p=f.length;++h<p;)(a=f[h])&&(i=r.call(a,a.__data__,h,u))?("__data__"in a&&(i.__data__=a.__data__),n5(i,h,s,o,a[s][o]),n.push(i)):n.push(null)}return nJ(l,s,o)},nQ.selectAll=function(r){var n,i,a,o,s,l=this.id,u=this.namespace,c=[];r=$(r);for(var f=-1,h=this.length;++f<h;)for(var p=this[f],d=-1,v=p.length;++d<v;)if(a=p[d]){s=a[u][l],i=r.call(a,a.__data__,d,f),c.push(n=[]);for(var g=-1,y=i.length;++g<y;)(o=i[g])&&n5(o,g,u,l,s),n.push(o)}return nJ(c,u,l)},nQ.filter=function(r){var n,i,a=[];"function"!=typeof r&&(r=th(r));for(var o=0,s=this.length;o<s;o++){a.push(n=[]);for(var l,u=0,c=(l=this[o]).length;u<c;u++)(i=l[u])&&r.call(i,i.__data__,u,o)&&n.push(i)}return nJ(a,this.namespace,this.id)},nQ.tween=function(r,n){var i=this.id,a=this.namespace;return arguments.length<2?this.node()[a][i].tween.get(r):td(this,null==n?function(n){n[a][i].tween.remove(r)}:function(o){o[a][i].tween.set(r,n)})},nQ.attr=function(r,n){if(arguments.length<2){for(n in r)this.attr(n,r[n]);return this}var i="transform"==r?rp:e3,a=s.ns.qualify(r);function o(){this.removeAttribute(a)}function l(){this.removeAttributeNS(a.space,a.local)}return n1(this,"attr."+r,n,a.local?function(r){return null==r?l:(r+="",function(){var n,o=this.getAttributeNS(a.space,a.local);return o!==r&&(n=i(o,r),function(r){this.setAttributeNS(a.space,a.local,n(r))})})}:function(r){return null==r?o:(r+="",function(){var n,o=this.getAttribute(a);return o!==r&&(n=i(o,r),function(r){this.setAttribute(a,n(r))})})})},nQ.attrTween=function(r,n){var i=s.ns.qualify(r);return this.tween("attr."+r,i.local?function(r,a){var o=n.call(this,r,a,this.getAttributeNS(i.space,i.local));return o&&function(r){this.setAttributeNS(i.space,i.local,o(r))}}:function(r,a){var o=n.call(this,r,a,this.getAttribute(i));return o&&function(r){this.setAttribute(i,o(r))}})},nQ.style=function(r,n,i){var a=arguments.length;if(a<3){if("string"!=typeof r){for(i in a<2&&(n=""),r)this.style(i,r[i],n);return this}i=""}function o(){this.style.removeProperty(r)}return n1(this,"style."+r,n,function(n){return null==n?o:(n+="",function(){var a,o=h(this).getComputedStyle(this,null).getPropertyValue(r);return o!==n&&(a=e3(o,n),function(n){this.style.setProperty(r,a(n),i)})})})},nQ.styleTween=function(r,n,i){return arguments.length<3&&(i=""),this.tween("style."+r,function(a,o){var s=n.call(this,a,o,h(this).getComputedStyle(this,null).getPropertyValue(r));return s&&function(n){this.style.setProperty(r,s(n),i)}})},nQ.text=function(r){return n1(this,"text",r,n2)},nQ.remove=function(){var r=this.namespace;return this.each("end.transition",function(){var n;this[r].count<2&&(n=this.parentNode)&&n.removeChild(this)})},nQ.ease=function(r){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof r&&(r=s.ease.apply(s,arguments)),td(this,function(a){a[i][n].ease=r}))},nQ.delay=function(r){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].delay:td(this,"function"==typeof r?function(a,o,s){a[i][n].delay=+r.call(a,a.__data__,o,s)}:(r=+r,function(a){a[i][n].delay=r}))},nQ.duration=function(r){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].duration:td(this,"function"==typeof r?function(a,o,s){a[i][n].duration=Math.max(1,r.call(a,a.__data__,o,s))}:(r=Math.max(1,r),function(a){a[i][n].duration=r}))},nQ.each=function(r,n){var i=this.id,a=this.namespace;if(arguments.length<2){var o=n$,l=nK;try{nK=i,td(this,function(n,o,s){n$=n[a][i],r.call(n,n.__data__,o,s)})}finally{n$=o,nK=l}}else td(this,function(o){var l=o[a][i];(l.event||(l.event=s.dispatch("start","end","interrupt"))).on(r,n)});return this},nQ.transition=function(){for(var r,n,i,a=this.id,o=++n0,s=this.namespace,l=[],u=0,c=this.length;u<c;u++){l.push(r=[]);for(var f,h=0,p=(f=this[u]).length;h<p;h++)(n=f[h])&&n5(n,h,s,o,{time:(i=n[s][a]).time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration}),r.push(n)}return nJ(l,s,o)},s.svg.axis=function(){var r,n=s.scale.linear(),i=n4,a=6,o=6,l=3,c=[10],f=null;function h(u){u.each(function(){var u,h=s.select(this),p=this.__chart__||n,d=this.__chart__=n.copy(),v=null==f?d.ticks?d.ticks.apply(d,c):d.domain():f,g=null==r?d.tickFormat?d.tickFormat.apply(d,c):z:r,y=h.selectAll(".tick").data(v,d),m=y.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),x=s.transition(y.exit()).style("opacity",1e-6).remove(),b=s.transition(y.order()).style("opacity",1),_=Math.max(a,0)+l,w=r4(d),T=h.selectAll(".domain").data([0]),k=(T.enter().append("path").attr("class","domain"),s.transition(T));m.append("line"),m.append("text");var A,M,S,E,L=m.select("line"),C=b.select("line"),O=y.select("text").text(g),P=m.select("text"),I=b.select("text"),D="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(u=n8,A="x",S="y",M="x2",E="y2",O.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),k.attr("d","M"+w[0]+","+D*o+"V0H"+w[1]+"V"+D*o)):(u=n7,A="y",S="x",M="y2",E="x2",O.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),k.attr("d","M"+D*o+","+w[0]+"H0V"+w[1]+"H"+D*o)),L.attr(E,D*a),P.attr(S,D*_),C.attr(M,0).attr(E,D*a),I.attr(A,0).attr(S,D*_),d.rangeBand){var R=d,F=R.rangeBand()/2;p=d=function(r){return R(r)+F}}else p.rangeBand?p=d:x.call(u,d,p);m.call(u,p,d),b.call(u,d,d)})}return h.scale=function(r){return arguments.length?(n=r,h):n},h.orient=function(r){return arguments.length?(i=r in n6?r+"":n4,h):i},h.ticks=function(){return arguments.length?(c=u(arguments),h):c},h.tickValues=function(r){return arguments.length?(f=r,h):f},h.tickFormat=function(n){return arguments.length?(r=n,h):r},h.tickSize=function(r){var n=arguments.length;return n?(a=+r,o=+arguments[n-1],h):a},h.innerTickSize=function(r){return arguments.length?(a=+r,h):a},h.outerTickSize=function(r){return arguments.length?(o=+r,h):o},h.tickPadding=function(r){return arguments.length?(l=+r,h):l},h.tickSubdivide=function(){return arguments.length&&h},h};var n4="bottom",n6={top:1,right:1,bottom:1,left:1};function n8(r,n,i){r.attr("transform",function(r){var a=n(r);return"translate("+(isFinite(a)?a:i(r))+",0)"})}function n7(r,n,i){r.attr("transform",function(r){var a=n(r);return"translate(0,"+(isFinite(a)?a:i(r))+")"})}s.svg.brush=function(){var r,n,i=H(d,"brushstart","brush","brushend"),a=null,o=null,l=[0,0],u=[0,0],c=!0,f=!0,p=it[0];function d(r){r.each(function(){var r=s.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),n=r.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),r.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=r.selectAll(".resize").data(p,z);i.exit().remove(),i.enter().append("g").attr("class",function(r){return"resize "+r}).style("cursor",function(r){return n9[r]}).append("rect").attr("x",function(r){return/[ew]$/.test(r)?-3:null}).attr("y",function(r){return/^[ns]/.test(r)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),i.style("display",d.empty()?"none":null);var l,u=s.transition(r),c=s.transition(n);a&&(l=r4(a),c.attr("x",l[0]).attr("width",l[1]-l[0]),g(u)),o&&(l=r4(o),c.attr("y",l[0]).attr("height",l[1]-l[0]),y(u)),v(u)})}function v(r){r.selectAll(".resize").attr("transform",function(r){return"translate("+l[+/e$/.test(r)]+","+u[+/^s/.test(r)]+")"})}function g(r){r.select(".extent").attr("x",l[0]),r.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function y(r){r.select(".extent").attr("y",u[0]),r.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function m(){var p,m,x=this,b=s.select(s.event.target),_=i.of(x,arguments),w=s.select(x),T=b.datum(),k=!/^(n|s)$/.test(T)&&a,A=!/^(e|w)$/.test(T)&&o,M=b.classed("extent"),S=tT(x),E=s.mouse(x),L=s.select(h(x)).on("keydown.brush",function(){32==s.event.keyCode&&(M||(p=null,E[0]-=l[1],E[1]-=u[1],M=2),U())}).on("keyup.brush",function(){32==s.event.keyCode&&2==M&&(E[0]+=l[1],E[1]+=u[1],M=0,U())});if(s.event.changedTouches?L.on("touchmove.brush",P).on("touchend.brush",D):L.on("mousemove.brush",P).on("mouseup.brush",D),w.interrupt().selectAll("*").interrupt(),M)E[0]=l[0]-E[0],E[1]=u[0]-E[1];else if(T){var C=+/w$/.test(T),O=+/^n/.test(T);m=[l[1-C]-E[0],u[1-O]-E[1]],E[0]=l[C],E[1]=u[O]}else s.event.altKey&&(p=E.slice());function P(){var r=s.mouse(x),n=!1;m&&(r[0]+=m[0],r[1]+=m[1]),M||(s.event.altKey?(p||(p=[(l[0]+l[1])/2,(u[0]+u[1])/2]),E[0]=l[+(r[0]<p[0])],E[1]=u[+(r[1]<p[1])]):p=null),k&&I(r,a,0)&&(g(w),n=!0),A&&I(r,o,1)&&(y(w),n=!0),n&&(v(w),_({type:"brush",mode:M?"move":"resize"}))}function I(i,a,o){var s,h,d=r4(a),v=d[0],g=d[1],y=E[o],m=o?u:l,x=m[1]-m[0];if(M&&(v-=y,g-=x+y),s=(o?f:c)?Math.max(v,Math.min(g,i[o])):i[o],M?h=(s+=y)+x:(p&&(y=Math.max(v,Math.min(g,2*p[o]-s))),y<s?(h=s,s=y):h=y),m[0]!=s||m[1]!=h)return o?n=null:r=null,m[0]=s,m[1]=h,!0}function D(){P(),w.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),s.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),_({type:"brushend"})}w.style("pointer-events","none").selectAll(".resize").style("display",null),s.select("body").style("cursor",b.style("cursor")),_({type:"brushstart"}),P()}return d.event=function(a){a.each(function(){var a=i.of(this,arguments),o={x:l,y:u,i:r,j:n},c=this.__chart__||o;this.__chart__=o,nK?s.select(this).transition().each("start.brush",function(){r=c.i,n=c.j,l=c.x,u=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var i=e5(l,o.x),s=e5(u,o.y);return r=n=null,function(r){l=o.x=i(r),u=o.y=s(r),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){r=o.i,n=o.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},d.x=function(r){return arguments.length?(p=it[!(a=r)<<1|!o],d):a},d.y=function(r){return arguments.length?(p=it[!a<<1|!(o=r)],d):o},d.clamp=function(r){return arguments.length?(a&&o?(c=!!r[0],f=!!r[1]):a?c=!!r:o&&(f=!!r),d):a&&o?[c,f]:a?c:o?f:null},d.extent=function(i){var s,c,f,h,p;return arguments.length?(a&&(s=i[0],c=i[1],o&&(s=s[0],c=c[0]),r=[s,c],a.invert&&(s=a(s),c=a(c)),c<s&&(p=s,s=c,c=p),s==l[0]&&c==l[1]||(l=[s,c])),o&&(f=i[0],h=i[1],a&&(f=f[1],h=h[1]),n=[f,h],o.invert&&(f=o(f),h=o(h)),h<f&&(p=f,f=h,h=p),f==u[0]&&h==u[1]||(u=[f,h])),d):(a&&(r?(s=r[0],c=r[1]):(s=l[0],c=l[1],a.invert&&(s=a.invert(s),c=a.invert(c)),c<s&&(p=s,s=c,c=p))),o&&(n?(f=n[0],h=n[1]):(f=u[0],h=u[1],o.invert&&(f=o.invert(f),h=o.invert(h)),h<f&&(p=f,f=h,h=p))),a&&o?[[s,f],[c,h]]:a?[s,c]:o&&[f,h])},d.clear=function(){return d.empty()||(l=[0,0],u=[0,0],r=n=null),d},d.empty=function(){return!!a&&l[0]==l[1]||!!o&&u[0]==u[1]},s.rebind(d,i,"on")};var n9={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},it=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function ie(r){return JSON.parse(r.responseText)}function ir(r){var n=c.createRange();return n.selectNode(c.body),n.createContextualFragment(r.responseText)}s.text=er(function(r){return r.responseText}),s.json=function(r,n){return en(r,"application/json",ie,n)},s.html=function(r,n){return en(r,"text/html",ir,n)},s.xml=er(function(r){return r.responseXML}),void 0===(o="function"==typeof(a=s)?a.call(n,i,n,r):a)||(r.exports=o)}).apply(self)},97433:function(r){r.exports=function(){"use strict";var r,n,i;function a(a,o){if(r){if(n){var s="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",l={};r(l),i=o(l),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else n=o}else r=o}return a(0,function(r){function n(r,n){return r(n={exports:{}},n.exports),n.exports}var i,a,o,s="1.13.4";function l(r,n,i,a){this.cx=3*r,this.bx=3*(i-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(a-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=i,this.p2y=a}function u(r,n){this.x=r,this.y=n}l.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},l.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},l.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},l.prototype.solveCurveX=function(r,n){var i,a,o,s,l;for(void 0===n&&(n=1e-6),o=r,l=0;l<8;l++){if(Math.abs(s=this.sampleCurveX(o)-r)<n)return o;var u=this.sampleCurveDerivativeX(o);if(1e-6>Math.abs(u))break;o-=s/u}if((o=r)<(i=0))return i;if(o>(a=1))return a;for(;i<a&&!(Math.abs((s=this.sampleCurveX(o))-r)<n);)r>s?i=o:a=o,o=.5*(a-i)+i;return o},l.prototype.solve=function(r,n){return this.sampleCurveY(this.solveCurveX(r,n))},u.prototype={clone:function(){return new u(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,n){return this.clone()._rotateAround(r,n)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var n=r.x-this.x,i=r.y-this.y;return n*n+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,n){return Math.atan2(this.x*n-this.y*r,this.x*r+this.y*n)},_matMult:function(r){var n=r[0]*this.x+r[1]*this.y,i=r[2]*this.x+r[3]*this.y;return this.x=n,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var n=Math.cos(r),i=Math.sin(r),a=n*this.x-i*this.y,o=i*this.x+n*this.y;return this.x=a,this.y=o,this},_rotateAround:function(r,n){var i=Math.cos(r),a=Math.sin(r),o=n.x+i*(this.x-n.x)-a*(this.y-n.y),s=n.y+a*(this.x-n.x)+i*(this.y-n.y);return this.x=o,this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(r){return r instanceof u?r:Array.isArray(r)?new u(r[0],r[1]):r};var c="undefined"!=typeof self?self:{};function f(r,n,i,a){var o=new l(r,n,i,a);return function(r){return o.solve(r)}}var h=f(.25,.1,.25,1);function p(r,n,i){return Math.min(i,Math.max(n,r))}function d(r,n,i){var a=i-n,o=((r-n)%a+a)%a+n;return o===n?i:o}function v(r){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];for(var a=0;a<n.length;a+=1){var o=n[a];for(var s in o)r[s]=o[s]}return r}var g=1;function y(){return g++}function m(){return function r(n){return n?(n^16*Math.random()>>n/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function x(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function b(r,n){r.forEach(function(r){n[r]&&(n[r]=n[r].bind(n))})}function _(r,n){return -1!==r.indexOf(n,r.length-n.length)}function w(r,n,i){var a={};for(var o in r)a[o]=n.call(i||this,r[o],o,r);return a}function T(r,n,i){var a={};for(var o in r)n.call(i||this,r[o],o,r)&&(a[o]=r[o]);return a}function k(r){return Array.isArray(r)?r.map(k):"object"==typeof r&&r?w(r,k):r}var A={};function M(r){A[r]||("undefined"!=typeof console&&console.warn(r),A[r]=!0)}function S(r,n,i){return(i.y-r.y)*(n.x-r.x)>(n.y-r.y)*(i.x-r.x)}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function L(r){var n={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(r,i,a,o){var s=a||o;return n[i]=!s||s.toLowerCase(),""}),n["max-age"]){var i=parseInt(n["max-age"],10);isNaN(i)?delete n["max-age"]:n["max-age"]=i}return n}var C=null;function O(r){if(null==C){var n=r.navigator?r.navigator.userAgent:null;C=!!r.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return C}function P(r){try{var n=c[r];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(r){return!1}}var I,D,z,R,F=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now.bind(Date),B=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame,N=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.msCancelAnimationFrame,j={now:F,frame:function(r){var n=B(r);return{cancel:function(){return N(n)}}},getImageData:function(r,n){void 0===n&&(n=0);var i=c.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw Error("failed to create canvas 2d context");return i.width=r.width,i.height=r.height,a.drawImage(r,0,0,r.width,r.height),a.getImageData(-n,-n,r.width+2*n,r.height+2*n)},resolveURL:function(r){return I||(I=c.document.createElement("a")),I.href=r,I.href},hardwareConcurrency:c.navigator&&c.navigator.hardwareConcurrency||4,get devicePixelRatio(){return c.devicePixelRatio},get prefersReducedMotion(){return!!c.matchMedia&&(null==D&&(D=c.matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}},U={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},V={supported:!1,testSupport:function(r){!H&&R&&(q?G(r):z=r)}},H=!1,q=!1;function G(r){var n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,R),r.isContextLost())return;V.supported=!0}catch(r){}r.deleteTexture(n),H=!0}c.document&&((R=c.document.createElement("img")).onload=function(){z&&G(z),z=null,q=!0},R.onerror=function(){H=!0,z=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Z=function(r,n){this._transformRequestFn=r,this._customAccessToken=n,this._createSkuToken()};function Y(r){return 0===r.indexOf("mapbox:")}Z.prototype._createSkuToken=function(){var r=function(){for(var r="",n=0;n<10;n++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},Z.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Z.prototype.transformRequest=function(r,n){return this._transformRequestFn&&this._transformRequestFn(r,n)||{url:r}},Z.prototype.normalizeStyleURL=function(r,n){if(!Y(r))return r;var i=K(r);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||n)},Z.prototype.normalizeGlyphsURL=function(r,n){if(!Y(r))return r;var i=K(r);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||n)},Z.prototype.normalizeSourceURL=function(r,n){if(!Y(r))return r;var i=K(r);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||n)},Z.prototype.normalizeSpriteURL=function(r,n,i,a){var o=K(r);return Y(r)?(o.path="/styles/v1"+o.path+"/sprite"+n+i,this._makeAPIURL(o,this._customAccessToken||a)):(o.path+=""+n+i,$(o))},Z.prototype.normalizeTileURL=function(r,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Y(r))return r;var i=K(r),a=j.devicePixelRatio>=2||512===n?"@2x":"",o=V.supported?".webp":"$1";i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+a+o),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var s=this._customAccessToken||function(r){for(var n=0;n<r.length;n+=1){var i=r[n].match(/^access_token=(.*)$/);if(i)return i[1]}return null}(i.params)||U.ACCESS_TOKEN;return U.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,s)},Z.prototype.canonicalizeTileURL=function(r,n){var i=K(r);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return r;var a="mapbox://tiles/";a+=i.path.replace("/v4/","");var o=i.params;return n&&(o=o.filter(function(r){return!r.match(/^access_token=/)})),o.length&&(a+="?"+o.join("&")),a},Z.prototype.canonicalizeTileset=function(r,n){for(var i=!!n&&Y(n),a=[],o=0,s=r.tiles||[];o<s.length;o+=1){var l=s[o];X(l)?a.push(this.canonicalizeTileURL(l,i)):a.push(l)}return a},Z.prototype._makeAPIURL=function(r,n){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=K(U.API_URL);if(r.protocol=a.protocol,r.authority=a.authority,"http"===r.protocol){var o=r.params.indexOf("secure");o>=0&&r.params.splice(o,1)}if("/"!==a.path&&(r.path=""+a.path+r.path),!U.REQUIRE_ACCESS_TOKEN)return $(r);if(!(n=n||U.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. "+i);if("s"===n[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return r.params=r.params.filter(function(r){return -1===r.indexOf("access_token")}),r.params.push("access_token="+n),$(r)};var W=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function X(r){return W.test(r)}var J=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function K(r){var n=r.match(J);if(!n)throw Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function $(r){var n=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+n}var Q="mapbox.eventData";function tt(r){if(!r)return null;var n,i=r.split(".");if(!i||3!==i.length)return null;try{return JSON.parse((n=i[1],decodeURIComponent(c.atob(n).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(r){return null}}var te=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};te.prototype.getStorageKey=function(r){var n,i,a=tt(U.ACCESS_TOKEN);return n=a&&a.u?(i=a.u,c.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(Number("0x"+n))}))):U.ACCESS_TOKEN||"",r?Q+"."+r+":"+n:Q+":"+n},te.prototype.fetchEventData=function(){var r=P("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(r)try{var a=c.localStorage.getItem(n);a&&(this.eventData=JSON.parse(a));var o=c.localStorage.getItem(i);o&&(this.anonId=o)}catch(r){M("Unable to read from LocalStorage")}},te.prototype.saveEventData=function(){var r=P("localStorage"),n=this.getStorageKey(),i=this.getStorageKey("uuid");if(r)try{c.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&c.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(r){M("Unable to write to LocalStorage")}},te.prototype.processRequests=function(r){},te.prototype.postEvent=function(r,n,i,a){var o=this;if(U.EVENTS_URL){var l=K(U.EVENTS_URL);l.params.push("access_token="+(a||U.ACCESS_TOKEN||""));var u={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:s,skuId:"01",userId:this.anonId},c=n?v(u,n):u,f={url:$(l),headers:{"Content-Type":"text/plain"},body:JSON.stringify([c])};this.pendingRequest=tk(f,function(r){o.pendingRequest=null,i(r),o.saveEventData(),o.processRequests(a)})}},te.prototype.queueRequest=function(r,n){this.queue.push(r),this.processRequests(n)};var tr,tn,ti=function(r){function n(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.postMapLoadEvent=function(r,n,i,a){this.skuToken=i,(U.EVENTS_URL&&a||U.ACCESS_TOKEN&&Array.isArray(r)&&r.some(function(r){return Y(r)||X(r)}))&&this.queueRequest({id:n,timestamp:Date.now()},a)},n.prototype.processRequests=function(r){var n=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),a=i.id,o=i.timestamp;a&&this.success[a]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=m()),this.postEvent(o,{skuToken:this.skuToken},function(r){r||a&&(n.success[a]=!0)},r))}},n}(te),ta=new(function(r){function n(n){r.call(this,"appUserTurnstile"),this._customAccessToken=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.postTurnstileEvent=function(r,n){U.EVENTS_URL&&U.ACCESS_TOKEN&&Array.isArray(r)&&r.some(function(r){return Y(r)||X(r)})&&this.queueRequest(Date.now(),n)},n.prototype.processRequests=function(r){var n=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=tt(U.ACCESS_TOKEN),a=i?i.u:U.ACCESS_TOKEN,o=a!==this.eventData.tokenU;x(this.anonId)||(this.anonId=m(),o=!0);var s=this.queue.shift();if(this.eventData.lastSuccess){var l=new Date(this.eventData.lastSuccess),u=new Date(s),c=(s-this.eventData.lastSuccess)/864e5;o=o||c>=1||c<-1||l.getDate()!==u.getDate()}else o=!0;if(!o)return this.processRequests();this.postEvent(s,{"enabled.telemetry":!1},function(r){r||(n.eventData.lastSuccess=s,n.eventData.tokenU=a)},r)}},n}(te)),to=ta.postTurnstileEvent.bind(ta),ts=new ti,tl=ts.postMapLoadEvent.bind(ts),tu="mapbox-tiles",tc=500,tf=50;function th(){c.caches&&!tr&&(tr=c.caches.open(tu))}function tp(r){var n=r.indexOf("?");return n<0?r:r.slice(0,n)}var td,tv=1/0;function tg(){return null==td&&(td=c.OffscreenCanvas&&new c.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof c.createImageBitmap),td}var ty={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ty);var tm,tx,tb=function(r){function n(n,i,a){401===i&&X(a)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,n),this.status=i,this.url=a,this.name=this.constructor.name,this.message=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},n}(Error),t_=E()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===c.location.protocol?c.parent:c).location.href},tw=function(r,n){var i,a,o,s,l,u,f,h,p;if(i=r.url,!(/^file:/.test(i)||/^file:/.test(t_())&&!/^\w+:/.test(i))){if(c.fetch&&c.Request&&c.AbortController&&c.Request.prototype.hasOwnProperty("signal"))return o=new c.AbortController,s=new c.Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:t_(),signal:o.signal}),l=!1,u=!1,f=(a=s.url).indexOf("sku=")>0&&X(a),"json"===r.type&&s.headers.set("Accept","application/json"),h=function(i,a,o){if(!u){if(i&&"SecurityError"!==i.message&&M(i),a&&o)return p(a);var l=Date.now();c.fetch(s).then(function(i){if(i.ok){var a=f?i.clone():null;return p(i,a,l)}return n(new tb(i.statusText,i.status,r.url))}).catch(function(r){20!==r.code&&n(Error(r.message))})}},p=function(i,a,o){("arrayBuffer"===r.type?i.arrayBuffer():"json"===r.type?i.json():i.text()).then(function(r){u||(a&&o&&function(r,n,i){if(th(),tr){var a={status:n.status,statusText:n.statusText,headers:new c.Headers};n.headers.forEach(function(r,n){return a.headers.set(n,r)});var o=L(n.headers.get("Cache-Control")||"");o["no-store"]||(o["max-age"]&&a.headers.set("Expires",new Date(i+1e3*o["max-age"]).toUTCString()),new Date(a.headers.get("Expires")).getTime()-i<42e4||function(r,n){if(void 0===tn)try{new Response(new ReadableStream),tn=!0}catch(r){tn=!1}tn?n(r.body):r.blob().then(n)}(n,function(n){var i=new c.Response(n,a);th(),tr&&tr.then(function(n){return n.put(tp(r.url),i)}).catch(function(r){return M(r.message)})}))}}(s,a,o),l=!0,n(null,r,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(function(r){u||n(Error(r.message))})},f?function(r,n){if(th(),!tr)return n(null);var i=tp(r.url);tr.then(function(r){r.match(i).then(function(a){var o=function(r){if(!r)return!1;var n=new Date(r.headers.get("Expires")||0),i=L(r.headers.get("Cache-Control")||"");return n>Date.now()&&!i["no-cache"]}(a);r.delete(i),o&&r.put(i,a.clone()),n(null,a,o)}).catch(n)}).catch(n)}(s,h):h(null,null),{cancel:function(){u=!0,l||o.abort()}};if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,n,void 0,!0)}return function(r,n){var i=new c.XMLHttpRequest;for(var a in i.open(r.method||"GET",r.url,!0),"arrayBuffer"===r.type&&(i.responseType="arraybuffer"),r.headers)i.setRequestHeader(a,r.headers[a]);return"json"===r.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===r.credentials,i.onerror=function(){n(Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var a=i.response;if("json"===r.type)try{a=JSON.parse(i.response)}catch(r){return n(r)}n(null,a,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else n(new tb(i.statusText,i.status,r.url))},i.send(r.body),{cancel:function(){return i.abort()}}}(r,n)},tT=function(r,n){return tw(v(r,{type:"arrayBuffer"}),n)},tk=function(r,n){return tw(v(r,{method:"POST"}),n)},tA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";tm=[],tx=0;var tM=function(r,n){if(V.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),tx>=U.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:r,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return tm.push(i),i}tx++;var a=!1,o=function(){if(!a)for(a=!0,tx--;tm.length&&tx<U.MAX_PARALLEL_IMAGE_REQUESTS;){var r=tm.shift(),n=r.requestParameters,i=r.callback;r.cancelled||(r.cancel=tM(n,i).cancel)}},s=tT(r,function(r,i,a,s){var l,u,f;o(),r?n(r):i&&(tg()?function(r,n){var i=new c.Blob([new Uint8Array(r)],{type:"image/png"});c.createImageBitmap(i).then(function(r){n(null,r)}).catch(function(r){n(Error("Could not load image because of "+r.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(i,n):(l=new c.Image,u=c.URL,l.onload=function(){n(null,l),u.revokeObjectURL(l.src),l.onload=null,c.requestAnimationFrame(function(){l.src=tA})},l.onerror=function(){return n(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},f=new c.Blob([new Uint8Array(i)],{type:"image/png"}),l.cacheControl=a,l.expires=s,l.src=i.byteLength?u.createObjectURL(f):tA))});return{cancel:function(){s.cancel(),o()}}};function tS(r,n,i){i[r]&&-1!==i[r].indexOf(n)||(i[r]=i[r]||[],i[r].push(n))}function tE(r,n,i){if(i&&i[r]){var a=i[r].indexOf(n);-1!==a&&i[r].splice(a,1)}}var tL=function(r,n){void 0===n&&(n={}),v(this,n),this.type=r},tC=function(r){function n(n,i){void 0===i&&(i={}),r.call(this,"error",v({error:n},i))}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(tL),tO=function(){};tO.prototype.on=function(r,n){return this._listeners=this._listeners||{},tS(r,n,this._listeners),this},tO.prototype.off=function(r,n){return tE(r,n,this._listeners),tE(r,n,this._oneTimeListeners),this},tO.prototype.once=function(r,n){return this._oneTimeListeners=this._oneTimeListeners||{},tS(r,n,this._oneTimeListeners),this},tO.prototype.fire=function(r,n){"string"==typeof r&&(r=new tL(r,n||{}));var i=r.type;if(this.listens(i)){r.target=this;for(var a=0,o=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];a<o.length;a+=1)o[a].call(this,r);for(var s=0,l=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];s<l.length;s+=1){var u=l[s];tE(i,u,this._oneTimeListeners),u.call(this,r)}var c=this._eventedParent;c&&(v(r,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(r))}else r instanceof tC&&console.error(r.error);return this},tO.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},tO.prototype.setEventedParent=function(r,n){return this._eventedParent=r,this._eventedParentData=n,this};var tP={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},tI=function(r,n,i,a){this.message=(r?r+": ":"")+i,a&&(this.identifier=a),null!=n&&n.__line__&&(this.line=n.__line__)};function tD(r){var n=r.key,i=r.value;return i?[new tI(n,i,"constants have been deprecated as of v8")]:[]}function tz(r){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];for(var a=0;a<n.length;a+=1){var o=n[a];for(var s in o)r[s]=o[s]}return r}function tR(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function tF(r){if(Array.isArray(r))return r.map(tF);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var n={};for(var i in r)n[i]=tF(r[i]);return n}return tR(r)}var tB=function(r){function n(n,i){r.call(this,i),this.message=i,this.key=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(Error),tN=function(r,n){void 0===n&&(n=[]),this.parent=r,this.bindings={};for(var i=0,a=n;i<a.length;i+=1){var o=a[i],s=o[0],l=o[1];this.bindings[s]=l}};tN.prototype.concat=function(r){return new tN(this,r)},tN.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw Error(r+" not found in scope.")},tN.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var tj={kind:"null"},tU={kind:"number"},tV={kind:"string"},tH={kind:"boolean"},tq={kind:"color"},tG={kind:"object"},tZ={kind:"value"},tY={kind:"collator"},tW={kind:"formatted"},tX={kind:"resolvedImage"};function tJ(r,n){return{kind:"array",itemType:r,N:n}}function tK(r){if("array"===r.kind){var n=tK(r.itemType);return"number"==typeof r.N?"array<"+n+", "+r.N+">":"value"===r.itemType.kind?"array":"array<"+n+">"}return r.kind}var t$=[tj,tU,tV,tH,tq,tW,tG,tJ(tZ),tX];function tQ(r,n){if("error"===n.kind)return null;if("array"===r.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!tQ(r.itemType,n.itemType))&&("number"!=typeof r.N||r.N===n.N))return null}else{if(r.kind===n.kind)return null;if("value"===r.kind){for(var i=0;i<t$.length;i+=1)if(!tQ(t$[i],n))return null}}return"Expected "+tK(r)+" but found "+tK(n)+" instead."}function t0(r,n){return n.some(function(n){return n.kind===r.kind})}function t1(r,n){return n.some(function(n){return"null"===n?null===r:"array"===n?Array.isArray(r):"object"===n?r&&!Array.isArray(r)&&"object"==typeof r:n===typeof r})}var t2=n(function(r,n){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(r){return(r=Math.round(r))<0?0:r>255?255:r}function o(r){return r<0?0:r>1?1:r}function s(r){return"%"===r[r.length-1]?a(parseFloat(r)/100*255):a(parseInt(r))}function l(r){return"%"===r[r.length-1]?o(parseFloat(r)/100):o(parseFloat(r))}function u(r,n,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?r+(n-r)*i*6:2*i<1?n:3*i<2?r+(n-r)*(2/3-i)*6:r}try{n.parseCSSColor=function(r){var n,o=r.replace(/ /g,"").toLowerCase();if(o in i)return i[o].slice();if("#"===o[0])return 4===o.length?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:7===o.length&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var c=o.indexOf("("),f=o.indexOf(")");if(-1!==c&&f+1===o.length){var h=o.substr(0,c),p=o.substr(c+1,f-(c+1)).split(","),d=1;switch(h){case"rgba":if(4!==p.length)break;d=l(p.pop());case"rgb":return 3!==p.length?null:[s(p[0]),s(p[1]),s(p[2]),d];case"hsla":if(4!==p.length)break;d=l(p.pop());case"hsl":if(3!==p.length)break;var v=(parseFloat(p[0])%360+360)%360/360,g=l(p[1]),y=l(p[2]),m=y<=.5?y*(g+1):y+g-y*g,x=2*y-m;return[a(255*u(x,m,v+1/3)),a(255*u(x,m,v)),a(255*u(x,m,v-1/3)),d]}}return null}}catch(r){}}).parseCSSColor,t3=function(r,n,i,a){void 0===a&&(a=1),this.r=r,this.g=n,this.b=i,this.a=a};t3.parse=function(r){if(r){if(r instanceof t3)return r;if("string"==typeof r){var n=t2(r);if(n)return new t3(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3])}}},t3.prototype.toString=function(){var r=this.toArray();return"rgba("+Math.round(r[0])+","+Math.round(r[1])+","+Math.round(r[2])+","+r[3]+")"},t3.prototype.toArray=function(){var r=this.r,n=this.g,i=this.b,a=this.a;return 0===a?[0,0,0,0]:[255*r/a,255*n/a,255*i/a,a]},t3.black=new t3(0,0,0,1),t3.white=new t3(1,1,1,1),t3.transparent=new t3(0,0,0,0),t3.red=new t3(1,0,0,1);var t5=function(r,n,i){this.sensitivity=r?n?"variant":"case":n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};t5.prototype.compare=function(r,n){return this.collator.compare(r,n)},t5.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var t4=function(r,n,i,a,o){this.text=r,this.image=n,this.scale=i,this.fontStack=a,this.textColor=o},t6=function(r){this.sections=r};t6.fromString=function(r){return new t6([new t4(r,null,null,null,null)])},t6.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(r){return 0!==r.text.length||r.image&&0!==r.image.name.length})},t6.factory=function(r){return r instanceof t6?r:t6.fromString(r)},t6.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(r){return r.text}).join("")},t6.prototype.serialize=function(){for(var r=["format"],n=0,i=this.sections;n<i.length;n+=1){var a=i[n];if(a.image)r.push(["image",a.image.name]);else{r.push(a.text);var o={};a.fontStack&&(o["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(o["font-scale"]=a.scale),a.textColor&&(o["text-color"]=["rgba"].concat(a.textColor.toArray())),r.push(o)}}return r};var t8=function(r){this.name=r.name,this.available=r.available};function t7(r,n,i,a){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:"Invalid rgba value ["+[r,n,i,a].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof a?[r,n,i,a]:[r,n,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function t9(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof t3||r instanceof t5||r instanceof t6||r instanceof t8)return!0;if(Array.isArray(r)){for(var n=0;n<r.length;n+=1)if(!t9(r[n]))return!1;return!0}if("object"==typeof r){for(var i in r)if(!t9(r[i]))return!1;return!0}return!1}function et(r){if(null===r)return tj;if("string"==typeof r)return tV;if("boolean"==typeof r)return tH;if("number"==typeof r)return tU;if(r instanceof t3)return tq;if(r instanceof t5)return tY;if(r instanceof t6)return tW;if(r instanceof t8)return tX;if(Array.isArray(r)){for(var n,i=r.length,a=0;a<r.length;a+=1){var o=et(r[a]);if(n){if(n===o)continue;n=tZ;break}n=o}return tJ(n||tZ,i)}return tG}function ee(r){var n=typeof r;return null===r?"":"string"===n||"number"===n||"boolean"===n?String(r):r instanceof t3||r instanceof t6||r instanceof t8?r.toString():JSON.stringify(r)}t8.prototype.toString=function(){return this.name},t8.fromString=function(r){return r?new t8({name:r,available:!1}):null},t8.prototype.serialize=function(){return["image",this.name]};var er=function(r,n){this.type=r,this.value=n};er.parse=function(r,n){if(2!==r.length)return n.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!t9(r[1]))return n.error("invalid value");var i=r[1],a=et(i),o=n.expectedType;return"array"===a.kind&&0===a.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(a=o),new er(a,i)},er.prototype.evaluate=function(){return this.value},er.prototype.eachChild=function(){},er.prototype.outputDefined=function(){return!0},er.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof t3?["rgba"].concat(this.value.toArray()):this.value instanceof t6?this.value.serialize():this.value};var en=function(r){this.name="ExpressionEvaluationError",this.message=r};en.prototype.toJSON=function(){return this.message};var ei={string:tV,number:tU,boolean:tH,object:tG},ea=function(r,n){this.type=r,this.args=n};ea.parse=function(r,n){if(r.length<2)return n.error("Expected at least one argument.");var i,a,o,s=1,l=r[0];if("array"===l){if(r.length>2){var u=r[1];if("string"!=typeof u||!(u in ei)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);i=ei[u],s++}else i=tZ;if(r.length>3){if(null!==r[2]&&("number"!=typeof r[2]||r[2]<0||r[2]!==Math.floor(r[2])))return n.error('The length argument to "array" must be a positive integer literal',2);a=r[2],s++}o=tJ(i,a)}else o=ei[l];for(var c=[];s<r.length;s++){var f=n.parse(r[s],s,tZ);if(!f)return null;c.push(f)}return new ea(o,c)},ea.prototype.evaluate=function(r){for(var n=0;n<this.args.length;n++){var i=this.args[n].evaluate(r);if(!tQ(this.type,et(i)))return i;if(n===this.args.length-1)throw new en("Expected value to be of type "+tK(this.type)+", but found "+tK(et(i))+" instead.")}return null},ea.prototype.eachChild=function(r){this.args.forEach(r)},ea.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},ea.prototype.serialize=function(){var r=this.type,n=[r.kind];if("array"===r.kind){var i=r.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){n.push(i.kind);var a=r.N;("number"==typeof a||this.args.length>1)&&n.push(a)}}return n.concat(this.args.map(function(r){return r.serialize()}))};var eo=function(r){this.type=tW,this.sections=r};eo.parse=function(r,n){if(r.length<2)return n.error("Expected at least one argument.");var i=r[1];if(!Array.isArray(i)&&"object"==typeof i)return n.error("First argument must be an image or text section.");for(var a=[],o=!1,s=1;s<=r.length-1;++s){var l=r[s];if(o&&"object"==typeof l&&!Array.isArray(l)){o=!1;var u=null;if(l["font-scale"]&&!(u=n.parse(l["font-scale"],1,tU)))return null;var c=null;if(l["text-font"]&&!(c=n.parse(l["text-font"],1,tJ(tV))))return null;var f=null;if(l["text-color"]&&!(f=n.parse(l["text-color"],1,tq)))return null;var h=a[a.length-1];h.scale=u,h.font=c,h.textColor=f}else{var p=n.parse(r[s],1,tZ);if(!p)return null;var d=p.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,a.push({content:p,scale:null,font:null,textColor:null})}}return new eo(a)},eo.prototype.evaluate=function(r){return new t6(this.sections.map(function(n){var i=n.content.evaluate(r);return et(i)===tX?new t4("",i,null,null,null):new t4(ee(i),null,n.scale?n.scale.evaluate(r):null,n.font?n.font.evaluate(r).join(","):null,n.textColor?n.textColor.evaluate(r):null)}))},eo.prototype.eachChild=function(r){for(var n=0,i=this.sections;n<i.length;n+=1){var a=i[n];r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){for(var r=["format"],n=0,i=this.sections;n<i.length;n+=1){var a=i[n];r.push(a.content.serialize());var o={};a.scale&&(o["font-scale"]=a.scale.serialize()),a.font&&(o["text-font"]=a.font.serialize()),a.textColor&&(o["text-color"]=a.textColor.serialize()),r.push(o)}return r};var es=function(r){this.type=tX,this.input=r};es.parse=function(r,n){if(2!==r.length)return n.error("Expected two arguments.");var i=n.parse(r[1],1,tV);return i?new es(i):n.error("No image name provided.")},es.prototype.evaluate=function(r){var n=this.input.evaluate(r),i=t8.fromString(n);return i&&r.availableImages&&(i.available=r.availableImages.indexOf(n)>-1),i},es.prototype.eachChild=function(r){r(this.input)},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){return["image",this.input.serialize()]};var el={"to-boolean":tH,"to-color":tq,"to-number":tU,"to-string":tV},eu=function(r,n){this.type=r,this.args=n};eu.parse=function(r,n){if(r.length<2)return n.error("Expected at least one argument.");var i=r[0];if(("to-boolean"===i||"to-string"===i)&&2!==r.length)return n.error("Expected one argument.");for(var a=el[i],o=[],s=1;s<r.length;s++){var l=n.parse(r[s],s,tZ);if(!l)return null;o.push(l)}return new eu(a,o)},eu.prototype.evaluate=function(r){if("boolean"===this.type.kind)return!!this.args[0].evaluate(r);if("color"===this.type.kind){for(var n,i,a=0,o=this.args;a<o.length;a+=1){if(i=null,(n=o[a].evaluate(r))instanceof t3)return n;if("string"==typeof n){var s=r.parseColor(n);if(s)return s}else if(Array.isArray(n)&&!(i=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":t7(n[0],n[1],n[2],n[3])))return new t3(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new en(i||"Could not parse color from value '"+("string"==typeof n?n:String(JSON.stringify(n)))+"'")}if("number"===this.type.kind){for(var l=null,u=0,c=this.args;u<c.length;u+=1){if(null===(l=c[u].evaluate(r)))return 0;var f=Number(l);if(!isNaN(f))return f}throw new en("Could not convert "+JSON.stringify(l)+" to number.")}return"formatted"===this.type.kind?t6.fromString(ee(this.args[0].evaluate(r))):"resolvedImage"===this.type.kind?t8.fromString(ee(this.args[0].evaluate(r))):ee(this.args[0].evaluate(r))},eu.prototype.eachChild=function(r){this.args.forEach(r)},eu.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},eu.prototype.serialize=function(){if("formatted"===this.type.kind)return new eo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new es(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(n){r.push(n.serialize())}),r};var ec=["Unknown","Point","LineString","Polygon"],ef=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ef.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ef.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ec[this.feature.type]:this.feature.type:null},ef.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ef.prototype.canonicalID=function(){return this.canonical},ef.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ef.prototype.parseColor=function(r){var n=this._parseColorCache[r];return n||(n=this._parseColorCache[r]=t3.parse(r)),n};var eh=function(r,n,i,a){this.name=r,this.type=n,this._evaluate=i,this.args=a};eh.prototype.evaluate=function(r){return this._evaluate(r,this.args)},eh.prototype.eachChild=function(r){this.args.forEach(r)},eh.prototype.outputDefined=function(){return!1},eh.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},eh.parse=function(r,n){var i,a=r[0],o=eh.definitions[a];if(!o)return n.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,u=l.filter(function(n){var i=n[0];return!Array.isArray(i)||i.length===r.length-1}),c=null,f=0;f<u.length;f+=1){var h=u[f],p=h[0],d=h[1];c=new eL(n.registry,n.path,null,n.scope);for(var v=[],g=!1,y=1;y<r.length;y++){var m=r[y],x=Array.isArray(p)?p[y-1]:p.type,b=c.parse(m,1+v.length,x);if(!b){g=!0;break}v.push(b)}if(!g){if(Array.isArray(p)&&p.length!==v.length)c.error("Expected "+p.length+" arguments, but found "+v.length+" instead.");else{for(var _=0;_<v.length;_++){var w=Array.isArray(p)?p[_]:p.type,T=v[_];c.concat(_+1).checkSubtype(w,T.type)}if(0===c.errors.length)return new eh(a,s,d,v)}}}if(1===u.length)(i=n.errors).push.apply(i,c.errors);else{for(var k=(u.length?u:l).map(function(r){var n;return Array.isArray(n=r[0])?"("+n.map(tK).join(", ")+")":"("+tK(n.type)+"...)"}).join(" | "),A=[],M=1;M<r.length;M++){var S=n.parse(r[M],1+A.length);if(!S)return null;A.push(tK(S.type))}n.error("Expected arguments of type "+k+", but found ("+A.join(", ")+") instead.")}return null},eh.register=function(r,n){for(var i in eh.definitions=n,n)r[i]=eh};var ep=function(r,n,i){this.type=tY,this.locale=i,this.caseSensitive=r,this.diacriticSensitive=n};function ed(r,n){r[0]=Math.min(r[0],n[0]),r[1]=Math.min(r[1],n[1]),r[2]=Math.max(r[2],n[0]),r[3]=Math.max(r[3],n[1])}function ev(r,n){return!(r[0]<=n[0]||r[2]>=n[2]||r[1]<=n[1]||r[3]>=n[3])}function eg(r,n){for(var i,a,o,s,l,u,c,f,h=!1,p=0,d=n.length;p<d;p++)for(var v=n[p],g=0,y=v.length;g<y-1;g++){if(o=v[g],s=v[g+1],l=void 0,u=void 0,c=void 0,f=void 0,l=r[0]-o[0],u=r[1]-o[1],c=r[0]-s[0],l*(f=r[1]-s[1])-c*u==0&&l*c<=0&&u*f<=0)return!1;i=v[g],a=v[g+1],i[1]>r[1]!=a[1]>r[1]&&r[0]<(a[0]-i[0])*(r[1]-i[1])/(a[1]-i[1])+i[0]&&(h=!h)}return h}function ey(r,n,i,a){var o=r[0]-i[0],s=r[1]-i[1],l=n[0]-i[0],u=n[1]-i[1],c=a[0]-i[0],f=a[1]-i[1],h=o*f-c*s,p=l*f-c*u;return h>0&&p<0||h<0&&p>0}function em(r,n){for(var i=0;i<r.length;++i)if(!eg(r[i],n))return!1;for(var a=0;a<r.length-1;++a)if(function(r,n,i){for(var a,o,s,l,u,c=0;c<i.length;c+=1)for(var f=i[c],h=0;h<f.length-1;++h)if(a=f[h],o=f[h+1],s=void 0,l=void 0,u=void 0,u=[n[0]-r[0],n[1]-r[1]],0!=(s=[o[0]-a[0],o[1]-a[1]],l=u,s[0]*l[1]-s[1]*l[0])&&ey(r,n,a,o)&&ey(a,o,r,n))return!0;return!1}(r[a],r[a+1],n))return!1;return!0}function ex(r,n,i){for(var a=[],o=0;o<r.length;o++){for(var s=[],l=0;l<r[o].length;l++){var u=function(r,n){var i=(180+r[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,o=Math.pow(2,n.z);return[Math.round(i*o*8192),Math.round(a*o*8192)]}(r[o][l],i);ed(n,u),s.push(u)}a.push(s)}return a}function eb(r,n,i){for(var a=[],o=0;o<r.length;o++){var s=ex(r[o],n,i);a.push(s)}return a}function e_(r,n,i,a){if(r[0]<i[0]||r[0]>i[2]){var o=.5*a,s=r[0]-i[0]>o?-a:i[0]-r[0]>o?a:0;0===s&&(s=r[0]-i[2]>o?-a:i[2]-r[0]>o?a:0),r[0]+=s}ed(n,r)}function ew(r,n,i,a){for(var o=8192*Math.pow(2,a.z),s=[8192*a.x,8192*a.y],l=[],u=0;u<r.length;u+=1)for(var c=0,f=r[u];c<f.length;c+=1){var h=f[c],p=[h.x+s[0],h.y+s[1]];e_(p,n,i,o),l.push(p)}return l}function eT(r,n,i,a){for(var o=8192*Math.pow(2,a.z),s=[8192*a.x,8192*a.y],l=[],u=0;u<r.length;u+=1){for(var c=[],f=0,h=r[u];f<h.length;f+=1){var p=h[f],d=[p.x+s[0],p.y+s[1]];ed(n,d),c.push(d)}l.push(c)}if(n[2]-n[0]<=o/2){n[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var v=0;v<l.length;v+=1)for(var g=0,y=l[v];g<y.length;g+=1)e_(y[g],n,i,o)}return l}ep.parse=function(r,n){if(2!==r.length)return n.error("Expected one argument.");var i=r[1];if("object"!=typeof i||Array.isArray(i))return n.error("Collator options argument must be an object.");var a=n.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,tH);if(!a)return null;var o=n.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,tH);if(!o)return null;var s=null;return!i.locale||(s=n.parse(i.locale,1,tV))?new ep(a,o,s):null},ep.prototype.evaluate=function(r){return new t5(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},ep.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},ep.prototype.outputDefined=function(){return!1},ep.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var ek=function(r,n){this.type=tH,this.geojson=r,this.geometries=n};function eA(r){if(r instanceof eh&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof ek)return!1;var n=!0;return r.eachChild(function(r){n&&!eA(r)&&(n=!1)}),n}function eM(r){if(r instanceof eh&&"feature-state"===r.name)return!1;var n=!0;return r.eachChild(function(r){n&&!eM(r)&&(n=!1)}),n}function eS(r,n){if(r instanceof eh&&n.indexOf(r.name)>=0)return!1;var i=!0;return r.eachChild(function(r){i&&!eS(r,n)&&(i=!1)}),i}ek.parse=function(r,n){if(2!==r.length)return n.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(t9(r[1])){var i=r[1];if("FeatureCollection"===i.type)for(var a=0;a<i.features.length;++a){var o=i.features[a].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new ek(i,i.features[a].geometry)}else if("Feature"===i.type){var s=i.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new ek(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new ek(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ek.prototype.evaluate=function(r){if(null!=r.geometry()&&null!=r.canonicalID()){if("Point"===r.geometryType())return function(r,n){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=r.canonicalID();if("Polygon"===n.type){var s=ex(n.coordinates,a,o),l=ew(r.geometry(),i,a,o);if(!ev(i,a))return!1;for(var u=0;u<l.length;u+=1)if(!eg(l[u],s))return!1}if("MultiPolygon"===n.type){var c=eb(n.coordinates,a,o),f=ew(r.geometry(),i,a,o);if(!ev(i,a))return!1;for(var h=0;h<f.length;h+=1)if(!function(r,n){for(var i=0;i<n.length;i++)if(eg(r,n[i]))return!0;return!1}(f[h],c))return!1}return!0}(r,this.geometries);if("LineString"===r.geometryType())return function(r,n){var i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=r.canonicalID();if("Polygon"===n.type){var s=ex(n.coordinates,a,o),l=eT(r.geometry(),i,a,o);if(!ev(i,a))return!1;for(var u=0;u<l.length;u+=1)if(!em(l[u],s))return!1}if("MultiPolygon"===n.type){var c=eb(n.coordinates,a,o),f=eT(r.geometry(),i,a,o);if(!ev(i,a))return!1;for(var h=0;h<f.length;h+=1)if(!function(r,n){for(var i=0;i<n.length;i++)if(em(r,n[i]))return!0;return!1}(f[h],c))return!1}return!0}(r,this.geometries)}return!1},ek.prototype.eachChild=function(){},ek.prototype.outputDefined=function(){return!0},ek.prototype.serialize=function(){return["within",this.geojson]};var eE=function(r,n){this.type=n.type,this.name=r,this.boundExpression=n};eE.parse=function(r,n){if(2!==r.length||"string"!=typeof r[1])return n.error("'var' expression requires exactly one string literal argument.");var i=r[1];return n.scope.has(i)?new eE(i,n.scope.get(i)):n.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},eE.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},eE.prototype.eachChild=function(){},eE.prototype.outputDefined=function(){return!1},eE.prototype.serialize=function(){return["var",this.name]};var eL=function(r,n,i,a,o){void 0===n&&(n=[]),void 0===a&&(a=new tN),void 0===o&&(o=[]),this.registry=r,this.path=n,this.key=n.map(function(r){return"["+r+"]"}).join(""),this.scope=a,this.errors=o,this.expectedType=i};function eC(r,n){for(var i,a,o=r.length-1,s=0,l=o,u=0;s<=l;)if(i=r[u=Math.floor((s+l)/2)],a=r[u+1],i<=n){if(u===o||n<a)return u;s=u+1}else{if(!(i>n))throw new en("Input is not a number.");l=u-1}return 0}eL.prototype.parse=function(r,n,i,a,o){return void 0===o&&(o={}),n?this.concat(n,i,a)._parse(r,o):this._parse(r,o)},eL.prototype._parse=function(r,n){function i(r,n,i){return"assert"===i?new ea(n,[r]):"coerce"===i?new eu(n,[r]):r}if(null!==r&&"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r||(r=["literal",r]),Array.isArray(r)){if(0===r.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=r[0];if("string"!=typeof a)return this.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[a];if(o){var s=o.parse(r,this);if(!s)return null;if(this.expectedType){var l=this.expectedType,u=s.type;if("string"!==l.kind&&"number"!==l.kind&&"boolean"!==l.kind&&"object"!==l.kind&&"array"!==l.kind||"value"!==u.kind){if("color"!==l.kind&&"formatted"!==l.kind&&"resolvedImage"!==l.kind||"value"!==u.kind&&"string"!==u.kind){if(this.checkSubtype(l,u))return null}else s=i(s,l,n.typeAnnotation||"coerce")}else s=i(s,l,n.typeAnnotation||"assert")}if(!(s instanceof er)&&"resolvedImage"!==s.type.kind&&function r(n){if(n instanceof eE)return r(n.boundExpression);if(n instanceof eh&&"error"===n.name||n instanceof ep||n instanceof ek)return!1;var i=n instanceof eu||n instanceof ea,a=!0;return n.eachChild(function(n){a=i?a&&r(n):a&&n instanceof er}),!!a&&eA(n)&&eS(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(s)){var c=new ef;try{s=new er(s.type,s.evaluate(c))}catch(r){return this.error(r.message),null}}return s}return this.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===r?this.error("'undefined' value invalid. Use null instead."):"object"==typeof r?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof r+" instead.")},eL.prototype.concat=function(r,n,i){var a="number"==typeof r?this.path.concat(r):this.path,o=i?this.scope.concat(i):this.scope;return new eL(this.registry,a,n||null,o,this.errors)},eL.prototype.error=function(r){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];var a=""+this.key+n.map(function(r){return"["+r+"]"}).join("");this.errors.push(new tB(a,r))},eL.prototype.checkSubtype=function(r,n){var i=tQ(r,n);return i&&this.error(i),i};var eO=function(r,n,i){this.type=r,this.input=n,this.labels=[],this.outputs=[];for(var a=0;a<i.length;a+=1){var o=i[a],s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}};function eP(r,n,i){return r*(1-i)+n*i}eO.parse=function(r,n){if(r.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return n.error("Expected an even number of arguments.");var i=n.parse(r[1],1,tU);if(!i)return null;var a=[],o=null;n.expectedType&&"value"!==n.expectedType.kind&&(o=n.expectedType);for(var s=1;s<r.length;s+=2){var l=1===s?-1/0:r[s],u=r[s+1],c=s,f=s+1;if("number"!=typeof l)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(a.length&&a[a.length-1][0]>=l)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var h=n.parse(u,f,o);if(!h)return null;o=o||h.type,a.push([l,h])}return new eO(o,i,a)},eO.prototype.evaluate=function(r){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(r);var a=this.input.evaluate(r);if(a<=n[0])return i[0].evaluate(r);var o=n.length;return a>=n[o-1]?i[o-1].evaluate(r):i[eC(n,a)].evaluate(r)},eO.prototype.eachChild=function(r){r(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1)r(i[n])},eO.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},eO.prototype.serialize=function(){for(var r=["step",this.input.serialize()],n=0;n<this.labels.length;n++)n>0&&r.push(this.labels[n]),r.push(this.outputs[n].serialize());return r};var eI=Object.freeze({__proto__:null,number:eP,color:function(r,n,i){return new t3(eP(r.r,n.r,i),eP(r.g,n.g,i),eP(r.b,n.b,i),eP(r.a,n.a,i))},array:function(r,n,i){return r.map(function(r,a){return eP(r,n[a],i)})}}),eD=4/29,ez=6/29,eR=6/29*3*(6/29),eF=6/29*(6/29)*(6/29),eB=Math.PI/180,eN=180/Math.PI;function ej(r){return r>eF?Math.pow(r,1/3):r/eR+eD}function eU(r){return r>ez?r*r*r:eR*(r-eD)}function eV(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function eH(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function eq(r){var n=eH(r.r),i=eH(r.g),a=eH(r.b),o=ej((.4124564*n+.3575761*i+.1804375*a)/.95047),s=ej((.2126729*n+.7151522*i+.072175*a)/1);return{l:116*s-16,a:500*(o-s),b:200*(s-ej((.0193339*n+.119192*i+.9503041*a)/1.08883)),alpha:r.a}}function eG(r){var n=(r.l+16)/116,i=isNaN(r.a)?n:n+r.a/500,a=isNaN(r.b)?n:n-r.b/200;return n=1*eU(n),new t3(eV(3.2404542*(i=.95047*eU(i))-1.5371385*n-.4985314*(a=1.08883*eU(a))),eV(-.969266*i+1.8760108*n+.041556*a),eV(.0556434*i-.2040259*n+1.0572252*a),r.alpha)}var eZ={forward:eq,reverse:eG,interpolate:function(r,n,i){return{l:eP(r.l,n.l,i),a:eP(r.a,n.a,i),b:eP(r.b,n.b,i),alpha:eP(r.alpha,n.alpha,i)}}},eY={forward:function(r){var n=eq(r),i=n.l,a=n.a,o=n.b,s=Math.atan2(o,a)*eN;return{h:s<0?s+360:s,c:Math.sqrt(a*a+o*o),l:i,alpha:r.a}},reverse:function(r){var n=r.h*eB,i=r.c;return eG({l:r.l,a:Math.cos(n)*i,b:Math.sin(n)*i,alpha:r.alpha})},interpolate:function(r,n,i){var a,o;return{h:(a=r.h,o=n.h-a,a+i*(o>180||o<-180?o-360*Math.round(o/360):o)),c:eP(r.c,n.c,i),l:eP(r.l,n.l,i),alpha:eP(r.alpha,n.alpha,i)}}},eW=Object.freeze({__proto__:null,lab:eZ,hcl:eY}),eX=function(r,n,i,a,o){this.type=r,this.operator=n,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(var s=0;s<o.length;s+=1){var l=o[s],u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}};function eJ(r,n,i,a){var o=a-i,s=r-i;return 0===o?0:1===n?s/o:(Math.pow(n,s)-1)/(Math.pow(n,o)-1)}eX.interpolationFactor=function(r,n,i,a){var o=0;if("exponential"===r.name)o=eJ(n,r.base,i,a);else if("linear"===r.name)o=eJ(n,1,i,a);else if("cubic-bezier"===r.name){var s=r.controlPoints;o=new l(s[0],s[1],s[2],s[3]).solve(eJ(n,1,i,a))}return o},eX.parse=function(r,n){var i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type "+String(a[0]),1,0);var u=a.slice(1);if(4!==u.length||u.some(function(r){return"number"!=typeof r||r<0||r>1}))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:u}}if(r.length-1<4)return n.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,tU)))return null;var c=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=tq:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var h=0;h<s.length;h+=2){var p=s[h],d=s[h+1],v=h+3,g=h+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(c.length&&c[c.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var y=n.parse(d,g,f);if(!y)return null;f=f||y.type,c.push([p,y])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new eX(f,i,a,o,c):n.error("Type "+tK(f)+" is not interpolatable.")},eX.prototype.evaluate=function(r){var n=this.labels,i=this.outputs;if(1===n.length)return i[0].evaluate(r);var a=this.input.evaluate(r);if(a<=n[0])return i[0].evaluate(r);var o=n.length;if(a>=n[o-1])return i[o-1].evaluate(r);var s=eC(n,a),l=n[s],u=n[s+1],c=eX.interpolationFactor(this.interpolation,a,l,u),f=i[s].evaluate(r),h=i[s+1].evaluate(r);return"interpolate"===this.operator?eI[this.type.kind.toLowerCase()](f,h,c):"interpolate-hcl"===this.operator?eY.reverse(eY.interpolate(eY.forward(f),eY.forward(h),c)):eZ.reverse(eZ.interpolate(eZ.forward(f),eZ.forward(h),c))},eX.prototype.eachChild=function(r){r(this.input);for(var n=0,i=this.outputs;n<i.length;n+=1)r(i[n])},eX.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},eX.prototype.serialize=function(){var r;r="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var n=[this.operator,r,this.input.serialize()],i=0;i<this.labels.length;i++)n.push(this.labels[i],this.outputs[i].serialize());return n};var eK=function(r,n){this.type=r,this.args=n};eK.parse=function(r,n){if(r.length<2)return n.error("Expectected at least one argument.");var i=null,a=n.expectedType;a&&"value"!==a.kind&&(i=a);for(var o=[],s=0,l=r.slice(1);s<l.length;s+=1){var u=l[s],c=n.parse(u,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!c)return null;i=i||c.type,o.push(c)}return new eK(a&&o.some(function(r){return tQ(a,r.type)})?tZ:i,o)},eK.prototype.evaluate=function(r){for(var n,i=null,a=0,o=0,s=this.args;o<s.length&&(a++,(i=s[o].evaluate(r))&&i instanceof t8&&!i.available&&(n||(n=i.name),i=null,a===this.args.length&&(i=n)),null===i);o+=1);return i},eK.prototype.eachChild=function(r){this.args.forEach(r)},eK.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},eK.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(n){r.push(n.serialize())}),r};var e$=function(r,n){this.type=n.type,this.bindings=[].concat(r),this.result=n};e$.prototype.evaluate=function(r){return this.result.evaluate(r)},e$.prototype.eachChild=function(r){for(var n=0,i=this.bindings;n<i.length;n+=1)r(i[n][1]);r(this.result)},e$.parse=function(r,n){if(r.length<4)return n.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var i=[],a=1;a<r.length-1;a+=2){var o=r[a];if("string"!=typeof o)return n.error("Expected string, but found "+typeof o+" instead.",a);if(/[^a-zA-Z0-9_]/.test(o))return n.error("Variable names must contain only alphanumeric characters or '_'.",a);var s=n.parse(r[a+1],a+1);if(!s)return null;i.push([o,s])}var l=n.parse(r[r.length-1],r.length-1,n.expectedType,i);return l?new e$(i,l):null},e$.prototype.outputDefined=function(){return this.result.outputDefined()},e$.prototype.serialize=function(){for(var r=["let"],n=0,i=this.bindings;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];r.push(o,s.serialize())}return r.push(this.result.serialize()),r};var eQ=function(r,n,i){this.type=r,this.index=n,this.input=i};eQ.parse=function(r,n){if(3!==r.length)return n.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tU),a=n.parse(r[2],2,tJ(n.expectedType||tZ));return i&&a?new eQ(a.type.itemType,i,a):null},eQ.prototype.evaluate=function(r){var n=this.index.evaluate(r),i=this.input.evaluate(r);if(n<0)throw new en("Array index out of bounds: "+n+" < 0.");if(n>=i.length)throw new en("Array index out of bounds: "+n+" > "+(i.length-1)+".");if(n!==Math.floor(n))throw new en("Array index must be an integer, but found "+n+" instead.");return i[n]},eQ.prototype.eachChild=function(r){r(this.index),r(this.input)},eQ.prototype.outputDefined=function(){return!1},eQ.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var e0=function(r,n){this.type=tH,this.needle=r,this.haystack=n};e0.parse=function(r,n){if(3!==r.length)return n.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tZ),a=n.parse(r[2],2,tZ);return i&&a?t0(i.type,[tH,tV,tU,tj,tZ])?new e0(i,a):n.error("Expected first argument to be of type boolean, string, number or null, but found "+tK(i.type)+" instead"):null},e0.prototype.evaluate=function(r){var n=this.needle.evaluate(r),i=this.haystack.evaluate(r);if(!i)return!1;if(!t1(n,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+tK(et(n))+" instead.");if(!t1(i,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+tK(et(i))+" instead.");return i.indexOf(n)>=0},e0.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},e0.prototype.outputDefined=function(){return!0},e0.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var e1=function(r,n,i){this.type=tU,this.needle=r,this.haystack=n,this.fromIndex=i};e1.parse=function(r,n){if(r.length<=2||r.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tZ),a=n.parse(r[2],2,tZ);if(!i||!a)return null;if(!t0(i.type,[tH,tV,tU,tj,tZ]))return n.error("Expected first argument to be of type boolean, string, number or null, but found "+tK(i.type)+" instead");if(4===r.length){var o=n.parse(r[3],3,tU);return o?new e1(i,a,o):null}return new e1(i,a)},e1.prototype.evaluate=function(r){var n=this.needle.evaluate(r),i=this.haystack.evaluate(r);if(!t1(n,["boolean","string","number","null"]))throw new en("Expected first argument to be of type boolean, string, number or null, but found "+tK(et(n))+" instead.");if(!t1(i,["string","array"]))throw new en("Expected second argument to be of type array or string, but found "+tK(et(i))+" instead.");if(this.fromIndex){var a=this.fromIndex.evaluate(r);return i.indexOf(n,a)}return i.indexOf(n)},e1.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},e1.prototype.outputDefined=function(){return!1},e1.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var e2=function(r,n,i,a,o,s){this.inputType=r,this.type=n,this.input=i,this.cases=a,this.outputs=o,this.otherwise=s};e2.parse=function(r,n){if(r.length<5)return n.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return n.error("Expected an even number of arguments.");n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var i,a,o={},s=[],l=2;l<r.length-1;l+=2){var u=r[l],c=r[l+1];Array.isArray(u)||(u=[u]);var f=n.concat(l);if(0===u.length)return f.error("Expected at least one branch label.");for(var h=0,p=u;h<p.length;h+=1){var d=p[h];if("number"!=typeof d&&"string"!=typeof d)return f.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return f.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return f.error("Numeric branch labels must be integer values.");if(i){if(f.checkSubtype(i,et(d)))return null}else i=et(d);if(void 0!==o[String(d)])return f.error("Branch labels must be unique.");o[String(d)]=s.length}var v=n.parse(c,l,a);if(!v)return null;a=a||v.type,s.push(v)}var g=n.parse(r[1],1,tZ);if(!g)return null;var y=n.parse(r[r.length-1],r.length-1,a);return y?"value"!==g.type.kind&&n.concat(1).checkSubtype(i,g.type)?null:new e2(i,a,g,o,s,y):null},e2.prototype.evaluate=function(r){var n=this.input.evaluate(r);return(et(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(r)},e2.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},e2.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},e2.prototype.serialize=function(){for(var r=this,n=["match",this.input.serialize()],i=[],a={},o=0,s=Object.keys(this.cases).sort();o<s.length;o+=1){var l=s[o];void 0===(h=a[this.cases[l]])?(a[this.cases[l]]=i.length,i.push([this.cases[l],[l]])):i[h][1].push(l)}for(var u=function(n){return"number"===r.inputType.kind?Number(n):n},c=0;c<i.length;c+=1){var f=i[c],h=f[0],p=f[1];1===p.length?n.push(u(p[0])):n.push(p.map(u)),n.push(this.outputs[outputIndex$1].serialize())}return n.push(this.otherwise.serialize()),n};var e3=function(r,n,i){this.type=r,this.branches=n,this.otherwise=i};e3.parse=function(r,n){if(r.length<4)return n.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return n.error("Expected an odd number of arguments.");n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var i,a=[],o=1;o<r.length-1;o+=2){var s=n.parse(r[o],o,tH);if(!s)return null;var l=n.parse(r[o+1],o+1,i);if(!l)return null;a.push([s,l]),i=i||l.type}var u=n.parse(r[r.length-1],r.length-1,i);return u?new e3(i,a,u):null},e3.prototype.evaluate=function(r){for(var n=0,i=this.branches;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];if(o.evaluate(r))return s.evaluate(r)}return this.otherwise.evaluate(r)},e3.prototype.eachChild=function(r){for(var n=0,i=this.branches;n<i.length;n+=1){var a=i[n],o=a[0],s=a[1];r(o),r(s)}r(this.otherwise)},e3.prototype.outputDefined=function(){return this.branches.every(function(r){return r[0],r[1].outputDefined()})&&this.otherwise.outputDefined()},e3.prototype.serialize=function(){var r=["case"];return this.eachChild(function(n){r.push(n.serialize())}),r};var e5=function(r,n,i,a){this.type=r,this.input=n,this.beginIndex=i,this.endIndex=a};function e4(r,n){return"=="===r||"!="===r?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function e6(r,n,i,a){return 0===a.compare(n,i)}function e8(r,n,i){var a="=="!==r&&"!="!==r;return function(){function o(r,n,i){this.type=tH,this.lhs=r,this.rhs=n,this.collator=i,this.hasUntypedArgument="value"===r.type.kind||"value"===n.type.kind}return o.parse=function(r,n){if(3!==r.length&&4!==r.length)return n.error("Expected two or three arguments.");var i=r[0],s=n.parse(r[1],1,tZ);if(!s)return null;if(!e4(i,s.type))return n.concat(1).error('"'+i+"\" comparisons are not supported for type '"+tK(s.type)+"'.");var l=n.parse(r[2],2,tZ);if(!l)return null;if(!e4(i,l.type))return n.concat(2).error('"'+i+"\" comparisons are not supported for type '"+tK(l.type)+"'.");if(s.type.kind!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return n.error("Cannot compare types '"+tK(s.type)+"' and '"+tK(l.type)+"'.");a&&("value"===s.type.kind&&"value"!==l.type.kind?s=new ea(l.type,[s]):"value"!==s.type.kind&&"value"===l.type.kind&&(l=new ea(s.type,[l])));var u=null;if(4===r.length){if("string"!==s.type.kind&&"string"!==l.type.kind&&"value"!==s.type.kind&&"value"!==l.type.kind)return n.error("Cannot use collator to compare non-string types.");if(!(u=n.parse(r[3],3,tY)))return null}return new o(s,l,u)},o.prototype.evaluate=function(o){var s=this.lhs.evaluate(o),l=this.rhs.evaluate(o);if(a&&this.hasUntypedArgument){var u=et(s),c=et(l);if(u.kind!==c.kind||"string"!==u.kind&&"number"!==u.kind)throw new en('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+u.kind+", "+c.kind+") instead.")}if(this.collator&&!a&&this.hasUntypedArgument){var f=et(s),h=et(l);if("string"!==f.kind||"string"!==h.kind)return n(o,s,l)}return this.collator?i(o,s,l,this.collator.evaluate(o)):n(o,s,l)},o.prototype.eachChild=function(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)},o.prototype.outputDefined=function(){return!0},o.prototype.serialize=function(){var n=[r];return this.eachChild(function(r){n.push(r.serialize())}),n},o}()}e5.parse=function(r,n){if(r.length<=2||r.length>=5)return n.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1,tZ),a=n.parse(r[2],2,tU);if(!i||!a)return null;if(!t0(i.type,[tJ(tZ),tV,tZ]))return n.error("Expected first argument to be of type array or string, but found "+tK(i.type)+" instead");if(4===r.length){var o=n.parse(r[3],3,tU);return o?new e5(i.type,i,a,o):null}return new e5(i.type,i,a)},e5.prototype.evaluate=function(r){var n=this.input.evaluate(r),i=this.beginIndex.evaluate(r);if(!t1(n,["string","array"]))throw new en("Expected first argument to be of type array or string, but found "+tK(et(n))+" instead.");if(this.endIndex){var a=this.endIndex.evaluate(r);return n.slice(i,a)}return n.slice(i)},e5.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},e5.prototype.outputDefined=function(){return!1},e5.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var e7=e8("==",function(r,n,i){return n===i},e6),e9=e8("!=",function(r,n,i){return n!==i},function(r,n,i,a){return!e6(0,n,i,a)}),rt=e8("<",function(r,n,i){return n<i},function(r,n,i,a){return 0>a.compare(n,i)}),re=e8(">",function(r,n,i){return n>i},function(r,n,i,a){return a.compare(n,i)>0}),rr=e8("<=",function(r,n,i){return n<=i},function(r,n,i,a){return 0>=a.compare(n,i)}),rn=e8(">=",function(r,n,i){return n>=i},function(r,n,i,a){return a.compare(n,i)>=0}),ri=function(r,n,i,a,o){this.type=tV,this.number=r,this.locale=n,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=o};ri.parse=function(r,n){if(3!==r.length)return n.error("Expected two arguments.");var i=n.parse(r[1],1,tU);if(!i)return null;var a=r[2];if("object"!=typeof a||Array.isArray(a))return n.error("NumberFormat options argument must be an object.");var o=null;if(a.locale&&!(o=n.parse(a.locale,1,tV)))return null;var s=null;if(a.currency&&!(s=n.parse(a.currency,1,tV)))return null;var l=null;if(a["min-fraction-digits"]&&!(l=n.parse(a["min-fraction-digits"],1,tU)))return null;var u=null;return!a["max-fraction-digits"]||(u=n.parse(a["max-fraction-digits"],1,tU))?new ri(i,o,s,l,u):null},ri.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},ri.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var ra=function(r){this.type=tU,this.input=r};ra.parse=function(r,n){if(2!==r.length)return n.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var i=n.parse(r[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?n.error("Expected argument of type string or array, but found "+tK(i.type)+" instead."):new ra(i):null},ra.prototype.evaluate=function(r){var n=this.input.evaluate(r);if("string"==typeof n||Array.isArray(n))return n.length;throw new en("Expected value to be of type string or array, but found "+tK(et(n))+" instead.")},ra.prototype.eachChild=function(r){r(this.input)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){var r=["length"];return this.eachChild(function(n){r.push(n.serialize())}),r};var ro={"==":e7,"!=":e9,">":re,"<":rt,">=":rn,"<=":rr,array:ea,at:eQ,boolean:ea,case:e3,coalesce:eK,collator:ep,format:eo,image:es,in:e0,"index-of":e1,interpolate:eX,"interpolate-hcl":eX,"interpolate-lab":eX,length:ra,let:e$,literal:er,match:e2,number:ea,"number-format":ri,object:ea,slice:e5,step:eO,string:ea,"to-boolean":eu,"to-color":eu,"to-number":eu,"to-string":eu,var:eE,within:ek};function rs(r,n){var i=n[0],a=n[1],o=n[2],s=n[3];i=i.evaluate(r),a=a.evaluate(r),o=o.evaluate(r);var l=s?s.evaluate(r):1,u=t7(i,a,o,l);if(u)throw new en(u);return new t3(i/255*l,a/255*l,o/255*l,l)}function rl(r,n){var i=n[r];return void 0===i?null:i}function ru(r){return{type:r}}function rc(r){return{result:"success",value:r}}function rf(r){return{result:"error",value:r}}function rh(r){return"data-driven"===r["property-type"]||"cross-faded-data-driven"===r["property-type"]}function rp(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function rd(r){return!!r.expression&&r.expression.interpolated}function rv(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function rg(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function ry(r){return r}function rm(r,n,i){return void 0!==r?r:void 0!==n?n:void 0!==i?i:void 0}function rx(r,n,i,a,o){return rm(typeof i===o?a[i]:void 0,r.default,n.default)}function rb(r,n,i){if("number"!==rv(i))return rm(r.default,n.default);var a=r.stops.length;if(1===a||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[a-1][0])return r.stops[a-1][1];var o=eC(r.stops.map(function(r){return r[0]}),i);return r.stops[o][1]}function r_(r,n,i){var a,o,s,l=void 0!==r.base?r.base:1;if("number"!==rv(i))return rm(r.default,n.default);var u=r.stops.length;if(1===u||i<=r.stops[0][0])return r.stops[0][1];if(i>=r.stops[u-1][0])return r.stops[u-1][1];var c=eC(r.stops.map(function(r){return r[0]}),i),f=(a=r.stops[c][0],o=r.stops[c+1][0]-a,s=i-a,0===o?0:1===l?s/o:(Math.pow(l,s)-1)/(Math.pow(l,o)-1)),h=r.stops[c][1],p=r.stops[c+1][1],d=eI[n.type]||ry;if(r.colorSpace&&"rgb"!==r.colorSpace){var v=eW[r.colorSpace];d=function(r,n){return v.reverse(v.interpolate(v.forward(r),v.forward(n),f))}}return"function"==typeof h.evaluate?{evaluate:function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];var i=h.evaluate.apply(void 0,r),a=p.evaluate.apply(void 0,r);if(void 0!==i&&void 0!==a)return d(i,a,f)}}:d(h,p,f)}function rw(r,n,i){return"color"===n.type?i=t3.parse(i):"formatted"===n.type?i=t6.fromString(i.toString()):"resolvedImage"===n.type?i=t8.fromString(i.toString()):rv(i)===n.type||"enum"===n.type&&n.values[i]||(i=void 0),rm(i,r.default,n.default)}eh.register(ro,{error:[{kind:"error"},[tV],function(r,n){throw new en(n[0].evaluate(r))}],typeof:[tV,[tZ],function(r,n){return tK(et(n[0].evaluate(r)))}],"to-rgba":[tJ(tU,4),[tq],function(r,n){return n[0].evaluate(r).toArray()}],rgb:[tq,[tU,tU,tU],rs],rgba:[tq,[tU,tU,tU,tU],rs],has:{type:tH,overloads:[[[tV],function(r,n){return n[0].evaluate(r) in r.properties()}],[[tV,tG],function(r,n){var i=n[0],a=n[1];return i.evaluate(r) in a.evaluate(r)}]]},get:{type:tZ,overloads:[[[tV],function(r,n){return rl(n[0].evaluate(r),r.properties())}],[[tV,tG],function(r,n){var i=n[0],a=n[1];return rl(i.evaluate(r),a.evaluate(r))}]]},"feature-state":[tZ,[tV],function(r,n){return rl(n[0].evaluate(r),r.featureState||{})}],properties:[tG,[],function(r){return r.properties()}],"geometry-type":[tV,[],function(r){return r.geometryType()}],id:[tZ,[],function(r){return r.id()}],zoom:[tU,[],function(r){return r.globals.zoom}],"heatmap-density":[tU,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[tU,[],function(r){return r.globals.lineProgress||0}],accumulated:[tZ,[],function(r){return void 0===r.globals.accumulated?null:r.globals.accumulated}],"+":[tU,ru(tU),function(r,n){for(var i=0,a=0;a<n.length;a+=1)i+=n[a].evaluate(r);return i}],"*":[tU,ru(tU),function(r,n){for(var i=1,a=0;a<n.length;a+=1)i*=n[a].evaluate(r);return i}],"-":{type:tU,overloads:[[[tU,tU],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)-a.evaluate(r)}],[[tU],function(r,n){return-n[0].evaluate(r)}]]},"/":[tU,[tU,tU],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)/a.evaluate(r)}],"%":[tU,[tU,tU],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)%a.evaluate(r)}],ln2:[tU,[],function(){return Math.LN2}],pi:[tU,[],function(){return Math.PI}],e:[tU,[],function(){return Math.E}],"^":[tU,[tU,tU],function(r,n){var i=n[0],a=n[1];return Math.pow(i.evaluate(r),a.evaluate(r))}],sqrt:[tU,[tU],function(r,n){return Math.sqrt(n[0].evaluate(r))}],log10:[tU,[tU],function(r,n){return Math.log(n[0].evaluate(r))/Math.LN10}],ln:[tU,[tU],function(r,n){return Math.log(n[0].evaluate(r))}],log2:[tU,[tU],function(r,n){return Math.log(n[0].evaluate(r))/Math.LN2}],sin:[tU,[tU],function(r,n){return Math.sin(n[0].evaluate(r))}],cos:[tU,[tU],function(r,n){return Math.cos(n[0].evaluate(r))}],tan:[tU,[tU],function(r,n){return Math.tan(n[0].evaluate(r))}],asin:[tU,[tU],function(r,n){return Math.asin(n[0].evaluate(r))}],acos:[tU,[tU],function(r,n){return Math.acos(n[0].evaluate(r))}],atan:[tU,[tU],function(r,n){return Math.atan(n[0].evaluate(r))}],min:[tU,ru(tU),function(r,n){return Math.min.apply(Math,n.map(function(n){return n.evaluate(r)}))}],max:[tU,ru(tU),function(r,n){return Math.max.apply(Math,n.map(function(n){return n.evaluate(r)}))}],abs:[tU,[tU],function(r,n){return Math.abs(n[0].evaluate(r))}],round:[tU,[tU],function(r,n){var i=n[0].evaluate(r);return i<0?-Math.round(-i):Math.round(i)}],floor:[tU,[tU],function(r,n){return Math.floor(n[0].evaluate(r))}],ceil:[tU,[tU],function(r,n){return Math.ceil(n[0].evaluate(r))}],"filter-==":[tH,[tV,tZ],function(r,n){var i=n[0],a=n[1];return r.properties()[i.value]===a.value}],"filter-id-==":[tH,[tZ],function(r,n){var i=n[0];return r.id()===i.value}],"filter-type-==":[tH,[tV],function(r,n){var i=n[0];return r.geometryType()===i.value}],"filter-<":[tH,[tV,tZ],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o<s}],"filter-id-<":[tH,[tZ],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a<o}],"filter->":[tH,[tV,tZ],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o>s}],"filter-id->":[tH,[tZ],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a>o}],"filter-<=":[tH,[tV,tZ],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o<=s}],"filter-id-<=":[tH,[tZ],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a<=o}],"filter->=":[tH,[tV,tZ],function(r,n){var i=n[0],a=n[1],o=r.properties()[i.value],s=a.value;return typeof o==typeof s&&o>=s}],"filter-id->=":[tH,[tZ],function(r,n){var i=n[0],a=r.id(),o=i.value;return typeof a==typeof o&&a>=o}],"filter-has":[tH,[tZ],function(r,n){return n[0].value in r.properties()}],"filter-has-id":[tH,[],function(r){return null!==r.id()&&void 0!==r.id()}],"filter-type-in":[tH,[tJ(tV)],function(r,n){return n[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[tH,[tJ(tZ)],function(r,n){return n[0].value.indexOf(r.id())>=0}],"filter-in-small":[tH,[tV,tJ(tZ)],function(r,n){var i=n[0];return n[1].value.indexOf(r.properties()[i.value])>=0}],"filter-in-large":[tH,[tV,tJ(tZ)],function(r,n){var i=n[0],a=n[1];return function(r,n,i,a){for(;i<=a;){var o=i+a>>1;if(n[o]===r)return!0;n[o]>r?a=o-1:i=o+1}return!1}(r.properties()[i.value],a.value,0,a.value.length-1)}],all:{type:tH,overloads:[[[tH,tH],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)&&a.evaluate(r)}],[ru(tH),function(r,n){for(var i=0;i<n.length;i+=1)if(!n[i].evaluate(r))return!1;return!0}]]},any:{type:tH,overloads:[[[tH,tH],function(r,n){var i=n[0],a=n[1];return i.evaluate(r)||a.evaluate(r)}],[ru(tH),function(r,n){for(var i=0;i<n.length;i+=1)if(n[i].evaluate(r))return!0;return!1}]]},"!":[tH,[tH],function(r,n){return!n[0].evaluate(r)}],"is-supported-script":[tH,[tV],function(r,n){var i=n[0],a=r.globals&&r.globals.isSupportedScript;return!a||a(i.evaluate(r))}],upcase:[tV,[tV],function(r,n){return n[0].evaluate(r).toUpperCase()}],downcase:[tV,[tV],function(r,n){return n[0].evaluate(r).toLowerCase()}],concat:[tV,ru(tZ),function(r,n){return n.map(function(n){return ee(n.evaluate(r))}).join("")}],"resolved-locale":[tV,[tY],function(r,n){return n[0].evaluate(r).resolvedLocale()}]});var rT=function(r,n){this.expression=r,this._warningHistory={},this._evaluator=new ef,this._defaultValue=n?"color"===n.type&&rg(n.default)?new t3(0,0,0,0):"color"===n.type?t3.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=n&&"enum"===n.type?n.values:null};function rk(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in ro}function rA(r,n){var i,a=new eL(ro,[],n?(i={color:tq,string:tV,number:tU,enum:tV,boolean:tH,formatted:tW,resolvedImage:tX},"array"===n.type?tJ(i[n.value]||tZ,n.length):i[n.type]):void 0),o=a.parse(r,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return o?rc(new rT(o,n)):rf(a.errors)}rT.prototype.evaluateWithoutErrorHandling=function(r,n,i,a,o,s){return this._evaluator.globals=r,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)},rT.prototype.evaluate=function(r,n,i,a,o,s){this._evaluator.globals=r,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new en("Expected value to be one of "+Object.keys(this._enumValues).map(function(r){return JSON.stringify(r)}).join(", ")+", but found "+JSON.stringify(l)+" instead.");return l}catch(r){return this._warningHistory[r.message]||(this._warningHistory[r.message]=!0,"undefined"!=typeof console&&console.warn(r.message)),this._defaultValue}};var rM=function(r,n){this.kind=r,this._styleExpression=n,this.isStateDependent="constant"!==r&&!eM(n.expression)};rM.prototype.evaluateWithoutErrorHandling=function(r,n,i,a,o,s){return this._styleExpression.evaluateWithoutErrorHandling(r,n,i,a,o,s)},rM.prototype.evaluate=function(r,n,i,a,o,s){return this._styleExpression.evaluate(r,n,i,a,o,s)};var rS=function(r,n,i,a){this.kind=r,this.zoomStops=i,this._styleExpression=n,this.isStateDependent="camera"!==r&&!eM(n.expression),this.interpolationType=a};function rE(r,n){if("error"===(r=rA(r,n)).result)return r;var i=r.value.expression,a=eA(i);if(!a&&!rh(n))return rf([new tB("","data expressions not supported")]);var o=eS(i,["zoom"]);if(!o&&!rp(n))return rf([new tB("","zoom expressions not supported")]);var s=function r(n){var i=null;if(n instanceof e$)i=r(n.result);else if(n instanceof eK)for(var a=0,o=n.args;a<o.length&&!(i=r(o[a]));a+=1);else(n instanceof eO||n instanceof eX)&&n.input instanceof eh&&"zoom"===n.input.name&&(i=n);return i instanceof tB||n.eachChild(function(n){var a=r(n);a instanceof tB?i=a:!i&&a?i=new tB("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&a&&i!==a&&(i=new tB("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);if(!s&&!o)return rf([new tB("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof tB)return rf([s]);if(s instanceof eX&&!rd(n))return rf([new tB("",'"interpolate" expressions cannot be used with this property')]);if(!s)return rc(new rM(a?"constant":"source",r.value));var l=s instanceof eX?s.interpolation:void 0;return rc(new rS(a?"camera":"composite",r.value,s.labels,l))}rS.prototype.evaluateWithoutErrorHandling=function(r,n,i,a,o,s){return this._styleExpression.evaluateWithoutErrorHandling(r,n,i,a,o,s)},rS.prototype.evaluate=function(r,n,i,a,o,s){return this._styleExpression.evaluate(r,n,i,a,o,s)},rS.prototype.interpolationFactor=function(r,n,i){return this.interpolationType?eX.interpolationFactor(this.interpolationType,r,n,i):0};var rL=function(r,n){this._parameters=r,this._specification=n,tz(this,function r(n,i){var a,o,s,l="color"===i.type,u=n.stops&&"object"==typeof n.stops[0][0],c=u||void 0!==n.property,f=n.type||(rd(i)?"exponential":"interval");if(l&&((n=tz({},n)).stops&&(n.stops=n.stops.map(function(r){return[r[0],t3.parse(r[1])]})),n.default?n.default=t3.parse(n.default):n.default=t3.parse(i.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!eW[n.colorSpace])throw Error("Unknown color space: "+n.colorSpace);if("exponential"===f)a=r_;else if("interval"===f)a=rb;else if("categorical"===f){a=rx,o=Object.create(null);for(var h=0,p=n.stops;h<p.length;h+=1){var d=p[h];o[d[0]]=d[1]}s=typeof n.stops[0][0]}else{if("identity"!==f)throw Error('Unknown function type "'+f+'"');a=rw}if(u){for(var v={},g=[],y=0;y<n.stops.length;y++){var m=n.stops[y],x=m[0].zoom;void 0===v[x]&&(v[x]={zoom:x,type:n.type,property:n.property,default:n.default,stops:[]},g.push(x)),v[x].stops.push([m[0].value,m[1]])}for(var b=[],_=0;_<g.length;_+=1){var w=g[_];b.push([v[w].zoom,r(v[w],i)])}var T={name:"linear"};return{kind:"composite",interpolationType:T,interpolationFactor:eX.interpolationFactor.bind(void 0,T),zoomStops:b.map(function(r){return r[0]}),evaluate:function(r,a){var o=r.zoom;return r_({stops:b,base:n.base},i,o).evaluate(o,a)}}}if(u||!c){var k="exponential"===f?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:eX.interpolationFactor.bind(void 0,k),zoomStops:n.stops.map(function(r){return r[0]}),evaluate:function(r){var l=r.zoom;return a(n,i,l,o,s)}}}return{kind:"source",evaluate:function(r,l){var u=l&&l.properties?l.properties[n.property]:void 0;return void 0===u?rm(n.default,i.default):a(n,i,u,o,s)}}}(this._parameters,this._specification))};function rC(r){var n=r.key,i=r.value,a=r.valueSpec||{},o=r.objectElementValidators||{},s=r.style,l=r.styleSpec,u=[],c=rv(i);if("object"!==c)return[new tI(n,i,"object expected, "+c+" found")];for(var f in i){var h=f.split(".")[0],p=a[h]||a["*"],d=void 0;if(o[h])d=o[h];else if(a[h])d=r0;else if(o["*"])d=o["*"];else{if(!a["*"]){u.push(new tI(n,i[f],'unknown property "'+f+'"'));continue}d=r0}u=u.concat(d({key:(n?n+".":n)+f,value:i[f],valueSpec:p,style:s,styleSpec:l,object:i,objectKey:f},i))}for(var v in a)o[v]||a[v].required&&void 0===a[v].default&&void 0===i[v]&&u.push(new tI(n,i,'missing required property "'+v+'"'));return u}function rO(r){var n=r.value,i=r.valueSpec,a=r.style,o=r.styleSpec,s=r.key,l=r.arrayElementValidator||r0;if("array"!==rv(n))return[new tI(s,n,"array expected, "+rv(n)+" found")];if(i.length&&n.length!==i.length)return[new tI(s,n,"array length "+i.length+" expected, length "+n.length+" found")];if(i["min-length"]&&n.length<i["min-length"])return[new tI(s,n,"array length at least "+i["min-length"]+" expected, length "+n.length+" found")];var u={type:i.value,values:i.values};o.$version<7&&(u.function=i.function),"object"===rv(i.value)&&(u=i.value);for(var c=[],f=0;f<n.length;f++)c=c.concat(l({array:n,arrayIndex:f,value:n[f],valueSpec:u,style:a,styleSpec:o,key:s+"["+f+"]"}));return c}function rP(r){var n=r.key,i=r.value,a=r.valueSpec,o=rv(i);return"number"===o&&i!=i&&(o="NaN"),"number"!==o?[new tI(n,i,"number expected, "+o+" found")]:"minimum"in a&&i<a.minimum?[new tI(n,i,i+" is less than the minimum value "+a.minimum)]:"maximum"in a&&i>a.maximum?[new tI(n,i,i+" is greater than the maximum value "+a.maximum)]:[]}function rI(r){var n,i,a,o=r.valueSpec,s=tR(r.value.type),l={},u="categorical"!==s&&void 0===r.value.property,c="array"===rv(r.value.stops)&&"array"===rv(r.value.stops[0])&&"object"===rv(r.value.stops[0][0]),f=rC({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(r){if("identity"===s)return[new tI(r.key,r.value,'identity function may not have a "stops" property')];var n=[],i=r.value;return n=n.concat(rO({key:r.key,value:i,valueSpec:r.valueSpec,style:r.style,styleSpec:r.styleSpec,arrayElementValidator:h})),"array"===rv(i)&&0===i.length&&n.push(new tI(r.key,i,"array must have at least one stop")),n},default:function(r){return r0({key:r.key,value:r.value,valueSpec:o,style:r.style,styleSpec:r.styleSpec})}}});return"identity"===s&&u&&f.push(new tI(r.key,r.value,'missing required property "property"')),"identity"===s||r.value.stops||f.push(new tI(r.key,r.value,'missing required property "stops"')),"exponential"===s&&r.valueSpec.expression&&!rd(r.valueSpec)&&f.push(new tI(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(u||rh(r.valueSpec)?u&&!rp(r.valueSpec)&&f.push(new tI(r.key,r.value,"zoom functions not supported")):f.push(new tI(r.key,r.value,"property functions not supported"))),("categorical"===s||c)&&void 0===r.value.property&&f.push(new tI(r.key,r.value,'"property" property is required')),f;function h(r){var n=[],s=r.value,u=r.key;if("array"!==rv(s))return[new tI(u,s,"array expected, "+rv(s)+" found")];if(2!==s.length)return[new tI(u,s,"array length 2 expected, length "+s.length+" found")];if(c){if("object"!==rv(s[0]))return[new tI(u,s,"object expected, "+rv(s[0])+" found")];if(void 0===s[0].zoom)return[new tI(u,s,"object stop key must have zoom")];if(void 0===s[0].value)return[new tI(u,s,"object stop key must have value")];if(a&&a>tR(s[0].zoom))return[new tI(u,s[0].zoom,"stop zoom values must appear in ascending order")];tR(s[0].zoom)!==a&&(a=tR(s[0].zoom),i=void 0,l={}),n=n.concat(rC({key:u+"[0]",value:s[0],valueSpec:{zoom:{}},style:r.style,styleSpec:r.styleSpec,objectElementValidators:{zoom:rP,value:p}}))}else n=n.concat(p({key:u+"[0]",value:s[0],valueSpec:{},style:r.style,styleSpec:r.styleSpec},s));return rk(tF(s[1]))?n.concat([new tI(u+"[1]",s[1],"expressions are not allowed in function stops.")]):n.concat(r0({key:u+"[1]",value:s[1],valueSpec:o,style:r.style,styleSpec:r.styleSpec}))}function p(r,a){var u=rv(r.value),c=tR(r.value),f=null!==r.value?r.value:a;if(n){if(u!==n)return[new tI(r.key,f,u+" stop domain type must match previous stop domain type "+n)]}else n=u;if("number"!==u&&"string"!==u&&"boolean"!==u)return[new tI(r.key,f,"stop domain value must be a number, string, or boolean")];if("number"!==u&&"categorical"!==s){var h="number expected, "+u+" found";return rh(o)&&void 0===s&&(h+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tI(r.key,f,h)]}return"categorical"!==s||"number"!==u||isFinite(c)&&Math.floor(c)===c?"categorical"!==s&&"number"===u&&void 0!==i&&c<i?[new tI(r.key,f,"stop domain values must appear in ascending order")]:(i=c,"categorical"===s&&c in l?[new tI(r.key,f,"stop domain values must be unique")]:(l[c]=!0,[])):[new tI(r.key,f,"integer expected, found "+c)]}}function rD(r){var n=("property"===r.expressionContext?rE:rA)(tF(r.value),r.valueSpec);if("error"===n.result)return n.value.map(function(n){return new tI(""+r.key+n.key,r.value,n.message)});var i=n.value.expression||n.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!i.outputDefined())return[new tI(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===r.expressionContext&&"layout"===r.propertyType&&!eM(i))return[new tI(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext&&!eM(i))return[new tI(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!eS(i,["zoom","feature-state"]))return[new tI(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!eA(i))return[new tI(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rz(r){var n=r.key,i=r.value,a=r.valueSpec,o=[];return Array.isArray(a.values)?-1===a.values.indexOf(tR(i))&&o.push(new tI(n,i,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(a.values).indexOf(tR(i))&&o.push(new tI(n,i,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(i)+" found")),o}function rR(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var n=0,i=r.slice(1);n<i.length;n+=1){var a=i[n];if(!rR(a)&&"boolean"!=typeof a)return!1}return!0;default:return!0}}rL.deserialize=function(r){return new rL(r._parameters,r._specification)},rL.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var rF={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rB(r){if(null==r)return{filter:function(){return!0},needGeometry:!1};rR(r)||(r=function r(n){if(!n)return!0;var i=n[0];return n.length<=1?"any"!==i:"=="===i?rj(n[1],n[2],"=="):"!="===i?rH(rj(n[1],n[2],"==")):"<"===i||">"===i||"<="===i||">="===i?rj(n[1],n[2],i):"any"===i?["any"].concat(n.slice(1).map(r)):"all"===i?["all"].concat(n.slice(1).map(r)):"none"===i?["all"].concat(n.slice(1).map(r).map(rH)):"in"===i?rU(n[1],n.slice(2)):"!in"===i?rH(rU(n[1],n.slice(2))):"has"===i?rV(n[1]):"!has"===i?rH(rV(n[1])):"within"!==i||n}(r));var n=rA(r,rF);if("error"===n.result)throw Error(n.value.map(function(r){return r.key+": "+r.message}).join(", "));return{filter:function(r,i,a){return n.value.evaluate(r,i,{},a)},needGeometry:function r(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(var i=1;i<n.length;i++)if(r(n[i]))return!0;return!1}(r)}}function rN(r,n){return r<n?-1:r>n?1:0}function rj(r,n,i){switch(r){case"$type":return["filter-type-"+i,n];case"$id":return["filter-id-"+i,n];default:return["filter-"+i,r,n]}}function rU(r,n){if(0===n.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(function(r){return typeof r!=typeof n[0]})?["filter-in-large",r,["literal",n.sort(rN)]]:["filter-in-small",r,["literal",n]]}}function rV(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function rH(r){return["!",r]}function rq(r){return rR(tF(r.value))?rD(tz({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(n){var i=n.value,a=n.key;if("array"!==rv(i))return[new tI(a,i,"array expected, "+rv(i)+" found")];var o,s=n.styleSpec,l=[];if(i.length<1)return[new tI(a,i,"filter array must have at least 1 element")];switch(l=l.concat(rz({key:a+"[0]",value:i[0],valueSpec:s.filter_operator,style:n.style,styleSpec:n.styleSpec})),tR(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===tR(i[1])&&l.push(new tI(a,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&l.push(new tI(a,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(o=rv(i[1]))&&l.push(new tI(a+"[1]",i[1],"string expected, "+o+" found"));for(var u=2;u<i.length;u++)o=rv(i[u]),"$type"===tR(i[1])?l=l.concat(rz({key:a+"["+u+"]",value:i[u],valueSpec:s.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&l.push(new tI(a+"["+u+"]",i[u],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var c=1;c<i.length;c++)l=l.concat(r({key:a+"["+c+"]",value:i[c],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":o=rv(i[1]),2!==i.length?l.push(new tI(a,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==o&&l.push(new tI(a+"[1]",i[1],"string expected, "+o+" found"));break;case"within":o=rv(i[1]),2!==i.length?l.push(new tI(a,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==o&&l.push(new tI(a+"[1]",i[1],"object expected, "+o+" found"))}return l}(r)}function rG(r,n){var i=r.key,a=r.style,o=r.styleSpec,s=r.value,l=r.objectKey,u=o[n+"_"+r.layerType];if(!u)return[];var c=l.match(/^(.*)-transition$/);if("paint"===n&&c&&u[c[1]]&&u[c[1]].transition)return r0({key:i,value:s,valueSpec:o.transition,style:a,styleSpec:o});var f,h=r.valueSpec||u[l];if(!h)return[new tI(i,s,'unknown property "'+l+'"')];if("string"===rv(s)&&rh(h)&&!h.tokens&&(f=/^{([^}]+)}$/.exec(s)))return[new tI(i,s,'"'+l+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(f[1])+" }`.")];var p=[];return"symbol"===r.layerType&&("text-field"===l&&a&&!a.glyphs&&p.push(new tI(i,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&rg(tF(s))&&"identity"===tR(s.type)&&p.push(new tI(i,s,'"text-font" does not support identity functions'))),p.concat(r0({key:r.key,value:s,valueSpec:h,style:a,styleSpec:o,expressionContext:"property",propertyType:n,propertyKey:l}))}function rZ(r){return rG(r,"paint")}function rY(r){return rG(r,"layout")}function rW(r){var n=[],i=r.value,a=r.key,o=r.style,s=r.styleSpec;i.type||i.ref||n.push(new tI(a,i,'either "type" or "ref" is required'));var l,u=tR(i.type),c=tR(i.ref);if(i.id)for(var f=tR(i.id),h=0;h<r.arrayIndex;h++){var p=o.layers[h];tR(p.id)===f&&n.push(new tI(a,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(r){r in i&&n.push(new tI(a,i[r],'"'+r+'" is prohibited for ref layers'))}),o.layers.forEach(function(r){tR(r.id)===c&&(l=r)}),l?l.ref?n.push(new tI(a,i.ref,"ref cannot reference another ref layer")):u=tR(l.type):n.push(new tI(a,i.ref,'ref layer "'+c+'" not found'));else if("background"!==u){if(i.source){var d=o.sources&&o.sources[i.source],v=d&&tR(d.type);d?"vector"===v&&"raster"===u?n.push(new tI(a,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===v&&"raster"!==u?n.push(new tI(a,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==v||i["source-layer"]?"raster-dem"===v&&"hillshade"!==u?n.push(new tI(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===u&&i.paint&&i.paint["line-gradient"]&&("geojson"!==v||!d.lineMetrics)&&n.push(new tI(a,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):n.push(new tI(a,i,'layer "'+i.id+'" must specify a "source-layer"')):n.push(new tI(a,i.source,'source "'+i.source+'" not found'))}else n.push(new tI(a,i,'missing required property "source"'))}return n=n.concat(rC({key:a,value:i,valueSpec:s.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return r0({key:a+".type",value:i.type,valueSpec:s.layer.type,style:r.style,styleSpec:r.styleSpec,object:i,objectKey:"type"})},filter:rq,layout:function(r){return rC({layer:i,key:r.key,value:r.value,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(r){return rY(tz({layerType:u},r))}}})},paint:function(r){return rC({layer:i,key:r.key,value:r.value,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(r){return rZ(tz({layerType:u},r))}}})}}}))}function rX(r){var n=r.value,i=r.key,a=rv(n);return"string"!==a?[new tI(i,n,"string expected, "+a+" found")]:[]}var rJ={promoteId:function(r){var n=r.key,i=r.value;if("string"===rv(i))return rX({key:n,value:i});var a=[];for(var o in i)a.push.apply(a,rX({key:n+"."+o,value:i[o]}));return a}};function rK(r){var n=r.value,i=r.key,a=r.styleSpec,o=r.style;if(!n.type)return[new tI(i,n,'"type" is required')];var s,l=tR(n.type);switch(l){case"vector":case"raster":case"raster-dem":return rC({key:i,value:n,valueSpec:a["source_"+l.replace("-","_")],style:r.style,styleSpec:a,objectElementValidators:rJ});case"geojson":if(s=rC({key:i,value:n,valueSpec:a.source_geojson,style:o,styleSpec:a,objectElementValidators:rJ}),n.cluster)for(var u in n.clusterProperties){var c=n.clusterProperties[u],f=c[0],h=c[1],p="string"==typeof f?[f,["accumulated"],["get",u]]:f;s.push.apply(s,rD({key:i+"."+u+".map",value:h,expressionContext:"cluster-map"})),s.push.apply(s,rD({key:i+"."+u+".reduce",value:p,expressionContext:"cluster-reduce"}))}return s;case"video":return rC({key:i,value:n,valueSpec:a.source_video,style:o,styleSpec:a});case"image":return rC({key:i,value:n,valueSpec:a.source_image,style:o,styleSpec:a});case"canvas":return[new tI(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rz({key:i+".type",value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:o,styleSpec:a})}}function r$(r){var n=r.value,i=r.styleSpec,a=i.light,o=r.style,s=[],l=rv(n);if(void 0===n)return s;if("object"!==l)return s.concat([new tI("light",n,"object expected, "+l+" found")]);for(var u in n){var c=u.match(/^(.*)-transition$/);s=c&&a[c[1]]&&a[c[1]].transition?s.concat(r0({key:u,value:n[u],valueSpec:i.transition,style:o,styleSpec:i})):a[u]?s.concat(r0({key:u,value:n[u],valueSpec:a[u],style:o,styleSpec:i})):s.concat([new tI(u,n[u],'unknown property "'+u+'"')])}return s}var rQ={"*":function(){return[]},array:rO,boolean:function(r){var n=r.value,i=r.key,a=rv(n);return"boolean"!==a?[new tI(i,n,"boolean expected, "+a+" found")]:[]},number:rP,color:function(r){var n=r.key,i=r.value,a=rv(i);return"string"!==a?[new tI(n,i,"color expected, "+a+" found")]:null===t2(i)?[new tI(n,i,'color expected, "'+i+'" found')]:[]},constants:tD,enum:rz,filter:rq,function:rI,layer:rW,object:rC,source:rK,light:r$,string:rX,formatted:function(r){return 0===rX(r).length?[]:rD(r)},resolvedImage:function(r){return 0===rX(r).length?[]:rD(r)}};function r0(r){var n=r.value,i=r.valueSpec,a=r.styleSpec;return i.expression&&rg(tR(n))?rI(r):i.expression&&rk(tF(n))?rD(r):i.type&&rQ[i.type]?rQ[i.type](r):rC(tz({},r,{valueSpec:i.type?a[i.type]:i}))}function r1(r){var n=r.value,i=r.key,a=rX(r);return a.length||(-1===n.indexOf("{fontstack}")&&a.push(new tI(i,n,'"glyphs" url must include a "{fontstack}" token')),-1===n.indexOf("{range}")&&a.push(new tI(i,n,'"glyphs" url must include a "{range}" token'))),a}function r2(r,n){void 0===n&&(n=tP);var i=[];return i=i.concat(r0({key:"",value:r,valueSpec:n.$root,styleSpec:n,style:r,objectElementValidators:{glyphs:r1,"*":function(){return[]}}})),r.constants&&(i=i.concat(tD({key:"constants",value:r.constants,style:r,styleSpec:n}))),r3(i)}function r3(r){return[].concat(r).sort(function(r,n){return r.line-n.line})}function r5(r){return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return r3(r.apply(this,n))}}r2.source=r5(rK),r2.light=r5(r$),r2.layer=r5(rW),r2.filter=r5(rq),r2.paintProperty=r5(rZ),r2.layoutProperty=r5(rY);var r4=r2.light,r6=r2.paintProperty,r8=r2.layoutProperty;function r7(r,n){var i=!1;if(n&&n.length)for(var a=0;a<n.length;a+=1){var o=n[a];r.fire(new tC(Error(o.message))),i=!0}return i}function r9(r,n,i){var a=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var o=new Int32Array(this.arrayBuffer);r=o[0],n=o[1],i=o[2],this.d=n+2*i;for(var s=0;s<this.d*this.d;s++){var l=o[3+s],u=o[3+s+1];a.push(l===u?null:o.subarray(l,u))}var c=o[3+a.length],f=o[3+a.length+1];this.keys=o.subarray(c,f),this.bboxes=o.subarray(f),this.insert=this._insertReadonly}else{this.d=n+2*i;for(var h=0;h<this.d*this.d;h++)a.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=r,this.padding=i,this.scale=n/r,this.uid=0;var p=i/n*r;this.min=-p,this.max=r+p}r9.prototype.insert=function(r,n,i,a,o){this._forEachCell(n,i,a,o,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o)},r9.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r9.prototype._insertCell=function(r,n,i,a,o,s){this.cells[o].push(s)},r9.prototype.query=function(r,n,i,a,o){var s=this.min,l=this.max;if(r<=s&&n<=s&&l<=i&&l<=a&&!o)return Array.prototype.slice.call(this.keys);var u=[];return this._forEachCell(r,n,i,a,this._queryCell,u,{},o),u},r9.prototype._queryCell=function(r,n,i,a,o,s,l,u){var c=this.cells[o];if(null!==c)for(var f=this.keys,h=this.bboxes,p=0;p<c.length;p++){var d=c[p];if(void 0===l[d]){var v=4*d;(u?u(h[v+0],h[v+1],h[v+2],h[v+3]):r<=h[v+2]&&n<=h[v+3]&&i>=h[v+0]&&a>=h[v+1])?(l[d]=!0,s.push(f[d])):l[d]=!1}}},r9.prototype._forEachCell=function(r,n,i,a,o,s,l,u){for(var c=this._convertToCellCoord(r),f=this._convertToCellCoord(n),h=this._convertToCellCoord(i),p=this._convertToCellCoord(a),d=c;d<=h;d++)for(var v=f;v<=p;v++){var g=this.d*v+d;if((!u||u(this._convertFromCellCoord(d),this._convertFromCellCoord(v),this._convertFromCellCoord(d+1),this._convertFromCellCoord(v+1)))&&o.call(this,r,n,i,a,g,s,l,u))return}},r9.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},r9.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},r9.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,n=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var o=new Int32Array(n+i+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var s=n,l=0;l<r.length;l++){var u=r[l];o[3+l]=s,o.set(u,s),s+=u.length}return o[3+r.length]=s,o.set(this.keys,s),s+=this.keys.length,o[3+r.length+1]=s,o.set(this.bboxes,s),s+=this.bboxes.length,o.buffer};var nt=c.ImageData,ne=c.ImageBitmap,nr={};function nn(r,n,i){void 0===i&&(i={}),Object.defineProperty(n,"_classRegistryKey",{value:r,writeable:!1}),nr[r]={klass:n,omit:i.omit||[],shallow:i.shallow||[]}}for(var ni in nn("Object",Object),r9.serialize=function(r,n){var i=r.toArrayBuffer();return n&&n.push(i),{buffer:i}},r9.deserialize=function(r){return new r9(r.buffer)},nn("Grid",r9),nn("Color",t3),nn("Error",Error),nn("ResolvedImage",t8),nn("StylePropertyFunction",rL),nn("StyleExpression",rT,{omit:["_evaluator"]}),nn("ZoomDependentExpression",rS),nn("ZoomConstantExpression",rM),nn("CompoundExpression",eh,{omit:["_evaluate"]}),ro)ro[ni]._classRegistryKey||nn("Expression_"+ni,ro[ni]);function na(r){return r&&"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function no(r){return ne&&r instanceof ne}function ns(r,n){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(na(r)||no(r))return n&&n.push(r),r;if(ArrayBuffer.isView(r))return n&&n.push(r.buffer),r;if(r instanceof nt)return n&&n.push(r.data.buffer),r;if(Array.isArray(r)){for(var i=[],a=0;a<r.length;a+=1){var o=r[a];i.push(ns(o,n))}return i}if("object"==typeof r){var s=r.constructor,l=s._classRegistryKey;if(!l)throw Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(r,n):{};if(!s.serialize){for(var c in r)if(r.hasOwnProperty(c)&&!(nr[l].omit.indexOf(c)>=0)){var f=r[c];u[c]=nr[l].shallow.indexOf(c)>=0?f:ns(f,n)}r instanceof Error&&(u.message=r.message)}if(u.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw Error("can't serialize object of type "+typeof r)}function nl(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||na(r)||no(r)||ArrayBuffer.isView(r)||r instanceof nt)return r;if(Array.isArray(r))return r.map(nl);if("object"==typeof r){var n=r.$name||"Object",i=nr[n].klass;if(!i)throw Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r);for(var a=Object.create(i.prototype),o=0,s=Object.keys(r);o<s.length;o+=1){var l=s[o];if("$name"!==l){var u=r[l];a[l]=nr[n].shallow.indexOf(l)>=0?u:nl(u)}}return a}throw Error("can't deserialize object of type "+typeof r)}var nu=function(){this.first=!0};nu.prototype.update=function(r,n){var i=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=n),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=i,!0))};var nc={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function nf(r){for(var n=0;n<r.length;n+=1)if(nh(r[n].charCodeAt(0)))return!0;return!1}function nh(r){return!(746!==r&&747!==r&&(r<4352||!(nc["Bopomofo Extended"](r)||nc.Bopomofo(r)||nc["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||nc["CJK Compatibility Ideographs"](r)||nc["CJK Compatibility"](r)||nc["CJK Radicals Supplement"](r)||nc["CJK Strokes"](r)||!(!nc["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||12336===r)||nc["CJK Unified Ideographs Extension A"](r)||nc["CJK Unified Ideographs"](r)||nc["Enclosed CJK Letters and Months"](r)||nc["Hangul Compatibility Jamo"](r)||nc["Hangul Jamo Extended-A"](r)||nc["Hangul Jamo Extended-B"](r)||nc["Hangul Jamo"](r)||nc["Hangul Syllables"](r)||nc.Hiragana(r)||nc["Ideographic Description Characters"](r)||nc.Kanbun(r)||nc["Kangxi Radicals"](r)||nc["Katakana Phonetic Extensions"](r)||nc.Katakana(r)&&12540!==r||!(!nc["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||r>=65306&&r<=65310||65339===r||65341===r||65343===r||r>=65371&&r<=65503||65507===r||r>=65512&&r<=65519)||!(!nc["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||nc["Unified Canadian Aboriginal Syllabics"](r)||nc["Unified Canadian Aboriginal Syllabics Extended"](r)||nc["Vertical Forms"](r)||nc["Yijing Hexagram Symbols"](r)||nc["Yi Syllables"](r)||nc["Yi Radicals"](r))))}function np(r){return!(nh(r)||nc["Latin-1 Supplement"](r)&&(167===r||169===r||174===r||177===r||188===r||189===r||190===r||215===r||247===r)||nc["General Punctuation"](r)&&(8214===r||8224===r||8225===r||8240===r||8241===r||8251===r||8252===r||8258===r||8263===r||8264===r||8265===r||8273===r)||nc["Letterlike Symbols"](r)||nc["Number Forms"](r)||nc["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||9003===r||r>=9085&&r<=9114||r>=9150&&r<=9165||9167===r||r>=9169&&r<=9179||r>=9186&&r<=9215)||nc["Control Pictures"](r)&&9251!==r||nc["Optical Character Recognition"](r)||nc["Enclosed Alphanumerics"](r)||nc["Geometric Shapes"](r)||nc["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||nc["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||nc["CJK Symbols and Punctuation"](r)||nc.Katakana(r)||nc["Private Use Area"](r)||nc["CJK Compatibility Forms"](r)||nc["Small Form Variants"](r)||nc["Halfwidth and Fullwidth Forms"](r)||8734===r||8756===r||8757===r||r>=9984&&r<=10087||r>=10102&&r<=10131||65532===r||65533===r)}function nd(r){return r>=1424&&r<=2303||nc["Arabic Presentation Forms-A"](r)||nc["Arabic Presentation Forms-B"](r)}var nv="deferred",ng="loading",ny="loaded",nm=null,nx="unavailable",nb=null,n_=function(r){r&&"string"==typeof r&&r.indexOf("NetworkError")>-1&&(nx="error"),nm&&nm(r)};function nw(){nT.fire(new tL("pluginStateChange",{pluginStatus:nx,pluginURL:nb}))}var nT=new tO,nk=function(){return nx},nA=function(){if(nx!==nv||!nb)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");nx=ng,nw(),nb&&tT({url:nb},function(r){r?n_(r):(nx=ny,nw())})},nM={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return nx===ny||null!=nM.applyArabicShaping},isLoading:function(){return nx===ng},setState:function(r){nx=r.pluginStatus,nb=r.pluginURL},isParsed:function(){return null!=nM.applyArabicShaping&&null!=nM.processBidirectionalText&&null!=nM.processStyledBidirectionalText},getPluginURL:function(){return nb}},nS=function(r,n){this.zoom=r,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new nu,this.transition={})};nS.prototype.isSupportedScript=function(r){return function(r,n){for(var i,a=0;a<r.length;a+=1)if(i=r[a].charCodeAt(0),!n&&nd(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||nc.Khmer(i))return!1;return!0}(r,nM.isLoaded())},nS.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},nS.prototype.getCrossfadeParameters=function(){var r=this.zoom,n=r-Math.floor(r),i=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*n}};var nE=function(r,n){this.property=r,this.value=n,this.expression=function(r,n){if(rg(r))return new rL(r,n);if(rk(r)){var i=rE(r,n);if("error"===i.result)throw Error(i.value.map(function(r){return r.key+": "+r.message}).join(", "));return i.value}var a=r;return"string"==typeof r&&"color"===n.type&&(a=t3.parse(r)),{kind:"constant",evaluate:function(){return a}}}(void 0===n?r.specification.default:n,r.specification)};nE.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},nE.prototype.possiblyEvaluate=function(r,n,i){return this.property.possiblyEvaluate(this,r,n,i)};var nL=function(r){this.property=r,this.value=new nE(r,void 0)};nL.prototype.transitioned=function(r,n){return new nO(this.property,this.value,n,v({},r.transition,this.transition),r.now)},nL.prototype.untransitioned=function(){return new nO(this.property,this.value,null,{},0)};var nC=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};nC.prototype.getValue=function(r){return k(this._values[r].value.value)},nC.prototype.setValue=function(r,n){this._values.hasOwnProperty(r)||(this._values[r]=new nL(this._values[r].property)),this._values[r].value=new nE(this._values[r].property,null===n?void 0:k(n))},nC.prototype.getTransition=function(r){return k(this._values[r].transition)},nC.prototype.setTransition=function(r,n){this._values.hasOwnProperty(r)||(this._values[r]=new nL(this._values[r].property)),this._values[r].transition=k(n)||void 0},nC.prototype.serialize=function(){for(var r={},n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n],o=this.getValue(a);void 0!==o&&(r[a]=o);var s=this.getTransition(a);void 0!==s&&(r[a+"-transition"]=s)}return r},nC.prototype.transitioned=function(r,n){for(var i=new nP(this._properties),a=0,o=Object.keys(this._values);a<o.length;a+=1){var s=o[a];i._values[s]=this._values[s].transitioned(r,n._values[s])}return i},nC.prototype.untransitioned=function(){for(var r=new nP(this._properties),n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n];r._values[a]=this._values[a].untransitioned()}return r};var nO=function(r,n,i,a,o){this.property=r,this.value=n,this.begin=o+a.delay||0,this.end=this.begin+a.duration||0,r.specification.transition&&(a.delay||a.duration)&&(this.prior=i)};nO.prototype.possiblyEvaluate=function(r,n,i){var a=r.now||0,o=this.value.possiblyEvaluate(r,n,i),s=this.prior;if(s){if(a>this.end||this.value.isDataDriven())return this.prior=null,o;if(a<this.begin)return s.possiblyEvaluate(r,n,i);var l=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(r,n,i),o,function(r){if(r<=0)return 0;if(r>=1)return 1;var n=r*r,i=n*r;return 4*(r<.5?i:3*(r-n)+i-.75)}(l))}return o};var nP=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};nP.prototype.possiblyEvaluate=function(r,n,i){for(var a=new nz(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var l=s[o];a._values[l]=this._values[l].possiblyEvaluate(r,n,i)}return a},nP.prototype.hasTransition=function(){for(var r=0,n=Object.keys(this._values);r<n.length;r+=1){var i=n[r];if(this._values[i].prior)return!0}return!1};var nI=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};nI.prototype.getValue=function(r){return k(this._values[r].value)},nI.prototype.setValue=function(r,n){this._values[r]=new nE(this._values[r].property,null===n?void 0:k(n))},nI.prototype.serialize=function(){for(var r={},n=0,i=Object.keys(this._values);n<i.length;n+=1){var a=i[n],o=this.getValue(a);void 0!==o&&(r[a]=o)}return r},nI.prototype.possiblyEvaluate=function(r,n,i){for(var a=new nz(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var l=s[o];a._values[l]=this._values[l].possiblyEvaluate(r,n,i)}return a};var nD=function(r,n,i){this.property=r,this.value=n,this.parameters=i};nD.prototype.isConstant=function(){return"constant"===this.value.kind},nD.prototype.constantOr=function(r){return"constant"===this.value.kind?this.value.value:r},nD.prototype.evaluate=function(r,n,i,a){return this.property.evaluate(this.value,this.parameters,r,n,i,a)};var nz=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};nz.prototype.get=function(r){return this._values[r]};var nR=function(r){this.specification=r};nR.prototype.possiblyEvaluate=function(r,n){return r.expression.evaluate(n)},nR.prototype.interpolate=function(r,n,i){var a=eI[this.specification.type];return a?a(r,n,i):r};var nF=function(r,n){this.specification=r,this.overrides=n};nF.prototype.possiblyEvaluate=function(r,n,i,a){return"constant"===r.expression.kind||"camera"===r.expression.kind?new nD(this,{kind:"constant",value:r.expression.evaluate(n,null,{},i,a)},n):new nD(this,r.expression,n)},nF.prototype.interpolate=function(r,n,i){if("constant"!==r.value.kind||"constant"!==n.value.kind)return r;if(void 0===r.value.value||void 0===n.value.value)return new nD(this,{kind:"constant",value:void 0},r.parameters);var a=eI[this.specification.type];return a?new nD(this,{kind:"constant",value:a(r.value.value,n.value.value,i)},r.parameters):r},nF.prototype.evaluate=function(r,n,i,a,o,s){return"constant"===r.kind?r.value:r.evaluate(n,i,a,o,s)};var nB=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.possiblyEvaluate=function(r,n,i,a){if(void 0===r.value)return new nD(this,{kind:"constant",value:void 0},n);if("constant"===r.expression.kind){var o=r.expression.evaluate(n,null,{},i,a),s="resolvedImage"===r.property.specification.type&&"string"!=typeof o?o.name:o;return new nD(this,{kind:"constant",value:this._calculate(s,s,s,n)},n)}return"camera"===r.expression.kind?new nD(this,{kind:"constant",value:this._calculate(r.expression.evaluate({zoom:n.zoom-1}),r.expression.evaluate({zoom:n.zoom}),r.expression.evaluate({zoom:n.zoom+1}),n)},n):new nD(this,r.expression,n)},n.prototype.evaluate=function(r,n,i,a,o,s){if("source"===r.kind){var l=r.evaluate(n,i,a,o,s);return this._calculate(l,l,l,n)}return"composite"===r.kind?this._calculate(r.evaluate({zoom:Math.floor(n.zoom)-1},i,a),r.evaluate({zoom:Math.floor(n.zoom)},i,a),r.evaluate({zoom:Math.floor(n.zoom)+1},i,a),n):r.value},n.prototype._calculate=function(r,n,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:r,to:n}:{from:i,to:n}},n.prototype.interpolate=function(r){return r},n}(nF),nN=function(r){this.specification=r};nN.prototype.possiblyEvaluate=function(r,n,i,a){if(void 0!==r.value){if("constant"===r.expression.kind){var o=r.expression.evaluate(n,null,{},i,a);return this._calculate(o,o,o,n)}return this._calculate(r.expression.evaluate(new nS(Math.floor(n.zoom-1),n)),r.expression.evaluate(new nS(Math.floor(n.zoom),n)),r.expression.evaluate(new nS(Math.floor(n.zoom+1),n)),n)}},nN.prototype._calculate=function(r,n,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:r,to:n}:{from:i,to:n}},nN.prototype.interpolate=function(r){return r};var nj=function(r){this.specification=r};nj.prototype.possiblyEvaluate=function(r,n,i,a){return!!r.expression.evaluate(n,null,{},i,a)},nj.prototype.interpolate=function(){return!1};var nU=function(r){for(var n in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var i=r[n];i.specification.overridable&&this.overridableProperties.push(n);var a=this.defaultPropertyValues[n]=new nE(i,void 0),o=this.defaultTransitionablePropertyValues[n]=new nL(i);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=a.possiblyEvaluate({})}};nn("DataDrivenProperty",nF),nn("DataConstantProperty",nR),nn("CrossFadedDataDrivenProperty",nB),nn("CrossFadedProperty",nN),nn("ColorRampProperty",nj);var nV="-transition",nH=function(r){function n(n,i){if(r.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==n.type&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,"background"!==n.type&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),i.layout&&(this._unevaluatedLayout=new nI(i.layout)),i.paint)){for(var a in this._transitionablePaint=new nC(i.paint),n.paint)this.setPaintProperty(a,n.paint[a],{validate:!1});for(var o in n.layout)this.setLayoutProperty(o,n.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new nz(i.paint)}}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},n.prototype.getLayoutProperty=function(r){return"visibility"===r?this.visibility:this._unevaluatedLayout.getValue(r)},n.prototype.setLayoutProperty=function(r,n,i){if(void 0===i&&(i={}),null!=n){var a="layers."+this.id+".layout."+r;if(this._validate(r8,a,r,n,i))return}"visibility"!==r?this._unevaluatedLayout.setValue(r,n):this.visibility=n},n.prototype.getPaintProperty=function(r){return _(r,nV)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)},n.prototype.setPaintProperty=function(r,n,i){if(void 0===i&&(i={}),null!=n){var a="layers."+this.id+".paint."+r;if(this._validate(r6,a,r,n,i))return!1}if(_(r,nV))return this._transitionablePaint.setTransition(r.slice(0,-11),n||void 0),!1;var o=this._transitionablePaint._values[r],s="cross-faded-data-driven"===o.property.specification["property-type"],l=o.value.isDataDriven(),u=o.value;this._transitionablePaint.setValue(r,n),this._handleSpecialPaintPropertyUpdate(r);var c=this._transitionablePaint._values[r].value;return c.isDataDriven()||l||s||this._handleOverridablePaintPropertyUpdate(r,u,c)},n.prototype._handleSpecialPaintPropertyUpdate=function(r){},n.prototype._handleOverridablePaintPropertyUpdate=function(r,n,i){return!1},n.prototype.isHidden=function(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||"none"===this.visibility},n.prototype.updateTransitions=function(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)},n.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},n.prototype.recalculate=function(r,n){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,n)},n.prototype.serialize=function(){var r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),T(r,function(r,n){return!(void 0===r||"layout"===n&&!Object.keys(r).length||"paint"===n&&!Object.keys(r).length)})},n.prototype._validate=function(r,n,i,a,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&r7(this,r.call(r2,{key:n,layerType:this.type,objectKey:i,value:a,styleSpec:tP,style:{glyphs:!0,sprite:!0}}))},n.prototype.is3D=function(){return!1},n.prototype.isTileClipped=function(){return!1},n.prototype.hasOffscreenPass=function(){return!1},n.prototype.resize=function(){},n.prototype.isStateDependent=function(){for(var r in this.paint._values){var n=this.paint.get(r);if(n instanceof nD&&rh(n.property.specification)&&("source"===n.value.kind||"composite"===n.value.kind)&&n.value.isStateDependent)return!0}return!1},n}(tO),nq={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},nG=function(r,n){this._structArray=r,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},nZ=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function nY(r,n){void 0===n&&(n=1);var i=0,a=0;return{members:r.map(function(r){var o,s=nq[o=r.type].BYTES_PER_ELEMENT,l=i=nW(i,Math.max(n,s)),u=r.components||1;return a=Math.max(a,s),i+=s*u,{name:r.name,type:r.type,components:u,offset:l}}),size:nW(i,Math.max(a,n)),alignment:n}}function nW(r,n){return Math.ceil(r/n)*n}nZ.serialize=function(r,n){return r._trim(),n&&(r.isTransferred=!0,n.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},nZ.deserialize=function(r){var n=Object.create(this.prototype);return n.arrayBuffer=r.arrayBuffer,n.length=r.length,n.capacity=r.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n},nZ.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},nZ.prototype.clear=function(){this.length=0},nZ.prototype.resize=function(r){this.reserve(r),this.length=r},nZ.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}},nZ.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")};var nX=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n){var i=this.length;return this.resize(i+1),this.emplace(i,r,n)},n.prototype.emplace=function(r,n,i){var a=2*r;return this.int16[a+0]=n,this.int16[a+1]=i,r},n}(nZ);nX.prototype.bytesPerElement=4,nn("StructArrayLayout2i4",nX);var nJ=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,r,n,i,a)},n.prototype.emplace=function(r,n,i,a,o){var s=4*r;return this.int16[s+0]=n,this.int16[s+1]=i,this.int16[s+2]=a,this.int16[s+3]=o,r},n}(nZ);nJ.prototype.bytesPerElement=8,nn("StructArrayLayout4i8",nJ);var nK=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,a,o,s)},n.prototype.emplace=function(r,n,i,a,o,s,l){var u=6*r;return this.int16[u+0]=n,this.int16[u+1]=i,this.int16[u+2]=a,this.int16[u+3]=o,this.int16[u+4]=s,this.int16[u+5]=l,r},n}(nZ);nK.prototype.bytesPerElement=12,nn("StructArrayLayout2i4i12",nK);var n$=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,a,o,s)},n.prototype.emplace=function(r,n,i,a,o,s,l){var u=4*r,c=8*r;return this.int16[u+0]=n,this.int16[u+1]=i,this.uint8[c+4]=a,this.uint8[c+5]=o,this.uint8[c+6]=s,this.uint8[c+7]=l,r},n}(nZ);n$.prototype.bytesPerElement=8,nn("StructArrayLayout2i4ub8",n$);var nQ=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n){var i=this.length;return this.resize(i+1),this.emplace(i,r,n)},n.prototype.emplace=function(r,n,i){var a=2*r;return this.float32[a+0]=n,this.float32[a+1]=i,r},n}(nZ);nQ.prototype.bytesPerElement=8,nn("StructArrayLayout2f8",nQ);var n0=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,u,c,f){var h=this.length;return this.resize(h+1),this.emplace(h,r,n,i,a,o,s,l,u,c,f)},n.prototype.emplace=function(r,n,i,a,o,s,l,u,c,f,h){var p=10*r;return this.uint16[p+0]=n,this.uint16[p+1]=i,this.uint16[p+2]=a,this.uint16[p+3]=o,this.uint16[p+4]=s,this.uint16[p+5]=l,this.uint16[p+6]=u,this.uint16[p+7]=c,this.uint16[p+8]=f,this.uint16[p+9]=h,r},n}(nZ);n0.prototype.bytesPerElement=20,nn("StructArrayLayout10ui20",n0);var n1=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,u,c,f,h,p){var d=this.length;return this.resize(d+1),this.emplace(d,r,n,i,a,o,s,l,u,c,f,h,p)},n.prototype.emplace=function(r,n,i,a,o,s,l,u,c,f,h,p,d){var v=12*r;return this.int16[v+0]=n,this.int16[v+1]=i,this.int16[v+2]=a,this.int16[v+3]=o,this.uint16[v+4]=s,this.uint16[v+5]=l,this.uint16[v+6]=u,this.uint16[v+7]=c,this.int16[v+8]=f,this.int16[v+9]=h,this.int16[v+10]=p,this.int16[v+11]=d,r},n}(nZ);n1.prototype.bytesPerElement=24,nn("StructArrayLayout4i4ui4i24",n1);var n2=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=3*r;return this.float32[o+0]=n,this.float32[o+1]=i,this.float32[o+2]=a,r},n}(nZ);n2.prototype.bytesPerElement=12,nn("StructArrayLayout3f12",n2);var n3=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r){var n=this.length;return this.resize(n+1),this.emplace(n,r)},n.prototype.emplace=function(r,n){return this.uint32[1*r+0]=n,r},n}(nZ);n3.prototype.bytesPerElement=4,nn("StructArrayLayout1ul4",n3);var n5=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,u,c){var f=this.length;return this.resize(f+1),this.emplace(f,r,n,i,a,o,s,l,u,c)},n.prototype.emplace=function(r,n,i,a,o,s,l,u,c,f){var h=10*r;return this.int16[h+0]=n,this.int16[h+1]=i,this.int16[h+2]=a,this.int16[h+3]=o,this.int16[h+4]=s,this.int16[h+5]=l,this.uint32[5*r+3]=u,this.uint16[h+8]=c,this.uint16[h+9]=f,r},n}(nZ);n5.prototype.bytesPerElement=20,nn("StructArrayLayout6i1ul2ui20",n5);var n4=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,r,n,i,a,o,s)},n.prototype.emplace=function(r,n,i,a,o,s,l){var u=6*r;return this.int16[u+0]=n,this.int16[u+1]=i,this.int16[u+2]=a,this.int16[u+3]=o,this.int16[u+4]=s,this.int16[u+5]=l,r},n}(nZ);n4.prototype.bytesPerElement=12,nn("StructArrayLayout2i2i2i12",n4);var n6=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,r,n,i,a,o)},n.prototype.emplace=function(r,n,i,a,o,s){var l=4*r,u=8*r;return this.float32[l+0]=n,this.float32[l+1]=i,this.float32[l+2]=a,this.int16[u+6]=o,this.int16[u+7]=s,r},n}(nZ);n6.prototype.bytesPerElement=16,nn("StructArrayLayout2f1f2i16",n6);var n8=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,r,n,i,a)},n.prototype.emplace=function(r,n,i,a,o){var s=12*r,l=3*r;return this.uint8[s+0]=n,this.uint8[s+1]=i,this.float32[l+1]=a,this.float32[l+2]=o,r},n}(nZ);n8.prototype.bytesPerElement=12,nn("StructArrayLayout2ub2f12",n8);var n7=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=3*r;return this.uint16[o+0]=n,this.uint16[o+1]=i,this.uint16[o+2]=a,r},n}(nZ);n7.prototype.bytesPerElement=6,nn("StructArrayLayout3ui6",n7);var n9=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m){var x=this.length;return this.resize(x+1),this.emplace(x,r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m)},n.prototype.emplace=function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m,x){var b=24*r,_=12*r,w=48*r;return this.int16[b+0]=n,this.int16[b+1]=i,this.uint16[b+2]=a,this.uint16[b+3]=o,this.uint32[_+2]=s,this.uint32[_+3]=l,this.uint32[_+4]=u,this.uint16[b+10]=c,this.uint16[b+11]=f,this.uint16[b+12]=h,this.float32[_+7]=p,this.float32[_+8]=d,this.uint8[w+36]=v,this.uint8[w+37]=g,this.uint8[w+38]=y,this.uint32[_+10]=m,this.int16[b+22]=x,r},n}(nZ);n9.prototype.bytesPerElement=48,nn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",n9);var it=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L){var C=this.length;return this.resize(C+1),this.emplace(C,r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L)},n.prototype.emplace=function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C){var O=34*r,P=17*r;return this.int16[O+0]=n,this.int16[O+1]=i,this.int16[O+2]=a,this.int16[O+3]=o,this.int16[O+4]=s,this.int16[O+5]=l,this.int16[O+6]=u,this.int16[O+7]=c,this.uint16[O+8]=f,this.uint16[O+9]=h,this.uint16[O+10]=p,this.uint16[O+11]=d,this.uint16[O+12]=v,this.uint16[O+13]=g,this.uint16[O+14]=y,this.uint16[O+15]=m,this.uint16[O+16]=x,this.uint16[O+17]=b,this.uint16[O+18]=_,this.uint16[O+19]=w,this.uint16[O+20]=T,this.uint16[O+21]=k,this.uint16[O+22]=A,this.uint32[P+12]=M,this.float32[P+13]=S,this.float32[P+14]=E,this.float32[P+15]=L,this.float32[P+16]=C,r},n}(nZ);it.prototype.bytesPerElement=68,nn("StructArrayLayout8i15ui1ul4f68",it);var ie=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r){var n=this.length;return this.resize(n+1),this.emplace(n,r)},n.prototype.emplace=function(r,n){return this.float32[1*r+0]=n,r},n}(nZ);ie.prototype.bytesPerElement=4,nn("StructArrayLayout1f4",ie);var ir=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=3*r;return this.int16[o+0]=n,this.int16[o+1]=i,this.int16[o+2]=a,r},n}(nZ);ir.prototype.bytesPerElement=6,nn("StructArrayLayout3i6",ir);var ii=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i){var a=this.length;return this.resize(a+1),this.emplace(a,r,n,i)},n.prototype.emplace=function(r,n,i,a){var o=4*r;return this.uint32[2*r+0]=n,this.uint16[o+2]=i,this.uint16[o+3]=a,r},n}(nZ);ii.prototype.bytesPerElement=8,nn("StructArrayLayout1ul2ui8",ii);var ia=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n){var i=this.length;return this.resize(i+1),this.emplace(i,r,n)},n.prototype.emplace=function(r,n,i){var a=2*r;return this.uint16[a+0]=n,this.uint16[a+1]=i,r},n}(nZ);ia.prototype.bytesPerElement=4,nn("StructArrayLayout2ui4",ia);var io=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r){var n=this.length;return this.resize(n+1),this.emplace(n,r)},n.prototype.emplace=function(r,n){return this.uint16[1*r+0]=n,r},n}(nZ);io.prototype.bytesPerElement=2,nn("StructArrayLayout1ui2",io);var is=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},n.prototype.emplaceBack=function(r,n,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,r,n,i,a)},n.prototype.emplace=function(r,n,i,a,o){var s=4*r;return this.float32[s+0]=n,this.float32[s+1]=i,this.float32[s+2]=a,this.float32[s+3]=o,r},n}(nZ);is.prototype.bytesPerElement=16,nn("StructArrayLayout4f16",is);var il=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(n.prototype,i),n}(nG);il.prototype.size=20;var iu=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new il(this,r)},n}(n5);nn("CollisionBoxArray",iu);var ic=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(r){this._structArray.uint8[this._pos1+37]=r},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(r){this._structArray.uint8[this._pos1+38]=r},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(r){this._structArray.uint32[this._pos4+10]=r},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(n.prototype,i),n}(nG);ic.prototype.size=48;var ih=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new ic(this,r)},n}(n9);nn("PlacedSymbolArray",ih);var ip=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(r){this._structArray.uint32[this._pos4+12]=r},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(n.prototype,i),n}(nG);ip.prototype.size=68;var id=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new ip(this,r)},n}(it);nn("SymbolInstanceArray",id);var iv=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getoffsetX=function(r){return this.float32[1*r+0]},n}(ie);nn("GlyphOffsetArray",iv);var ig=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getx=function(r){return this.int16[3*r+0]},n.prototype.gety=function(r){return this.int16[3*r+1]},n.prototype.gettileUnitDistanceFromAnchor=function(r){return this.int16[3*r+2]},n}(ir);nn("SymbolLineVertexArray",ig);var iy=function(r){function n(){r.apply(this,arguments)}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(n.prototype,i),n}(nG);iy.prototype.size=8;var im=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.get=function(r){return new iy(this,r)},n}(ii);nn("FeatureIndexArray",im);var ix=nY([{name:"a_pos",components:2,type:"Int16"}],4).members,ib=function(r){void 0===r&&(r=[]),this.segments=r};function i_(r,n){return 256*(r=p(Math.floor(r),0,255))+p(Math.floor(n),0,255)}ib.prototype.prepareSegment=function(r,n,i,a){var o=this.segments[this.segments.length-1];return r>ib.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+ib.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!o||o.vertexLength+r>ib.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==a)&&(o={vertexOffset:n.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==a&&(o.sortKey=a),this.segments.push(o)),o},ib.prototype.get=function(){return this.segments},ib.prototype.destroy=function(){for(var r=0,n=this.segments;r<n.length;r+=1){var i=n[r];for(var a in i.vaos)i.vaos[a].destroy()}},ib.simpleSegment=function(r,n,i,a){return new ib([{vertexOffset:r,primitiveOffset:n,vertexLength:i,primitiveLength:a,vaos:{},sortKey:0}])},ib.MAX_VERTEX_ARRAY_LENGTH=65535,nn("SegmentVector",ib);var iw=nY([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),iT=n(function(r){r.exports=function(r,n){var i,a,o,s,l,u;for(i=3&r.length,a=r.length-i,o=n,u=0;u<a;)l=255&r.charCodeAt(u)|(255&r.charCodeAt(++u))<<8|(255&r.charCodeAt(++u))<<16|(255&r.charCodeAt(++u))<<24,++u,o=27492+(65535&(s=5*(65535&(o=(o^=l=(65535&(l=(l=(65535&l)*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&r.charCodeAt(u+2))<<16;case 2:l^=(255&r.charCodeAt(u+1))<<8;case 1:o^=l=(65535&(l=(l=(65535&(l^=255&r.charCodeAt(u)))*3432918353+(((l>>>16)*3432918353&65535)<<16)&4294967295)<<15|l>>>17))*461845907+(((l>>>16)*461845907&65535)<<16)&4294967295}return o^=r.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}}),ik=n(function(r){r.exports=function(r,n){for(var i,a=r.length,o=n^a,s=0;a>=4;)i=1540483477*(65535&(i=255&r.charCodeAt(s)|(255&r.charCodeAt(++s))<<8|(255&r.charCodeAt(++s))<<16|(255&r.charCodeAt(++s))<<24))+((1540483477*(i>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),a-=4,++s;switch(a){case 3:o^=(255&r.charCodeAt(s+2))<<16;case 2:o^=(255&r.charCodeAt(s+1))<<8;case 1:o=1540483477*(65535&(o^=255&r.charCodeAt(s)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0}});iT.murmur3=iT,iT.murmur2=ik;var iA=function(){this.ids=[],this.positions=[],this.indexed=!1};function iM(r){var n=+r;return!isNaN(n)&&n<=9007199254740991?n:iT(String(r))}function iS(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}iA.prototype.add=function(r,n,i,a){this.ids.push(iM(r)),this.positions.push(n,i,a)},iA.prototype.getPositions=function(r){for(var n=iM(r),i=0,a=this.ids.length-1;i<a;){var o=i+a>>1;this.ids[o]>=n?a=o:i=o+1}for(var s=[];this.ids[i]===n;){var l=this.positions[3*i],u=this.positions[3*i+1],c=this.positions[3*i+2];s.push({index:l,start:u,end:c}),i++}return s},iA.serialize=function(r,n){var i=new Float64Array(r.ids),a=new Uint32Array(r.positions);return function r(n,i,a,o){for(;a<o;){for(var s=n[a+o>>1],l=a-1,u=o+1;;){do l++;while(n[l]<s);do u--;while(n[u]>s);if(l>=u)break;iS(n,l,u),iS(i,3*l,3*u),iS(i,3*l+1,3*u+1),iS(i,3*l+2,3*u+2)}u-a<o-u?(r(n,i,a,u),a=u+1):(r(n,i,u+1,o),o=u)}}(i,a,0,i.length-1),n&&n.push(i.buffer,a.buffer),{ids:i,positions:a}},iA.deserialize=function(r){var n=new iA;return n.ids=r.ids,n.positions=r.positions,n.indexed=!0,n},nn("FeaturePositionMap",iA);var iE=function(r,n){this.gl=r.gl,this.location=n},iL=function(r){function n(n,i){r.call(this,n,i),this.current=0}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))},n}(iE),iC=function(r){function n(n,i){r.call(this,n,i),this.current=0}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))},n}(iE),iO=function(r){function n(n,i){r.call(this,n,i),this.current=[0,0]}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))},n}(iE),iP=function(r){function n(n,i){r.call(this,n,i),this.current=[0,0,0]}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))},n}(iE),iI=function(r){function n(n,i){r.call(this,n,i),this.current=[0,0,0,0]}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))},n}(iE),iD=function(r){function n(n,i){r.call(this,n,i),this.current=t3.transparent}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))},n}(iE),iz=new Float32Array(16),iR=function(r){function n(n,i){r.call(this,n,i),this.current=iz}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(var n=1;n<16;n++)if(r[n]!==this.current[n]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}},n}(iE);function iF(r){return[i_(255*r.r,255*r.g),i_(255*r.b,255*r.a)]}var iB=function(r,n,i){this.value=r,this.uniformNames=n.map(function(r){return"u_"+r}),this.type=i};iB.prototype.setUniform=function(r,n,i){r.set(i.constantOr(this.value))},iB.prototype.getBinding=function(r,n,i){return"color"===this.type?new iD(r,n):new iC(r,n)};var iN=function(r,n){this.uniformNames=n.map(function(r){return"u_"+r}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};iN.prototype.setConstantPatternPositions=function(r,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=r.tlbr},iN.prototype.setUniform=function(r,n,i,a){var o="u_pattern_to"===a?this.patternTo:"u_pattern_from"===a?this.patternFrom:"u_pixel_ratio_to"===a?this.pixelRatioTo:"u_pixel_ratio_from"===a?this.pixelRatioFrom:null;o&&r.set(o)},iN.prototype.getBinding=function(r,n,i){return"u_pattern"===i.substr(0,9)?new iI(r,n):new iC(r,n)};var ij=function(r,n,i,a){this.expression=r,this.type=i,this.maxValue=0,this.paintVertexAttributes=n.map(function(r){return{name:"a_"+r,type:"Float32",components:"color"===i?2:1,offset:0}}),this.paintVertexArray=new a};ij.prototype.populatePaintArray=function(r,n,i,a,o){var s=this.paintVertexArray.length,l=this.expression.evaluate(new nS(0),n,{},a,[],o);this.paintVertexArray.resize(r),this._setPaintValue(s,r,l)},ij.prototype.updatePaintArray=function(r,n,i,a){var o=this.expression.evaluate({zoom:0},i,a);this._setPaintValue(r,n,o)},ij.prototype._setPaintValue=function(r,n,i){if("color"===this.type)for(var a=iF(i),o=r;o<n;o++)this.paintVertexArray.emplace(o,a[0],a[1]);else{for(var s=r;s<n;s++)this.paintVertexArray.emplace(s,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},ij.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ij.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var iU=function(r,n,i,a,o,s){this.expression=r,this.uniformNames=n.map(function(r){return"u_"+r+"_t"}),this.type=i,this.useIntegerZoom=a,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=n.map(function(r){return{name:"a_"+r,type:"Float32",components:"color"===i?4:2,offset:0}}),this.paintVertexArray=new s};iU.prototype.populatePaintArray=function(r,n,i,a,o){var s=this.expression.evaluate(new nS(this.zoom),n,{},a,[],o),l=this.expression.evaluate(new nS(this.zoom+1),n,{},a,[],o),u=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(u,r,s,l)},iU.prototype.updatePaintArray=function(r,n,i,a){var o=this.expression.evaluate({zoom:this.zoom},i,a),s=this.expression.evaluate({zoom:this.zoom+1},i,a);this._setPaintValue(r,n,o,s)},iU.prototype._setPaintValue=function(r,n,i,a){if("color"===this.type)for(var o=iF(i),s=iF(a),l=r;l<n;l++)this.paintVertexArray.emplace(l,o[0],o[1],s[0],s[1]);else{for(var u=r;u<n;u++)this.paintVertexArray.emplace(u,i,a);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(a))}},iU.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},iU.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},iU.prototype.setUniform=function(r,n){var i=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=p(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);r.set(a)},iU.prototype.getBinding=function(r,n,i){return new iC(r,n)};var iV=function(r,n,i,a,o,s){this.expression=r,this.type=n,this.useIntegerZoom=i,this.zoom=a,this.layerId=s,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};iV.prototype.populatePaintArray=function(r,n,i){var a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(a,r,n.patterns&&n.patterns[this.layerId],i)},iV.prototype.updatePaintArray=function(r,n,i,a,o){this._setPaintValues(r,n,i.patterns&&i.patterns[this.layerId],o)},iV.prototype._setPaintValues=function(r,n,i,a){if(a&&i){var o=i.min,s=i.mid,l=i.max,u=a[o],c=a[s],f=a[l];if(u&&c&&f)for(var h=r;h<n;h++)this.zoomInPaintVertexArray.emplace(h,c.tl[0],c.tl[1],c.br[0],c.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],c.pixelRatio,u.pixelRatio),this.zoomOutPaintVertexArray.emplace(h,c.tl[0],c.tl[1],c.br[0],c.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],c.pixelRatio,f.pixelRatio)}},iV.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,iw.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,iw.members,this.expression.isStateDependent))},iV.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var iH=function(r,n,i){this.binders={},this._buffers=[];var a=[];for(var o in r.paint._values)if(i(o)){var s=r.paint.get(o);if(s instanceof nD&&rh(s.property.specification)){var l,u=(l=r.type,({"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]})[o]||[o.replace(l+"-","").replace(/-/g,"_")]),c=s.value,f=s.property.specification.type,h=s.property.useIntegerZoom,p=s.property.specification["property-type"],d="cross-faded"===p||"cross-faded-data-driven"===p;if("constant"===c.kind)this.binders[o]=d?new iN(c.value,u):new iB(c.value,u,f),a.push("/u_"+o);else if("source"===c.kind||d){var v=iG(o,f,"source");this.binders[o]=d?new iV(c,f,h,n,v,r.id):new ij(c,u,f,v),a.push("/a_"+o)}else{var g=iG(o,f,"composite");this.binders[o]=new iU(c,u,f,h,n,g),a.push("/z_"+o)}}}this.cacheKey=a.sort().join("")};iH.prototype.getMaxValue=function(r){var n=this.binders[r];return n instanceof ij||n instanceof iU?n.maxValue:0},iH.prototype.populatePaintArrays=function(r,n,i,a,o){for(var s in this.binders){var l=this.binders[s];(l instanceof ij||l instanceof iU||l instanceof iV)&&l.populatePaintArray(r,n,i,a,o)}},iH.prototype.setConstantPatternPositions=function(r,n){for(var i in this.binders){var a=this.binders[i];a instanceof iN&&a.setConstantPatternPositions(r,n)}},iH.prototype.updatePaintArrays=function(r,n,i,a,o){var s=!1;for(var l in r)for(var u=0,c=n.getPositions(l);u<c.length;u+=1){var f=c[u],h=i.feature(f.index);for(var p in this.binders){var d=this.binders[p];if((d instanceof ij||d instanceof iU||d instanceof iV)&&!0===d.expression.isStateDependent){var v=a.paint.get(p);d.expression=v.value,d.updatePaintArray(f.start,f.end,h,r[l],o),s=!0}}}return s},iH.prototype.defines=function(){var r=[];for(var n in this.binders){var i=this.binders[n];(i instanceof iB||i instanceof iN)&&r.push.apply(r,i.uniformNames.map(function(r){return"#define HAS_UNIFORM_"+r}))}return r},iH.prototype.getBinderAttributes=function(){var r=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof ij||i instanceof iU)for(var a=0;a<i.paintVertexAttributes.length;a++)r.push(i.paintVertexAttributes[a].name);else if(i instanceof iV)for(var o=0;o<iw.members.length;o++)r.push(iw.members[o].name)}return r},iH.prototype.getBinderUniforms=function(){var r=[];for(var n in this.binders){var i=this.binders[n];if(i instanceof iB||i instanceof iN||i instanceof iU)for(var a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];r.push(s)}}return r},iH.prototype.getPaintVertexBuffers=function(){return this._buffers},iH.prototype.getUniforms=function(r,n){var i=[];for(var a in this.binders){var o=this.binders[a];if(o instanceof iB||o instanceof iN||o instanceof iU)for(var s=0,l=o.uniformNames;s<l.length;s+=1){var u=l[s];if(n[u]){var c=o.getBinding(r,n[u],u);i.push({name:u,property:a,binding:c})}}}return i},iH.prototype.setUniforms=function(r,n,i,a){for(var o=0;o<n.length;o+=1){var s=n[o],l=s.name,u=s.property,c=s.binding;this.binders[u].setUniform(c,a,i.get(u),l)}},iH.prototype.updatePaintBuffers=function(r){for(var n in this._buffers=[],this.binders){var i=this.binders[n];if(r&&i instanceof iV){var a=2===r.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;a&&this._buffers.push(a)}else(i instanceof ij||i instanceof iU)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},iH.prototype.upload=function(r){for(var n in this.binders){var i=this.binders[n];(i instanceof ij||i instanceof iU||i instanceof iV)&&i.upload(r)}this.updatePaintBuffers()},iH.prototype.destroy=function(){for(var r in this.binders){var n=this.binders[r];(n instanceof ij||n instanceof iU||n instanceof iV)&&n.destroy()}};var iq=function(r,n,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var a=0;a<r.length;a+=1){var o=r[a];this.programConfigurations[o.id]=new iH(o,n,i)}this.needsUpload=!1,this._featureMap=new iA,this._bufferOffset=0};function iG(r,n,i){var a={"line-pattern":{source:n0,composite:n0},"fill-pattern":{source:n0,composite:n0},"fill-extrusion-pattern":{source:n0,composite:n0}}[r];return a&&a[i]||({color:{source:nQ,composite:is},number:{source:ie,composite:nQ}})[n][i]}iq.prototype.populatePaintArrays=function(r,n,i,a,o,s){for(var l in this.programConfigurations)this.programConfigurations[l].populatePaintArrays(r,n,a,o,s);void 0!==n.id&&this._featureMap.add(n.id,i,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},iq.prototype.updatePaintArrays=function(r,n,i,a){for(var o=0;o<i.length;o+=1){var s=i[o];this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(r,this._featureMap,n,s,a)||this.needsUpload}},iq.prototype.get=function(r){return this.programConfigurations[r]},iq.prototype.upload=function(r){if(this.needsUpload){for(var n in this.programConfigurations)this.programConfigurations[n].upload(r);this.needsUpload=!1}},iq.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},nn("ConstantBinder",iB),nn("CrossFadedConstantBinder",iN),nn("SourceExpressionBinder",ij),nn("CrossFadedCompositeBinder",iV),nn("CompositeExpressionBinder",iU),nn("ProgramConfiguration",iH,{omit:["_buffers"]}),nn("ProgramConfigurationSet",iq);var iZ=-16383-1;function iY(r){for(var n=8192/r.extent,i=r.loadGeometry(),a=0;a<i.length;a++)for(var o=i[a],s=0;s<o.length;s++){var l=o[s],u=Math.round(l.x*n),c=Math.round(l.y*n);l.x=p(u,iZ,16383),l.y=p(c,iZ,16383),(u<l.x||u>l.x+1||c<l.y||c>l.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function iW(r,n){return{type:r.type,id:r.id,properties:r.properties,geometry:n?iY(r):[]}}function iX(r,n,i,a,o){r.emplaceBack(2*n+(a+1)/2,2*i+(o+1)/2)}var iJ=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nX,this.indexArray=new n7,this.segments=new ib,this.programConfigurations=new iq(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function iK(r,n){for(var i=0;i<r.length;i++)if(i3(n,r[i]))return!0;for(var a=0;a<n.length;a++)if(i3(r,n[a]))return!0;return!!iQ(r,n)}function i$(r,n){if(1===r.length)return i2(n,r[0]);for(var i=0;i<n.length;i++)for(var a=n[i],o=0;o<a.length;o++)if(i3(r,a[o]))return!0;for(var s=0;s<r.length;s++)if(i2(n,r[s]))return!0;for(var l=0;l<n.length;l++)if(iQ(r,n[l]))return!0;return!1}function iQ(r,n){if(0===r.length||0===n.length)return!1;for(var i,a,o=0;o<r.length-1;o++)for(var s=r[o],l=r[o+1],u=0;u<n.length-1;u++)if(S(s,i=n[u],a=n[u+1])!==S(l,i,a)&&S(s,l,i)!==S(s,l,a))return!0;return!1}function i0(r,n,i){var a=i*i;if(1===n.length)return r.distSqr(n[0])<a;for(var o=1;o<n.length;o++)if(i1(r,n[o-1],n[o])<a)return!0;return!1}function i1(r,n,i){var a=n.distSqr(i);if(0===a)return r.distSqr(n);var o=((r.x-n.x)*(i.x-n.x)+(r.y-n.y)*(i.y-n.y))/a;return o<0?r.distSqr(n):o>1?r.distSqr(i):r.distSqr(i.sub(n)._mult(o)._add(n))}function i2(r,n){for(var i,a,o,s=!1,l=0;l<r.length;l++)for(var u=0,c=(i=r[l]).length-1;u<i.length;c=u++)a=i[u],o=i[c],a.y>n.y!=o.y>n.y&&n.x<(o.x-a.x)*(n.y-a.y)/(o.y-a.y)+a.x&&(s=!s);return s}function i3(r,n){for(var i=!1,a=0,o=r.length-1;a<r.length;o=a++){var s=r[a],l=r[o];s.y>n.y!=l.y>n.y&&n.x<(l.x-s.x)*(n.y-s.y)/(l.y-s.y)+s.x&&(i=!i)}return i}function i5(r,n,i){var a=n.paint.get(r).value;return"constant"===a.kind?a.value:i.programConfigurations.get(n.id).getMaxValue(r)}function i4(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function i6(r,n,i,a,o){if(!n[0]&&!n[1])return r;var s=u.convert(n)._mult(o);"viewport"===i&&s._rotate(-a);for(var l=[],c=0;c<r.length;c++){var f=r[c];l.push(f.sub(s))}return l}iJ.prototype.populate=function(r,n,i){var a=this.layers[0],o=[],s=null;"circle"===a.type&&(s=a.layout.get("circle-sort-key"));for(var l=0;l<r.length;l+=1){var u=r[l],c=u.feature,f=u.id,h=u.index,p=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,v=iW(c,d);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),v,i)){var g=s?s.evaluate(v,{},i):void 0,y={id:f,properties:c.properties,type:c.type,sourceLayerIndex:p,index:h,geometry:d?v.geometry:iY(c),patterns:{},sortKey:g};o.push(y)}}s&&o.sort(function(r,n){return r.sortKey-n.sortKey});for(var m=0;m<o.length;m+=1){var x=o[m],b=x.geometry,_=x.index,w=x.sourceLayerIndex,T=r[_].feature;this.addFeature(x,b,_,i),n.featureIndex.insert(T,b,_,w,this.index)}},iJ.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},iJ.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},iJ.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},iJ.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ix),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},iJ.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},iJ.prototype.addFeature=function(r,n,i,a){for(var o=0;o<n.length;o+=1)for(var s=0,l=n[o];s<l.length;s+=1){var u=l[s],c=u.x,f=u.y;if(!(c<0||c>=8192||f<0||f>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),p=h.vertexLength;iX(this.layoutVertexArray,c,f,-1,-1),iX(this.layoutVertexArray,c,f,1,-1),iX(this.layoutVertexArray,c,f,1,1),iX(this.layoutVertexArray,c,f,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,{},a)},nn("CircleBucket",iJ,{omit:["layers"]});var i8=new nU({"circle-sort-key":new nF(tP.layout_circle["circle-sort-key"])}),i7={paint:new nU({"circle-radius":new nF(tP.paint_circle["circle-radius"]),"circle-color":new nF(tP.paint_circle["circle-color"]),"circle-blur":new nF(tP.paint_circle["circle-blur"]),"circle-opacity":new nF(tP.paint_circle["circle-opacity"]),"circle-translate":new nR(tP.paint_circle["circle-translate"]),"circle-translate-anchor":new nR(tP.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nR(tP.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nR(tP.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nF(tP.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nF(tP.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nF(tP.paint_circle["circle-stroke-opacity"])}),layout:i8},i9="undefined"!=typeof Float32Array?Float32Array:Array;function at(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ae(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],v=n[10],g=n[11],y=n[12],m=n[13],x=n[14],b=n[15],_=i[0],w=i[1],T=i[2],k=i[3];return r[0]=_*a+w*u+T*p+k*y,r[1]=_*o+w*c+T*d+k*m,r[2]=_*s+w*f+T*v+k*x,r[3]=_*l+w*h+T*g+k*b,_=i[4],w=i[5],T=i[6],k=i[7],r[4]=_*a+w*u+T*p+k*y,r[5]=_*o+w*c+T*d+k*m,r[6]=_*s+w*f+T*v+k*x,r[7]=_*l+w*h+T*g+k*b,_=i[8],w=i[9],T=i[10],k=i[11],r[8]=_*a+w*u+T*p+k*y,r[9]=_*o+w*c+T*d+k*m,r[10]=_*s+w*f+T*v+k*x,r[11]=_*l+w*h+T*g+k*b,_=i[12],w=i[13],T=i[14],k=i[15],r[12]=_*a+w*u+T*p+k*y,r[13]=_*o+w*c+T*d+k*m,r[14]=_*s+w*f+T*v+k*x,r[15]=_*l+w*h+T*g+k*b,r}function ar(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3];return r[0]=i[0]*a+i[4]*o+i[8]*s+i[12]*l,r[1]=i[1]*a+i[5]*o+i[9]*s+i[13]*l,r[2]=i[2]*a+i[6]*o+i[10]*s+i[14]*l,r[3]=i[3]*a+i[7]*o+i[11]*s+i[15]*l,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,n=0,i=arguments.length;i--;)n+=r[i]*r[i];return Math.sqrt(n)}),i=new i9(3),i9!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),a=new i9(4),i9!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0);var an=(o=new i9(2),i9!=Float32Array&&(o[0]=0,o[1]=0),function(r){function n(n){r.call(this,n,i7)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.createBucket=function(r){return new iJ(r)},n.prototype.queryRadius=function(r){return i5("circle-radius",this,r)+i5("circle-stroke-width",this,r)+i4(this.paint.get("circle-translate"))},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l,u){for(var c=i6(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,l),f=this.paint.get("circle-radius").evaluate(n,i)+this.paint.get("circle-stroke-width").evaluate(n,i),h="map"===this.paint.get("circle-pitch-alignment"),p=h?c:c.map(function(r){return ai(r,u)}),d=h?f*l:f,v=0;v<a.length;v+=1)for(var g=0,y=a[v];g<y.length;g+=1){var m,x=y[g],b=h?x:ai(x,u),_=d,w=ar([],[x.x,x.y,0,1],u);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=w[3]/s.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=s.cameraToCenterDistance/w[3]),m=_,i3(p,b)||i0(b,p,m))return!0}return!1},n}(nH));function ai(r,n){var i=ar([],[r.x,r.y,0,1],n);return new u(i[0]/i[3],i[1]/i[3])}var aa=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(iJ);function ao(r,n,i,a){var o=n.width,s=n.height;if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==o*s*i)throw RangeError("mismatched image size")}else a=new Uint8Array(o*s*i);return r.width=o,r.height=s,r.data=a,r}function as(r,n,i){var a=n.width,o=n.height;if(a!==r.width||o!==r.height){var s=ao({},{width:a,height:o},i);al(r,s,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,a),height:Math.min(r.height,o)},i),r.width=a,r.height=o,r.data=s.data}}function al(r,n,i,a,o,s){if(0===o.width||0===o.height)return n;if(o.width>r.width||o.height>r.height||i.x>r.width-o.width||i.y>r.height-o.height)throw RangeError("out of range source coordinates for image copy");if(o.width>n.width||o.height>n.height||a.x>n.width-o.width||a.y>n.height-o.height)throw RangeError("out of range destination coordinates for image copy");for(var l=r.data,u=n.data,c=0;c<o.height;c++)for(var f=((i.y+c)*r.width+i.x)*s,h=((a.y+c)*n.width+a.x)*s,p=0;p<o.width*s;p++)u[h+p]=l[f+p];return n}nn("HeatmapBucket",aa,{omit:["layers"]});var au=function(r,n){ao(this,r,1,n)};au.prototype.resize=function(r){as(this,r,1)},au.prototype.clone=function(){return new au({width:this.width,height:this.height},new Uint8Array(this.data))},au.copy=function(r,n,i,a,o){al(r,n,i,a,o,1)};var ac=function(r,n){ao(this,r,4,n)};ac.prototype.resize=function(r){as(this,r,4)},ac.prototype.replace=function(r,n){n?this.data.set(r):r instanceof Uint8ClampedArray?this.data=new Uint8Array(r.buffer):this.data=r},ac.prototype.clone=function(){return new ac({width:this.width,height:this.height},new Uint8Array(this.data))},ac.copy=function(r,n,i,a,o){al(r,n,i,a,o,4)},nn("AlphaImage",au),nn("RGBAImage",ac);var af={paint:new nU({"heatmap-radius":new nF(tP.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nF(tP.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nR(tP.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nj(tP.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nR(tP.paint_heatmap["heatmap-opacity"])})};function ah(r){var n={},i=r.resolution||256,a=r.clips?r.clips.length:1,o=r.image||new ac({width:i,height:a}),s=function(i,a,s){n[r.evaluationKey]=s;var l=r.expression.evaluate(n);o.data[i+a+0]=Math.floor(255*l.r/l.a),o.data[i+a+1]=Math.floor(255*l.g/l.a),o.data[i+a+2]=Math.floor(255*l.b/l.a),o.data[i+a+3]=Math.floor(255*l.a)};if(r.clips)for(var l=0,u=0;l<a;++l,u+=4*i)for(var c=0,f=0;c<i;c++,f+=4){var h=c/(i-1),p=r.clips[l];s(u,f,p.start*(1-h)+p.end*h)}else for(var d=0,v=0;d<i;d++,v+=4)s(0,v,d/(i-1));return o}var ap=function(r){function n(n){r.call(this,n,af),this._updateColorRamp()}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.createBucket=function(r){return new aa(r)},n.prototype._handleSpecialPaintPropertyUpdate=function(r){"heatmap-color"===r&&this._updateColorRamp()},n.prototype._updateColorRamp=function(){var r=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ah({expression:r,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},n.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},n.prototype.queryRadius=function(){return 0},n.prototype.queryIntersectsFeature=function(){return!1},n.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},n}(nH),ad={paint:new nU({"hillshade-illumination-direction":new nR(tP.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nR(tP.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nR(tP.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nR(tP.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nR(tP.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nR(tP.paint_hillshade["hillshade-accent-color"])})},av=function(r){function n(n){r.call(this,n,ad)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},n}(nH),ag=nY([{name:"a_pos",components:2,type:"Int16"}],4).members,ay=am;function am(r,n,i){i=i||2;var a,o,s,l,u,c,f,h=n&&n.length,p=h?n[0]*i:r.length,d=ax(r,0,p,i,!0),v=[];if(!d||d.next===d.prev)return v;if(h&&(d=function(r,n,i,a){var o,s,l,u=[];for(o=0,s=n.length;o<s;o++)(l=ax(r,n[o]*a,o<s-1?n[o+1]*a:r.length,a,!1))===l.next&&(l.steiner=!0),u.push(function(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r);return i}(l));for(u.sort(a_),o=0;o<u.length;o++)(function(r,n){if(n=function(r,n){var i,a,o,s=n,l=r.x,u=r.y,c=-1/0;do{if(u<=s.y&&u>=s.next.y&&s.next.y!==s.y){var f=s.x+(u-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(f<=l&&f>c){if(c=f,f===l){if(u===s.y)return s;if(u===s.next.y)return s.next}o=s.x<s.next.x?s:s.next}}s=s.next}while(s!==n);if(!o)return null;if(l===c)return o;var h,p=o,d=o.x,v=o.y,g=1/0;s=o;do l>=s.x&&s.x>=d&&l!==s.x&&aT(u<v?l:c,u,d,v,u<v?c:l,u,s.x,s.y)&&(h=Math.abs(u-s.y)/(l-s.x),aL(s,r)&&(h<g||h===g&&(s.x>o.x||s.x===o.x&&(i=o,a=s,0>ak(i.prev,i,a.prev)&&0>ak(a.next,i,i.next))))&&(o=s,g=h)),s=s.next;while(s!==p);return o}(r,n)){var i=aC(n,r);ab(n,n.next),ab(i,i.next)}})(u[o],i),i=ab(i,i.next);return i}(r,n,d,i)),r.length>80*i){a=s=r[0],o=l=r[1];for(var g=i;g<p;g+=i)(u=r[g])<a&&(a=u),(c=r[g+1])<o&&(o=c),u>s&&(s=u),c>l&&(l=c);f=0!==(f=Math.max(s-a,l-o))?1/f:0}return function r(n,i,a,o,s,l,u){if(n){!u&&l&&function(r,n,i,a){var o=r;do null===o.z&&(o.z=aw(o.x,o.y,n,i,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,function(r){var n,i,a,o,s,l,u,c,f=1;do{for(i=r,r=null,s=null,l=0;i;){for(l++,a=i,u=0,n=0;n<f&&(u++,a=a.nextZ);n++);for(c=f;u>0||c>0&&a;)0!==u&&(0===c||!a||i.z<=a.z)?(o=i,i=i.nextZ,u--):(o=a,a=a.nextZ,c--),s?s.nextZ=o:r=o,o.prevZ=s,s=o;i=a}s.nextZ=null,f*=2}while(l>1)}(o)}(n,o,s,l);for(var c,f,h=n;n.prev!==n.next;)if(c=n.prev,f=n.next,l?function(r,n,i,a){var o=r.prev,s=r.next;if(ak(o,r,s)>=0)return!1;for(var l=o.x<r.x?o.x<s.x?o.x:s.x:r.x<s.x?r.x:s.x,u=o.y<r.y?o.y<s.y?o.y:s.y:r.y<s.y?r.y:s.y,c=o.x>r.x?o.x>s.x?o.x:s.x:r.x>s.x?r.x:s.x,f=o.y>r.y?o.y>s.y?o.y:s.y:r.y>s.y?r.y:s.y,h=aw(l,u,n,i,a),p=aw(c,f,n,i,a),d=r.prevZ,v=r.nextZ;d&&d.z>=h&&v&&v.z<=p;){if(d!==r.prev&&d!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,d.x,d.y)&&ak(d.prev,d,d.next)>=0||(d=d.prevZ,v!==r.prev&&v!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,v.x,v.y)&&ak(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;d&&d.z>=h;){if(d!==r.prev&&d!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,d.x,d.y)&&ak(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=p;){if(v!==r.prev&&v!==r.next&&aT(o.x,o.y,r.x,r.y,s.x,s.y,v.x,v.y)&&ak(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}(n,o,s,l):function(r){var n=r.prev,i=r.next;if(ak(n,r,i)>=0)return!1;for(var a=r.next.next;a!==r.prev;){if(aT(n.x,n.y,r.x,r.y,i.x,i.y,a.x,a.y)&&ak(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}(n))i.push(c.i/a),i.push(n.i/a),i.push(f.i/a),aP(n),n=f.next,h=f.next;else if((n=f)===h){u?1===u?r(n=function(r,n,i){var a=r;do{var o=a.prev,s=a.next.next;!aA(o,s)&&aM(o,a,a.next,s)&&aL(o,s)&&aL(s,o)&&(n.push(o.i/i),n.push(a.i/i),n.push(s.i/i),aP(a),aP(a.next),a=r=s),a=a.next}while(a!==r);return ab(a)}(ab(n),i,a),i,a,o,s,l,2):2===u&&function(n,i,a,o,s,l){var u=n;do{for(var c,f,h=u.next.next;h!==u.prev;){if(u.i!==h.i&&(c=u,f=h,c.next.i!==f.i&&c.prev.i!==f.i&&!function(r,n){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==n.i&&i.next.i!==n.i&&aM(i,i.next,r,n))return!0;i=i.next}while(i!==r);return!1}(c,f)&&(aL(c,f)&&aL(f,c)&&function(r,n){var i=r,a=!1,o=(r.x+n.x)/2,s=(r.y+n.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next;while(i!==r);return a}(c,f)&&(ak(c.prev,c,f.prev)||ak(c,f.prev,f))||aA(c,f)&&ak(c.prev,c,c.next)>0&&ak(f.prev,f,f.next)>0))){var p=aC(u,h);return u=ab(u,u.next),p=ab(p,p.next),r(u,i,a,o,s,l),void r(p,i,a,o,s,l)}h=h.next}u=u.next}while(u!==n)}(n,i,a,o,s,l):r(ab(n),i,a,o,s,l,1);break}}}(d,v,i,a,o,f),v}function ax(r,n,i,a,o){var s,l;if(o===aD(r,n,i,a)>0)for(s=n;s<i;s+=a)l=aO(s,r[s],r[s+1],l);else for(s=i-a;s>=n;s-=a)l=aO(s,r[s],r[s+1],l);return l&&aA(l,l.next)&&(aP(l),l=l.next),l}function ab(r,n){if(!r)return r;n||(n=r);var i,a=r;do if(i=!1,a.steiner||!aA(a,a.next)&&0!==ak(a.prev,a,a.next))a=a.next;else{if(aP(a),(a=n=a.prev)===a.next)break;i=!0}while(i||a!==n);return n}function a_(r,n){return r.x-n.x}function aw(r,n,i,a,o){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-i)*o)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*o)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function aT(r,n,i,a,o,s,l,u){return(o-l)*(n-u)-(r-l)*(s-u)>=0&&(r-l)*(a-u)-(i-l)*(n-u)>=0&&(i-l)*(s-u)-(o-l)*(a-u)>=0}function ak(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function aA(r,n){return r.x===n.x&&r.y===n.y}function aM(r,n,i,a){var o=aE(ak(r,n,i)),s=aE(ak(r,n,a)),l=aE(ak(i,a,r)),u=aE(ak(i,a,n));return o!==s&&l!==u||!(0!==o||!aS(r,i,n))||!(0!==s||!aS(r,a,n))||!(0!==l||!aS(i,r,a))||!(0!==u||!aS(i,n,a))}function aS(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function aE(r){return r>0?1:r<0?-1:0}function aL(r,n){return 0>ak(r.prev,r,r.next)?ak(r,n,r.next)>=0&&ak(r,r.prev,n)>=0:0>ak(r,n,r.prev)||0>ak(r,r.next,n)}function aC(r,n){var i=new aI(r.i,r.x,r.y),a=new aI(n.i,n.x,n.y),o=r.next,s=n.prev;return r.next=n,n.prev=r,i.next=o,o.prev=i,a.next=i,i.prev=a,s.next=a,a.prev=s,a}function aO(r,n,i,a){var o=new aI(r,n,i);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o}function aP(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function aI(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function aD(r,n,i,a){for(var o=0,s=n,l=i-a;s<i;s+=a)o+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return o}function az(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function aR(r,n){return r<n?-1:r>n?1:0}function aF(r,n){var i,a=r.length;if(a<=1)return[r];for(var o,s,l=[],u=0;u<a;u++){var c=function(r){for(var n=0,i=0,a=r.length,o=a-1,s=void 0,l=void 0;i<a;o=i++)s=r[i],n+=((l=r[o]).x-s.x)*(s.y+l.y);return n}(r[u]);0!==c&&(r[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(o&&l.push(o),o=[r[u]]):o.push(r[u]))}if(o&&l.push(o),n>1)for(var f=0;f<l.length;f++)l[f].length<=n||(function r(n,i,a,o,s){for(;o>a;){if(o-a>600){var l=o-a+1,u=i-a+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1);r(n,i,Math.max(a,Math.floor(i-u*f/l+h)),Math.min(o,Math.floor(i+(l-u)*f/l+h)),s)}var p=n[i],d=a,v=o;for(az(n,a,i),s(n[o],p)>0&&az(n,a,o);d<v;){for(az(n,d,v),d++,v--;0>s(n[d],p);)d++;for(;s(n[v],p)>0;)v--}0===s(n[a],p)?az(n,a,v):az(n,++v,o),v<=i&&(a=v+1),i<=v&&(o=v-1)}}(i=l[f],n,1,l[f].length-1||i.length-1,aB||aR),l[f]=l[f].slice(0,n));return l}function aB(r,n){return n.area-r.area}function aN(r,n,i){for(var a=i.patternDependencies,o=!1,s=0;s<n.length;s+=1){var l=n[s].paint.get(r+"-pattern");l.isConstant()||(o=!0);var u=l.constantOr(null);u&&(o=!0,a[u.to]=!0,a[u.from]=!0)}return o}function aj(r,n,i,a,o){for(var s=o.patternDependencies,l=0;l<n.length;l+=1){var u=n[l],c=u.paint.get(r+"-pattern").value;if("constant"!==c.kind){var f=c.evaluate({zoom:a-1},i,{},o.availableImages),h=c.evaluate({zoom:a},i,{},o.availableImages),p=c.evaluate({zoom:a+1},i,{},o.availableImages);f=f&&f.name?f.name:f,h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,s[f]=!0,s[h]=!0,s[p]=!0,i.patterns[u.id]={min:f,mid:h,max:p}}}return i}am.deviation=function(r,n,i,a){var o=n&&n.length,s=o?n[0]*i:r.length,l=Math.abs(aD(r,0,s,i));if(o)for(var u=0,c=n.length;u<c;u++){var f=n[u]*i,h=u<c-1?n[u+1]*i:r.length;l-=Math.abs(aD(r,f,h,i))}var p=0;for(u=0;u<a.length;u+=3){var d=a[u]*i,v=a[u+1]*i,g=a[u+2]*i;p+=Math.abs((r[d]-r[g])*(r[v+1]-r[d+1])-(r[d]-r[v])*(r[g+1]-r[d+1]))}return 0===l&&0===p?0:Math.abs((p-l)/l)},am.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},a=0,o=0;o<r.length;o++){for(var s=0;s<r[o].length;s++)for(var l=0;l<n;l++)i.vertices.push(r[o][s][l]);o>0&&(a+=r[o-1].length,i.holes.push(a))}return i},ay.default=am;var aU=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nX,this.indexArray=new n7,this.indexArray2=new ia,this.programConfigurations=new iq(r.layers,r.zoom),this.segments=new ib,this.segments2=new ib,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};aU.prototype.populate=function(r,n,i){this.hasPattern=aN("fill",this.layers,n);for(var a=this.layers[0].layout.get("fill-sort-key"),o=[],s=0;s<r.length;s+=1){var l=r[s],u=l.feature,c=l.id,f=l.index,h=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=iW(u,p);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),d,i)){var v=a?a.evaluate(d,{},i,n.availableImages):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:f,geometry:p?d.geometry:iY(u),patterns:{},sortKey:v};o.push(g)}}a&&o.sort(function(r,n){return r.sortKey-n.sortKey});for(var y=0;y<o.length;y+=1){var m=o[y],x=m.geometry,b=m.index,_=m.sourceLayerIndex;if(this.hasPattern){var w=aj("fill",this.layers,m,this.zoom,n);this.patternFeatures.push(w)}else this.addFeature(m,x,b,i,{});var T=r[b].feature;n.featureIndex.insert(T,x,b,_,this.index)}},aU.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},aU.prototype.addFeatures=function(r,n,i){for(var a=0,o=this.patternFeatures;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,n,i)}},aU.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},aU.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},aU.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ag),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},aU.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},aU.prototype.addFeature=function(r,n,i,a,o){for(var s=0,l=aF(n,500);s<l.length;s+=1){for(var u=l[s],c=0,f=0;f<u.length;f+=1)c+=u[f].length;for(var h=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),p=h.vertexLength,d=[],v=[],g=0;g<u.length;g+=1){var y=u[g];if(0!==y.length){y!==u[0]&&v.push(d.length/2);var m=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),x=m.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(x+y.length-1,x),d.push(y[0].x),d.push(y[0].y);for(var b=1;b<y.length;b++)this.layoutVertexArray.emplaceBack(y[b].x,y[b].y),this.indexArray2.emplaceBack(x+b-1,x+b),d.push(y[b].x),d.push(y[b].y);m.vertexLength+=y.length,m.primitiveLength+=y.length}}for(var _=ay(d,v),w=0;w<_.length;w+=3)this.indexArray.emplaceBack(p+_[w],p+_[w+1],p+_[w+2]);h.vertexLength+=c,h.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,o,a)},nn("FillBucket",aU,{omit:["layers","patternFeatures"]});var aV=new nU({"fill-sort-key":new nF(tP.layout_fill["fill-sort-key"])}),aH={paint:new nU({"fill-antialias":new nR(tP.paint_fill["fill-antialias"]),"fill-opacity":new nF(tP.paint_fill["fill-opacity"]),"fill-color":new nF(tP.paint_fill["fill-color"]),"fill-outline-color":new nF(tP.paint_fill["fill-outline-color"]),"fill-translate":new nR(tP.paint_fill["fill-translate"]),"fill-translate-anchor":new nR(tP.paint_fill["fill-translate-anchor"]),"fill-pattern":new nB(tP.paint_fill["fill-pattern"])}),layout:aV},aq=function(r){function n(n){r.call(this,n,aH)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.recalculate=function(n,i){r.prototype.recalculate.call(this,n,i);var a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},n.prototype.createBucket=function(r){return new aU(r)},n.prototype.queryRadius=function(){return i4(this.paint.get("fill-translate"))},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l){return i$(i6(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,l),a)},n.prototype.isTileClipped=function(){return!0},n}(nH),aG=nY([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;function aZ(r,n,i,a,o){this.properties={},this.extent=i,this.type=0,this._pbf=r,this._geometry=-1,this._keys=a,this._values=o,r.readFields(aY,this,n)}function aY(r,n,i){1==r?n.id=i.readVarint():2==r?function(r,n){for(var i=r.readVarint()+r.pos;r.pos<i;){var a=n._keys[r.readVarint()],o=n._values[r.readVarint()];n.properties[a]=o}}(i,n):3==r?n.type=i.readVarint():4==r&&(n._geometry=i.pos)}function aW(r,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(aX,this,n),this.length=this._features.length}function aX(r,n,i){15===r?n.version=i.readVarint():1===r?n.name=i.readString():5===r?n.extent=i.readVarint():2===r?n._features.push(i.pos):3===r?n._keys.push(i.readString()):4===r&&n._values.push(function(r){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;){var a=r.readVarint()>>3;n=1===a?r.readString():2===a?r.readFloat():3===a?r.readDouble():4===a?r.readVarint64():5===a?r.readVarint():6===a?r.readSVarint():7===a?r.readBoolean():null}return n}(i))}function aJ(r,n,i){if(3===r){var a=new aW(i,i.readVarint()+i.pos);a.length&&(n[a.name]=a)}}aZ.types=["Unknown","Point","LineString","Polygon"],aZ.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var n,i=r.readVarint()+r.pos,a=1,o=0,s=0,l=0,c=[];r.pos<i;){if(o<=0){var f=r.readVarint();a=7&f,o=f>>3}if(o--,1===a||2===a)s+=r.readSVarint(),l+=r.readSVarint(),1===a&&(n&&c.push(n),n=[]),n.push(new u(s,l));else{if(7!==a)throw Error("unknown command "+a);n&&n.push(n[0].clone())}}return n&&c.push(n),c},aZ.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var n=r.readVarint()+r.pos,i=1,a=0,o=0,s=0,l=1/0,u=-1/0,c=1/0,f=-1/0;r.pos<n;){if(a<=0){var h=r.readVarint();i=7&h,a=h>>3}if(a--,1===i||2===i)(o+=r.readSVarint())<l&&(l=o),o>u&&(u=o),(s+=r.readSVarint())<c&&(c=s),s>f&&(f=s);else if(7!==i)throw Error("unknown command "+i)}return[l,c,u,f]},aZ.prototype.toGeoJSON=function(r,n,i){var a,o,s=this.extent*Math.pow(2,i),l=this.extent*r,u=this.extent*n,c=this.loadGeometry(),f=aZ.types[this.type];function h(r){for(var n=0;n<r.length;n++){var i=r[n],a=180-360*(i.y+u)/s;r[n]=[360*(i.x+l)/s-180,360/Math.PI*Math.atan(Math.exp(a*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(a=0;a<c.length;a++)p[a]=c[a][0];h(c=p);break;case 2:for(a=0;a<c.length;a++)h(c[a]);break;case 3:for(c=function(r){var n=r.length;if(n<=1)return[r];for(var i,a,o=[],s=0;s<n;s++){var l=function(r){for(var n,i,a=0,o=0,s=r.length,l=s-1;o<s;l=o++)n=r[o],a+=((i=r[l]).x-n.x)*(n.y+i.y);return a}(r[s]);0!==l&&(void 0===a&&(a=l<0),a===l<0?(i&&o.push(i),i=[r[s]]):i.push(r[s]))}return i&&o.push(i),o}(c),a=0;a<c.length;a++)for(o=0;o<c[a].length;o++)h(c[a][o])}1===c.length?c=c[0]:f="Multi"+f;var d={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(d.id=this.id),d},aW.prototype.feature=function(r){if(r<0||r>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[r];var n=this._pbf.readVarint()+this._pbf.pos;return new aZ(this._pbf,n,this.extent,this._keys,this._values)};var aK={VectorTile:function(r,n){this.layers=r.readFields(aJ,{},n)},VectorTileFeature:aZ,VectorTileLayer:aW},a$=aK.VectorTileFeature.types;function aQ(r,n,i,a,o,s,l,u){r.emplaceBack(n,i,2*Math.floor(8192*a)+l,16384*o,16384*s,Math.round(u))}var a0=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new nK,this.indexArray=new n7,this.programConfigurations=new iq(r.layers,r.zoom),this.segments=new ib,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};a0.prototype.populate=function(r,n,i){this.features=[],this.hasPattern=aN("fill-extrusion",this.layers,n);for(var a=0;a<r.length;a+=1){var o=r[a],s=o.feature,l=o.id,u=o.index,c=o.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,h=iW(s,f);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),h,i)){var p={id:l,sourceLayerIndex:c,index:u,geometry:f?h.geometry:iY(s),properties:s.properties,type:s.type,patterns:{}};this.hasPattern?this.features.push(aj("fill-extrusion",this.layers,p,this.zoom,n)):this.addFeature(p,p.geometry,u,i,{}),n.featureIndex.insert(s,p.geometry,u,c,this.index,!0)}}},a0.prototype.addFeatures=function(r,n,i){for(var a=0,o=this.features;a<o.length;a+=1){var s=o[a],l=s.geometry;this.addFeature(s,l,s.index,n,i)}},a0.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},a0.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},a0.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},a0.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,aG),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},a0.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},a0.prototype.addFeature=function(r,n,i,a,o){for(var s=0,l=aF(n,500);s<l.length;s+=1){for(var u=l[s],c=0,f=0;f<u.length;f+=1)c+=u[f].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0;p<u.length;p+=1){var d=u[p];if(0!==d.length&&!(d.every(function(r){return r.x<0})||d.every(function(r){return r.x>8192})||d.every(function(r){return r.y<0})||d.every(function(r){return r.y>8192})))for(var v=0,g=0;g<d.length;g++){var y=d[g];if(g>=1){var m=d[g-1];if((y.x!==m.x||!(y.x<0)&&!(y.x>8192))&&(y.y!==m.y||!(y.y<0)&&!(y.y>8192))){h.vertexLength+4>ib.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var x=y.sub(m)._perp()._unit(),b=m.dist(y);v+b>32768&&(v=0),aQ(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,0,v),aQ(this.layoutVertexArray,y.x,y.y,x.x,x.y,0,1,v),v+=b,aQ(this.layoutVertexArray,m.x,m.y,x.x,x.y,0,0,v),aQ(this.layoutVertexArray,m.x,m.y,x.x,x.y,0,1,v);var _=h.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+c>ib.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray)),"Polygon"===a$[r.type]){for(var w=[],T=[],k=h.vertexLength,A=0;A<u.length;A+=1){var M=u[A];if(0!==M.length){M!==u[0]&&T.push(w.length/2);for(var S=0;S<M.length;S++){var E=M[S];aQ(this.layoutVertexArray,E.x,E.y,0,0,1,1,0),w.push(E.x),w.push(E.y)}}}for(var L=ay(w,T),C=0;C<L.length;C+=3)this.indexArray.emplaceBack(k+L[C],k+L[C+2],k+L[C+1]);h.primitiveLength+=L.length/3,h.vertexLength+=c}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,o,a)},nn("FillExtrusionBucket",a0,{omit:["layers","features"]});var a1={paint:new nU({"fill-extrusion-opacity":new nR(tP["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nF(tP["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nR(tP["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nR(tP["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nB(tP["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nF(tP["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nF(tP["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nR(tP["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},a2=function(r){function n(n){r.call(this,n,a1)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.createBucket=function(r){return new a0(r)},n.prototype.queryRadius=function(){return i4(this.paint.get("fill-extrusion-translate"))},n.prototype.is3D=function(){return!0},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l,c){var f=i6(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,l),h=this.paint.get("fill-extrusion-height").evaluate(n,i),p=this.paint.get("fill-extrusion-base").evaluate(n,i),d=function(r,n,i,a){for(var o=[],s=0;s<r.length;s+=1){var l=r[s],c=[l.x,l.y,0,1];ar(c,c,n),o.push(new u(c[0]/c[3],c[1]/c[3]))}return o}(f,c,0,0),v=function(r,n,i,a){for(var o=[],s=[],l=a[8]*n,c=a[9]*n,f=a[10]*n,h=a[11]*n,p=a[8]*i,d=a[9]*i,v=a[10]*i,g=a[11]*i,y=0;y<r.length;y+=1){for(var m=[],x=[],b=0,_=r[y];b<_.length;b+=1){var w=_[b],T=w.x,k=w.y,A=a[0]*T+a[4]*k+a[12],M=a[1]*T+a[5]*k+a[13],S=a[2]*T+a[6]*k+a[14],E=a[3]*T+a[7]*k+a[15],L=S+f,C=E+h,O=A+p,P=M+d,I=S+v,D=E+g,z=new u((A+l)/C,(M+c)/C);z.z=L/C,m.push(z);var R=new u(O/D,P/D);R.z=I/D,x.push(R)}o.push(m),s.push(x)}return[o,s]}(a,p,h,c);return function(r,n,i){var a=1/0;i$(i,n)&&(a=a5(i,n[0]));for(var o=0;o<n.length;o++)for(var s=n[o],l=r[o],u=0;u<s.length-1;u++){var c=s[u],f=s[u+1],h=l[u],p=[c,f,l[u+1],h,c];iK(i,p)&&(a=Math.min(a,a5(i,p)))}return a!==1/0&&a}(v[0],v[1],d)},n}(nH);function a3(r,n){return r.x*n.x+r.y*n.y}function a5(r,n){if(1===r.length){for(var i,a=0,o=n[a++];!i||o.equals(i);)if(!(i=n[a++]))return 1/0;for(;a<n.length;a++){var s=n[a],l=r[0],u=i.sub(o),c=s.sub(o),f=l.sub(o),h=a3(u,u),p=a3(u,c),d=a3(c,c),v=a3(f,u),g=a3(f,c),y=h*d-p*p,m=(d*v-p*g)/y,x=(h*g-p*v)/y,b=1-m-x,_=o.z*b+i.z*m+s.z*x;if(isFinite(_))return _}return 1/0}for(var w=1/0,T=0;T<n.length;T+=1)w=Math.min(w,n[T].z);return w}var a4=nY([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,a6=nY([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,a8=aK.VectorTileFeature.types,a7=Math.cos(Math.PI/180*37.5),a9=function(r){var n=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(r){n.gradients[r.id]={}}),this.layoutVertexArray=new n$,this.layoutVertexArray2=new nQ,this.indexArray=new n7,this.programConfigurations=new iq(r.layers,r.zoom),this.segments=new ib,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};a9.prototype.populate=function(r,n,i){this.hasPattern=aN("line",this.layers,n);for(var a=this.layers[0].layout.get("line-sort-key"),o=[],s=0;s<r.length;s+=1){var l=r[s],u=l.feature,c=l.id,f=l.index,h=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=iW(u,p);if(this.layers[0]._featureFilter.filter(new nS(this.zoom),d,i)){var v=a?a.evaluate(d,{},i):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:f,geometry:p?d.geometry:iY(u),patterns:{},sortKey:v};o.push(g)}}a&&o.sort(function(r,n){return r.sortKey-n.sortKey});for(var y=0;y<o.length;y+=1){var m=o[y],x=m.geometry,b=m.index,_=m.sourceLayerIndex;if(this.hasPattern){var w=aj("line",this.layers,m,this.zoom,n);this.patternFeatures.push(w)}else this.addFeature(m,x,b,i,{});var T=r[b].feature;n.featureIndex.insert(T,x,b,_,this.index)}},a9.prototype.update=function(r,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,n,this.stateDependentLayers,i)},a9.prototype.addFeatures=function(r,n,i){for(var a=0,o=this.patternFeatures;a<o.length;a+=1){var s=o[a];this.addFeature(s,s.geometry,s.index,n,i)}},a9.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},a9.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},a9.prototype.upload=function(r){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,a6)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,a4),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},a9.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},a9.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},a9.prototype.addFeature=function(r,n,i,a,o){var s=this.layers[0].layout,l=s.get("line-join").evaluate(r,{}),u=s.get("line-cap"),c=s.get("line-miter-limit"),f=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var h=0;h<n.length;h+=1){var p=n[h];this.addLine(p,r,l,u,c,f)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,i,o,a)},a9.prototype.addLine=function(r,n,i,a,o,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var l=0;l<r.length-1;l++)this.totalDistance+=r[l].dist(r[l+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var u="Polygon"===a8[n.type],c=r.length;c>=2&&r[c-1].equals(r[c-2]);)c--;for(var f=0;f<c-1&&r[f].equals(r[f+1]);)f++;if(!(c<(u?3:2))){"bevel"===i&&(o=1.05);var h,p=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray),v=void 0,g=void 0,y=void 0,m=void 0;this.e1=this.e2=-1,u&&(h=r[c-2],m=r[f].sub(h)._unit()._perp());for(var x=f;x<c;x++)if(!(g=x===c-1?u?r[f+1]:void 0:r[x+1])||!r[x].equals(g)){m&&(y=m),h&&(v=h),h=r[x],m=g?g.sub(h)._unit()._perp():y;var b=(y=y||m).add(m);0===b.x&&0===b.y||b._unit();var _=y.x*m.x+y.y*m.y,w=b.x*m.x+b.y*m.y,T=0!==w?1/w:1/0,k=2*Math.sqrt(2-2*w),A=w<a7&&v&&g,M=y.x*m.y-y.y*m.x>0;if(A&&x>f){var S=h.dist(v);if(S>2*p){var E=h.sub(h.sub(v)._mult(p/S)._round());this.updateDistance(v,E),this.addCurrentVertex(E,y,0,0,d),v=E}}var L=v&&g,C=L?i:u?"butt":a;if(L&&"round"===C&&(T<s?C="miter":T<=2&&(C="fakeround")),"miter"===C&&T>o&&(C="bevel"),"bevel"===C&&(T>2&&(C="flipbevel"),T<o&&(C="miter")),v&&this.updateDistance(v,h),"miter"===C)b._mult(T),this.addCurrentVertex(h,b,0,0,d);else if("flipbevel"===C){if(T>100)b=m.mult(-1);else{var O=T*y.add(m).mag()/y.sub(m).mag();b._perp()._mult(O*(M?-1:1))}this.addCurrentVertex(h,b,0,0,d),this.addCurrentVertex(h,b.mult(-1),0,0,d)}else if("bevel"===C||"fakeround"===C){var P=-Math.sqrt(T*T-1),I=M?P:0,D=M?0:P;if(v&&this.addCurrentVertex(h,y,I,D,d),"fakeround"===C)for(var z=Math.round(180*k/Math.PI/20),R=1;R<z;R++){var F=R/z;if(.5!==F){var B=F-.5;F+=F*B*(F-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*B*B+(.848013+_*(.215638*_-1.06021)))}var N=m.sub(y)._mult(F)._add(y)._unit()._mult(M?-1:1);this.addHalfVertex(h,N.x,N.y,!1,M,0,d)}g&&this.addCurrentVertex(h,m,-I,-D,d)}else if("butt"===C)this.addCurrentVertex(h,b,0,0,d);else if("square"===C){var j=v?1:-1;this.addCurrentVertex(h,b,j,j,d)}else"round"===C&&(v&&(this.addCurrentVertex(h,y,0,0,d),this.addCurrentVertex(h,y,1,1,d,!0)),g&&(this.addCurrentVertex(h,m,-1,-1,d,!0),this.addCurrentVertex(h,m,0,0,d)));if(A&&x<c-1){var U=h.dist(g);if(U>2*p){var V=h.add(g.sub(h)._mult(p/U)._round());this.updateDistance(h,V),this.addCurrentVertex(V,m,0,0,d),h=V}}}}},a9.prototype.addCurrentVertex=function(r,n,i,a,o,s){void 0===s&&(s=!1);var l=n.x+n.y*i,u=n.y-n.x*i,c=-n.x+n.y*a,f=-n.y-n.x*a;this.addHalfVertex(r,l,u,s,!1,i,o),this.addHalfVertex(r,c,f,s,!0,-a,o),this.distance>16384&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(r,n,i,a,o,s))},a9.prototype.addHalfVertex=function(r,n,i,a,o,s,l){var u=r.x,c=r.y,f=.5*(this.lineClips?32767*this.scaledDistance:this.scaledDistance);if(this.layoutVertexArray.emplaceBack((u<<1)+(a?1:0),(c<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===s?0:s<0?-1:1)|(63&f)<<2,f>>6),this.lineClips){var h=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(h,this.lineClipsArray.length)}var p=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,p),l.primitiveLength++),o?this.e2=p:this.e1=p},a9.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},a9.prototype.updateDistance=function(r,n){this.distance+=r.dist(n),this.updateScaledDistance()},nn("LineBucket",a9,{omit:["layers","patternFeatures"]});var ot=new nU({"line-cap":new nR(tP.layout_line["line-cap"]),"line-join":new nF(tP.layout_line["line-join"]),"line-miter-limit":new nR(tP.layout_line["line-miter-limit"]),"line-round-limit":new nR(tP.layout_line["line-round-limit"]),"line-sort-key":new nF(tP.layout_line["line-sort-key"])}),oe={paint:new nU({"line-opacity":new nF(tP.paint_line["line-opacity"]),"line-color":new nF(tP.paint_line["line-color"]),"line-translate":new nR(tP.paint_line["line-translate"]),"line-translate-anchor":new nR(tP.paint_line["line-translate-anchor"]),"line-width":new nF(tP.paint_line["line-width"]),"line-gap-width":new nF(tP.paint_line["line-gap-width"]),"line-offset":new nF(tP.paint_line["line-offset"]),"line-blur":new nF(tP.paint_line["line-blur"]),"line-dasharray":new nN(tP.paint_line["line-dasharray"]),"line-pattern":new nB(tP.paint_line["line-pattern"]),"line-gradient":new nj(tP.paint_line["line-gradient"])}),layout:ot},or=new(function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.possiblyEvaluate=function(n,i){return i=new nS(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),r.prototype.possiblyEvaluate.call(this,n,i)},n.prototype.evaluate=function(n,i,a,o){return i=v({},i,{zoom:Math.floor(i.zoom)}),r.prototype.evaluate.call(this,n,i,a,o)},n}(nF))(oe.paint.properties["line-width"].specification);or.useIntegerZoom=!0;var on=function(r){function n(n){r.call(this,n,oe),this.gradientVersion=0}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._handleSpecialPaintPropertyUpdate=function(r){if("line-gradient"===r){var n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression.expression instanceof eO,this.gradientVersion=(this.gradientVersion+1)%9007199254740991}},n.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},n.prototype.recalculate=function(n,i){r.prototype.recalculate.call(this,n,i),this.paint._values["line-floorwidth"]=or.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},n.prototype.createBucket=function(r){return new a9(r)},n.prototype.queryRadius=function(r){var n,i;return n=i5("line-width",this,r),((i=i5("line-gap-width",this,r))>0?i+2*n:n)/2+Math.abs(i5("line-offset",this,r))+i4(this.paint.get("line-translate"))},n.prototype.queryIntersectsFeature=function(r,n,i,a,o,s,l){var c,f,h=i6(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,l),p=l/2*(c=this.paint.get("line-width").evaluate(n,i),(f=this.paint.get("line-gap-width").evaluate(n,i))>0?f+2*c:c),d=this.paint.get("line-offset").evaluate(n,i);return d&&(a=function(r,n){for(var i=[],a=new u(0,0),o=0;o<r.length;o++){for(var s=r[o],l=[],c=0;c<s.length;c++){var f=s[c-1],h=s[c],p=s[c+1],d=0===c?a:h.sub(f)._unit()._perp(),v=c===s.length-1?a:p.sub(h)._unit()._perp(),g=d._add(v)._unit(),y=g.x*v.x+g.y*v.y;g._mult(1/y),l.push(g._mult(n)._add(h))}i.push(l)}return i}(a,d*l)),function(r,n,i){for(var a=0;a<n.length;a++){var o=n[a];if(r.length>=3){for(var s=0;s<o.length;s++)if(i3(r,o[s]))return!0}if(function(r,n,i){if(r.length>1){if(iQ(r,n))return!0;for(var a=0;a<n.length;a++)if(i0(n[a],r,i))return!0}for(var o=0;o<r.length;o++)if(i0(r[o],n,i))return!0;return!1}(r,o,i))return!0}return!1}(h,a,p)},n.prototype.isTileClipped=function(){return!0},n}(nH),oi=nY([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oa=nY([{name:"a_projected_pos",components:3,type:"Float32"}],4),oo=(nY([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),nY([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),os=(nY([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),nY([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ol=nY([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);nY([{name:"triangle",components:3,type:"Uint16"}]),nY([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),nY([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),nY([{type:"Float32",name:"offsetX"}]),nY([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ou={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","\xa2":"￠","\xa3":"￡","\xa5":"￥","\xa6":"￤","\xac":"￢","\xaf":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},oc=function(r,n,i,a,o){var s,l,u=8*o-a-1,c=(1<<u)-1,f=c>>1,h=-7,p=i?o-1:0,d=i?-1:1,v=r[n+p];for(p+=d,s=v&(1<<-h)-1,v>>=-h,h+=u;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===c)return l?NaN:1/0*(v?-1:1);l+=Math.pow(2,a),s-=f}return(v?-1:1)*l*Math.pow(2,s-a)},of=function(r,n,i,a,o,s){var l,u,c,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,v=a?0:s-1,g=a?1:-1,y=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(u=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-l))<1&&(l--,c*=2),(n+=l+p>=1?d/c:d*Math.pow(2,1-p))*c>=2&&(l++,c/=2),l+p>=h?(u=0,l=h):l+p>=1?(u=(n*c-1)*Math.pow(2,o),l+=p):(u=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+v]=255&u,v+=g,u/=256,o-=8);for(l=l<<o|u,f+=o;f>0;r[i+v]=255&l,v+=g,l/=256,f-=8);r[i+v-g]|=128*y};function oh(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}oh.Varint=0,oh.Fixed64=1,oh.Bytes=2,oh.Fixed32=5;var op="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function od(r){return r.type===oh.Bytes?r.readVarint()+r.pos:r.pos+1}function ov(r,n,i){var a=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));i.realloc(a);for(var o=i.pos-1;o>=r;o--)i.buf[o+a]=i.buf[o]}function og(r,n){for(var i=0;i<r.length;i++)n.writeVarint(r[i])}function oy(r,n){for(var i=0;i<r.length;i++)n.writeSVarint(r[i])}function om(r,n){for(var i=0;i<r.length;i++)n.writeFloat(r[i])}function ox(r,n){for(var i=0;i<r.length;i++)n.writeDouble(r[i])}function ob(r,n){for(var i=0;i<r.length;i++)n.writeBoolean(r[i])}function o_(r,n){for(var i=0;i<r.length;i++)n.writeFixed32(r[i])}function ow(r,n){for(var i=0;i<r.length;i++)n.writeSFixed32(r[i])}function oT(r,n){for(var i=0;i<r.length;i++)n.writeFixed64(r[i])}function ok(r,n){for(var i=0;i<r.length;i++)n.writeSFixed64(r[i])}function oA(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+16777216*r[n+3]}function oM(r,n,i){r[i]=n,r[i+1]=n>>>8,r[i+2]=n>>>16,r[i+3]=n>>>24}function oS(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16)+(r[n+3]<<24)}function oE(r,n,i){1===r&&i.readMessage(oL,n)}function oL(r,n,i){if(3===r){var a=i.readMessage(oC,{}),o=a.id,s=a.bitmap,l=a.width,u=a.height,c=a.left,f=a.top,h=a.advance;n.push({id:o,bitmap:new au({width:l+6,height:u+6},s),metrics:{width:l,height:u,left:c,top:f,advance:h}})}}function oC(r,n,i){1===r?n.id=i.readVarint():2===r?n.bitmap=i.readBytes():3===r?n.width=i.readVarint():4===r?n.height=i.readVarint():5===r?n.left=i.readSVarint():6===r?n.top=i.readSVarint():7===r&&(n.advance=i.readVarint())}function oO(r){for(var n=0,i=0,a=0;a<r.length;a+=1){var o=r[a];n+=o.w*o.h,i=Math.max(i,o.w)}r.sort(function(r,n){return n.h-r.h});for(var s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),i),h:1/0}],l=0,u=0,c=0;c<r.length;c+=1)for(var f=r[c],h=s.length-1;h>=0;h--){var p=s[h];if(!(f.w>p.w||f.h>p.h)){if(f.x=p.x,f.y=p.y,u=Math.max(u,f.y+f.h),l=Math.max(l,f.x+f.w),f.w===p.w&&f.h===p.h){var d=s.pop();h<s.length&&(s[h]=d)}else f.h===p.h?(p.x+=f.w,p.w-=f.w):(f.w===p.w||s.push({x:p.x+f.w,y:p.y,w:p.w-f.w,h:f.h}),p.y+=f.h,p.h-=f.h);break}}return{w:l,h:u,fill:n/(l*u)||0}}oh.prototype={destroy:function(){this.buf=null},readFields:function(r,n,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),o=a>>3,s=this.pos;this.type=7&a,r(o,n,this),this.pos===s&&this.skip(a)}return n},readMessage:function(r,n){return this.readFields(r,n,this.readVarint()+this.pos)},readFixed32:function(){var r=oA(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=oS(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=oA(this.buf,this.pos)+4294967296*oA(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=oA(this.buf,this.pos)+4294967296*oS(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=oc(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=oc(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var n,i,a=this.buf;return n=127&(i=a[this.pos++]),i<128?n:(n|=(127&(i=a[this.pos++]))<<7,i<128?n:(n|=(127&(i=a[this.pos++]))<<14,i<128?n:(n|=(127&(i=a[this.pos++]))<<21,i<128?n:function(r,n,i){var a,o,s,l=i.buf;if(o=(112&(s=l[i.pos++]))>>4,s<128||(o|=(127&(s=l[i.pos++]))<<3,s<128)||(o|=(127&(s=l[i.pos++]))<<10,s<128)||(o|=(127&(s=l[i.pos++]))<<17,s<128)||(o|=(127&(s=l[i.pos++]))<<24,s<128)||(o|=(1&(s=l[i.pos++]))<<31,s<128))return a=o,n?4294967296*a+(r>>>0):4294967296*(a>>>0)+(r>>>0);throw Error("Expected varint not more than 10 bytes")}(n|=(15&(i=a[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?-((r+1)/2):r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r,n=this.readVarint()+this.pos,i=this.pos;return this.pos=n,n-i>=12&&op?(r=this.buf,op.decode(r.subarray(i,n))):function(r,n,i){for(var a="",o=n;o<i;){var s,l,u,c=r[o],f=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h>i)break;1===h?c<128&&(f=c):2===h?128==(192&(s=r[o+1]))&&(f=(31&c)<<6|63&s)<=127&&(f=null):3===h?(s=r[o+1],l=r[o+2],128==(192&s)&&128==(192&l)&&((f=(15&c)<<12|(63&s)<<6|63&l)<=2047||f>=55296&&f<=57343)&&(f=null)):4===h&&(s=r[o+1],l=r[o+2],u=r[o+3],128==(192&s)&&128==(192&l)&&128==(192&u)&&((f=(15&c)<<18|(63&s)<<12|(63&l)<<6|63&u)<=65535||f>=1114112)&&(f=null)),null===f?(f=65533,h=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|1023&f),a+=String.fromCharCode(f),o+=h}return a}(this.buf,i,n)},readBytes:function(){var r=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,r);return this.pos=r,n},readPackedVarint:function(r,n){if(this.type!==oh.Bytes)return r.push(this.readVarint(n));var i=od(this);for(r=r||[];this.pos<i;)r.push(this.readVarint(n));return r},readPackedSVarint:function(r){if(this.type!==oh.Bytes)return r.push(this.readSVarint());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==oh.Bytes)return r.push(this.readBoolean());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==oh.Bytes)return r.push(this.readFloat());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==oh.Bytes)return r.push(this.readDouble());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==oh.Bytes)return r.push(this.readFixed32());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==oh.Bytes)return r.push(this.readSFixed32());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==oh.Bytes)return r.push(this.readFixed64());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==oh.Bytes)return r.push(this.readSFixed64());var n=od(this);for(r=r||[];this.pos<n;)r.push(this.readSFixed64());return r},skip:function(r){var n=7&r;if(n===oh.Varint)for(;this.buf[this.pos++]>127;);else if(n===oh.Bytes)this.pos=this.readVarint()+this.pos;else if(n===oh.Fixed32)this.pos+=4;else{if(n!==oh.Fixed64)throw Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(r,n){this.writeVarint(r<<3|n)},realloc:function(r){for(var n=this.length||16;n<this.pos+r;)n*=2;if(n!==this.length){var i=new Uint8Array(n);i.set(this.buf),this.buf=i,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),oM(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),oM(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),oM(this.buf,-1&r,this.pos),oM(this.buf,Math.floor(23283064365386963e-26*r),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),oM(this.buf,-1&r,this.pos),oM(this.buf,Math.floor(23283064365386963e-26*r),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(r,n){var i,a,o,s,l;if(r>=0?(i=r%4294967296|0,a=r/4294967296|0):(a=~(-r/4294967296),4294967295^(i=~(-r%4294967296))?i=i+1|0:(i=0,a=a+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");n.realloc(10),o=i,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos++]=127&o|128,o>>>=7,n.buf[n.pos]=127&o,l=(7&(s=a))<<4,n.buf[n.pos++]|=l|((s>>>=3)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s|((s>>>=7)?128:0),s&&(n.buf[n.pos++]=127&s)))))}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?-(2*r)-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var n=this.pos;this.pos=function(r,n,i){for(var a,o,s=0;s<n.length;s++){if((a=n.charCodeAt(s))>55295&&a<57344){if(!o){a>56319||s+1===n.length?(r[i++]=239,r[i++]=191,r[i++]=189):o=a;continue}if(a<56320){r[i++]=239,r[i++]=191,r[i++]=189,o=a;continue}a=o-55296<<10|a-56320|65536,o=null}else o&&(r[i++]=239,r[i++]=191,r[i++]=189,o=null);a<128?r[i++]=a:(a<2048?r[i++]=a>>6|192:(a<65536?r[i++]=a>>12|224:(r[i++]=a>>18|240,r[i++]=a>>12&63|128),r[i++]=a>>6&63|128),r[i++]=63&a|128)}return i}(this.buf,r,this.pos);var i=this.pos-n;i>=128&&ov(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeFloat:function(r){this.realloc(4),of(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),of(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var n=r.length;this.writeVarint(n),this.realloc(n);for(var i=0;i<n;i++)this.buf[this.pos++]=r[i]},writeRawMessage:function(r,n){this.pos++;var i=this.pos;r(n,this);var a=this.pos-i;a>=128&&ov(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(r,n,i){this.writeTag(r,oh.Bytes),this.writeRawMessage(n,i)},writePackedVarint:function(r,n){n.length&&this.writeMessage(r,og,n)},writePackedSVarint:function(r,n){n.length&&this.writeMessage(r,oy,n)},writePackedBoolean:function(r,n){n.length&&this.writeMessage(r,ob,n)},writePackedFloat:function(r,n){n.length&&this.writeMessage(r,om,n)},writePackedDouble:function(r,n){n.length&&this.writeMessage(r,ox,n)},writePackedFixed32:function(r,n){n.length&&this.writeMessage(r,o_,n)},writePackedSFixed32:function(r,n){n.length&&this.writeMessage(r,ow,n)},writePackedFixed64:function(r,n){n.length&&this.writeMessage(r,oT,n)},writePackedSFixed64:function(r,n){n.length&&this.writeMessage(r,ok,n)},writeBytesField:function(r,n){this.writeTag(r,oh.Bytes),this.writeBytes(n)},writeFixed32Field:function(r,n){this.writeTag(r,oh.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(r,n){this.writeTag(r,oh.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(r,n){this.writeTag(r,oh.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(r,n){this.writeTag(r,oh.Fixed64),this.writeSFixed64(n)},writeVarintField:function(r,n){this.writeTag(r,oh.Varint),this.writeVarint(n)},writeSVarintField:function(r,n){this.writeTag(r,oh.Varint),this.writeSVarint(n)},writeStringField:function(r,n){this.writeTag(r,oh.Bytes),this.writeString(n)},writeFloatField:function(r,n){this.writeTag(r,oh.Fixed32),this.writeFloat(n)},writeDoubleField:function(r,n){this.writeTag(r,oh.Fixed64),this.writeDouble(n)},writeBooleanField:function(r,n){this.writeVarintField(r,!!n)}};var oP=function(r,n){var i=n.pixelRatio,a=n.version,o=n.stretchX,s=n.stretchY,l=n.content;this.paddedRect=r,this.pixelRatio=i,this.stretchX=o,this.stretchY=s,this.content=l,this.version=a},oI={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};oI.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},oI.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},oI.tlbr.get=function(){return this.tl.concat(this.br)},oI.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(oP.prototype,oI);var oD=function(r,n){var i={},a={};this.haveRenderCallbacks=[];var o=[];this.addImages(r,i,o),this.addImages(n,a,o);var s=oO(o),l=new ac({width:s.w||1,height:s.h||1});for(var u in r){var c=r[u],f=i[u].paddedRect;ac.copy(c.data,l,{x:0,y:0},{x:f.x+1,y:f.y+1},c.data)}for(var h in n){var p=n[h],d=a[h].paddedRect,v=d.x+1,g=d.y+1,y=p.data.width,m=p.data.height;ac.copy(p.data,l,{x:0,y:0},{x:v,y:g},p.data),ac.copy(p.data,l,{x:0,y:m-1},{x:v,y:g-1},{width:y,height:1}),ac.copy(p.data,l,{x:0,y:0},{x:v,y:g+m},{width:y,height:1}),ac.copy(p.data,l,{x:y-1,y:0},{x:v-1,y:g},{width:1,height:m}),ac.copy(p.data,l,{x:0,y:0},{x:v+y,y:g},{width:1,height:m})}this.image=l,this.iconPositions=i,this.patternPositions=a};oD.prototype.addImages=function(r,n,i){for(var a in r){var o=r[a],s={x:0,y:0,w:o.data.width+2,h:o.data.height+2};i.push(s),n[a]=new oP(s,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(a)}},oD.prototype.patchUpdatedImages=function(r,n){for(var i in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[i],r.getImage(i),n),this.patchUpdatedImage(this.patternPositions[i],r.getImage(i),n)},oD.prototype.patchUpdatedImage=function(r,n,i){if(r&&n&&r.version!==n.version){r.version=n.version;var a=r.tl,o=a[0],s=a[1];i.update(n.data,void 0,{x:o,y:s})}},nn("ImagePosition",oP),nn("ImageAtlas",oD);var oz={horizontal:1,vertical:2,horizontalOnly:3},oR=function(){this.scale=1,this.fontStack="",this.imageName=null};oR.forText=function(r,n){var i=new oR;return i.scale=r||1,i.fontStack=n,i},oR.forImage=function(r){var n=new oR;return n.imageName=r,n};var oF=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function oB(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y){var m,x=oF.fromFeature(r,o);p===oz.vertical&&x.verticalizePunctuation();var b=nM.processBidirectionalText,_=nM.processStyledBidirectionalText;if(b&&1===x.sections.length){m=[];for(var w=0,T=b(x.toString(),oq(x,f,s,n,a,v,g));w<T.length;w+=1){var k=T[w],A=new oF;A.text=k,A.sections=x.sections;for(var M=0;M<k.length;M++)A.sectionIndex.push(0);m.push(A)}}else if(_){m=[];for(var S=0,E=_(x.text,x.sectionIndex,oq(x,f,s,n,a,v,g));S<E.length;S+=1){var L=E[S],C=new oF;C.text=L[0],C.sectionIndex=L[1],C.sections=x.sections,m.push(C)}}else m=function(r,n){for(var i=[],a=r.text,o=0,s=0;s<n.length;s+=1){var l=n[s];i.push(r.substring(o,l)),o=l}return o<a.length&&i.push(r.substring(o,a.length)),i}(x,oq(x,f,s,n,a,v,g));var O=[],P={positionedLines:O,text:x.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(r,n,i,a,o,s,l,u,c,f,h,p){for(var d=0,v=-17,g=0,y=0,m="right"===u?1:"left"===u?0:.5,x=0,b=0;b<o.length;b+=1){var _=o[b];_.trim();var w=_.getMaxScale(),T=(w-1)*24,k={positionedGlyphs:[],lineOffset:0};r.positionedLines[x]=k;var A=k.positionedGlyphs,M=0;if(_.length()){for(var S=0;S<_.length();S++){var E=_.getSection(S),L=_.getSectionIndex(S),C=_.getCharCode(S),O=0,P=null,I=null,D=null,z=24,R=!(c===oz.horizontal||!h&&!nh(C)||h&&(oN[C]||nc.Arabic(C)||nc["Arabic Supplement"](C)||nc["Arabic Extended-A"](C)||nc["Arabic Presentation Forms-A"](C)||nc["Arabic Presentation Forms-B"](C)));if(E.imageName){var F=a[E.imageName];if(!F)continue;D=E.imageName,r.iconsInText=r.iconsInText||!0,I=F.paddedRect;var B=F.displaySize;E.scale=24*E.scale/p,P={width:B[0],height:B[1],left:1,top:-3,advance:R?B[1]:B[0]},O=T+(24-B[1]*E.scale),z=P.advance;var N=R?B[0]*E.scale-24*w:B[1]*E.scale-24*w;N>0&&N>M&&(M=N)}else{var j=i[E.fontStack],U=j&&j[C];if(U&&U.rect)I=U.rect,P=U.metrics;else{var V=n[E.fontStack],H=V&&V[C];if(!H)continue;P=H.metrics}O=(w-E.scale)*24}R?(r.verticalizable=!0,A.push({glyph:C,imageName:D,x:d,y:v+O,vertical:R,scale:E.scale,fontStack:E.fontStack,sectionIndex:L,metrics:P,rect:I}),d+=z*E.scale+f):(A.push({glyph:C,imageName:D,x:d,y:v+O,vertical:R,scale:E.scale,fontStack:E.fontStack,sectionIndex:L,metrics:P,rect:I}),d+=P.advance*E.scale+f)}0!==A.length&&(g=Math.max(d-f,g),function(r,n,i,a,o){if(a||o)for(var s=r[i],l=s.metrics.advance*s.scale,u=(r[i].x+l)*a,c=0;c<=i;c++)r[c].x-=u,r[c].y+=o}(A,0,A.length-1,m,M)),d=0;var q=s*w+M;k.lineOffset=Math.max(M,T),v+=q,y=Math.max(q,y),++x}else v+=s,++x}var G=v- -17,Z=oG(l),Y=Z.horizontalAlign,W=Z.verticalAlign;(function(r,n,i,a,o,s,l,u,c){var f=(n-i)*o,h=0;h=s!==l?-u*a- -17:(-a*c+.5)*l;for(var p=0;p<r.length;p+=1)for(var d=0,v=r[p].positionedGlyphs;d<v.length;d+=1){var g=v[d];g.x+=f,g.y+=h}})(r.positionedLines,m,Y,W,g,y,s,G,o.length),r.top+=-W*G,r.bottom=r.top+G,r.left+=-Y*g,r.right=r.left+g}(P,n,i,a,m,l,u,c,p,f,d,y),!function(r){for(var n=0;n<r.length;n+=1)if(0!==r[n].positionedGlyphs.length)return!1;return!0}(O)&&P}oF.fromFeature=function(r,n){for(var i=new oF,a=0;a<r.sections.length;a++){var o=r.sections[a];o.image?i.addImageSection(o):i.addTextSection(o,n)}return i},oF.prototype.length=function(){return this.text.length},oF.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},oF.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},oF.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},oF.prototype.verticalizePunctuation=function(){this.text=function(r){for(var n="",i=0;i<r.length;i++){var a=r.charCodeAt(i+1)||null,o=r.charCodeAt(i-1)||null;a&&np(a)&&!ou[r[i+1]]||o&&np(o)&&!ou[r[i-1]]||!ou[r[i]]?n+=r[i]:n+=ou[r[i]]}return n}(this.text)},oF.prototype.trim=function(){for(var r=0,n=0;n<this.text.length&&oN[this.text.charCodeAt(n)];n++)r++;for(var i=this.text.length,a=this.text.length-1;a>=0&&a>=r&&oN[this.text.charCodeAt(a)];a--)i--;this.text=this.text.substring(r,i),this.sectionIndex=this.sectionIndex.slice(r,i)},oF.prototype.substring=function(r,n){var i=new oF;return i.text=this.text.substring(r,n),i.sectionIndex=this.sectionIndex.slice(r,n),i.sections=this.sections,i},oF.prototype.toString=function(){return this.text},oF.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(n,i){return Math.max(n,r.sections[i].scale)},0)},oF.prototype.addTextSection=function(r,n){this.text+=r.text,this.sections.push(oR.forText(r.scale,r.fontStack||n));for(var i=this.sections.length-1,a=0;a<r.text.length;++a)this.sectionIndex.push(i)},oF.prototype.addImageSection=function(r){var n=r.image?r.image.name:"";if(0!==n.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(oR.forImage(n)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},oF.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var oN={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oj={};function oU(r,n,i,a,o,s){if(n.imageName){var l=a[n.imageName];return l?l.displaySize[0]*n.scale*24/s+o:0}var u=i[n.fontStack],c=u&&u[r];return c?c.metrics.advance*n.scale+o:0}function oV(r,n,i,a){var o=Math.pow(r-n,2);return a?r<n?o/2:2*o:o+Math.abs(i)*i}function oH(r,n,i,a,o,s){for(var l=null,u=oV(n,i,o,s),c=0;c<a.length;c+=1){var f=a[c],h=oV(n-f.x,i,o,s)+f.badness;h<=u&&(l=f,u=h)}return{index:r,x:n,priorBreak:l,badness:u}}function oq(r,n,i,a,o,s,l){if("point"!==s||!r)return[];for(var u=[],c=function(r,n,i,a,o,s){for(var l=0,u=0;u<r.length();u++){var c=r.getSection(u);l+=oU(r.getCharCode(u),c,a,o,n,s)}return l/Math.max(1,Math.ceil(l/i))}(r,n,i,a,o,l),f=r.text.indexOf("​")>=0,h=0,p=0;p<r.length();p++){var d=r.getSection(p),v=r.getCharCode(p);if(oN[v]||(h+=oU(v,d,a,o,n,l)),p<r.length()-1){var g=!(v<11904||!(nc["Bopomofo Extended"](v)||nc.Bopomofo(v)||nc["CJK Compatibility Forms"](v)||nc["CJK Compatibility Ideographs"](v)||nc["CJK Compatibility"](v)||nc["CJK Radicals Supplement"](v)||nc["CJK Strokes"](v)||nc["CJK Symbols and Punctuation"](v)||nc["CJK Unified Ideographs Extension A"](v)||nc["CJK Unified Ideographs"](v)||nc["Enclosed CJK Letters and Months"](v)||nc["Halfwidth and Fullwidth Forms"](v)||nc.Hiragana(v)||nc["Ideographic Description Characters"](v)||nc["Kangxi Radicals"](v)||nc["Katakana Phonetic Extensions"](v)||nc.Katakana(v)||nc["Vertical Forms"](v)||nc["Yi Radicals"](v)||nc["Yi Syllables"](v)));(oj[v]||g||d.imageName)&&u.push(oH(p+1,h,c,u,function(r,n,i){var a=0;return 10===r&&(a-=1e4),i&&(a+=150),40!==r&&65288!==r||(a+=50),41!==n&&65289!==n||(a+=50),a}(v,r.getCharCode(p+1),g&&f),!1))}}return function r(n){return n?r(n.priorBreak).concat(n.index):[]}(oH(r.length(),h,c,u,0,!0))}function oG(r){var n=.5,i=.5;switch(r){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:n,verticalAlign:i}}function oZ(r,n,i,a,o,s){var l,u=r.image;if(u.content){var c=u.content,f=u.pixelRatio||1;l=[c[0]/f,c[1]/f,u.displaySize[0]-c[2]/f,u.displaySize[1]-c[3]/f]}var h,p,d,v,g=n.left*s,y=n.right*s;"width"===i||"both"===i?(v=o[0]+g-a[3],p=o[0]+y+a[1]):p=(v=o[0]+(g+y-u.displaySize[0])/2)+u.displaySize[0];var m=n.top*s,x=n.bottom*s;return"height"===i||"both"===i?(h=o[1]+m-a[0],d=o[1]+x+a[2]):d=(h=o[1]+(m+x-u.displaySize[1])/2)+u.displaySize[1],{image:u,top:h,right:p,bottom:d,left:v,collisionPadding:l}}oj[10]=!0,oj[32]=!0,oj[38]=!0,oj[40]=!0,oj[41]=!0,oj[43]=!0,oj[45]=!0,oj[47]=!0,oj[173]=!0,oj[183]=!0,oj[8203]=!0,oj[8208]=!0,oj[8211]=!0,oj[8231]=!0;var oY=function(r){function n(n,i,a,o){r.call(this,n,i),this.angle=a,void 0!==o&&(this.segment=o)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.clone=function(){return new n(this.x,this.y,this.angle,this.segment)},n}(u);function oW(r,n){var i=n.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new nS(r+1))};if("source"===i.kind)return{kind:"source"};for(var a=i.zoomStops,o=i.interpolationType,s=0;s<a.length&&a[s]<=r;)s++;for(var l=s=Math.max(0,s-1);l<a.length&&a[l]<r+1;)l++;l=Math.min(a.length-1,l);var u=a[s],c=a[l];return"composite"===i.kind?{kind:"composite",minZoom:u,maxZoom:c,interpolationType:o}:{kind:"camera",minZoom:u,maxZoom:c,minSize:i.evaluate(new nS(u)),maxSize:i.evaluate(new nS(c)),interpolationType:o}}function oX(r,n,i){var a=n.uSize,o=n.uSizeT,s=i.lowerSize,l=i.upperSize;return"source"===r.kind?s/128:"composite"===r.kind?eP(s/128,l/128,o):a}function oJ(r,n){var i=0,a=0;if("constant"===r.kind)a=r.layoutSize;else if("source"!==r.kind){var o=r.interpolationType,s=r.minZoom,l=r.maxZoom,u=o?p(eX.interpolationFactor(o,n,s,l),0,1):0;"camera"===r.kind?a=eP(r.minSize,r.maxSize,u):i=u}return{uSizeT:i,uSize:a}}nn("Anchor",oY);var oK=Object.freeze({__proto__:null,getSizeData:oW,evaluateSizeForFeature:oX,evaluateSizeForZoom:oJ,SIZE_PACK_FACTOR:128});function o$(r,n,i,a,o){if(void 0===n.segment)return!0;for(var s=n,l=n.segment+1,u=0;u>-i/2;){if(--l<0)return!1;u-=r[l].dist(s),s=r[l]}u+=r[l].dist(r[l+1]),l++;for(var c=[],f=0;u<i/2;){var h=r[l-1],p=r[l],d=r[l+1];if(!d)return!1;var v=h.angleTo(p)-p.angleTo(d);for(v=Math.abs((v+3*Math.PI)%(2*Math.PI)-Math.PI),c.push({distance:u,angleDelta:v}),f+=v;u-c[0].distance>a;)f-=c.shift().angleDelta;if(f>o)return!1;l++,u+=p.dist(d)}return!0}function oQ(r){for(var n=0,i=0;i<r.length-1;i++)n+=r[i].dist(r[i+1]);return n}function o0(r,n){return Math.max(r?r.right-r.left:0,n?n.right-n.left:0)}function o1(r,n,i,a,o){for(var s=[],l=0;l<r.length;l++)for(var c=r[l],f=void 0,h=0;h<c.length-1;h++){var p=c[h],d=c[h+1];p.x<n&&d.x<n||(p.x<n?p=new u(n,p.y+(d.y-p.y)*((n-p.x)/(d.x-p.x)))._round():d.x<n&&(d=new u(n,p.y+(d.y-p.y)*((n-p.x)/(d.x-p.x)))._round()),p.y<i&&d.y<i||(p.y<i?p=new u(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round():d.y<i&&(d=new u(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round()),p.x>=a&&d.x>=a||(p.x>=a?p=new u(a,p.y+(d.y-p.y)*((a-p.x)/(d.x-p.x)))._round():d.x>=a&&(d=new u(a,p.y+(d.y-p.y)*((a-p.x)/(d.x-p.x)))._round()),p.y>=o&&d.y>=o||(p.y>=o?p=new u(p.x+(d.x-p.x)*((o-p.y)/(d.y-p.y)),o)._round():d.y>=o&&(d=new u(p.x+(d.x-p.x)*((o-p.y)/(d.y-p.y)),o)._round()),f&&p.equals(f[f.length-1])||(f=[p],s.push(f)),f.push(d)))))}return s}function o2(r,n,i,a){var o=[],s=r.image,l=s.pixelRatio,c=s.paddedRect.w-2,f=s.paddedRect.h-2,h=r.right-r.left,p=r.bottom-r.top,d=s.stretchX||[[0,c]],v=s.stretchY||[[0,f]],g=function(r,n){return r+n[1]-n[0]},y=d.reduce(g,0),m=v.reduce(g,0),x=c-y,b=f-m,_=0,w=y,T=0,k=m,A=0,M=x,S=0,E=b;if(s.content&&a){var L=s.content;_=o3(d,0,L[0]),T=o3(v,0,L[1]),w=o3(d,L[0],L[2]),k=o3(v,L[1],L[3]),A=L[0]-_,S=L[1]-T,M=L[2]-L[0]-w,E=L[3]-L[1]-k}var C=function(a,o,c,f){var d,v,g,x,b=(a.stretch-_)/w*h+r.left,L=(d=a.fixed-A,d-M*a.stretch/y),C=(o.stretch-T)/k*p+r.top,O=(v=o.fixed-S,v-E*o.stretch/m),P=(c.stretch-_)/w*h+r.left,I=(g=c.fixed-A,g-M*c.stretch/y),D=(f.stretch-T)/k*p+r.top,z=(x=f.fixed-S,x-E*f.stretch/m),R=new u(b,C),F=new u(P,C),B=new u(P,D),N=new u(b,D),j=new u(L/l,O/l),U=new u(I/l,z/l),V=n*Math.PI/180;if(V){var H=Math.sin(V),q=Math.cos(V),G=[q,-H,H,q];R._matMult(G),F._matMult(G),N._matMult(G),B._matMult(G)}var Z=a.stretch+a.fixed,Y=c.stretch+c.fixed,W=o.stretch+o.fixed,X=f.stretch+f.fixed;return{tl:R,tr:F,bl:N,br:B,tex:{x:s.paddedRect.x+1+Z,y:s.paddedRect.y+1+W,w:Y-Z,h:X-W},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:j,pixelOffsetBR:U,minFontScaleX:M/l/h,minFontScaleY:E/l/p,isSDF:i}};if(a&&(s.stretchX||s.stretchY))for(var O=o5(d,x,y),P=o5(v,b,m),I=0;I<O.length-1;I++)for(var D=O[I],z=O[I+1],R=0;R<P.length-1;R++){var F=P[R],B=P[R+1];o.push(C(D,F,z,B))}else o.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:c+1},{fixed:0,stretch:f+1}));return o}function o3(r,n,i){for(var a=0,o=0;o<r.length;o+=1){var s=r[o];a+=Math.max(n,Math.min(i,s[1]))-Math.max(n,Math.min(i,s[0]))}return a}function o5(r,n,i){for(var a=[{fixed:-1,stretch:0}],o=0;o<r.length;o+=1){var s=r[o],l=s[0],u=s[1],c=a[a.length-1];a.push({fixed:l-c.stretch,stretch:c.stretch}),a.push({fixed:l-c.stretch,stretch:c.stretch+(u-l)})}return a.push({fixed:n+1,stretch:i}),a}var o4=function(r,n,i,a,o,s,l,c,f,h){if(this.boxStartIndex=r.length,f){var p=s.top,d=s.bottom,v=s.collisionPadding;v&&(p-=v[1],d+=v[3]);var g=d-p;g>0&&(g=Math.max(10,g),this.circleDiameter=g)}else{var y=s.top*l-c,m=s.bottom*l+c,x=s.left*l-c,b=s.right*l+c,_=s.collisionPadding;if(_&&(x-=_[0]*l,y-=_[1]*l,b+=_[2]*l,m+=_[3]*l),h){var w=new u(x,y),T=new u(b,y),k=new u(x,m),A=new u(b,m),M=h*Math.PI/180;w._rotate(M),T._rotate(M),k._rotate(M),A._rotate(M),x=Math.min(w.x,T.x,k.x,A.x),b=Math.max(w.x,T.x,k.x,A.x),y=Math.min(w.y,T.y,k.y,A.y),m=Math.max(w.y,T.y,k.y,A.y)}r.emplaceBack(n.x,n.y,x,y,b,m,i,a,o)}this.boxEndIndex=r.length},o6=function(r,n){if(void 0===r&&(r=[]),void 0===n&&(n=o8),this.data=r,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function o8(r,n){return r<n?-1:r>n?1:0}function o7(r,n){return n.max-r.max}function o9(r,n,i,a){this.p=new u(r,n),this.h=i,this.d=function(r,n){for(var i=!1,a=1/0,o=0;o<n.length;o++)for(var s=n[o],l=0,u=s.length,c=u-1;l<u;c=l++){var f=s[l],h=s[c];f.y>r.y!=h.y>r.y&&r.x<(h.x-f.x)*(r.y-f.y)/(h.y-f.y)+f.x&&(i=!i),a=Math.min(a,i1(r,f,h))}return(i?1:-1)*Math.sqrt(a)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}o6.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},o6.prototype.pop=function(){if(0!==this.length){var r=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),r}},o6.prototype.peek=function(){return this.data[0]},o6.prototype._up=function(r){for(var n=this.data,i=this.compare,a=n[r];r>0;){var o=r-1>>1,s=n[o];if(i(a,s)>=0)break;n[r]=s,r=o}n[r]=a},o6.prototype._down=function(r){for(var n=this.data,i=this.compare,a=this.length>>1,o=n[r];r<a;){var s=1+(r<<1),l=n[s],u=s+1;if(u<this.length&&0>i(n[u],l)&&(s=u,l=n[u]),i(l,o)>=0)break;n[r]=l,r=s}n[r]=o};var st=Number.POSITIVE_INFINITY;function se(r,n){return n[1]!==st?function(r,n,i){var a=0,o=0;switch(n=Math.abs(n),i=Math.abs(i),r){case"top-right":case"top-left":case"top":o=i-7;break;case"bottom-right":case"bottom-left":case"bottom":o=-i+7}switch(r){case"top-right":case"bottom-right":case"right":a=-n;break;case"top-left":case"bottom-left":case"left":a=n}return[a,o]}(r,n[0],n[1]):function(r,n){var i=0,a=0;n<0&&(n=0);var o=n/Math.sqrt(2);switch(r){case"top-right":case"top-left":a=o-7;break;case"bottom-right":case"bottom-left":a=-o+7;break;case"bottom":a=-n+7;break;case"top":a=n-7}switch(r){case"top-right":case"bottom-right":i=-o;break;case"top-left":case"bottom-left":i=o;break;case"left":i=n;break;case"right":i=-n}return[i,a]}(r,n[0])}function sr(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sn(r,n,i,a,o,s,l,c,f,h,p,d,v,g,y){var m=function(r,n,i,a,o,s,l,c){for(var f=a.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,h=[],p=0,d=n.positionedLines;p<d.length;p+=1)for(var v=d[p],g=0,y=v.positionedGlyphs;g<y.length;g+=1){var m=y[g];if(m.rect){var x=m.rect||{},b=4,_=!0,w=1,T=0,k=(o||c)&&m.vertical,A=m.metrics.advance*m.scale/2;if(c&&n.verticalizable){var M=(m.scale-1)*24,S=(24-m.metrics.width*m.scale)/2;T=v.lineOffset/2-(m.imageName?-S:M)}if(m.imageName){var E=l[m.imageName];_=E.sdf,b=1/(w=E.pixelRatio)}var L=o?[m.x+A,m.y]:[0,0],C=o?[0,0]:[m.x+A+i[0],m.y+i[1]-T],O=[0,0];k&&(O=C,C=[0,0]);var P=(m.metrics.left-b)*m.scale-A+C[0],I=(-m.metrics.top-b)*m.scale+C[1],D=P+x.w*m.scale/w,z=I+x.h*m.scale/w,R=new u(P,I),F=new u(D,I),B=new u(P,z),N=new u(D,z);if(k){var j=new u(-A,A- -17),U=-Math.PI/2,V=12-A,H=m.imageName?V:0,q=new u(22-V,-H),G=new(Function.prototype.bind.apply(u,[null].concat(O)));R._rotateAround(U,j)._add(q)._add(G),F._rotateAround(U,j)._add(q)._add(G),B._rotateAround(U,j)._add(q)._add(G),N._rotateAround(U,j)._add(q)._add(G)}if(f){var Z=Math.sin(f),Y=Math.cos(f),W=[Y,-Z,Z,Y];R._matMult(W),F._matMult(W),B._matMult(W),N._matMult(W)}var X=new u(0,0),J=new u(0,0);h.push({tl:R,tr:F,bl:B,br:N,tex:x,writingMode:n.writingMode,glyphOffset:L,sectionIndex:m.sectionIndex,isSDF:_,pixelOffsetTL:X,pixelOffsetBR:J,minFontScaleX:0,minFontScaleY:0})}}return h}(0,i,c,o,s,l,a,r.allowVerticalPlacement),x=r.textSizeData,b=null;"source"===x.kind?(b=[128*o.layout.get("text-size").evaluate(l,{})])[0]>32640&&M(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===x.kind&&((b=[128*g.compositeTextSizes[0].evaluate(l,{},y),128*g.compositeTextSizes[1].evaluate(l,{},y)])[0]>32640||b[1]>32640)&&M(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,m,b,c,s,l,h,n,f.lineStartIndex,f.lineLength,v,y);for(var _=0;_<p.length;_+=1)d[p[_]]=r.text.placedSymbolArray.length-1;return 4*m.length}function si(r){for(var n in r)return r[n];return null}var sa=aK.VectorTileFeature.types,so=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ss(r,n,i,a,o,s,l,u,c,f,h,p,d){var v=u?Math.min(32640,Math.round(u[0])):0,g=u?Math.min(32640,Math.round(u[1])):0;r.emplaceBack(n,i,Math.round(32*a),Math.round(32*o),s,l,(v<<1)+(c?1:0),g,16*f,16*h,256*p,256*d)}function sl(r,n,i){r.emplaceBack(n.x,n.y,i),r.emplaceBack(n.x,n.y,i),r.emplaceBack(n.x,n.y,i),r.emplaceBack(n.x,n.y,i)}var su=function(r){this.layoutVertexArray=new n1,this.indexArray=new n7,this.programConfigurations=r,this.segments=new ib,this.dynamicLayoutVertexArray=new n2,this.opacityVertexArray=new n3,this.placedSymbolArray=new ih};su.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},su.prototype.upload=function(r,n,i,a){this.isEmpty()||(i&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,oi.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,oa.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,so,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(r))},su.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},nn("SymbolBuffers",su);var sc=function(r,n,i){this.layoutVertexArray=new r,this.layoutAttributes=n,this.indexArray=new i,this.segments=new ib,this.collisionVertexArray=new n8};sc.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,oo.members,!0)},sc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},nn("CollisionBuffers",sc);var sf=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=at([]),this.placementViewportMatrix=at([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oW(this.zoom,n["text-size"]),this.iconSizeData=oW(this.zoom,n["icon-size"]);var i=this.layers[0].layout,a=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&void 0!==a.constantOr(1);var s="viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey;this.sortFeaturesByY=s&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(function(r){return oz[r]})),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id}),this.sourceID=r.sourceID};sf.prototype.createArrays=function(){this.text=new su(new iq(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new su(new iq(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new iv,this.lineVertexArray=new ig,this.symbolInstances=new id},sf.prototype.calculateGlyphDependencies=function(r,n,i,a,o){for(var s=0;s<r.length;s++)if(n[r.charCodeAt(s)]=!0,(i||a)&&o){var l=ou[r.charAt(s)];l&&(n[l.charCodeAt(0)]=!0)}},sf.prototype.populate=function(r,n,i){var a=this.layers[0],o=a.layout,s=o.get("text-font"),l=o.get("text-field"),u=o.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof t6&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),f="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],c||f){for(var p=n.iconDependencies,d=n.glyphDependencies,v=n.availableImages,g=new nS(this.zoom),y=0;y<r.length;y+=1){var m=r[y],x=m.feature,b=m.id,_=m.index,w=m.sourceLayerIndex,T=a._featureFilter.needGeometry,k=iW(x,T);if(a._featureFilter.filter(g,k,i)){T||(k.geometry=iY(x));var A=void 0;if(c){var M=a.getValueAndResolveTokens("text-field",k,i,v),S=t6.factory(M);(function(r){for(var n=0,i=r.sections;n<i.length;n+=1)if(function(r){for(var n=0;n<r.length;n+=1)if(nd(r[n].charCodeAt(0)))return!0;return!1}(i[n].text))return!0;return!1})(S)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===nk()||this.hasRTLText&&nM.isParsed())&&(A=function(r,n,i){return r.sections.forEach(function(r){var a,o;r.text=(a=r.text,"uppercase"===(o=n.layout.get("text-transform").evaluate(i,{}))?a=a.toLocaleUpperCase():"lowercase"===o&&(a=a.toLocaleLowerCase()),nM.applyArabicShaping&&(a=nM.applyArabicShaping(a)),a)}),r}(S,a,k))}var E=void 0;if(f){var L=a.getValueAndResolveTokens("icon-image",k,i,v);E=L instanceof t8?L:t8.fromString(L)}if(A||E){var C=this.sortFeaturesByKey?h.evaluate(k,{},i):void 0,O={id:b,text:A,icon:E,index:_,sourceLayerIndex:w,geometry:k.geometry,properties:x.properties,type:sa[x.type],sortKey:C};if(this.features.push(O),E&&(p[E.name]=!0),A){var P=s.evaluate(k,{},i).join(","),I="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(oz.vertical)>=0;for(var D=0,z=A.sections;D<z.length;D+=1){var R=z[D];if(R.image)p[R.image.name]=!0;else{var F=nf(A.toString()),B=R.fontStack||P,N=d[B]=d[B]||{};this.calculateGlyphDependencies(R.text,N,I,this.allowVerticalPlacement,F)}}}}}}"line"===o.get("symbol-placement")&&(this.features=function(r){var n={},i={},a=[],o=0;function s(n){a.push(r[n]),o++}function l(r,n,o){var s=i[r];return delete i[r],i[n]=s,a[s].geometry[0].pop(),a[s].geometry[0]=a[s].geometry[0].concat(o[0]),s}function u(r,i,o){var s=n[i];return delete n[i],n[r]=s,a[s].geometry[0].shift(),a[s].geometry[0]=o[0].concat(a[s].geometry[0]),s}function c(r,n,i){var a=i?n[0][n[0].length-1]:n[0][0];return r+":"+a.x+":"+a.y}for(var f=0;f<r.length;f++){var h=r[f],p=h.geometry,d=h.text?h.text.toString():null;if(d){var v=c(d,p),g=c(d,p,!0);if(v in i&&g in n&&i[v]!==n[g]){var y=u(v,g,p),m=l(v,g,a[y].geometry);delete n[v],delete i[g],i[c(d,a[m].geometry,!0)]=m,a[y].geometry=null}else v in i?l(v,g,p):g in n?u(v,g,p):(s(f),n[v]=o-1,i[g]=o-1)}else s(f)}return a.filter(function(r){return r.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(r,n){return r.sortKey-n.sortKey})}},sf.prototype.update=function(r,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,n,this.layers,i),this.icon.programConfigurations.updatePaintArrays(r,n,this.layers,i))},sf.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},sf.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},sf.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},sf.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},sf.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},sf.prototype.addToLineVertexArray=function(r,n){var i=this.lineVertexArray.length;if(void 0!==r.segment){for(var a=r.dist(n[r.segment+1]),o=r.dist(n[r.segment]),s={},l=r.segment+1;l<n.length;l++)s[l]={x:n[l].x,y:n[l].y,tileUnitDistanceFromAnchor:a},l<n.length-1&&(a+=n[l+1].dist(n[l]));for(var u=r.segment||0;u>=0;u--)s[u]={x:n[u].x,y:n[u].y,tileUnitDistanceFromAnchor:o},u>0&&(o+=n[u-1].dist(n[u]));for(var c=0;c<n.length;c++){var f=s[c];this.lineVertexArray.emplaceBack(f.x,f.y,f.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},sf.prototype.addSymbols=function(r,n,i,a,o,s,l,u,c,f,h,p){for(var d=r.indexArray,v=r.layoutVertexArray,g=r.segments.prepareSegment(4*n.length,v,d,this.canOverlap?s.sortKey:void 0),y=this.glyphOffsetArray.length,m=g.vertexLength,x=this.allowVerticalPlacement&&l===oz.vertical?Math.PI/2:0,b=s.text&&s.text.sections,_=0;_<n.length;_++){var w=n[_],T=w.tl,k=w.tr,A=w.bl,M=w.br,S=w.tex,E=w.pixelOffsetTL,L=w.pixelOffsetBR,C=w.minFontScaleX,O=w.minFontScaleY,P=w.glyphOffset,I=w.isSDF,D=w.sectionIndex,z=g.vertexLength,R=P[1];ss(v,u.x,u.y,T.x,R+T.y,S.x,S.y,i,I,E.x,E.y,C,O),ss(v,u.x,u.y,k.x,R+k.y,S.x+S.w,S.y,i,I,L.x,E.y,C,O),ss(v,u.x,u.y,A.x,R+A.y,S.x,S.y+S.h,i,I,E.x,L.y,C,O),ss(v,u.x,u.y,M.x,R+M.y,S.x+S.w,S.y+S.h,i,I,L.x,L.y,C,O),sl(r.dynamicLayoutVertexArray,u,x),d.emplaceBack(z,z+1,z+2),d.emplaceBack(z+1,z+2,z+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(P[0]),_!==n.length-1&&D===n[_+1].sectionIndex||r.programConfigurations.populatePaintArrays(v.length,s,s.index,{},p,b&&b[D])}r.placedSymbolArray.emplaceBack(u.x,u.y,y,this.glyphOffsetArray.length-y,m,c,f,u.segment,i?i[0]:0,i?i[1]:0,a[0],a[1],l,0,!1,0,h)},sf.prototype._addCollisionDebugVertex=function(r,n,i,a,o,s){return n.emplaceBack(0,0),r.emplaceBack(i.x,i.y,a,o,Math.round(s.x),Math.round(s.y))},sf.prototype.addCollisionDebugVertices=function(r,n,i,a,o,s,l){var c=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),f=c.vertexLength,h=o.layoutVertexArray,p=o.collisionVertexArray,d=l.anchorX,v=l.anchorY;this._addCollisionDebugVertex(h,p,s,d,v,new u(r,n)),this._addCollisionDebugVertex(h,p,s,d,v,new u(i,n)),this._addCollisionDebugVertex(h,p,s,d,v,new u(i,a)),this._addCollisionDebugVertex(h,p,s,d,v,new u(r,a)),c.vertexLength+=4;var g=o.indexArray;g.emplaceBack(f,f+1),g.emplaceBack(f+1,f+2),g.emplaceBack(f+2,f+3),g.emplaceBack(f+3,f),c.primitiveLength+=4},sf.prototype.addDebugCollisionBoxes=function(r,n,i,a){for(var o=r;o<n;o++){var s=this.collisionBoxArray.get(o),l=s.x1,u=s.y1,c=s.x2,f=s.y2;this.addCollisionDebugVertices(l,u,c,f,a?this.textCollisionBox:this.iconCollisionBox,s.anchorPoint,i)}},sf.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sc(n4,os.members,ia),this.iconCollisionBox=new sc(n4,os.members,ia);for(var r=0;r<this.symbolInstances.length;r++){var n=this.symbolInstances.get(r);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}},sf.prototype._deserializeCollisionBoxesForSymbol=function(r,n,i,a,o,s,l,u,c){for(var f={},h=n;h<i;h++){var p=r.get(h);f.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},f.textFeatureIndex=p.featureIndex;break}for(var d=a;d<o;d++){var v=r.get(d);f.verticalTextBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},f.verticalTextFeatureIndex=v.featureIndex;break}for(var g=s;g<l;g++){var y=r.get(g);f.iconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},f.iconFeatureIndex=y.featureIndex;break}for(var m=u;m<c;m++){var x=r.get(m);f.verticalIconBox={x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,anchorPointX:x.anchorPointX,anchorPointY:x.anchorPointY},f.verticalIconFeatureIndex=x.featureIndex;break}return f},sf.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var n=0;n<this.symbolInstances.length;n++){var i=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},sf.prototype.hasTextData=function(){return this.text.segments.get().length>0},sf.prototype.hasIconData=function(){return this.icon.segments.get().length>0},sf.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},sf.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},sf.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},sf.prototype.addIndicesForPlacedSymbol=function(r,n){for(var i=r.placedSymbolArray.get(n),a=i.vertexStartIndex+4*i.numGlyphs,o=i.vertexStartIndex;o<a;o+=4)r.indexArray.emplaceBack(o,o+1,o+2),r.indexArray.emplaceBack(o+1,o+2,o+3)},sf.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var n=Math.sin(r),i=Math.cos(r),a=[],o=[],s=[],l=0;l<this.symbolInstances.length;++l){s.push(l);var u=this.symbolInstances.get(l);a.push(0|Math.round(n*u.anchorX+i*u.anchorY)),o.push(u.featureIndex)}return s.sort(function(r,n){return a[r]-a[n]||o[n]-o[r]}),s},sf.prototype.addToSortKeyRanges=function(r,n){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===n?i.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:r+1})},sf.prototype.sortFeatures=function(r){var n=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,a=this.symbolInstanceIndexes;i<a.length;i+=1){var o=a[i],s=this.symbolInstances.get(o);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(function(r,i,a){r>=0&&a.indexOf(r)===i&&n.addIndicesForPlacedSymbol(n.text,r)}),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},nn("SymbolBucket",sf,{omit:["layers","collisionBoxArray","features","compareText"]}),sf.MAX_GLYPHS=65535,sf.addDynamicAttributes=sl;var sh=new nU({"symbol-placement":new nR(tP.layout_symbol["symbol-placement"]),"symbol-spacing":new nR(tP.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nR(tP.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nF(tP.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nR(tP.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nR(tP.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new nR(tP.layout_symbol["icon-ignore-placement"]),"icon-optional":new nR(tP.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nR(tP.layout_symbol["icon-rotation-alignment"]),"icon-size":new nF(tP.layout_symbol["icon-size"]),"icon-text-fit":new nR(tP.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nR(tP.layout_symbol["icon-text-fit-padding"]),"icon-image":new nF(tP.layout_symbol["icon-image"]),"icon-rotate":new nF(tP.layout_symbol["icon-rotate"]),"icon-padding":new nR(tP.layout_symbol["icon-padding"]),"icon-keep-upright":new nR(tP.layout_symbol["icon-keep-upright"]),"icon-offset":new nF(tP.layout_symbol["icon-offset"]),"icon-anchor":new nF(tP.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nR(tP.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nR(tP.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nR(tP.layout_symbol["text-rotation-alignment"]),"text-field":new nF(tP.layout_symbol["text-field"]),"text-font":new nF(tP.layout_symbol["text-font"]),"text-size":new nF(tP.layout_symbol["text-size"]),"text-max-width":new nF(tP.layout_symbol["text-max-width"]),"text-line-height":new nR(tP.layout_symbol["text-line-height"]),"text-letter-spacing":new nF(tP.layout_symbol["text-letter-spacing"]),"text-justify":new nF(tP.layout_symbol["text-justify"]),"text-radial-offset":new nF(tP.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nR(tP.layout_symbol["text-variable-anchor"]),"text-anchor":new nF(tP.layout_symbol["text-anchor"]),"text-max-angle":new nR(tP.layout_symbol["text-max-angle"]),"text-writing-mode":new nR(tP.layout_symbol["text-writing-mode"]),"text-rotate":new nF(tP.layout_symbol["text-rotate"]),"text-padding":new nR(tP.layout_symbol["text-padding"]),"text-keep-upright":new nR(tP.layout_symbol["text-keep-upright"]),"text-transform":new nF(tP.layout_symbol["text-transform"]),"text-offset":new nF(tP.layout_symbol["text-offset"]),"text-allow-overlap":new nR(tP.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new nR(tP.layout_symbol["text-ignore-placement"]),"text-optional":new nR(tP.layout_symbol["text-optional"])}),sp={paint:new nU({"icon-opacity":new nF(tP.paint_symbol["icon-opacity"]),"icon-color":new nF(tP.paint_symbol["icon-color"]),"icon-halo-color":new nF(tP.paint_symbol["icon-halo-color"]),"icon-halo-width":new nF(tP.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nF(tP.paint_symbol["icon-halo-blur"]),"icon-translate":new nR(tP.paint_symbol["icon-translate"]),"icon-translate-anchor":new nR(tP.paint_symbol["icon-translate-anchor"]),"text-opacity":new nF(tP.paint_symbol["text-opacity"]),"text-color":new nF(tP.paint_symbol["text-color"],{runtimeType:tq,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new nF(tP.paint_symbol["text-halo-color"]),"text-halo-width":new nF(tP.paint_symbol["text-halo-width"]),"text-halo-blur":new nF(tP.paint_symbol["text-halo-blur"]),"text-translate":new nR(tP.paint_symbol["text-translate"]),"text-translate-anchor":new nR(tP.paint_symbol["text-translate-anchor"])}),layout:sh},sd=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:tj,this.defaultValue=r};sd.prototype.evaluate=function(r){if(r.formattedSection){var n=this.defaultValue.property.overrides;if(n&&n.hasOverride(r.formattedSection))return n.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},sd.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},sd.prototype.outputDefined=function(){return!1},sd.prototype.serialize=function(){return null},nn("FormatSectionOverride",sd,{omit:["defaultValue"]});var sv=function(r){function n(n){r.call(this,n,sp)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.recalculate=function(n,i){if(r.prototype.recalculate.call(this,n,i),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var a=this.layout.get("text-writing-mode");if(a){for(var o=[],s=0;s<a.length;s+=1){var l=a[s];0>o.indexOf(l)&&o.push(l)}this.layout._values["text-writing-mode"]=o}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},n.prototype.getValueAndResolveTokens=function(r,n,i,a){var o,s=this.layout.get(r).evaluate(n,{},i,a),l=this._unevaluatedLayout._values[r];return l.isDataDriven()||rk(l.value)||!s?s:(o=n.properties,s.replace(/{([^{}]+)}/g,function(r,n){return n in o?String(o[n]):""}))},n.prototype.createBucket=function(r){return new sf(r)},n.prototype.queryRadius=function(){return 0},n.prototype.queryIntersectsFeature=function(){return!1},n.prototype._setPaintOverrides=function(){for(var r=0,i=sp.paint.overridableProperties;r<i.length;r+=1){var a=i[r];if(n.hasPaintOverride(this.layout,a)){var o,s=this.paint.get(a),l=new rT(new sd(s),s.property.specification);o="constant"===s.value.kind||"source"===s.value.kind?new rM("source",l):new rS("composite",l,s.value.zoomStops,s.value._interpolationType),this.paint._values[a]=new nD(s.property,o,s.parameters)}}},n.prototype._handleOverridablePaintPropertyUpdate=function(r,i,a){return!(!this.layout||i.isDataDriven()||a.isDataDriven())&&n.hasPaintOverride(this.layout,r)},n.hasPaintOverride=function(r,n){var i=r.get("text-field"),a=sp.paint.properties[n],o=!1,s=function(r){for(var n=0;n<r.length;n+=1){var i=r[n];if(a.overrides&&a.overrides.hasOverride(i))return void(o=!0)}};if("constant"===i.value.kind&&i.value.value instanceof t6)s(i.value.value.sections);else if("source"===i.value.kind){var l=function(r){o||(r instanceof er&&et(r.value)===tW?s(r.value.sections):r instanceof eo?s(r.sections):r.eachChild(l))},u=i.value;u._styleExpression&&l(u._styleExpression.expression)}return o},n}(nH),sg={paint:new nU({"background-color":new nR(tP.paint_background["background-color"]),"background-pattern":new nN(tP.paint_background["background-pattern"]),"background-opacity":new nR(tP.paint_background["background-opacity"])})},sy=function(r){function n(n){r.call(this,n,sg)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(nH),sm={paint:new nU({"raster-opacity":new nR(tP.paint_raster["raster-opacity"]),"raster-hue-rotate":new nR(tP.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nR(tP.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nR(tP.paint_raster["raster-brightness-max"]),"raster-saturation":new nR(tP.paint_raster["raster-saturation"]),"raster-contrast":new nR(tP.paint_raster["raster-contrast"]),"raster-resampling":new nR(tP.paint_raster["raster-resampling"]),"raster-fade-duration":new nR(tP.paint_raster["raster-fade-duration"])})},sx=function(r){function n(n){r.call(this,n,sm)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(nH),sb=function(r){function n(n){r.call(this,n,{}),this.implementation=n}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},n.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},n.prototype.recalculate=function(){},n.prototype.updateTransitions=function(){},n.prototype.hasTransition=function(){},n.prototype.serialize=function(){},n.prototype.onAdd=function(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},n.prototype.onRemove=function(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},n}(nH),s_={circle:an,heatmap:ap,hillshade:av,fill:aq,"fill-extrusion":a2,line:on,symbol:sv,background:sy,raster:sx},sw=c.HTMLImageElement,sT=c.HTMLCanvasElement,sk=c.HTMLVideoElement,sA=c.ImageData,sM=c.ImageBitmap,sS=function(r,n,i,a){this.context=r,this.format=i,this.texture=r.gl.createTexture(),this.update(n,a)};sS.prototype.update=function(r,n,i){var a=r.width,o=r.height,s=!(this.size&&this.size[0]===a&&this.size[1]===o||i),l=this.context,u=l.gl;if(this.useMipmap=!!(n&&n.useMipmap),u.bindTexture(u.TEXTURE_2D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(this.format===u.RGBA&&(!n||!1!==n.premultiply)),s)this.size=[a,o],r instanceof sw||r instanceof sT||r instanceof sk||r instanceof sA||sM&&r instanceof sM?u.texImage2D(u.TEXTURE_2D,0,this.format,this.format,u.UNSIGNED_BYTE,r):u.texImage2D(u.TEXTURE_2D,0,this.format,a,o,0,this.format,u.UNSIGNED_BYTE,r.data);else{var c=i||{x:0,y:0},f=c.x,h=c.y;r instanceof sw||r instanceof sT||r instanceof sk||r instanceof sA||sM&&r instanceof sM?u.texSubImage2D(u.TEXTURE_2D,0,f,h,u.RGBA,u.UNSIGNED_BYTE,r):u.texSubImage2D(u.TEXTURE_2D,0,f,h,a,o,u.RGBA,u.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&u.generateMipmap(u.TEXTURE_2D)},sS.prototype.bind=function(r,n,i){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),r!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||r),this.filter=r),n!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,n),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,n),this.wrap=n)},sS.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},sS.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var sE=function(r){var n=this;this._callback=r,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})};sE.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},sE.prototype.remove=function(){delete this._channel,this._callback=function(){}};var sL=function(r,n,i){this.target=r,this.parent=n,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},b(["receive","process"],this),this.invoker=new sE(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?r:c};function sC(r,n,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[r*a-2*Math.PI*6378137/2,n*a-2*Math.PI*6378137/2]}sL.prototype.send=function(r,n,i,a,o){var s=this;void 0===o&&(o=!1);var l=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[l]=i);var u=O(this.globalScope)?void 0:[];return this.target.postMessage({id:l,type:r,hasCallback:!!i,targetMapId:a,mustQueue:o,sourceMapId:this.mapId,data:ns(n,u)},u),{cancel:function(){i&&delete s.callbacks[l],s.target.postMessage({id:l,type:"<cancel>",targetMapId:a,sourceMapId:s.mapId})}}},sL.prototype.receive=function(r){var n=r.data,i=n.id;if(i&&(!n.targetMapId||this.mapId===n.targetMapId)){if("<cancel>"===n.type){delete this.tasks[i];var a=this.cancelCallbacks[i];delete this.cancelCallbacks[i],a&&a()}else E()||n.mustQueue?(this.tasks[i]=n,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,n)}},sL.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),n=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(r,n)}},sL.prototype.processTask=function(r,n){var i=this;if("<response>"===n.type){var a=this.callbacks[r];delete this.callbacks[r],a&&(n.error?a(nl(n.error)):a(null,nl(n.data)))}else{var o=!1,s=O(this.globalScope)?void 0:[],l=n.hasCallback?function(n,a){o=!0,delete i.cancelCallbacks[r],i.target.postMessage({id:r,type:"<response>",sourceMapId:i.mapId,error:n?ns(n):null,data:ns(a,s)},s)}:function(r){o=!0},u=null,c=nl(n.data);if(this.parent[n.type])u=this.parent[n.type](n.sourceMapId,c,l);else if(this.parent.getWorkerSource){var f=n.type.split(".");u=this.parent.getWorkerSource(n.sourceMapId,f[0],c.source)[f[1]](c,l)}else l(Error("Could not find function "+n.type));!o&&u&&u.cancel&&(this.cancelCallbacks[r]=u.cancel)}},sL.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var sO=function(r,n){r&&(n?this.setSouthWest(r).setNorthEast(n):4===r.length?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};sO.prototype.setNorthEast=function(r){return this._ne=r instanceof sP?new sP(r.lng,r.lat):sP.convert(r),this},sO.prototype.setSouthWest=function(r){return this._sw=r instanceof sP?new sP(r.lng,r.lat):sP.convert(r),this},sO.prototype.extend=function(r){var n,i,a=this._sw,o=this._ne;if(r instanceof sP)n=r,i=r;else{if(!(r instanceof sO))return Array.isArray(r)?4===r.length||r.every(Array.isArray)?this.extend(sO.convert(r)):this.extend(sP.convert(r)):this;if(n=r._sw,i=r._ne,!n||!i)return this}return a||o?(a.lng=Math.min(n.lng,a.lng),a.lat=Math.min(n.lat,a.lat),o.lng=Math.max(i.lng,o.lng),o.lat=Math.max(i.lat,o.lat)):(this._sw=new sP(n.lng,n.lat),this._ne=new sP(i.lng,i.lat)),this},sO.prototype.getCenter=function(){return new sP((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},sO.prototype.getSouthWest=function(){return this._sw},sO.prototype.getNorthEast=function(){return this._ne},sO.prototype.getNorthWest=function(){return new sP(this.getWest(),this.getNorth())},sO.prototype.getSouthEast=function(){return new sP(this.getEast(),this.getSouth())},sO.prototype.getWest=function(){return this._sw.lng},sO.prototype.getSouth=function(){return this._sw.lat},sO.prototype.getEast=function(){return this._ne.lng},sO.prototype.getNorth=function(){return this._ne.lat},sO.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},sO.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},sO.prototype.isEmpty=function(){return!(this._sw&&this._ne)},sO.prototype.contains=function(r){var n=sP.convert(r),i=n.lng,a=n.lat,o=this._sw.lat<=a&&a<=this._ne.lat,s=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(s=this._sw.lng>=i&&i>=this._ne.lng),o&&s},sO.convert=function(r){return!r||r instanceof sO?r:new sO(r)};var sP=function(r,n){if(isNaN(r)||isNaN(n))throw Error("Invalid LngLat object: ("+r+", "+n+")");if(this.lng=+r,this.lat=+n,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")};sP.prototype.wrap=function(){return new sP(d(this.lng,-180,180),this.lat)},sP.prototype.toArray=function(){return[this.lng,this.lat]},sP.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},sP.prototype.distanceTo=function(r){var n=Math.PI/180,i=this.lat*n,a=r.lat*n;return 6371008.8*Math.acos(Math.min(Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos((r.lng-this.lng)*n),1))},sP.prototype.toBounds=function(r){void 0===r&&(r=0);var n=360*r/40075017,i=n/Math.cos(Math.PI/180*this.lat);return new sO(new sP(this.lng-i,this.lat-n),new sP(this.lng+i,this.lat+n))},sP.convert=function(r){if(r instanceof sP)return r;if(Array.isArray(r)&&(2===r.length||3===r.length))return new sP(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&"object"==typeof r&&null!==r)return new sP(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var sI=2*Math.PI*6371008.8;function sD(r){return sI*Math.cos(r*Math.PI/180)}function sz(r){return(180+r)/360}function sR(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function sF(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var sB=function(r,n,i){void 0===i&&(i=0),this.x=+r,this.y=+n,this.z=+i};sB.fromLngLat=function(r,n){void 0===n&&(n=0);var i=sP.convert(r);return new sB(sz(i.lng),sR(i.lat),n/sD(i.lat))},sB.prototype.toLngLat=function(){return new sP(360*this.x-180,sF(this.y))},sB.prototype.toAltitude=function(){return this.z*sD(sF(this.y))},sB.prototype.meterInMercatorCoordinateUnits=function(){return 1/sI*(1/Math.cos(sF(this.y)*Math.PI/180))};var sN=function(r,n,i){this.z=r,this.x=n,this.y=i,this.key=sV(0,r,r,n,i)};sN.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},sN.prototype.url=function(r,n){var i,a,o,s,l,u=(i=this.x,a=this.y,s=sC(256*i,256*(a=Math.pow(2,o=this.z)-a-1),o),l=sC(256*(i+1),256*(a+1),o),s[0]+","+s[1]+","+l[0]+","+l[1]),c=function(r,n,i){for(var a,o="",s=r;s>0;s--)o+=(n&(a=1<<s-1)?1:0)+(i&a?2:0);return o}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",c).replace("{bbox-epsg-3857}",u)},sN.prototype.getTilePoint=function(r){var n=Math.pow(2,this.z);return new u((r.x*n-this.x)*8192,(r.y*n-this.y)*8192)},sN.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var sj=function(r,n){this.wrap=r,this.canonical=n,this.key=sV(r,n.z,n.z,n.x,n.y)},sU=function(r,n,i,a,o){this.overscaledZ=r,this.wrap=n,this.canonical=new sN(i,+a,+o),this.key=sV(n,r,i,a,o)};function sV(r,n,i,a,o){(r*=2)<0&&(r=-1*r-1);var s=1<<i;return(s*s*r+s*o+a).toString(36)+i.toString(36)+n.toString(36)}sU.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},sU.prototype.scaledTo=function(r){var n=this.canonical.z-r;return r>this.canonical.z?new sU(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sU(r,this.wrap,r,this.canonical.x>>n,this.canonical.y>>n)},sU.prototype.calculateScaledKey=function(r,n){var i=this.canonical.z-r;return r>this.canonical.z?sV(this.wrap*+n,r,this.canonical.z,this.canonical.x,this.canonical.y):sV(this.wrap*+n,r,r,this.canonical.x>>i,this.canonical.y>>i)},sU.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var n=this.canonical.z-r.canonical.z;return 0===r.overscaledZ||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>n&&r.canonical.y===this.canonical.y>>n},sU.prototype.children=function(r){if(this.overscaledZ>=r)return[new sU(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,i=2*this.canonical.x,a=2*this.canonical.y;return[new sU(n,this.wrap,n,i,a),new sU(n,this.wrap,n,i+1,a),new sU(n,this.wrap,n,i,a+1),new sU(n,this.wrap,n,i+1,a+1)]},sU.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},sU.prototype.wrapped=function(){return new sU(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},sU.prototype.unwrapTo=function(r){return new sU(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},sU.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},sU.prototype.toUnwrapped=function(){return new sj(this.wrap,this.canonical)},sU.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},sU.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new sB(r.x-this.wrap,r.y))},nn("CanonicalTileID",sN),nn("OverscaledTileID",sU,{omit:["posMatrix"]});var sH=function(r,n,i){if(this.uid=r,n.height!==n.width)throw RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return M('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=n.height;var a=this.dim=n.height-2;this.data=new Uint32Array(n.data.buffer),this.encoding=i||"mapbox";for(var o=0;o<a;o++)this.data[this._idx(-1,o)]=this.data[this._idx(0,o)],this.data[this._idx(a,o)]=this.data[this._idx(a-1,o)],this.data[this._idx(o,-1)]=this.data[this._idx(o,0)],this.data[this._idx(o,a)]=this.data[this._idx(o,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)]};sH.prototype.get=function(r,n){var i=new Uint8Array(this.data.buffer),a=4*this._idx(r,n);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2])},sH.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},sH.prototype._idx=function(r,n){if(r<-1||r>=this.dim+1||n<-1||n>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(r+1)},sH.prototype._unpackMapbox=function(r,n,i){return(256*r*256+256*n+i)/10-1e4},sH.prototype._unpackTerrarium=function(r,n,i){return 256*r+n+i/256-32768},sH.prototype.getPixels=function(){return new ac({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},sH.prototype.backfillBorder=function(r,n,i){if(this.dim!==r.dim)throw Error("dem dimension mismatch");var a=n*this.dim,o=n*this.dim+this.dim,s=i*this.dim,l=i*this.dim+this.dim;switch(n){case -1:a=o-1;break;case 1:o=a+1}switch(i){case -1:s=l-1;break;case 1:l=s+1}for(var u=-n*this.dim,c=-i*this.dim,f=s;f<l;f++)for(var h=a;h<o;h++)this.data[this._idx(h,f)]=r.data[this._idx(h+u,f+c)]},nn("DEMData",sH);var sq=function(r){this._stringToNumber={},this._numberToString=[];for(var n=0;n<r.length;n++){var i=r[n];this._stringToNumber[i]=n,this._numberToString[n]=i}};sq.prototype.encode=function(r){return this._stringToNumber[r]},sq.prototype.decode=function(r){return this._numberToString[r]};var sG=function(r,n,i,a,o){this.type="Feature",this._vectorTileFeature=r,r._z=n,r._x=i,r._y=a,this.properties=r.properties,this.id=o},sZ={geometry:{configurable:!0}};sZ.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},sZ.geometry.set=function(r){this._geometry=r},sG.prototype.toJSON=function(){var r={geometry:this.geometry};for(var n in this)"_geometry"!==n&&"_vectorTileFeature"!==n&&(r[n]=this[n]);return r},Object.defineProperties(sG.prototype,sZ);var sY=function(){this.state={},this.stateChanges={},this.deletedStates={}};sY.prototype.updateState=function(r,n,i){var a=String(n);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][a]=this.stateChanges[r][a]||{},v(this.stateChanges[r][a],i),null===this.deletedStates[r])for(var o in this.deletedStates[r]={},this.state[r])o!==a&&(this.deletedStates[r][o]=null);else if(this.deletedStates[r]&&null===this.deletedStates[r][a])for(var s in this.deletedStates[r][a]={},this.state[r][a])i[s]||(this.deletedStates[r][a][s]=null);else for(var l in i)this.deletedStates[r]&&this.deletedStates[r][a]&&null===this.deletedStates[r][a][l]&&delete this.deletedStates[r][a][l]},sY.prototype.removeFeatureState=function(r,n,i){if(null!==this.deletedStates[r]){var a=String(n);if(this.deletedStates[r]=this.deletedStates[r]||{},i&&void 0!==n)null!==this.deletedStates[r][a]&&(this.deletedStates[r][a]=this.deletedStates[r][a]||{},this.deletedStates[r][a][i]=null);else if(void 0!==n){if(this.stateChanges[r]&&this.stateChanges[r][a])for(i in this.deletedStates[r][a]={},this.stateChanges[r][a])this.deletedStates[r][a][i]=null;else this.deletedStates[r][a]=null}else this.deletedStates[r]=null}},sY.prototype.getState=function(r,n){var i=String(n),a=this.state[r]||{},o=this.stateChanges[r]||{},s=v({},a[i],o[i]);if(null===this.deletedStates[r])return{};if(this.deletedStates[r]){var l=this.deletedStates[r][n];if(null===l)return{};for(var u in l)delete s[u]}return s},sY.prototype.initializeTileState=function(r,n){r.setFeatureState(this.state,n)},sY.prototype.coalesceChanges=function(r,n){var i={};for(var a in this.stateChanges){this.state[a]=this.state[a]||{};var o={};for(var s in this.stateChanges[a])this.state[a][s]||(this.state[a][s]={}),v(this.state[a][s],this.stateChanges[a][s]),o[s]=this.state[a][s];i[a]=o}for(var l in this.deletedStates){this.state[l]=this.state[l]||{};var u={};if(null===this.deletedStates[l])for(var c in this.state[l])u[c]={},this.state[l][c]={};else for(var f in this.deletedStates[l]){if(null===this.deletedStates[l][f])this.state[l][f]={};else for(var h=0,p=Object.keys(this.deletedStates[l][f]);h<p.length;h+=1){var d=p[h];delete this.state[l][f][d]}u[f]=this.state[l][f]}i[l]=i[l]||{},v(i[l],u)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var g in r)r[g].setFeatureState(i,n)};var sW=function(r,n){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new r9(8192,16,0),this.grid3D=new r9(8192,16,0),this.featureIndexArray=new im,this.promoteId=n};function sX(r,n,i,a,o){return w(r,function(r,s){var l=n instanceof nz?n.get(s):null;return l&&l.evaluate?l.evaluate(i,a,o):l})}function sJ(r){for(var n=1/0,i=1/0,a=-1/0,o=-1/0,s=0;s<r.length;s+=1){var l=r[s];n=Math.min(n,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}return{minX:n,minY:i,maxX:a,maxY:o}}function sK(r,n){return n-r}sW.prototype.insert=function(r,n,i,a,o,s){var l=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,o);for(var u=s?this.grid3D:this.grid,c=0;c<n.length;c++){for(var f=n[c],h=[1/0,1/0,-1/0,-1/0],p=0;p<f.length;p++){var d=f[p];h[0]=Math.min(h[0],d.x),h[1]=Math.min(h[1],d.y),h[2]=Math.max(h[2],d.x),h[3]=Math.max(h[3],d.y)}h[0]<8192&&h[1]<8192&&h[2]>=0&&h[3]>=0&&u.insert(l,h[0],h[1],h[2],h[3])}},sW.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new aK.VectorTile(new oh(this.rawTileData)).layers,this.sourceLayerCoder=new sq(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},sW.prototype.query=function(r,n,i,a){var o=this;this.loadVTLayers();for(var s=r.params||{},l=8192/r.tileSize/r.scale,c=rB(s.filter),f=r.queryGeometry,h=r.queryPadding*l,p=sJ(f),d=this.grid.query(p.minX-h,p.minY-h,p.maxX+h,p.maxY+h),v=sJ(r.cameraQueryGeometry),g=0,y=this.grid3D.query(v.minX-h,v.minY-h,v.maxX+h,v.maxY+h,function(n,i,a,o){return function(r,n,i,a,o){for(var s=0;s<r.length;s+=1){var l=r[s];if(n<=l.x&&i<=l.y&&a>=l.x&&o>=l.y)return!0}var c=[new u(n,i),new u(n,o),new u(a,o),new u(a,i)];if(r.length>2){for(var f=0;f<c.length;f+=1)if(i3(r,c[f]))return!0}for(var h=0;h<r.length-1;h++)if(function(r,n,i){var a=i[0],o=i[2];if(r.x<a.x&&n.x<a.x||r.x>o.x&&n.x>o.x||r.y<a.y&&n.y<a.y||r.y>o.y&&n.y>o.y)return!1;var s=S(r,n,i[0]);return s!==S(r,n,i[1])||s!==S(r,n,i[2])||s!==S(r,n,i[3])}(r[h],r[h+1],c))return!0;return!1}(r.cameraQueryGeometry,n-h,i-h,a+h,o+h)});g<y.length;g+=1){var m=y[g];d.push(m)}d.sort(sK);for(var x,b={},_=0;_<d.length;_++)(function(u){var h=d[u];if(h!==x){x=h;var p=o.featureIndexArray.get(h),v=null;o.loadMatchingFeature(b,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,c,s.layers,s.availableImages,n,i,a,function(n,i,a){return v||(v=iY(n)),i.queryIntersectsFeature(f,n,a,v,o.z,r.transform,l,r.pixelPosMatrix)})}})(_);return b},sW.prototype.loadMatchingFeature=function(r,n,i,a,o,s,l,u,c,f,h){var p=this.bucketLayerIDs[n];if(!s||function(r,n){for(var i=0;i<r.length;i++)if(n.indexOf(r[i])>=0)return!0;return!1}(s,p)){var d=this.sourceLayerCoder.decode(i),g=this.vtLayers[d].feature(a);if(o.needGeometry){var y=iW(g,!0);if(!o.filter(new nS(this.tileID.overscaledZ),y,this.tileID.canonical))return}else if(!o.filter(new nS(this.tileID.overscaledZ),g))return;for(var m=this.getId(g,d),x=0;x<p.length;x++){var b=p[x];if(!(s&&0>s.indexOf(b))){var _=u[b];if(_){var w={};void 0!==m&&f&&(w=f.getState(_.sourceLayer||"_geojsonTileLayer",m));var T=v({},c[b]);T.paint=sX(T.paint,_.paint,g,w,l),T.layout=sX(T.layout,_.layout,g,w,l);var k=!h||h(g,_,w);if(k){var A=new sG(g,this.z,this.x,this.y,m);A.layer=T;var M=r[b];void 0===M&&(M=r[b]=[]),M.push({featureIndex:a,feature:A,intersectionZ:k})}}}}}},sW.prototype.lookupSymbolFeatures=function(r,n,i,a,o,s,l,u){var c={};this.loadVTLayers();for(var f=rB(o),h=0;h<r.length;h+=1){var p=r[h];this.loadMatchingFeature(c,i,a,p,f,s,l,u,n)}return c},sW.prototype.hasLayer=function(r){for(var n=0,i=this.bucketLayerIDs;n<i.length;n+=1)for(var a=0,o=i[n];a<o.length;a+=1)if(r===o[a])return!0;return!1},sW.prototype.getId=function(r,n){var i=r.id;if(this.promoteId){var a="string"==typeof this.promoteId?this.promoteId:this.promoteId[n];"boolean"==typeof(i=r.properties[a])&&(i=Number(i))}return i},nn("FeatureIndex",sW,{omit:["rawTileData","sourceLayerCoder"]});var s$=function(r,n){this.tileID=r,this.uid=y(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};s$.prototype.registerFadeDuration=function(r){var n=r+this.timeAdded;n<j.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)},s$.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},s$.prototype.loadVectorData=function(r,n,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var a in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(r,n){var i={};if(!n)return i;for(var a=function(){var r=s[o],a=r.layerIds.map(function(r){return n.getLayer(r)}).filter(Boolean);if(0!==a.length){r.layers=a,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(function(r){return a.filter(function(n){return n.id===r})[0]}));for(var l=0,u=a;l<u.length;l+=1){var c=u[l];i[c.id]=r}}},o=0,s=r;o<s.length;o+=1)a();return i}(r.buckets,n.style),this.hasSymbolBuckets=!1,this.buckets){var o=this.buckets[a];if(o instanceof sf){if(this.hasSymbolBuckets=!0,!i)break;o.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var s in this.buckets){var l=this.buckets[s];if(l instanceof sf&&l.hasRTLText){this.hasRTLText=!0,nM.isLoading()||nM.isLoaded()||"deferred"!==nk()||nA();break}}for(var u in this.queryPadding=0,this.buckets){var c=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(u).queryRadius(c))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new iu},s$.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},s$.prototype.getBucket=function(r){return this.buckets[r.id]},s$.prototype.upload=function(r){for(var n in this.buckets){var i=this.buckets[n];i.uploadPending()&&i.upload(r)}var a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sS(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sS(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)},s$.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},s$.prototype.queryRenderedFeatures=function(r,n,i,a,o,s,l,u,c,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:o,scale:s,tileSize:this.tileSize,pixelPosMatrix:f,transform:u,params:l,queryPadding:this.queryPadding*c},r,n,i):{}},s$.prototype.querySourceFeatures=function(r,n){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var a=i.loadVTLayers(),o=n?n.sourceLayer:"",s=a._geojsonTileLayer||a[o];if(s)for(var l=rB(n&&n.filter),u=this.tileID.canonical,c=u.z,f=u.x,h=u.y,p={z:c,x:f,y:h},d=0;d<s.length;d++){var v=s.feature(d);if(l.needGeometry){var g=iW(v,!0);if(!l.filter(new nS(this.tileID.overscaledZ),g,this.tileID.canonical))continue}else if(!l.filter(new nS(this.tileID.overscaledZ),v))continue;var y=i.getId(v,o),m=new sG(v,c,f,h,y);m.tile=p,r.push(m)}}},s$.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},s$.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},s$.prototype.setExpiryData=function(r){var n=this.expirationTime;if(r.cacheControl){var i=L(r.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var a=Date.now(),o=!1;if(this.expirationTime>a)o=!1;else if(n){if(this.expirationTime<n)o=!0;else{var s=this.expirationTime-n;s?this.expirationTime=a+Math.max(s,3e4):o=!0}}else o=!0;o?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},s$.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),2147483647)},s$.prototype.setFeatureState=function(r,n){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(r).length){var i=this.latestFeatureIndex.loadVTLayers();for(var a in this.buckets)if(n.style.hasLayer(a)){var o=this.buckets[a],s=o.layers[0].sourceLayer||"_geojsonTileLayer",l=i[s],u=r[s];if(l&&u&&0!==Object.keys(u).length){o.update(u,l,this.imageAtlas&&this.imageAtlas.patternPositions||{});var c=n&&n.style&&n.style.getLayer(a);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}}},s$.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},s$.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()},s$.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},s$.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=j.now()+r},s$.prototype.setDependencies=function(r,n){for(var i={},a=0;a<n.length;a+=1)i[n[a]]=!0;this.dependencies[r]=i},s$.prototype.hasDependency=function(r,n){for(var i=0;i<r.length;i+=1){var a=r[i],o=this.dependencies[a];if(o){for(var s=0;s<n.length;s+=1)if(o[n[s]])return!0}}return!1};var sQ=c.performance,s0=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},sQ.mark(this._marks.start)};s0.prototype.finish=function(){sQ.mark(this._marks.end);var r=sQ.getEntriesByName(this._marks.measure);return 0===r.length&&(sQ.measure(this._marks.measure,this._marks.start,this._marks.end),r=sQ.getEntriesByName(this._marks.measure),sQ.clearMarks(this._marks.start),sQ.clearMarks(this._marks.end),sQ.clearMeasures(this._marks.measure)),r},r.Actor=sL,r.AlphaImage=au,r.CanonicalTileID=sN,r.CollisionBoxArray=iu,r.Color=t3,r.DEMData=sH,r.DataConstantProperty=nR,r.DictionaryCoder=sq,r.EXTENT=8192,r.ErrorEvent=tC,r.EvaluationParameters=nS,r.Event=tL,r.Evented=tO,r.FeatureIndex=sW,r.FillBucket=aU,r.FillExtrusionBucket=a0,r.ImageAtlas=oD,r.ImagePosition=oP,r.LineBucket=a9,r.LngLat=sP,r.LngLatBounds=sO,r.MercatorCoordinate=sB,r.ONE_EM=24,r.OverscaledTileID=sU,r.Point=u,r.Point$1=u,r.Properties=nU,r.Protobuf=oh,r.RGBAImage=ac,r.RequestManager=Z,r.RequestPerformance=s0,r.ResourceType=ty,r.SegmentVector=ib,r.SourceFeatureState=sY,r.StructArrayLayout1ui2=io,r.StructArrayLayout2f1f2i16=n6,r.StructArrayLayout2i4=nX,r.StructArrayLayout3ui6=n7,r.StructArrayLayout4i8=nJ,r.SymbolBucket=sf,r.Texture=sS,r.Tile=s$,r.Transitionable=nC,r.Uniform1f=iC,r.Uniform1i=iL,r.Uniform2f=iO,r.Uniform3f=iP,r.Uniform4f=iI,r.UniformColor=iD,r.UniformMatrix4f=iR,r.UnwrappedTileID=sj,r.ValidationError=tI,r.WritingMode=oz,r.ZoomHistory=nu,r.add=function(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r},r.addDynamicAttributes=sl,r.asyncAll=function(r,n,i){if(!r.length)return i(null,[]);var a=r.length,o=Array(r.length),s=null;r.forEach(function(r,l){n(r,function(r,n){r&&(s=r),o[l]=n,0==--a&&i(s,o)})})},r.bezier=f,r.bindAll=b,r.browser=j,r.cacheEntryPossiblyAdded=function(r){++tv>tf&&(r.getActor().send("enforceCacheSizeLimit",tc),tv=0)},r.clamp=p,r.clearTileCache=function(r){var n=c.caches.delete(tu);r&&n.catch(r).then(function(){return r()})},r.clipLine=o1,r.clone=function(r){var n=new i9(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n},r.clone$1=k,r.clone$2=function(r){var n=new i9(3);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n},r.collisionCircleLayout=ol,r.config=U,r.create=function(){var r=new i9(16);return i9!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},r.create$1=function(){var r=new i9(9);return i9!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},r.create$2=function(){var r=new i9(4);return i9!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},r.createCommonjsModule=n,r.createExpression=rA,r.createLayout=nY,r.createStyleLayer=function(r){return"custom"===r.type?new sb(r):new s_[r.type](r)},r.cross=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=i[0],u=i[1],c=i[2];return r[0]=o*c-s*u,r[1]=s*l-a*c,r[2]=a*u-o*l,r},r.deepEqual=function r(n,i){if(Array.isArray(n)){if(!Array.isArray(i)||n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!r(n[a],i[a]))return!1;return!0}if("object"==typeof n&&null!==n&&null!==i){if("object"!=typeof i||Object.keys(n).length!==Object.keys(i).length)return!1;for(var o in n)if(!r(n[o],i[o]))return!1;return!0}return n===i},r.dot=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]},r.dot$1=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]},r.ease=h,r.emitValidationErrors=r7,r.endsWith=_,r.enforceCacheSizeLimit=function(r){th(),tr&&tr.then(function(n){n.keys().then(function(i){for(var a=0;a<i.length-r;a++)n.delete(i[a])})})},r.evaluateSizeForFeature=oX,r.evaluateSizeForZoom=oJ,r.evaluateVariableOffset=se,r.evented=nT,r.extend=v,r.featureFilter=rB,r.filterObject=T,r.fromRotation=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=a,r[1]=i,r[2]=0,r[3]=-i,r[4]=a,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},r.getAnchorAlignment=oG,r.getAnchorJustification=sr,r.getArrayBuffer=tT,r.getImage=tM,r.getJSON=function(r,n){return tw(v(r,{type:"json"}),n)},r.getRTLTextPluginStatus=nk,r.getReferrer=t_,r.getVideo=function(r,n){var i,a,o=c.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(var s=0;s<r.length;s++){var l=c.document.createElement("source");i=r[s],a=void 0,(a=c.document.createElement("a")).href=i,a.protocol===c.document.location.protocol&&a.host===c.document.location.host||(o.crossOrigin="Anonymous"),l.src=r[s],o.appendChild(l)}return{cancel:function(){}}},r.identity=at,r.invert=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],p=n[9],d=n[10],v=n[11],g=n[12],y=n[13],m=n[14],x=n[15],b=i*u-a*l,_=i*c-o*l,w=i*f-s*l,T=a*c-o*u,k=a*f-s*u,A=o*f-s*c,M=h*y-p*g,S=h*m-d*g,E=h*x-v*g,L=p*m-d*y,C=p*x-v*y,O=d*x-v*m,P=b*O-_*C+w*L+T*E-k*S+A*M;return P?(P=1/P,r[0]=(u*O-c*C+f*L)*P,r[1]=(o*C-a*O-s*L)*P,r[2]=(y*A-m*k+x*T)*P,r[3]=(d*k-p*A-v*T)*P,r[4]=(c*E-l*O-f*S)*P,r[5]=(i*O-o*E+s*S)*P,r[6]=(m*w-g*A-x*_)*P,r[7]=(h*A-d*w+v*_)*P,r[8]=(l*C-u*E+f*M)*P,r[9]=(a*E-i*C-s*M)*P,r[10]=(g*k-y*w+x*b)*P,r[11]=(p*w-h*k-v*b)*P,r[12]=(u*S-l*L-c*M)*P,r[13]=(i*L-a*S+o*M)*P,r[14]=(y*_-g*T-m*b)*P,r[15]=(h*T-p*_+d*b)*P,r):null},r.isChar=nc,r.isMapboxURL=Y,r.keysDifference=function(r,n){var i=[];for(var a in r)a in n||i.push(a);return i},r.makeRequest=tw,r.mapObject=w,r.mercatorXfromLng=sz,r.mercatorYfromLat=sR,r.mercatorZfromAltitude=function(r,n){return r/sD(n)},r.mul=ae,r.multiply=ae,r.mvt=aK,r.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},r.normalize=function(r,n){var i=n[0],a=n[1],o=n[2],s=i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s)),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r},r.number=eP,r.offscreenCanvasSupported=tg,r.ortho=function(r,n,i,a,o,s,l){var u=1/(n-i),c=1/(a-o),f=1/(s-l);return r[0]=-2*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(n+i)*u,r[13]=(o+a)*c,r[14]=(l+s)*f,r[15]=1,r},r.parseGlyphPBF=function(r){return new oh(r).readFields(oE,[])},r.pbf=oh,r.performSymbolLayout=function(r,n,i,a,o,s,l){r.createArrays();var c=512*r.overscaling;r.tilePixelRatio=8192/c,r.compareText={},r.iconsNeedLinear=!1;var f=r.layers[0].layout,h=r.layers[0]._unevaluatedLayout._values,p={};if("composite"===r.textSizeData.kind){var d=r.textSizeData,v=d.minZoom,g=d.maxZoom;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new nS(v),l),h["text-size"].possiblyEvaluate(new nS(g),l)]}if("composite"===r.iconSizeData.kind){var y=r.iconSizeData,m=y.minZoom,x=y.maxZoom;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new nS(m),l),h["icon-size"].possiblyEvaluate(new nS(x),l)]}p.layoutTextSize=h["text-size"].possiblyEvaluate(new nS(r.zoom+1),l),p.layoutIconSize=h["icon-size"].possiblyEvaluate(new nS(r.zoom+1),l),p.textMaxSize=h["text-size"].possiblyEvaluate(new nS(18));for(var b=24*f.get("text-line-height"),_="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),w=f.get("text-keep-upright"),T=f.get("text-size"),k=0,A=r.features;k<A.length;k+=1)(function(){var s=A[k],c=f.get("text-font").evaluate(s,{},l).join(","),h=T.evaluate(s,{},l),d=p.layoutTextSize.evaluate(s,{},l),v=p.layoutIconSize.evaluate(s,{},l),g={horizontal:{},vertical:void 0},y=s.text,m=[0,0];if(y){var x=y.toString(),S=24*f.get("text-letter-spacing").evaluate(s,{},l),E=!function(r){for(var n,i=0;i<r.length;i+=1)if(n=r[i].charCodeAt(0),nc.Arabic(n)||nc["Arabic Supplement"](n)||nc["Arabic Extended-A"](n)||nc["Arabic Presentation Forms-A"](n)||nc["Arabic Presentation Forms-B"](n))return!1;return!0}(x)?0:S,L=f.get("text-anchor").evaluate(s,{},l),C=f.get("text-variable-anchor");if(!C){var O=f.get("text-radial-offset").evaluate(s,{},l);m=O?se(L,[24*O,st]):f.get("text-offset").evaluate(s,{},l).map(function(r){return 24*r})}var P=_?"center":f.get("text-justify").evaluate(s,{},l),I=f.get("symbol-placement"),D="point"===I?24*f.get("text-max-width").evaluate(s,{},l):0,z=function(){r.allowVerticalPlacement&&nf(x)&&(g.vertical=oB(y,n,i,o,c,D,b,L,"left",E,m,oz.vertical,!0,I,d,h))};if(!_&&C){for(var R="auto"===P?C.map(function(r){return sr(r)}):[P],F=!1,B=0;B<R.length;B++){var N=R[B];if(!g.horizontal[N]){if(F)g.horizontal[N]=g.horizontal[0];else{var j=oB(y,n,i,o,c,D,b,"center",N,E,m,oz.horizontal,!1,I,d,h);j&&(g.horizontal[N]=j,F=1===j.positionedLines.length)}}}z()}else{"auto"===P&&(P=sr(L));var U=oB(y,n,i,o,c,D,b,L,P,E,m,oz.horizontal,!1,I,d,h);U&&(g.horizontal[P]=U),z(),nf(x)&&_&&w&&(g.vertical=oB(y,n,i,o,c,D,b,L,P,E,m,oz.vertical,!1,I,d,h))}}var V=void 0,H=!1;if(s.icon&&s.icon.name){var q,G,Z,Y,W,X,J,K,$,Q,tt=a[s.icon.name];tt&&(q=o[s.icon.name],G=f.get("icon-offset").evaluate(s,{},l),Y=(Z=oG(f.get("icon-anchor").evaluate(s,{},l))).horizontalAlign,W=Z.verticalAlign,X=G[0],J=G[1],$=(K=X-q.displaySize[0]*Y)+q.displaySize[0],Q=J-q.displaySize[1]*W,V={image:q,top:Q,bottom:Q+q.displaySize[1],left:K,right:$},H=tt.sdf,void 0===r.sdfIcons?r.sdfIcons=tt.sdf:r.sdfIcons!==tt.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tt.pixelRatio!==r.pixelRatio||0!==f.get("icon-rotate").constantOr(1))&&(r.iconsNeedLinear=!0))}var te=si(g.horizontal)||g.vertical;r.iconsInText=!!te&&te.iconsInText,(te||V)&&function(r,n,i,a,o,s,l,c,f,h,p){var d=s.textMaxSize.evaluate(n,{});void 0===d&&(d=l);var v,g=r.layers[0].layout,y=g.get("icon-offset").evaluate(n,{},p),m=si(i.horizontal),x=l/24,b=r.tilePixelRatio*x,_=r.tilePixelRatio*d/24,w=r.tilePixelRatio*c,T=r.tilePixelRatio*g.get("symbol-spacing"),k=g.get("text-padding")*r.tilePixelRatio,A=g.get("icon-padding")*r.tilePixelRatio,S=g.get("text-max-angle")/180*Math.PI,E="map"===g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),L="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),C=g.get("symbol-placement"),O=T/2,P=g.get("icon-text-fit");a&&"none"!==P&&(r.allowVerticalPlacement&&i.vertical&&(v=oZ(a,i.vertical,P,g.get("icon-text-fit-padding"),y,x)),m&&(a=oZ(a,m,P,g.get("icon-text-fit-padding"),y,x)));var I=function(u,c){c.x<0||c.x>=8192||c.y<0||c.y>=8192||function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,S){var E,L,C,O,P,I=r.addToLineVertexArray(n,i),D=0,z=0,R=0,F=0,B=-1,N=-1,j={},U=iT(""),V=0,H=0;if(void 0===u._unevaluatedLayout.getValue("text-radial-offset")?(V=(E=u.layout.get("text-offset").evaluate(w,{},A).map(function(r){return 24*r}))[0],H=E[1]):(V=24*u.layout.get("text-radial-offset").evaluate(w,{},A),H=st),r.allowVerticalPlacement&&a.vertical){var q=u.layout.get("text-rotate").evaluate(w,{},A)+90;O=new o4(c,n,f,h,p,a.vertical,d,v,g,q),l&&(P=new o4(c,n,f,h,p,l,m,x,g,q))}if(o){var G=u.layout.get("icon-rotate").evaluate(w,{}),Z="none"!==u.layout.get("icon-text-fit"),Y=o2(o,G,k,Z),W=l?o2(l,G,k,Z):void 0;C=new o4(c,n,f,h,p,o,m,x,!1,G),D=4*Y.length;var X=r.iconSizeData,J=null;"source"===X.kind?(J=[128*u.layout.get("icon-size").evaluate(w,{})])[0]>32640&&M(r.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===X.kind&&((J=[128*T.compositeIconSizes[0].evaluate(w,{},A),128*T.compositeIconSizes[1].evaluate(w,{},A)])[0]>32640||J[1]>32640)&&M(r.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),r.addSymbols(r.icon,Y,J,_,b,w,!1,n,I.lineStartIndex,I.lineLength,-1,A),B=r.icon.placedSymbolArray.length-1,W&&(z=4*W.length,r.addSymbols(r.icon,W,J,_,b,w,oz.vertical,n,I.lineStartIndex,I.lineLength,-1,A),N=r.icon.placedSymbolArray.length-1)}for(var K in a.horizontal){var $=a.horizontal[K];L||(U=iT($.text),L=new o4(c,n,f,h,p,$,d,v,g,u.layout.get("text-rotate").evaluate(w,{},A)));var Q=1===$.positionedLines.length;if(R+=sn(r,n,$,s,u,g,w,y,I,a.vertical?oz.horizontal:oz.horizontalOnly,Q?Object.keys(a.horizontal):[K],j,B,T,A),Q)break}a.vertical&&(F+=sn(r,n,a.vertical,s,u,g,w,y,I,oz.vertical,["vertical"],j,N,T,A));var tt=L?L.boxStartIndex:r.collisionBoxArray.length,te=L?L.boxEndIndex:r.collisionBoxArray.length,tr=O?O.boxStartIndex:r.collisionBoxArray.length,tn=O?O.boxEndIndex:r.collisionBoxArray.length,ti=C?C.boxStartIndex:r.collisionBoxArray.length,ta=C?C.boxEndIndex:r.collisionBoxArray.length,to=P?P.boxStartIndex:r.collisionBoxArray.length,ts=P?P.boxEndIndex:r.collisionBoxArray.length,tl=-1,tu=function(r,n){return r&&r.circleDiameter?Math.max(r.circleDiameter,n):n};tl=tu(L,-1),tl=tu(O,tl),tl=tu(C,tl);var tc=(tl=tu(P,tl))>-1?1:0;tc&&(tl*=S/24),r.glyphOffsetArray.length>=sf.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&r.addToSortKeyRanges(r.symbolInstances.length,w.sortKey),r.symbolInstances.emplaceBack(n.x,n.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,B,N,U,tt,te,tr,tn,ti,ta,to,ts,f,R,F,D,z,tc,0,d,V,H,tl)}(r,c,u,i,a,o,v,r.layers[0],r.collisionBoxArray,n.index,n.sourceLayerIndex,r.index,b,k,E,f,w,A,L,y,n,s,h,p,l)};if("line"===C)for(var D=0,z=o1(n.geometry,0,0,8192,8192);D<z.length;D+=1)for(var R=z[D],F=0,B=function(r,n,i,a,o,s,l,u,c){var f=a?.6*24*l:0,h=o0(a,o),p=h*l,d=0===r[0].x||8192===r[0].x||0===r[0].y||8192===r[0].y;return n-p<n/4&&(n=p+n/4),function r(n,i,a,o,s,l,u,c,f){for(var h=l/2,p=oQ(n),d=0,v=i-a,g=[],y=0;y<n.length-1;y++){for(var m=n[y],x=n[y+1],b=m.dist(x),_=x.angleTo(m);v+a<d+b;){var w=((v+=a)-d)/b,T=eP(m.x,x.x,w),k=eP(m.y,x.y,w);if(T>=0&&T<f&&k>=0&&k<f&&v-h>=0&&v+h<=p){var A=new oY(T,k,_,y);A._round(),o&&!o$(n,A,l,o,s)||g.push(A)}}d+=b}return c||g.length||u||(g=r(n,d/2,a,o,s,l,u,!0,f)),g}(r,d?n/2*u%n:(h/2+48)*l*u%n,n,f,i,p,d,!1,8192)}(R,T,S,i.vertical||m,a,0,_,r.overscaling,8192);F<B.length;F+=1){var N=B[F];m&&function(r,n,i,a){var o=r.compareText;if(n in o){for(var s=o[n],l=s.length-1;l>=0;l--)if(a.dist(s[l])<i)return!0}else o[n]=[];return o[n].push(a),!1}(r,m.text,O,N)||I(R,N)}else if("line-center"===C)for(var j=0,U=n.geometry;j<U.length;j+=1){var V=U[j];if(V.length>1){var H=function(r,n,i,a,o,s){for(var l=i?.6*24*s:0,u=o0(i,a)*s,c=0,f=oQ(r)/2,h=0;h<r.length-1;h++){var p=r[h],d=r[h+1],v=p.dist(d);if(c+v>f){var g=(f-c)/v,y=new oY(eP(p.x,d.x,g),eP(p.y,d.y,g),d.angleTo(p),h);return y._round(),!l||o$(r,y,u,l,n)?y:void 0}c+=v}}(V,S,i.vertical||m,a,0,_);H&&I(V,H)}}else if("Polygon"===n.type)for(var q=0,G=aF(n.geometry,0);q<G.length;q+=1){var Z=G[q],Y=function(r,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);for(var a=1/0,o=1/0,s=-1/0,l=-1/0,c=r[0],f=0;f<c.length;f++){var h=c[f];(!f||h.x<a)&&(a=h.x),(!f||h.y<o)&&(o=h.y),(!f||h.x>s)&&(s=h.x),(!f||h.y>l)&&(l=h.y)}var p=Math.min(s-a,l-o),d=p/2,v=new o6([],o7);if(0===p)return new u(a,o);for(var g=a;g<s;g+=p)for(var y=o;y<l;y+=p)v.push(new o9(g+d,y+d,d,r));for(var m=function(r){for(var n=0,i=0,a=0,o=r[0],s=0,l=o.length,u=l-1;s<l;u=s++){var c=o[s],f=o[u],h=c.x*f.y-f.x*c.y;i+=(c.x+f.x)*h,a+=(c.y+f.y)*h,n+=3*h}return new o9(i/n,a/n,0,r)}(r),x=v.length;v.length;){var b=v.pop();(b.d>m.d||!m.d)&&(m=b,i&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,x)),b.max-m.d<=n||(d=b.h/2,v.push(new o9(b.p.x-d,b.p.y-d,d,r)),v.push(new o9(b.p.x+d,b.p.y-d,d,r)),v.push(new o9(b.p.x-d,b.p.y+d,d,r)),v.push(new o9(b.p.x+d,b.p.y+d,d,r)),x+=4)}return i&&(console.log("num probes: "+x),console.log("best distance: "+m.d)),m.p}(Z,16);I(Z[0],new oY(Y.x,Y.y,0))}else if("LineString"===n.type)for(var W=0,X=n.geometry;W<X.length;W+=1){var J=X[W];I(J,new oY(J[0].x,J[0].y,0))}else if("Point"===n.type)for(var K=0,$=n.geometry;K<$.length;K+=1)for(var Q=0,tt=$[K];Q<tt.length;Q+=1){var te=tt[Q];I([te],new oY(te.x,te.y,0))}}(r,s,g,V,a,p,d,v,m,H,l)})();s&&r.generateCollisionDebugBuffers()},r.perspective=function(r,n,i,a,o){var s,l=1/Math.tan(n/2);return r[0]=l/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=o&&o!==1/0?(s=1/(a-o),r[10]=(o+a)*s,r[14]=2*o*a*s):(r[10]=-1,r[14]=-2*a),r},r.pick=function(r,n){for(var i={},a=0;a<n.length;a++){var o=n[a];o in r&&(i[o]=r[o])}return i},r.plugin=nM,r.polygonIntersectsPolygon=iK,r.postMapLoadEvent=tl,r.postTurnstileEvent=to,r.potpack=oO,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=nn,r.registerForPluginStateChange=function(r){return r({pluginStatus:nx,pluginURL:nb}),nT.on("pluginStateChange",r),r},r.renderColorRamp=ah,r.rotate=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=Math.sin(i),c=Math.cos(i);return r[0]=a*c+s*u,r[1]=o*c+l*u,r[2]=-(a*u)+s*c,r[3]=-(o*u)+l*c,r},r.rotateX=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*o+f*a,r[5]=l*o+h*a,r[6]=u*o+p*a,r[7]=c*o+d*a,r[8]=f*o-s*a,r[9]=h*o-l*a,r[10]=p*o-u*a,r[11]=d*o-c*a,r},r.rotateZ=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],f=n[4],h=n[5],p=n[6],d=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o+f*a,r[1]=l*o+h*a,r[2]=u*o+p*a,r[3]=c*o+d*a,r[4]=f*o-s*a,r[5]=h*o-l*a,r[6]=p*o-u*a,r[7]=d*o-c*a,r},r.scale=function(r,n,i){var a=i[0],o=i[1],s=i[2];return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=n[3]*a,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=n[7]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r},r.scale$1=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=n[3]*i,r},r.scale$2=function(r,n,i){return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r},r.setCacheLimits=function(r,n){tc=r,tf=n},r.setRTLTextPlugin=function(r,n,i){if(void 0===i&&(i=!1),nx===nv||nx===ng||nx===ny)throw Error("setRTLTextPlugin cannot be called multiple times.");nb=j.resolveURL(r),nx=nv,nm=n,nw(),i||nA()},r.sphericalToCartesian=function(r){var n=r[0],i=r[1],a=r[2];return i+=90,{x:n*Math.cos(i*=Math.PI/180)*Math.sin(a*=Math.PI/180),y:n*Math.sin(i)*Math.sin(a),z:n*Math.cos(a)}},r.sqrLen=function(r){var n=r[0],i=r[1];return n*n+i*i},r.styleSpec=tP,r.sub=function(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r},r.symbolSize=oK,r.transformMat3=function(r,n,i){var a=n[0],o=n[1],s=n[2];return r[0]=a*i[0]+o*i[3]+s*i[6],r[1]=a*i[1]+o*i[4]+s*i[7],r[2]=a*i[2]+o*i[5]+s*i[8],r},r.transformMat4=ar,r.translate=function(r,n,i){var a,o,s,l,u,c,f,h,p,d,v,g,y=i[0],m=i[1],x=i[2];return n===r?(r[12]=n[0]*y+n[4]*m+n[8]*x+n[12],r[13]=n[1]*y+n[5]*m+n[9]*x+n[13],r[14]=n[2]*y+n[6]*m+n[10]*x+n[14],r[15]=n[3]*y+n[7]*m+n[11]*x+n[15]):(a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],v=n[10],g=n[11],r[0]=a,r[1]=o,r[2]=s,r[3]=l,r[4]=u,r[5]=c,r[6]=f,r[7]=h,r[8]=p,r[9]=d,r[10]=v,r[11]=g,r[12]=a*y+u*m+p*x+n[12],r[13]=o*y+c*m+d*x+n[13],r[14]=s*y+f*m+v*x+n[14],r[15]=l*y+h*m+g*x+n[15]),r},r.triggerPluginCompletionEvent=n_,r.uniqueId=y,r.validateCustomStyleLayer=function(r){var n=[],i=r.id;return void 0===i&&n.push({message:"layers."+i+': missing required property "id"'}),void 0===r.render&&n.push({message:"layers."+i+': missing required method "render"'}),r.renderingMode&&"2d"!==r.renderingMode&&"3d"!==r.renderingMode&&n.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),n},r.validateLight=r4,r.validateStyle=r2,r.values=function(r){var n=[];for(var i in r)n.push(r[i]);return n},r.vectorTile=aK,r.version=s,r.warnOnce=M,r.webpSupported=V,r.window=c,r.wrap=d}),a(0,function(r){var n=function(r){this.keyCache={},r&&this.replace(r)};n.prototype.replace=function(r){this._layerConfigs={},this._layers={},this.update(r,[])},n.prototype.update=function(n,i){for(var a=this,o=0;o<n.length;o+=1){var s=n[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=r.createStyleLayer(s);l._featureFilter=r.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0;u<i.length;u+=1){var c=i[u];delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}this.familiesBySource={};for(var f=0,h=function(n,i){for(var a={},o=0;o<n.length;o++){var s=i&&i[n[o].id]||function(n){for(var i="",a=0,o=r.refProperties;a<o.length;a+=1)i+="/"+function r(n){var i=typeof n;if("number"===i||"boolean"===i||"string"===i||null==n)return JSON.stringify(n);if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o+=1)a+=r(n[o])+",";return a+"]"}for(var s=Object.keys(n).sort(),l="{",u=0;u<s.length;u++)l+=JSON.stringify(s[u])+":"+r(n[s[u]])+",";return l+"}"}(n[o[a]]);return i}(n[o]);i&&(i[n[o].id]=s);var l=a[s];l||(l=a[s]=[]),l.push(n[o])}var u=[];for(var c in a)u.push(a[c]);return u}(r.values(this._layerConfigs),this.keyCache);f<h.length;f+=1){var p=h[f].map(function(r){return a._layers[r.id]}),d=p[0];if("none"!==d.visibility){var v=d.source||"",g=this.familiesBySource[v];g||(g=this.familiesBySource[v]={});var y=d.sourceLayer||"_geojsonTileLayer",m=g[y];m||(m=g[y]=[]),m.push(p)}}};var i=function(n){var i={},a=[];for(var o in n){var s=n[o],l=i[o]={};for(var u in s){var c=s[+u];if(c&&0!==c.bitmap.width&&0!==c.bitmap.height){var f={x:0,y:0,w:c.bitmap.width+2,h:c.bitmap.height+2};a.push(f),l[u]={rect:f,metrics:c.metrics}}}}var h=r.potpack(a),p=h.w,d=h.h,v=new r.AlphaImage({width:p||1,height:d||1});for(var g in n){var y=n[g];for(var m in y){var x=y[+m];if(x&&0!==x.bitmap.width&&0!==x.bitmap.height){var b=i[g][m].rect;r.AlphaImage.copy(x.bitmap,v,{x:0,y:0},{x:b.x+1,y:b.y+1},x.bitmap)}}}this.image=v,this.positions=i};r.register("GlyphAtlas",i);var a=function(n){this.tileID=new r.OverscaledTileID(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.uid=n.uid,this.zoom=n.zoom,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId};function o(n,i,a){for(var o=new r.EvaluationParameters(i),s=0;s<n.length;s+=1)n[s].recalculate(o,a)}function s(n,i){var a=r.getArrayBuffer(n.request,function(n,a,o,s){n?i(n):a&&i(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(a)),rawData:a,cacheControl:o,expires:s})});return function(){a.cancel(),i()}}a.prototype.parse=function(n,a,s,l,u){var c=this;this.status="parsing",this.data=n,this.collisionBoxArray=new r.CollisionBoxArray;var f=new r.DictionaryCoder(Object.keys(n.layers).sort()),h=new r.FeatureIndex(this.tileID,this.promoteId);h.bucketLayerIDs=[];var p,d,v,g,y={},m={featureIndex:h,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:s},x=a.familiesBySource[this.source];for(var b in x){var _=n.layers[b];if(_){1===_.version&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=f.encode(b),T=[],k=0;k<_.length;k++){var A=_.feature(k),M=h.getId(A,b);T.push({feature:A,id:M,index:k,sourceLayerIndex:w})}for(var S=0,E=x[b];S<E.length;S+=1){var L=E[S],C=L[0];C.minzoom&&this.zoom<Math.floor(C.minzoom)||C.maxzoom&&this.zoom>=C.maxzoom||"none"!==C.visibility&&(o(L,this.zoom,s),(y[C.id]=C.createBucket({index:h.bucketLayerIDs.length,layers:L,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:w,sourceID:this.source})).populate(T,m,this.tileID.canonical),h.bucketLayerIDs.push(L.map(function(r){return r.id})))}}}var O=r.mapObject(m.glyphDependencies,function(r){return Object.keys(r).map(Number)});Object.keys(O).length?l.send("getGlyphs",{uid:this.uid,stacks:O},function(r,n){p||(p=r,d=n,D.call(c))}):d={};var P=Object.keys(m.iconDependencies);P.length?l.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"icons"},function(r,n){p||(p=r,v=n,D.call(c))}):v={};var I=Object.keys(m.patternDependencies);function D(){if(p)return u(p);if(d&&v&&g){var n=new i(d),a=new r.ImageAtlas(v,g);for(var l in y){var c=y[l];c instanceof r.SymbolBucket?(o(c.layers,this.zoom,s),r.performSymbolLayout(c,d,n.positions,v,a.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):c.hasPattern&&(c instanceof r.LineBucket||c instanceof r.FillBucket||c instanceof r.FillExtrusionBucket)&&(o(c.layers,this.zoom,s),c.addFeatures(m,this.tileID.canonical,a.patternPositions))}this.status="done",u(null,{buckets:r.values(y).filter(function(r){return!r.isEmpty()}),featureIndex:h,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:n.image,imageAtlas:a,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?v:null,glyphPositions:this.returnDependencies?n.positions:null})}}I.length?l.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"patterns"},function(r,n){p||(p=r,g=n,D.call(c))}):g={},D.call(this)};var l=function(r,n,i,a){this.actor=r,this.layerIndex=n,this.availableImages=i,this.loadVectorData=a||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(n,i){var o=this,s=n.uid;this.loading||(this.loading={});var l=!!(n&&n.request&&n.request.collectResourceTiming)&&new r.RequestPerformance(n.request),u=this.loading[s]=new a(n);u.abort=this.loadVectorData(n,function(n,a){if(delete o.loading[s],n||!a)return u.status="done",o.loaded[s]=u,i(n);var c=a.rawData,f={};a.expires&&(f.expires=a.expires),a.cacheControl&&(f.cacheControl=a.cacheControl);var h={};if(l){var p=l.finish();p&&(h.resourceTiming=JSON.parse(JSON.stringify(p)))}u.vectorTile=a.vectorTile,u.parse(a.vectorTile,o.layerIndex,o.availableImages,o.actor,function(n,a){if(n||!a)return i(n);i(null,r.extend({rawTileData:c.slice(0)},a,f,h))}),o.loaded=o.loaded||{},o.loaded[s]=u})},l.prototype.reloadTile=function(r,n){var i=this,a=this.loaded,o=r.uid,s=this;if(a&&a[o]){var l=a[o];l.showCollisionBoxes=r.showCollisionBoxes;var u=function(r,a){var o=l.reloadCallback;o&&(delete l.reloadCallback,l.parse(l.vectorTile,s.layerIndex,i.availableImages,s.actor,o)),n(r,a)};"parsing"===l.status?l.reloadCallback=u:"done"===l.status&&(l.vectorTile?l.parse(l.vectorTile,this.layerIndex,this.availableImages,this.actor,u):u())}},l.prototype.abortTile=function(r,n){var i=this.loading,a=r.uid;i&&i[a]&&i[a].abort&&(i[a].abort(),delete i[a]),n()},l.prototype.removeTile=function(r,n){var i=this.loaded,a=r.uid;i&&i[a]&&delete i[a],n()};var u=r.window.ImageBitmap,c=function(){this.loaded={}};c.prototype.loadTile=function(n,i){var a=n.uid,o=n.encoding,s=n.rawImageData,l=u&&s instanceof u?this.getImageData(s):s,c=new r.DEMData(a,l,o);this.loaded=this.loaded||{},this.loaded[a]=c,i(null,c)},c.prototype.getImageData=function(n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(n.width,n.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=n.width,this.offscreenCanvas.height=n.height,this.offscreenCanvasContext.drawImage(n,0,0,n.width,n.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,n.width+2,n.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:i.width,height:i.height},i.data)},c.prototype.removeTile=function(r){var n=this.loaded,i=r.uid;n&&n[i]&&delete n[i]};var f=function r(n,i){var a,o=n&&n.type;if("FeatureCollection"===o)for(a=0;a<n.features.length;a++)r(n.features[a],i);else if("GeometryCollection"===o)for(a=0;a<n.geometries.length;a++)r(n.geometries[a],i);else if("Feature"===o)r(n.geometry,i);else if("Polygon"===o)h(n.coordinates,i);else if("MultiPolygon"===o)for(a=0;a<n.coordinates.length;a++)h(n.coordinates[a],i);return n};function h(r,n){if(0!==r.length){p(r[0],n);for(var i=1;i<r.length;i++)p(r[i],!n)}}function p(r,n){for(var i=0,a=0,o=r.length,s=o-1;a<o;s=a++)i+=(r[a][0]-r[s][0])*(r[s][1]+r[a][1]);i>=0!=!!n&&r.reverse()}var d=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,v=function(n){this._feature=n,this.extent=r.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))};v.prototype.loadGeometry=function(){if(1===this._feature.type){for(var n=[],i=0,a=this._feature.geometry;i<a.length;i+=1){var o=a[i];n.push([new r.Point$1(o[0],o[1])])}return n}for(var s=[],l=0,u=this._feature.geometry;l<u.length;l+=1){for(var c=[],f=0,h=u[l];f<h.length;f+=1){var p=h[f];c.push(new r.Point$1(p[0],p[1]))}s.push(c)}return s},v.prototype.toGeoJSON=function(r,n,i){return d.call(this,r,n,i)};var g=function(n){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=n.length,this._features=n};g.prototype.feature=function(r){return new v(this._features[r])};var y=r.vectorTile.VectorTileFeature;function m(r,n){this.options=n||{},this.features=r,this.length=r.length}function x(r,n){this.id="number"==typeof r.id?r.id:void 0,this.type=r.type,this.rawGeometry=1===r.type?[r.geometry]:r.geometry,this.properties=r.tags,this.extent=n||4096}m.prototype.feature=function(r){return new x(this.features[r],this.options.extent)},x.prototype.loadGeometry=function(){var n=this.rawGeometry;this.geometry=[];for(var i=0;i<n.length;i++){for(var a=n[i],o=[],s=0;s<a.length;s++)o.push(new r.Point$1(a[s][0],a[s][1]));this.geometry.push(o)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var r=this.geometry,n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<r.length;s++)for(var l=r[s],u=0;u<l.length;u++){var c=l[u];n=Math.min(n,c.x),i=Math.max(i,c.x),a=Math.min(a,c.y),o=Math.max(o,c.y)}return[n,a,i,o]},x.prototype.toGeoJSON=y.prototype.toGeoJSON;var b=_;function _(n){var i=new r.pbf;return function(r,n){for(var i in r.layers)n.writeMessage(3,w,r.layers[i])}(n,i),i.finish()}function w(r,n){n.writeVarintField(15,r.version||1),n.writeStringField(1,r.name||""),n.writeVarintField(5,r.extent||4096);var i,a={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<r.length;i++)a.feature=r.feature(i),n.writeMessage(2,T,a);var o=a.keys;for(i=0;i<o.length;i++)n.writeStringField(3,o[i]);var s=a.values;for(i=0;i<s.length;i++)n.writeMessage(4,M,s[i])}function T(r,n){var i=r.feature;void 0!==i.id&&n.writeVarintField(1,i.id),n.writeMessage(2,k,r),n.writeVarintField(3,i.type),n.writeMessage(4,A,i)}function k(r,n){var i=r.feature,a=r.keys,o=r.values,s=r.keycache,l=r.valuecache;for(var u in i.properties){var c=s[u];void 0===c&&(a.push(u),c=a.length-1,s[u]=c),n.writeVarint(c);var f=i.properties[u],h=typeof f;"string"!==h&&"boolean"!==h&&"number"!==h&&(f=JSON.stringify(f));var p=h+":"+f,d=l[p];void 0===d&&(o.push(f),d=o.length-1,l[p]=d),n.writeVarint(d)}}function A(r,n){for(var i=r.loadGeometry(),a=r.type,o=0,s=0,l=i.length,u=0;u<l;u++){var c=i[u],f=1;1===a&&(f=c.length),n.writeVarint((f<<3)+1);for(var h=3===a?c.length-1:c.length,p=0;p<h;p++){1===p&&1!==a&&n.writeVarint((h-1<<3)+2);var d=c[p].x-o,v=c[p].y-s;n.writeVarint(d<<1^d>>31),n.writeVarint(v<<1^v>>31),o+=d,s+=v}3===a&&n.writeVarint(15)}}function M(r,n){var i=typeof r;"string"===i?n.writeStringField(1,r):"boolean"===i?n.writeBooleanField(7,r):"number"===i&&(r%1!=0?n.writeDoubleField(3,r):r<0?n.writeSVarintField(6,r):n.writeVarintField(5,r))}function S(r,n,i,a){E(r,i,a),E(n,2*i,2*a),E(n,2*i+1,2*a+1)}function E(r,n,i){var a=r[n];r[n]=r[i],r[i]=a}function L(r,n,i,a){var o=r-i,s=n-a;return o*o+s*s}b.fromVectorTileJs=_,b.fromGeojsonVt=function(r,n){n=n||{};var i={};for(var a in r)i[a]=new m(r[a].features,n),i[a].name=a,i[a].version=n.version,i[a].extent=n.extent;return _({layers:i})},b.GeoJSONWrapper=m;var C=function(r){return r[0]},O=function(r){return r[1]},P=function(r,n,i,a,o){void 0===n&&(n=C),void 0===i&&(i=O),void 0===a&&(a=64),void 0===o&&(o=Float64Array),this.nodeSize=a,this.points=r;for(var s=r.length<65536?Uint16Array:Uint32Array,l=this.ids=new s(r.length),u=this.coords=new o(2*r.length),c=0;c<r.length;c++)l[c]=c,u[2*c]=n(r[c]),u[2*c+1]=i(r[c]);(function r(n,i,a,o,s,l){if(!(s-o<=a)){var u=o+s>>1;(function r(n,i,a,o,s,l){for(;s>o;){if(s-o>600){var u=s-o+1,c=a-o+1,f=Math.log(u),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(u-h)/u)*(c-u/2<0?-1:1);r(n,i,a,Math.max(o,Math.floor(a-c*h/u+p)),Math.min(s,Math.floor(a+(u-c)*h/u+p)),l)}var d=i[2*a+l],v=o,g=s;for(S(n,i,o,a),i[2*s+l]>d&&S(n,i,o,s);v<g;){for(S(n,i,v,g),v++,g--;i[2*v+l]<d;)v++;for(;i[2*g+l]>d;)g--}i[2*o+l]===d?S(n,i,o,g):S(n,i,++g,s),g<=a&&(o=g+1),a<=g&&(s=g-1)}})(n,i,u,o,s,l%2),r(n,i,a,o,u-1,l+1),r(n,i,a,u+1,s,l+1)}})(l,u,a,0,l.length-1,0)};P.prototype.range=function(r,n,i,a){return function(r,n,i,a,o,s,l){for(var u,c,f=[0,r.length-1,0],h=[];f.length;){var p=f.pop(),d=f.pop(),v=f.pop();if(d-v<=l)for(var g=v;g<=d;g++)u=n[2*g],c=n[2*g+1],u>=i&&u<=o&&c>=a&&c<=s&&h.push(r[g]);else{var y=Math.floor((v+d)/2);u=n[2*y],c=n[2*y+1],u>=i&&u<=o&&c>=a&&c<=s&&h.push(r[y]);var m=(p+1)%2;(0===p?i<=u:a<=c)&&(f.push(v),f.push(y-1),f.push(m)),(0===p?o>=u:s>=c)&&(f.push(y+1),f.push(d),f.push(m))}}return h}(this.ids,this.coords,r,n,i,a,this.nodeSize)},P.prototype.within=function(r,n,i){return function(r,n,i,a,o,s){for(var l=[0,r.length-1,0],u=[],c=o*o;l.length;){var f=l.pop(),h=l.pop(),p=l.pop();if(h-p<=s)for(var d=p;d<=h;d++)L(n[2*d],n[2*d+1],i,a)<=c&&u.push(r[d]);else{var v=Math.floor((p+h)/2),g=n[2*v],y=n[2*v+1];L(g,y,i,a)<=c&&u.push(r[v]);var m=(f+1)%2;(0===f?i-o<=g:a-o<=y)&&(l.push(p),l.push(v-1),l.push(m)),(0===f?i+o>=g:a+o>=y)&&(l.push(v+1),l.push(h),l.push(m))}}return u}(this.ids,this.coords,r,n,i,this.nodeSize)};var I={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(r){return r}},D=function(r){this.options=N(Object.create(I),r),this.trees=Array(this.options.maxZoom+1)};function z(r){return{type:"Feature",id:r.id,properties:R(r),geometry:{type:"Point",coordinates:[360*(r.x-.5),360*Math.atan(Math.exp((180-360*r.y)*Math.PI/180))/Math.PI-90]}}}function R(r){var n=r.numPoints,i=n>=1e4?Math.round(n/1e3)+"k":n>=1e3?Math.round(n/100)/10+"k":n;return N(N({},r.properties),{cluster:!0,cluster_id:r.id,point_count:n,point_count_abbreviated:i})}function F(r){return r/360+.5}function B(r){var n=Math.sin(r*Math.PI/180),i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return i<0?0:i>1?1:i}function N(r,n){for(var i in n)r[i]=n[i];return r}function j(r){return r.x}function U(r){return r.y}function V(r,n,i,a){var o={id:void 0===r?null:r,type:n,geometry:i,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(r){var n=r.geometry,i=r.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)H(r,n);else if("Polygon"===i||"MultiLineString"===i)for(var a=0;a<n.length;a++)H(r,n[a]);else if("MultiPolygon"===i)for(a=0;a<n.length;a++)for(var o=0;o<n[a].length;o++)H(r,n[a][o])}(o),o}function H(r,n){for(var i=0;i<n.length;i+=3)r.minX=Math.min(r.minX,n[i]),r.minY=Math.min(r.minY,n[i+1]),r.maxX=Math.max(r.maxX,n[i]),r.maxY=Math.max(r.maxY,n[i+1])}function q(r,n,i,a){if(n.geometry){var o=n.geometry.coordinates,s=n.geometry.type,l=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),u=[],c=n.id;if(i.promoteId?c=n.properties[i.promoteId]:i.generateId&&(c=a||0),"Point"===s)G(o,u);else if("MultiPoint"===s)for(var f=0;f<o.length;f++)G(o[f],u);else if("LineString"===s)Z(o,u,l,!1);else if("MultiLineString"===s){if(i.lineMetrics){for(f=0;f<o.length;f++)u=[],Z(o[f],u,l,!1),r.push(V(c,"LineString",u,n.properties));return}Y(o,u,l,!1)}else if("Polygon"===s)Y(o,u,l,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(f=0;f<n.geometry.geometries.length;f++)q(r,{id:c,geometry:n.geometry.geometries[f],properties:n.properties},i,a);return}throw Error("Input data is not a valid GeoJSON object.")}for(f=0;f<o.length;f++){var h=[];Y(o[f],h,l,!0),u.push(h)}}r.push(V(c,s,u,n.properties))}}function G(r,n){n.push(r[0]/360+.5),n.push(W(r[1])),n.push(0)}function Z(r,n,i,a){for(var o,s,l=0,u=0;u<r.length;u++){var c=r[u][0]/360+.5,f=W(r[u][1]);n.push(c),n.push(f),n.push(0),u>0&&(l+=a?(o*f-c*s)/2:Math.sqrt(Math.pow(c-o,2)+Math.pow(f-s,2))),o=c,s=f}var h=n.length-3;n[2]=1,function r(n,i,a,o){for(var s,l=o,u=a-i>>1,c=a-i,f=n[i],h=n[i+1],p=n[a],d=n[a+1],v=i+3;v<a;v+=3){var g=function(r,n,i,a,o,s){var l=o-i,u=s-a;if(0!==l||0!==u){var c=((r-i)*l+(n-a)*u)/(l*l+u*u);c>1?(i=o,a=s):c>0&&(i+=l*c,a+=u*c)}return(l=r-i)*l+(u=n-a)*u}(n[v],n[v+1],f,h,p,d);if(g>l)s=v,l=g;else if(g===l){var y=Math.abs(v-u);y<c&&(s=v,c=y)}}l>o&&(s-i>3&&r(n,i,s,o),n[s+2]=l,a-s>3&&r(n,s,a,o))}(n,0,h,i),n[h+2]=1,n.size=Math.abs(l),n.start=0,n.end=n.size}function Y(r,n,i,a){for(var o=0;o<r.length;o++){var s=[];Z(r[o],s,i,a),n.push(s)}}function W(r){var n=Math.sin(r*Math.PI/180),i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return i<0?0:i>1?1:i}function X(r,n,i,a,o,s,l,u){if(a/=n,s>=(i/=n)&&l<a)return r;if(l<i||s>=a)return null;for(var c=[],f=0;f<r.length;f++){var h=r[f],p=h.geometry,d=h.type,v=0===o?h.minX:h.minY,g=0===o?h.maxX:h.maxY;if(v>=i&&g<a)c.push(h);else if(!(g<i||v>=a)){var y=[];if("Point"===d||"MultiPoint"===d)(function(r,n,i,a,o){for(var s=0;s<r.length;s+=3){var l=r[s+o];l>=i&&l<=a&&(n.push(r[s]),n.push(r[s+1]),n.push(r[s+2]))}})(p,y,i,a,o);else if("LineString"===d)J(p,y,i,a,o,!1,u.lineMetrics);else if("MultiLineString"===d)$(p,y,i,a,o,!1);else if("Polygon"===d)$(p,y,i,a,o,!0);else if("MultiPolygon"===d)for(var m=0;m<p.length;m++){var x=[];$(p[m],x,i,a,o,!0),x.length&&y.push(x)}if(y.length){if(u.lineMetrics&&"LineString"===d){for(m=0;m<y.length;m++)c.push(V(h.id,d,y[m],h.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===y.length?(d="LineString",y=y[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===y.length?"Point":"MultiPoint"),c.push(V(h.id,d,y,h.tags))}}}return c.length?c:null}function J(r,n,i,a,o,s,l){for(var u,c,f=K(r),h=0===o?tt:te,p=r.start,d=0;d<r.length-3;d+=3){var v=r[d],g=r[d+1],y=r[d+2],m=r[d+3],x=r[d+4],b=0===o?v:g,_=0===o?m:x,w=!1;l&&(u=Math.sqrt(Math.pow(v-m,2)+Math.pow(g-x,2))),b<i?_>i&&(c=h(f,v,g,m,x,i),l&&(f.start=p+u*c)):b>a?_<a&&(c=h(f,v,g,m,x,a),l&&(f.start=p+u*c)):Q(f,v,g,y),_<i&&b>=i&&(c=h(f,v,g,m,x,i),w=!0),_>a&&b<=a&&(c=h(f,v,g,m,x,a),w=!0),!s&&w&&(l&&(f.end=p+u*c),n.push(f),f=K(r)),l&&(p+=u)}var T=r.length-3;v=r[T],g=r[T+1],y=r[T+2],(b=0===o?v:g)>=i&&b<=a&&Q(f,v,g,y),T=f.length-3,s&&T>=3&&(f[T]!==f[0]||f[T+1]!==f[1])&&Q(f,f[0],f[1],f[2]),f.length&&n.push(f)}function K(r){var n=[];return n.size=r.size,n.start=r.start,n.end=r.end,n}function $(r,n,i,a,o,s){for(var l=0;l<r.length;l++)J(r[l],n,i,a,o,s,!1)}function Q(r,n,i,a){r.push(n),r.push(i),r.push(a)}function tt(r,n,i,a,o,s){var l=(s-n)/(a-n);return r.push(s),r.push(i+(o-i)*l),r.push(1),l}function te(r,n,i,a,o,s){var l=(s-i)/(o-i);return r.push(n+(a-n)*l),r.push(s),r.push(1),l}function tr(r,n){for(var i=[],a=0;a<r.length;a++){var o,s=r[a],l=s.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)o=tn(s.geometry,n);else if("MultiLineString"===l||"Polygon"===l){o=[];for(var u=0;u<s.geometry.length;u++)o.push(tn(s.geometry[u],n))}else if("MultiPolygon"===l)for(o=[],u=0;u<s.geometry.length;u++){for(var c=[],f=0;f<s.geometry[u].length;f++)c.push(tn(s.geometry[u][f],n));o.push(c)}i.push(V(s.id,l,o,s.tags))}return i}function tn(r,n){var i=[];i.size=r.size,void 0!==r.start&&(i.start=r.start,i.end=r.end);for(var a=0;a<r.length;a+=3)i.push(r[a]+n,r[a+1],r[a+2]);return i}function ti(r,n){if(r.transformed)return r;var i,a,o,s=1<<r.z,l=r.x,u=r.y;for(i=0;i<r.features.length;i++){var c=r.features[i],f=c.geometry,h=c.type;if(c.geometry=[],1===h)for(a=0;a<f.length;a+=2)c.geometry.push(ta(f[a],f[a+1],n,s,l,u));else for(a=0;a<f.length;a++){var p=[];for(o=0;o<f[a].length;o+=2)p.push(ta(f[a][o],f[a][o+1],n,s,l,u));c.geometry.push(p)}}return r.transformed=!0,r}function ta(r,n,i,a,o,s){return[Math.round(i*(r*a-o)),Math.round(i*(n*a-s))]}function to(r,n,i,a,o,s){var l=a*a;if(a>0&&n.size<(o?l:a))i.numPoints+=n.length/3;else{for(var u=[],c=0;c<n.length;c+=3)(0===a||n[c+2]>l)&&(i.numSimplified++,u.push(n[c]),u.push(n[c+1])),i.numPoints++;o&&function(r,n){for(var i=0,a=0,o=r.length,s=o-2;a<o;s=a,a+=2)i+=(r[a]-r[s])*(r[a+1]+r[s+1]);if(i>0===n)for(a=0,o=r.length;a<o/2;a+=2){var l=r[a],u=r[a+1];r[a]=r[o-2-a],r[a+1]=r[o-1-a],r[o-2-a]=l,r[o-1-a]=u}}(u,s),r.push(u)}}function ts(r,n){var i,a,o,s,l,u,c=(n=this.options=function(r,n){for(var i in n)r[i]=n[i];return r}(Object.create(this.options),n)).debug;if(c&&console.time("preprocess data"),n.maxZoom<0||n.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw Error("promoteId and generateId cannot be used together.");var f=function(r,n){var i=[];if("FeatureCollection"===r.type)for(var a=0;a<r.features.length;a++)q(i,r.features[a],n,a);else"Feature"===r.type?q(i,r,n):q(i,{geometry:r},n);return i}(r,n);this.tiles={},this.tileCoords=[],c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=f,o=(a=n).buffer/a.extent,s=i,l=X(i,1,-1-o,o,0,-1,2,a),u=X(i,1,1-o,2+o,0,-1,2,a),(l||u)&&(s=X(i,1,-o,1+o,0,-1,2,a)||[],l&&(s=tr(l,1).concat(s)),u&&(s=s.concat(tr(u,-1)))),f=s).length&&this.splitTile(f,0,0,0),c&&(f.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tl(r,n,i){return 32*((1<<r)*i+n)+r}function tu(r,n){var i=r.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);var a=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!a)return n(null,null);var o=new g(a.features),s=b(o);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),n(null,{vectorTile:o,rawData:s.buffer})}D.prototype.load=function(r){var n=this.options,i=n.log,a=n.minZoom,o=n.maxZoom,s=n.nodeSize;i&&console.time("total time");var l="prepare "+r.length+" points";i&&console.time(l),this.points=r;for(var u=[],c=0;c<r.length;c++)r[c].geometry&&u.push(function(r,n){var i=r.geometry.coordinates,a=i[0],o=i[1];return{x:F(a),y:B(o),zoom:1/0,index:n,parentId:-1}}(r[c],c));this.trees[o+1]=new P(u,j,U,s,Float32Array),i&&console.timeEnd(l);for(var f=o;f>=a;f--){var h=+Date.now();u=this._cluster(u,f),this.trees[f]=new P(u,j,U,s,Float32Array),i&&console.log("z%d: %d clusters in %dms",f,u.length,+Date.now()-h)}return i&&console.timeEnd("total time"),this},D.prototype.getClusters=function(r,n){var i=((r[0]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,r[1])),o=180===r[2]?180:((r[2]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,r[3]));if(r[2]-r[0]>=360)i=-180,o=180;else if(i>o){var l=this.getClusters([i,a,180,s],n),u=this.getClusters([-180,a,o,s],n);return l.concat(u)}for(var c=this.trees[this._limitZoom(n)],f=[],h=0,p=c.range(F(i),B(s),F(o),B(a));h<p.length;h+=1){var d=p[h],v=c.points[d];f.push(v.numPoints?z(v):this.points[v.index])}return f},D.prototype.getChildren=function(r){var n=this._getOriginId(r),i=this._getOriginZoom(r),a="No cluster with the specified id.",o=this.trees[i];if(!o)throw Error(a);var s=o.points[n];if(!s)throw Error(a);for(var l=this.options.radius/(this.options.extent*Math.pow(2,i-1)),u=[],c=0,f=o.within(s.x,s.y,l);c<f.length;c+=1){var h=f[c],p=o.points[h];p.parentId===r&&u.push(p.numPoints?z(p):this.points[p.index])}if(0===u.length)throw Error(a);return u},D.prototype.getLeaves=function(r,n,i){n=n||10,i=i||0;var a=[];return this._appendLeaves(a,r,n,i,0),a},D.prototype.getTile=function(r,n,i){var a=this.trees[this._limitZoom(r)],o=Math.pow(2,r),s=this.options,l=s.extent,u=s.radius/l,c=(i-u)/o,f=(i+1+u)/o,h={features:[]};return this._addTileFeatures(a.range((n-u)/o,c,(n+1+u)/o,f),a.points,n,i,o,h),0===n&&this._addTileFeatures(a.range(1-u/o,c,1,f),a.points,o,i,o,h),n===o-1&&this._addTileFeatures(a.range(0,c,u/o,f),a.points,-1,i,o,h),h.features.length?h:null},D.prototype.getClusterExpansionZoom=function(r){for(var n=this._getOriginZoom(r)-1;n<=this.options.maxZoom;){var i=this.getChildren(r);if(n++,1!==i.length)break;r=i[0].properties.cluster_id}return n},D.prototype._appendLeaves=function(r,n,i,a,o){for(var s=0,l=this.getChildren(n);s<l.length;s+=1){var u=l[s],c=u.properties;if(c&&c.cluster?o+c.point_count<=a?o+=c.point_count:o=this._appendLeaves(r,c.cluster_id,i,a,o):o<a?o++:r.push(u),r.length===i)break}return o},D.prototype._addTileFeatures=function(r,n,i,a,o,s){for(var l=0;l<r.length;l+=1){var u=n[r[l]],c=u.numPoints,f={type:1,geometry:[[Math.round(this.options.extent*(u.x*o-i)),Math.round(this.options.extent*(u.y*o-a))]],tags:c?R(u):this.points[u.index].properties},h=void 0;c?h=u.id:this.options.generateId?h=u.index:this.points[u.index].id&&(h=this.points[u.index].id),void 0!==h&&(f.id=h),s.features.push(f)}},D.prototype._limitZoom=function(r){return Math.max(this.options.minZoom,Math.min(+r,this.options.maxZoom+1))},D.prototype._cluster=function(r,n){for(var i=[],a=this.options,o=a.radius,s=a.extent,l=a.reduce,u=a.minPoints,c=o/(s*Math.pow(2,n)),f=0;f<r.length;f++){var h=r[f];if(!(h.zoom<=n)){h.zoom=n;for(var p=this.trees[n+1],d=p.within(h.x,h.y,c),v=h.numPoints||1,g=v,y=0;y<d.length;y+=1){var m=d[y],x=p.points[m];x.zoom>n&&(g+=x.numPoints||1)}if(g>=u){for(var b=h.x*v,_=h.y*v,w=l&&v>1?this._map(h,!0):null,T=(f<<5)+(n+1)+this.points.length,k=0;k<d.length;k+=1){var A=d[k],M=p.points[A];if(!(M.zoom<=n)){M.zoom=n;var S=M.numPoints||1;b+=M.x*S,_+=M.y*S,M.parentId=T,l&&(w||(w=this._map(h,!0)),l(w,this._map(M)))}}h.parentId=T,i.push({x:b/g,y:_/g,zoom:1/0,id:T,parentId:-1,numPoints:g,properties:w})}else if(i.push(h),g>1)for(var E=0;E<d.length;E+=1){var L=d[E],C=p.points[L];C.zoom<=n||(C.zoom=n,i.push(C))}}}return i},D.prototype._getOriginId=function(r){return r-this.points.length>>5},D.prototype._getOriginZoom=function(r){return(r-this.points.length)%32},D.prototype._map=function(r,n){if(r.numPoints)return n?N({},r.properties):r.properties;var i=this.points[r.index].properties,a=this.options.map(i);return n&&a===i?N({},a):a},ts.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ts.prototype.splitTile=function(r,n,i,a,o,s,l){for(var u=[r,n,i,a],c=this.options,f=c.debug;u.length;){a=u.pop(),i=u.pop(),n=u.pop(),r=u.pop();var h=1<<n,p=tl(n,i,a),d=this.tiles[p];if(!d&&(f>1&&console.time("creation"),d=this.tiles[p]=function(r,n,i,a,o){for(var s=n===o.maxZoom?0:o.tolerance/((1<<n)*o.extent),l={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:a,z:n,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<r.length;u++){l.numFeatures++,function(r,n,i,a){var o=n.geometry,s=n.type,l=[];if("Point"===s||"MultiPoint"===s)for(var u=0;u<o.length;u+=3)l.push(o[u]),l.push(o[u+1]),r.numPoints++,r.numSimplified++;else if("LineString"===s)to(l,o,r,i,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(u=0;u<o.length;u++)to(l,o[u],r,i,"Polygon"===s,0===u);else if("MultiPolygon"===s)for(var c=0;c<o.length;c++){var f=o[c];for(u=0;u<f.length;u++)to(l,f[u],r,i,!0,0===u)}if(l.length){var h=n.tags||null;if("LineString"===s&&a.lineMetrics){for(var p in h={},n.tags)h[p]=n.tags[p];h.mapbox_clip_start=o.start/o.size,h.mapbox_clip_end=o.end/o.size}var d={geometry:l,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:h};null!==n.id&&(d.id=n.id),r.features.push(d)}}(l,r[u],s,o);var c=r[u].minX,f=r[u].minY,h=r[u].maxX,p=r[u].maxY;c<l.minX&&(l.minX=c),f<l.minY&&(l.minY=f),h>l.maxX&&(l.maxX=h),p>l.maxY&&(l.maxY=p)}return l}(r,n,i,a,c),this.tileCoords.push({z:n,x:i,y:a}),f)){f>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,i,a,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var v="z"+n;this.stats[v]=(this.stats[v]||0)+1,this.total++}if(d.source=r,o){if(n===c.maxZoom||n===o)continue;var g=1<<o-n;if(i!==Math.floor(s/g)||a!==Math.floor(l/g))continue}else if(n===c.indexMaxZoom||d.numPoints<=c.indexMaxPoints)continue;if(d.source=null,0!==r.length){f>1&&console.time("clipping");var y,m,x,b,_,w,T=.5*c.buffer/c.extent,k=.5-T,A=.5+T,M=1+T;y=m=x=b=null,_=X(r,h,i-T,i+A,0,d.minX,d.maxX,c),w=X(r,h,i+k,i+M,0,d.minX,d.maxX,c),r=null,_&&(y=X(_,h,a-T,a+A,1,d.minY,d.maxY,c),m=X(_,h,a+k,a+M,1,d.minY,d.maxY,c),_=null),w&&(x=X(w,h,a-T,a+A,1,d.minY,d.maxY,c),b=X(w,h,a+k,a+M,1,d.minY,d.maxY,c),w=null),f>1&&console.timeEnd("clipping"),u.push(y||[],n+1,2*i,2*a),u.push(m||[],n+1,2*i,2*a+1),u.push(x||[],n+1,2*i+1,2*a),u.push(b||[],n+1,2*i+1,2*a+1)}}},ts.prototype.getTile=function(r,n,i){var a=this.options,o=a.extent,s=a.debug;if(r<0||r>24)return null;var l=1<<r,u=tl(r,n=(n%l+l)%l,i);if(this.tiles[u])return ti(this.tiles[u],o);s>1&&console.log("drilling down to z%d-%d-%d",r,n,i);for(var c,f=r,h=n,p=i;!c&&f>0;)f--,h=Math.floor(h/2),p=Math.floor(p/2),c=this.tiles[tl(f,h,p)];return c&&c.source?(s>1&&console.log("found parent tile z%d-%d-%d",f,h,p),s>1&&console.time("drilling down"),this.splitTile(c.source,f,h,p,r,n,i),s>1&&console.timeEnd("drilling down"),this.tiles[u]?ti(this.tiles[u],o):null):null};var tc=function(n){function i(r,i,a,o){n.call(this,r,i,a,tu),o&&(this.loadGeoJSON=o)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.loadData=function(r,n){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=n,this._pendingLoadDataParams=r,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var n=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,a=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var o=!!(a&&a.request&&a.request.collectResourceTiming)&&new r.RequestPerformance(a.request);this.loadGeoJSON(a,function(s,l){if(s||!l)return i(s);if("object"!=typeof l)return i(Error("Input data given to '"+a.source+"' is not a valid GeoJSON object."));f(l,!0);try{if(a.filter){var u,c,h=r.createExpression(a.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===h.result)throw Error(h.value.map(function(r){return r.key+": "+r.message}).join(", "));var p=l.features.filter(function(r){return h.value.evaluate({zoom:0},r)});l={type:"FeatureCollection",features:p}}n._geoJSONIndex=a.cluster?new D(function(n){var i=n.superclusterOptions,a=n.clusterProperties;if(!a||!i)return i;for(var o={},s={},l={accumulated:null,zoom:0},u={properties:null},c=Object.keys(a),f=0;f<c.length;f+=1){var h=c[f],p=a[h],d=p[0],v=p[1],g=r.createExpression(v),y=r.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);o[h]=g.value,s[h]=y.value}return i.map=function(r){u.properties=r;for(var n={},i=0;i<c.length;i+=1){var a=c[i];n[a]=o[a].evaluate(l,u)}return n},i.reduce=function(r,n){u.properties=n;for(var i=0;i<c.length;i+=1){var a=c[i];l.accumulated=r[a],r[a]=s[a].evaluate(l,u)}},i}(a)).load(l.features):(u=l,c=a.geojsonVtOptions,new ts(u,c))}catch(r){return i(r)}n.loaded={};var d={};if(o){var v=o.finish();v&&(d.resourceTiming={},d.resourceTiming[a.source]=JSON.parse(JSON.stringify(v)))}i(null,d)})}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(r,i){var a=this.loaded,o=r.uid;return a&&a[o]?n.prototype.reloadTile.call(this,r,i):this.loadTile(r,i)},i.prototype.loadGeoJSON=function(n,i){if(n.request)r.getJSON(n.request,i);else{if("string"!=typeof n.data)return i(Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(n.data))}catch(r){return i(Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(r,n){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),n()},i.prototype.getClusterExpansionZoom=function(r,n){try{n(null,this._geoJSONIndex.getClusterExpansionZoom(r.clusterId))}catch(r){n(r)}},i.prototype.getClusterChildren=function(r,n){try{n(null,this._geoJSONIndex.getChildren(r.clusterId))}catch(r){n(r)}},i.prototype.getClusterLeaves=function(r,n){try{n(null,this._geoJSONIndex.getLeaves(r.clusterId,r.limit,r.offset))}catch(r){n(r)}},i}(l),tf=function(n){var i=this;this.self=n,this.actor=new r.Actor(n,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:tc},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(r,n){if(i.workerSourceTypes[r])throw Error('Worker source with name "'+r+'" already registered.');i.workerSourceTypes[r]=n},this.self.registerRTLTextPlugin=function(n){if(r.plugin.isParsed())throw Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=n.applyArabicShaping,r.plugin.processBidirectionalText=n.processBidirectionalText,r.plugin.processStyledBidirectionalText=n.processStyledBidirectionalText}};return tf.prototype.setReferrer=function(r,n){this.referrer=n},tf.prototype.setImages=function(r,n,i){for(var a in this.availableImages[r]=n,this.workerSources[r]){var o=this.workerSources[r][a];for(var s in o)o[s].availableImages=n}i()},tf.prototype.setLayers=function(r,n,i){this.getLayerIndex(r).replace(n),i()},tf.prototype.updateLayers=function(r,n,i){this.getLayerIndex(r).update(n.layers,n.removedIds),i()},tf.prototype.loadTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).loadTile(n,i)},tf.prototype.loadDEMTile=function(r,n,i){this.getDEMWorkerSource(r,n.source).loadTile(n,i)},tf.prototype.reloadTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).reloadTile(n,i)},tf.prototype.abortTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).abortTile(n,i)},tf.prototype.removeTile=function(r,n,i){this.getWorkerSource(r,n.type,n.source).removeTile(n,i)},tf.prototype.removeDEMTile=function(r,n){this.getDEMWorkerSource(r,n.source).removeTile(n)},tf.prototype.removeSource=function(r,n,i){if(this.workerSources[r]&&this.workerSources[r][n.type]&&this.workerSources[r][n.type][n.source]){var a=this.workerSources[r][n.type][n.source];delete this.workerSources[r][n.type][n.source],void 0!==a.removeSource?a.removeSource(n,i):i()}},tf.prototype.loadWorkerSource=function(r,n,i){try{this.self.importScripts(n.url),i()}catch(r){i(r.toString())}},tf.prototype.syncRTLPluginState=function(n,i,a){try{r.plugin.setState(i);var o=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&null!=o){this.self.importScripts(o);var s=r.plugin.isParsed();a(s?void 0:Error("RTL Text Plugin failed to import scripts from "+o),s)}}catch(r){a(r.toString())}},tf.prototype.getAvailableImages=function(r){var n=this.availableImages[r];return n||(n=[]),n},tf.prototype.getLayerIndex=function(r){var i=this.layerIndexes[r];return i||(i=this.layerIndexes[r]=new n),i},tf.prototype.getWorkerSource=function(r,n,i){var a=this;return this.workerSources[r]||(this.workerSources[r]={}),this.workerSources[r][n]||(this.workerSources[r][n]={}),this.workerSources[r][n][i]||(this.workerSources[r][n][i]=new this.workerSourceTypes[n]({send:function(n,i,o){a.actor.send(n,i,o,r)}},this.getLayerIndex(r),this.getAvailableImages(r))),this.workerSources[r][n][i]},tf.prototype.getDEMWorkerSource=function(r,n){return this.demWorkerSources[r]||(this.demWorkerSources[r]={}),this.demWorkerSources[r][n]||(this.demWorkerSources[r][n]=new c),this.demWorkerSources[r][n]},tf.prototype.enforceCacheSizeLimit=function(n,i){r.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new tf(self)),tf}),a(0,function(r){var n=r.createCommonjsModule(function(r){function n(r){return!i(r)}function i(r){var i;return"undefined"!=typeof window&&"undefined"!=typeof document?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var r,n,i=new Blob([""],{type:"text/javascript"}),a=URL.createObjectURL(i);try{n=new Worker(a),r=!0}catch(n){r=!1}return n&&n.terminate(),URL.revokeObjectURL(a),r}()?"insufficient worker support":"Uint8ClampedArray"in window?ArrayBuffer.isView?!function(){var r=document.createElement("canvas");r.width=r.height=1;var n=r.getContext("2d");if(!n)return!1;var i=n.getImageData(0,0,1,1);return i&&i.width===r.width}()?"insufficient Canvas/getImageData support":(void 0===a[i=r&&r.failIfMajorPerformanceCaveat]&&(a[i]=function(r){var i,a,o=(i=document.createElement("canvas"),(a=Object.create(n.webGLContextAttributes)).failIfMajorPerformanceCaveat=r,i.probablySupportsContext?i.probablySupportsContext("webgl",a)||i.probablySupportsContext("experimental-webgl",a):i.supportsContext?i.supportsContext("webgl",a)||i.supportsContext("experimental-webgl",a):i.getContext("webgl",a)||i.getContext("experimental-webgl",a));if(!o)return!1;var s=o.createShader(o.VERTEX_SHADER);return!(!s||o.isContextLost())&&(o.shaderSource(s,"void main() {}"),o.compileShader(s),!0===o.getShaderParameter(s,o.COMPILE_STATUS))}(i)),a[i]?void 0:"insufficient WebGL support"):"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}r.exports?r.exports=n:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=n,window.mapboxgl.notSupportedReason=i);var a={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(n,i,a){var o=r.window.document.createElement(n);return void 0!==i&&(o.className=i),a&&a.appendChild(o),o},createNS:function(n,i){return r.window.document.createElementNS(n,i)}},a=r.window.document&&r.window.document.documentElement.style;function o(r){if(!a)return r[0];for(var n=0;n<r.length;n++)if(r[n]in a)return r[n];return r[0]}var s,l=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){a&&l&&(s=a[l],a[l]="none")},i.enableDrag=function(){a&&l&&(a[l]=s)};var u=o(["transform","WebkitTransform"]);i.setTransform=function(r,n){r.style[u]=n};var c=!1;try{var f=Object.defineProperty({},"passive",{get:function(){c=!0}});r.window.addEventListener("test",f,f),r.window.removeEventListener("test",f,f)}catch(r){c=!1}i.addEventListener=function(r,n,i,a){void 0===a&&(a={}),"passive"in a&&c?r.addEventListener(n,i,a):r.addEventListener(n,i,a.capture)},i.removeEventListener=function(r,n,i,a){void 0===a&&(a={}),"passive"in a&&c?r.removeEventListener(n,i,a):r.removeEventListener(n,i,a.capture)};var h=function(n){n.preventDefault(),n.stopPropagation(),r.window.removeEventListener("click",h,!0)};i.suppressClick=function(){r.window.addEventListener("click",h,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",h,!0)},0)},i.mousePos=function(n,i){var a=n.getBoundingClientRect();return new r.Point(i.clientX-a.left-n.clientLeft,i.clientY-a.top-n.clientTop)},i.touchPos=function(n,i){for(var a=n.getBoundingClientRect(),o=[],s=0;s<i.length;s++)o.push(new r.Point(i[s].clientX-a.left-n.clientLeft,i[s].clientY-a.top-n.clientTop));return o},i.mouseButton=function(n){return void 0!==r.window.InstallTrigger&&2===n.button&&n.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:n.button},i.remove=function(r){r.parentNode&&r.parentNode.removeChild(r)};var p=function(n){function i(){n.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(r){if(this.loaded!==r&&(this.loaded=r,r)){for(var n=0,i=this.requestors;n<i.length;n+=1){var a=i[n],o=a.ids,s=a.callback;this._notify(o,s)}this.requestors=[]}},i.prototype.getImage=function(r){return this.images[r]},i.prototype.addImage=function(r,n){this._validate(r,n)&&(this.images[r]=n)},i.prototype._validate=function(n,i){var a=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new r.ErrorEvent(Error('Image "'+n+'" has invalid "stretchX" value'))),a=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new r.ErrorEvent(Error('Image "'+n+'" has invalid "stretchY" value'))),a=!1),this._validateContent(i.content,i)||(this.fire(new r.ErrorEvent(Error('Image "'+n+'" has invalid "content" value'))),a=!1),a},i.prototype._validateStretch=function(r,n){if(!r)return!0;for(var i=0,a=0;a<r.length;a+=1){var o=r[a];if(o[0]<i||o[1]<o[0]||n<o[1])return!1;i=o[1]}return!0},i.prototype._validateContent=function(r,n){return!(r&&(4!==r.length||r[0]<0||n.data.width<r[0]||r[1]<0||n.data.height<r[1]||r[2]<0||n.data.width<r[2]||r[3]<0||n.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))},i.prototype.updateImage=function(r,n){var i=this.images[r];n.version=i.version+1,this.images[r]=n,this.updatedImages[r]=!0},i.prototype.removeImage=function(r){var n=this.images[r];delete this.images[r],delete this.patterns[r],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(r,n){var i=!0;if(!this.isLoaded())for(var a=0;a<r.length;a+=1){var o=r[a];this.images[o]||(i=!1)}this.isLoaded()||i?this._notify(r,n):this.requestors.push({ids:r,callback:n})},i.prototype._notify=function(n,i){for(var a={},o=0;o<n.length;o+=1){var s=n[o];this.images[s]||this.fire(new r.Event("styleimagemissing",{id:s}));var l=this.images[s];l?a[s]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf,version:l.version,stretchX:l.stretchX,stretchY:l.stretchY,content:l.content,hasRenderCallback:!!(l.userImage&&l.userImage.render)}:r.warnOnce('Image "'+s+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,a)},i.prototype.getPixelSize=function(){var r=this.atlasImage;return{width:r.width,height:r.height}},i.prototype.getPattern=function(n){var i=this.patterns[n],a=this.getImage(n);if(!a)return null;if(i&&i.position.version===a.version)return i.position;if(i)i.position.version=a.version;else{var o={w:a.data.width+2,h:a.data.height+2,x:0,y:0},s=new r.ImagePosition(o,a);this.patterns[n]={bin:o,position:s}}return this._updatePatternAtlas(),this.patterns[n].position},i.prototype.bind=function(n){var i=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(n,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var n=[];for(var i in this.patterns)n.push(this.patterns[i].bin);var a=r.potpack(n),o=a.w,s=a.h,l=this.atlasImage;for(var u in l.resize({width:o||1,height:s||1}),this.patterns){var c=this.patterns[u].bin,f=c.x+1,h=c.y+1,p=this.images[u].data,d=p.width,v=p.height;r.RGBAImage.copy(p,l,{x:0,y:0},{x:f,y:h},{width:d,height:v}),r.RGBAImage.copy(p,l,{x:0,y:v-1},{x:f,y:h-1},{width:d,height:1}),r.RGBAImage.copy(p,l,{x:0,y:0},{x:f,y:h+v},{width:d,height:1}),r.RGBAImage.copy(p,l,{x:d-1,y:0},{x:f-1,y:h},{width:1,height:v}),r.RGBAImage.copy(p,l,{x:0,y:0},{x:f+d,y:h},{width:1,height:v})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(r){for(var n=0;n<r.length;n+=1){var i=r[n];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var a=this.images[i];(function(r){var n=r.userImage;return!!(n&&n.render&&n.render())&&(r.data.replace(new Uint8Array(n.data.buffer)),!0)})(a)&&this.updateImage(i,a)}}},i}(r.Evented);function d(r,n,i,a,o,s){this.fontSize=r||24,this.buffer=void 0===n?3:n,this.cutoff=a||.25,this.fontFamily=o||"sans-serif",this.fontWeight=s||"normal",this.radius=i||8;var l=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=l,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.d=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Int16Array(l),this.middle=Math.round(l/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(r,n,i,a,o,s,l){for(var u=0;u<n;u++){for(var c=0;c<i;c++)a[c]=r[c*n+u];for(g(a,o,s,l,i),c=0;c<i;c++)r[c*n+u]=o[c]}for(c=0;c<i;c++){for(u=0;u<n;u++)a[u]=r[c*n+u];for(g(a,o,s,l,n),u=0;u<n;u++)r[c*n+u]=Math.sqrt(o[u])}}function g(r,n,i,a,o){i[0]=0,a[0]=-1e20,a[1]=1e20;for(var s=1,l=0;s<o;s++){for(var u=(r[s]+s*s-(r[i[l]]+i[l]*i[l]))/(2*s-2*i[l]);u<=a[l];)l--,u=(r[s]+s*s-(r[i[l]]+i[l]*i[l]))/(2*s-2*i[l]);i[++l]=s,a[l]=u,a[l+1]=1e20}for(s=0,l=0;s<o;s++){for(;a[l+1]<s;)l++;n[s]=(s-i[l])*(s-i[l])+r[i[l]]}}d.prototype.draw=function(r){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(r,this.buffer,this.middle);for(var n=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),a=0;a<this.size*this.size;a++){var o=n.data[4*a+3]/255;this.gridOuter[a]=1===o?0:0===o?1e20:Math.pow(Math.max(0,.5-o),2),this.gridInner[a]=1===o?1e20:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),a=0;a<this.size*this.size;a++){var s=this.gridOuter[a]-this.gridInner[a];i[a]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return i},d.default=d;var y=function(r,n){this.requestManager=r,this.localIdeographFontFamily=n,this.entries={}};y.prototype.setURL=function(r){this.url=r},y.prototype.getGlyphs=function(n,i){var a=this,o=[];for(var s in n)for(var l=0,u=n[s];l<u.length;l+=1){var c=u[l];o.push({stack:s,id:c})}r.asyncAll(o,function(r,n){var i=r.stack,o=r.id,s=a.entries[i];s||(s=a.entries[i]={glyphs:{},requests:{},ranges:{}});var l=s.glyphs[o];if(void 0===l){if(l=a._tinySDF(s,i,o))return s.glyphs[o]=l,void n(null,{stack:i,id:o,glyph:l});var u=Math.floor(o/256);if(256*u>65535)n(Error("glyphs > 65535 not supported"));else if(s.ranges[u])n(null,{stack:i,id:o,glyph:l});else{var c=s.requests[u];c||(c=s.requests[u]=[],y.loadGlyphRange(i,u,a.url,a.requestManager,function(r,n){if(n){for(var i in n)a._doesCharSupportLocalGlyph(+i)||(s.glyphs[+i]=n[+i]);s.ranges[u]=!0}for(var o=0,l=c;o<l.length;o+=1)(0,l[o])(r,n);delete s.requests[u]})),c.push(function(r,a){r?n(r):a&&n(null,{stack:i,id:o,glyph:a[o]||null})})}}else n(null,{stack:i,id:o,glyph:l})},function(r,n){if(r)i(r);else if(n){for(var a={},o=0;o<n.length;o+=1){var s=n[o],l=s.stack,u=s.id,c=s.glyph;(a[l]||(a[l]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,a)}})},y.prototype._doesCharSupportLocalGlyph=function(n){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](n)||r.isChar["Hangul Syllables"](n)||r.isChar.Hiragana(n)||r.isChar.Katakana(n))},y.prototype._tinySDF=function(n,i,a){var o=this.localIdeographFontFamily;if(o&&this._doesCharSupportLocalGlyph(a)){var s=n.tinySDF;if(!s){var l="400";/bold/i.test(i)?l="900":/medium/i.test(i)?l="500":/light/i.test(i)&&(l="200"),s=n.tinySDF=new y.TinySDF(24,3,8,.25,o,l)}return{id:a,bitmap:new r.AlphaImage({width:30,height:30},s.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(n,i,a,o,s){var l=256*i,u=o.transformRequest(o.normalizeGlyphsURL(a).replace("{fontstack}",n).replace("{range}",l+"-"+(l+255)),r.ResourceType.Glyphs);r.getArrayBuffer(u,function(n,i){if(n)s(n);else if(i){for(var a={},o=0,l=r.parseGlyphPBF(i);o<l.length;o+=1){var u=l[o];a[u.id]=u}s(null,a)}})},y.TinySDF=d;var m=function(){this.specification=r.styleSpec.light.position};m.prototype.possiblyEvaluate=function(n,i){return r.sphericalToCartesian(n.expression.evaluate(i))},m.prototype.interpolate=function(n,i,a){return{x:r.number(n.x,i.x,a),y:r.number(n.y,i.y,a),z:r.number(n.z,i.z,a)}};var x=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new m,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),b=function(n){function i(i){n.call(this),this._transitionable=new r.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(n,i){if(void 0===i&&(i={}),!this._validate(r.validateLight,n,i))for(var a in n){var o=n[a];r.endsWith(a,"-transition")?this._transitionable.setTransition(a.slice(0,-11),o):this._transitionable.setValue(a,o)}},i.prototype.updateTransitions=function(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(r){this.properties=this._transitioning.possiblyEvaluate(r)},i.prototype._validate=function(n,i,a){return(!a||!1!==a.validate)&&r.emitValidationErrors(this,n.call(r.validateStyle,r.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},i}(r.Evented),_=function(r,n){this.width=r,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};_.prototype.getDash=function(r,n){var i=r.join(",")+String(n);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(r,n)),this.dashEntry[i]},_.prototype.getDashRanges=function(r,n,i){var a=[],o=r.length%2==1?-r[r.length-1]*i:0,s=r[0]*i,l=!0;a.push({left:o,right:s,isDash:l,zeroLength:0===r[0]});for(var u=r[0],c=1;c<r.length;c++){l=!l;var f=r[c];o=u*i,s=(u+=f)*i,a.push({left:o,right:s,isDash:l,zeroLength:0===f})}return a},_.prototype.addRoundDash=function(r,n,i){for(var a=n/2,o=-i;o<=i;o++)for(var s=this.nextRow+i+o,l=this.width*s,u=0,c=r[u],f=0;f<this.width;f++){f/c.right>1&&(c=r[++u]);var h=Math.min(Math.abs(f-c.left),Math.abs(f-c.right)),p=void 0,d=o/i*(a+1);if(c.isDash){var v=a-Math.abs(d);p=Math.sqrt(h*h+v*v)}else p=a-Math.sqrt(h*h+d*d);this.data[l+f]=Math.max(0,Math.min(255,p+128))}},_.prototype.addRegularDash=function(r){for(var n=r.length-1;n>=0;--n){var i=r[n],a=r[n+1];i.zeroLength?r.splice(n,1):a&&a.isDash===i.isDash&&(a.left=i.left,r.splice(n,1))}var o=r[0],s=r[r.length-1];o.isDash===s.isDash&&(o.left=s.left-this.width,s.right=o.right+this.width);for(var l=this.width*this.nextRow,u=0,c=r[u],f=0;f<this.width;f++){f/c.right>1&&(c=r[++u]);var h=Math.min(Math.abs(f-c.left),Math.abs(f-c.right)),p=c.isDash?h:-h;this.data[l+f]=Math.max(0,Math.min(255,p+128))}},_.prototype.addDash=function(n,i){var a=i?7:0,o=2*a+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var s=0,l=0;l<n.length;l++)s+=n[l];if(0!==s){var u=this.width/s,c=this.getDashRanges(n,this.width,u);i?this.addRoundDash(c,u,a):this.addRegularDash(c)}var f={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:s};return this.nextRow+=o,this.dirty=!0,f},_.prototype.bind=function(r){var n=r.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))};var w=function n(i,a){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),s=0;s<o.length;s++){var l=o[s],u=new n.Actor(l,a,this.id);u.name="Worker "+s,this.actors.push(u)}};function T(n,i,a){var o=function(o,s){if(o)return a(o);if(s){var l=r.pick(r.extend(s,n),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);s.vector_layers&&(l.vectorLayers=s.vector_layers,l.vectorLayerIds=l.vectorLayers.map(function(r){return r.id})),l.tiles=i.canonicalizeTileset(l,n.url),a(null,l)}};return n.url?r.getJSON(i.transformRequest(i.normalizeSourceURL(n.url),r.ResourceType.Source),o):r.browser.frame(function(){return o(null,n)})}w.prototype.broadcast=function(n,i,a){a=a||function(){},r.asyncAll(this.actors,function(r,a){r.send(n,i,a)},a)},w.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},w.prototype.remove=function(){this.actors.forEach(function(r){r.remove()}),this.actors=[],this.workerPool.release(this.id)},w.Actor=r.Actor;var k=function(n,i,a){this.bounds=r.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=i||0,this.maxzoom=a||24};k.prototype.validateBounds=function(r){return Array.isArray(r)&&4===r.length?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]},k.prototype.contains=function(n){var i=Math.pow(2,n.z),a=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*i),o=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*i),s=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*i),l=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*i);return n.x>=a&&n.x<s&&n.y>=o&&n.y<l};var A=function(n){function i(i,a,o,s){if(n.call(this),this.id=i,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(a,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(s)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,function(i,a){n._tileJSONRequest=null,n._loaded=!0,i?n.fire(new r.ErrorEvent(i)):a&&(r.extend(n,a),a.bounds&&(n.tileBounds=new k(a.bounds,n.minzoom,n.maxzoom)),r.postTurnstileEvent(a.tiles,n.map._requestManager._customAccessToken),r.postMapLoadEvent(a.tiles,n.map._getMapId(),n.map._requestManager._skuToken,n.map._requestManager._customAccessToken),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.setSourceProperty=function(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(r){var n=this;return this.setSourceProperty(function(){n._options.tiles=r}),this},i.prototype.setUrl=function(r){var n=this;return this.setSourceProperty(function(){n.url=r,n._options.url=r}),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return r.extend({},this._options)},i.prototype.loadTile=function(n,i){var a=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(a,r.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function s(a,o){return delete n.request,n.aborted?i(null):a&&404!==a.status?i(a):(o&&o.resourceTiming&&(n.resourceTiming=o.resourceTiming),this.map._refreshExpiredTiles&&o&&n.setExpiryData(o),n.loadVectorData(o,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}o.request.collectResourceTiming=this._collectResourceTiming,n.actor&&"expired"!==n.state?"loading"===n.state?n.reloadCallback=i:n.request=n.actor.send("reloadTile",o,s.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",o,s.bind(this)))},i.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(r.Evented),M=function(n){function i(i,a,o,s){n.call(this),this.id=i,this.dispatcher=o,this.setEventedParent(s),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},a),r.extend(this,r.pick(a,["url","scheme","tileSize"]))}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,function(i,a){n._tileJSONRequest=null,n._loaded=!0,i?n.fire(new r.ErrorEvent(i)):a&&(r.extend(n,a),a.bounds&&(n.tileBounds=new k(a.bounds,n.minzoom,n.maxzoom)),r.postTurnstileEvent(a.tiles),r.postMapLoadEvent(a.tiles,n.map._getMapId(),n.map._requestManager._skuToken),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return r.extend({},this._options)},i.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},i.prototype.loadTile=function(n,i){var a=this,o=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);n.request=r.getImage(this.map._requestManager.transformRequest(o,r.ResourceType.Tile),function(o,s){if(delete n.request,n.aborted)n.state="unloaded",i(null);else if(o)n.state="errored",i(o);else if(s){a.map._refreshExpiredTiles&&n.setExpiryData(s),delete s.cacheControl,delete s.expires;var l=a.map.painter.context,u=l.gl;n.texture=a.map.painter.getTileTexture(s.width),n.texture?n.texture.update(s,{useMipmap:!0}):(n.texture=new r.Texture(l,s,u.RGBA,{useMipmap:!0}),n.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),l.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax)),n.state="loaded",r.cacheEntryPossiblyAdded(a.dispatcher),i(null)}})},i.prototype.abortTile=function(r,n){r.request&&(r.request.cancel(),delete r.request),n()},i.prototype.unloadTile=function(r,n){r.texture&&this.map.painter.saveTileTexture(r.texture),n()},i.prototype.hasTransition=function(){return!1},i}(r.Evented),S=function(n){function i(i,a,o,s){n.call(this,i,a,o,s),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(n,i){var a=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function o(r,a){r&&(n.state="errored",i(r)),a&&(n.dem=a,n.needsHillshadePrepare=!0,n.state="loaded",i(null))}n.request=r.getImage(this.map._requestManager.transformRequest(a,r.ResourceType.Tile),(function(a,s){if(delete n.request,n.aborted)n.state="unloaded",i(null);else if(a)n.state="errored",i(a);else if(s){this.map._refreshExpiredTiles&&n.setExpiryData(s),delete s.cacheControl,delete s.expires;var l=r.window.ImageBitmap&&s instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?s:r.browser.getImageData(s,1),u={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:l,encoding:this.encoding};n.actor&&"expired"!==n.state||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",u,o.bind(this)))}}).bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},i.prototype._getNeighboringTiles=function(n){var i=n.canonical,a=Math.pow(2,i.z),o=(i.x-1+a)%a,s=0===i.x?n.wrap-1:n.wrap,l=(i.x+1+a)%a,u=i.x+1===a?n.wrap+1:n.wrap,c={};return c[new r.OverscaledTileID(n.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,u,i.z,l,i.y).key]={backfilled:!1},i.y>0&&(c[new r.OverscaledTileID(n.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,n.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,u,i.z,l,i.y-1).key]={backfilled:!1}),i.y+1<a&&(c[new r.OverscaledTileID(n.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,n.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},c[new r.OverscaledTileID(n.overscaledZ,u,i.z,l,i.y+1).key]={backfilled:!1}),c},i.prototype.unloadTile=function(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})},i}(M),E=function(n){function i(i,a,o,s){n.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(s),this._data=a.data,this._options=r.extend({},a),this._collectResourceTiming=a.collectResourceTiming,this._resourceTiming=[],void 0!==a.maxzoom&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;var l=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(void 0!==a.buffer?a.buffer:128)*l,tolerance:(void 0!==a.tolerance?a.tolerance:.375)*l,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:void 0!==a.clusterMaxZoom?Math.min(a.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:r.EXTENT,radius:(a.clusterRadius||50)*l,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(i){if(i)n.fire(new r.ErrorEvent(i));else{var a={dataType:"source",sourceDataType:"metadata"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(a.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new r.Event("data",a))}})},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.setData=function(n){var i=this;return this._data=n,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)i.fire(new r.ErrorEvent(n));else{var a={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(a.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new r.Event("data",a))}}),this},i.prototype.getClusterExpansionZoom=function(r,n){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},n),this},i.prototype.getClusterChildren=function(r,n){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},n),this},i.prototype.getClusterLeaves=function(r,n,i,a){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:n,offset:i},a),this},i.prototype._updateWorkerData=function(n){var i=this;this._loaded=!1;var a=r.extend({},this.workerOptions),o=this._data;"string"==typeof o?(a.request=this.map._requestManager.transformRequest(r.browser.resolveURL(o),r.ResourceType.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(o),this.actor.send(this.type+".loadData",a,function(r,o){i._removed||o&&o.abandoned||(i._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[i.id]&&(i._resourceTiming=o.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:a.source},null),n(r))})},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(n,i){var a=this,o=n.actor?"reloadTile":"loadTile";n.actor=this.actor;var s={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(o,s,function(r,s){return delete n.request,n.unloadVectorData(),n.aborted?i(null):r?i(r):(n.loadVectorData(s,a.map.painter,"reloadTile"===o),i(null))})},i.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0},i.prototype.unloadTile=function(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(r.Evented),L=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),C=function(n){function i(r,i,a,o){n.call(this),this.id=r,this.dispatcher=a,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=i}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(n,i){var a=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(o,s){a._loaded=!0,o?a.fire(new r.ErrorEvent(o)):s&&(a.image=s,n&&(a.coordinates=n),i&&i(),a._finishLoading())})},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(r){var n=this;return this.image&&r.url&&(this.options.url=r.url,this.load(r.coordinates,function(){n.texture=null})),this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(r){this.map=r,this.load()},i.prototype.setCoordinates=function(n){var i=this;this.coordinates=n;var a=n.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(n){for(var i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<n.length;l+=1){var u=n[l];i=Math.min(i,u.x),a=Math.min(a,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y)}var c=Math.max(0,Math.floor(-Math.log(Math.max(o-i,s-a))/Math.LN2)),f=Math.pow(2,c);return new r.CanonicalTileID(c,Math.floor((i+o)/2*f),Math.floor((a+s)/2*f))}(a),this.minzoom=this.maxzoom=this.tileID.z;var o=a.map(function(r){return i.tileID.getTilePoint(r)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var n=this.map.painter.context,i=n.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(n,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.loadTile=function(r,n){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored",n(null)},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(r.Evented),O=function(n){function i(r,i,a,o){n.call(this,r,i,a,o),this.roundZoom=!0,this.type="video",this.options=i}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){var n=this;this._loaded=!1;var i=this.options;this.urls=[];for(var a=0,o=i.urls;a<o.length;a+=1){var s=o[a];this.urls.push(this.map._requestManager.transformRequest(s,r.ResourceType.Source).url)}r.getVideo(this.urls,function(i,a){n._loaded=!0,i?n.fire(new r.ErrorEvent(i)):a&&(n.video=a,n.video.loop=!0,n.video.addEventListener("playing",function(){n.map.triggerRepaint()}),n.map&&n.video.play(),n._finishLoading())})},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(n){if(this.video){var i=this.video.seekable;n<i.start(0)||n>i.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=n}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var n=this.map.painter.context,i=n.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(n,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(C),P=function(n){function i(i,a,o,s){n.call(this,i,a,o,s),a.coordinates?Array.isArray(a.coordinates)&&4===a.coordinates.length&&!a.coordinates.some(function(r){return!Array.isArray(r)||2!==r.length||r.some(function(r){return"number"!=typeof r})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'missing required property "coordinates"'))),a.animate&&"boolean"!=typeof a.animate&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),a.canvas?"string"==typeof a.canvas||a.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=a,this.animate=void 0===a.animate||a.animate}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,a=i.gl;for(var o in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(i,this.canvas,a.RGBA,{premultiply:!0}),this.tiles){var s=this.tiles[o];"loaded"!==s.state&&(s.state="loaded",s.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var r=0,n=[this.canvas.width,this.canvas.height];r<n.length;r+=1){var i=n[r];if(isNaN(i)||i<=0)return!0}return!1},i}(C),I={vector:A,raster:M,"raster-dem":S,geojson:E,video:O,image:C,canvas:P};function D(r,n){var i=r.tileID,a=n.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x}var z=function(r,n){this.max=r,this.onRemove=n,this.reset()};z.prototype.reset=function(){for(var r in this.data)for(var n=0,i=this.data[r];n<i.length;n+=1){var a=i[n];a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value)}return this.data={},this.order=[],this},z.prototype.add=function(r,n,i){var a=this,o=r.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);var s={value:n,timeout:void 0};if(void 0!==i&&(s.timeout=setTimeout(function(){a.remove(r,s)},i)),this.data[o].push(s),this.order.push(o),this.order.length>this.max){var l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this},z.prototype.has=function(r){return r.wrapped().key in this.data},z.prototype.getAndRemove=function(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null},z.prototype._getAndRemoveByKey=function(r){var n=this.data[r].shift();return n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),n.value},z.prototype.getByKey=function(r){var n=this.data[r];return n?n[0].value:null},z.prototype.get=function(r){return this.has(r)?this.data[r.wrapped().key][0].value:null},z.prototype.remove=function(r,n){if(!this.has(r))return this;var i=r.wrapped().key,a=void 0===n?0:this.data[i].indexOf(n),o=this.data[i][a];return this.data[i].splice(a,1),o.timeout&&clearTimeout(o.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(o.value),this.order.splice(this.order.indexOf(i),1),this},z.prototype.setMaxSize=function(r){for(this.max=r;this.order.length>this.max;){var n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this},z.prototype.filter=function(r){var n=[];for(var i in this.data)for(var a=0,o=this.data[i];a<o.length;a+=1){var s=o[a];r(s.value)||n.push(s)}for(var l=0;l<n.length;l+=1){var u=n[l];this.remove(u.value.tileID,u)}};var R=function(r,n,i){this.context=r;var a=r.gl;this.buffer=a.createBuffer(),this.dynamicDraw=!!i,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer};R.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},R.prototype.updateData=function(r){var n=this.context.gl;this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)},R.prototype.destroy=function(){var r=this.context.gl;this.buffer&&(r.deleteBuffer(this.buffer),delete this.buffer)};var F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},B=function(r,n,i,a){this.length=n.length,this.attributes=i,this.itemSize=n.bytesPerElement,this.dynamicDraw=a,this.context=r;var o=r.gl;this.buffer=o.createBuffer(),r.bindVertexBuffer.set(this.buffer),o.bufferData(o.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer};B.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},B.prototype.updateData=function(r){var n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,r.arrayBuffer)},B.prototype.enableAttributes=function(r,n){for(var i=0;i<this.attributes.length;i++){var a=this.attributes[i],o=n.attributes[a.name];void 0!==o&&r.enableVertexAttribArray(o)}},B.prototype.setVertexAttribPointers=function(r,n,i){for(var a=0;a<this.attributes.length;a++){var o=this.attributes[a],s=n.attributes[o.name];void 0!==s&&r.vertexAttribPointer(s,o.components,r[F[o.type]],!1,this.itemSize,o.offset+this.itemSize*(i||0))}},B.prototype.destroy=function(){var r=this.context.gl;this.buffer&&(r.deleteBuffer(this.buffer),delete this.buffer)};var N=function(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};N.prototype.get=function(){return this.current},N.prototype.set=function(r){},N.prototype.getDefault=function(){return this.default},N.prototype.setDefault=function(){this.set(this.default)};var j=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return r.Color.transparent},i.prototype.set=function(r){var n=this.current;(r.r!==n.r||r.g!==n.g||r.b!==n.b||r.a!==n.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},i}(N),U=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 1},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)},n}(N),V=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 0},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)},n}(N),H=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return[!0,!0,!0,!0]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},n}(N),q=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!0},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)},n}(N),G=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 255},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)},n}(N),Z=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},n.prototype.set=function(r){var n=this.current;(r.func!==n.func||r.ref!==n.ref||r.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)},n}(N),Y=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){var r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)},n}(N),W=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=r,this.dirty=!1}},n}(N),X=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return[0,1]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)},n}(N),J=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=r,this.dirty=!1}},n}(N),K=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.LESS},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)},n}(N),$=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.BLEND):n.disable(n.BLEND),this.current=r,this.dirty=!1}},n}(N),Q=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){var r=this.gl;return[r.ONE,r.ZERO]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)},n}(N),tt=function(n){function i(){n.apply(this,arguments)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getDefault=function(){return r.Color.transparent},i.prototype.set=function(r){var n=this.current;(r.r!==n.r||r.g!==n.g||r.b!==n.b||r.a!==n.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},i}(N),te=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.FUNC_ADD},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)},n}(N),tr=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;r?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=r,this.dirty=!1}},n}(N),tn=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.BACK},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)},n}(N),ti=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.CCW},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)},n}(N),ta=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)},n}(N),to=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return this.gl.TEXTURE0},n.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)},n}(N),ts=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){var r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]},n.prototype.set=function(r){var n=this.current;(r[0]!==n[0]||r[1]!==n[1]||r[2]!==n[2]||r[3]!==n[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},n}(N),tl=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,r),this.current=r,this.dirty=!1}},n}(N),tu=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,r),this.current=r,this.dirty=!1}},n}(N),tc=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindTexture(n.TEXTURE_2D,r),this.current=r,this.dirty=!1}},n}(N),tf=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}},n}(N),th=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){var n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1},n}(N),tp=function(r){function n(n){r.call(this,n),this.vao=n.extVertexArrayObject}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n.prototype.set=function(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)},n}(N),td=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return 4},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}},n}(N),tv=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}},n}(N),tg=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return!1},n.prototype.set=function(r){if(r!==this.current||this.dirty){var n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}},n}(N),ty=function(r){function n(n,i){r.call(this,n),this.context=n,this.parent=i}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return null},n}(N),tm=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.setDirty=function(){this.dirty=!0},n.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}},n}(ty),tx=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,r),this.current=r,this.dirty=!1}},n}(ty),tb=function(r,n,i,a){this.context=r,this.width=n,this.height=i;var o=r.gl,s=this.framebuffer=o.createFramebuffer();this.colorAttachment=new tm(r,s),a&&(this.depthAttachment=new tx(r,s))};tb.prototype.destroy=function(){var r=this.context.gl,n=this.colorAttachment.get();if(n&&r.deleteTexture(n),this.depthAttachment){var i=this.depthAttachment.get();i&&r.deleteRenderbuffer(i)}r.deleteFramebuffer(this.framebuffer)};var t_=function(r,n,i){this.func=r,this.mask=n,this.range=i};t_.ReadOnly=!1,t_.ReadWrite=!0,t_.disabled=new t_(519,t_.ReadOnly,[0,1]);var tw=function(r,n,i,a,o,s){this.test=r,this.ref=n,this.mask=i,this.fail=a,this.depthFail=o,this.pass=s};tw.disabled=new tw({func:519,mask:0},0,0,7680,7680,7680);var tT=function(r,n,i){this.blendFunction=r,this.blendColor=n,this.mask=i};tT.Replace=[1,0],tT.disabled=new tT(tT.Replace,r.Color.transparent,[!1,!1,!1,!1]),tT.unblended=new tT(tT.Replace,r.Color.transparent,[!0,!0,!0,!0]),tT.alphaBlended=new tT([1,771],r.Color.transparent,[!0,!0,!0,!0]);var tk=function(r,n,i){this.enable=r,this.mode=n,this.frontFace=i};tk.disabled=new tk(!1,1029,2305),tk.backCCW=new tk(!0,1029,2305);var tA=function(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new j(this),this.clearDepth=new U(this),this.clearStencil=new V(this),this.colorMask=new H(this),this.depthMask=new q(this),this.stencilMask=new G(this),this.stencilFunc=new Z(this),this.stencilOp=new Y(this),this.stencilTest=new W(this),this.depthRange=new X(this),this.depthTest=new J(this),this.depthFunc=new K(this),this.blend=new $(this),this.blendFunc=new Q(this),this.blendColor=new tt(this),this.blendEquation=new te(this),this.cullFace=new tr(this),this.cullFaceSide=new tn(this),this.frontFace=new ti(this),this.program=new ta(this),this.activeTexture=new to(this),this.viewport=new ts(this),this.bindFramebuffer=new tl(this),this.bindRenderbuffer=new tu(this),this.bindTexture=new tc(this),this.bindVertexBuffer=new tf(this),this.bindElementBuffer=new th(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tp(this),this.pixelStoreUnpack=new td(this),this.pixelStoreUnpackPremultiplyAlpha=new tv(this),this.pixelStoreUnpackFlipY=new tg(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)};tA.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tA.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tA.prototype.createIndexBuffer=function(r,n){return new R(this,r,n)},tA.prototype.createVertexBuffer=function(r,n,i){return new B(this,r,n,i)},tA.prototype.createRenderbuffer=function(r,n,i){var a=this.gl,o=a.createRenderbuffer();return this.bindRenderbuffer.set(o),a.renderbufferStorage(a.RENDERBUFFER,r,n,i),this.bindRenderbuffer.set(null),o},tA.prototype.createFramebuffer=function(r,n,i){return new tb(this,r,n,i)},tA.prototype.clear=function(r){var n=r.color,i=r.depth,a=this.gl,o=0;n&&(o|=a.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(o|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),a.clear(o)},tA.prototype.setCullFace=function(r){!1===r.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))},tA.prototype.setDepthMode=function(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)},tA.prototype.setStencilMode=function(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)},tA.prototype.setColorMode=function(n){r.deepEqual(n.blendFunction,tT.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)},tA.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var tM=function(n){function i(i,a,o){var s=this;n.call(this),this.id=i,this.dispatcher=o,this.on("data",function(r){"source"===r.dataType&&"metadata"===r.sourceDataType&&(s._sourceLoaded=!0),s._sourceLoaded&&!s._paused&&"source"===r.dataType&&"content"===r.sourceDataType&&(s.reload(),s.transform&&s.update(s.transform))}),this.on("error",function(){s._sourceErrored=!0}),this._source=function(n,i,a,o){var s=new I[i.type](n,i,a,o);if(s.id!==n)throw Error("Expected Source id to be "+n+" instead of "+s.id);return r.bindAll(["load","abort","unload","serialize","prepare"],s),s}(i,a,o,this),this._tiles={},this._cache=new z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.onAdd=function(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)},i.prototype.onRemove=function(r){this._source&&this._source.onRemove&&this._source.onRemove(r)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var r in this._tiles){var n=this._tiles[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(r,n){return this._source.loadTile(r,n)},i.prototype._unloadTile=function(r){if(this._source.unloadTile)return this._source.unloadTile(r,function(){})},i.prototype._abortTile=function(r){if(this._source.abortTile)return this._source.abortTile(r,function(){})},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(r){for(var n in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[n];i.upload(r),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return r.values(this._tiles).map(function(r){return r.tileID}).sort(tS).map(function(r){return r.key})},i.prototype.getRenderableIds=function(n){var i=this,a=[];for(var o in this._tiles)this._isIdRenderable(o,n)&&a.push(this._tiles[o]);return n?a.sort(function(n,a){var o=n.tileID,s=a.tileID,l=new r.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle),u=new r.Point(s.canonical.x,s.canonical.y)._rotate(i.transform.angle);return o.overscaledZ-s.overscaledZ||u.y-l.y||u.x-l.x}).map(function(r){return r.tileID.key}):a.map(function(r){return r.tileID}).sort(tS).map(function(r){return r.key})},i.prototype.hasRenderableParent=function(r){var n=this.findLoadedParent(r,0);return!!n&&this._isIdRenderable(n.tileID.key)},i.prototype._isIdRenderable=function(r,n){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(n||!this._tiles[r].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var r in this._cache.reset(),this._tiles)"errored"!==this._tiles[r].state&&this._reloadTile(r,"reloading")},i.prototype._reloadTile=function(r,n){var i=this._tiles[r];i&&("loading"!==i.state&&(i.state=n),this._loadTile(i,this._tileLoaded.bind(this,i,r,n)))},i.prototype._tileLoaded=function(n,i,a,o){if(o)return n.state="errored",void(404!==o.status?this._source.fire(new r.ErrorEvent(o,{tile:n})):this.update(this.transform));n.timeAdded=r.browser.now(),"expired"===a&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(i,n),"raster-dem"===this.getSource().type&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:n,coord:n.tileID}))},i.prototype._backfillDEM=function(r){for(var n=this.getRenderableIds(),i=0;i<n.length;i++){var a=n[i];if(r.neighboringTiles&&r.neighboringTiles[a]){var o=this.getTileByID(a);s(r,o),s(o,r)}}function s(r,n){r.needsHillshadePrepare=!0;var i=n.tileID.canonical.x-r.tileID.canonical.x,a=n.tileID.canonical.y-r.tileID.canonical.y,o=Math.pow(2,r.tileID.canonical.z),s=n.tileID.key;0===i&&0===a||Math.abs(a)>1||(Math.abs(i)>1&&(1===Math.abs(i+o)?i+=o:1===Math.abs(i-o)&&(i-=o)),n.dem&&r.dem&&(r.dem.backfillBorder(n.dem,i,a),r.neighboringTiles&&r.neighboringTiles[s]&&(r.neighboringTiles[s].backfilled=!0)))}},i.prototype.getTile=function(r){return this.getTileByID(r.key)},i.prototype.getTileByID=function(r){return this._tiles[r]},i.prototype._retainLoadedChildren=function(r,n,i,a){for(var o in this._tiles){var s=this._tiles[o];if(!(a[o]||!s.hasData()||s.tileID.overscaledZ<=n||s.tileID.overscaledZ>i)){for(var l=s.tileID;s&&s.tileID.overscaledZ>n+1;){var u=s.tileID.scaledTo(s.tileID.overscaledZ-1);(s=this._tiles[u.key])&&s.hasData()&&(l=u)}for(var c=l;c.overscaledZ>n;)if(r[(c=c.scaledTo(c.overscaledZ-1)).key]){a[l.key]=l;break}}}},i.prototype.findLoadedParent=function(r,n){if(r.key in this._loadedParentTiles){var i=this._loadedParentTiles[r.key];return i&&i.tileID.overscaledZ>=n?i:null}for(var a=r.overscaledZ-1;a>=n;a--){var o=r.scaledTo(a),s=this._getLoadedTile(o);if(s)return s}},i.prototype._getLoadedTile=function(r){var n=this._tiles[r.key];return n&&n.hasData()?n:this._cache.getByKey(r.wrapped().key)},i.prototype.updateCacheSize=function(r){var n=Math.floor((Math.ceil(r.width/this._source.tileSize)+1)*(Math.ceil(r.height/this._source.tileSize)+1)*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(i)},i.prototype.handleWrapJump=function(r){var n=Math.round((r-(void 0===this._prevLng?r:this._prevLng))/360);if(this._prevLng=r,n){var i={};for(var a in this._tiles){var o=this._tiles[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),i[o.tileID.key]=o}for(var s in this._tiles=i,this._timers)clearTimeout(this._timers[s]),delete this._timers[s];for(var l in this._tiles){var u=this._tiles[l];this._setTileReloadTimer(l,u)}}},i.prototype.update=function(n){var a=this;if(this.transform=n,this._sourceLoaded&&!this._paused){this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?o=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(n){return new r.OverscaledTileID(n.canonical.z,n.wrap,n.canonical.z,n.canonical.x,n.canonical.y)}):(o=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(o=o.filter(function(r){return a._source.hasTile(r)}))):o=[];var o,s=n.coveringZoomLevel(this._source),l=Math.max(s-i.maxOverzooming,this._source.minzoom),u=Math.max(s+i.maxUnderzooming,this._source.minzoom),c=this._updateRetainedTiles(o,s);if(tE(this._source.type)){for(var f={},h={},p=0,d=Object.keys(c);p<d.length;p+=1){var v=d[p],g=c[v],y=this._tiles[v];if(y&&!(y.fadeEndTime&&y.fadeEndTime<=r.browser.now())){var m=this.findLoadedParent(g,l);m&&(this._addTile(m.tileID),f[m.tileID.key]=m.tileID),h[v]=g}}for(var x in this._retainLoadedChildren(h,s,u,c),f)c[x]||(this._coveredTiles[x]=!0,c[x]=f[x])}for(var b in c)this._tiles[b].clearFadeHold();for(var _=0,w=r.keysDifference(this._tiles,c);_<w.length;_+=1){var T=w[_],k=this._tiles[T];k.hasSymbolBuckets&&!k.holdingForFade()?k.setHoldDuration(this.map._fadeDuration):k.hasSymbolBuckets&&!k.symbolFadeFinished()||this._removeTile(T)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)},i.prototype._updateRetainedTiles=function(r,n){for(var a={},o={},s=Math.max(n-i.maxOverzooming,this._source.minzoom),l=Math.max(n+i.maxUnderzooming,this._source.minzoom),u={},c=0;c<r.length;c+=1){var f=r[c],h=this._addTile(f);a[f.key]=f,h.hasData()||n<this._source.maxzoom&&(u[f.key]=f)}this._retainLoadedChildren(u,n,l,a);for(var p=0;p<r.length;p+=1){var d=r[p],v=this._tiles[d.key];if(!v.hasData()){if(n+1>this._source.maxzoom){var g=d.children(this._source.maxzoom)[0],y=this.getTile(g);if(y&&y.hasData()){a[g.key]=g;continue}}else{var m=d.children(this._source.maxzoom);if(a[m[0].key]&&a[m[1].key]&&a[m[2].key]&&a[m[3].key])continue}for(var x=v.wasRequested(),b=d.overscaledZ-1;b>=s;--b){var _=d.scaledTo(b);if(o[_.key]||(o[_.key]=!0,(v=this.getTile(_))||!x||(v=this._addTile(_)),v&&(a[_.key]=_,x=v.wasRequested(),v.hasData())))break}}}return a},i.prototype._updateLoadedParentTileCache=function(){for(var r in this._loadedParentTiles={},this._tiles){for(var n=[],i=void 0,a=this._tiles[r].tileID;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){i=this._loadedParentTiles[a.key];break}n.push(a.key);var o=a.scaledTo(a.overscaledZ-1);if(i=this._getLoadedTile(o))break;a=o}for(var s=0;s<n.length;s+=1){var l=n[s];this._loadedParentTiles[l]=i}}},i.prototype._addTile=function(n){var i=this._tiles[n.key];if(i)return i;(i=this._cache.getAndRemove(n))&&(this._setTileReloadTimer(n.key,i),i.tileID=n,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,i)));var a=!!i;return a||(i=new r.Tile(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,n.key,i.state))),i?(i.uses++,this._tiles[n.key]=i,a||this._source.fire(new r.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(r,n){var i=this;r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);var a=n.getExpiryTimeout();a&&(this._timers[r]=setTimeout(function(){i._reloadTile(r,"expired"),delete i._timers[r]},a))},i.prototype._removeTile=function(r){var n=this._tiles[r];n&&(n.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),n.uses>0||(n.hasData()&&"reloading"!==n.state?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))},i.prototype.clearTiles=function(){for(var r in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(r);this._cache.reset()},i.prototype.tilesIn=function(n,i,a){var o=this,s=[],l=this.transform;if(!l)return s;for(var u=a?l.getCameraQueryGeometry(n):n,c=n.map(function(r){return l.pointCoordinate(r)}),f=u.map(function(r){return l.pointCoordinate(r)}),h=this.getIds(),p=1/0,d=1/0,v=-1/0,g=-1/0,y=0;y<f.length;y+=1){var m=f[y];p=Math.min(p,m.x),d=Math.min(d,m.y),v=Math.max(v,m.x),g=Math.max(g,m.y)}for(var x=0;x<h.length;x++)(function(n){var a=o._tiles[h[n]];if(!a.holdingForFade()){var u=a.tileID,y=Math.pow(2,l.zoom-a.tileID.overscaledZ),m=i*a.queryPadding*r.EXTENT/a.tileSize/y,x=[u.getTilePoint(new r.MercatorCoordinate(p,d)),u.getTilePoint(new r.MercatorCoordinate(v,g))];if(x[0].x-m<r.EXTENT&&x[0].y-m<r.EXTENT&&x[1].x+m>=0&&x[1].y+m>=0){var b=c.map(function(r){return u.getTilePoint(r)}),_=f.map(function(r){return u.getTilePoint(r)});s.push({tile:a,tileID:u,queryGeometry:b,cameraQueryGeometry:_,scale:y})}}})(x);return s},i.prototype.getVisibleCoordinates=function(r){for(var n=this,i=this.getRenderableIds(r).map(function(r){return n._tiles[r].tileID}),a=0;a<i.length;a+=1){var o=i[a];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(tE(this._source.type))for(var n in this._tiles){var i=this._tiles[n];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=r.browser.now())return!0}return!1},i.prototype.setFeatureState=function(r,n,i){r=r||"_geojsonTileLayer",this._state.updateState(r,n,i)},i.prototype.removeFeatureState=function(r,n,i){r=r||"_geojsonTileLayer",this._state.removeFeatureState(r,n,i)},i.prototype.getFeatureState=function(r,n){return r=r||"_geojsonTileLayer",this._state.getState(r,n)},i.prototype.setDependencies=function(r,n,i){var a=this._tiles[r];a&&a.setDependencies(n,i)},i.prototype.reloadTilesForDependencies=function(r,n){for(var i in this._tiles)this._tiles[i].hasDependency(r,n)&&this._reloadTile(i,"reloading");this._cache.filter(function(i){return!i.hasDependency(r,n)})},i}(r.Evented);function tS(r,n){var i=Math.abs(2*r.wrap)-+(r.wrap<0),a=Math.abs(2*n.wrap)-+(n.wrap<0);return r.overscaledZ-n.overscaledZ||a-i||n.canonical.y-r.canonical.y||n.canonical.x-r.canonical.x}function tE(r){return"raster"===r||"image"===r||"video"===r}function tL(){return new r.window.Worker(ng.workerUrl)}tM.maxOverzooming=10,tM.maxUnderzooming=3;var tC="mapboxgl_preloaded_worker_pool",tO=function(){this.active={}};tO.prototype.acquire=function(r){if(!this.workers)for(this.workers=[];this.workers.length<tO.workerCount;)this.workers.push(new tL);return this.active[r]=!0,this.workers.slice()},tO.prototype.release=function(r){delete this.active[r],0===this.numActive()&&(this.workers.forEach(function(r){r.terminate()}),this.workers=null)},tO.prototype.isPreloaded=function(){return!!this.active[tC]},tO.prototype.numActive=function(){return Object.keys(this.active).length};var tP,tI=Math.floor(r.browser.hardwareConcurrency/2);function tD(){return tP||(tP=new tO),tP}function tz(n){n=n.slice();for(var i=Object.create(null),a=0;a<n.length;a++)i[n[a].id]=n[a];for(var o=0;o<n.length;o++)"ref"in n[o]&&(n[o]=function(n,i){var a={};for(var o in n)"ref"!==o&&(a[o]=n[o]);return r.refProperties.forEach(function(r){r in i&&(a[r]=i[r])}),a}(n[o],i[n[o].ref]));return n}tO.workerCount=Math.max(Math.min(tI,6),1);var tR={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tF(r,n,i){i.push({command:tR.addSource,args:[r,n[r]]})}function tB(r,n,i){n.push({command:tR.removeSource,args:[r]}),i[r]=!0}function tN(n,i,a,o,s,l){var u;for(u in i=i||{},n=n||{})n.hasOwnProperty(u)&&(r.deepEqual(n[u],i[u])||a.push({command:l,args:[o,u,i[u],s]}));for(u in i)i.hasOwnProperty(u)&&!n.hasOwnProperty(u)&&(r.deepEqual(n[u],i[u])||a.push({command:l,args:[o,u,i[u],s]}))}function tj(r){return r.id}function tU(r,n){return r[n.id]=n,r}var tV=function(r,n){this.reset(r,n)};tV.prototype.reset=function(r,n){this.points=r||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding},tV.prototype.lerp=function(n){if(1===this.points.length)return this.points[0];n=r.clamp(n,0,1);for(var i=1,a=this._distances[i],o=n*this.paddedLength+this.padding;a<o&&i<this._distances.length;)a=this._distances[++i];var s=i-1,l=this._distances[s],u=a-l,c=u>0?(o-l)/u:0;return this.points[s].mult(1-c).add(this.points[i].mult(c))};var tH=function(r,n,i){var a=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(r/i),this.yCellCount=Math.ceil(n/i);for(var s=0;s<this.xCellCount*this.yCellCount;s++)a.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=n,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0};function tq(n,i,a,o,s){var l=r.create();return i?(r.scale(l,l,[1/s,1/s,1]),a||r.rotateZ(l,l,o.angle)):r.multiply(l,o.labelPlaneMatrix,n),l}function tG(n,i,a,o,s){if(i){var l=r.clone(n);return r.scale(l,l,[s,s,1]),a||r.rotateZ(l,l,-o.angle),l}return o.glCoordMatrix}function tZ(n,i){var a=[n.x,n.y,0,1];t1(a,a,i);var o=a[3];return{point:new r.Point(a[0]/o,a[1]/o),signedDistanceFromCamera:o}}function tY(r,n){return .5+r/n*.5}function tW(r,n,i,a,o,s,l,u,c,f,h){var p=u.glyphStartIndex+u.numGlyphs,d=u.lineStartIndex,v=u.lineStartIndex+u.lineLength,g=n.getoffsetX(u.glyphStartIndex),y=n.getoffsetX(p-1),m=t$(r*g,i,a,o,s,l,u.segment,d,v,c,f,h);if(!m)return null;var x=t$(r*y,i,a,o,s,l,u.segment,d,v,c,f,h);return x?{first:m,last:x}:null}function tX(n,i,a,o){return n===r.WritingMode.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*o?{useVertical:!0}:(n===r.WritingMode.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null}function tJ(n,i,a,o,s,l,u,c,f,h,p,d,v,g){var y,m=i/24,x=n.lineOffsetX*m,b=n.lineOffsetY*m;if(n.numGlyphs>1){var _=n.glyphStartIndex+n.numGlyphs,w=n.lineStartIndex,T=n.lineStartIndex+n.lineLength,k=tW(m,c,x,b,a,p,d,n,f,l,v);if(!k)return{notEnoughRoom:!0};var A=tZ(k.first.point,u).point,M=tZ(k.last.point,u).point;if(o&&!a){var S=tX(n.writingMode,A,M,g);if(S)return S}y=[k.first];for(var E=n.glyphStartIndex+1;E<_-1;E++)y.push(t$(m*c.getoffsetX(E),x,b,a,p,d,n.segment,w,T,f,l,v));y.push(k.last)}else{if(o&&!a){var L=tZ(d,s).point,C=n.lineStartIndex+n.segment+1,O=new r.Point(f.getx(C),f.gety(C)),P=tZ(O,s),I=P.signedDistanceFromCamera>0?P.point:tK(d,O,L,1,s),D=tX(n.writingMode,L,I,g);if(D)return D}var z=t$(m*c.getoffsetX(n.glyphStartIndex),x,b,a,p,d,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,f,l,v);if(!z)return{notEnoughRoom:!0};y=[z]}for(var R=0,F=y;R<F.length;R+=1){var B=F[R];r.addDynamicAttributes(h,B.point,B.angle)}return{}}function tK(r,n,i,a,o){var s=tZ(r.add(r.sub(n)._unit()),o).point,l=i.sub(s);return i.add(l._mult(a/l.mag()))}function t$(n,i,a,o,s,l,u,c,f,h,p,d){var v=o?n-i:n+i,g=v>0?1:-1,y=0;o&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);for(var m=g>0?c+u:c+u+1,x=s,b=s,_=0,w=0,T=Math.abs(v),k=[];_+w<=T;){if((m+=g)<c||m>=f)return null;if(b=x,k.push(x),void 0===(x=d[m])){var A=new r.Point(h.getx(m),h.gety(m)),M=tZ(A,p);if(M.signedDistanceFromCamera>0)x=d[m]=M.point;else{var S=m-g;x=tK(0===_?l:new r.Point(h.getx(S),h.gety(S)),A,b,T-_+1,p)}}_+=w,w=b.dist(x)}var E=(T-_)/w,L=x.sub(b),C=L.mult(E)._add(b);C._add(L._unit()._perp()._mult(a*g));var O=y+Math.atan2(x.y-b.y,x.x-b.x);return k.push(C),{point:C,angle:O,path:k}}tH.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},tH.prototype.insert=function(r,n,i,a,o){this._forEachCell(n,i,a,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(o)},tH.prototype.insertCircle=function(r,n,i,a){this._forEachCell(n-a,i-a,n+a,i+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(n),this.circles.push(i),this.circles.push(a)},tH.prototype._insertBoxCell=function(r,n,i,a,o,s){this.boxCells[o].push(s)},tH.prototype._insertCircleCell=function(r,n,i,a,o,s){this.circleCells[o].push(s)},tH.prototype._query=function(r,n,i,a,o,s){if(i<0||r>this.width||a<0||n>this.height)return!o&&[];var l=[];if(r<=0&&n<=0&&this.width<=i&&this.height<=a){if(o)return!0;for(var u=0;u<this.boxKeys.length;u++)l.push({key:this.boxKeys[u],x1:this.bboxes[4*u],y1:this.bboxes[4*u+1],x2:this.bboxes[4*u+2],y2:this.bboxes[4*u+3]});for(var c=0;c<this.circleKeys.length;c++){var f=this.circles[3*c],h=this.circles[3*c+1],p=this.circles[3*c+2];l.push({key:this.circleKeys[c],x1:f-p,y1:h-p,x2:f+p,y2:h+p})}return s?l.filter(s):l}return this._forEachCell(r,n,i,a,this._queryCell,l,{hitTest:o,seenUids:{box:{},circle:{}}},s),o?l.length>0:l},tH.prototype._queryCircle=function(r,n,i,a,o){var s=r-i,l=r+i,u=n-i,c=n+i;if(l<0||s>this.width||c<0||u>this.height)return!a&&[];var f=[];return this._forEachCell(s,u,l,c,this._queryCellCircle,f,{hitTest:a,circle:{x:r,y:n,radius:i},seenUids:{box:{},circle:{}}},o),a?f.length>0:f},tH.prototype.query=function(r,n,i,a,o){return this._query(r,n,i,a,!1,o)},tH.prototype.hitTest=function(r,n,i,a,o){return this._query(r,n,i,a,!0,o)},tH.prototype.hitTestCircle=function(r,n,i,a){return this._queryCircle(r,n,i,!0,a)},tH.prototype._queryCell=function(r,n,i,a,o,s,l,u){var c=l.seenUids,f=this.boxCells[o];if(null!==f)for(var h=this.bboxes,p=0;p<f.length;p+=1){var d=f[p];if(!c.box[d]){c.box[d]=!0;var v=4*d;if(r<=h[v+2]&&n<=h[v+3]&&i>=h[v+0]&&a>=h[v+1]&&(!u||u(this.boxKeys[d]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[d],x1:h[v],y1:h[v+1],x2:h[v+2],y2:h[v+3]})}}}var g=this.circleCells[o];if(null!==g)for(var y=this.circles,m=0;m<g.length;m+=1){var x=g[m];if(!c.circle[x]){c.circle[x]=!0;var b=3*x;if(this._circleAndRectCollide(y[b],y[b+1],y[b+2],r,n,i,a)&&(!u||u(this.circleKeys[x]))){if(l.hitTest)return s.push(!0),!0;var _=y[b],w=y[b+1],T=y[b+2];s.push({key:this.circleKeys[x],x1:_-T,y1:w-T,x2:_+T,y2:w+T})}}}},tH.prototype._queryCellCircle=function(r,n,i,a,o,s,l,u){var c=l.circle,f=l.seenUids,h=this.boxCells[o];if(null!==h)for(var p=this.bboxes,d=0;d<h.length;d+=1){var v=h[d];if(!f.box[v]){f.box[v]=!0;var g=4*v;if(this._circleAndRectCollide(c.x,c.y,c.radius,p[g+0],p[g+1],p[g+2],p[g+3])&&(!u||u(this.boxKeys[v])))return s.push(!0),!0}}var y=this.circleCells[o];if(null!==y)for(var m=this.circles,x=0;x<y.length;x+=1){var b=y[x];if(!f.circle[b]){f.circle[b]=!0;var _=3*b;if(this._circlesCollide(m[_],m[_+1],m[_+2],c.x,c.y,c.radius)&&(!u||u(this.circleKeys[b])))return s.push(!0),!0}}},tH.prototype._forEachCell=function(r,n,i,a,o,s,l,u){for(var c=this._convertToXCellCoord(r),f=this._convertToYCellCoord(n),h=this._convertToXCellCoord(i),p=this._convertToYCellCoord(a),d=c;d<=h;d++)for(var v=f;v<=p;v++){var g=this.xCellCount*v+d;if(o.call(this,r,n,i,a,g,s,l,u))return}},tH.prototype._convertToXCellCoord=function(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))},tH.prototype._convertToYCellCoord=function(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))},tH.prototype._circlesCollide=function(r,n,i,a,o,s){var l=a-r,u=o-n,c=i+s;return c*c>l*l+u*u},tH.prototype._circleAndRectCollide=function(r,n,i,a,o,s,l){var u=(s-a)/2,c=Math.abs(r-(a+u));if(c>u+i)return!1;var f=(l-o)/2,h=Math.abs(n-(o+f));if(h>f+i)return!1;if(c<=u||h<=f)return!0;var p=c-u,d=h-f;return p*p+d*d<=i*i};var tQ=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function t0(r,n){for(var i=0;i<r;i++){var a=n.length;n.resize(a+4),n.float32.set(tQ,3*a)}}function t1(r,n,i){var a=n[0],o=n[1];return r[0]=i[0]*a+i[4]*o+i[12],r[1]=i[1]*a+i[5]*o+i[13],r[3]=i[3]*a+i[7]*o+i[15],r}var t2=function(r,n,i){void 0===n&&(n=new tH(r.width+200,r.height+200,25)),void 0===i&&(i=new tH(r.width+200,r.height+200,25)),this.transform=r,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+100,this.screenBottomBoundary=r.height+100,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200};function t3(n,i,a){return r.EXTENT/(n.tileSize*Math.pow(2,a-n.tileID.overscaledZ))*i}t2.prototype.placeCollisionBox=function(r,n,i,a,o){var s=this.projectAndGetPerspectiveRatio(a,r.anchorPointX,r.anchorPointY),l=i*s.perspectiveRatio,u=r.x1*l+s.point.x,c=r.y1*l+s.point.y,f=r.x2*l+s.point.x,h=r.y2*l+s.point.y;return!this.isInsideGrid(u,c,f,h)||!n&&this.grid.hitTest(u,c,f,h,o)?{box:[],offscreen:!1}:{box:[u,c,f,h],offscreen:this.isOffscreen(u,c,f,h)}},t2.prototype.placeCollisionCircles=function(n,i,a,o,s,l,u,c,f,h,p,d,v){var g=[],y=new r.Point(i.anchorX,i.anchorY),m=tZ(y,l),x=tY(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),b=(h?s/x:s*x)/r.ONE_EM,_=tZ(y,u).point,w=tW(b,o,i.lineOffsetX*b,i.lineOffsetY*b,!1,_,y,i,a,u,{}),T=!1,k=!1,A=!0;if(w){for(var M=.5*d*x+v,S=new r.Point(-100,-100),E=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),L=new tV,C=w.first,O=w.last,P=[],I=C.path.length-1;I>=1;I--)P.push(C.path[I]);for(var D=1;D<O.path.length;D++)P.push(O.path[D]);var z=2.5*M;if(c){var R=P.map(function(r){return tZ(r,c)});P=R.some(function(r){return r.signedDistanceFromCamera<=0})?[]:R.map(function(r){return r.point})}var F=[];if(P.length>0){for(var B=P[0].clone(),N=P[0].clone(),j=1;j<P.length;j++)B.x=Math.min(B.x,P[j].x),B.y=Math.min(B.y,P[j].y),N.x=Math.max(N.x,P[j].x),N.y=Math.max(N.y,P[j].y);F=B.x>=S.x&&N.x<=E.x&&B.y>=S.y&&N.y<=E.y?[P]:N.x<S.x||B.x>E.x||N.y<S.y||B.y>E.y?[]:r.clipLine([P],S.x,S.y,E.x,E.y)}for(var U=0,V=F;U<V.length;U+=1){var H,q=V[U];L.reset(q,.25*M),H=L.length<=.5*M?1:Math.ceil(L.paddedLength/z)+1;for(var G=0;G<H;G++){var Z=G/Math.max(H-1,1),Y=L.lerp(Z),W=Y.x+100,X=Y.y+100;g.push(W,X,M,0);var J=W-M,K=X-M,$=W+M,Q=X+M;if(A=A&&this.isOffscreen(J,K,$,Q),k=k||this.isInsideGrid(J,K,$,Q),!n&&this.grid.hitTestCircle(W,X,M,p)&&(T=!0,!f))return{circles:[],offscreen:!1,collisionDetected:T}}}}return{circles:(f||!T)&&k?g:[],offscreen:A,collisionDetected:T}},t2.prototype.queryRenderedSymbols=function(n){if(0===n.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<n.length;u+=1){var c=n[u],f=new r.Point(c.x+100,c.y+100);a=Math.min(a,f.x),o=Math.min(o,f.y),s=Math.max(s,f.x),l=Math.max(l,f.y),i.push(f)}for(var h={},p={},d=0,v=this.grid.query(a,o,s,l).concat(this.ignoredGrid.query(a,o,s,l));d<v.length;d+=1){var g=v[d],y=g.key;if(void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]={}),!h[y.bucketInstanceId][y.featureIndex]){var m=[new r.Point(g.x1,g.y1),new r.Point(g.x2,g.y1),new r.Point(g.x2,g.y2),new r.Point(g.x1,g.y2)];r.polygonIntersectsPolygon(i,m)&&(h[y.bucketInstanceId][y.featureIndex]=!0,void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]=[]),p[y.bucketInstanceId].push(y.featureIndex))}}return p},t2.prototype.insertCollisionBox=function(r,n,i,a,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:a,collisionGroupID:o},r[0],r[1],r[2],r[3])},t2.prototype.insertCollisionCircles=function(r,n,i,a,o){for(var s=n?this.ignoredGrid:this.grid,l={bucketInstanceId:i,featureIndex:a,collisionGroupID:o},u=0;u<r.length;u+=4)s.insertCircle(l,r[u],r[u+1],r[u+2])},t2.prototype.projectAndGetPerspectiveRatio=function(n,i,a){var o=[i,a,0,1];return t1(o,o,n),{point:new r.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}},t2.prototype.isOffscreen=function(r,n,i,a){return i<100||r>=this.screenRightBoundary||a<100||n>this.screenBottomBoundary},t2.prototype.isInsideGrid=function(r,n,i,a){return i>=0&&r<this.gridRightBoundary&&a>=0&&n<this.gridBottomBoundary},t2.prototype.getViewportMatrix=function(){var n=r.identity([]);return r.translate(n,n,[-100,-100,0]),n};var t5=function(r,n,i,a){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?n:-n))):a&&i?1:0,this.placed=i};t5.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var t4=function(r,n,i,a,o){this.text=new t5(r?r.text:null,n,i,o),this.icon=new t5(r?r.icon:null,n,a,o)};t4.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var t6=function(r,n,i){this.text=r,this.icon=n,this.skipFade=i},t8=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},t7=function(r,n,i,a,o){this.bucketInstanceId=r,this.featureIndex=n,this.sourceLayerIndex=i,this.bucketIndex=a,this.tileID=o},t9=function(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}};function et(n,i,a,o,s){var l=r.getAnchorAlignment(n),u=-(l.horizontalAlign-.5)*i,c=-(l.verticalAlign-.5)*a,f=r.evaluateVariableOffset(n,o);return new r.Point(u+f[0]*s,c+f[1]*s)}function ee(n,i,a,o,s,l){var u=n.x1,c=n.x2,f=n.y1,h=n.y2,p=n.anchorPointX,d=n.anchorPointY,v=new r.Point(i,a);return o&&v._rotate(s?l:-l),{x1:u+v.x,y1:f+v.y,x2:c+v.x,y2:h+v.y,anchorPointX:p,anchorPointY:d}}t9.prototype.get=function(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){var n=++this.maxGroupID;this.collisionGroups[r]={ID:n,predicate:function(r){return r.collisionGroupID===n}}}return this.collisionGroups[r]};var er=function(r,n,i,a){this.transform=r.clone(),this.collisionIndex=new t2(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new t9(i),this.collisionCircleArrays={},this.prevPlacement=a,a&&(a.prevPlacement=void 0),this.placedOrientations={}};function en(r,n,i,a,o){r.emplaceBack(n?1:0,i?1:0,a||0,o||0),r.emplaceBack(n?1:0,i?1:0,a||0,o||0),r.emplaceBack(n?1:0,i?1:0,a||0,o||0),r.emplaceBack(n?1:0,i?1:0,a||0,o||0)}function ei(r){if(0===r.opacity&&!r.placed)return 0;if(1===r.opacity&&r.placed)return 4294967295;var n=r.placed?1:0,i=Math.floor(127*r.opacity);return 33554432*i+16777216*n+131072*i+65536*n+512*i+256*n+2*i+n}er.prototype.getBucketParts=function(n,i,a,o){var s=a.getBucket(i),l=a.latestFeatureIndex;if(s&&l&&i.id===s.layerIds[0]){var u=a.collisionBoxArray,c=s.layers[0].layout,f=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),h=a.tileSize/r.EXTENT,p=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),d="map"===c.get("text-pitch-alignment"),v="map"===c.get("text-rotation-alignment"),g=t3(a,1,this.transform.zoom),y=tq(p,d,v,this.transform,g),m=null;if(d){var x=tG(p,d,v,this.transform,g);m=r.multiply([],this.transform.labelPlaneMatrix,x)}this.retainedQueryData[s.bucketInstanceId]=new t7(s.bucketInstanceId,l,s.sourceLayerIndex,s.index,a.tileID);var b={bucket:s,layout:c,posMatrix:p,textLabelPlaneMatrix:y,labelToScreenMatrix:m,scale:f,textPixelRatio:h,holdingForFade:a.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(o)for(var _=0,w=s.sortKeyRanges;_<w.length;_+=1){var T=w[_],k=T.sortKey,A=T.symbolInstanceStart,M=T.symbolInstanceEnd;n.push({sortKey:k,symbolInstanceStart:A,symbolInstanceEnd:M,parameters:b})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:b})}},er.prototype.attemptAnchorPlacement=function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g){var y,m=[p.textOffset0,p.textOffset1],x=et(r,i,a,m,o),b=this.collisionIndex.placeCollisionBox(ee(n,x.x,x.y,s,l,this.transform.angle),h,u,c,f.predicate);if(!g||0!==this.collisionIndex.placeCollisionBox(ee(g,x.x,x.y,s,l,this.transform.angle),h,u,c,f.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(y=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:m,width:i,height:a,anchor:r,textBoxScale:o,prevAnchor:y},this.markUsedJustification(d,r,p,v),d.allowVerticalPlacement&&(this.markUsedOrientation(d,v,p),this.placedOrientations[p.crossTileID]=v),{shift:x,placedGlyphBoxes:b}):void 0},er.prototype.placeLayerBucketPart=function(n,i,a){var o=this,s=n.parameters,l=s.bucket,u=s.layout,c=s.posMatrix,f=s.textLabelPlaneMatrix,h=s.labelToScreenMatrix,p=s.textPixelRatio,d=s.holdingForFade,v=s.collisionBoxArray,g=s.partiallyEvaluatedTextSize,y=s.collisionGroup,m=u.get("text-optional"),x=u.get("icon-optional"),b=u.get("text-allow-overlap"),_=u.get("icon-allow-overlap"),w="map"===u.get("text-rotation-alignment"),T="map"===u.get("text-pitch-alignment"),k="none"!==u.get("icon-text-fit"),A="viewport-y"===u.get("symbol-z-order"),M=b&&(_||!l.hasIconData()||x),S=_&&(b||!l.hasTextData()||m);!l.collisionArrays&&v&&l.deserializeCollisionBoxes(v);var E=function(n,s){if(!i[n.crossTileID]){if(d)o.placements[n.crossTileID]=new t6(!1,!1,!1);else{var v,A=!1,E=!1,L=!0,C=null,O={box:null,offscreen:null},P={box:null,offscreen:null},I=null,D=null,z=0,R=0,F=0;s.textFeatureIndex?z=s.textFeatureIndex:n.useRuntimeCollisionCircles&&(z=n.featureIndex),s.verticalTextFeatureIndex&&(R=s.verticalTextFeatureIndex);var B=s.textBox;if(B){var N=function(i){var a=r.WritingMode.horizontal;if(l.allowVerticalPlacement&&!i&&o.prevPlacement){var s=o.prevPlacement.placedOrientations[n.crossTileID];s&&(o.placedOrientations[n.crossTileID]=s,a=s,o.markUsedOrientation(l,a,n))}return a},j=function(i,a){if(l.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&s.verticalTextBox)for(var o=0,u=l.writingModes;o<u.length&&(u[o]===r.WritingMode.vertical?P=O=a():O=i(),!(O&&O.box&&O.box.length));o+=1);else O=i()};if(u.get("text-variable-anchor")){var U=u.get("text-variable-anchor");if(o.prevPlacement&&o.prevPlacement.variableOffsets[n.crossTileID]){var V=o.prevPlacement.variableOffsets[n.crossTileID];U.indexOf(V.anchor)>0&&(U=U.filter(function(r){return r!==V.anchor})).unshift(V.anchor)}var H=function(r,i,a){for(var s=r.x2-r.x1,u=r.y2-r.y1,f=n.textBoxScale,h=k&&!_?i:null,d={box:[],offscreen:!1},v=b?2*U.length:U.length,g=0;g<v;++g){var m=U[g%U.length],x=g>=U.length,M=o.attemptAnchorPlacement(m,r,s,u,f,w,T,p,c,y,x,n,l,a,h);if(M&&(d=M.placedGlyphBoxes)&&d.box&&d.box.length){A=!0,C=M.shift;break}}return d};j(function(){return H(B,s.iconBox,r.WritingMode.horizontal)},function(){var i=s.verticalTextBox,a=O&&O.box&&O.box.length;return l.allowVerticalPlacement&&!a&&n.numVerticalGlyphVertices>0&&i?H(i,s.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),O&&(A=O.box,L=O.offscreen);var q=N(O&&O.box);if(!A&&o.prevPlacement){var G=o.prevPlacement.variableOffsets[n.crossTileID];G&&(o.variableOffsets[n.crossTileID]=G,o.markUsedJustification(l,G.anchor,n,q))}}else{var Z=function(r,i){var a=o.collisionIndex.placeCollisionBox(r,b,p,c,y.predicate);return a&&a.box&&a.box.length&&(o.markUsedOrientation(l,i,n),o.placedOrientations[n.crossTileID]=i),a};j(function(){return Z(B,r.WritingMode.horizontal)},function(){var i=s.verticalTextBox;return l.allowVerticalPlacement&&n.numVerticalGlyphVertices>0&&i?Z(i,r.WritingMode.vertical):{box:null,offscreen:null}}),N(O&&O.box&&O.box.length)}}if(A=(v=O)&&v.box&&v.box.length>0,L=v&&v.offscreen,n.useRuntimeCollisionCircles){var Y=l.text.placedSymbolArray.get(n.centerJustifiedTextSymbolIndex),W=r.evaluateSizeForFeature(l.textSizeData,g,Y),X=u.get("text-padding"),J=n.collisionCircleDiameter;I=o.collisionIndex.placeCollisionCircles(b,Y,l.lineVertexArray,l.glyphOffsetArray,W,c,f,h,a,T,y.predicate,J,X),A=b||I.circles.length>0&&!I.collisionDetected,L=L&&I.offscreen}if(s.iconFeatureIndex&&(F=s.iconFeatureIndex),s.iconBox){var K=function(r){var n=k&&C?ee(r,C.x,C.y,w,T,o.transform.angle):r;return o.collisionIndex.placeCollisionBox(n,_,p,c,y.predicate)};E=P&&P.box&&P.box.length&&s.verticalIconBox?(D=K(s.verticalIconBox)).box.length>0:(D=K(s.iconBox)).box.length>0,L=L&&D.offscreen}var $=m||0===n.numHorizontalGlyphVertices&&0===n.numVerticalGlyphVertices,Q=x||0===n.numIconVertices;if($||Q?Q?$||(E=E&&A):A=E&&A:E=A=E&&A,A&&v&&v.box&&(P&&P.box&&R?o.collisionIndex.insertCollisionBox(v.box,u.get("text-ignore-placement"),l.bucketInstanceId,R,y.ID):o.collisionIndex.insertCollisionBox(v.box,u.get("text-ignore-placement"),l.bucketInstanceId,z,y.ID)),E&&D&&o.collisionIndex.insertCollisionBox(D.box,u.get("icon-ignore-placement"),l.bucketInstanceId,F,y.ID),I&&(A&&o.collisionIndex.insertCollisionCircles(I.circles,u.get("text-ignore-placement"),l.bucketInstanceId,z,y.ID),a)){var tt=l.bucketInstanceId,te=o.collisionCircleArrays[tt];void 0===te&&(te=o.collisionCircleArrays[tt]=new t8);for(var tr=0;tr<I.circles.length;tr+=4)te.circles.push(I.circles[tr+0]),te.circles.push(I.circles[tr+1]),te.circles.push(I.circles[tr+2]),te.circles.push(I.collisionDetected?1:0)}o.placements[n.crossTileID]=new t6(A||M,E||S,L||l.justReloaded),i[n.crossTileID]=!0}}};if(A)for(var L=l.getSortedSymbolIndexes(this.transform.angle),C=L.length-1;C>=0;--C){var O=L[C];E(l.symbolInstances.get(O),l.collisionArrays[O])}else for(var P=n.symbolInstanceStart;P<n.symbolInstanceEnd;P++)E(l.symbolInstances.get(P),l.collisionArrays[P]);if(a&&l.bucketInstanceId in this.collisionCircleArrays){var I=this.collisionCircleArrays[l.bucketInstanceId];r.invert(I.invProjMatrix,c),I.viewportMatrix=this.collisionIndex.getViewportMatrix()}l.justReloaded=!1},er.prototype.markUsedJustification=function(n,i,a,o){var s,l={left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex};s=o===r.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:l[r.getAnchorJustification(i)];for(var u=0,c=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];u<c.length;u+=1){var f=c[u];f>=0&&(n.text.placedSymbolArray.get(f).crossTileID=s>=0&&f!==s?0:a.crossTileID)}},er.prototype.markUsedOrientation=function(n,i,a){for(var o=i===r.WritingMode.horizontal||i===r.WritingMode.horizontalOnly?i:0,s=i===r.WritingMode.vertical?i:0,l=0,u=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];l<u.length;l+=1){var c=u[l];n.text.placedSymbolArray.get(c).placedOrientation=o}a.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=s)},er.prototype.commit=function(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;var n=this.prevPlacement,i=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;var a=n?n.symbolFadeChange(r):1,o=n?n.opacities:{},s=n?n.variableOffsets:{},l=n?n.placedOrientations:{};for(var u in this.placements){var c=this.placements[u],f=o[u];f?(this.opacities[u]=new t4(f,a,c.text,c.icon),i=i||c.text!==f.text.placed||c.icon!==f.icon.placed):(this.opacities[u]=new t4(null,a,c.text,c.icon,c.skipFade),i=i||c.text||c.icon)}for(var h in o){var p=o[h];if(!this.opacities[h]){var d=new t4(p,a,!1,!1);d.isHidden()||(this.opacities[h]=d,i=i||p.text.placed||p.icon.placed)}}for(var v in s)this.variableOffsets[v]||!this.opacities[v]||this.opacities[v].isHidden()||(this.variableOffsets[v]=s[v]);for(var g in l)this.placedOrientations[g]||!this.opacities[g]||this.opacities[g].isHidden()||(this.placedOrientations[g]=l[g]);i?this.lastPlacementChangeTime=r:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:r)},er.prototype.updateLayerOpacities=function(r,n){for(var i={},a=0;a<n.length;a+=1){var o=n[a],s=o.getBucket(r);s&&o.latestFeatureIndex&&r.id===s.layerIds[0]&&this.updateBucketOpacities(s,i,o.collisionBoxArray)}},er.prototype.updateBucketOpacities=function(n,i,a){var o=this;n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();var s=n.layers[0].layout,l=new t4(null,0,!1,!1,!0),u=s.get("text-allow-overlap"),c=s.get("icon-allow-overlap"),f=s.get("text-variable-anchor"),h="map"===s.get("text-rotation-alignment"),p="map"===s.get("text-pitch-alignment"),d="none"!==s.get("icon-text-fit"),v=new t4(null,0,u&&(c||!n.hasIconData()||s.get("icon-optional")),c&&(u||!n.hasTextData()||s.get("text-optional")),!0);!n.collisionArrays&&a&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(a);for(var g=function(r,n,i){for(var a=0;a<n/4;a++)r.opacityVertexArray.emplaceBack(i)},y=0;y<n.symbolInstances.length;y++)(function(a){var s=n.symbolInstances.get(a),u=s.numHorizontalGlyphVertices,c=s.numVerticalGlyphVertices,y=s.crossTileID,m=i[y],x=o.opacities[y];m?x=l:x||(x=v,o.opacities[y]=x),i[y]=!0;var b=u>0||c>0,_=s.numIconVertices>0,w=o.placedOrientations[s.crossTileID],T=w===r.WritingMode.vertical,k=w===r.WritingMode.horizontal||w===r.WritingMode.horizontalOnly;if(b){var A=ei(x.text),M=T?ea:A;g(n.text,u,M);var S=k?ea:A;g(n.text,c,S);var E=x.text.isHidden();[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(function(r){r>=0&&(n.text.placedSymbolArray.get(r).hidden=E||T?1:0)}),s.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).hidden=E||k?1:0);var L=o.variableOffsets[s.crossTileID];L&&o.markUsedJustification(n,L.anchor,s,w);var C=o.placedOrientations[s.crossTileID];C&&(o.markUsedJustification(n,"left",s,C),o.markUsedOrientation(n,C,s))}if(_){var O=ei(x.icon),P=!(d&&s.verticalPlacedIconSymbolIndex&&T);if(s.placedIconSymbolIndex>=0){var I=P?O:ea;g(n.icon,s.numIconVertices,I),n.icon.placedSymbolArray.get(s.placedIconSymbolIndex).hidden=x.icon.isHidden()}if(s.verticalPlacedIconSymbolIndex>=0){var D=P?ea:O;g(n.icon,s.numVerticalIconVertices,D),n.icon.placedSymbolArray.get(s.verticalPlacedIconSymbolIndex).hidden=x.icon.isHidden()}}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){var z=n.collisionArrays[a];if(z){var R=new r.Point(0,0);if(z.textBox||z.verticalTextBox){var F=!0;if(f){var B=o.variableOffsets[y];B?(R=et(B.anchor,B.width,B.height,B.textOffset,B.textBoxScale),h&&R._rotate(p?o.transform.angle:-o.transform.angle)):F=!1}z.textBox&&en(n.textCollisionBox.collisionVertexArray,x.text.placed,!F||T,R.x,R.y),z.verticalTextBox&&en(n.textCollisionBox.collisionVertexArray,x.text.placed,!F||k,R.x,R.y)}var N=!!(!k&&z.verticalIconBox);z.iconBox&&en(n.iconCollisionBox.collisionVertexArray,x.icon.placed,N,d?R.x:0,d?R.y:0),z.verticalIconBox&&en(n.iconCollisionBox.collisionVertexArray,x.icon.placed,!N,d?R.x:0,d?R.y:0)}}})(y);if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=m.invProjMatrix,n.placementViewportMatrix=m.viewportMatrix,n.collisionCircleArray=m.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}},er.prototype.symbolFadeChange=function(r){return 0===this.fadeDuration?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},er.prototype.zoomAdjustment=function(r){return Math.max(0,(this.transform.zoom-r)/1.5)},er.prototype.hasTransitions=function(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration},er.prototype.stillRecent=function(r,n){var i=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*i>r},er.prototype.setStale=function(){this.stale=!0};var ea=0,eo=function(r){this._sortAcrossTiles="viewport-y"!==r.layout.get("symbol-z-order")&&void 0!==r.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};eo.prototype.continuePlacement=function(r,n,i,a,o){for(var s=this._bucketParts;this._currentTileIndex<r.length;){var l=r[this._currentTileIndex];if(n.getBucketParts(s,a,l,this._sortAcrossTiles),this._currentTileIndex++,o())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort(function(r,n){return r.sortKey-n.sortKey}));this._currentPartIndex<s.length;){var u=s[this._currentPartIndex];if(n.placeLayerBucketPart(u,this._seenCrossTileIDs,i),this._currentPartIndex++,o())return!0}return!1};var es=function(r,n,i,a,o,s,l){this.placement=new er(r,o,s,l),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=a,this._done=!1};es.prototype.isDone=function(){return this._done},es.prototype.continuePlacement=function(n,i,a){for(var o=this,s=r.browser.now(),l=function(){var n=r.browser.now()-s;return!o._forceFullPlacement&&n>2};this._currentPlacementIndex>=0;){var u=i[n[this._currentPlacementIndex]],c=this.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=c)&&(!u.maxzoom||u.maxzoom>c)){if(this._inProgressLayer||(this._inProgressLayer=new eo(u)),this._inProgressLayer.continuePlacement(a[u.source],this.placement,this._showCollisionBoxes,u,l))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},es.prototype.commit=function(r){return this.placement.commit(r),this.placement};var el=512/r.EXTENT/2,eu=function(r,n,i){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var a=0;a<n.length;a++){var o=n.get(a),s=o.key;this.indexedSymbolInstances[s]||(this.indexedSymbolInstances[s]=[]),this.indexedSymbolInstances[s].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,r)})}};eu.prototype.getScaledCoordinates=function(n,i){var a=el/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*r.EXTENT+n.anchorX)*a),y:Math.floor((i.canonical.y*r.EXTENT+n.anchorY)*a)}},eu.prototype.findMatches=function(r,n,i){for(var a=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),o=0;o<r.length;o++){var s=r.get(o);if(!s.crossTileID){var l=this.indexedSymbolInstances[s.key];if(l)for(var u=this.getScaledCoordinates(s,n),c=0;c<l.length;c+=1){var f=l[c];if(Math.abs(f.coord.x-u.x)<=a&&Math.abs(f.coord.y-u.y)<=a&&!i[f.crossTileID]){i[f.crossTileID]=!0,s.crossTileID=f.crossTileID;break}}}}};var ec=function(){this.maxCrossTileID=0};ec.prototype.generate=function(){return++this.maxCrossTileID};var ef=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ef.prototype.handleWrapJump=function(r){var n=Math.round((r-this.lng)/360);if(0!==n)for(var i in this.indexes){var a=this.indexes[i],o={};for(var s in a){var l=a[s];l.tileID=l.tileID.unwrapTo(l.tileID.wrap+n),o[l.tileID.key]=l}this.indexes[i]=o}this.lng=r},ef.prototype.addBucket=function(r,n,i){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(var a=0;a<n.symbolInstances.length;a++)n.symbolInstances.get(a).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});var o=this.usedCrossTileIDs[r.overscaledZ];for(var s in this.indexes){var l=this.indexes[s];if(Number(s)>r.overscaledZ)for(var u in l){var c=l[u];c.tileID.isChildOf(r)&&c.findMatches(n.symbolInstances,r,o)}else{var f=l[r.scaledTo(Number(s)).key];f&&f.findMatches(n.symbolInstances,r,o)}}for(var h=0;h<n.symbolInstances.length;h++){var p=n.symbolInstances.get(h);p.crossTileID||(p.crossTileID=i.generate(),o[p.crossTileID]=!0)}return void 0===this.indexes[r.overscaledZ]&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new eu(r,n.symbolInstances,n.bucketInstanceId),!0},ef.prototype.removeBucketCrossTileIDs=function(r,n){for(var i in n.indexedSymbolInstances)for(var a=0,o=n.indexedSymbolInstances[i];a<o.length;a+=1){var s=o[a];delete this.usedCrossTileIDs[r][s.crossTileID]}},ef.prototype.removeStaleBuckets=function(r){var n=!1;for(var i in this.indexes){var a=this.indexes[i];for(var o in a)r[a[o].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,a[o]),delete a[o],n=!0)}return n};var eh=function(){this.layerIndexes={},this.crossTileIDs=new ec,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};eh.prototype.addLayer=function(r,n,i){var a=this.layerIndexes[r.id];void 0===a&&(a=this.layerIndexes[r.id]=new ef);var o=!1,s={};a.handleWrapJump(i);for(var l=0;l<n.length;l+=1){var u=n[l],c=u.getBucket(r);c&&r.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(u.tileID,c,this.crossTileIDs)&&(o=!0),s[c.bucketInstanceId]=!0)}return a.removeStaleBuckets(s)&&(o=!0),o},eh.prototype.pruneUnusedLayers=function(r){var n={};for(var i in r.forEach(function(r){n[r]=!0}),this.layerIndexes)n[i]||delete this.layerIndexes[i]};var ep=function(n,i){return r.emitValidationErrors(n,i&&i.filter(function(r){return"source.canvas"!==r.identifier}))},ed=r.pick(tR,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ev=r.pick(tR,["setCenter","setZoom","setBearing","setPitch"]),eg=function(){var n={},i=r.styleSpec.$version;for(var a in r.styleSpec.$root){var o,s=r.styleSpec.$root[a];s.required&&null!=(o="version"===a?i:"array"===s.type?[]:{})&&(n[a]=o)}return n}(),ey=function(n){function i(a,o){var s=this;void 0===o&&(o={}),n.call(this),this.map=a,this.dispatcher=new w(tD(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new y(a._requestManager,o.localIdeographFontFamily),this.lineAtlas=new _(256,512),this.crossTileSymbolIndex=new eh,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var l=this;this._rtlTextPluginCallback=i.registerForPluginStateChange(function(n){var i={pluginStatus:n.pluginStatus,pluginURL:n.pluginURL};l.dispatcher.broadcast("syncRTLPluginState",i,function(n,i){if(r.triggerPluginCompletionEvent(n),i&&i.every(function(r){return r}))for(var a in l.sourceCaches)l.sourceCaches[a].reload()})}),this.on("data",function(r){if("source"===r.dataType&&"metadata"===r.sourceDataType){var n=s.sourceCaches[r.sourceId];if(n){var i=n.getSource();if(i&&i.vectorLayerIds)for(var a in s._layers){var o=s._layers[a];o.source===i.id&&s._validateLayer(o)}}}})}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.loadURL=function(n,i){var a=this;void 0===i&&(i={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var o="boolean"==typeof i.validate?i.validate:!r.isMapboxURL(n);n=this.map._requestManager.normalizeStyleURL(n,i.accessToken);var s=this.map._requestManager.transformRequest(n,r.ResourceType.Style);this._request=r.getJSON(s,function(n,i){a._request=null,n?a.fire(new r.ErrorEvent(n)):i&&a._load(i,o)})},i.prototype.loadJSON=function(n,i){var a=this;void 0===i&&(i={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){a._request=null,a._load(n,!1!==i.validate)})},i.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(eg,!1)},i.prototype._load=function(n,i){if(!i||!ep(this,r.validateStyle(n))){for(var a in this._loaded=!0,this.stylesheet=n,n.sources)this.addSource(a,n.sources[a],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);var o=tz(this.stylesheet.layers);this._order=o.map(function(r){return r.id}),this._layers={},this._serializedLayers={};for(var s=0;s<o.length;s+=1){var l=o[s];(l=r.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l,this._serializedLayers[l.id]=l.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},i.prototype._loadSprite=function(n){var i=this;this._spriteRequest=function(n,i,a){var o,s,l,u=r.browser.devicePixelRatio>1?"@2x":"",c=r.getJSON(i.transformRequest(i.normalizeSpriteURL(n,u,".json"),r.ResourceType.SpriteJSON),function(r,n){c=null,l||(l=r,o=n,h())}),f=r.getImage(i.transformRequest(i.normalizeSpriteURL(n,u,".png"),r.ResourceType.SpriteImage),function(r,n){f=null,l||(l=r,s=n,h())});function h(){if(l)a(l);else if(o&&s){var n=r.browser.getImageData(s),i={};for(var u in o){var c=o[u],f=c.width,h=c.height,p=c.x,d=c.y,v=c.sdf,g=c.pixelRatio,y=c.stretchX,m=c.stretchY,x=c.content,b=new r.RGBAImage({width:f,height:h});r.RGBAImage.copy(n,b,{x:p,y:d},{x:0,y:0},{width:f,height:h}),i[u]={data:b,pixelRatio:g,sdf:v,stretchX:y,stretchY:m,content:x}}a(null,i)}}return{cancel:function(){c&&(c.cancel(),c=null),f&&(f.cancel(),f=null)}}}(n,this.map._requestManager,function(n,a){if(i._spriteRequest=null,n)i.fire(new r.ErrorEvent(n));else if(a)for(var o in a)i.imageManager.addImage(o,a[o]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new r.Event("data",{dataType:"style"}))})},i.prototype._validateLayer=function(n){var i=this.sourceCaches[n.source];if(i){var a=n.sourceLayer;if(a){var o=i.getSource();("geojson"===o.type||o.vectorLayerIds&&-1===o.vectorLayerIds.indexOf(a))&&this.fire(new r.ErrorEvent(Error('Source layer "'+a+'" does not exist on source "'+o.id+'" as specified by style layer "'+n.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(r){for(var n=[],i=0;i<r.length;i+=1){var a=r[i],o=this._layers[a];"custom"!==o.type&&n.push(o.serialize())}return n},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(var n in this._layers)if(this._layers[n].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading")},i.prototype.update=function(n){if(this._loaded){var i=this._changed;if(this._changed){var a=Object.keys(this._updatedLayers),o=Object.keys(this._removedLayers);for(var s in(a.length||o.length)&&this._updateWorkerLayers(a,o),this._updatedSources){var l=this._updatedSources[s];"reload"===l?this._reloadSource(s):"clear"===l&&this._clearSource(s)}for(var u in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[u].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}var c={};for(var f in this.sourceCaches){var h=this.sourceCaches[f];c[f]=h.used,h.used=!1}for(var p=0,d=this._order;p<d.length;p+=1){var v=d[p],g=this._layers[v];g.recalculate(n,this._availableImages),!g.isHidden(n.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(var y in c){var m=this.sourceCaches[y];c[y]!==m.used&&m.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(n),this.z=n.zoom,i&&this.fire(new r.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var r=Object.keys(this._changedImages);if(r.length){for(var n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}},i.prototype._updateWorkerLayers=function(r,n){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:n})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(n){var i=this;if(this._checkLoaded(),ep(this,r.validateStyle(n)))return!1;(n=r.clone$1(n)).layers=tz(n.layers);var a=(function(n,i){if(!n)return[{command:tR.setStyle,args:[i]}];var a=[];try{if(!r.deepEqual(n.version,i.version))return[{command:tR.setStyle,args:[i]}];r.deepEqual(n.center,i.center)||a.push({command:tR.setCenter,args:[i.center]}),r.deepEqual(n.zoom,i.zoom)||a.push({command:tR.setZoom,args:[i.zoom]}),r.deepEqual(n.bearing,i.bearing)||a.push({command:tR.setBearing,args:[i.bearing]}),r.deepEqual(n.pitch,i.pitch)||a.push({command:tR.setPitch,args:[i.pitch]}),r.deepEqual(n.sprite,i.sprite)||a.push({command:tR.setSprite,args:[i.sprite]}),r.deepEqual(n.glyphs,i.glyphs)||a.push({command:tR.setGlyphs,args:[i.glyphs]}),r.deepEqual(n.transition,i.transition)||a.push({command:tR.setTransition,args:[i.transition]}),r.deepEqual(n.light,i.light)||a.push({command:tR.setLight,args:[i.light]});var o={},s=[];!function(n,i,a,o){var s,l,u;for(s in i=i||{},n=n||{})n.hasOwnProperty(s)&&(i.hasOwnProperty(s)||tB(s,a,o));for(s in i)i.hasOwnProperty(s)&&(n.hasOwnProperty(s)?r.deepEqual(n[s],i[s])||("geojson"===n[s].type&&"geojson"===i[s].type&&function(n,i,a){var o;for(o in n[a])if(n[a].hasOwnProperty(o)&&"data"!==o&&!r.deepEqual(n[a][o],i[a][o]))return!1;for(o in i[a])if(i[a].hasOwnProperty(o)&&"data"!==o&&!r.deepEqual(n[a][o],i[a][o]))return!1;return!0}(n,i,s)?a.push({command:tR.setGeoJSONSourceData,args:[s,i[s].data]}):(l=s,u=i,tB(l,a,o),tF(l,u,a))):tF(s,i,a))}(n.sources,i.sources,s,o);var l=[];n.layers&&n.layers.forEach(function(r){o[r.source]?a.push({command:tR.removeLayer,args:[r.id]}):l.push(r)}),a=a.concat(s),function(n,i,a){i=i||[];var o,s,l,u,c,f,h,p=(n=n||[]).map(tj),d=i.map(tj),v=n.reduce(tU,{}),g=i.reduce(tU,{}),y=p.slice(),m=Object.create(null);for(o=0,s=0;o<p.length;o++)l=p[o],g.hasOwnProperty(l)?s++:(a.push({command:tR.removeLayer,args:[l]}),y.splice(y.indexOf(l,s),1));for(o=0,s=0;o<d.length;o++)l=d[d.length-1-o],y[y.length-1-o]!==l&&(v.hasOwnProperty(l)?(a.push({command:tR.removeLayer,args:[l]}),y.splice(y.lastIndexOf(l,y.length-s),1)):s++,f=y[y.length-o],a.push({command:tR.addLayer,args:[g[l],f]}),y.splice(y.length-o,0,l),m[l]=!0);for(o=0;o<d.length;o++)if(u=v[l=d[o]],c=g[l],!m[l]&&!r.deepEqual(u,c)){if(r.deepEqual(u.source,c.source)&&r.deepEqual(u["source-layer"],c["source-layer"])&&r.deepEqual(u.type,c.type)){for(h in tN(u.layout,c.layout,a,l,null,tR.setLayoutProperty),tN(u.paint,c.paint,a,l,null,tR.setPaintProperty),r.deepEqual(u.filter,c.filter)||a.push({command:tR.setFilter,args:[l,c.filter]}),r.deepEqual(u.minzoom,c.minzoom)&&r.deepEqual(u.maxzoom,c.maxzoom)||a.push({command:tR.setLayerZoomRange,args:[l,c.minzoom,c.maxzoom]}),u)u.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?tN(u[h],c[h],a,l,h.slice(6),tR.setPaintProperty):r.deepEqual(u[h],c[h])||a.push({command:tR.setLayerProperty,args:[l,h,c[h]]}));for(h in c)c.hasOwnProperty(h)&&!u.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?tN(u[h],c[h],a,l,h.slice(6),tR.setPaintProperty):r.deepEqual(u[h],c[h])||a.push({command:tR.setLayerProperty,args:[l,h,c[h]]}))}else a.push({command:tR.removeLayer,args:[l]}),f=y[y.lastIndexOf(l)+1],a.push({command:tR.addLayer,args:[c,f]})}}(l,i.layers,a)}catch(r){console.warn("Unable to compute style diff:",r),a=[{command:tR.setStyle,args:[i]}]}return a})(this.serialize(),n).filter(function(r){return!(r.command in ev)});if(0===a.length)return!1;var o=a.filter(function(r){return!(r.command in ed)});if(o.length>0)throw Error("Unimplemented: "+o.map(function(r){return r.command}).join(", ")+".");return a.forEach(function(r){"setTransition"!==r.command&&i[r.command].apply(i,r.args)}),this.stylesheet=n,!0},i.prototype.addImage=function(n,i){if(this.getImage(n))return this.fire(new r.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(n,i),this._afterImageUpdated(n)},i.prototype.updateImage=function(r,n){this.imageManager.updateImage(r,n)},i.prototype.getImage=function(r){return this.imageManager.getImage(r)},i.prototype.removeImage=function(n){if(!this.getImage(n))return this.fire(new r.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(n),this._afterImageUpdated(n)},i.prototype._afterImageUpdated=function(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(n,i,a){var o=this;if(void 0===a&&(a={}),this._checkLoaded(),void 0!==this.sourceCaches[n])throw Error("There is already a source with this ID");if(!i.type)throw Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(r.validateStyle.source,"sources."+n,i,null,a))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var s=this.sourceCaches[n]=new tM(n,i,this.dispatcher);s.style=this,s.setEventedParent(this,function(){return{isSourceLoaded:o.loaded(),source:s.serialize(),sourceId:n}}),s.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(n){if(this._checkLoaded(),void 0===this.sourceCaches[n])throw Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===n)return this.fire(new r.ErrorEvent(Error('Source "'+n+'" cannot be removed while layer "'+i+'" is using it.')));var a=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],a.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),a.setEventedParent(null),a.clearTiles(),a.onRemove&&a.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(r,n){this._checkLoaded(),this.sourceCaches[r].getSource().setData(n),this._changed=!0},i.prototype.getSource=function(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()},i.prototype.addLayer=function(n,i,a){void 0===a&&(a={}),this._checkLoaded();var o=n.id;if(this.getLayer(o))this.fire(new r.ErrorEvent(Error('Layer with id "'+o+'" already exists on this map')));else{if("custom"===n.type){if(ep(this,r.validateCustomStyleLayer(n)))return;s=r.createStyleLayer(n)}else{if("object"==typeof n.source&&(this.addSource(o,n.source),n=r.clone$1(n),n=r.extend(n,{source:o})),this._validate(r.validateStyle.layer,"layers."+o,n,{arrayIndex:-1},a))return;s=r.createStyleLayer(n),this._validateLayer(s),s.setEventedParent(this,{layer:{id:o}}),this._serializedLayers[s.id]=s.serialize()}var s,l=i?this._order.indexOf(i):this._order.length;if(i&&-1===l)this.fire(new r.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(l,0,o),this._layerOrderChanged=!0,this._layers[o]=s,this._removedLayers[o]&&s.source&&"custom"!==s.type){var u=this._removedLayers[o];delete this._removedLayers[o],u.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause())}this._updateLayer(s),s.onAdd&&s.onAdd(this.map)}}},i.prototype.moveLayer=function(n,i){if(this._checkLoaded(),this._changed=!0,this._layers[n]){if(n!==i){var a=this._order.indexOf(n);this._order.splice(a,1);var o=i?this._order.indexOf(i):this._order.length;i&&-1===o?this.fire(new r.ErrorEvent(Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(o,0,n),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(n){this._checkLoaded();var i=this._layers[n];if(i){i.setEventedParent(null);var a=this._order.indexOf(n);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=i,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],i.onRemove&&i.onRemove(this.map)}else this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(r){return this._layers[r]},i.prototype.hasLayer=function(r){return r in this._layers},i.prototype.setLayerZoomRange=function(n,i,a){this._checkLoaded();var o=this.getLayer(n);o?o.minzoom===i&&o.maxzoom===a||(null!=i&&(o.minzoom=i),null!=a&&(o.maxzoom=a),this._updateLayer(o)):this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(n,i,a){void 0===a&&(a={}),this._checkLoaded();var o=this.getLayer(n);if(o){if(!r.deepEqual(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(r.validateStyle.filter,"layers."+o.id+".filter",i,null,a)||(o.filter=r.clone$1(i),this._updateLayer(o)))}else this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(n){return r.clone$1(this.getLayer(n).filter)},i.prototype.setLayoutProperty=function(n,i,a,o){void 0===o&&(o={}),this._checkLoaded();var s=this.getLayer(n);s?r.deepEqual(s.getLayoutProperty(i),a)||(s.setLayoutProperty(i,a,o),this._updateLayer(s)):this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(n,i){var a=this.getLayer(n);if(a)return a.getLayoutProperty(i);this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(n,i,a,o){void 0===o&&(o={}),this._checkLoaded();var s=this.getLayer(n);s?r.deepEqual(s.getPaintProperty(i),a)||(s.setPaintProperty(i,a,o)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new r.ErrorEvent(Error("The layer '"+n+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(r,n){return this.getLayer(r).getPaintProperty(n)},i.prototype.setFeatureState=function(n,i){this._checkLoaded();var a=n.source,o=n.sourceLayer,s=this.sourceCaches[a];if(void 0!==s){var l=s.getSource().type;"geojson"===l&&o?this.fire(new r.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==l||o?(void 0===n.id&&this.fire(new r.ErrorEvent(Error("The feature id parameter must be provided."))),s.setFeatureState(o,n.id,i)):this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error("The source '"+a+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(n,i){this._checkLoaded();var a=n.source,o=this.sourceCaches[a];if(void 0!==o){var s=o.getSource().type,l="vector"===s?n.sourceLayer:void 0;"vector"!==s||l?i&&"string"!=typeof n.id&&"number"!=typeof n.id?this.fire(new r.ErrorEvent(Error("A feature id is required to remove its specific state property."))):o.removeFeatureState(l,n.id,i):this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error("The source '"+a+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(n){this._checkLoaded();var i=n.source,a=n.sourceLayer,o=this.sourceCaches[i];if(void 0!==o){if("vector"!==o.getSource().type||a)return void 0===n.id&&this.fire(new r.ErrorEvent(Error("The feature id parameter must be provided."))),o.getFeatureState(a,n.id);this.fire(new r.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function(r){return r.serialize()}),layers:this._serializeLayers(this._order)},function(r){return void 0!==r})},i.prototype._updateLayer=function(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&"raster"!==this.sourceCaches[r.source].getSource().type&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(r){for(var n=this,i=function(r){return"fill-extrusion"===n._layers[r].type},a={},o=[],s=this._order.length-1;s>=0;s--){var l=this._order[s];if(i(l)){a[l]=s;for(var u=0;u<r.length;u+=1){var c=r[u][l];if(c)for(var f=0;f<c.length;f+=1){var h=c[f];o.push(h)}}}}o.sort(function(r,n){return n.intersectionZ-r.intersectionZ});for(var p=[],d=this._order.length-1;d>=0;d--){var v=this._order[d];if(i(v))for(var g=o.length-1;g>=0;g--){var y=o[g].feature;if(a[y.layer.id]<d)break;p.push(y),o.pop()}else for(var m=0;m<r.length;m+=1){var x=r[m][v];if(x)for(var b=0;b<x.length;b+=1){var _=x[b];p.push(_.feature)}}}return p},i.prototype.queryRenderedFeatures=function(n,i,a){i&&i.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var o={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new r.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var s=0,l=i.layers;s<l.length;s+=1){var u=l[s],c=this._layers[u];if(!c)return this.fire(new r.ErrorEvent(Error("The layer '"+u+"' does not exist in the map's style and cannot be queried for features."))),[];o[c.source]=!0}}var f=[];for(var h in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!o[h]||f.push(function(n,i,a,o,s,l){var u=function(r,n,i){if(r)for(var a=0;a<r.length;a+=1){var o=n[r[a]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var s in n){var l=n[s];if(l.source===i&&"fill-extrusion"===l.type)return!0}return!1}(s&&s.layers,i,n.id),c=l.maxPitchScaleFactor(),f=n.tilesIn(o,c,u);f.sort(D);for(var h=[],p=0;p<f.length;p+=1){var d=f[p];h.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(i,a,n._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,s,l,c,function(n,i){var a=r.identity([]);return r.translate(a,a,[1,1,0]),r.scale(a,a,[.5*n.width,.5*n.height,1]),r.multiply(a,a,n.calculatePosMatrix(i.toUnwrapped()))}(n.transform,d.tileID))})}var v=function(r){for(var n={},i={},a=0;a<r.length;a+=1){var o=r[a],s=o.queryResults,l=o.wrappedTileID,u=i[l]=i[l]||{};for(var c in s)for(var f=s[c],h=u[c]=u[c]||{},p=n[c]=n[c]||[],d=0;d<f.length;d+=1){var v=f[d];h[v.featureIndex]||(h[v.featureIndex]=!0,p.push(v))}}return n}(h);for(var g in v)v[g].forEach(function(r){var i=r.feature,a=n.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a});return v}(this.sourceCaches[h],this._layers,this._serializedLayers,n,i,a));return this.placement&&f.push(function(r,n,i,a,o,s,l){for(var u={},c=s.queryRenderedSymbols(a),f=[],h=0,p=Object.keys(c).map(Number);h<p.length;h+=1){var d=p[h];f.push(l[d])}f.sort(D);for(var v=0;v<f.length;v+=1)(function(){var i=f[v],a=i.featureIndex.lookupSymbolFeatures(c[i.bucketInstanceId],n,i.bucketIndex,i.sourceLayerIndex,o.filter,o.layers,o.availableImages,r);for(var s in a){var l=u[s]=u[s]||[],h=a[s];h.sort(function(r,n){var a=i.featureSortOrder;if(a){var o=a.indexOf(r.featureIndex);return a.indexOf(n.featureIndex)-o}return n.featureIndex-r.featureIndex});for(var p=0;p<h.length;p+=1){var d=h[p];l.push(d)}}})();var g=function(n){u[n].forEach(function(a){var o=a.feature,s=i[r[n].source].getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=s})};for(var y in u)g(y);return u}(this._layers,this._serializedLayers,this.sourceCaches,n,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)},i.prototype.querySourceFeatures=function(n,i){i&&i.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var a=this.sourceCaches[n];return a?function(r,n){for(var i=r.getRenderableIds().map(function(n){return r.getTileByID(n)}),a=[],o={},s=0;s<i.length;s++){var l=i[s],u=l.tileID.canonical.key;o[u]||(o[u]=!0,l.querySourceFeatures(a,n))}return a}(a,i):[]},i.prototype.addSourceType=function(r,n,a){return i.getSourceType(r)?a(Error('A source type called "'+r+'" already exists.')):(i.setSourceType(r,n),n.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:n.workerSourceURL},a):a(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(n,i){void 0===i&&(i={}),this._checkLoaded();var a=this.light.getLight(),o=!1;for(var s in n)if(!r.deepEqual(n[s],a[s])){o=!0;break}if(o){var l={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,i),this.light.updateTransitions(l)}},i.prototype._validate=function(n,i,a,o,s){return void 0===s&&(s={}),(!s||!1!==s.validate)&&ep(this,n.call(r.validateStyle,r.extend({key:i,style:this.serialize(),value:a,styleSpec:r.styleSpec},o)))},i.prototype._remove=function(){for(var n in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[n].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(r){this.sourceCaches[r].clearTiles()},i.prototype._reloadSource=function(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()},i.prototype._updateSources=function(r){for(var n in this.sourceCaches)this.sourceCaches[n].update(r)},i.prototype._generateCollisionBoxes=function(){for(var r in this.sourceCaches)this._reloadSource(r)},i.prototype._updatePlacement=function(n,i,a,o,s){void 0===s&&(s=!1);for(var l=!1,u=!1,c={},f=0,h=this._order;f<h.length;f+=1){var p=h[f],d=this._layers[p];if("symbol"===d.type){if(!c[d.source]){var v=this.sourceCaches[d.source];c[d.source]=v.getRenderableIds(!0).map(function(r){return v.getTileByID(r)}).sort(function(r,n){return n.tileID.overscaledZ-r.tileID.overscaledZ||(r.tileID.isLessThan(n.tileID)?-1:1)})}var g=this.crossTileSymbolIndex.addLayer(d,c[d.source],n.center.lng);l=l||g}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((s=s||this._layerOrderChanged||0===a)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),n.zoom))&&(this.pauseablePlacement=new es(n,this._order,s,i,a,o,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l)for(var y=0,m=this._order;y<m.length;y+=1){var x=m[y],b=this._layers[x];"symbol"===b.type&&this.placement.updateLayerOpacities(b,c[b.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()},i.prototype.getImages=function(r,n,i){this.imageManager.getImages(n.icons,i),this._updateTilesForChangedImages();var a=this.sourceCaches[n.source];a&&a.setDependencies(n.tileID.key,n.type,n.icons)},i.prototype.getGlyphs=function(r,n,i){this.glyphManager.getGlyphs(n.stacks,i)},i.prototype.getResource=function(n,i,a){return r.makeRequest(i,a)},i}(r.Evented);ey.getSourceType=function(r){return I[r]},ey.setSourceType=function(r,n){I[r]=n},ey.registerForPluginStateChange=r.registerForPluginStateChange;var em=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),ex=eb("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}");function eb(r,n){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=n.match(/attribute ([\w]+) ([\w]+)/g),o=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),l=s?s.concat(o):o,u={};return{fragmentSource:r=r.replace(i,function(r,n,i,a,o){return u[o]=!0,"define"===n?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+i+" "+a+" "+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:n=n.replace(i,function(r,n,i,a,o){var s="float"===a?"vec2":"vec4",l=o.match(/color/)?"color":s;return u[o]?"define"===n?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+i+" "+s+" a_"+o+";\nvarying "+i+" "+a+" "+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+l+"(a_"+o+", u_"+o+"_t);\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"define"===n?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+i+" "+s+" a_"+o+";\n#else\nuniform "+i+" "+a+" u_"+o+";\n#endif\n":"vec4"===l?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = a_"+o+";\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+i+" "+a+" "+o+" = unpack_mix_"+l+"(a_"+o+", u_"+o+"_t);\n#else\n    "+i+" "+a+" "+o+" = u_"+o+";\n#endif\n"}),staticAttributes:a,staticUniforms:l}}var e_=Object.freeze({__proto__:null,prelude:ex,background:eb("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:eb("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:eb("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:eb("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:eb("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:eb("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:eb("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:eb("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:eb("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:eb("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:eb("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:eb("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:eb("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:eb("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:eb("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:eb("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:eb("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:eb("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:eb("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:eb("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:eb("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:eb("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:eb("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:eb("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:eb("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")}),ew=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function eT(r){for(var n=[],i=0;i<r.length;i++)if(null!==r[i]){var a=r[i].split(" ");n.push(a.pop())}return n}ew.prototype.bind=function(r,n,i,a,o,s,l,u){this.context=r;for(var c=this.boundPaintVertexBuffers.length!==a.length,f=0;!c&&f<a.length;f++)this.boundPaintVertexBuffers[f]!==a[f]&&(c=!0);var h=!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==i||c||this.boundIndexBuffer!==o||this.boundVertexOffset!==s||this.boundDynamicVertexBuffer!==l||this.boundDynamicVertexBuffer2!==u;!r.extVertexArrayObject||h?this.freshBind(n,i,a,o,s,l,u):(r.bindVertexArrayOES.set(this.vao),l&&l.bind(),o&&o.dynamicDraw&&o.bind(),u&&u.bind())},ew.prototype.freshBind=function(r,n,i,a,o,s,l){var u,c=r.numAttributes,f=this.context,h=f.gl;if(f.extVertexArrayObject)this.vao&&this.destroy(),this.vao=f.extVertexArrayObject.createVertexArrayOES(),f.bindVertexArrayOES.set(this.vao),u=0,this.boundProgram=r,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=a,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=s,this.boundDynamicVertexBuffer2=l;else{u=f.currentNumAttributes||0;for(var p=c;p<u;p++)h.disableVertexAttribArray(p)}n.enableAttributes(h,r);for(var d=0;d<i.length;d+=1)i[d].enableAttributes(h,r);s&&s.enableAttributes(h,r),l&&l.enableAttributes(h,r),n.bind(),n.setVertexAttribPointers(h,r,o);for(var v=0;v<i.length;v+=1){var g=i[v];g.bind(),g.setVertexAttribPointers(h,r,o)}s&&(s.bind(),s.setVertexAttribPointers(h,r,o)),a&&a.bind(),l&&(l.bind(),l.setVertexAttribPointers(h,r,o)),f.currentNumAttributes=c},ew.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ek=function(r,n,i,a,o,s){var l=r.gl;this.program=l.createProgram();for(var u=eT(i.staticAttributes),c=a?a.getBinderAttributes():[],f=u.concat(c),h=i.staticUniforms?eT(i.staticUniforms):[],p=a?a.getBinderUniforms():[],d=[],v=0,g=h.concat(p);v<g.length;v+=1){var y=g[v];0>d.indexOf(y)&&d.push(y)}var m=a?a.defines():[];s&&m.push("#define OVERDRAW_INSPECTOR;");var x=m.concat(ex.fragmentSource,i.fragmentSource).join("\n"),b=m.concat(ex.vertexSource,i.vertexSource).join("\n"),_=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(_,x),l.compileShader(_),l.attachShader(this.program,_);var w=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(w,b),l.compileShader(w),l.attachShader(this.program,w),this.attributes={};var T={};this.numAttributes=f.length;for(var k=0;k<this.numAttributes;k++)f[k]&&(l.bindAttribLocation(this.program,k,f[k]),this.attributes[f[k]]=k);l.linkProgram(this.program),l.deleteShader(w),l.deleteShader(_);for(var A=0;A<d.length;A++){var M=d[A];if(M&&!T[M]){var S=l.getUniformLocation(this.program,M);S&&(T[M]=S)}}this.fixedUniforms=o(r,T),this.binderUniforms=a?a.getUniforms(r,T):[]}}};function eA(r,n,i){var a=1/t3(i,1,n.transform.tileZoom),o=Math.pow(2,i.tileID.overscaledZ),s=i.tileSize*Math.pow(2,n.transform.tileZoom)/o,l=s*(i.tileID.canonical.x+i.tileID.wrap*o),u=s*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[a,r.fromScale,r.toScale],u_fade:r.t,u_pixel_coord_upper:[l>>16,u>>16],u_pixel_coord_lower:[65535&l,65535&u]}}ek.prototype.draw=function(r,n,i,a,o,s,l,u,c,f,h,p,d,v,g,y){var m,x=r.gl;if(!this.failedToCreate){for(var b in r.program.set(this.program),r.setDepthMode(i),r.setStencilMode(a),r.setColorMode(o),r.setCullFace(s),this.fixedUniforms)this.fixedUniforms[b].set(l[b]);v&&v.setUniforms(r,this.binderUniforms,p,{zoom:d});for(var _=((m={})[x.LINES]=2,m[x.TRIANGLES]=3,m[x.LINE_STRIP]=1,m)[n],w=0,T=h.get();w<T.length;w+=1){var k=T[w],A=k.vaos||(k.vaos={});(A[u]||(A[u]=new ew)).bind(r,this,c,v?v.getPaintVertexBuffers():[],f,k.vertexOffset,g,y),x.drawElements(n,k.primitiveLength*_,x.UNSIGNED_SHORT,k.primitiveOffset*_*2)}}};var eM=function(n,i,a,o){var s=i.style.light,l=s.properties.get("position"),u=[l.x,l.y,l.z],c=r.create$1();"viewport"===s.properties.get("anchor")&&r.fromRotation(c,-i.transform.angle),r.transformMat3(u,u,c);var f=s.properties.get("color");return{u_matrix:n,u_lightpos:u,u_lightintensity:s.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+a,u_opacity:o}},eS=function(r){return{u_matrix:r}},eE=function(n,i,a,o){return r.extend(eS(n),eA(a,i,o))},eL=function(n,i,a,o){var s,l,u=n.transform;if("map"===o.paint.get("circle-pitch-alignment")){var c=t3(a,1,u.zoom);s=!0,l=[c,c]}else s=!1,l=u.pixelsToGLUnits;return{u_camera_to_center_distance:u.cameraToCenterDistance,u_scale_with_map:+("map"===o.paint.get("circle-pitch-scale")),u_matrix:n.translatePosMatrix(i.posMatrix,a,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_pitch_with_map:+s,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:l}},eC=function(r,n,i){var a=t3(i,1,n.zoom),o=Math.pow(2,n.zoom-i.tileID.overscaledZ),s=i.tileID.overscaleFactor();return{u_matrix:r,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:a,u_extrude_scale:[n.pixelsToGLUnits[0]/(a*o),n.pixelsToGLUnits[1]/(a*o)],u_overscale_factor:s}},eO=function(r,n,i){return void 0===i&&(i=1),{u_matrix:r,u_color:n,u_overlay:0,u_overlay_scale:i}},eP=function(r){return{u_matrix:r}},eI=function(n,i,a,o){var s=r.create();r.ortho(s,0,n.width,n.height,0,0,1);var l=n.context.gl;return{u_matrix:s,u_world:[l.drawingBufferWidth,l.drawingBufferHeight],u_image:a,u_color_ramp:o,u_opacity:i.paint.get("heatmap-opacity")}},eD=function(n,i,a){var o=a.paint.get("hillshade-shadow-color"),s=a.paint.get("hillshade-highlight-color"),l=a.paint.get("hillshade-accent-color"),u=a.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===a.paint.get("hillshade-illumination-anchor")&&(u-=n.transform.angle);var c,f,h,p=!n.options.moving;return{u_matrix:n.transform.calculatePosMatrix(i.tileID.toUnwrapped(),p),u_image:0,u_latrange:(f=Math.pow(2,(c=i.tileID).canonical.z),h=c.canonical.y,[new r.MercatorCoordinate(0,h/f).toLngLat().lat,new r.MercatorCoordinate(0,(h+1)/f).toLngLat().lat]),u_light:[a.paint.get("hillshade-exaggeration"),u],u_shadow:o,u_highlight:s,u_accent:l}},ez=function(n,i){var a=i.stride,o=r.create();return r.ortho(o,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(o,o,[0,-r.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[a,a],u_zoom:n.overscaledZ,u_unpack:i.getUnpackVector()}},eR=function(n,i,a){var o=n.transform;return{u_matrix:ej(n,i,a),u_ratio:1/t3(i,1,o.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},eF=function(n,i,a,o){var s=n.transform,l=eN(i,s);return{u_matrix:ej(n,i,a),u_texsize:i.imageAtlasTexture.size,u_ratio:1/t3(i,1,s.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[l,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},eB=function(n,i,a,o,s){var l=n.transform,u=n.lineAtlas,c=eN(i,l),f="round"===a.layout.get("line-cap"),h=u.getDash(o.from,f),p=u.getDash(o.to,f),d=h.width*s.fromScale,v=p.width*s.toScale;return r.extend(eR(n,i,a),{u_patternscale_a:[c/d,-h.height/2],u_patternscale_b:[c/v,-p.height/2],u_sdfgamma:u.width/(256*Math.min(d,v)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:h.y,u_tex_y_b:p.y,u_mix:s.t})};function eN(r,n){return 1/t3(r,1,n.tileZoom)}function ej(r,n,i){return r.translatePosMatrix(n.tileID.posMatrix,n,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var eU,eV=function(r,n,i,a,o){var s,l,u,c,f;return{u_matrix:r,u_tl_parent:n,u_scale_parent:i,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(l=o.paint.get("raster-saturation"))>0?1-1/(1.001-l):-l,u_contrast_factor:(s=o.paint.get("raster-contrast"))>0?1/(1-s):1+s,u_spin_weights:(c=Math.sin(u=o.paint.get("raster-hue-rotate")*(Math.PI/180)),[(2*(f=Math.cos(u))+1)/3,(-Math.sqrt(3)*c-f+1)/3,(Math.sqrt(3)*c-f+1)/3])}},eH=function(r,n,i,a,o,s,l,u,c,f){var h=o.transform;return{u_is_size_zoom_constant:+("constant"===r||"source"===r),u_is_size_feature_constant:+("constant"===r||"camera"===r),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:h.cameraToCenterDistance,u_pitch:h.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:h.width/h.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:u,u_is_text:+c,u_pitch_with_map:+a,u_texsize:f,u_texture:0}},eq=function(n,i,a,o,s,l,u,c,f,h,p){var d=s.transform;return r.extend(eH(n,i,a,o,s,l,u,c,f,h),{u_gamma_scale:o?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+p})},eG=function(n,i,a,o,s,l){var u,c,f,h,p,d,v,g,y;return r.extend((u=a.imageManager.getPattern(o.from.toString()),c=a.imageManager.getPattern(o.to.toString()),h=(f=a.imageManager.getPixelSize()).width,p=f.height,d=Math.pow(2,s.tileID.overscaledZ),g=(v=s.tileSize*Math.pow(2,a.transform.tileZoom)/d)*(s.tileID.canonical.x+s.tileID.wrap*d),y=v*s.tileID.canonical.y,{u_image:0,u_pattern_tl_a:u.tl,u_pattern_br_a:u.br,u_pattern_tl_b:c.tl,u_pattern_br_b:c.br,u_texsize:[h,p],u_mix:l.t,u_pattern_size_a:u.displaySize,u_pattern_size_b:c.displaySize,u_scale_a:l.fromScale,u_scale_b:l.toScale,u_tile_units_to_pixels:1/t3(s,1,a.transform.tileZoom),u_pixel_coord_upper:[g>>16,y>>16],u_pixel_coord_lower:[65535&g,65535&y]}),{u_matrix:n,u_opacity:i})},eZ={fillExtrusion:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_lightpos:new r.Uniform3f(n,i.u_lightpos),u_lightintensity:new r.Uniform1f(n,i.u_lightintensity),u_lightcolor:new r.Uniform3f(n,i.u_lightcolor),u_vertical_gradient:new r.Uniform1f(n,i.u_vertical_gradient),u_opacity:new r.Uniform1f(n,i.u_opacity)}},fillExtrusionPattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_lightpos:new r.Uniform3f(n,i.u_lightpos),u_lightintensity:new r.Uniform1f(n,i.u_lightintensity),u_lightcolor:new r.Uniform3f(n,i.u_lightcolor),u_vertical_gradient:new r.Uniform1f(n,i.u_vertical_gradient),u_height_factor:new r.Uniform1f(n,i.u_height_factor),u_image:new r.Uniform1i(n,i.u_image),u_texsize:new r.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade),u_opacity:new r.Uniform1f(n,i.u_opacity)}},fill:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},fillPattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_image:new r.Uniform1i(n,i.u_image),u_texsize:new r.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade)}},fillOutline:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_world:new r.Uniform2f(n,i.u_world)}},fillOutlinePattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_world:new r.Uniform2f(n,i.u_world),u_image:new r.Uniform1i(n,i.u_image),u_texsize:new r.Uniform2f(n,i.u_texsize),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade)}},circle:function(n,i){return{u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(n,i.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(n,i.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},collisionBox:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(n,i.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(n,i.u_extrude_scale),u_overscale_factor:new r.Uniform1f(n,i.u_overscale_factor)}},collisionCircle:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_inv_matrix:new r.UniformMatrix4f(n,i.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(n,i.u_viewport_size)}},debug:function(n,i){return{u_color:new r.UniformColor(n,i.u_color),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_overlay:new r.Uniform1i(n,i.u_overlay),u_overlay_scale:new r.Uniform1f(n,i.u_overlay_scale)}},clippingMask:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},heatmap:function(n,i){return{u_extrude_scale:new r.Uniform1f(n,i.u_extrude_scale),u_intensity:new r.Uniform1f(n,i.u_intensity),u_matrix:new r.UniformMatrix4f(n,i.u_matrix)}},heatmapTexture:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_world:new r.Uniform2f(n,i.u_world),u_image:new r.Uniform1i(n,i.u_image),u_color_ramp:new r.Uniform1i(n,i.u_color_ramp),u_opacity:new r.Uniform1f(n,i.u_opacity)}},hillshade:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_image:new r.Uniform1i(n,i.u_image),u_latrange:new r.Uniform2f(n,i.u_latrange),u_light:new r.Uniform2f(n,i.u_light),u_shadow:new r.UniformColor(n,i.u_shadow),u_highlight:new r.UniformColor(n,i.u_highlight),u_accent:new r.UniformColor(n,i.u_accent)}},hillshadePrepare:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_image:new r.Uniform1i(n,i.u_image),u_dimension:new r.Uniform2f(n,i.u_dimension),u_zoom:new r.Uniform1f(n,i.u_zoom),u_unpack:new r.Uniform4f(n,i.u_unpack)}},line:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels)}},lineGradient:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels),u_image:new r.Uniform1i(n,i.u_image),u_image_height:new r.Uniform1f(n,i.u_image_height)}},linePattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_texsize:new r.Uniform2f(n,i.u_texsize),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_image:new r.Uniform1i(n,i.u_image),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels),u_scale:new r.Uniform3f(n,i.u_scale),u_fade:new r.Uniform1f(n,i.u_fade)}},lineSDF:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_ratio:new r.Uniform1f(n,i.u_ratio),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(n,i.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(n,i.u_patternscale_a),u_patternscale_b:new r.Uniform2f(n,i.u_patternscale_b),u_sdfgamma:new r.Uniform1f(n,i.u_sdfgamma),u_image:new r.Uniform1i(n,i.u_image),u_tex_y_a:new r.Uniform1f(n,i.u_tex_y_a),u_tex_y_b:new r.Uniform1f(n,i.u_tex_y_b),u_mix:new r.Uniform1f(n,i.u_mix)}},raster:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_tl_parent:new r.Uniform2f(n,i.u_tl_parent),u_scale_parent:new r.Uniform1f(n,i.u_scale_parent),u_buffer_scale:new r.Uniform1f(n,i.u_buffer_scale),u_fade_t:new r.Uniform1f(n,i.u_fade_t),u_opacity:new r.Uniform1f(n,i.u_opacity),u_image0:new r.Uniform1i(n,i.u_image0),u_image1:new r.Uniform1i(n,i.u_image1),u_brightness_low:new r.Uniform1f(n,i.u_brightness_low),u_brightness_high:new r.Uniform1f(n,i.u_brightness_high),u_saturation_factor:new r.Uniform1f(n,i.u_saturation_factor),u_contrast_factor:new r.Uniform1f(n,i.u_contrast_factor),u_spin_weights:new r.Uniform3f(n,i.u_spin_weights)}},symbolIcon:function(n,i){return{u_is_size_zoom_constant:new r.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new r.Uniform1f(n,i.u_size_t),u_size:new r.Uniform1f(n,i.u_size),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new r.Uniform1f(n,i.u_pitch),u_rotate_symbol:new r.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new r.Uniform1f(n,i.u_fade_change),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(n,i.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(n,i.u_coord_matrix),u_is_text:new r.Uniform1i(n,i.u_is_text),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_texsize:new r.Uniform2f(n,i.u_texsize),u_texture:new r.Uniform1i(n,i.u_texture)}},symbolSDF:function(n,i){return{u_is_size_zoom_constant:new r.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new r.Uniform1f(n,i.u_size_t),u_size:new r.Uniform1f(n,i.u_size),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new r.Uniform1f(n,i.u_pitch),u_rotate_symbol:new r.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new r.Uniform1f(n,i.u_fade_change),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(n,i.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(n,i.u_coord_matrix),u_is_text:new r.Uniform1i(n,i.u_is_text),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_texsize:new r.Uniform2f(n,i.u_texsize),u_texture:new r.Uniform1i(n,i.u_texture),u_gamma_scale:new r.Uniform1f(n,i.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(n,i.u_is_halo)}},symbolTextAndIcon:function(n,i){return{u_is_size_zoom_constant:new r.Uniform1i(n,i.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(n,i.u_is_size_feature_constant),u_size_t:new r.Uniform1f(n,i.u_size_t),u_size:new r.Uniform1f(n,i.u_size),u_camera_to_center_distance:new r.Uniform1f(n,i.u_camera_to_center_distance),u_pitch:new r.Uniform1f(n,i.u_pitch),u_rotate_symbol:new r.Uniform1i(n,i.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(n,i.u_aspect_ratio),u_fade_change:new r.Uniform1f(n,i.u_fade_change),u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(n,i.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(n,i.u_coord_matrix),u_is_text:new r.Uniform1i(n,i.u_is_text),u_pitch_with_map:new r.Uniform1i(n,i.u_pitch_with_map),u_texsize:new r.Uniform2f(n,i.u_texsize),u_texsize_icon:new r.Uniform2f(n,i.u_texsize_icon),u_texture:new r.Uniform1i(n,i.u_texture),u_texture_icon:new r.Uniform1i(n,i.u_texture_icon),u_gamma_scale:new r.Uniform1f(n,i.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(n,i.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(n,i.u_is_halo)}},background:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_opacity:new r.Uniform1f(n,i.u_opacity),u_color:new r.UniformColor(n,i.u_color)}},backgroundPattern:function(n,i){return{u_matrix:new r.UniformMatrix4f(n,i.u_matrix),u_opacity:new r.Uniform1f(n,i.u_opacity),u_image:new r.Uniform1i(n,i.u_image),u_pattern_tl_a:new r.Uniform2f(n,i.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(n,i.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(n,i.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(n,i.u_pattern_br_b),u_texsize:new r.Uniform2f(n,i.u_texsize),u_mix:new r.Uniform1f(n,i.u_mix),u_pattern_size_a:new r.Uniform2f(n,i.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(n,i.u_pattern_size_b),u_scale_a:new r.Uniform1f(n,i.u_scale_a),u_scale_b:new r.Uniform1f(n,i.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(n,i.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(n,i.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(n,i.u_tile_units_to_pixels)}}};function eY(n,i,a,o,s,l,u){for(var c=n.context,f=c.gl,h=n.useProgram("collisionBox"),p=[],d=0,v=0,g=0;g<o.length;g++){var y=o[g],m=i.getTile(y),x=m.getBucket(a);if(x){var b=y.posMatrix;0===s[0]&&0===s[1]||(b=n.translatePosMatrix(y.posMatrix,m,s,l));var _=u?x.textCollisionBox:x.iconCollisionBox,w=x.collisionCircleArray;if(w.length>0){var T=r.create(),k=b;r.mul(T,x.placementInvProjMatrix,n.transform.glCoordMatrix),r.mul(T,T,x.placementViewportMatrix),p.push({circleArray:w,circleOffset:v,transform:k,invTransform:T}),v=d+=w.length/4}_&&h.draw(c,f.LINES,t_.disabled,tw.disabled,n.colorModeForRenderPass(),tk.disabled,eC(b,n.transform,m),a.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,n.transform.zoom,null,null,_.collisionVertexBuffer)}}if(u&&p.length){var A=n.useProgram("collisionCircle"),M=new r.StructArrayLayout2f1f2i16;M.resize(4*d),M._trim();for(var S=0,E=0;E<p.length;E+=1)for(var L=p[E],C=0;C<L.circleArray.length/4;C++){var O=4*C,P=L.circleArray[O+0],I=L.circleArray[O+1],D=L.circleArray[O+2],z=L.circleArray[O+3];M.emplace(S++,P,I,D,z,0),M.emplace(S++,P,I,D,z,1),M.emplace(S++,P,I,D,z,2),M.emplace(S++,P,I,D,z,3)}(!eU||eU.length<2*d)&&(eU=function(n){var i=2*n,a=new r.StructArrayLayout3ui6;a.resize(i),a._trim();for(var o=0;o<i;o++){var s=6*o;a.uint16[s+0]=4*o+0,a.uint16[s+1]=4*o+1,a.uint16[s+2]=4*o+2,a.uint16[s+3]=4*o+2,a.uint16[s+4]=4*o+3,a.uint16[s+5]=4*o+0}return a}(d));for(var R=c.createIndexBuffer(eU,!0),F=c.createVertexBuffer(M,r.collisionCircleLayout.members,!0),B=0;B<p.length;B+=1){var N,j=p[B],U={u_matrix:j.transform,u_inv_matrix:j.invTransform,u_camera_to_center_distance:(N=n.transform).cameraToCenterDistance,u_viewport_size:[N.width,N.height]};A.draw(c,f.TRIANGLES,t_.disabled,tw.disabled,n.colorModeForRenderPass(),tk.disabled,U,a.id,F,R,r.SegmentVector.simpleSegment(0,2*j.circleOffset,j.circleArray.length,j.circleArray.length/2),null,n.transform.zoom,null,null,null)}F.destroy(),R.destroy()}}var eW=r.identity(new Float32Array(16));function eX(n,i,a,o,s,l,u,c,f,h,p,d){for(var v=n.context,g=v.gl,y=n.transform,m="map"===c,x="map"===f,b=m&&"point"!==a.layout.get("symbol-placement"),_=m&&!x&&!b,w=void 0!==a.layout.get("symbol-sort-key").constantOr(1),T=!1,k=n.depthModeForSublayer(0,t_.ReadOnly),A=a.layout.get("text-variable-anchor"),M=[],S=0;S<o.length;S+=1){var E=o[S],L=i.getTile(E),C=L.getBucket(a);if(C){var O=s?C.text:C.icon;if(O&&O.segments.get().length){var P,I,D,z=O.programConfigurations.get(a.id),R=s||C.sdfIcons,F=s?C.textSizeData:C.iconSizeData,B=x||0!==y.pitch,N=n.useProgram(C.iconsInText&&s?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon",z),j=r.evaluateSizeForZoom(F,y.zoom),U=void 0,V=[0,0],H=void 0,q=void 0,G=null,Z=void 0;if(s){if(H=L.glyphAtlasTexture,q=g.LINEAR,U=L.glyphAtlasTexture.size,C.iconsInText){V=L.imageAtlasTexture.size,G=L.imageAtlasTexture;var Y="composite"===F.kind||"camera"===F.kind;Z=B||n.options.rotating||n.options.zooming||Y?g.LINEAR:g.NEAREST}}else{var W=1!==a.layout.get("icon-size").constantOr(0)||C.iconsNeedLinear;H=L.imageAtlasTexture,q=R||n.options.rotating||n.options.zooming||W||B?g.LINEAR:g.NEAREST,U=L.imageAtlasTexture.size}var X=t3(L,1,n.transform.zoom),J=tq(E.posMatrix,x,m,n.transform,X),K=tG(E.posMatrix,x,m,n.transform,X),$=A&&C.hasTextData(),Q="none"!==a.layout.get("icon-text-fit")&&$&&C.hasIconData();b&&function(n,i,a,o,s,l,u,c){var f=o?n.textSizeData:n.iconSizeData,h=r.evaluateSizeForZoom(f,a.transform.zoom),p=[256/a.width*2+1,256/a.height*2+1],d=o?n.text.dynamicLayoutVertexArray:n.icon.dynamicLayoutVertexArray;d.clear();for(var v=n.lineVertexArray,g=o?n.text.placedSymbolArray:n.icon.placedSymbolArray,y=a.transform.width/a.transform.height,m=!1,x=0;x<g.length;x++){var b=g.get(x);if(b.hidden||b.writingMode===r.WritingMode.vertical&&!m)t0(b.numGlyphs,d);else{m=!1;var _=[b.anchorX,b.anchorY,0,1];if(r.transformMat4(_,_,i),function(r,n){var i=r[0]/r[3],a=r[1]/r[3];return i>=-n[0]&&i<=n[0]&&a>=-n[1]&&a<=n[1]}(_,p)){var w=_[3],T=tY(a.transform.cameraToCenterDistance,w),k=r.evaluateSizeForFeature(f,h,b),A=u?k/T:k*T,M=new r.Point(b.anchorX,b.anchorY),S=tZ(M,s).point,E={},L=tJ(b,A,!1,c,i,s,l,n.glyphOffsetArray,v,d,S,M,E,y);m=L.useVertical,(L.notEnoughRoom||m||L.needsFlipping&&tJ(b,A,!0,c,i,s,l,n.glyphOffsetArray,v,d,S,M,E,y).notEnoughRoom)&&t0(b.numGlyphs,d)}else t0(b.numGlyphs,d)}}o?n.text.dynamicLayoutVertexBuffer.updateData(d):n.icon.dynamicLayoutVertexBuffer.updateData(d)}(C,E.posMatrix,n,s,J,K,x,h);var tt=n.translatePosMatrix(E.posMatrix,L,l,u),te=b||s&&A||Q?eW:J,tr=n.translatePosMatrix(K,L,l,u,!0),tn=R&&0!==a.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1),ti={program:N,buffers:O,uniformValues:R?C.iconsInText?(P=F.kind,I=U,D=V,r.extend(eq(P,j,_,x,n,tt,te,tr,!0,I,!0),{u_texsize_icon:D,u_texture_icon:1})):eq(F.kind,j,_,x,n,tt,te,tr,s,U,!0):eH(F.kind,j,_,x,n,tt,te,tr,s,U),atlasTexture:H,atlasTextureIcon:G,atlasInterpolation:q,atlasInterpolationIcon:Z,isSDF:R,hasHalo:tn};if(w&&C.canOverlap){T=!0;for(var ta=0,to=O.segments.get();ta<to.length;ta+=1){var ts=to[ta];M.push({segments:new r.SegmentVector([ts]),sortKey:ts.sortKey,state:ti})}}else M.push({segments:O.segments,sortKey:0,state:ti})}}}T&&M.sort(function(r,n){return r.sortKey-n.sortKey});for(var tl=0;tl<M.length;tl+=1){var tu=M[tl],tc=tu.state;if(v.activeTexture.set(g.TEXTURE0),tc.atlasTexture.bind(tc.atlasInterpolation,g.CLAMP_TO_EDGE),tc.atlasTextureIcon&&(v.activeTexture.set(g.TEXTURE1),tc.atlasTextureIcon&&tc.atlasTextureIcon.bind(tc.atlasInterpolationIcon,g.CLAMP_TO_EDGE)),tc.isSDF){var tf=tc.uniformValues;tc.hasHalo&&(tf.u_is_halo=1,eJ(tc.buffers,tu.segments,a,n,tc.program,k,p,d,tf)),tf.u_is_halo=0}eJ(tc.buffers,tu.segments,a,n,tc.program,k,p,d,tc.uniformValues)}}function eJ(r,n,i,a,o,s,l,u,c){var f=a.context,h=f.gl;o.draw(f,h.TRIANGLES,s,l,u,tk.disabled,c,i.id,r.layoutVertexBuffer,r.indexBuffer,n,i.paint,a.transform.zoom,r.programConfigurations.get(i.id),r.dynamicLayoutVertexBuffer,r.opacityVertexBuffer)}function eK(n,i,a,o,s,l,u){var c,f,h,p,d,v=n.context.gl,g=a.paint.get("fill-pattern"),y=g&&g.constantOr(1),m=a.getCrossfadeParameters();u?(f=y&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",c=v.LINES):(f=y?"fillPattern":"fill",c=v.TRIANGLES);for(var x=0;x<o.length;x+=1){var b=o[x],_=i.getTile(b);if(!y||_.patternsLoaded()){var w=_.getBucket(a);if(w){var T=w.programConfigurations.get(a.id),k=n.useProgram(f,T);y&&(n.context.activeTexture.set(v.TEXTURE0),_.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),T.updatePaintBuffers(m));var A=g.constantOr(null);if(A&&_.imageAtlas){var M=_.imageAtlas,S=M.patternPositions[A.to.toString()],E=M.patternPositions[A.from.toString()];S&&E&&T.setConstantPatternPositions(S,E)}var L=n.translatePosMatrix(b.posMatrix,_,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(u){p=w.indexBuffer2,d=w.segments2;var C=[v.drawingBufferWidth,v.drawingBufferHeight];h="fillOutlinePattern"===f&&y?r.extend(eE(L,n,m,_),{u_world:C}):{u_matrix:L,u_world:C}}else p=w.indexBuffer,d=w.segments,h=y?eE(L,n,m,_):eS(L);k.draw(n.context,c,s,n.stencilModeForClipping(b),l,tk.disabled,h,a.id,w.layoutVertexBuffer,p,d,a.paint,n.transform.zoom,T)}}}}function e$(n,i,a,o,s,l,u){for(var c=n.context,f=c.gl,h=a.paint.get("fill-extrusion-pattern"),p=h.constantOr(1),d=a.getCrossfadeParameters(),v=a.paint.get("fill-extrusion-opacity"),g=0;g<o.length;g+=1){var y=o[g],m=i.getTile(y),x=m.getBucket(a);if(x){var b=x.programConfigurations.get(a.id),_=n.useProgram(p?"fillExtrusionPattern":"fillExtrusion",b);p&&(n.context.activeTexture.set(f.TEXTURE0),m.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),b.updatePaintBuffers(d));var w=h.constantOr(null);if(w&&m.imageAtlas){var T=m.imageAtlas,k=T.patternPositions[w.to.toString()],A=T.patternPositions[w.from.toString()];k&&A&&b.setConstantPatternPositions(k,A)}var M=n.translatePosMatrix(y.posMatrix,m,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),S=a.paint.get("fill-extrusion-vertical-gradient"),E=p?r.extend(eM(M,n,S,v),eA(d,n,m),{u_height_factor:-Math.pow(2,y.overscaledZ)/m.tileSize/8}):eM(M,n,S,v);_.draw(c,c.gl.TRIANGLES,s,l,u,tk.backCCW,E,a.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,a.paint,n.transform.zoom,b)}}}var eQ=new r.Color(1,0,0,1),e0=new r.Color(0,1,0,1),e1=new r.Color(0,0,1,1),e2=new r.Color(1,0,1,1),e3=new r.Color(0,1,1,1);function e5(r,n,i,a){e6(r,0,n+i/2,r.transform.width,i,a)}function e4(r,n,i,a){e6(r,n-i/2,0,i,r.transform.height,a)}function e6(n,i,a,o,s,l){var u=n.context,c=u.gl;c.enable(c.SCISSOR_TEST),c.scissor(i*r.browser.devicePixelRatio,a*r.browser.devicePixelRatio,o*r.browser.devicePixelRatio,s*r.browser.devicePixelRatio),u.clear({color:l}),c.disable(c.SCISSOR_TEST)}var e8={symbol:function(n,i,a,o,s){if("translucent"===n.renderPass){var l=tw.disabled,u=n.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(n,i,a,o,s,l,u){for(var c=i.transform,f="map"===s,h="map"===l,p=0;p<n.length;p+=1){var d=n[p],v=o.getTile(d),g=v.getBucket(a);if(g&&g.text&&g.text.segments.get().length){var y=g.textSizeData,m=r.evaluateSizeForZoom(y,c.zoom),x=t3(v,1,i.transform.zoom),b=tq(d.posMatrix,h,f,i.transform,x),_="none"!==a.layout.get("icon-text-fit")&&g.hasIconData();if(m){var w=Math.pow(2,c.zoom-v.tileID.overscaledZ);(function(n,i,a,o,s,l,u,c,f,h,p){var d=n.text.placedSymbolArray,v=n.text.dynamicLayoutVertexArray,g=n.icon.dynamicLayoutVertexArray,y={};v.clear();for(var m=0;m<d.length;m++){var x=d.get(m),b=n.allowVerticalPlacement&&!x.placedOrientation,_=x.hidden||!x.crossTileID||b?null:o[x.crossTileID];if(_){var w=new r.Point(x.anchorX,x.anchorY),T=tZ(w,a?c:u),k=tY(l.cameraToCenterDistance,T.signedDistanceFromCamera),A=s.evaluateSizeForFeature(n.textSizeData,h,x)*k/r.ONE_EM;a&&(A*=n.tilePixelRatio/f);for(var M=_.width,S=_.height,E=function(n,i,a,o,s,l){var u=r.getAnchorAlignment(n),c=-(u.horizontalAlign-.5)*i,f=-(u.verticalAlign-.5)*a,h=r.evaluateVariableOffset(n,o);return new r.Point((c/s+h[0])*l,(f/s+h[1])*l)}(_.anchor,M,S,_.textOffset,_.textBoxScale,A),L=a?tZ(w.add(E),u).point:T.point.add(i?E.rotate(-l.angle):E),C=n.allowVerticalPlacement&&x.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,O=0;O<x.numGlyphs;O++)r.addDynamicAttributes(v,L,C);p&&x.associatedIconIndex>=0&&(y[x.associatedIconIndex]={shiftedAnchor:L,angle:C})}else t0(x.numGlyphs,v)}if(p){g.clear();for(var P=n.icon.placedSymbolArray,I=0;I<P.length;I++){var D=P.get(I);if(D.hidden)t0(D.numGlyphs,g);else{var z=y[I];if(z)for(var R=0;R<D.numGlyphs;R++)r.addDynamicAttributes(g,z.shiftedAnchor,z.angle);else t0(D.numGlyphs,g)}}n.icon.dynamicLayoutVertexBuffer.updateData(g)}n.text.dynamicLayoutVertexBuffer.updateData(v)})(g,f,h,u,r.symbolSize,c,b,d.posMatrix,w,m,_)}}}}(o,n,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),s),0!==a.paint.get("icon-opacity").constantOr(1)&&eX(n,i,a,o,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),l,u),0!==a.paint.get("text-opacity").constantOr(1)&&eX(n,i,a,o,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),l,u),i.map.showCollisionBoxes&&(eY(n,i,a,o,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),eY(n,i,a,o,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))}},circle:function(n,i,a,o){if("translucent"===n.renderPass){var s=a.paint.get("circle-opacity"),l=a.paint.get("circle-stroke-width"),u=a.paint.get("circle-stroke-opacity"),c=void 0!==a.layout.get("circle-sort-key").constantOr(1);if(0!==s.constantOr(1)||0!==l.constantOr(1)&&0!==u.constantOr(1)){for(var f=n.context,h=f.gl,p=n.depthModeForSublayer(0,t_.ReadOnly),d=tw.disabled,v=n.colorModeForRenderPass(),g=[],y=0;y<o.length;y++){var m=o[y],x=i.getTile(m),b=x.getBucket(a);if(b){var _=b.programConfigurations.get(a.id),w={programConfiguration:_,program:n.useProgram("circle",_),layoutVertexBuffer:b.layoutVertexBuffer,indexBuffer:b.indexBuffer,uniformValues:eL(n,m,x,a)};if(c)for(var T=0,k=b.segments.get();T<k.length;T+=1){var A=k[T];g.push({segments:new r.SegmentVector([A]),sortKey:A.sortKey,state:w})}else g.push({segments:b.segments,sortKey:0,state:w})}}c&&g.sort(function(r,n){return r.sortKey-n.sortKey});for(var M=0;M<g.length;M+=1){var S=g[M],E=S.state,L=E.programConfiguration,C=E.program,O=E.layoutVertexBuffer,P=E.indexBuffer,I=E.uniformValues,D=S.segments;C.draw(f,h.TRIANGLES,p,d,v,tk.disabled,I,a.id,O,P,D,a.paint,n.transform.zoom,L)}}}},heatmap:function(n,i,a,o){if(0!==a.paint.get("heatmap-opacity")){if("offscreen"===n.renderPass){var s=n.context,l=s.gl,u=tw.disabled,c=new tT([l.ONE,l.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(r,n,i){var a=r.gl;r.activeTexture.set(a.TEXTURE1),r.viewport.set([0,0,n.width/4,n.height/4]);var o=i.heatmapFbo;if(o)a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),r.bindFramebuffer.set(o.framebuffer);else{var s,l,u,c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),s=o=i.heatmapFbo=r.createFramebuffer(n.width/4,n.height/4,!1),l=r.gl,u=r.extRenderToTextureHalfFloat?r.extTextureHalfFloat.HALF_FLOAT_OES:l.UNSIGNED_BYTE,l.texImage2D(l.TEXTURE_2D,0,l.RGBA,n.width/4,n.height/4,0,l.RGBA,u,null),s.colorAttachment.set(c)}})(s,n,a),s.clear({color:r.Color.transparent});for(var f=0;f<o.length;f++){var h=o[f];if(!i.hasRenderableParent(h)){var p=i.getTile(h),d=p.getBucket(a);if(d){var v,g,y=d.programConfigurations.get(a.id),m=n.useProgram("heatmap",y),x=n.transform.zoom;m.draw(s,l.TRIANGLES,t_.disabled,u,c,tk.disabled,(v=h.posMatrix,g=a.paint.get("heatmap-intensity"),{u_matrix:v,u_extrude_scale:t3(p,1,x),u_intensity:g}),a.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,a.paint,n.transform.zoom,y)}}}s.viewport.set([0,0,n.width,n.height])}else"translucent"===n.renderPass&&(n.context.setColorMode(n.colorModeForRenderPass()),function(n,i){var a=n.context,o=a.gl,s=i.heatmapFbo;if(s){a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,s.colorAttachment.get()),a.activeTexture.set(o.TEXTURE1);var l=i.colorRampTexture;l||(l=i.colorRampTexture=new r.Texture(a,i.colorRamp,o.RGBA)),l.bind(o.LINEAR,o.CLAMP_TO_EDGE),n.useProgram("heatmapTexture").draw(a,o.TRIANGLES,t_.disabled,tw.disabled,n.colorModeForRenderPass(),tk.disabled,eI(n,i,0,1),i.id,n.viewportBuffer,n.quadTriangleIndexBuffer,n.viewportSegments,i.paint,n.transform.zoom)}}(n,a))}},line:function(n,i,a,o){if("translucent"===n.renderPass){var s=a.paint.get("line-opacity"),l=a.paint.get("line-width");if(0!==s.constantOr(1)&&0!==l.constantOr(1))for(var u=n.depthModeForSublayer(0,t_.ReadOnly),c=n.colorModeForRenderPass(),f=a.paint.get("line-dasharray"),h=a.paint.get("line-pattern"),p=h.constantOr(1),d=a.paint.get("line-gradient"),v=a.getCrossfadeParameters(),g=p?"linePattern":f?"lineSDF":d?"lineGradient":"line",y=n.context,m=y.gl,x=!0,b=0;b<o.length;b+=1){var _=o[b],w=i.getTile(_);if(!p||w.patternsLoaded()){var T=w.getBucket(a);if(T){var k,A=T.programConfigurations.get(a.id),M=n.context.program.get(),S=n.useProgram(g,A),E=x||S.program!==M,L=h.constantOr(null);if(L&&w.imageAtlas){var C=w.imageAtlas,O=C.patternPositions[L.to.toString()],P=C.patternPositions[L.from.toString()];O&&P&&A.setConstantPatternPositions(O,P)}var I=p?eF(n,w,a,v):f?eB(n,w,a,f,v):d?(k=T.lineClipsArray.length,r.extend(eR(n,w,a),{u_image:0,u_image_height:k})):eR(n,w,a);if(p)y.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),A.updatePaintBuffers(v);else if(f&&(E||n.lineAtlas.dirty))y.activeTexture.set(m.TEXTURE0),n.lineAtlas.bind(y);else if(d){var D=T.gradients[a.id],z=D.texture;if(a.gradientVersion!==D.version){var R=256;if(a.stepInterpolant){var F=i.getSource().maxzoom,B=_.canonical.z===F?Math.ceil(1<<n.transform.maxZoom-_.canonical.z):1,N=T.maxLineLength/r.EXTENT*1024*B;R=r.clamp(r.nextPowerOfTwo(N),256,y.maxTextureSize)}D.gradient=r.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:D.gradient||void 0,clips:T.lineClipsArray}),D.texture?D.texture.update(D.gradient):D.texture=new r.Texture(y,D.gradient,m.RGBA),D.version=a.gradientVersion,z=D.texture}y.activeTexture.set(m.TEXTURE0),z.bind(a.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}S.draw(y,m.TRIANGLES,u,n.stencilModeForClipping(_),c,tk.disabled,I,a.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,a.paint,n.transform.zoom,A,T.layoutVertexBuffer2),x=!1}}}}},fill:function(n,i,a,o){var s=a.paint.get("fill-color"),l=a.paint.get("fill-opacity");if(0!==l.constantOr(1)){var u=n.colorModeForRenderPass(),c=a.paint.get("fill-pattern"),f=n.opaquePassEnabledForLayer()&&!c.constantOr(1)&&1===s.constantOr(r.Color.transparent).a&&1===l.constantOr(0)?"opaque":"translucent";if(n.renderPass===f){var h=n.depthModeForSublayer(1,"opaque"===n.renderPass?t_.ReadWrite:t_.ReadOnly);eK(n,i,a,o,h,u,!1)}if("translucent"===n.renderPass&&a.paint.get("fill-antialias")){var p=n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,t_.ReadOnly);eK(n,i,a,o,p,u,!0)}}},"fill-extrusion":function(r,n,i,a){var o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===r.renderPass){var s=new t_(r.context.gl.LEQUAL,t_.ReadWrite,r.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))e$(r,n,i,a,s,tw.disabled,tT.disabled),e$(r,n,i,a,s,r.stencilModeFor3D(),r.colorModeForRenderPass());else{var l=r.colorModeForRenderPass();e$(r,n,i,a,s,tw.disabled,l)}}},hillshade:function(n,i,a,o){if("offscreen"===n.renderPass||"translucent"===n.renderPass){for(var s=n.context,l=n.depthModeForSublayer(0,t_.ReadOnly),u=n.colorModeForRenderPass(),c="translucent"===n.renderPass?n.stencilConfigForOverlap(o):[{},o],f=c[0],h=0,p=c[1];h<p.length;h+=1){var d=p[h],v=i.getTile(d);v.needsHillshadePrepare&&"offscreen"===n.renderPass?function(n,i,a,o,s,l){var u=n.context,c=u.gl,f=i.dem;if(f&&f.data){var h=f.dim,p=f.stride,d=f.getPixels();if(u.activeTexture.set(c.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||n.getTileTexture(p),i.demTexture){var v=i.demTexture;v.update(d,{premultiply:!1}),v.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new r.Texture(u,d,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);u.activeTexture.set(c.TEXTURE0);var g=i.fbo;if(!g){var y=new r.Texture(u,{width:h,height:h,data:null},c.RGBA);y.bind(c.LINEAR,c.CLAMP_TO_EDGE),(g=i.fbo=u.createFramebuffer(h,h,!0)).colorAttachment.set(y.texture)}u.bindFramebuffer.set(g.framebuffer),u.viewport.set([0,0,h,h]),n.useProgram("hillshadePrepare").draw(u,c.TRIANGLES,o,s,l,tk.disabled,ez(i.tileID,f),a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments),i.needsHillshadePrepare=!1}}(n,v,a,l,tw.disabled,u):"translucent"===n.renderPass&&function(r,n,i,a,o,s){var l=r.context,u=l.gl,c=n.fbo;if(c){var f=r.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var h=eD(r,n,i);f.draw(l,u.TRIANGLES,a,o,s,tk.disabled,h,i.id,r.rasterBoundsBuffer,r.quadTriangleIndexBuffer,r.rasterBoundsSegments)}}(n,v,a,l,f[d.overscaledZ],u)}s.viewport.set([0,0,n.width,n.height])}},raster:function(n,i,a,o){if("translucent"===n.renderPass&&0!==a.paint.get("raster-opacity")&&o.length)for(var s=n.context,l=s.gl,u=i.getSource(),c=n.useProgram("raster"),f=n.colorModeForRenderPass(),h=u instanceof C?[{},o]:n.stencilConfigForOverlap(o),p=h[0],d=h[1],v=d[d.length-1].overscaledZ,g=!n.options.moving,y=0;y<d.length;y+=1){var m=d[y],x=n.depthModeForSublayer(m.overscaledZ-v,1===a.paint.get("raster-opacity")?t_.ReadWrite:t_.ReadOnly,l.LESS),b=i.getTile(m),_=n.transform.calculatePosMatrix(m.toUnwrapped(),g);b.registerFadeDuration(a.paint.get("raster-fade-duration"));var w=i.findLoadedParent(m,0),T=function(n,i,a,o,s){var l=o.paint.get("raster-fade-duration");if(l>0){var u=r.browser.now(),c=(u-n.timeAdded)/l,f=i?(u-i.timeAdded)/l:-1,h=a.getSource(),p=s.coveringZoomLevel({tileSize:h.tileSize,roundZoom:h.roundZoom}),d=!i||Math.abs(i.tileID.overscaledZ-p)>Math.abs(n.tileID.overscaledZ-p),v=d&&n.refreshedUponExpiration?1:r.clamp(d?c:1-f,0,1);return n.refreshedUponExpiration&&c>=1&&(n.refreshedUponExpiration=!1),i?{opacity:1,mix:1-v}:{opacity:v,mix:0}}return{opacity:1,mix:0}}(b,w,i,a,n.transform),k=void 0,A=void 0,M="nearest"===a.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),b.texture.bind(M,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),w?(w.texture.bind(M,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),k=Math.pow(2,w.tileID.overscaledZ-b.tileID.overscaledZ),A=[b.tileID.canonical.x*k%1,b.tileID.canonical.y*k%1]):b.texture.bind(M,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);var S=eV(_,A||[0,0],k||1,T,a);u instanceof C?c.draw(s,l.TRIANGLES,x,tw.disabled,f,tk.disabled,S,a.id,u.boundsBuffer,n.quadTriangleIndexBuffer,u.boundsSegments):c.draw(s,l.TRIANGLES,x,p[m.overscaledZ],f,tk.disabled,S,a.id,n.rasterBoundsBuffer,n.quadTriangleIndexBuffer,n.rasterBoundsSegments)}},background:function(r,n,i){var a=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0!==o){var s=r.context,l=s.gl,u=r.transform,c=u.tileSize,f=i.paint.get("background-pattern");if(!r.isPatternMissing(f)){var h=!f&&1===a.a&&1===o&&r.opaquePassEnabledForLayer()?"opaque":"translucent";if(r.renderPass===h){var p=tw.disabled,d=r.depthModeForSublayer(0,"opaque"===h?t_.ReadWrite:t_.ReadOnly),v=r.colorModeForRenderPass(),g=r.useProgram(f?"backgroundPattern":"background"),y=u.coveringTiles({tileSize:c});f&&(s.activeTexture.set(l.TEXTURE0),r.imageManager.bind(r.context));for(var m=i.getCrossfadeParameters(),x=0;x<y.length;x+=1){var b=y[x],_=r.transform.calculatePosMatrix(b.toUnwrapped()),w=f?eG(_,o,r,f,{tileID:b,tileSize:c},m):{u_matrix:_,u_opacity:o,u_color:a};g.draw(s,l.TRIANGLES,d,p,v,tk.disabled,w,i.id,r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}}}},debug:function(n,i,a){for(var o=0;o<a.length;o++)(function(n,i,a){var o=n.context,s=o.gl,l=a.posMatrix,u=n.useProgram("debug"),c=t_.disabled,f=tw.disabled,h=n.colorModeForRenderPass(),p="$debug";o.activeTexture.set(s.TEXTURE0),n.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),u.draw(o,s.LINE_STRIP,c,f,h,tk.disabled,eO(l,r.Color.red),p,n.debugBuffer,n.tileBorderIndexBuffer,n.debugSegments);var d=i.getTileByID(a.key).latestRawTileData,v=Math.floor((d&&d.byteLength||0)/1024),g=512/Math.min(i.getTile(a).tileSize,512)*(a.overscaledZ/n.transform.zoom)*.5,y=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(y+=" => "+a.overscaledZ),function(r,n){r.initDebugOverlayCanvas();var i=r.debugOverlayCanvas,a=r.context.gl,o=r.debugOverlayCanvas.getContext("2d");o.clearRect(0,0,i.width,i.height),o.shadowColor="white",o.shadowBlur=2,o.lineWidth=1.5,o.strokeStyle="white",o.textBaseline="top",o.font="bold 36px Open Sans, sans-serif",o.fillText(n,5,5),o.strokeText(n,5,5),r.debugOverlayTexture.update(i),r.debugOverlayTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}(n,y+" "+v+"kb"),u.draw(o,s.TRIANGLES,c,f,tT.alphaBlended,tk.disabled,eO(l,r.Color.transparent,g),p,n.debugBuffer,n.quadTriangleIndexBuffer,n.debugSegments)})(n,i,a[o])},custom:function(r,n,i){var a=r.context,o=i.implementation;if("offscreen"===r.renderPass){var s=o.prerender;s&&(r.setCustomLayerDefaults(),a.setColorMode(r.colorModeForRenderPass()),s.call(o,a.gl,r.transform.customLayerMatrix()),a.setDirty(),r.setBaseState())}else if("translucent"===r.renderPass){r.setCustomLayerDefaults(),a.setColorMode(r.colorModeForRenderPass()),a.setStencilMode(tw.disabled);var l="3d"===o.renderingMode?new t_(r.context.gl.LEQUAL,t_.ReadWrite,r.depthRangeFor3D):r.depthModeForSublayer(0,t_.ReadOnly);a.setDepthMode(l),o.render(a.gl,r.transform.customLayerMatrix()),a.setDirty(),r.setBaseState(),a.bindFramebuffer.set(null)}}},e7=function(r,n){this.context=new tA(r),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=tM.maxUnderzooming+tM.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new eh,this.gpuTimers={}};e7.prototype.resize=function(n,i){if(this.width=n*r.browser.devicePixelRatio,this.height=i*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,o=this.style._order;a<o.length;a+=1){var s=o[a];this.style._layers[s].resize()}},e7.prototype.setup=function(){var n=this.context,i=new r.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(r.EXTENT,0),i.emplaceBack(0,r.EXTENT),i.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(i,em.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var a=new r.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(r.EXTENT,0),a.emplaceBack(0,r.EXTENT),a.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=n.createVertexBuffer(a,em.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var o=new r.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(r.EXTENT,0,r.EXTENT,0),o.emplaceBack(0,r.EXTENT,0,r.EXTENT),o.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(o,L.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var s=new r.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(s,em.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var l=new r.StructArrayLayout1ui2;l.emplaceBack(0),l.emplaceBack(1),l.emplaceBack(3),l.emplaceBack(2),l.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(l);var u=new r.StructArrayLayout3ui6;u.emplaceBack(0,1,2),u.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(u),this.emptyTexture=new r.Texture(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);var c=this.context.gl;this.stencilClearMode=new tw({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO)},e7.prototype.clearStencil=function(){var n=this.context,i=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var a=r.create();r.ortho(a,0,this.width,this.height,0,0,1),r.scale(a,a,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,i.TRIANGLES,t_.disabled,this.stencilClearMode,tT.disabled,tk.disabled,eP(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},e7.prototype._renderTileClippingMasks=function(r,n){if(this.currentStencilSource!==r.source&&r.isTileClipped()&&n&&n.length){this.currentStencilSource=r.source;var i=this.context,a=i.gl;this.nextStencilID+n.length>256&&this.clearStencil(),i.setColorMode(tT.disabled),i.setDepthMode(t_.disabled);var o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var s=0;s<n.length;s+=1){var l=n[s],u=this._tileClippingMaskIDs[l.key]=this.nextStencilID++;o.draw(i,a.TRIANGLES,t_.disabled,new tw({func:a.ALWAYS,mask:0},u,255,a.KEEP,a.KEEP,a.REPLACE),tT.disabled,tk.disabled,eP(l.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},e7.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var r=this.nextStencilID++,n=this.context.gl;return new tw({func:n.NOTEQUAL,mask:255},r,255,n.KEEP,n.KEEP,n.REPLACE)},e7.prototype.stencilModeForClipping=function(r){var n=this.context.gl;return new tw({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,n.KEEP,n.KEEP,n.REPLACE)},e7.prototype.stencilConfigForOverlap=function(r){var n,i=this.context.gl,a=r.sort(function(r,n){return n.overscaledZ-r.overscaledZ}),o=a[a.length-1].overscaledZ,s=a[0].overscaledZ-o+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();for(var l={},u=0;u<s;u++)l[u+o]=new tw({func:i.GEQUAL,mask:255},u+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=s,[l,a]}return[((n={})[o]=tw.disabled,n),a]},e7.prototype.colorModeForRenderPass=function(){var n=this.context.gl;if(this._showOverdrawInspector){var i=1/8;return new tT([n.CONSTANT_COLOR,n.ONE],new r.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?tT.unblended:tT.alphaBlended},e7.prototype.depthModeForSublayer=function(r,n,i){if(!this.opaquePassEnabledForLayer())return t_.disabled;var a=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new t_(i||this.context.gl.LEQUAL,n,[a,a])},e7.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},e7.prototype.render=function(n,i){var a,o,s,l,u=this;this.style=n,this.options=i,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var c=this.style._order,f=this.style.sourceCaches;for(var h in f){var p=f[h];p.used&&p.prepare(this.context)}var d,v,g={},y={},m={};for(var x in f){var b=f[x];g[x]=b.getVisibleCoordinates(),y[x]=g[x].slice().reverse(),m[x]=b.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<c.length;_++){var w=c[_];if(this.style._layers[w].is3D()){this.opaquePassCutoff=_;break}}this.renderPass="offscreen";for(var T=0;T<c.length;T+=1){var k=c[T],A=this.style._layers[k];if(A.hasOffscreenPass()&&!A.isHidden(this.transform.zoom)){var M=y[A.source];("custom"===A.type||M.length)&&this.renderLayer(this,f[A.source],A,M)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[c[this.currentLayer]],E=f[S.source],L=g[S.source];this._renderTileClippingMasks(S,L),this.renderLayer(this,E,S,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var C=this.style._layers[c[this.currentLayer]],O=f[C.source],P=("symbol"===C.type?m:y)[C.source];this._renderTileClippingMasks(C,g[C.source]),this.renderLayer(this,O,C,P)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(r){r.source&&!r.isHidden(u.transform.zoom)&&(r.source!==(v&&v.id)&&(v=u.style.sourceCaches[r.source]),(!d||d.getSource().maxzoom<v.getSource().maxzoom)&&(d=v))}),d&&e8.debug(this,d,d.getVisibleCoordinates())),this.options.showPadding&&(a=this.transform.padding,e5(this,this.transform.height-(a.top||0),3,eQ),e5(this,a.bottom||0,3,e0),e4(this,a.left||0,3,e1),e4(this,this.transform.width-(a.right||0),3,e2),e6(this,(s=(o=this.transform.centerPoint).x)-1,(l=this.transform.height-o.y)-10,2,20,e3),e6(this,s-10,l-1,20,2,e3)),this.context.setDefault()},e7.prototype.renderLayer=function(r,n,i,a){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||a.length)&&(this.id=i.id,this.gpuTimingStart(i),e8[i.type](r,n,i,a,this.style.placement.variableOffsets),this.gpuTimingEnd())},e7.prototype.gpuTimingStart=function(r){if(this.options.gpuTiming){var n=this.context.extTimerQuery,i=this.gpuTimers[r.id];i||(i=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:n.createQueryEXT()}),i.calls++,n.beginQueryEXT(n.TIME_ELAPSED_EXT,i.query)}},e7.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}},e7.prototype.collectGpuTimers=function(){var r=this.gpuTimers;return this.gpuTimers={},r},e7.prototype.queryGpuTimers=function(r){var n={};for(var i in r){var a=r[i],o=this.context.extTimerQuery,s=o.getQueryObjectEXT(a.query,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(a.query),n[i]=s}return n},e7.prototype.translatePosMatrix=function(n,i,a,o,s){if(!a[0]&&!a[1])return n;var l=s?"map"===o?this.transform.angle:0:"viewport"===o?-this.transform.angle:0;if(l){var u=Math.sin(l),c=Math.cos(l);a=[a[0]*c-a[1]*u,a[0]*u+a[1]*c]}var f=[s?a[0]:t3(i,a[0],this.transform.zoom),s?a[1]:t3(i,a[1],this.transform.zoom),0],h=new Float32Array(16);return r.translate(h,n,f),h},e7.prototype.saveTileTexture=function(r){var n=this._tileTextures[r.size[0]];n?n.push(r):this._tileTextures[r.size[0]]=[r]},e7.prototype.getTileTexture=function(r){var n=this._tileTextures[r];return n&&n.length>0?n.pop():null},e7.prototype.isPatternMissing=function(r){if(!r)return!1;if(!r.from||!r.to)return!0;var n=this.imageManager.getPattern(r.from.toString()),i=this.imageManager.getPattern(r.to.toString());return!n||!i},e7.prototype.useProgram=function(r,n){this.cache=this.cache||{};var i=""+r+(n?n.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new ek(this.context,r,e_[r],n,eZ[r],this._showOverdrawInspector)),this.cache[i]},e7.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},e7.prototype.setBaseState=function(){var r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)},e7.prototype.initDebugOverlayCanvas=function(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var n=this.context.gl;this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,n.RGBA)}},e7.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var e9=function(r,n){this.points=r,this.planes=n};e9.fromInvProjectionMatrix=function(n,i,a){var o=Math.pow(2,a),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(i){return r.transformMat4([],i,n)}).map(function(n){return r.scale$1([],n,1/n[3]/i*o)}),l=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(n){var i=r.sub([],s[n[0]],s[n[1]]),a=r.sub([],s[n[2]],s[n[1]]),o=r.normalize([],r.cross([],i,a)),l=-r.dot(o,s[n[1]]);return o.concat(l)});return new e9(s,l)};var rt=function(n,i){this.min=n,this.max=i,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};rt.prototype.quadrant=function(n){for(var i=[n%2==0,n<2],a=r.clone$2(this.min),o=r.clone$2(this.max),s=0;s<i.length;s++)a[s]=i[s]?this.min[s]:this.center[s],o[s]=i[s]?this.center[s]:this.max[s];return o[2]=this.max[2],new rt(a,o)},rt.prototype.distanceX=function(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]},rt.prototype.distanceY=function(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]},rt.prototype.intersects=function(n){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],a=!0,o=0;o<n.planes.length;o++){for(var s=n.planes[o],l=0,u=0;u<i.length;u++)l+=r.dot$1(s,i[u])>=0;if(0===l)return 0;l!==i.length&&(a=!1)}if(a)return 2;for(var c=0;c<3;c++){for(var f=Number.MAX_VALUE,h=-Number.MAX_VALUE,p=0;p<n.points.length;p++){var d=n.points[p][c]-this.min[c];f=Math.min(f,d),h=Math.max(h,d)}if(h<0||f>this.max[c]-this.min[c])return 0}return 1};var re=function(r,n,i,a){if(void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=0),isNaN(r)||r<0||isNaN(n)||n<0||isNaN(i)||i<0||isNaN(a)||a<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=n,this.left=i,this.right=a};re.prototype.interpolate=function(n,i,a){return null!=i.top&&null!=n.top&&(this.top=r.number(n.top,i.top,a)),null!=i.bottom&&null!=n.bottom&&(this.bottom=r.number(n.bottom,i.bottom,a)),null!=i.left&&null!=n.left&&(this.left=r.number(n.left,i.left,a)),null!=i.right&&null!=n.right&&(this.right=r.number(n.right,i.right,a)),this},re.prototype.getCenter=function(n,i){var a=r.clamp((this.left+n-this.right)/2,0,n),o=r.clamp((this.top+i-this.bottom)/2,0,i);return new r.Point(a,o)},re.prototype.equals=function(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right},re.prototype.clone=function(){return new re(this.top,this.bottom,this.left,this.right)},re.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var rr=function(n,i,a,o,s){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===s||s,this._minZoom=n||0,this._maxZoom=i||22,this._minPitch=null==a?0:a,this._maxPitch=null==o?60:o,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new re,this._posMatrixCache={},this._alignedPosMatrixCache={}},rn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};rr.prototype.clone=function(){var r=new rr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r},rn.minZoom.get=function(){return this._minZoom},rn.minZoom.set=function(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))},rn.maxZoom.get=function(){return this._maxZoom},rn.maxZoom.set=function(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))},rn.minPitch.get=function(){return this._minPitch},rn.minPitch.set=function(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))},rn.maxPitch.get=function(){return this._maxPitch},rn.maxPitch.set=function(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))},rn.renderWorldCopies.get=function(){return this._renderWorldCopies},rn.renderWorldCopies.set=function(r){void 0===r?r=!0:null===r&&(r=!1),this._renderWorldCopies=r},rn.worldSize.get=function(){return this.tileSize*this.scale},rn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},rn.size.get=function(){return new r.Point(this.width,this.height)},rn.bearing.get=function(){return-this.angle/Math.PI*180},rn.bearing.set=function(n){var i=-r.wrap(n,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},rn.pitch.get=function(){return this._pitch/Math.PI*180},rn.pitch.set=function(n){var i=r.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},rn.fov.get=function(){return this._fov/Math.PI*180},rn.fov.set=function(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())},rn.zoom.get=function(){return this._zoom},rn.zoom.set=function(r){var n=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this.scale=this.zoomScale(n),this.tileZoom=Math.floor(n),this.zoomFraction=n-this.tileZoom,this._constrain(),this._calcMatrices())},rn.center.get=function(){return this._center},rn.center.set=function(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())},rn.padding.get=function(){return this._edgeInsets.toJSON()},rn.padding.set=function(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())},rn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},rr.prototype.isPaddingEqual=function(r){return this._edgeInsets.equals(r)},rr.prototype.interpolatePadding=function(r,n,i){this._unmodified=!1,this._edgeInsets.interpolate(r,n,i),this._constrain(),this._calcMatrices()},rr.prototype.coveringZoomLevel=function(r){return Math.max(0,(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize)))},rr.prototype.getVisibleUnwrappedCoordinates=function(n){var i=[new r.UnwrappedTileID(0,n)];if(this._renderWorldCopies)for(var a=this.pointCoordinate(new r.Point(0,0)),o=this.pointCoordinate(new r.Point(this.width,0)),s=this.pointCoordinate(new r.Point(this.width,this.height)),l=this.pointCoordinate(new r.Point(0,this.height)),u=Math.floor(Math.min(a.x,o.x,s.x,l.x)),c=Math.floor(Math.max(a.x,o.x,s.x,l.x)),f=u-1;f<=c+1;f++)0!==f&&i.push(new r.UnwrappedTileID(f,n));return i},rr.prototype.coveringTiles=function(n){var i=this.coveringZoomLevel(n),a=i;if(void 0!==n.minzoom&&i<n.minzoom)return[];void 0!==n.maxzoom&&i>n.maxzoom&&(i=n.maxzoom);var o=r.MercatorCoordinate.fromLngLat(this.center),s=Math.pow(2,i),l=[s*o.x,s*o.y,0],u=e9.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),c=n.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(c=i);var f=function(r){return{aabb:new rt([r*s,0,0],[(r+1)*s,s,0]),zoom:0,x:0,y:0,wrap:r,fullyVisible:!1}},h=[],p=[],d=i,v=n.reparseOverscaled?a:i;if(this._renderWorldCopies)for(var g=1;g<=3;g++)h.push(f(-g)),h.push(f(g));for(h.push(f(0));h.length>0;){var y=h.pop(),m=y.x,x=y.y,b=y.fullyVisible;if(!b){var _=y.aabb.intersects(u);if(0===_)continue;b=2===_}var w=Math.max(Math.abs(y.aabb.distanceX(l)),Math.abs(y.aabb.distanceY(l))),T=3+(1<<d-y.zoom)-2;if(y.zoom===d||w>T&&y.zoom>=c)p.push({tileID:new r.OverscaledTileID(y.zoom===d?v:y.zoom,y.wrap,y.zoom,m,x),distanceSq:r.sqrLen([l[0]-.5-m,l[1]-.5-x])});else for(var k=0;k<4;k++){var A=(m<<1)+k%2,M=(x<<1)+(k>>1);h.push({aabb:y.aabb.quadrant(k),zoom:y.zoom+1,x:A,y:M,wrap:y.wrap,fullyVisible:b})}}return p.sort(function(r,n){return r.distanceSq-n.distanceSq}).map(function(r){return r.tileID})},rr.prototype.resize=function(r,n){this.width=r,this.height=n,this.pixelsToGLUnits=[2/r,-2/n],this._constrain(),this._calcMatrices()},rn.unmodified.get=function(){return this._unmodified},rr.prototype.zoomScale=function(r){return Math.pow(2,r)},rr.prototype.scaleZoom=function(r){return Math.log(r)/Math.LN2},rr.prototype.project=function(n){var i=r.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(n.lng)*this.worldSize,r.mercatorYfromLat(i)*this.worldSize)},rr.prototype.unproject=function(n){return new r.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()},rn.point.get=function(){return this.project(this.center)},rr.prototype.setLocationAtPoint=function(n,i){var a=this.pointCoordinate(i),o=this.pointCoordinate(this.centerPoint),s=this.locationCoordinate(n),l=new r.MercatorCoordinate(s.x-(a.x-o.x),s.y-(a.y-o.y));this.center=this.coordinateLocation(l),this._renderWorldCopies&&(this.center=this.center.wrap())},rr.prototype.locationPoint=function(r){return this.coordinatePoint(this.locationCoordinate(r))},rr.prototype.pointLocation=function(r){return this.coordinateLocation(this.pointCoordinate(r))},rr.prototype.locationCoordinate=function(n){return r.MercatorCoordinate.fromLngLat(n)},rr.prototype.coordinateLocation=function(r){return r.toLngLat()},rr.prototype.pointCoordinate=function(n){var i=[n.x,n.y,0,1],a=[n.x,n.y,1,1];r.transformMat4(i,i,this.pixelMatrixInverse),r.transformMat4(a,a,this.pixelMatrixInverse);var o=i[3],s=a[3],l=i[0]/o,u=a[0]/s,c=i[1]/o,f=a[1]/s,h=i[2]/o,p=a[2]/s,d=h===p?0:(0-h)/(p-h);return new r.MercatorCoordinate(r.number(l,u,d)/this.worldSize,r.number(c,f,d)/this.worldSize)},rr.prototype.coordinatePoint=function(n){var i=[n.x*this.worldSize,n.y*this.worldSize,0,1];return r.transformMat4(i,i,this.pixelMatrix),new r.Point(i[0]/i[3],i[1]/i[3])},rr.prototype.getBounds=function(){return(new r.LngLatBounds).extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},rr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},rr.prototype.setMaxBounds=function(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},rr.prototype.calculatePosMatrix=function(n,i){void 0===i&&(i=!1);var a=n.key,o=i?this._alignedPosMatrixCache:this._posMatrixCache;if(o[a])return o[a];var s=n.canonical,l=this.worldSize/this.zoomScale(s.z),u=s.x+Math.pow(2,s.z)*n.wrap,c=r.identity(new Float64Array(16));return r.translate(c,c,[u*l,s.y*l,0]),r.scale(c,c,[l/r.EXTENT,l/r.EXTENT,1]),r.multiply(c,i?this.alignedProjMatrix:this.projMatrix,c),o[a]=new Float32Array(c),o[a]},rr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},rr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var n,i,a,o,s=-90,l=90,u=-180,c=180,f=this.size,h=this._unmodified;if(this.latRange){var p=this.latRange;s=r.mercatorYfromLat(p[1])*this.worldSize,n=(l=r.mercatorYfromLat(p[0])*this.worldSize)-s<f.y?f.y/(l-s):0}if(this.lngRange){var d=this.lngRange;u=r.mercatorXfromLng(d[0])*this.worldSize,i=(c=r.mercatorXfromLng(d[1])*this.worldSize)-u<f.x?f.x/(c-u):0}var v=this.point,g=Math.max(i||0,n||0);if(g)return this.center=this.unproject(new r.Point(i?(c+u)/2:v.x,n?(l+s)/2:v.y)),this.zoom+=this.scaleZoom(g),this._unmodified=h,void(this._constraining=!1);if(this.latRange){var y=v.y,m=f.y/2;y-m<s&&(o=s+m),y+m>l&&(o=l-m)}if(this.lngRange){var x=v.x,b=f.x/2;x-b<u&&(a=u+b),x+b>c&&(a=c-b)}void 0===a&&void 0===o||(this.center=this.unproject(new r.Point(void 0!==a?a:v.x,void 0!==o?o:v.y))),this._unmodified=h,this._constraining=!1}},rr.prototype._calcMatrices=function(){if(this.height){var n=this._fov/2,i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(n)*this.height;var a=Math.PI/2+this._pitch,o=this._fov*(.5+i.y/this.height),s=Math.sin(o)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-a-o,.01,Math.PI-.01)),l=this.point,u=l.x,c=l.y,f=1.01*(Math.cos(Math.PI/2-this._pitch)*s+this.cameraToCenterDistance),h=this.height/50,p=new Float64Array(16);r.perspective(p,this._fov,this.width/this.height,h,f),p[8]=-(2*i.x)/this.width,p[9]=2*i.y/this.height,r.scale(p,p,[1,-1,1]),r.translate(p,p,[0,0,-this.cameraToCenterDistance]),r.rotateX(p,p,this._pitch),r.rotateZ(p,p,this.angle),r.translate(p,p,[-u,-c,0]),this.mercatorMatrix=r.scale([],p,[this.worldSize,this.worldSize,this.worldSize]),r.scale(p,p,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=p,this.invProjMatrix=r.invert([],this.projMatrix);var d=this.width%2/2,v=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),m=u-Math.round(u)+g*d+y*v,x=c-Math.round(c)+g*v+y*d,b=new Float64Array(p);if(r.translate(b,b,[m>.5?m-1:m,x>.5?x-1:x,0]),this.alignedProjMatrix=b,p=r.create(),r.scale(p,p,[this.width/2,-this.height/2,1]),r.translate(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=r.create(),r.scale(p,p,[1,-1,1]),r.translate(p,p,[-1,-1,0]),r.scale(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(p=r.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={}}},rr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var n=this.pointCoordinate(new r.Point(0,0)),i=[n.x*this.worldSize,n.y*this.worldSize,0,1];return r.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},rr.prototype.getCameraPoint=function(){var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,n))},rr.prototype.getCameraQueryGeometry=function(n){var i=this.getCameraPoint();if(1===n.length)return[n[0],i];for(var a=i.x,o=i.y,s=i.x,l=i.y,u=0;u<n.length;u+=1){var c=n[u];a=Math.min(a,c.x),o=Math.min(o,c.y),s=Math.max(s,c.x),l=Math.max(l,c.y)}return[new r.Point(a,o),new r.Point(s,o),new r.Point(s,l),new r.Point(a,l),new r.Point(a,o)]},Object.defineProperties(rr.prototype,rn);var ri=function(n){var i,a,o,s;this._hashName=n&&encodeURIComponent(n),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),a=!1,o=null,s=function(){o=null,a&&(i(),o=setTimeout(s,300),a=!1)},function(){return a=!0,o||s(),o})};ri.prototype.addTo=function(n){return this._map=n,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ri.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ri.prototype.getHashString=function(n){var i=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,o=Math.pow(10,Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10)),s=Math.round(i.lng*o)/o,l=Math.round(i.lat*o)/o,u=this._map.getBearing(),c=this._map.getPitch(),f="";if(f+=n?"/"+s+"/"+l+"/"+a:a+"/"+l+"/"+s,(u||c)&&(f+="/"+Math.round(10*u)/10),c&&(f+="/"+Math.round(c)),this._hashName){var h=this._hashName,p=!1,d=r.window.location.hash.slice(1).split("&").map(function(r){var n=r.split("=")[0];return n===h?(p=!0,n+"="+f):r}).filter(function(r){return r});return p||d.push(h+"="+f),"#"+d.join("&")}return"#"+f},ri.prototype._getCurrentHash=function(){var n,i=this,a=r.window.location.hash.replace("#","");return this._hashName?(a.split("&").map(function(r){return r.split("=")}).forEach(function(r){r[0]===i._hashName&&(n=r)}),(n&&n[1]||"").split("/")):a.split("/")},ri.prototype._onHashChange=function(){var r=this._getCurrentHash();if(r.length>=3&&!r.some(function(r){return isNaN(r)})){var n=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:n,pitch:+(r[4]||0)}),!0}return!1},ri.prototype._updateHashUnthrottled=function(){var n=r.window.location.href.replace(/(#.+)?$/,this.getHashString());try{r.window.history.replaceState(r.window.history.state,null,n)}catch(r){}};var ra={linearity:.3,easing:r.bezier(0,0,.3,1)},ro=r.extend({deceleration:2500,maxSpeed:1400},ra),rs=r.extend({deceleration:20,maxSpeed:1400},ra),rl=r.extend({deceleration:1e3,maxSpeed:360},ra),ru=r.extend({deceleration:1e3,maxSpeed:90},ra),rc=function(r){this._map=r,this.clear()};function rf(r,n){(!r.duration||r.duration<n.duration)&&(r.duration=n.duration,r.easing=n.easing)}function rh(n,i,a){var o=a.maxSpeed,s=a.linearity,l=a.deceleration,u=r.clamp(n*s/(i/1e3),-o,o),c=Math.abs(u)/(l*s);return{easing:a.easing,duration:1e3*c,amount:c/2*u}}rc.prototype.clear=function(){this._inertiaBuffer=[]},rc.prototype.record=function(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:n})},rc.prototype._drainInertiaBuffer=function(){for(var n=this._inertiaBuffer,i=r.browser.now();n.length>0&&i-n[0].time>160;)n.shift()},rc.prototype._onMoveEnd=function(n){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},a=0,o=this._inertiaBuffer;a<o.length;a+=1){var s=o[a].settings;i.zoom+=s.zoomDelta||0,i.bearing+=s.bearingDelta||0,i.pitch+=s.pitchDelta||0,s.panDelta&&i.pan._add(s.panDelta),s.around&&(i.around=s.around),s.pinchAround&&(i.pinchAround=s.pinchAround)}var l=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,u={};if(i.pan.mag()){var c=rh(i.pan.mag(),l,r.extend({},ro,n||{}));u.offset=i.pan.mult(c.amount/i.pan.mag()),u.center=this._map.transform.center,rf(u,c)}if(i.zoom){var f=rh(i.zoom,l,rs);u.zoom=this._map.transform.zoom+f.amount,rf(u,f)}if(i.bearing){var h=rh(i.bearing,l,rl);u.bearing=this._map.transform.bearing+r.clamp(h.amount,-179,179),rf(u,h)}if(i.pitch){var p=rh(i.pitch,l,ru);u.pitch=this._map.transform.pitch+p.amount,rf(u,p)}if(u.zoom||u.bearing){var d=void 0===i.pinchAround?i.around:i.pinchAround;u.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),r.extend(u,{noMoveStart:!0})}};var rp=function(n){function a(a,o,s,l){void 0===l&&(l={});var u=i.mousePos(o.getCanvasContainer(),s),c=o.unproject(u);n.call(this,a,r.extend({point:u,lngLat:c,originalEvent:s},l)),this._defaultPrevented=!1,this.target=o}n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a;var o={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,o),a}(r.Event),rd=function(n){function a(a,o,s){var l="touchend"===a?s.changedTouches:s.touches,u=i.touchPos(o.getCanvasContainer(),l),c=u.map(function(r){return o.unproject(r)}),f=u.reduce(function(r,n,i,a){return r.add(n.div(a.length))},new r.Point(0,0)),h=o.unproject(f);n.call(this,a,{points:u,point:f,lngLats:c,lngLat:h,originalEvent:s}),this._defaultPrevented=!1}n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a;var o={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,o),a}(r.Event),rv=function(r){function n(n,i,a){r.call(this,n,{originalEvent:a}),this._defaultPrevented=!1}r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n;var i={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,i),n}(r.Event),rg=function(r,n){this._map=r,this._clickTolerance=n.clickTolerance};rg.prototype.reset=function(){delete this._mousedownPos},rg.prototype.wheel=function(r){return this._firePreventable(new rv(r.type,this._map,r))},rg.prototype.mousedown=function(r,n){return this._mousedownPos=n,this._firePreventable(new rp(r.type,this._map,r))},rg.prototype.mouseup=function(r){this._map.fire(new rp(r.type,this._map,r))},rg.prototype.click=function(r,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new rp(r.type,this._map,r))},rg.prototype.dblclick=function(r){return this._firePreventable(new rp(r.type,this._map,r))},rg.prototype.mouseover=function(r){this._map.fire(new rp(r.type,this._map,r))},rg.prototype.mouseout=function(r){this._map.fire(new rp(r.type,this._map,r))},rg.prototype.touchstart=function(r){return this._firePreventable(new rd(r.type,this._map,r))},rg.prototype.touchmove=function(r){this._map.fire(new rd(r.type,this._map,r))},rg.prototype.touchend=function(r){this._map.fire(new rd(r.type,this._map,r))},rg.prototype.touchcancel=function(r){this._map.fire(new rd(r.type,this._map,r))},rg.prototype._firePreventable=function(r){if(this._map.fire(r),r.defaultPrevented)return{}},rg.prototype.isEnabled=function(){return!0},rg.prototype.isActive=function(){return!1},rg.prototype.enable=function(){},rg.prototype.disable=function(){};var ry=function(r){this._map=r};ry.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ry.prototype.mousemove=function(r){this._map.fire(new rp(r.type,this._map,r))},ry.prototype.mousedown=function(){this._delayContextMenu=!0},ry.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rp("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ry.prototype.contextmenu=function(r){this._delayContextMenu?this._contextMenuEvent=r:this._map.fire(new rp(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()},ry.prototype.isEnabled=function(){return!0},ry.prototype.isActive=function(){return!1},ry.prototype.enable=function(){},ry.prototype.disable=function(){};var rm=function(r,n){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=n.clickTolerance||1};function rx(r,n){for(var i={},a=0;a<r.length;a++)i[r[a].identifier]=n[a];return i}rm.prototype.isEnabled=function(){return!!this._enabled},rm.prototype.isActive=function(){return!!this._active},rm.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},rm.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rm.prototype.mousedown=function(r,n){this.isEnabled()&&r.shiftKey&&0===r.button&&(i.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)},rm.prototype.mousemoveWindow=function(r,n){if(this._active&&!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=n,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));var o=Math.min(a.x,n.x),s=Math.max(a.x,n.x),l=Math.min(a.y,n.y),u=Math.max(a.y,n.y);i.setTransform(this._box,"translate("+o+"px,"+l+"px)"),this._box.style.width=s-o+"px",this._box.style.height=u-l+"px"}},rm.prototype.mouseupWindow=function(n,a){var o=this;if(this._active&&0===n.button){var s=this._startPos;if(this.reset(),i.suppressClick(),s.x!==a.x||s.y!==a.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:function(r){return r.fitScreenCoordinates(s,a,o._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",n)}},rm.prototype.keydown=function(r){this._active&&27===r.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",r))},rm.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},rm.prototype._fireEvent=function(n,i){return this._map.fire(new r.Event(n,{originalEvent:i}))};var rb=function(r){this.reset(),this.numTouches=r.numTouches};rb.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},rb.prototype.touchstart=function(n,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=n.timeStamp),a.length===this.numTouches&&(this.centroid=function(n){for(var i=new r.Point(0,0),a=0;a<n.length;a+=1){var o=n[a];i._add(o)}return i.div(n.length)}(i),this.touches=rx(a,i)))},rb.prototype.touchmove=function(r,n,i){if(!this.aborted&&this.centroid){var a=rx(i,n);for(var o in this.touches){var s=this.touches[o],l=a[o];(!l||l.dist(s)>30)&&(this.aborted=!0)}}},rb.prototype.touchend=function(r,n,i){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var a=!this.aborted&&this.centroid;if(this.reset(),a)return a}};var r_=function(r){this.singleTap=new rb(r),this.numTaps=r.numTaps,this.reset()};r_.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},r_.prototype.touchstart=function(r,n,i){this.singleTap.touchstart(r,n,i)},r_.prototype.touchmove=function(r,n,i){this.singleTap.touchmove(r,n,i)},r_.prototype.touchend=function(r,n,i){var a=this.singleTap.touchend(r,n,i);if(a){var o=r.timeStamp-this.lastTime<500,s=!this.lastTap||30>this.lastTap.dist(a);if(o&&s||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a}};var rw=function(){this._zoomIn=new r_({numTouches:1,numTaps:2}),this._zoomOut=new r_({numTouches:2,numTaps:1}),this.reset()};rw.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},rw.prototype.touchstart=function(r,n,i){this._zoomIn.touchstart(r,n,i),this._zoomOut.touchstart(r,n,i)},rw.prototype.touchmove=function(r,n,i){this._zoomIn.touchmove(r,n,i),this._zoomOut.touchmove(r,n,i)},rw.prototype.touchend=function(r,n,i){var a=this,o=this._zoomIn.touchend(r,n,i),s=this._zoomOut.touchend(r,n,i);return o?(this._active=!0,r.preventDefault(),setTimeout(function(){return a.reset()},0),{cameraAnimation:function(n){return n.easeTo({duration:300,zoom:n.getZoom()+1,around:n.unproject(o)},{originalEvent:r})}}):s?(this._active=!0,r.preventDefault(),setTimeout(function(){return a.reset()},0),{cameraAnimation:function(n){return n.easeTo({duration:300,zoom:n.getZoom()-1,around:n.unproject(s)},{originalEvent:r})}}):void 0},rw.prototype.touchcancel=function(){this.reset()},rw.prototype.enable=function(){this._enabled=!0},rw.prototype.disable=function(){this._enabled=!1,this.reset()},rw.prototype.isEnabled=function(){return this._enabled},rw.prototype.isActive=function(){return this._active};var rT={};rT[0]=1,rT[2]=2;var rk=function(r){this.reset(),this._clickTolerance=r.clickTolerance||1};rk.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},rk.prototype._correctButton=function(r,n){return!1},rk.prototype._move=function(r,n){return{}},rk.prototype.mousedown=function(r,n){if(!this._lastPoint){var a=i.mouseButton(r);this._correctButton(r,a)&&(this._lastPoint=n,this._eventButton=a)}},rk.prototype.mousemoveWindow=function(r,n){var i,a=this._lastPoint;if(a){if(r.preventDefault(),i=rT[this._eventButton],void 0===r.buttons||(r.buttons&i)!==i)this.reset();else if(this._moved||!(n.dist(a)<this._clickTolerance))return this._moved=!0,this._lastPoint=n,this._move(a,n)}},rk.prototype.mouseupWindow=function(r){this._lastPoint&&i.mouseButton(r)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},rk.prototype.enable=function(){this._enabled=!0},rk.prototype.disable=function(){this._enabled=!1,this.reset()},rk.prototype.isEnabled=function(){return this._enabled},rk.prototype.isActive=function(){return this._active};var rA=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.mousedown=function(n,i){r.prototype.mousedown.call(this,n,i),this._lastPoint&&(this._active=!0)},n.prototype._correctButton=function(r,n){return 0===n&&!r.ctrlKey},n.prototype._move=function(r,n){return{around:n,panDelta:n.sub(r)}},n}(rk),rM=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._correctButton=function(r,n){return 0===n&&r.ctrlKey||2===n},n.prototype._move=function(r,n){var i=.8*(n.x-r.x);if(i)return this._active=!0,{bearingDelta:i}},n.prototype.contextmenu=function(r){r.preventDefault()},n}(rk),rS=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype._correctButton=function(r,n){return 0===n&&r.ctrlKey||2===n},n.prototype._move=function(r,n){var i=-.5*(n.y-r.y);if(i)return this._active=!0,{pitchDelta:i}},n.prototype.contextmenu=function(r){r.preventDefault()},n}(rk),rE=function(r){this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset()};rE.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},rE.prototype.touchstart=function(r,n,i){return this._calculateTransform(r,n,i)},rE.prototype.touchmove=function(r,n,i){if(this._active&&!(i.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,n,i)},rE.prototype.touchend=function(r,n,i){this._calculateTransform(r,n,i),this._active&&i.length<this._minTouches&&this.reset()},rE.prototype.touchcancel=function(){this.reset()},rE.prototype._calculateTransform=function(n,i,a){a.length>0&&(this._active=!0);var o=rx(a,i),s=new r.Point(0,0),l=new r.Point(0,0),u=0;for(var c in o){var f=o[c],h=this._touches[c];h&&(s._add(f),l._add(f.sub(h)),u++,o[c]=f)}if(this._touches=o,!(u<this._minTouches)&&l.mag()){var p=l.div(u);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:s.div(u),panDelta:p}}},rE.prototype.enable=function(){this._enabled=!0},rE.prototype.disable=function(){this._enabled=!1,this.reset()},rE.prototype.isEnabled=function(){return this._enabled},rE.prototype.isActive=function(){return this._active};var rL=function(){this.reset()};function rC(r,n,i){for(var a=0;a<r.length;a++)if(r[a].identifier===i)return n[a]}function rO(r,n){return Math.log(r/n)/Math.LN2}rL.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},rL.prototype._start=function(r){},rL.prototype._move=function(r,n,i){return{}},rL.prototype.touchstart=function(r,n,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([n[0],n[1]]))},rL.prototype.touchmove=function(r,n,i){if(this._firstTwoTouches){r.preventDefault();var a=this._firstTwoTouches,o=a[0],s=a[1],l=rC(i,n,o),u=rC(i,n,s);if(l&&u){var c=this._aroundCenter?null:l.add(u).div(2);return this._move([l,u],c,r)}}},rL.prototype.touchend=function(r,n,a){if(this._firstTwoTouches){var o=this._firstTwoTouches,s=o[0],l=o[1],u=rC(a,n,s),c=rC(a,n,l);u&&c||(this._active&&i.suppressClick(),this.reset())}},rL.prototype.touchcancel=function(){this.reset()},rL.prototype.enable=function(r){this._enabled=!0,this._aroundCenter=!!r&&"center"===r.around},rL.prototype.disable=function(){this._enabled=!1,this.reset()},rL.prototype.isEnabled=function(){return this._enabled},rL.prototype.isActive=function(){return this._active};var rP=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.reset=function(){r.prototype.reset.call(this),delete this._distance,delete this._startDistance},n.prototype._start=function(r){this._startDistance=this._distance=r[0].dist(r[1])},n.prototype._move=function(r,n){var i=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(.1>Math.abs(rO(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:rO(this._distance,i),pinchAround:n}},n}(rL);function rI(r,n){return 180*r.angleWith(n)/Math.PI}var rD=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.reset=function(){r.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},n.prototype._start=function(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])},n.prototype._move=function(r,n){var i=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rI(this._vector,i),pinchAround:n}},n.prototype._isBelowThreshold=function(r){this._minDiameter=Math.min(this._minDiameter,r.mag());var n=25/(Math.PI*this._minDiameter)*360;return Math.abs(rI(r,this._startVector))<n},n}(rL);function rz(r){return Math.abs(r.y)>Math.abs(r.x)}var rR=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n.prototype.reset=function(){r.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},n.prototype._start=function(r){this._lastPoints=r,rz(r[0].sub(r[1]))&&(this._valid=!1)},n.prototype._move=function(r,n,i){var a=r[0].sub(this._lastPoints[0]),o=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(a,o,i.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:-((a.y+o.y)/2*.5)}},n.prototype.gestureBeginsVertically=function(r,n,i){if(void 0!==this._valid)return this._valid;var a=r.mag()>=2,o=n.mag()>=2;if(a||o){if(!a||!o)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var s=r.y>0==n.y>0;return rz(r)&&rz(n)&&s}},n}(rL),rF=function(){this._panStep=100,this._bearingStep=15,this._pitchStep=10,this._rotationDisabled=!1};function rB(r){return r*(2-r)}rF.prototype.reset=function(){this._active=!1},rF.prototype.keydown=function(r){var n=this;if(!(r.altKey||r.ctrlKey||r.metaKey)){var i=0,a=0,o=0,s=0,l=0;switch(r.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:r.shiftKey?a=-1:(r.preventDefault(),s=-1);break;case 39:r.shiftKey?a=1:(r.preventDefault(),s=1);break;case 38:r.shiftKey?o=1:(r.preventDefault(),l=-1);break;case 40:r.shiftKey?o=-1:(r.preventDefault(),l=1);break;default:return}return this._rotationDisabled&&(a=0,o=0),{cameraAnimation:function(u){var c=u.getZoom();u.easeTo({duration:300,easeId:"keyboardHandler",easing:rB,zoom:i?Math.round(c)+i*(r.shiftKey?2:1):c,bearing:u.getBearing()+a*n._bearingStep,pitch:u.getPitch()+o*n._pitchStep,offset:[-s*n._panStep,-l*n._panStep],center:u.getCenter()},{originalEvent:r})}}}},rF.prototype.enable=function(){this._enabled=!0},rF.prototype.disable=function(){this._enabled=!1,this.reset()},rF.prototype.isEnabled=function(){return this._enabled},rF.prototype.isActive=function(){return this._active},rF.prototype.disableRotation=function(){this._rotationDisabled=!0},rF.prototype.enableRotation=function(){this._rotationDisabled=!1};var rN=function(n,i){this._map=n,this._el=n.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)};rN.prototype.setZoomRate=function(r){this._defaultZoomRate=r},rN.prototype.setWheelZoomRate=function(r){this._wheelZoomRate=r},rN.prototype.isEnabled=function(){return!!this._enabled},rN.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},rN.prototype.isZooming=function(){return!!this._zooming},rN.prototype.enable=function(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&"center"===r.around)},rN.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rN.prototype.wheel=function(n){if(this.isEnabled()){var i=n.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY,a=r.browser.now(),o=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&4>Math.abs(i)?this._type="trackpad":o>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=200>Math.abs(o*i)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),n.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=n,this._delta-=i,this._active||this._start(n)),n.preventDefault()}},rN.prototype._onTimeout=function(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)},rN.prototype._start=function(n){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var a=i.mousePos(this._el,n);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},rN.prototype.renderFrame=function(){var n=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var a="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,o=2/(1+Math.exp(-Math.abs(this._delta*a)));this._delta<0&&0!==o&&(o=1/o);var s="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(s*o))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var l,u="number"==typeof this._targetZoom?this._targetZoom:i.zoom,c=this._startZoom,f=this._easing,h=!1;if("wheel"===this._type&&c&&f){var p=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),d=f(p);l=r.number(c,u,d),p<1?this._frameId||(this._frameId=!0):h=!0}else l=u,h=!0;return this._active=!0,h&&(this._active=!1,this._finishTimeout=setTimeout(function(){n._zooming=!1,n._handler._triggerRenderFrame(),delete n._targetZoom,delete n._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!h,zoomDelta:l-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},rN.prototype._smoothOutEasing=function(n){var i=r.ease;if(this._prevEase){var a=this._prevEase,o=(r.browser.now()-a.start)/a.duration,s=a.easing(o+.01)-a.easing(o),l=.27/Math.sqrt(s*s+1e-4)*.01,u=Math.sqrt(.0729-l*l);i=r.bezier(l,u,.25,1)}return this._prevEase={start:r.browser.now(),duration:n,easing:i},i},rN.prototype.reset=function(){this._active=!1};var rj=function(r,n){this._clickZoom=r,this._tapZoom=n};rj.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},rj.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},rj.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},rj.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var rU=function(){this.reset()};rU.prototype.reset=function(){this._active=!1},rU.prototype.dblclick=function(r,n){return r.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(r.shiftKey?-1:1),around:i.unproject(n)},{originalEvent:r})}}},rU.prototype.enable=function(){this._enabled=!0},rU.prototype.disable=function(){this._enabled=!1,this.reset()},rU.prototype.isEnabled=function(){return this._enabled},rU.prototype.isActive=function(){return this._active};var rV=function(){this._tap=new r_({numTouches:1,numTaps:1}),this.reset()};rV.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},rV.prototype.touchstart=function(r,n,i){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=n[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(r,n,i))},rV.prototype.touchmove=function(r,n,i){if(this._tapTime){if(this._swipePoint&&i[0].identifier===this._swipeTouch){var a=n[0],o=a.y-this._swipePoint.y;return this._swipePoint=a,r.preventDefault(),this._active=!0,{zoomDelta:o/128}}}else this._tap.touchmove(r,n,i)},rV.prototype.touchend=function(r,n,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(r,n,i)&&(this._tapTime=r.timeStamp)},rV.prototype.touchcancel=function(){this.reset()},rV.prototype.enable=function(){this._enabled=!0},rV.prototype.disable=function(){this._enabled=!1,this.reset()},rV.prototype.isEnabled=function(){return this._enabled},rV.prototype.isActive=function(){return this._active};var rH=function(r,n,i){this._el=r,this._mousePan=n,this._touchPan=i};rH.prototype.enable=function(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},rH.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},rH.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},rH.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var rq=function(r,n,i){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=n,this._mousePitch=i};rq.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},rq.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},rq.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},rq.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var rG=function(r,n,i,a){this._el=r,this._touchZoom=n,this._touchRotate=i,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0};rG.prototype.enable=function(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},rG.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},rG.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},rG.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},rG.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},rG.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rZ=function(r){return r.zoom||r.drag||r.pitch||r.rotate},rY=function(r){function n(){r.apply(this,arguments)}return r&&(n.__proto__=r),n.prototype=Object.create(r&&r.prototype),n.prototype.constructor=n,n}(r.Event);function rW(r){return r.panDelta&&r.panDelta.mag()||r.zoomDelta||r.bearingDelta||r.pitchDelta}var rX=function(n,a){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rc(n),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),r.bindAll(["handleEvent","handleWindowEvent"],this);var o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[r.window,"blur",void 0]];for(var s=0,l=this._listeners;s<l.length;s+=1){var u=l[s],c=u[0],f=u[1],h=u[2];i.addEventListener(c,f,c===r.window.document?this.handleWindowEvent:this.handleEvent,h)}};rX.prototype.destroy=function(){for(var n=0,a=this._listeners;n<a.length;n+=1){var o=a[n],s=o[0],l=o[1],u=o[2];i.removeEventListener(s,l,s===r.window.document?this.handleWindowEvent:this.handleEvent,u)}},rX.prototype._addDefaultHandlers=function(r){var n=this._map,i=n.getCanvasContainer();this._add("mapEvent",new rg(n,r));var a=n.boxZoom=new rm(n,r);this._add("boxZoom",a);var o=new rw,s=new rU;n.doubleClickZoom=new rj(s,o),this._add("tapZoom",o),this._add("clickZoom",s);var l=new rV;this._add("tapDragZoom",l);var u=n.touchPitch=new rR;this._add("touchPitch",u);var c=new rM(r),f=new rS(r);n.dragRotate=new rq(r,c,f),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]);var h=new rA(r),p=new rE(r);n.dragPan=new rH(i,h,p),this._add("mousePan",h),this._add("touchPan",p,["touchZoom","touchRotate"]);var d=new rD,v=new rP;n.touchZoomRotate=new rG(i,v,d,l),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",v,["touchPan","touchRotate"]);var g=n.scrollZoom=new rN(n,this);this._add("scrollZoom",g,["mousePan"]);var y=n.keyboard=new rF;this._add("keyboard",y),this._add("blockableMapEvent",new ry(n));for(var m=0,x=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<x.length;m+=1){var b=x[m];r.interactive&&r[b]&&n[b].enable(r[b])}},rX.prototype._add=function(r,n,i){this._handlers.push({handlerName:r,handler:n,allowed:i}),this._handlersById[r]=n},rX.prototype.stop=function(r){if(!this._updatingCamera){for(var n=0,i=this._handlers;n<i.length;n+=1)i[n].handler.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}},rX.prototype.isActive=function(){for(var r=0,n=this._handlers;r<n.length;r+=1)if(n[r].handler.isActive())return!0;return!1},rX.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},rX.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},rX.prototype.isMoving=function(){return!!rZ(this._eventsInProgress)||this.isZooming()},rX.prototype._blockedByActive=function(r,n,i){for(var a in r)if(a!==i&&(!n||0>n.indexOf(a)))return!0;return!1},rX.prototype.handleWindowEvent=function(r){this.handleEvent(r,r.type+"Window")},rX.prototype._getMapTouches=function(r){for(var n=[],i=0;i<r.length;i+=1){var a=r[i],o=a.target;this._el.contains(o)&&n.push(a)}return n},rX.prototype.handleEvent=function(r,n){if("blur"!==r.type){this._updatingCamera=!0;for(var a="renderFrame"===r.type?void 0:r,o={needsRenderFrame:!1},s={},l={},u=r.touches?this._getMapTouches(r.touches):void 0,c=u?i.touchPos(this._el,u):i.mousePos(this._el,r),f=0,h=this._handlers;f<h.length;f+=1){var p=h[f],d=p.handlerName,v=p.handler,g=p.allowed;if(v.isEnabled()){var y=void 0;this._blockedByActive(l,g,d)?v.reset():v[n||r.type]&&(y=v[n||r.type](r,c,u),this.mergeHandlerResult(o,s,y,d,a),y&&y.needsRenderFrame&&this._triggerRenderFrame()),(y||v.isActive())&&(l[d]=v)}}var m={};for(var x in this._previousActiveHandlers)l[x]||(m[x]=a);this._previousActiveHandlers=l,(Object.keys(m).length||rW(o))&&(this._changes.push([o,s,m]),this._triggerRenderFrame()),(Object.keys(l).length||rW(o))&&this._map._stop(!0),this._updatingCamera=!1;var b=o.cameraAnimation;b&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],b(this._map))}else this.stop(!0)},rX.prototype.mergeHandlerResult=function(n,i,a,o,s){if(a){r.extend(n,a);var l={handlerName:o,originalEvent:a.originalEvent||s};void 0!==a.zoomDelta&&(i.zoom=l),void 0!==a.panDelta&&(i.drag=l),void 0!==a.pitchDelta&&(i.pitch=l),void 0!==a.bearingDelta&&(i.rotate=l)}},rX.prototype._applyChanges=function(){for(var n={},i={},a={},o=0,s=this._changes;o<s.length;o+=1){var l=s[o],u=l[0],c=l[1],f=l[2];u.panDelta&&(n.panDelta=(n.panDelta||new r.Point(0,0))._add(u.panDelta)),u.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+u.zoomDelta),u.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+u.bearingDelta),u.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+u.pitchDelta),void 0!==u.around&&(n.around=u.around),void 0!==u.pinchAround&&(n.pinchAround=u.pinchAround),u.noInertia&&(n.noInertia=u.noInertia),r.extend(i,c),r.extend(a,f)}this._updateMapTransform(n,i,a),this._changes=[]},rX.prototype._updateMapTransform=function(r,n,i){var a=this._map,o=a.transform;if(!rW(r))return this._fireEvents(n,i,!0);var s=r.panDelta,l=r.zoomDelta,u=r.bearingDelta,c=r.pitchDelta,f=r.around,h=r.pinchAround;void 0!==h&&(f=h),a._stop(!0),f=f||a.transform.centerPoint;var p=o.pointLocation(s?f.sub(s):f);u&&(o.bearing+=u),c&&(o.pitch+=c),l&&(o.zoom+=l),o.setLocationAtPoint(p,f),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(n,i,!0)},rX.prototype._fireEvents=function(n,i,a){var o=this,s=rZ(this._eventsInProgress),l=rZ(n),u={};for(var c in n){var f=n[c].originalEvent;this._eventsInProgress[c]||(u[c+"start"]=f),this._eventsInProgress[c]=n[c]}for(var h in!s&&l&&this._fireEvent("movestart",l.originalEvent),u)this._fireEvent(h,u[h]);for(var p in l&&this._fireEvent("move",l.originalEvent),n){var d=n[p].originalEvent;this._fireEvent(p,d)}var v,g={};for(var y in this._eventsInProgress){var m=this._eventsInProgress[y],x=m.handlerName,b=m.originalEvent;this._handlersById[x].isActive()||(delete this._eventsInProgress[y],v=i[x]||b,g[y+"end"]=v)}for(var _ in g)this._fireEvent(_,g[_]);var w=rZ(this._eventsInProgress);if(a&&(s||l)&&!w){this._updatingCamera=!0;var T=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),k=function(r){return 0!==r&&-o._bearingSnap<r&&r<o._bearingSnap};T?(k(T.bearing||this._map.getBearing())&&(T.bearing=0),this._map.easeTo(T,{originalEvent:v})):(this._map.fire(new r.Event("moveend",{originalEvent:v})),k(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},rX.prototype._fireEvent=function(n,i){this._map.fire(new r.Event(n,i?{originalEvent:i}:{}))},rX.prototype._requestFrame=function(){var r=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(n){delete r._frameId,r.handleEvent(new rY("renderFrame",{timeStamp:n})),r._applyChanges()})},rX.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var rJ=function(n){function i(i,a){n.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=a.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(r,n){return this.jumpTo({center:r},n)},i.prototype.panBy=function(n,i,a){return n=r.Point.convert(n).mult(-1),this.panTo(this.transform.center,r.extend({offset:n},i),a)},i.prototype.panTo=function(n,i,a){return this.easeTo(r.extend({center:n},i),a)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(r,n){return this.jumpTo({zoom:r},n),this},i.prototype.zoomTo=function(n,i,a){return this.easeTo(r.extend({zoom:n},i),a)},i.prototype.zoomIn=function(r,n){return this.zoomTo(this.getZoom()+1,r,n),this},i.prototype.zoomOut=function(r,n){return this.zoomTo(this.getZoom()-1,r,n),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(r,n){return this.jumpTo({bearing:r},n),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(r,n){return this.jumpTo({padding:r},n),this},i.prototype.rotateTo=function(n,i,a){return this.easeTo(r.extend({bearing:n},i),a)},i.prototype.resetNorth=function(n,i){return this.rotateTo(0,r.extend({duration:1e3},n),i),this},i.prototype.resetNorthPitch=function(n,i){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},n),i),this},i.prototype.snapToNorth=function(r,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,n):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(r,n){return this.jumpTo({pitch:r},n),this},i.prototype.cameraForBounds=function(n,i){n=r.LngLatBounds.convert(n);var a=i&&i.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),a,i)},i.prototype._cameraForBoxAndBearing=function(n,i,a,o){var s={top:0,bottom:0,right:0,left:0};if("number"==typeof(o=r.extend({padding:s,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding){var l=o.padding;o.padding={top:l,bottom:l,right:l,left:l}}o.padding=r.extend(s,o.padding);var u=this.transform,c=u.padding,f=u.project(r.LngLat.convert(n)),h=u.project(r.LngLat.convert(i)),p=f.rotate(-a*Math.PI/180),d=h.rotate(-a*Math.PI/180),v=new r.Point(Math.max(p.x,d.x),Math.max(p.y,d.y)),g=new r.Point(Math.min(p.x,d.x),Math.min(p.y,d.y)),y=v.sub(g),m=(u.width-(c.left+c.right+o.padding.left+o.padding.right))/y.x,x=(u.height-(c.top+c.bottom+o.padding.top+o.padding.bottom))/y.y;if(!(x<0||m<0)){var b=Math.min(u.scaleZoom(u.scale*Math.min(m,x)),o.maxZoom),_="number"==typeof o.offset.x?new r.Point(o.offset.x,o.offset.y):r.Point.convert(o.offset),w=(o.padding.left-o.padding.right)/2,T=(o.padding.top-o.padding.bottom)/2,k=new r.Point(w,T).rotate(a*Math.PI/180),A=_.add(k).mult(u.scale/u.zoomScale(b));return{center:u.unproject(f.add(h).div(2).sub(A)),zoom:b,bearing:a}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(r,n,i){return this._fitInternal(this.cameraForBounds(r,n),n,i)},i.prototype.fitScreenCoordinates=function(n,i,a,o,s){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(n)),this.transform.pointLocation(r.Point.convert(i)),a,o),o,s)},i.prototype._fitInternal=function(n,i,a){return n?(delete(i=r.extend(n,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this},i.prototype.jumpTo=function(n,i){this.stop();var a=this.transform,o=!1,s=!1,l=!1;return"zoom"in n&&a.zoom!==+n.zoom&&(o=!0,a.zoom=+n.zoom),void 0!==n.center&&(a.center=r.LngLat.convert(n.center)),"bearing"in n&&a.bearing!==+n.bearing&&(s=!0,a.bearing=+n.bearing),"pitch"in n&&a.pitch!==+n.pitch&&(l=!0,a.pitch=+n.pitch),null==n.padding||a.isPaddingEqual(n.padding)||(a.padding=n.padding),this.fire(new r.Event("movestart",i)).fire(new r.Event("move",i)),o&&this.fire(new r.Event("zoomstart",i)).fire(new r.Event("zoom",i)).fire(new r.Event("zoomend",i)),s&&this.fire(new r.Event("rotatestart",i)).fire(new r.Event("rotate",i)).fire(new r.Event("rotateend",i)),l&&this.fire(new r.Event("pitchstart",i)).fire(new r.Event("pitch",i)).fire(new r.Event("pitchend",i)),this.fire(new r.Event("moveend",i))},i.prototype.easeTo=function(n,i){var a=this;this._stop(!1,n.easeId),(!1===(n=r.extend({offset:[0,0],duration:500,easing:r.ease},n)).animate||!n.essential&&r.browser.prefersReducedMotion)&&(n.duration=0);var o=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),c=this.getPadding(),f="zoom"in n?+n.zoom:s,h="bearing"in n?this._normalizeBearing(n.bearing,l):l,p="pitch"in n?+n.pitch:u,d="padding"in n?n.padding:o.padding,v=r.Point.convert(n.offset),g=o.centerPoint.add(v),y=o.pointLocation(g),m=r.LngLat.convert(n.center||y);this._normalizeCenter(m);var x,b,_=o.project(y),w=o.project(m).sub(_),T=o.zoomScale(f-s);n.around&&(x=r.LngLat.convert(n.around),b=o.locationPoint(x));var k={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||f!==s,this._rotating=this._rotating||l!==h,this._pitching=this._pitching||p!==u,this._padding=!o.isPaddingEqual(d),this._easeId=n.easeId,this._prepareEase(i,n.noMoveStart,k),this._ease(function(n){if(a._zooming&&(o.zoom=r.number(s,f,n)),a._rotating&&(o.bearing=r.number(l,h,n)),a._pitching&&(o.pitch=r.number(u,p,n)),a._padding&&(o.interpolatePadding(c,d,n),g=o.centerPoint.add(v)),x)o.setLocationAtPoint(x,b);else{var y=o.zoomScale(o.zoom-s),m=Math.pow(f>s?Math.min(2,T):Math.max(.5,T),1-n),k=o.unproject(_.add(w.mult(n*m)).mult(y));o.setLocationAtPoint(o.renderWorldCopies?k.wrap():k,g)}a._fireMoveEvents(i)},function(r){a._afterEase(i,r)},n),this},i.prototype._prepareEase=function(n,i,a){void 0===a&&(a={}),this._moving=!0,i||a.moving||this.fire(new r.Event("movestart",n)),this._zooming&&!a.zooming&&this.fire(new r.Event("zoomstart",n)),this._rotating&&!a.rotating&&this.fire(new r.Event("rotatestart",n)),this._pitching&&!a.pitching&&this.fire(new r.Event("pitchstart",n))},i.prototype._fireMoveEvents=function(n){this.fire(new r.Event("move",n)),this._zooming&&this.fire(new r.Event("zoom",n)),this._rotating&&this.fire(new r.Event("rotate",n)),this._pitching&&this.fire(new r.Event("pitch",n))},i.prototype._afterEase=function(n,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var a=this._zooming,o=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,a&&this.fire(new r.Event("zoomend",n)),o&&this.fire(new r.Event("rotateend",n)),s&&this.fire(new r.Event("pitchend",n)),this.fire(new r.Event("moveend",n))}},i.prototype.flyTo=function(n,i){var a=this;if(!n.essential&&r.browser.prefersReducedMotion){var o=r.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,i)}this.stop(),n=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},n);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),f=this.getPadding(),h="zoom"in n?r.clamp(+n.zoom,s.minZoom,s.maxZoom):l,p="bearing"in n?this._normalizeBearing(n.bearing,u):u,d="pitch"in n?+n.pitch:c,v="padding"in n?n.padding:s.padding,g=s.zoomScale(h-l),y=r.Point.convert(n.offset),m=s.centerPoint.add(y),x=s.pointLocation(m),b=r.LngLat.convert(n.center||x);this._normalizeCenter(b);var _=s.project(x),w=s.project(b).sub(_),T=n.curve,k=Math.max(s.width,s.height),A=k/g,M=w.mag();if("minZoom"in n){var S=r.clamp(Math.min(n.minZoom,l,h),s.minZoom,s.maxZoom);T=Math.sqrt(k/s.zoomScale(S-l)/M*2)}var E=T*T;function L(r){var n=(A*A-k*k+(r?-1:1)*E*E*M*M)/(2*(r?A:k)*E*M);return Math.log(Math.sqrt(n*n+1)-n)}function C(r){return(Math.exp(r)-Math.exp(-r))/2}function O(r){return(Math.exp(r)+Math.exp(-r))/2}var P=L(0),I=function(r){return O(P)/O(P+T*r)},D=function(r){var n;return(O(P)*(C(n=P+T*r)/O(n))-C(P))/E*k/M},z=(L(1)-P)/T;if(1e-6>Math.abs(M)||!isFinite(z)){if(1e-6>Math.abs(k-A))return this.easeTo(n,i);var R=A<k?-1:1;z=Math.abs(Math.log(A/k))/T,D=function(){return 0},I=function(r){return Math.exp(R*T*r)}}if("duration"in n)n.duration=+n.duration;else{var F="screenSpeed"in n?+n.screenSpeed/T:+n.speed;n.duration=1e3*z/F}return n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=u!==p,this._pitching=d!==c,this._padding=!s.isPaddingEqual(v),this._prepareEase(i,!1),this._ease(function(n){var o=n*z,g=1/I(o);s.zoom=1===n?h:l+s.scaleZoom(g),a._rotating&&(s.bearing=r.number(u,p,n)),a._pitching&&(s.pitch=r.number(c,d,n)),a._padding&&(s.interpolatePadding(f,v,n),m=s.centerPoint.add(y));var x=1===n?b:s.unproject(_.add(w.mult(D(o))).mult(g));s.setLocationAtPoint(s.renderWorldCopies?x.wrap():x,m),a._fireMoveEvents(i)},function(){return a._afterEase(i)},n),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(r,n){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,n)}if(!r){var a=this.handlers;a&&a.stop(!1)}return this},i.prototype._ease=function(n,i,a){!1===a.animate||0===a.duration?(n(1),i()):(this._easeStart=r.browser.now(),this._easeOptions=a,this._onEaseFrame=n,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var n=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(n,i){var a=Math.abs((n=r.wrap(n,-180,180))-i);return Math.abs(n-360-i)<a&&(n-=360),Math.abs(n+360-i)<a&&(n+=360),n},i.prototype._normalizeCenter=function(r){var n=this.transform;if(n.renderWorldCopies&&!n.lngRange){var i=r.lng-n.center.lng;r.lng+=i>180?-360:i<-180?360:0}},i}(r.Evented),rK=function(n){void 0===n&&(n={}),this.options=n,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};rK.prototype.getDefaultPosition=function(){return"bottom-right"},rK.prototype.onAdd=function(r){var n=this.options&&this.options.compact;return this._map=r,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),n&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===n&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},rK.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},rK.prototype._setElementTitle=function(r,n){var i=this._map._getUIString("AttributionControl."+n);r.title=i,r.setAttribute("aria-label",i)},rK.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},rK.prototype._updateEditLink=function(){var n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(n){var a=i.reduce(function(r,n,a){return n.value&&(r+=n.key+"="+n.value+(a<i.length-1?"&":"")),r},"?");n.href=r.config.FEEDBACK_URL+"/"+a+(this._map._hash?this._map._hash.getHashString(!0):""),n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}},rK.prototype._updateData=function(r){r&&("metadata"===r.sourceDataType||"visibility"===r.sourceDataType||"style"===r.dataType)&&(this._updateAttributions(),this._updateEditLink())},rK.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(function(r){return"string"!=typeof r?"":r})):"string"==typeof this.options.customAttribution&&r.push(this.options.customAttribution)),this._map.style.stylesheet){var n=this._map.style.stylesheet;this.styleOwner=n.owner,this.styleId=n.id}var i=this._map.style.sourceCaches;for(var a in i){var o=i[a];if(o.used){var s=o.getSource();s.attribution&&0>r.indexOf(s.attribution)&&r.push(s.attribution)}}r.sort(function(r,n){return r.length-n.length});var l=(r=r.filter(function(n,i){for(var a=i+1;a<r.length;a++)if(r[a].indexOf(n)>=0)return!1;return!0})).join(" | ");l!==this._attribHTML&&(this._attribHTML=l,r.length?(this._innerContainer.innerHTML=l,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},rK.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var r$=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};r$.prototype.onAdd=function(r){this._map=r,this._container=i.create("div","mapboxgl-ctrl");var n=i.create("a","mapboxgl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://www.mapbox.com/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},r$.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},r$.prototype.getDefaultPosition=function(){return"bottom-left"},r$.prototype._updateLogo=function(r){r&&"metadata"!==r.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},r$.prototype._logoRequired=function(){if(this._map.style){var r=this._map.style.sourceCaches;for(var n in r)if(r[n].getSource().mapbox_logo)return!0;return!1}},r$.prototype._updateCompact=function(){var r=this._container.children;if(r.length){var n=r[0];this._map.getCanvasContainer().offsetWidth<250?n.classList.add("mapboxgl-compact"):n.classList.remove("mapboxgl-compact")}};var rQ=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};rQ.prototype.add=function(r){var n=++this._id;return this._queue.push({callback:r,id:n,cancelled:!1}),n},rQ.prototype.remove=function(r){for(var n=this._currentlyRunning,i=0,a=n?this._queue.concat(n):this._queue;i<a.length;i+=1){var o=a[i];if(o.id===r)return void(o.cancelled=!0)}},rQ.prototype.run=function(r){void 0===r&&(r=0);var n=this._currentlyRunning=this._queue;this._queue=[];for(var i=0;i<n.length;i+=1){var a=n[i];if(!a.cancelled&&(a.callback(r),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},rQ.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var r0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},r1=r.window.HTMLImageElement,r2=r.window.HTMLElement,r3=r.window.ImageBitmap,r5={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},r4=function(a){function o(n){var i=this;if(null!=(n=r.extend({},r5,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>60)throw Error("maxPitch must be less than or equal to 60");var o=new rr(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies);if(a.call(this,o,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._antialias=n.antialias,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new rQ,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},r0,n.locale),this._clickTolerance=n.clickTolerance,this._requestManager=new r.RequestManager(n.transformRequest,n.accessToken),"string"==typeof n.container){if(this._container=r.window.document.getElementById(n.container),!this._container)throw Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof r2))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("moveend",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==r.window&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new rX(this,n);var s="string"==typeof n.hash&&n.hash||void 0;this._hash=n.hash&&new ri(s).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,r.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new rK({customAttribution:n.customAttribution})),this.addControl(new r$,n.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(n){i._update("style"===n.dataType),i.fire(new r.Event(n.dataType+"data",n))}),this.on("dataloading",function(n){i.fire(new r.Event(n.dataType+"dataloading",n))})}a&&(o.__proto__=a),o.prototype=Object.create(a&&a.prototype),o.prototype.constructor=o;var s={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return o.prototype._getMapId=function(){return this._mapId},o.prototype.addControl=function(n,i){if(void 0===i&&(i=n.getDefaultPosition?n.getDefaultPosition():"top-right"),!n||!n.onAdd)return this.fire(new r.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var a=n.onAdd(this);this._controls.push(n);var o=this._controlPositions[i];return -1!==i.indexOf("bottom")?o.insertBefore(a,o.firstChild):o.appendChild(a),this},o.prototype.removeControl=function(n){if(!n||!n.onRemove)return this.fire(new r.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(n);return i>-1&&this._controls.splice(i,1),n.onRemove(this),this},o.prototype.hasControl=function(r){return this._controls.indexOf(r)>-1},o.prototype.resize=function(n){var i=this._containerDimensions(),a=i[0],o=i[1];this._resizeCanvas(a,o),this.transform.resize(a,o),this.painter.resize(a,o);var s=!this._moving;return s&&(this.stop(),this.fire(new r.Event("movestart",n)).fire(new r.Event("move",n))),this.fire(new r.Event("resize",n)),s&&this.fire(new r.Event("moveend",n)),this},o.prototype.getBounds=function(){return this.transform.getBounds()},o.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},o.prototype.setMaxBounds=function(n){return this.transform.setMaxBounds(r.LngLatBounds.convert(n)),this._update()},o.prototype.setMinZoom=function(r){if((r=null==r?-2:r)>=-2&&r<=this.transform.maxZoom)return this.transform.minZoom=r,this._update(),this.getZoom()<r&&this.setZoom(r),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")},o.prototype.getMinZoom=function(){return this.transform.minZoom},o.prototype.setMaxZoom=function(r){if((r=null==r?22:r)>=this.transform.minZoom)return this.transform.maxZoom=r,this._update(),this.getZoom()>r&&this.setZoom(r),this;throw Error("maxZoom must be greater than the current minZoom")},o.prototype.getMaxZoom=function(){return this.transform.maxZoom},o.prototype.setMinPitch=function(r){if((r=null==r?0:r)<0)throw Error("minPitch must be greater than or equal to 0");if(r>=0&&r<=this.transform.maxPitch)return this.transform.minPitch=r,this._update(),this.getPitch()<r&&this.setPitch(r),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")},o.prototype.getMinPitch=function(){return this.transform.minPitch},o.prototype.setMaxPitch=function(r){if((r=null==r?60:r)>60)throw Error("maxPitch must be less than or equal to 60");if(r>=this.transform.minPitch)return this.transform.maxPitch=r,this._update(),this.getPitch()>r&&this.setPitch(r),this;throw Error("maxPitch must be greater than the current minPitch")},o.prototype.getMaxPitch=function(){return this.transform.maxPitch},o.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},o.prototype.setRenderWorldCopies=function(r){return this.transform.renderWorldCopies=r,this._update()},o.prototype.project=function(n){return this.transform.locationPoint(r.LngLat.convert(n))},o.prototype.unproject=function(n){return this.transform.pointLocation(r.Point.convert(n))},o.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},o.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},o.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},o.prototype._createDelegatedListener=function(r,n,i){var a,o=this;if("mouseenter"===r||"mouseover"===r){var s=!1;return{layer:n,listener:i,delegates:{mousemove:function(a){var l=o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[];l.length?s||(s=!0,i.call(o,new rp(r,o,a.originalEvent,{features:l}))):s=!1},mouseout:function(){s=!1}}}}if("mouseleave"===r||"mouseout"===r){var l=!1;return{layer:n,listener:i,delegates:{mousemove:function(a){(o.getLayer(n)?o.queryRenderedFeatures(a.point,{layers:[n]}):[]).length?l=!0:l&&(l=!1,i.call(o,new rp(r,o,a.originalEvent)))},mouseout:function(n){l&&(l=!1,i.call(o,new rp(r,o,n.originalEvent)))}}}}return{layer:n,listener:i,delegates:((a={})[r]=function(r){var a=o.getLayer(n)?o.queryRenderedFeatures(r.point,{layers:[n]}):[];a.length&&(r.features=a,i.call(o,r),delete r.features)},a)}},o.prototype.on=function(r,n,i){if(void 0===i)return a.prototype.on.call(this,r,n);var o=this._createDelegatedListener(r,n,i);for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[r]=this._delegatedListeners[r]||[],this._delegatedListeners[r].push(o),o.delegates)this.on(s,o.delegates[s]);return this},o.prototype.once=function(r,n,i){if(void 0===i)return a.prototype.once.call(this,r,n);var o=this._createDelegatedListener(r,n,i);for(var s in o.delegates)this.once(s,o.delegates[s]);return this},o.prototype.off=function(r,n,i){var o=this;return void 0===i?a.prototype.off.call(this,r,n):(this._delegatedListeners&&this._delegatedListeners[r]&&function(a){for(var s=a[r],l=0;l<s.length;l++){var u=s[l];if(u.layer===n&&u.listener===i){for(var c in u.delegates)o.off(c,u.delegates[c]);return s.splice(l,1),o}}}(this._delegatedListeners),this)},o.prototype.queryRenderedFeatures=function(n,i){if(!this.style)return[];if(void 0!==i||void 0===n||n instanceof r.Point||Array.isArray(n)||(i=n,n=void 0),i=i||{},(n=n||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||"number"==typeof n[0])a=[r.Point.convert(n)];else{var a,o=r.Point.convert(n[0]),s=r.Point.convert(n[1]);a=[o,new r.Point(s.x,o.y),s,new r.Point(o.x,s.y),o]}return this.style.queryRenderedFeatures(a,i,this.transform)},o.prototype.querySourceFeatures=function(r,n){return this.style.querySourceFeatures(r,n)},o.prototype.setStyle=function(n,i){return!1!==(i=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&n?(this._diffStyle(n,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(n,i))},o.prototype._getUIString=function(r){var n=this._locale[r];if(null==n)throw Error("Missing UI string '"+r+"'");return n},o.prototype._updateStyle=function(r,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),r?(this.style=new ey(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof r?this.style.loadURL(r):this.style.loadJSON(r)):delete this.style,this},o.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ey(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},o.prototype._diffStyle=function(n,i){var a=this;if("string"==typeof n){var o=this._requestManager.normalizeStyleURL(n),s=this._requestManager.transformRequest(o,r.ResourceType.Style);r.getJSON(s,function(n,o){n?a.fire(new r.ErrorEvent(n)):o&&a._updateDiff(o,i)})}else"object"==typeof n&&this._updateDiff(n,i)},o.prototype._updateDiff=function(n,i){try{this.style.setState(n)&&this._update(!0)}catch(a){r.warnOnce("Unable to perform style diff: "+(a.message||a.error||a)+".  Rebuilding the style from scratch."),this._updateStyle(n,i)}},o.prototype.getStyle=function(){if(this.style)return this.style.serialize()},o.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},o.prototype.addSource=function(r,n){return this._lazyInitEmptyStyle(),this.style.addSource(r,n),this._update(!0)},o.prototype.isSourceLoaded=function(n){var i=this.style&&this.style.sourceCaches[n];if(void 0!==i)return i.loaded();this.fire(new r.ErrorEvent(Error("There is no source with ID '"+n+"'")))},o.prototype.areTilesLoaded=function(){var r=this.style&&this.style.sourceCaches;for(var n in r){var i=r[n]._tiles;for(var a in i){var o=i[a];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},o.prototype.addSourceType=function(r,n,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(r,n,i)},o.prototype.removeSource=function(r){return this.style.removeSource(r),this._update(!0)},o.prototype.getSource=function(r){return this.style.getSource(r)},o.prototype.addImage=function(n,i,a){void 0===a&&(a={});var o=a.pixelRatio;void 0===o&&(o=1);var s=a.sdf;void 0===s&&(s=!1);var l=a.stretchX,u=a.stretchY,c=a.content;if(this._lazyInitEmptyStyle(),i instanceof r1||r3&&i instanceof r3){var f=r.browser.getImageData(i),h=f.width,p=f.height,d=f.data;this.style.addImage(n,{data:new r.RGBAImage({width:h,height:p},d),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new r.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var v=i.width,g=i.height,y=i.data;this.style.addImage(n,{data:new r.RGBAImage({width:v,height:g},new Uint8Array(y)),pixelRatio:o,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:i}),i.onAdd&&i.onAdd(this,n)}},o.prototype.updateImage=function(n,i){var a=this.style.getImage(n);if(!a)return this.fire(new r.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var o=i instanceof r1||r3&&i instanceof r3?r.browser.getImageData(i):i,s=o.width,l=o.height,u=o.data;return void 0===s||void 0===l?this.fire(new r.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):s!==a.data.width||l!==a.data.height?this.fire(new r.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):void(a.data.replace(u,!(i instanceof r1||r3&&i instanceof r3)),this.style.updateImage(n,a))},o.prototype.hasImage=function(n){return n?!!this.style.getImage(n):(this.fire(new r.ErrorEvent(Error("Missing required image id"))),!1)},o.prototype.removeImage=function(r){this.style.removeImage(r)},o.prototype.loadImage=function(n,i){r.getImage(this._requestManager.transformRequest(n,r.ResourceType.Image),i)},o.prototype.listImages=function(){return this.style.listImages()},o.prototype.addLayer=function(r,n){return this._lazyInitEmptyStyle(),this.style.addLayer(r,n),this._update(!0)},o.prototype.moveLayer=function(r,n){return this.style.moveLayer(r,n),this._update(!0)},o.prototype.removeLayer=function(r){return this.style.removeLayer(r),this._update(!0)},o.prototype.getLayer=function(r){return this.style.getLayer(r)},o.prototype.setLayerZoomRange=function(r,n,i){return this.style.setLayerZoomRange(r,n,i),this._update(!0)},o.prototype.setFilter=function(r,n,i){return void 0===i&&(i={}),this.style.setFilter(r,n,i),this._update(!0)},o.prototype.getFilter=function(r){return this.style.getFilter(r)},o.prototype.setPaintProperty=function(r,n,i,a){return void 0===a&&(a={}),this.style.setPaintProperty(r,n,i,a),this._update(!0)},o.prototype.getPaintProperty=function(r,n){return this.style.getPaintProperty(r,n)},o.prototype.setLayoutProperty=function(r,n,i,a){return void 0===a&&(a={}),this.style.setLayoutProperty(r,n,i,a),this._update(!0)},o.prototype.getLayoutProperty=function(r,n){return this.style.getLayoutProperty(r,n)},o.prototype.setLight=function(r,n){return void 0===n&&(n={}),this._lazyInitEmptyStyle(),this.style.setLight(r,n),this._update(!0)},o.prototype.getLight=function(){return this.style.getLight()},o.prototype.setFeatureState=function(r,n){return this.style.setFeatureState(r,n),this._update()},o.prototype.removeFeatureState=function(r,n){return this.style.removeFeatureState(r,n),this._update()},o.prototype.getFeatureState=function(r){return this.style.getFeatureState(r)},o.prototype.getContainer=function(){return this._container},o.prototype.getCanvasContainer=function(){return this._canvasContainer},o.prototype.getCanvas=function(){return this._canvas},o.prototype._containerDimensions=function(){var r=0,n=0;return this._container&&(r=this._container.clientWidth||400,n=this._container.clientHeight||300),[r,n]},o.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},o.prototype._setupContainer=function(){var r=this._container;r.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",r)).style.visibility="hidden",this._detectMissingCSS();var n=this._canvasContainer=i.create("div","mapboxgl-canvas-container",r);this._interactive&&n.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var a=this._containerDimensions();this._resizeCanvas(a[0],a[1]);var o=this._controlContainer=i.create("div","mapboxgl-control-container",r),s=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(r){s[r]=i.create("div","mapboxgl-ctrl-"+r,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},o.prototype._resizeCanvas=function(n,i){var a=r.browser.devicePixelRatio||1;this._canvas.width=a*n,this._canvas.height=a*i,this._canvas.style.width=n+"px",this._canvas.style.height=i+"px"},o.prototype._setupPainter=function(){var i=r.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);a?(this.painter=new e7(a,this.transform),r.webpSupported.testSupport(a)):this.fire(new r.ErrorEvent(Error("Failed to initialize WebGL")))},o.prototype._contextLost=function(n){n.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:n}))},o.prototype._contextRestored=function(n){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:n}))},o.prototype._onMapScroll=function(r){if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},o.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},o.prototype._update=function(r){return this.style&&(this._styleDirty=this._styleDirty||r,this._sourcesDirty=!0,this.triggerRepaint()),this},o.prototype._requestRenderFrame=function(r){return this._update(),this._renderTaskQueue.add(r)},o.prototype._cancelRenderFrame=function(r){this._renderTaskQueue.remove(r)},o.prototype._render=function(n){var i,a=this,o=0,s=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=s.createQueryEXT(),s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),o=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(n),!this._removed){var l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var u=this.transform.zoom,c=r.browser.now();this.style.zoomHistory.update(u,c);var f=new r.EvaluationParameters(u,{now:c,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),h=f.crossFadingFactor();1===h&&h===this._crossFadingFactor||(l=!0,this._crossFadingFactor=h),this.style.update(f)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var p=r.browser.now()-o;s.endQueryEXT(s.TIME_ELAPSED_EXT,i),setTimeout(function(){var n=s.getQueryObjectEXT(i,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(i),a.fire(new r.Event("gpu-timing-frame",{cpuTime:p,gpuTime:n}))},50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout(function(){var n=a.painter.queryGpuTimers(d);a.fire(new r.Event("gpu-timing-layer",{layerTimes:n}))},50)}var v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0),this}},o.prototype.remove=function(){this._hash&&this._hash.remove();for(var n=0,i=this._controls;n<i.length;n+=1)i[n].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==r.window&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext&&a.loseContext(),r6(this._canvasContainer),r6(this._controlContainer),r6(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},o.prototype.triggerRepaint=function(){var n=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(r){n._frame=null,n._render(r)}))},o.prototype._onWindowOnline=function(){this._update()},o.prototype._onWindowResize=function(r){this._trackResize&&this.resize({originalEvent:r})._update()},s.showTileBoundaries.get=function(){return!!this._showTileBoundaries},s.showTileBoundaries.set=function(r){this._showTileBoundaries!==r&&(this._showTileBoundaries=r,this._update())},s.showPadding.get=function(){return!!this._showPadding},s.showPadding.set=function(r){this._showPadding!==r&&(this._showPadding=r,this._update())},s.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},s.showCollisionBoxes.set=function(r){this._showCollisionBoxes!==r&&(this._showCollisionBoxes=r,r?this.style._generateCollisionBoxes():this._update())},s.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},s.showOverdrawInspector.set=function(r){this._showOverdrawInspector!==r&&(this._showOverdrawInspector=r,this._update())},s.repaint.get=function(){return!!this._repaint},s.repaint.set=function(r){this._repaint!==r&&(this._repaint=r,this.triggerRepaint())},s.vertices.get=function(){return!!this._vertices},s.vertices.set=function(r){this._vertices=r,this._update()},o.prototype._setCacheLimits=function(n,i){r.setCacheLimits(n,i)},s.version.get=function(){return r.version},Object.defineProperties(o.prototype,s),o}(rJ);function r6(r){r.parentNode&&r.parentNode.removeChild(r)}var r8={showCompass:!0,showZoom:!0,visualizePitch:!1},r7=function(n){var a=this;this.options=r.extend({},r8,n),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(r){return r.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(r){return a._map.zoomIn({},{originalEvent:r})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(r){return a._map.zoomOut({},{originalEvent:r})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(r){a.options.visualizePitch?a._map.resetNorthPitch({},{originalEvent:r}):a._map.resetNorth({},{originalEvent:r})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};r7.prototype._updateZoomButtons=function(){var r=this._map.getZoom(),n=r===this._map.getMaxZoom(),i=r===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},r7.prototype._rotateCompassArrow=function(){var r=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=r},r7.prototype.onAdd=function(r){return this._map=r,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new r9(this._map,this._compass,this.options.visualizePitch)),this._container},r7.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},r7.prototype._createButton=function(r,n){var a=i.create("button",r,this._container);return a.type="button",a.addEventListener("click",n),a},r7.prototype._setButtonTitle=function(r,n){var i=this._map._getUIString("NavigationControl."+n);r.title=i,r.setAttribute("aria-label",i)};var r9=function(n,a,o){void 0===o&&(o=!1),this._clickTolerance=10,this.element=a,this.mouseRotate=new rM({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,o&&(this.mousePitch=new rS({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(a,"mousedown",this.mousedown),i.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(a,"touchmove",this.touchmove),i.addEventListener(a,"touchend",this.touchend),i.addEventListener(a,"touchcancel",this.reset)};function nt(n,i,a){if(n=new r.LngLat(n.lng,n.lat),i){var o=new r.LngLat(n.lng-360,n.lat),s=new r.LngLat(n.lng+360,n.lat),l=a.locationPoint(n).distSqr(i);a.locationPoint(o).distSqr(i)<l?n=o:a.locationPoint(s).distSqr(i)<l&&(n=s)}for(;Math.abs(n.lng-a.center.lng)>180;){var u=a.locationPoint(n);if(u.x>=0&&u.y>=0&&u.x<=a.width&&u.y<=a.height)break;n.lng>a.center.lng?n.lng-=360:n.lng+=360}return n}r9.prototype.down=function(r,n){this.mouseRotate.mousedown(r,n),this.mousePitch&&this.mousePitch.mousedown(r,n),i.disableDrag()},r9.prototype.move=function(r,n){var i=this.map,a=this.mouseRotate.mousemoveWindow(r,n);if(a&&a.bearingDelta&&i.setBearing(i.getBearing()+a.bearingDelta),this.mousePitch){var o=this.mousePitch.mousemoveWindow(r,n);o&&o.pitchDelta&&i.setPitch(i.getPitch()+o.pitchDelta)}},r9.prototype.off=function(){var r=this.element;i.removeEventListener(r,"mousedown",this.mousedown),i.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(r,"touchmove",this.touchmove),i.removeEventListener(r,"touchend",this.touchend),i.removeEventListener(r,"touchcancel",this.reset),this.offTemp()},r9.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(r.window,"mousemove",this.mousemove),i.removeEventListener(r.window,"mouseup",this.mouseup)},r9.prototype.mousedown=function(n){this.down(r.extend({},n,{ctrlKey:!0,preventDefault:function(){return n.preventDefault()}}),i.mousePos(this.element,n)),i.addEventListener(r.window,"mousemove",this.mousemove),i.addEventListener(r.window,"mouseup",this.mouseup)},r9.prototype.mousemove=function(r){this.move(r,i.mousePos(this.element,r))},r9.prototype.mouseup=function(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()},r9.prototype.touchstart=function(r){1!==r.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return r.preventDefault()}},this._startPos))},r9.prototype.touchmove=function(r){1!==r.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:function(){return r.preventDefault()}},this._lastPos))},r9.prototype.touchend=function(r){0===r.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},r9.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ne={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function nr(r,n,i){var a=r.classList;for(var o in ne)a.remove("mapboxgl-"+i+"-anchor-"+o);a.add("mapboxgl-"+i+"-anchor-"+n)}var nn,ni=function(n){function a(a,o){if(n.call(this),(a instanceof r.window.HTMLElement||o)&&(a=r.extend({element:a},o)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&"auto"!==a.pitchAlignment?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=r.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var s=i.createNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height","41px"),s.setAttributeNS(null,"width","27px"),s.setAttributeNS(null,"viewBox","0 0 27 41");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"stroke","none"),l.setAttributeNS(null,"stroke-width","1"),l.setAttributeNS(null,"fill","none"),l.setAttributeNS(null,"fill-rule","evenodd");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var c=i.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"transform","translate(3.0, 29.0)"),c.setAttributeNS(null,"fill","#000000");for(var f=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];f<h.length;f+=1){var p=h[f],d=i.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",p.rx),d.setAttributeNS(null,"ry",p.ry),c.appendChild(d)}var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"fill",this._color);var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),v.appendChild(g);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(m);var x=i.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"transform","translate(6.0, 7.0)"),x.setAttributeNS(null,"fill","#FFFFFF");var b=i.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=i.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var w=i.createNS("http://www.w3.org/2000/svg","circle");w.setAttributeNS(null,"fill","#FFFFFF"),w.setAttributeNS(null,"cx","5.5"),w.setAttributeNS(null,"cy","5.5"),w.setAttributeNS(null,"r","5.4999962"),b.appendChild(_),b.appendChild(w),u.appendChild(c),u.appendChild(v),u.appendChild(y),u.appendChild(x),u.appendChild(b),s.appendChild(u),s.setAttributeNS(null,"height",41*this._scale+"px"),s.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(s),this._offset=r.Point.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(r){r.preventDefault()}),this._element.addEventListener("mousedown",function(r){r.preventDefault()}),nr(this._element,this._anchor,"marker"),this._popup=null}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.addTo=function(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(n){return this._lngLat=r.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){var n=Math.sqrt(91.125);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[n,-1*(24.6+n)],"bottom-right":[-n,-1*(24.6+n)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},a.prototype._onKeyPress=function(r){var n=r.code,i=r.charCode||r.keyCode;"Space"!==n&&"Enter"!==n&&32!==i&&13!==i||this.togglePopup()},a.prototype._onMapClick=function(r){var n=r.originalEvent.target,i=this._element;this._popup&&(n===i||i.contains(n))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var r=this._popup;return r&&(r.isOpen()?r.remove():r.addTo(this._map)),this},a.prototype._update=function(r){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=nt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var n="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?n="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(n="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var a="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?a="rotateX(0deg)":"map"===this._pitchAlignment&&(a="rotateX("+this._map.getPitch()+"deg)"),r&&"moveend"!==r.type||(this._pos=this._pos.round()),i.setTransform(this._element,ne[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+a+" "+n)}},a.prototype.getOffset=function(){return this._offset},a.prototype.setOffset=function(n){return this._offset=r.Point.convert(n),this._update(),this},a.prototype._onMove=function(n){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))},a.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new r.Event("dragend")),this._state="inactive"},a.prototype._addDragHandler=function(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},a.prototype.setDraggable=function(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},a.prototype.isDraggable=function(){return this._draggable},a.prototype.setRotation=function(r){return this._rotation=r||0,this._update(),this},a.prototype.getRotation=function(){return this._rotation},a.prototype.setRotationAlignment=function(r){return this._rotationAlignment=r||"auto",this._update(),this},a.prototype.getRotationAlignment=function(){return this._rotationAlignment},a.prototype.setPitchAlignment=function(r){return this._pitchAlignment=r&&"auto"!==r?r:this._rotationAlignment,this._update(),this},a.prototype.getPitchAlignment=function(){return this._pitchAlignment},a}(r.Evented),na={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},no=0,ns=!1,nl=function(n){function a(i){n.call(this),this.options=r.extend({},na,i),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.onAdd=function(n){var a;return this._map=n,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),a=this._setupUI,void 0!==nn?a(nn):void 0!==r.window.navigator.permissions?r.window.navigator.permissions.query({name:"geolocation"}).then(function(r){a(nn="denied"!==r.state)}):a(nn=!!r.window.navigator.geolocation),this._container},a.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,no=0,ns=!1},a.prototype._isOutOfMapMaxBounds=function(r){var n=this._map.getMaxBounds(),i=r.coords;return n&&(i.longitude<n.getWest()||i.longitude>n.getEast()||i.latitude<n.getSouth()||i.latitude>n.getNorth())},a.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},a.prototype._onSuccess=function(n){if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(n),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",n)),this._finish()}},a.prototype._updateCamera=function(n){var i=new r.LngLat(n.coords.longitude,n.coords.latitude),a=n.coords.accuracy,o=this._map.getBearing(),s=r.extend({bearing:o},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(a),s,{geolocateSource:!0})},a.prototype._updateMarker=function(n){if(n){var i=new r.LngLat(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},a.prototype._updateCircleRadius=function(){var r=this._map._container.clientHeight/2,n=this._map.unproject([0,r]),i=this._map.unproject([1,r]),a=n.distanceTo(i),o=Math.ceil(2*this._accuracy/a);this._circleElement.style.width=o+"px",this._circleElement.style.height=o+"px"},a.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},a.prototype._onError=function(n){if(this._map){if(this.options.trackUserLocation){if(1===n.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===n.code&&ns)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",n)),this._finish()}},a.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},a.prototype._setupUI=function(n){var a=this;if(this._container.addEventListener("contextmenu",function(r){return r.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===n){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{var s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ni(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ni({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(n){var i=n.originalEvent&&"resize"===n.originalEvent.type;n.geolocateSource||"ACTIVE_LOCK"!==a._watchState||i||(a._watchState="BACKGROUND",a._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),a._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),a.fire(new r.Event("trackuserlocationend")))})},a.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":no--,ns=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var n;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++no>1?(n={maximumAge:6e5,timeout:0},ns=!0):(n=this.options.positionOptions,ns=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,n)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},a.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},a}(r.Evented),nu={maxWidth:100,unit:"metric"},nc=function(n){this.options=r.extend({},nu,n),r.bindAll(["_onMove","setUnit"],this)};function nf(r,n,i){var a=i&&i.maxWidth||100,o=r._container.clientHeight/2,s=r.unproject([0,o]),l=r.unproject([a,o]),u=s.distanceTo(l);if(i&&"imperial"===i.unit){var c=3.2808*u;c>5280?nh(n,a,c/5280,r._getUIString("ScaleControl.Miles")):nh(n,a,c,r._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?nh(n,a,u/1852,r._getUIString("ScaleControl.NauticalMiles")):u>=1e3?nh(n,a,u/1e3,r._getUIString("ScaleControl.Kilometers")):nh(n,a,u,r._getUIString("ScaleControl.Meters"))}function nh(r,n,i,a){var o,s,l,u=(s=Math.pow(10,(""+Math.floor(i)).length-1))*((l=i/s)>=10?10:l>=5?5:l>=3?3:l>=2?2:l>=1?1:(o=Math.pow(10,Math.ceil(-Math.log(l)/Math.LN10)),Math.round(l*o)/o));r.style.width=u/i*n+"px",r.innerHTML=u+"&nbsp;"+a}nc.prototype.getDefaultPosition=function(){return"bottom-left"},nc.prototype._onMove=function(){nf(this._map,this._container,this.options)},nc.prototype.onAdd=function(r){return this._map=r,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",r.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},nc.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},nc.prototype.setUnit=function(r){this.options.unit=r,nf(this._map,this._container,this.options)};var np=function(n){this._fullscreen=!1,n&&n.container&&(n.container instanceof r.window.HTMLElement?this._container=n.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};np.prototype.onAdd=function(n){return this._map=n,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},np.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},np.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},np.prototype._setupUI=function(){var n=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",n).setAttribute("aria-hidden",!0),n.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},np.prototype._updateTitle=function(){var r=this._getTitle();this._fullscreenButton.setAttribute("aria-label",r),this._fullscreenButton.title=r},np.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},np.prototype._isFullscreen=function(){return this._fullscreen},np.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},np.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var nd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},nv=function(n){function a(i){n.call(this),this.options=r.extend(Object.create(nd),i),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.addTo=function(n){return this._map&&this.remove(),this._map=n,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},a.prototype.isOpen=function(){return!!this._map},a.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(n){return this._lngLat=r.LngLat.convert(n),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},a.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},a.prototype.getElement=function(){return this._container},a.prototype.setText=function(n){return this.setDOMContent(r.window.document.createTextNode(n))},a.prototype.setHTML=function(n){var i,a=r.window.document.createDocumentFragment(),o=r.window.document.createElement("body");for(o.innerHTML=n;i=o.firstChild;)a.appendChild(i);return this.setDOMContent(a)},a.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},a.prototype.setMaxWidth=function(r){return this.options.maxWidth=r,this._update(),this},a.prototype.setDOMContent=function(r){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(r),this._createCloseButton(),this._update(),this._focusFirstElement(),this},a.prototype.addClassName=function(r){this._container&&this._container.classList.add(r)},a.prototype.removeClassName=function(r){this._container&&this._container.classList.remove(r)},a.prototype.setOffset=function(r){return this.options.offset=r,this._update(),this},a.prototype.toggleClassName=function(r){if(this._container)return this._container.classList.toggle(r)},a.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},a.prototype._onMouseUp=function(r){this._update(r.point)},a.prototype._onMouseMove=function(r){this._update(r.point)},a.prototype._onDrag=function(r){this._update(r.point)},a.prototype._update=function(n){var a=this,o=this._lngLat||this._trackPointer;if(this._map&&o&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(r){return a._container.classList.add(r)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||n)){var s=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat),l=this.options.anchor,u=function n(i){if(i){if("number"==typeof i){var a=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new r.Point(0,0),top:new r.Point(0,i),"top-left":new r.Point(a,a),"top-right":new r.Point(-a,a),bottom:new r.Point(0,-i),"bottom-left":new r.Point(a,-a),"bottom-right":new r.Point(-a,-a),left:new r.Point(i,0),right:new r.Point(-i,0)}}if(i instanceof r.Point||Array.isArray(i)){var o=r.Point.convert(i);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:r.Point.convert(i.center||[0,0]),top:r.Point.convert(i.top||[0,0]),"top-left":r.Point.convert(i["top-left"]||[0,0]),"top-right":r.Point.convert(i["top-right"]||[0,0]),bottom:r.Point.convert(i.bottom||[0,0]),"bottom-left":r.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(i["bottom-right"]||[0,0]),left:r.Point.convert(i.left||[0,0]),right:r.Point.convert(i.right||[0,0])}}return n(new r.Point(0,0))}(this.options.offset);if(!l){var c,f=this._container.offsetWidth,h=this._container.offsetHeight;c=s.y+u.bottom.y<h?["top"]:s.y>this._map.transform.height-h?["bottom"]:[],s.x<f/2?c.push("left"):s.x>this._map.transform.width-f/2&&c.push("right"),l=0===c.length?"bottom":c.join("-")}var p=s.add(u[l]).round();i.setTransform(this._container,ne[l]+" translate("+p.x+"px,"+p.y+"px)"),nr(this._container,l,"popup")}},a.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var r=this._container.querySelector("a[href], [tabindex]:not([tabindex='-1']), [contenteditable]:not([contenteditable='false']), button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])");r&&r.focus()}},a.prototype._onClose=function(){this.remove()},a}(r.Evented),ng={version:r.version,supported:n,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:r4,NavigationControl:r7,GeolocateControl:nl,AttributionControl:rK,ScaleControl:nc,FullscreenControl:np,Popup:nv,Marker:ni,Style:ey,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){tD().acquire(tC)},clearPrewarmedResources:function(){var r=tP;r&&(r.isPreloaded()&&1===r.numActive()?(r.release(tC),tP=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(e){r.config.ACCESS_TOKEN=e},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(e){r.config.API_URL=e},get workerCount(){return tO.workerCount},set workerCount(t){tO.workerCount=t},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){r.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(n){r.clearTileCache(n)},workerUrl:""};return ng}),i}()},88294:function(r,n,i){"use strict";r.exports=i(62849)},62849:function(r,n,i){"use strict";var a=i(91358),o=i(53435),s=i(18863),l=i(21527),u=i(71299),c=i(46775),f=i(30120),h=i(64941),p=i(90660),d=i(27084);function v(r,n){for(var i=n[0],a=n[1],s=1/(n[2]-i),l=1/(n[3]-a),u=Array(r.length),c=0,f=r.length/2;c<f;c++)u[2*c]=o((r[2*c]-i)*s,0,1),u[2*c+1]=o((r[2*c+1]-a)*l,0,1);return u}r.exports=function(r,n){n||(n={}),r=f(r,"float64");var i=c((n=u(n,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"})).maxDepth,255),o=c(n.bounds,l(r,2));o[0]===o[2]&&o[2]++,o[1]===o[3]&&o[3]++;var g,y=v(r,o),m=r.length>>>1;n.dtype||(n.dtype="array"),"string"==typeof n.dtype?g=new(p(n.dtype))(m):n.dtype&&Array.isArray(g=n.dtype)&&(g.length=m);for(var x=0;x<m;++x)g[x]=x;var b=[],_=[],w=[],T=[];!function r(n,a,o,s,l,u){if(!s.length)return null;var c=b[l]||(b[l]=[]),f=w[l]||(w[l]=[]),h=_[l]||(_[l]=[]),p=c.length;if(++l>i||u>1073741824){for(var d=0;d<s.length;d++)c.push(s[d]),f.push(u),h.push(null,null,null,null);return p}if(c.push(s[0]),f.push(u),s.length<=1)return h.push(null,null,null,null),p;for(var v=.5*o,g=n+v,m=a+v,x=[],T=[],k=[],A=[],M=1,S=s.length;M<S;M++){var E=s[M],L=y[2*E],C=y[2*E+1];L<g?C<m?x.push(E):T.push(E):C<m?k.push(E):A.push(E)}return u<<=2,h.push(r(n,a,v,x,l,u),r(n,m,v,T,l,u+1),r(g,a,v,k,l,u+2),r(g,m,v,A,l,u+3)),p}(0,0,1,g,0,1);for(var k=0,A=0;A<b.length;A++){var M=b[A];if(g.set)g.set(M,k);else for(var S=0,E=M.length;S<E;S++)g[S+k]=M[S];var L=k+b[A].length;T[A]=[k,L],k=L}return g.range=function(){for(var n,i=[],l=arguments.length;l--;)i[l]=arguments[l];if(h(i[i.length-1])){var f=i.pop();i.length||null==f.x&&null==f.l&&null==f.left||(i=[f],n={}),n=u(f,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else n={};i.length||(i=o);var p,g=s.apply(void 0,i),y=[Math.min(g.x,g.x+g.width),Math.min(g.y,g.y+g.height),Math.max(g.x,g.x+g.width),Math.max(g.y,g.y+g.height)],m=y[0],x=y[1],k=y[2],A=y[3],M=v([m,x,k,A],o),S=M[0],E=M[1],L=M[2],O=M[3],P=c(n.level,b.length);if(null!=n.d&&("number"==typeof n.d?p=[n.d,n.d]:n.d.length&&(p=n.d),P=Math.min(Math.max(Math.ceil(-d(Math.abs(p[0])/(o[2]-o[0]))),Math.ceil(-d(Math.abs(p[1])/(o[3]-o[1])))),P)),P=Math.min(P,b.length),n.lod)return function(r,n,i,o,s){for(var l=[],u=0;u<s;u++){var c=w[u],f=T[u][0],h=C(r,n,u),p=C(i,o,u),d=a.ge(c,h),v=a.gt(c,p,d,c.length-1);l[u]=[d+f,v+f]}return l}(S,E,L,O,P);var I=[];return function n(i,a,o,s,l,u){if(null!==l&&null!==u&&!(S>i+o||E>a+o||L<i||O<a||s>=P||l===u)){var c=b[s];void 0===u&&(u=c.length);for(var f=l;f<u;f++){var h=c[f],p=r[2*h],d=r[2*h+1];p>=m&&p<=k&&d>=x&&d<=A&&I.push(h)}var v=_[s],g=v[4*l+0],y=v[4*l+1],w=v[4*l+2],T=v[4*l+3],M=function(r,n){for(var i=null,a=0;null===i;)if(i=r[4*n+a],++a>r.length)return null;return i}(v,l+1),C=.5*o,D=s+1;n(i,a,C,D,g,y||w||T||M),n(i,a+C,C,D,y,w||T||M),n(i+C,a,C,D,w,T||M),n(i+C,a+C,C,D,T,M)}}(0,0,1,0,0,1),I},g;function C(r,n,i){for(var a=1,o=.5,s=.5,l=.5,u=0;u<i;u++)a<<=2,a+=r<o?n<s?0:1:n<s?2:3,l*=.5,o+=r<o?-l:l,s+=n<s?-l:l;return a}}},30774:function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i(60302);function o(r){var n=0;if(r&&r.length>0){n+=Math.abs(s(r[0]));for(var i=1;i<r.length;i++)n-=Math.abs(s(r[i]))}return n}function s(r){var n,i,a,o,s,u,c=0,f=r.length;if(f>2){for(u=0;u<f;u++)u===f-2?(a=f-2,o=f-1,s=0):u===f-1?(a=f-1,o=0,s=1):(a=u,o=u+1,s=u+2),n=r[a],i=r[o],c+=(l(r[s][0])-l(n[0]))*Math.sin(l(i[1]));c=40680631590769*c/2}return c}function l(r){return r*Math.PI/180}n.default=function(r){return a.geomReduce(r,function(r,n){return r+function(r){var n,i=0;switch(r.type){case"Polygon":return o(r.coordinates);case"MultiPolygon":for(n=0;n<r.coordinates.length;n++)i+=o(r.coordinates[n]);return i}return 0}(n)},0)}},23132:function(r,n){"use strict";function i(r,n,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=r,a}function a(r,n,a){if(void 0===a&&(a={}),!r)throw Error("coordinates is required");if(!Array.isArray(r))throw Error("coordinates must be an Array");if(r.length<2)throw Error("coordinates must be at least 2 numbers long");if(!v(r[0])||!v(r[1]))throw Error("coordinates must contain numbers");return i({type:"Point",coordinates:r},n,a)}function o(r,n,a){void 0===a&&(a={});for(var o=0;o<r.length;o++){var s=r[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:r},n,a)}function s(r,n,a){if(void 0===a&&(a={}),r.length<2)throw Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:r},n,a)}function l(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function u(r,n,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:r},n,a)}function c(r,n,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:r},n,a)}function f(r,n,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:r},n,a)}function h(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r*a}function p(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r/a}function d(r){return r%(2*Math.PI)*180/Math.PI}function v(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:1.0936*n.earthRadius},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1.0936133},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=i,n.geometry=function(r,n,i){switch(void 0===i&&(i={}),r){case"Point":return a(n).geometry;case"LineString":return s(n).geometry;case"Polygon":return o(n).geometry;case"MultiPoint":return c(n).geometry;case"MultiLineString":return u(n).geometry;case"MultiPolygon":return f(n).geometry;default:throw Error(r+" is invalid")}},n.point=a,n.points=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return a(r,n)}),i)},n.polygon=o,n.polygons=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return o(r,n)}),i)},n.lineString=s,n.lineStrings=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return s(r,n)}),i)},n.featureCollection=l,n.multiLineString=u,n.multiPoint=c,n.multiPolygon=f,n.geometryCollection=function(r,n,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:r},n,a)},n.round=function(r,n){if(void 0===n&&(n=0),n&&!(n>=0))throw Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(r*i)/i},n.radiansToLength=h,n.lengthToRadians=p,n.lengthToDegrees=function(r,n){return d(p(r,n))},n.bearingToAzimuth=function(r){var n=r%360;return n<0&&(n+=360),n},n.radiansToDegrees=d,n.degreesToRadians=function(r){return r%360*Math.PI/180},n.convertLength=function(r,n,i){if(void 0===n&&(n="kilometers"),void 0===i&&(i="kilometers"),!(r>=0))throw Error("length must be a positive number");return h(p(r,n),i)},n.convertArea=function(r,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(r>=0))throw Error("area must be a positive number");var o=n.areaFactors[i];if(!o)throw Error("invalid original units");var s=n.areaFactors[a];if(!s)throw Error("invalid final units");return r/o*s},n.isNumber=v,n.isObject=function(r){return!!r&&r.constructor===Object},n.validateBBox=function(r){if(!r)throw Error("bbox is required");if(!Array.isArray(r))throw Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!v(r))throw Error("bbox must only contain numbers")})},n.validateId=function(r){if(!r)throw Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string")}},60302:function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i(23132);function o(r,n,i){if(null!==r)for(var a,s,l,u,c,f,h,p,d=0,v=0,g=r.type,y="FeatureCollection"===g,m="Feature"===g,x=y?r.features.length:1,b=0;b<x;b++){c=(p=!!(h=y?r.features[b].geometry:m?r.geometry:r)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<c;_++){var w=0,T=0;if(null!==(u=p?h.geometries[_]:h)){f=u.coordinates;var k=u.type;switch(d=i&&("Polygon"===k||"MultiPolygon"===k)?1:0,k){case null:break;case"Point":if(!1===n(f,v,b,w,T))return!1;v++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===n(f[a],v,b,w,T))return!1;v++,"MultiPoint"===k&&w++}"LineString"===k&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++){if(!1===n(f[a][s],v,b,w,T))return!1;v++}"MultiLineString"===k&&w++,"Polygon"===k&&T++}"Polygon"===k&&w++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(T=0,s=0;s<f[a].length;s++){for(l=0;l<f[a][s].length-d;l++){if(!1===n(f[a][s][l],v,b,w,T))return!1;v++}T++}w++}break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===o(u.geometries[a],n,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function s(r,n){var i;switch(r.type){case"FeatureCollection":for(i=0;i<r.features.length&&!1!==n(r.features[i].properties,i);i++);break;case"Feature":n(r.properties,0)}}function l(r,n){if("Feature"===r.type)n(r,0);else if("FeatureCollection"===r.type)for(var i=0;i<r.features.length&&!1!==n(r.features[i],i);i++);}function u(r,n){var i,a,o,s,l,u,c,f,h,p,d=0,v="FeatureCollection"===r.type,g="Feature"===r.type,y=v?r.features.length:1;for(i=0;i<y;i++){for(u=v?r.features[i].geometry:g?r.geometry:r,f=v?r.features[i].properties:g?r.properties:{},h=v?r.features[i].bbox:g?r.bbox:void 0,p=v?r.features[i].id:g?r.id:void 0,l=(c=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<l;o++)if(null!==(s=c?u.geometries[o]:u))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(s,d,f,h,p))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===n(s.geometries[a],d,f,h,p))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===n(null,d,f,h,p))return!1;d++}}function c(r,n){u(r,function(r,i,o,s,l){var u,c=null===r?null:r.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==n(a.feature(r,o,{bbox:s,id:l}),i,0)&&void 0}switch(c){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var f=0;f<r.coordinates.length;f++){var h={type:u,coordinates:r.coordinates[f]};if(!1===n(a.feature(h,o),i,f))return!1}})}function f(r,n){c(r,function(r,i,s){var l=0;if(r.geometry){var u=r.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var c,f=0,h=0,p=0;return!1!==o(r,function(o,u,d,v,g){return void 0===c||i>f||v>h||g>p?(c=o,f=i,h=v,p=g,void(l=0)):!1!==n(a.lineString([c,o],r.properties),i,s,g,l)&&void(l++,c=o)})&&void 0}}})}function h(r,n){if(!r)throw Error("geojson is required");c(r,function(r,i,o){if(null!==r.geometry){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(!1===n(r,i,o,0,0))return!1;break;case"Polygon":for(var u=0;u<l.length;u++)if(!1===n(a.lineString(l[u],r.properties),i,o,u))return!1}}})}n.coordEach=o,n.coordReduce=function(r,n,i,a){var s=i;return o(r,function(r,a,o,l,u){s=0===a&&void 0===i?r:n(s,r,a,o,l,u)},a),s},n.propEach=s,n.propReduce=function(r,n,i){var a=i;return s(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.featureEach=l,n.featureReduce=function(r,n,i){var a=i;return l(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.coordAll=function(r){var n=[];return o(r,function(r){n.push(r)}),n},n.geomEach=u,n.geomReduce=function(r,n,i){var a=i;return u(r,function(r,o,s,l,u){a=0===o&&void 0===i?r:n(a,r,o,s,l,u)}),a},n.flattenEach=c,n.flattenReduce=function(r,n,i){var a=i;return c(r,function(r,o,s){a=0===o&&0===s&&void 0===i?r:n(a,r,o,s)}),a},n.segmentEach=f,n.segmentReduce=function(r,n,i){var a=i,o=!1;return f(r,function(r,s,l,u,c){a=!1===o&&void 0===i?r:n(a,r,s,l,u,c),o=!0}),a},n.lineEach=h,n.lineReduce=function(r,n,i){var a=i;return h(r,function(r,o,s,l){a=0===o&&void 0===i?r:n(a,r,o,s,l)}),a},n.findSegment=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,u=n.segmentIndex||0,c=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),c=c||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":c=c||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=f.length+u-1),a.lineString([f[u],f[u+1]],c,n);case"Polygon":return l<0&&(l=f.length+l),u<0&&(u=f[l].length+u-1),a.lineString([f[l][u],f[l][u+1]],c,n);case"MultiLineString":return s<0&&(s=f.length+s),u<0&&(u=f[s].length+u-1),a.lineString([f[s][u],f[s][u+1]],c,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),u<0&&(u=f[s][l].length-u-1),a.lineString([f[s][l][u],f[s][l][u+1]],c,n)}throw Error("geojson is invalid")},n.findPoint=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,u=n.coordIndex||0,c=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),c=c||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":c=c||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":return a.point(f,c,n);case"MultiPoint":return s<0&&(s=f.length+s),a.point(f[s],c,n);case"LineString":return u<0&&(u=f.length+u),a.point(f[u],c,n);case"Polygon":return l<0&&(l=f.length+l),u<0&&(u=f[l].length+u),a.point(f[l][u],c,n);case"MultiLineString":return s<0&&(s=f.length+s),u<0&&(u=f[s].length+u),a.point(f[s][u],c,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),u<0&&(u=f[s][l].length-u),a.point(f[s][l][u],c,n)}throw Error("geojson is invalid")}},85268:function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i(27138);function o(r){var n=[1/0,1/0,-1/0,-1/0];return a.coordEach(r,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}o.default=o,n.default=o},94228:function(r,n){"use strict";function i(r,n,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=r,a}function a(r,n,a){if(void 0===a&&(a={}),!r)throw Error("coordinates is required");if(!Array.isArray(r))throw Error("coordinates must be an Array");if(r.length<2)throw Error("coordinates must be at least 2 numbers long");if(!v(r[0])||!v(r[1]))throw Error("coordinates must contain numbers");return i({type:"Point",coordinates:r},n,a)}function o(r,n,a){void 0===a&&(a={});for(var o=0;o<r.length;o++){var s=r[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:r},n,a)}function s(r,n,a){if(void 0===a&&(a={}),r.length<2)throw Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:r},n,a)}function l(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function u(r,n,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:r},n,a)}function c(r,n,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:r},n,a)}function f(r,n,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:r},n,a)}function h(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r*a}function p(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r/a}function d(r){return r%(2*Math.PI)*180/Math.PI}function v(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:1.0936*n.earthRadius},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1.0936133},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=i,n.geometry=function(r,n,i){switch(void 0===i&&(i={}),r){case"Point":return a(n).geometry;case"LineString":return s(n).geometry;case"Polygon":return o(n).geometry;case"MultiPoint":return c(n).geometry;case"MultiLineString":return u(n).geometry;case"MultiPolygon":return f(n).geometry;default:throw Error(r+" is invalid")}},n.point=a,n.points=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return a(r,n)}),i)},n.polygon=o,n.polygons=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return o(r,n)}),i)},n.lineString=s,n.lineStrings=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return s(r,n)}),i)},n.featureCollection=l,n.multiLineString=u,n.multiPoint=c,n.multiPolygon=f,n.geometryCollection=function(r,n,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:r},n,a)},n.round=function(r,n){if(void 0===n&&(n=0),n&&!(n>=0))throw Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(r*i)/i},n.radiansToLength=h,n.lengthToRadians=p,n.lengthToDegrees=function(r,n){return d(p(r,n))},n.bearingToAzimuth=function(r){var n=r%360;return n<0&&(n+=360),n},n.radiansToDegrees=d,n.degreesToRadians=function(r){return r%360*Math.PI/180},n.convertLength=function(r,n,i){if(void 0===n&&(n="kilometers"),void 0===i&&(i="kilometers"),!(r>=0))throw Error("length must be a positive number");return h(p(r,n),i)},n.convertArea=function(r,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(r>=0))throw Error("area must be a positive number");var o=n.areaFactors[i];if(!o)throw Error("invalid original units");var s=n.areaFactors[a];if(!s)throw Error("invalid final units");return r/o*s},n.isNumber=v,n.isObject=function(r){return!!r&&r.constructor===Object},n.validateBBox=function(r){if(!r)throw Error("bbox is required");if(!Array.isArray(r))throw Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!v(r))throw Error("bbox must only contain numbers")})},n.validateId=function(r){if(!r)throw Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string")}},27138:function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i(94228);function o(r,n,i){if(null!==r)for(var a,s,l,u,c,f,h,p,d=0,v=0,g=r.type,y="FeatureCollection"===g,m="Feature"===g,x=y?r.features.length:1,b=0;b<x;b++){c=(p=!!(h=y?r.features[b].geometry:m?r.geometry:r)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<c;_++){var w=0,T=0;if(null!==(u=p?h.geometries[_]:h)){f=u.coordinates;var k=u.type;switch(d=i&&("Polygon"===k||"MultiPolygon"===k)?1:0,k){case null:break;case"Point":if(!1===n(f,v,b,w,T))return!1;v++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===n(f[a],v,b,w,T))return!1;v++,"MultiPoint"===k&&w++}"LineString"===k&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++){if(!1===n(f[a][s],v,b,w,T))return!1;v++}"MultiLineString"===k&&w++,"Polygon"===k&&T++}"Polygon"===k&&w++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(T=0,s=0;s<f[a].length;s++){for(l=0;l<f[a][s].length-d;l++){if(!1===n(f[a][s][l],v,b,w,T))return!1;v++}T++}w++}break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===o(u.geometries[a],n,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function s(r,n){var i;switch(r.type){case"FeatureCollection":for(i=0;i<r.features.length&&!1!==n(r.features[i].properties,i);i++);break;case"Feature":n(r.properties,0)}}function l(r,n){if("Feature"===r.type)n(r,0);else if("FeatureCollection"===r.type)for(var i=0;i<r.features.length&&!1!==n(r.features[i],i);i++);}function u(r,n){var i,a,o,s,l,u,c,f,h,p,d=0,v="FeatureCollection"===r.type,g="Feature"===r.type,y=v?r.features.length:1;for(i=0;i<y;i++){for(u=v?r.features[i].geometry:g?r.geometry:r,f=v?r.features[i].properties:g?r.properties:{},h=v?r.features[i].bbox:g?r.bbox:void 0,p=v?r.features[i].id:g?r.id:void 0,l=(c=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<l;o++)if(null!==(s=c?u.geometries[o]:u))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(s,d,f,h,p))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===n(s.geometries[a],d,f,h,p))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===n(null,d,f,h,p))return!1;d++}}function c(r,n){u(r,function(r,i,o,s,l){var u,c=null===r?null:r.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==n(a.feature(r,o,{bbox:s,id:l}),i,0)&&void 0}switch(c){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var f=0;f<r.coordinates.length;f++){var h={type:u,coordinates:r.coordinates[f]};if(!1===n(a.feature(h,o),i,f))return!1}})}function f(r,n){c(r,function(r,i,s){var l=0;if(r.geometry){var u=r.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var c,f=0,h=0,p=0;return!1!==o(r,function(o,u,d,v,g){return void 0===c||i>f||v>h||g>p?(c=o,f=i,h=v,p=g,void(l=0)):!1!==n(a.lineString([c,o],r.properties),i,s,g,l)&&void(l++,c=o)})&&void 0}}})}function h(r,n){if(!r)throw Error("geojson is required");c(r,function(r,i,o){if(null!==r.geometry){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(!1===n(r,i,o,0,0))return!1;break;case"Polygon":for(var u=0;u<l.length;u++)if(!1===n(a.lineString(l[u],r.properties),i,o,u))return!1}}})}n.coordEach=o,n.coordReduce=function(r,n,i,a){var s=i;return o(r,function(r,a,o,l,u){s=0===a&&void 0===i?r:n(s,r,a,o,l,u)},a),s},n.propEach=s,n.propReduce=function(r,n,i){var a=i;return s(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.featureEach=l,n.featureReduce=function(r,n,i){var a=i;return l(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.coordAll=function(r){var n=[];return o(r,function(r){n.push(r)}),n},n.geomEach=u,n.geomReduce=function(r,n,i){var a=i;return u(r,function(r,o,s,l,u){a=0===o&&void 0===i?r:n(a,r,o,s,l,u)}),a},n.flattenEach=c,n.flattenReduce=function(r,n,i){var a=i;return c(r,function(r,o,s){a=0===o&&0===s&&void 0===i?r:n(a,r,o,s)}),a},n.segmentEach=f,n.segmentReduce=function(r,n,i){var a=i,o=!1;return f(r,function(r,s,l,u,c){a=!1===o&&void 0===i?r:n(a,r,s,l,u,c),o=!0}),a},n.lineEach=h,n.lineReduce=function(r,n,i){var a=i;return h(r,function(r,o,s,l){a=0===o&&void 0===i?r:n(a,r,o,s,l)}),a},n.findSegment=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,u=n.segmentIndex||0,c=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),c=c||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":c=c||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=f.length+u-1),a.lineString([f[u],f[u+1]],c,n);case"Polygon":return l<0&&(l=f.length+l),u<0&&(u=f[l].length+u-1),a.lineString([f[l][u],f[l][u+1]],c,n);case"MultiLineString":return s<0&&(s=f.length+s),u<0&&(u=f[s].length+u-1),a.lineString([f[s][u],f[s][u+1]],c,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),u<0&&(u=f[s][l].length-u-1),a.lineString([f[s][l][u],f[s][l][u+1]],c,n)}throw Error("geojson is invalid")},n.findPoint=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,u=n.coordIndex||0,c=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),c=c||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":c=c||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":return a.point(f,c,n);case"MultiPoint":return s<0&&(s=f.length+s),a.point(f[s],c,n);case"LineString":return u<0&&(u=f.length+u),a.point(f[u],c,n);case"Polygon":return l<0&&(l=f.length+l),u<0&&(u=f[l].length+u),a.point(f[l][u],c,n);case"MultiLineString":return s<0&&(s=f.length+s),u<0&&(u=f[s].length+u),a.point(f[s][u],c,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),u<0&&(u=f[s][l].length-u),a.point(f[s][l][u],c,n)}throw Error("geojson is invalid")}},29261:function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i(88553),o=i(64182);n.default=function(r,n){void 0===n&&(n={});var i=0,s=0,l=0;return a.coordEach(r,function(r){i+=r[0],s+=r[1],l++}),o.point([i/l,s/l],n.properties)}},64182:function(r,n){"use strict";function i(r,n,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=r,a}function a(r,n,a){return void 0===a&&(a={}),i({type:"Point",coordinates:r},n,a)}function o(r,n,a){void 0===a&&(a={});for(var o=0;o<r.length;o++){var s=r[o];if(s.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<s[s.length-1].length;l++)if(s[s.length-1][l]!==s[0][l])throw Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:r},n,a)}function s(r,n,a){if(void 0===a&&(a={}),r.length<2)throw Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:r},n,a)}function l(r,n){void 0===n&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=r,i}function u(r,n,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:r},n,a)}function c(r,n,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:r},n,a)}function f(r,n,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:r},n,a)}function h(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r*a}function p(r,i){void 0===i&&(i="kilometers");var a=n.factors[i];if(!a)throw Error(i+" units is invalid");return r/a}function d(r){return r%(2*Math.PI)*180/Math.PI}function v(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)&&!/^\s*$/.test(r)}Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=6371008.8,n.factors={centimeters:100*n.earthRadius,centimetres:100*n.earthRadius,degrees:n.earthRadius/111325,feet:3.28084*n.earthRadius,inches:39.37*n.earthRadius,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:1e3*n.earthRadius,millimetres:1e3*n.earthRadius,nauticalmiles:n.earthRadius/1852,radians:1,yards:n.earthRadius/1.0936},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1/1.0936},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},n.feature=i,n.geometry=function(r,n,i){switch(void 0===i&&(i={}),r){case"Point":return a(n).geometry;case"LineString":return s(n).geometry;case"Polygon":return o(n).geometry;case"MultiPoint":return c(n).geometry;case"MultiLineString":return u(n).geometry;case"MultiPolygon":return f(n).geometry;default:throw Error(r+" is invalid")}},n.point=a,n.points=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return a(r,n)}),i)},n.polygon=o,n.polygons=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return o(r,n)}),i)},n.lineString=s,n.lineStrings=function(r,n,i){return void 0===i&&(i={}),l(r.map(function(r){return s(r,n)}),i)},n.featureCollection=l,n.multiLineString=u,n.multiPoint=c,n.multiPolygon=f,n.geometryCollection=function(r,n,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:r},n,a)},n.round=function(r,n){if(void 0===n&&(n=0),n&&!(n>=0))throw Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(r*i)/i},n.radiansToLength=h,n.lengthToRadians=p,n.lengthToDegrees=function(r,n){return d(p(r,n))},n.bearingToAzimuth=function(r){var n=r%360;return n<0&&(n+=360),n},n.radiansToDegrees=d,n.degreesToRadians=function(r){return r%360*Math.PI/180},n.convertLength=function(r,n,i){if(void 0===n&&(n="kilometers"),void 0===i&&(i="kilometers"),!(r>=0))throw Error("length must be a positive number");return h(p(r,n),i)},n.convertArea=function(r,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(r>=0))throw Error("area must be a positive number");var o=n.areaFactors[i];if(!o)throw Error("invalid original units");var s=n.areaFactors[a];if(!s)throw Error("invalid final units");return r/o*s},n.isNumber=v,n.isObject=function(r){return!!r&&r.constructor===Object},n.validateBBox=function(r){if(!r)throw Error("bbox is required");if(!Array.isArray(r))throw Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!v(r))throw Error("bbox must only contain numbers")})},n.validateId=function(r){if(!r)throw Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw Error("id must be a number or a string")},n.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`")},n.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`")},n.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`")},n.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`")},n.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`")},n.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`")},n.convertDistance=function(){throw Error("method has been renamed to `convertLength`")}},88553:function(r,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i(64182);function o(r,n,i){if(null!==r)for(var a,s,l,u,c,f,h,p,d=0,v=0,g=r.type,y="FeatureCollection"===g,m="Feature"===g,x=y?r.features.length:1,b=0;b<x;b++){c=(p=!!(h=y?r.features[b].geometry:m?r.geometry:r)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var _=0;_<c;_++){var w=0,T=0;if(null!==(u=p?h.geometries[_]:h)){f=u.coordinates;var k=u.type;switch(d=i&&("Polygon"===k||"MultiPolygon"===k)?1:0,k){case null:break;case"Point":if(!1===n(f,v,b,w,T))return!1;v++,w++;break;case"LineString":case"MultiPoint":for(a=0;a<f.length;a++){if(!1===n(f[a],v,b,w,T))return!1;v++,"MultiPoint"===k&&w++}"LineString"===k&&w++;break;case"Polygon":case"MultiLineString":for(a=0;a<f.length;a++){for(s=0;s<f[a].length-d;s++){if(!1===n(f[a][s],v,b,w,T))return!1;v++}"MultiLineString"===k&&w++,"Polygon"===k&&T++}"Polygon"===k&&w++;break;case"MultiPolygon":for(a=0;a<f.length;a++){for(T=0,s=0;s<f[a].length;s++){for(l=0;l<f[a][s].length-d;l++){if(!1===n(f[a][s][l],v,b,w,T))return!1;v++}T++}w++}break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(!1===o(u.geometries[a],n,i))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function s(r,n){var i;switch(r.type){case"FeatureCollection":for(i=0;i<r.features.length&&!1!==n(r.features[i].properties,i);i++);break;case"Feature":n(r.properties,0)}}function l(r,n){if("Feature"===r.type)n(r,0);else if("FeatureCollection"===r.type)for(var i=0;i<r.features.length&&!1!==n(r.features[i],i);i++);}function u(r,n){var i,a,o,s,l,u,c,f,h,p,d=0,v="FeatureCollection"===r.type,g="Feature"===r.type,y=v?r.features.length:1;for(i=0;i<y;i++){for(u=v?r.features[i].geometry:g?r.geometry:r,f=v?r.features[i].properties:g?r.properties:{},h=v?r.features[i].bbox:g?r.bbox:void 0,p=v?r.features[i].id:g?r.id:void 0,l=(c=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<l;o++)if(null!==(s=c?u.geometries[o]:u))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(s,d,f,h,p))return!1;break;case"GeometryCollection":for(a=0;a<s.geometries.length;a++)if(!1===n(s.geometries[a],d,f,h,p))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===n(null,d,f,h,p))return!1;d++}}function c(r,n){u(r,function(r,i,o,s,l){var u,c=null===r?null:r.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==n(a.feature(r,o,{bbox:s,id:l}),i,0)&&void 0}switch(c){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var f=0;f<r.coordinates.length;f++){var h={type:u,coordinates:r.coordinates[f]};if(!1===n(a.feature(h,o),i,f))return!1}})}function f(r,n){c(r,function(r,i,s){var l=0;if(r.geometry){var u=r.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var c,f=0,h=0,p=0;return!1!==o(r,function(o,u,d,v,g){return void 0===c||i>f||v>h||g>p?(c=o,f=i,h=v,p=g,void(l=0)):!1!==n(a.lineString([c,o],r.properties),i,s,g,l)&&void(l++,c=o)})&&void 0}}})}function h(r,n){if(!r)throw Error("geojson is required");c(r,function(r,i,o){if(null!==r.geometry){var s=r.geometry.type,l=r.geometry.coordinates;switch(s){case"LineString":if(!1===n(r,i,o,0,0))return!1;break;case"Polygon":for(var u=0;u<l.length;u++)if(!1===n(a.lineString(l[u],r.properties),i,o,u))return!1}}})}n.coordEach=o,n.coordReduce=function(r,n,i,a){var s=i;return o(r,function(r,a,o,l,u){s=0===a&&void 0===i?r:n(s,r,a,o,l,u)},a),s},n.propEach=s,n.propReduce=function(r,n,i){var a=i;return s(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.featureEach=l,n.featureReduce=function(r,n,i){var a=i;return l(r,function(r,o){a=0===o&&void 0===i?r:n(a,r,o)}),a},n.coordAll=function(r){var n=[];return o(r,function(r){n.push(r)}),n},n.geomEach=u,n.geomReduce=function(r,n,i){var a=i;return u(r,function(r,o,s,l,u){a=0===o&&void 0===i?r:n(a,r,o,s,l,u)}),a},n.flattenEach=c,n.flattenReduce=function(r,n,i){var a=i;return c(r,function(r,o,s){a=0===o&&0===s&&void 0===i?r:n(a,r,o,s)}),a},n.segmentEach=f,n.segmentReduce=function(r,n,i){var a=i,o=!1;return f(r,function(r,s,l,u,c){a=!1===o&&void 0===i?r:n(a,r,s,l,u,c),o=!0}),a},n.lineEach=h,n.lineReduce=function(r,n,i){var a=i;return h(r,function(r,o,s,l){a=0===o&&void 0===i?r:n(a,r,o,s,l)}),a},n.findSegment=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,u=n.segmentIndex||0,c=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),c=c||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":c=c||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=f.length+u-1),a.lineString([f[u],f[u+1]],c,n);case"Polygon":return l<0&&(l=f.length+l),u<0&&(u=f[l].length+u-1),a.lineString([f[l][u],f[l][u+1]],c,n);case"MultiLineString":return s<0&&(s=f.length+s),u<0&&(u=f[s].length+u-1),a.lineString([f[s][u],f[s][u+1]],c,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),u<0&&(u=f[s][l].length-u-1),a.lineString([f[s][l][u],f[s][l][u+1]],c,n)}throw Error("geojson is invalid")},n.findPoint=function(r,n){if(n=n||{},!a.isObject(n))throw Error("options is invalid");var i,o=n.featureIndex||0,s=n.multiFeatureIndex||0,l=n.geometryIndex||0,u=n.coordIndex||0,c=n.properties;switch(r.type){case"FeatureCollection":o<0&&(o=r.features.length+o),c=c||r.features[o].properties,i=r.features[o].geometry;break;case"Feature":c=c||r.properties,i=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=r;break;default:throw Error("geojson is invalid")}if(null===i)return null;var f=i.coordinates;switch(i.type){case"Point":return a.point(f,c,n);case"MultiPoint":return s<0&&(s=f.length+s),a.point(f[s],c,n);case"LineString":return u<0&&(u=f.length+u),a.point(f[u],c,n);case"Polygon":return l<0&&(l=f.length+l),u<0&&(u=f[l].length+u),a.point(f[l][u],c,n);case"MultiLineString":return s<0&&(s=f.length+s),u<0&&(u=f[s].length+u),a.point(f[s][u],c,n);case"MultiPolygon":return s<0&&(s=f.length+s),l<0&&(l=f[s].length+l),u<0&&(u=f[s][l].length-u),a.point(f[s][l][u],c,n)}throw Error("geojson is invalid")}},65185:function(r){r.exports=function(r){var n=0,i=0,a=0,o=0;return r.map(function(r){var s=(r=r.slice())[0],l=s.toUpperCase();if(s!=l)switch(r[0]=l,s){case"a":r[6]+=a,r[7]+=o;break;case"v":r[1]+=o;break;case"h":r[1]+=a;break;default:for(var u=1;u<r.length;)r[u++]+=a,r[u++]+=o}switch(l){case"Z":a=n,o=i;break;case"H":a=r[1];break;case"V":o=r[1];break;case"M":a=n=r[1],o=i=r[2];break;default:a=r[r.length-2],o=r[r.length-1]}return r})}},21527:function(r){"use strict";r.exports=function(r,n){if(!r||null==r.length)throw Error("Argument should be an array");n=null==n?1:Math.floor(n);for(var i=Array(2*n),a=0;a<n;a++){for(var o=-1/0,s=1/0,l=a,u=r.length;l<u;l+=n)r[l]>o&&(o=r[l]),r[l]<s&&(s=r[l]);i[a]=s,i[n+a]=o}return i}},6851:function(r){"use strict";r.exports=function(r,n,i){if("function"==typeof Array.prototype.findIndex)return r.findIndex(n,i);if("function"!=typeof n)throw TypeError("predicate must be a function");var a=Object(r),o=a.length;if(0===o)return -1;for(var s=0;s<o;s++)if(n.call(i,a[s],s,a))return s;return -1}},54:function(r,n,i){"use strict";var a=i(21527);r.exports=function(r,n,i){if(!r||null==r.length)throw Error("Argument should be an array");null==n&&(n=1),null==i&&(i=a(r,n));for(var o=0;o<n;o++){var s=i[n+o],l=i[o],u=o,c=r.length;if(s===1/0&&l===-1/0)for(u=o;u<c;u+=n)r[u]=r[u]===s?1:r[u]===l?0:.5;else if(s===1/0)for(u=o;u<c;u+=n)r[u]=r[u]===s?1:0;else if(l===-1/0)for(u=o;u<c;u+=n)r[u]=r[u]===l?0:1;else{var f=s-l;for(u=o;u<c;u+=n)isNaN(r[u])||(r[u]=0===f?.5:(r[u]-l)/f)}}return r}},57471:function(r){r.exports=function(r,n){var i="number"==typeof r,a="number"==typeof n;i&&!a?(n=r,r=0):i||a||(r=0,n=0);var o=(n|=0)-(r|=0);if(o<0)throw Error("array length must be positive");for(var s=Array(o),l=0,u=r;l<o;l++,u++)s[l]=u;return s}},32791:function(r,n,i){"use strict";var a=i(90386);function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var s,l,u=i(79616).codes,c=u.ERR_AMBIGUOUS_ARGUMENT,f=u.ERR_INVALID_ARG_TYPE,h=u.ERR_INVALID_ARG_VALUE,p=u.ERR_INVALID_RETURN_VALUE,d=u.ERR_MISSING_ARGS,v=i(73894),g=i(43827).inspect,y=i(43827).types,m=y.isPromise,x=y.isRegExp,b=Object.assign?Object.assign:i(73523).assign,_=Object.is?Object.is:i(64003);function w(){var r=i(74061);s=r.isDeepEqual,l=r.isDeepStrictEqual}var T=!1,k=r.exports=E,A={};function M(r){if(r.message instanceof Error)throw r.message;throw new v(r)}function S(r,n,i,a){if(!i){var o=!1;if(0===n)o=!0,a="No value argument passed to `assert.ok()`";else if(a instanceof Error)throw a;var s=new v({actual:i,expected:!0,message:a,operator:"==",stackStartFn:r});throw s.generatedMessage=o,s}}function E(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];S.apply(void 0,[E,n.length].concat(n))}k.fail=function r(n,i,o,s,l){var u,c=arguments.length;if(0===c?u="Failed":1===c?(o=n,n=void 0):(!1===T&&(T=!0,(a.emitWarning?a.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===c&&(s="!=")),o instanceof Error)throw o;var f={actual:n,expected:i,operator:void 0===s?"fail":s,stackStartFn:l||r};void 0!==o&&(f.message=o);var h=new v(f);throw u&&(h.message=u,h.generatedMessage=!0),h},k.AssertionError=v,k.ok=E,k.equal=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");n!=i&&M({actual:n,expected:i,message:a,operator:"==",stackStartFn:r})},k.notEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");n==i&&M({actual:n,expected:i,message:a,operator:"!=",stackStartFn:r})},k.deepEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(n,i)||M({actual:n,expected:i,message:a,operator:"deepEqual",stackStartFn:r})},k.notDeepEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),s(n,i)&&M({actual:n,expected:i,message:a,operator:"notDeepEqual",stackStartFn:r})},k.deepStrictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),l(n,i)||M({actual:n,expected:i,message:a,operator:"deepStrictEqual",stackStartFn:r})},k.notDeepStrictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");void 0===s&&w(),l(n,i)&&M({actual:n,expected:i,message:a,operator:"notDeepStrictEqual",stackStartFn:r})},k.strictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");_(n,i)||M({actual:n,expected:i,message:a,operator:"strictEqual",stackStartFn:r})},k.notStrictEqual=function r(n,i,a){if(arguments.length<2)throw new d("actual","expected");_(n,i)&&M({actual:n,expected:i,message:a,operator:"notStrictEqual",stackStartFn:r})};var L=function r(n,i,a){var o=this;(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")})(this,r),i.forEach(function(r){r in n&&(void 0!==a&&"string"==typeof a[r]&&x(n[r])&&n[r].test(a[r])?o[r]=a[r]:o[r]=n[r])})};function C(r,n,i,a){if("function"!=typeof n){if(x(n))return n.test(r);if(2==arguments.length)throw new f("expected",["Function","RegExp"],n);if("object"!==o(r)||null===r){var u=new v({actual:r,expected:n,message:i,operator:"deepStrictEqual",stackStartFn:a});throw u.operator=a.name,u}var c=Object.keys(n);if(n instanceof Error)c.push("name","message");else if(0===c.length)throw new h("error",n,"may not be an empty object");return void 0===s&&w(),c.forEach(function(o){"string"==typeof r[o]&&x(n[o])&&n[o].test(r[o])||function(r,n,i,a,o,s){if(!(i in r)||!l(r[i],n[i])){if(!a){var u=new v({actual:new L(r,o),expected:new L(n,o,r),operator:"deepStrictEqual",stackStartFn:s});throw u.actual=r,u.expected=n,u.operator=s.name,u}M({actual:r,expected:n,message:a,operator:s.name,stackStartFn:s})}}(r,n,o,i,c,a)}),!0}return void 0!==n.prototype&&r instanceof n||!Error.isPrototypeOf(n)&&!0===n.call({},r)}function O(r){if("function"!=typeof r)throw new f("fn","Function",r);try{r()}catch(r){return r}return A}function P(r){return m(r)||null!==r&&"object"===o(r)&&"function"==typeof r.then&&"function"==typeof r.catch}function I(r){return Promise.resolve().then(function(){var n;if("function"==typeof r){if(!P(n=r()))throw new p("instance of Promise","promiseFn",n)}else{if(!P(r))throw new f("promiseFn",["Function","Promise"],r);n=r}return Promise.resolve().then(function(){return n}).then(function(){return A}).catch(function(r){return r})})}function D(r,n,i,a){if("string"==typeof i){if(4==arguments.length)throw new f("error",["Object","Error","Function","RegExp"],i);if("object"===o(n)&&null!==n){if(n.message===i)throw new c("error/message",'The error message "'.concat(n.message,'" is identical to the message.'))}else if(n===i)throw new c("error/message",'The error "'.concat(n,'" is identical to the message.'));a=i,i=void 0}else if(null!=i&&"object"!==o(i)&&"function"!=typeof i)throw new f("error",["Object","Error","Function","RegExp"],i);if(n===A){var s="";i&&i.name&&(s+=" (".concat(i.name,")")),s+=a?": ".concat(a):".";var l="rejects"===r.name?"rejection":"exception";M({actual:void 0,expected:i,operator:r.name,message:"Missing expected ".concat(l).concat(s),stackStartFn:r})}if(i&&!C(n,i,a,r))throw n}function z(r,n,i,a){if(n!==A){if("string"==typeof i&&(a=i,i=void 0),!i||C(n,i)){var o=a?": ".concat(a):".",s="doesNotReject"===r.name?"rejection":"exception";M({actual:n,expected:i,operator:r.name,message:"Got unwanted ".concat(s).concat(o,"\n")+'Actual message: "'.concat(n&&n.message,'"'),stackStartFn:r})}throw n}}k.throws=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];D.apply(void 0,[r,O(n)].concat(a))},k.rejects=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return I(n).then(function(n){return D.apply(void 0,[r,n].concat(a))})},k.doesNotThrow=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];z.apply(void 0,[r,O(n)].concat(a))},k.doesNotReject=function r(n){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return I(n).then(function(n){return z.apply(void 0,[r,n].concat(a))})},k.ifError=function r(n){if(null!=n){var i="ifError got unwanted exception: ";"object"===o(n)&&"string"==typeof n.message?0===n.message.length&&n.constructor?i+=n.constructor.name:i+=n.message:i+=g(n);var a=new v({actual:n,expected:null,operator:"ifError",message:i,stackStartFn:r}),s=n.stack;if("string"==typeof s){var l=s.split("\n");l.shift();for(var u=a.stack.split("\n"),c=0;c<l.length;c++){var f=u.indexOf(l[c]);if(-1!==f){u=u.slice(0,f);break}}a.stack="".concat(u.join("\n"),"\n").concat(l.join("\n"))}throw a}},k.strict=b(function r(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];S.apply(void 0,[r,i.length].concat(i))},k,{equal:k.strictEqual,deepEqual:k.deepStrictEqual,notEqual:k.notStrictEqual,notDeepEqual:k.notDeepStrictEqual}),k.strict.strict=k.strict},73894:function(r,n,i){"use strict";var a=i(90386);function o(r,n){return n&&("object"===h(n)||"function"==typeof n)?n:s(r)}function s(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function l(r){var n="function"==typeof Map?new Map:void 0;return(l=function(r){if(null===r||-1===Function.toString.call(r).indexOf("[native code]"))return r;if("function"!=typeof r)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(r))return n.get(r);n.set(r,i)}function i(){return u(r,arguments,f(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,r)})(r)}function u(r,n,i){return(u=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}()?function(r,n,i){var a=[null];a.push.apply(a,n);var o=new(Function.bind.apply(r,a));return i&&c(o,i.prototype),o}:Reflect.construct).apply(null,arguments)}function c(r,n){return(c=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}function f(r){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function h(r){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var p=i(43827).inspect,d=i(79616).codes.ERR_INVALID_ARG_TYPE;function v(r,n,i){return(void 0===i||i>r.length)&&(i=r.length),r.substring(i-n.length,i)===n}var g="",y="",m="",x="",b={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function _(r){var n=Object.keys(r),i=Object.create(Object.getPrototypeOf(r));return n.forEach(function(n){i[n]=r[n]}),Object.defineProperty(i,"message",{value:r.message}),i}function w(r){return p(r,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var T=function(r){var n;function i(r){if(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,i),"object"!==h(r)||null===r)throw new d("options","Object",r);var n,l=r.message,u=r.operator,c=r.stackStartFn,p=r.actual,T=r.expected,k=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=l)n=o(this,f(i).call(this,String(l)));else if(a.stderr&&a.stderr.isTTY&&(a.stderr&&a.stderr.getColorDepth&&1!==a.stderr.getColorDepth()?(g="\x1b[34m",y="\x1b[32m",x="\x1b[39m",m="\x1b[31m"):(g="",y="",x="",m="")),"object"===h(p)&&null!==p&&"object"===h(T)&&null!==T&&"stack"in p&&p instanceof Error&&"stack"in T&&T instanceof Error&&(p=_(p),T=_(T)),"deepStrictEqual"===u||"strictEqual"===u)n=o(this,f(i).call(this,function(r,n,i){var o="",s="",l=0,u="",c=!1,f=w(r),p=f.split("\n"),d=w(n).split("\n"),_=0,T="";if("strictEqual"===i&&"object"===h(r)&&"object"===h(n)&&null!==r&&null!==n&&(i="strictEqualObject"),1===p.length&&1===d.length&&p[0]!==d[0]){var k=p[0].length+d[0].length;if(k<=10){if(!("object"===h(r)&&null!==r||"object"===h(n)&&null!==n||0===r&&0===n))return"".concat(b[i],"\n\n")+"".concat(p[0]," !== ").concat(d[0],"\n")}else if("strictEqualObject"!==i&&k<(a.stderr&&a.stderr.isTTY?a.stderr.columns:80)){for(;p[0][_]===d[0][_];)_++;_>2&&(T="\n  ".concat(function(r,n){if(n=Math.floor(n),0==r.length||0==n)return"";var i=r.length*n;for(n=Math.floor(Math.log(n)/Math.log(2));n;)r+=r,n--;return r+r.substring(0,i-r.length)}(" ",_),"^"),_=0)}}for(var A=p[p.length-1],M=d[d.length-1];A===M&&(_++<2?u="\n  ".concat(A).concat(u):o=A,p.pop(),d.pop(),0!==p.length&&0!==d.length);)A=p[p.length-1],M=d[d.length-1];var S=Math.max(p.length,d.length);if(0===S){var E=f.split("\n");if(E.length>30)for(E[26]="".concat(g,"...").concat(x);E.length>27;)E.pop();return"".concat(b.notIdentical,"\n\n").concat(E.join("\n"),"\n")}_>3&&(u="\n".concat(g,"...").concat(x).concat(u),c=!0),""!==o&&(u="\n  ".concat(o).concat(u),o="");var L=0,C=b[i]+"\n".concat(y,"+ actual").concat(x," ").concat(m,"- expected").concat(x),O=" ".concat(g,"...").concat(x," Lines skipped");for(_=0;_<S;_++){var P=_-l;if(p.length<_+1)P>1&&_>2&&(P>4?(s+="\n".concat(g,"...").concat(x),c=!0):P>3&&(s+="\n  ".concat(d[_-2]),L++),s+="\n  ".concat(d[_-1]),L++),l=_,o+="\n".concat(m,"-").concat(x," ").concat(d[_]),L++;else if(d.length<_+1)P>1&&_>2&&(P>4?(s+="\n".concat(g,"...").concat(x),c=!0):P>3&&(s+="\n  ".concat(p[_-2]),L++),s+="\n  ".concat(p[_-1]),L++),l=_,s+="\n".concat(y,"+").concat(x," ").concat(p[_]),L++;else{var I=d[_],D=p[_],z=D!==I&&(!v(D,",")||D.slice(0,-1)!==I);z&&v(I,",")&&I.slice(0,-1)===D&&(z=!1,D+=","),z?(P>1&&_>2&&(P>4?(s+="\n".concat(g,"...").concat(x),c=!0):P>3&&(s+="\n  ".concat(p[_-2]),L++),s+="\n  ".concat(p[_-1]),L++),l=_,s+="\n".concat(y,"+").concat(x," ").concat(D),o+="\n".concat(m,"-").concat(x," ").concat(I),L+=2):(s+=o,o="",1!==P&&0!==_||(s+="\n  ".concat(D),L++))}if(L>20&&_<S-2)return"".concat(C).concat(O,"\n").concat(s,"\n").concat(g,"...").concat(x).concat(o,"\n")+"".concat(g,"...").concat(x)}return"".concat(C).concat(c?O:"","\n").concat(s).concat(o).concat(u).concat(T)}(p,T,u)));else if("notDeepStrictEqual"===u||"notStrictEqual"===u){var A=b[u],M=w(p).split("\n");if("notStrictEqual"===u&&"object"===h(p)&&null!==p&&(A=b.notStrictEqualObject),M.length>30)for(M[26]="".concat(g,"...").concat(x);M.length>27;)M.pop();n=1===M.length?o(this,f(i).call(this,"".concat(A," ").concat(M[0]))):o(this,f(i).call(this,"".concat(A,"\n\n").concat(M.join("\n"),"\n")))}else{var S=w(p),E="",L=b[u];"notDeepEqual"===u||"notEqual"===u?(S="".concat(b[u],"\n\n").concat(S)).length>1024&&(S="".concat(S.slice(0,1021),"...")):(E="".concat(w(T)),S.length>512&&(S="".concat(S.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===u||"equal"===u?S="".concat(L,"\n\n").concat(S,"\n\nshould equal\n\n"):E=" ".concat(u," ").concat(E)),n=o(this,f(i).call(this,"".concat(S).concat(E)))}return Error.stackTraceLimit=k,n.generatedMessage=!l,Object.defineProperty(s(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=p,n.expected=T,n.operator=u,Error.captureStackTrace&&Error.captureStackTrace(s(n),c),n.stack,n.name="AssertionError",o(n)}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&c(r,n)}(i,r),n=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(r,n){return p(this,function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.forEach(function(n){var a;a=i[n],n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a})}return r}({},n,{customInspect:!1,depth:0}))}}],function(r,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(i.prototype,n),i}(l(Error));r.exports=T},79616:function(r,n,i){"use strict";function a(r){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function o(r){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function s(r,n){return(s=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r})(r,n)}var l,u,c={};function f(r,n,i){i||(i=Error);var l=function(i){function l(i,s,u){var c,f;return function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")}(this,l),(c=(f=o(l).call(this,"string"==typeof n?n:n(i,s,u)))&&("object"===a(f)||"function"==typeof f)?f:function(r){if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this)).code=r,c}return function(r,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");r.prototype=Object.create(n&&n.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),n&&s(r,n)}(l,i),l}(i);c[r]=l}function h(r,n){if(Array.isArray(r)){var i=r.length;return r=r.map(function(r){return String(r)}),i>2?"one of ".concat(n," ").concat(r.slice(0,i-1).join(", "),", or ")+r[i-1]:2===i?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}return"of ".concat(n," ").concat(String(r))}f("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),f("ERR_INVALID_ARG_TYPE",function(r,n,o){if(void 0===l&&(l=i(32791)),l("string"==typeof r,"'name' must be a string"),"string"==typeof n&&(u="not ",n.substr(0,4)===u)?(s="must not be",n=n.replace(/^not /,"")):s="must be",(void 0===p||p>r.length)&&(p=r.length)," argument"===r.substring(p-9,p))c="The ".concat(r," ").concat(s," ").concat(h(n,"type"));else{var s,u,c,f,p,d=("number"!=typeof f&&(f=0),f+1>r.length||-1===r.indexOf(".",f)?"argument":"property");c='The "'.concat(r,'" ').concat(d," ").concat(s," ").concat(h(n,"type"))}return c+". Received type ".concat(a(o))},TypeError),f("ERR_INVALID_ARG_VALUE",function(r,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===u&&(u=i(43827));var o=u.inspect(n);return o.length>128&&(o="".concat(o.slice(0,128),"...")),"The argument '".concat(r,"' ").concat(a,". Received ").concat(o)},TypeError,RangeError),f("ERR_INVALID_RETURN_VALUE",function(r,n,i){var o;return o=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(a(i)),"Expected ".concat(r,' to be returned from the "').concat(n,'"')+" function but got ".concat(o,".")},TypeError),f("ERR_MISSING_ARGS",function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];void 0===l&&(l=i(32791)),l(n.length>0,"At least one arg needs to be specified");var o="The ",s=n.length;switch(n=n.map(function(r){return'"'.concat(r,'"')}),s){case 1:o+="".concat(n[0]," argument");break;case 2:o+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:o+=n.slice(0,s-1).join(", ")+", and ".concat(n[s-1]," arguments")}return"".concat(o," must be specified")},TypeError),r.exports.codes=c},74061:function(r,n,i){"use strict";function a(r,n){return function(r){if(Array.isArray(r))return r}(r)||function(r,n){var i=[],a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done)&&(i.push(l.value),!n||i.length!==n);a=!0);}catch(r){o=!0,s=r}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i}(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(r){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var s=void 0!==/a/g.flags,l=function(r){var n=[];return r.forEach(function(r){return n.push(r)}),n},u=function(r){var n=[];return r.forEach(function(r,i){return n.push([i,r])}),n},c=Object.is?Object.is:i(64003),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:i(15567);function p(r){return r.call.bind(r)}var d=p(Object.prototype.hasOwnProperty),v=p(Object.prototype.propertyIsEnumerable),g=p(Object.prototype.toString),y=i(43827).types,m=y.isAnyArrayBuffer,x=y.isArrayBufferView,b=y.isDate,_=y.isMap,w=y.isRegExp,T=y.isSet,k=y.isNativeError,A=y.isBoxedPrimitive,M=y.isNumberObject,S=y.isStringObject,E=y.isBooleanObject,L=y.isBigIntObject,C=y.isSymbolObject,O=y.isFloat32Array,P=y.isFloat64Array;function I(r){if(0===r.length||r.length>10)return!0;for(var n=0;n<r.length;n++){var i=r.charCodeAt(n);if(i<48||i>57)return!0}return 10===r.length&&r>=4294967296}function D(r){return Object.keys(r).filter(I).concat(f(r).filter(Object.prototype.propertyIsEnumerable.bind(r)))}function z(r,n){if(r===n)return 0;for(var i=r.length,a=n.length,o=0,s=Math.min(i,a);o<s;++o)if(r[o]!==n[o]){i=r[o],a=n[o];break}return i<a?-1:a<i?1:0}function R(r,n,i,a){if(r===n)return 0!==r||!i||c(r,n);if(i){if("object"!==o(r))return"number"==typeof r&&h(r)&&h(n);if("object"!==o(n)||null===r||null===n||Object.getPrototypeOf(r)!==Object.getPrototypeOf(n))return!1}else{if(null===r||"object"!==o(r))return(null===n||"object"!==o(n))&&r==n;if(null===n||"object"!==o(n))return!1}var l=g(r);if(l!==g(n))return!1;if(Array.isArray(r)){if(r.length!==n.length)return!1;var u=D(r),f=D(n);return u.length===f.length&&B(r,n,i,a,1,u)}if("[object Object]"===l&&(!_(r)&&_(n)||!T(r)&&T(n)))return!1;if(b(r)){if(!b(n)||Date.prototype.getTime.call(r)!==Date.prototype.getTime.call(n))return!1}else if(w(r)){if(!w(n)||!(s?r.source===n.source&&r.flags===n.flags:RegExp.prototype.toString.call(r)===RegExp.prototype.toString.call(n)))return!1}else if(k(r)||r instanceof Error){if(r.message!==n.message||r.name!==n.name)return!1}else{if(x(r)){if(!i&&(O(r)||P(r))){if(!function(r,n){if(r.byteLength!==n.byteLength)return!1;for(var i=0;i<r.byteLength;i++)if(r[i]!==n[i])return!1;return!0}(r,n))return!1}else if(r.byteLength!==n.byteLength||0!==z(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),new Uint8Array(n.buffer,n.byteOffset,n.byteLength)))return!1;var p=D(r),d=D(n);return p.length===d.length&&B(r,n,i,a,0,p)}if(T(r))return!(!T(n)||r.size!==n.size)&&B(r,n,i,a,2);if(_(r))return!(!_(n)||r.size!==n.size)&&B(r,n,i,a,3);if(m(r)){if(r.byteLength!==n.byteLength||0!==z(new Uint8Array(r),new Uint8Array(n)))return!1}else if(A(r)&&(M(r)?!(M(n)&&c(Number.prototype.valueOf.call(r),Number.prototype.valueOf.call(n))):S(r)?!S(n)||String.prototype.valueOf.call(r)!==String.prototype.valueOf.call(n):E(r)?!E(n)||Boolean.prototype.valueOf.call(r)!==Boolean.prototype.valueOf.call(n):L(r)?!L(n)||BigInt.prototype.valueOf.call(r)!==BigInt.prototype.valueOf.call(n):!C(n)||Symbol.prototype.valueOf.call(r)!==Symbol.prototype.valueOf.call(n)))return!1}return B(r,n,i,a,0)}function F(r,n){return n.filter(function(n){return v(r,n)})}function B(r,n,i,s,c,h){if(5==arguments.length){h=Object.keys(r);var p=Object.keys(n);if(h.length!==p.length)return!1}for(var g=0;g<h.length;g++)if(!d(n,h[g]))return!1;if(i&&5==arguments.length){var y=f(r);if(0!==y.length){var m=0;for(g=0;g<y.length;g++){var x=y[g];if(v(r,x)){if(!v(n,x))return!1;h.push(x),m++}else if(v(n,x))return!1}var b=f(n);if(y.length!==b.length&&F(n,b).length!==m)return!1}else{var _=f(n);if(0!==_.length&&0!==F(n,_).length)return!1}}if(0===h.length&&(0===c||1===c&&0===r.length||0===r.size))return!0;if(void 0===s)s={val1:new Map,val2:new Map,position:0};else{var w=s.val1.get(r);if(void 0!==w){var T=s.val2.get(n);if(void 0!==T)return w===T}s.position++}s.val1.set(r,s.position),s.val2.set(n,s.position);var k=function(r,n,i,s,c,f){var h=0;if(2===f){if(!function(r,n,i,a){for(var s=null,u=l(r),c=0;c<u.length;c++){var f=u[c];if("object"===o(f)&&null!==f)null===s&&(s=new Set),s.add(f);else if(!n.has(f)){if(i||!function(r,n,i){var a=j(i);return null!=a?a:n.has(a)&&!r.has(a)}(r,n,f))return!1;null===s&&(s=new Set),s.add(f)}}if(null!==s){for(var h=l(n),p=0;p<h.length;p++){var d=h[p];if("object"===o(d)&&null!==d){if(!N(s,d,i,a))return!1}else if(!i&&!r.has(d)&&!N(s,d,i,a))return!1}return 0===s.size}return!0}(r,n,i,c))return!1}else if(3===f){if(!function(r,n,i,s){for(var l=null,c=u(r),f=0;f<c.length;f++){var h=a(c[f],2),p=h[0],d=h[1];if("object"===o(p)&&null!==p)null===l&&(l=new Set),l.add(p);else{var v=n.get(p);if(void 0===v&&!n.has(p)||!R(d,v,i,s)){if(i||!function(r,n,i,a,o){var s=j(i);if(null!=s)return s;var l=n.get(s);return!(void 0===l&&!n.has(s)||!R(a,l,!1,o))&&!r.has(s)&&R(a,l,!1,o)}(r,n,p,d,s))return!1;null===l&&(l=new Set),l.add(p)}}}if(null!==l){for(var g=u(n),y=0;y<g.length;y++){var m=a(g[y],2),x=(p=m[0],m[1]);if("object"===o(p)&&null!==p){if(!U(l,r,p,x,i,s))return!1}else if(!(i||r.has(p)&&R(r.get(p),x,!1,s)||U(l,r,p,x,!1,s)))return!1}return 0===l.size}return!0}(r,n,i,c))return!1}else if(1===f)for(;h<r.length;h++){if(!d(r,h)){if(d(n,h))return!1;for(var p=Object.keys(r);h<p.length;h++){var v=p[h];if(!d(n,v)||!R(r[v],n[v],i,c))return!1}return p.length===Object.keys(n).length}if(!d(n,h)||!R(r[h],n[h],i,c))return!1}for(h=0;h<s.length;h++){var g=s[h];if(!R(r[g],n[g],i,c))return!1}return!0}(r,n,i,h,s,c);return s.val1.delete(r),s.val2.delete(n),k}function N(r,n,i,a){for(var o=l(r),s=0;s<o.length;s++){var u=o[s];if(R(n,u,i,a))return r.delete(u),!0}return!1}function j(r){switch(o(r)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":r=+r;case"number":if(h(r))return!1}return!0}function U(r,n,i,a,o,s){for(var u=l(r),c=0;c<u.length;c++){var f=u[c];if(R(i,f,o,s)&&R(a,n.get(f),o,s))return r.delete(f),!0}return!1}r.exports={isDeepEqual:function(r,n){return R(r,n,!1)},isDeepStrictEqual:function(r,n){return R(r,n,!0)}}},11631:function(r,n,i){"use strict";i.r(n),i.d(n,{decode:function(){return u},encode:function(){return l}});for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<64;s++)o[a.charCodeAt(s)]=s;var l=function(r){var n,i=new Uint8Array(r),o=i.length,s="";for(n=0;n<o;n+=3)s+=a[i[n]>>2]+a[(3&i[n])<<4|i[n+1]>>4]+a[(15&i[n+1])<<2|i[n+2]>>6]+a[63&i[n+2]];return o%3==2?s=s.substring(0,s.length-1)+"=":o%3==1&&(s=s.substring(0,s.length-2)+"=="),s},u=function(r){var n,i,a,s,l,u=.75*r.length,c=r.length,f=0;"="===r[r.length-1]&&(u--,"="===r[r.length-2]&&u--);var h=new ArrayBuffer(u),p=new Uint8Array(h);for(n=0;n<c;n+=4)i=o[r.charCodeAt(n)],a=o[r.charCodeAt(n+1)],s=o[r.charCodeAt(n+2)],l=o[r.charCodeAt(n+3)],p[f++]=i<<2|a>>4,p[f++]=(15&a)<<4|s>>2,p[f++]=(3&s)<<6|63&l;return h}},95341:function(r,n){"use strict";n.byteLength=function(r){var n=u(r),i=n[0],a=n[1];return 3*(i+a)/4-a},n.toByteArray=function(r){var n,i,s=u(r),l=s[0],c=s[1],f=new o(3*(l+c)/4-c),h=0,p=c>0?l-4:l;for(i=0;i<p;i+=4)n=a[r.charCodeAt(i)]<<18|a[r.charCodeAt(i+1)]<<12|a[r.charCodeAt(i+2)]<<6|a[r.charCodeAt(i+3)],f[h++]=n>>16&255,f[h++]=n>>8&255,f[h++]=255&n;return 2===c&&(n=a[r.charCodeAt(i)]<<2|a[r.charCodeAt(i+1)]>>4,f[h++]=255&n),1===c&&(n=a[r.charCodeAt(i)]<<10|a[r.charCodeAt(i+1)]<<4|a[r.charCodeAt(i+2)]>>2,f[h++]=n>>8&255,f[h++]=255&n),f},n.fromByteArray=function(r){for(var n,a=r.length,o=a%3,s=[],l=0,u=a-o;l<u;l+=16383)s.push(function(r,n,a){for(var o,s=[],l=n;l<a;l+=3)s.push(i[(o=(r[l]<<16&16711680)+(r[l+1]<<8&65280)+(255&r[l+2]))>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}(r,l,l+16383>u?u:l+16383));return 1===o?s.push(i[(n=r[a-1])>>2]+i[n<<4&63]+"=="):2===o&&s.push(i[(n=(r[a-2]<<8)+r[a-1])>>10]+i[n>>4&63]+i[n<<2&63]+"="),s.join("")};for(var i=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)i[l]=s[l],a[s.charCodeAt(l)]=l;function u(r){var n=r.length;if(n%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");return -1===i&&(i=n),[i,i===n?0:4-i%4]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},91358:function(r){"use strict";function n(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)>=0?(s=l,o=l-1):a=l+1}return s}function i(r,n,i,a,o){for(var s=o+1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)>0?(s=l,o=l-1):a=l+1}return s}function a(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)<0?(s=l,a=l+1):o=l-1}return s}function o(r,n,i,a,o){for(var s=a-1;a<=o;){var l=a+o>>>1,u=r[l];(void 0!==i?i(u,n):u-n)<=0?(s=l,a=l+1):o=l-1}return s}function s(r,n,i,a,o){for(;a<=o;){var s=a+o>>>1,l=r[s],u=void 0!==i?i(l,n):l-n;if(0===u)return s;u<=0?a=s+1:o=s-1}return -1}function l(r,n,i,a,o,s){return"function"==typeof i?s(r,n,i,void 0===a?0:0|a,void 0===o?r.length-1:0|o):s(r,n,void 0,void 0===i?0:0|i,void 0===a?r.length-1:0|a)}r.exports={ge:function(r,i,a,o,s){return l(r,i,a,o,s,n)},gt:function(r,n,a,o,s){return l(r,n,a,o,s,i)},lt:function(r,n,i,o,s){return l(r,n,i,o,s,a)},le:function(r,n,i,a,s){return l(r,n,i,a,s,o)},eq:function(r,n,i,a,o){return l(r,n,i,a,o,s)}}},13547:function(r,n){"use strict";function i(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-2147483648,n.sign=function(r){return(r>0)-(r<0)},n.abs=function(r){var n=r>>31;return(r^n)-n},n.min=function(r,n){return n^(r^n)&-(r<n)},n.max=function(r,n){return r^(r^n)&-(r<n)},n.isPow2=function(r){return!(r&r-1||!r)},n.log2=function(r){var n,i;return n=(r>65535)<<4,n|=i=((r>>>=n)>255)<<3,n|=i=((r>>>=i)>15)<<2,(n|=i=((r>>>=i)>3)<<1)|(r>>>=i)>>1},n.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},n.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},n.countTrailingZeros=i,n.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,1+(r|=r>>>16)},n.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},n.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var a=Array(256);(function(r){for(var n=0;n<256;++n){var i=n,a=n,o=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=a<<o&255}})(a),n.reverse=function(r){return a[255&r]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},n.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},n.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},n.interleave3=function(r,n,i){return(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},n.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},n.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},44781:function(r,n,i){"use strict";var a=i(53435);r.exports=function(r,n){n||(n={});var i,l,u,c,f,h,p,d,v,g,y,m=null==n.cutoff?.25:n.cutoff,x=null==n.radius?8:n.radius,b=n.channel||0;if(ArrayBuffer.isView(r)||Array.isArray(r)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");i=n.width,l=n.height,c=r,h=n.stride?n.stride:Math.floor(r.length/i/l)}else window.HTMLCanvasElement&&r instanceof window.HTMLCanvasElement?(p=(d=r).getContext("2d"),i=d.width,l=d.height,c=(v=p.getImageData(0,0,i,l)).data,h=4):window.CanvasRenderingContext2D&&r instanceof window.CanvasRenderingContext2D?(p=r,i=(d=r.canvas).width,l=d.height,c=(v=p.getImageData(0,0,i,l)).data,h=4):window.ImageData&&r instanceof window.ImageData&&(v=r,i=r.width,l=r.height,c=v.data,h=4);if(u=Math.max(i,l),window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array)for(f=c,c=Array(i*l),g=0,y=f.length;g<y;g++)c[g]=f[g*h+b]/255;else if(1!==h)throw Error("Raw data can have only 1 value per pixel");var _=Array(i*l),w=Array(i*l),T=Array(u),k=Array(u),A=Array(u+1),M=Array(u);for(g=0,y=i*l;g<y;g++){var S=c[g];_[g]=1===S?0:0===S?o:Math.pow(Math.max(0,.5-S),2),w[g]=1===S?o:0===S?0:Math.pow(Math.max(0,S-.5),2)}s(_,i,l,T,k,M,A),s(w,i,l,T,k,M,A);var E=window.Float32Array?new Float32Array(i*l):Array(i*l);for(g=0,y=i*l;g<y;g++)E[g]=a(1-((_[g]-w[g])/x+m),0,1);return E};var o=1e20;function s(r,n,i,a,o,s,u){for(var c=0;c<n;c++){for(var f=0;f<i;f++)a[f]=r[f*n+c];for(l(a,o,s,u,i),f=0;f<i;f++)r[f*n+c]=o[f]}for(f=0;f<i;f++){for(c=0;c<n;c++)a[c]=r[f*n+c];for(l(a,o,s,u,n),c=0;c<n;c++)r[f*n+c]=Math.sqrt(o[c])}}function l(r,n,i,a,s){i[0]=0,a[0]=-o,a[1]=+o;for(var l=1,u=0;l<s;l++){for(var c=(r[l]+l*l-(r[i[u]]+i[u]*i[u]))/(2*l-2*i[u]);c<=a[u];)u--,c=(r[l]+l*l-(r[i[u]]+i[u]*i[u]))/(2*l-2*i[u]);i[++u]=l,a[u]=c,a[u+1]=+o}for(l=0,u=0;l<s;l++){for(;a[u+1]<l;)u++;n[l]=(l-i[u])*(l-i[u])+r[i[u]]}}},6614:function(r,n,i){"use strict";var a=i(68318),o=i(68222),s=o(a("String.prototype.indexOf"));r.exports=function(r,n){var i=a(r,!!n);return"function"==typeof i&&s(r,".prototype.")>-1?o(i):i}},68222:function(r,n,i){"use strict";var a=i(77575),o=i(68318),s=o("%Function.prototype.apply%"),l=o("%Function.prototype.call%"),u=o("%Reflect.apply%",!0)||a.call(l,s),c=o("%Object.getOwnPropertyDescriptor%",!0),f=o("%Object.defineProperty%",!0),h=o("%Math.max%");if(f)try{f({},"a",{value:1})}catch(r){f=null}r.exports=function(r){var n=u(a,l,arguments);return c&&f&&c(n,"length").configurable&&f(n,"length",{value:1+h(0,r.length-(arguments.length-1))}),n};var p=function(){return u(a,s,arguments)};f?f(r.exports,"apply",{value:p}):r.exports.apply=p},53435:function(r){r.exports=function(r,n,i){return n<i?r<n?n:r>i?i:r:r<i?i:r>n?n:r}},6475:function(r,n,i){"use strict";var a=i(53435);function o(r,n){null==n&&(n=!0);var i=r[0],o=r[1],s=r[2],l=r[3];return null==l&&(l=n?1:255),n&&(i*=255,o*=255,s*=255,l*=255),16777216*(i=255&a(i,0,255))+((o=255&a(o,0,255))<<16)+((s=255&a(s,0,255))<<8)+(255&a(l,0,255))}r.exports=o,r.exports.to=o,r.exports.from=function(r,n){var i=(r=+r)>>>24,a=(16711680&r)>>>16,o=(65280&r)>>>8,s=255&r;return!1===n?[i,a,o,s]:[i/255,a/255,o/255,s/255]}},76857:function(r){"use strict";r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(r,n,i){"use strict";var a=i(36652),o=i(53435),s=i(90660);r.exports=function(r,n){"float"!==n&&n||(n="array"),"uint"===n&&(n="uint8"),"uint_clamped"===n&&(n="uint8_clamped");var i,l=new(s(n))(4),u="uint8"!==n&&"uint8_clamped"!==n;return r.length&&"string"!=typeof r||((r=a(r))[0]/=255,r[1]/=255,r[2]/=255),(i=r)instanceof Uint8Array||i instanceof Uint8ClampedArray||Array.isArray(i)&&(i[0]>1||0===i[0])&&(i[1]>1||0===i[1])&&(i[2]>1||0===i[2])&&(!i[3]||i[3]>1)?(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=null!=r[3]?r[3]:255,u&&(l[0]/=255,l[1]/=255,l[2]/=255,l[3]/=255)):u?(l[0]=r[0],l[1]=r[1],l[2]=r[2],l[3]=null!=r[3]?r[3]:1):(l[0]=o(Math.floor(255*r[0]),0,255),l[1]=o(Math.floor(255*r[1]),0,255),l[2]=o(Math.floor(255*r[2]),0,255),l[3]=null==r[3]?255:o(Math.floor(255*r[3]),0,255)),l}},90736:function(r,n,i){"use strict";var a=i(76857),o=i(10973),s=i(46775);r.exports=function(r){var n,u,c=[],f=1;if("string"==typeof r){if(a[r])c=a[r].slice(),u="rgb";else if("transparent"===r)f=0,u="rgb",c=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var h=r.slice(1);f=1,(d=h.length)<=4?(c=[parseInt(h[0]+h[0],16),parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16)],4===d&&(f=parseInt(h[3]+h[3],16)/255)):(c=[parseInt(h[0]+h[1],16),parseInt(h[2]+h[3],16),parseInt(h[4]+h[5],16)],8===d&&(f=parseInt(h[6]+h[7],16)/255)),c[0]||(c[0]=0),c[1]||(c[1]=0),c[2]||(c[2]=0),u="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var p=n[1];u=h=p.replace(/a$/,"");var d="cmyk"===h?4:"gray"===h?1:3;c=n[2].trim().split(/\s*,\s*/).map(function(r,n){if(/%$/.test(r))return n===d?parseFloat(r)/100:"rgb"===h?255*parseFloat(r)/100:parseFloat(r);if("h"===h[n]){if(/deg$/.test(r))return parseFloat(r);if(void 0!==l[r])return l[r]}return parseFloat(r)}),p===h&&c.push(1),f="rgb"===p||void 0===c[d]?1:c[d],c=c.slice(0,d)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(c=r.match(/([0-9]+)/g).map(function(r){return parseFloat(r)}),u=r.match(/([a-z])/gi).join("").toLowerCase())}else if(isNaN(r)){if(o(r)){var v=s(r.r,r.red,r.R,null);null!==v?(u="rgb",c=[v,s(r.g,r.green,r.G),s(r.b,r.blue,r.B)]):(u="hsl",c=[s(r.h,r.hue,r.H),s(r.s,r.saturation,r.S),s(r.l,r.lightness,r.L,r.b,r.brightness)]),f=s(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(f/=100)}else(Array.isArray(r)||i.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(c=[r[0],r[1],r[2]],u="rgb",f=4===r.length?r[3]:1)}else u="rgb",c=[r>>>16,(65280&r)>>>8,255&r];return{space:u,values:c,alpha:f}};var l={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(r,n,i){"use strict";var a=i(90736),o=i(80009),s=i(53435);r.exports=function(r){var n,i=a(r);return i.space?((n=[,,,])[0]=s(i.values[0],0,255),n[1]=s(i.values[1],0,255),n[2]=s(i.values[2],0,255),"h"===i.space[0]&&(n=o.rgb(n)),n.push(s(i.alpha,0,1)),n):[]}},80009:function(r,n,i){"use strict";var a=i(6866);r.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var n,i,a,o,s,l=r[0]/360,u=r[1]/100,c=r[2]/100;if(0===u)return[s=255*c,s,s];n=2*c-(i=c<.5?c*(1+u):c+u-c*u),o=[0,0,0];for(var f=0;f<3;f++)(a=l+-(1/3*(f-1)))<0?a++:a>1&&a--,s=6*a<1?n+6*(i-n)*a:2*a<1?i:3*a<2?n+(i-n)*(2/3-a)*6:n,o[f]=255*s;return o}},a.hsl=function(r){var n,i,a=r[0]/255,o=r[1]/255,s=r[2]/255,l=Math.min(a,o,s),u=Math.max(a,o,s),c=u-l;return u===l?n=0:a===u?n=(o-s)/c:o===u?n=2+(s-a)/c:s===u&&(n=4+(a-o)/c),(n=Math.min(60*n,360))<0&&(n+=360),i=(l+u)/2,[n,100*(u===l?0:i<=.5?c/(u+l):c/(2-u-l)),100*i]}},6866:function(r){"use strict";r.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(r){r.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(r,n,i){"use strict";r.exports={parse:i(41004),stringify:i(53313)}},63625:function(r,n,i){"use strict";var a=i(40402);r.exports={isSize:function(r){return/^[\d\.]/.test(r)||-1!==r.indexOf("/")||-1!==a.indexOf(r)}}},41004:function(r,n,i){"use strict";var a=i(90448),o=i(38732),s=i(41901),l=i(15659),u=i(96209),c=i(83794),f=i(99011),h=i(63625).isSize;r.exports=d;var p=d.cache={};function d(r){if("string"!=typeof r)throw Error("Font argument must be a string.");if(p[r])return p[r];if(""===r)throw Error("Cannot parse an empty string.");if(-1!==s.indexOf(r))return p[r]={system:r};for(var n,i={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=f(r,/\s+/);n=d.shift();){if(-1!==o.indexOf(n))return["style","variant","weight","stretch"].forEach(function(r){i[r]=n}),p[r]=i;if(-1===u.indexOf(n)){if("normal"!==n&&"small-caps"!==n){if(-1===c.indexOf(n)){if(-1===l.indexOf(n)){if(h(n)){var g=f(n,"/");if(i.size=g[0],null!=g[1]?i.lineHeight=v(g[1]):"/"===d[0]&&(d.shift(),i.lineHeight=v(d.shift())),!d.length)throw Error("Missing required font-family.");return i.family=f(d.join(" "),/\s*,\s*/).map(a),p[r]=i}throw Error("Unknown or unsupported font token: "+n)}i.weight=n}else i.stretch=n}else i.variant=n}else i.style=n}throw Error("Missing required font-size.")}function v(r){var n=parseFloat(r);return n.toString()===r?n:r}},53313:function(r,n,i){"use strict";var a=i(71299),o=i(63625).isSize,s=g(i(38732)),l=g(i(41901)),u=g(i(15659)),c=g(i(96209)),f=g(i(83794)),h={normal:1,"small-caps":1},p={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},d="serif";function v(r,n){if(r&&!n[r]&&!s[r])throw Error("Unknown keyword `"+r+"`");return r}function g(r){for(var n={},i=0;i<r.length;i++)n[r[i]]=1;return n}r.exports=function(r){if((r=a(r,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return r.system&&v(r.system,l),r.system;if(v(r.style,c),v(r.variant,h),v(r.weight,u),v(r.stretch,f),null==r.size&&(r.size="1rem"),"number"==typeof r.size&&(r.size+="px"),!o)throw Error("Bad size value `"+r.size+"`");r.family||(r.family=d),Array.isArray(r.family)&&(r.family.length||(r.family=[d]),r.family=r.family.map(function(r){return p[r]?r:'"'+r+'"'}).join(", "));var n=[];return n.push(r.style),r.variant!==r.style&&n.push(r.variant),r.weight!==r.variant&&r.weight!==r.style&&n.push(r.weight),r.stretch!==r.weight&&r.stretch!==r.variant&&r.stretch!==r.style&&n.push(r.stretch),n.push(r.size+(null==r.lineHeight||"normal"===r.lineHeight||r.lineHeight+""=="1"?"":"/"+r.lineHeight)),n.push(r.family),n.filter(Boolean).join(" ")}},55174:function(r,n,i){"use strict";var a,o=i(24582),s=i(10424),l=i(82527),u=i(19012),c=i(21780),f=i(16906),h=Function.prototype.bind,p=Object.defineProperty,d=Object.prototype.hasOwnProperty;a=function(r,n,i){var a,o=s(n)&&l(n.value);return delete(a=u(n)).writable,delete a.value,a.get=function(){return!i.overwriteDefinition&&d.call(this,r)?o:(n.value=h.call(o,i.resolveContext?i.resolveContext(this):this),p(this,r,n),this[r])},a},r.exports=function(r){var n=c(arguments[1]);return o(n.resolveContext)&&l(n.resolveContext),f(r,function(r,i){return a(i,r,n)})}},62072:function(r,n,i){"use strict";var a=i(24582),o=i(84985),s=i(95879),l=i(21780),u=i(66741);(r.exports=function(r,n){var i,o,c,f,h;return arguments.length<2||"string"!=typeof r?(f=n,n=r,r=null):f=arguments[2],a(r)?(i=u.call(r,"c"),o=u.call(r,"e"),c=u.call(r,"w")):(i=c=!0,o=!1),h={value:n,configurable:i,enumerable:o,writable:c},f?s(l(f),h):h}).gs=function(r,n,i){var c,f,h,p;return"string"!=typeof r?(h=i,i=n,n=r,r=null):h=arguments[3],a(n)?o(n)?a(i)?o(i)||(h=i,i=void 0):i=void 0:(h=n,n=i=void 0):n=void 0,a(r)?(c=u.call(r,"c"),f=u.call(r,"e")):(c=!0,f=!1),p={get:n,set:i,configurable:c,enumerable:f},h?s(l(h),p):p}},33064:function(r,n,i){"use strict";function a(r,n){return r<n?-1:r>n?1:r>=n?0:NaN}i.d(n,{j2:function(){return a},Fp:function(){return u},J6:function(){return f},TS:function(){return h},VV:function(){return p},w6:function(){return d},Sm:function(){return v}}),1===(o=a).length&&(s=o,o=function(r,n){return a(s(r),n)});var o,s,l=Array.prototype;function u(r,n){var i,a,o=r.length,s=-1;if(null==n){for(;++s<o;)if(null!=(i=r[s])&&i>=i)for(a=i;++s<o;)null!=(i=r[s])&&i>a&&(a=i)}else for(;++s<o;)if(null!=(i=n(r[s],s,r))&&i>=i)for(a=i;++s<o;)null!=(i=n(r[s],s,r))&&i>a&&(a=i);return a}function c(r){return null===r?NaN:+r}function f(r,n){var i,a=r.length,o=a,s=-1,l=0;if(null==n)for(;++s<a;)isNaN(i=c(r[s]))?--o:l+=i;else for(;++s<a;)isNaN(i=c(n(r[s],s,r)))?--o:l+=i;if(o)return l/o}function h(r){for(var n,i,a,o=r.length,s=-1,l=0;++s<o;)l+=r[s].length;for(i=Array(l);--o>=0;)for(n=(a=r[o]).length;--n>=0;)i[--l]=a[n];return i}function p(r,n){var i,a,o=r.length,s=-1;if(null==n){for(;++s<o;)if(null!=(i=r[s])&&i>=i)for(a=i;++s<o;)null!=(i=r[s])&&a>i&&(a=i)}else for(;++s<o;)if(null!=(i=n(r[s],s,r))&&i>=i)for(a=i;++s<o;)null!=(i=n(r[s],s,r))&&a>i&&(a=i);return a}function d(r,n,i){r=+r,n=+n,i=(o=arguments.length)<2?(n=r,r=0,1):o<3?1:+i;for(var a=-1,o=0|Math.max(0,Math.ceil((n-r)/i)),s=Array(o);++a<o;)s[a]=r+a*i;return s}function v(r,n){var i,a=r.length,o=-1,s=0;if(null==n)for(;++o<a;)(i=+r[o])&&(s+=i);else for(;++o<a;)(i=+n(r[o],o,r))&&(s+=i);return s}l.slice,l.map},15140:function(r,n,i){"use strict";function a(){}function o(r,n){var i=new a;if(r instanceof a)r.each(function(r,n){i.set(n,r)});else if(Array.isArray(r)){var o,s=-1,l=r.length;if(null==n)for(;++s<l;)i.set(s,r[s]);else for(;++s<l;)i.set(n(o=r[s],s,r),o)}else if(r)for(var u in r)i.set(u,r[u]);return i}i.d(n,{UI:function(){return s},b1:function(){return l}}),a.prototype=o.prototype={constructor:a,has:function(r){return"$"+r in this},get:function(r){return this["$"+r]},set:function(r,n){return this["$"+r]=n,this},remove:function(r){var n="$"+r;return n in this&&delete this[n]},clear:function(){for(var r in this)"$"===r[0]&&delete this[r]},keys:function(){var r=[];for(var n in this)"$"===n[0]&&r.push(n.slice(1));return r},values:function(){var r=[];for(var n in this)"$"===n[0]&&r.push(this[n]);return r},entries:function(){var r=[];for(var n in this)"$"===n[0]&&r.push({key:n.slice(1),value:this[n]});return r},size:function(){var r=0;for(var n in this)"$"===n[0]&&++r;return r},empty:function(){for(var r in this)if("$"===r[0])return!1;return!0},each:function(r){for(var n in this)"$"===n[0]&&r(this[n],n.slice(1),this)}};var s=o;function l(){var r,n,i,a=[],o=[];function l(i,o,u,c){if(o>=a.length)return null!=r&&i.sort(r),null!=n?n(i):i;for(var f,h,p,d=-1,v=i.length,g=a[o++],y=s(),m=u();++d<v;)(p=y.get(f=g(h=i[d])+""))?p.push(h):y.set(f,[h]);return y.each(function(r,n){c(m,n,l(r,o,u,c))}),m}return i={object:function(r){return l(r,0,u,c)},map:function(r){return l(r,0,f,h)},entries:function(r){return function r(i,s){if(++s>a.length)return i;var l,u=o[s-1];return null!=n&&s>=a.length?l=i.entries():(l=[],i.each(function(n,i){l.push({key:i,values:r(n,s)})})),null!=u?l.sort(function(r,n){return u(r.key,n.key)}):l}(l(r,0,f,h),0)},key:function(r){return a.push(r),i},sortKeys:function(r){return o[a.length-1]=r,i},sortValues:function(n){return r=n,i},rollup:function(r){return n=r,i}}}function u(){return{}}function c(r,n,i){r[n]=i}function f(){return s()}function h(r,n,i){r.set(n,i)}function p(){}var d=s.prototype;p.prototype=(function(r,n){var i=new p;if(r instanceof p)r.each(function(r){i.add(r)});else if(r){var a=-1,o=r.length;if(null==n)for(;++a<o;)i.add(r[a]);else for(;++a<o;)i.add(n(r[a],a,r))}return i}).prototype={constructor:p,has:d.has,add:function(r){return this["$"+(r+="")]=r,this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each}},49887:function(r,n,i){"use strict";function a(r,n){var i;function a(){var a,o,s=i.length,l=0,u=0;for(a=0;a<s;++a)l+=(o=i[a]).x,u+=o.y;for(l=l/s-r,u=u/s-n,a=0;a<s;++a)(o=i[a]).x-=l,o.y-=u}return null==r&&(r=0),null==n&&(n=0),a.initialize=function(r){i=r},a.x=function(n){return arguments.length?(r=+n,a):r},a.y=function(r){return arguments.length?(n=+r,a):n},a}function o(r){return function(){return r}}function s(){return 1e-6*(Math.random()-.5)}function l(r,n,i,a){if(isNaN(n)||isNaN(i))return r;var o,s,l,u,c,f,h,p,d,v=r._root,g={data:a},y=r._x0,m=r._y0,x=r._x1,b=r._y1;if(!v)return r._root=g,r;for(;v.length;)if((f=n>=(s=(y+x)/2))?y=s:x=s,(h=i>=(l=(m+b)/2))?m=l:b=l,o=v,!(v=v[p=h<<1|f]))return o[p]=g,r;if(u=+r._x.call(null,v.data),c=+r._y.call(null,v.data),n===u&&i===c)return g.next=v,o?o[p]=g:r._root=g,r;do o=o?o[p]=[,,,,]:r._root=[,,,,],(f=n>=(s=(y+x)/2))?y=s:x=s,(h=i>=(l=(m+b)/2))?m=l:b=l;while((p=h<<1|f)==(d=(c>=l)<<1|u>=s));return o[d]=v,o[p]=g,r}function u(r,n,i,a,o){this.node=r,this.x0=n,this.y0=i,this.x1=a,this.y1=o}function c(r){return r[0]}function f(r){return r[1]}function h(r,n,i){var a=new p(null==n?c:n,null==i?f:i,NaN,NaN,NaN,NaN);return null==r?a:a.addAll(r)}function p(r,n,i,a,o,s){this._x=r,this._y=n,this._x0=i,this._y0=a,this._x1=o,this._y1=s,this._root=void 0}function d(r){for(var n={data:r.data},i=n;r=r.next;)i=i.next={data:r.data};return n}i.r(n),i.d(n,{forceCenter:function(){return a},forceCollide:function(){return m},forceLink:function(){return w},forceManyBody:function(){return W},forceRadial:function(){return X},forceSimulation:function(){return Y},forceX:function(){return J},forceY:function(){return K}});var v=h.prototype=p.prototype;function g(r){return r.x+r.vx}function y(r){return r.y+r.vy}function m(r){var n,i,a=1,l=1;function u(){for(var r,o,u,f,p,d,v,m=n.length,x=0;x<l;++x)for(o=h(n,g,y).visitAfter(c),r=0;r<m;++r)v=(d=i[(u=n[r]).index])*d,f=u.x+u.vx,p=u.y+u.vy,o.visit(b);function b(r,n,i,o,l){var c=r.data,h=r.r,g=d+h;if(!c)return n>f+g||o<f-g||i>p+g||l<p-g;if(c.index>u.index){var y=f-c.x-c.vx,m=p-c.y-c.vy,x=y*y+m*m;x<g*g&&(0===y&&(x+=(y=s())*y),0===m&&(x+=(m=s())*m),x=(g-(x=Math.sqrt(x)))/x*a,u.vx+=(y*=x)*(g=(h*=h)/(v+h)),u.vy+=(m*=x)*g,c.vx-=y*(g=1-g),c.vy-=m*g)}}}function c(r){if(r.data)return r.r=i[r.data.index];for(var n=r.r=0;n<4;++n)r[n]&&r[n].r>r.r&&(r.r=r[n].r)}function f(){if(n){var a,o,s=n.length;for(i=Array(s),a=0;a<s;++a)i[(o=n[a]).index]=+r(o,a,n)}}return"function"!=typeof r&&(r=o(null==r?1:+r)),u.initialize=function(r){n=r,f()},u.iterations=function(r){return arguments.length?(l=+r,u):l},u.strength=function(r){return arguments.length?(a=+r,u):a},u.radius=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),f(),u):r},u}v.copy=function(){var r,n,i=new p(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return i;if(!a.length)return i._root=d(a),i;for(r=[{source:a,target:i._root=[,,,,]}];a=r.pop();)for(var o=0;o<4;++o)(n=a.source[o])&&(n.length?r.push({source:n,target:a.target[o]=[,,,,]}):a.target[o]=d(n));return i},v.add=function(r){var n=+this._x.call(null,r),i=+this._y.call(null,r);return l(this.cover(n,i),n,i,r)},v.addAll=function(r){var n,i,a,o,s=r.length,u=Array(s),c=Array(s),f=1/0,h=1/0,p=-1/0,d=-1/0;for(i=0;i<s;++i)isNaN(a=+this._x.call(null,n=r[i]))||isNaN(o=+this._y.call(null,n))||(u[i]=a,c[i]=o,a<f&&(f=a),a>p&&(p=a),o<h&&(h=o),o>d&&(d=o));if(f>p||h>d)return this;for(this.cover(f,h).cover(p,d),i=0;i<s;++i)l(this,u[i],c[i],r[i]);return this},v.cover=function(r,n){if(isNaN(r=+r)||isNaN(n=+n))return this;var i=this._x0,a=this._y0,o=this._x1,s=this._y1;if(isNaN(i))o=(i=Math.floor(r))+1,s=(a=Math.floor(n))+1;else{for(var l,u,c=o-i,f=this._root;i>r||r>=o||a>n||n>=s;)switch(u=(n<a)<<1|r<i,(l=[,,,,])[u]=f,f=l,c*=2,u){case 0:o=i+c,s=a+c;break;case 1:i=o-c,s=a+c;break;case 2:o=i+c,a=s-c;break;case 3:i=o-c,a=s-c}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=a,this._x1=o,this._y1=s,this},v.data=function(){var r=[];return this.visit(function(n){if(!n.length)do r.push(n.data);while(n=n.next)}),r},v.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},v.find=function(r,n,i){var a,o,s,l,c,f,h,p=this._x0,d=this._y0,v=this._x1,g=this._y1,y=[],m=this._root;for(m&&y.push(new u(m,p,d,v,g)),null==i?i=1/0:(p=r-i,d=n-i,v=r+i,g=n+i,i*=i);f=y.pop();)if(!(!(m=f.node)||(o=f.x0)>v||(s=f.y0)>g||(l=f.x1)<p||(c=f.y1)<d)){if(m.length){var x=(o+l)/2,b=(s+c)/2;y.push(new u(m[3],x,b,l,c),new u(m[2],o,b,x,c),new u(m[1],x,s,l,b),new u(m[0],o,s,x,b)),(h=(n>=b)<<1|r>=x)&&(f=y[y.length-1],y[y.length-1]=y[y.length-1-h],y[y.length-1-h]=f)}else{var _=r-+this._x.call(null,m.data),w=n-+this._y.call(null,m.data),T=_*_+w*w;if(T<i){var k=Math.sqrt(i=T);p=r-k,d=n-k,v=r+k,g=n+k,a=m.data}}}return a},v.remove=function(r){if(isNaN(s=+this._x.call(null,r))||isNaN(l=+this._y.call(null,r)))return this;var n,i,a,o,s,l,u,c,f,h,p,d,v=this._root,g=this._x0,y=this._y0,m=this._x1,x=this._y1;if(!v)return this;if(v.length)for(;;){if((f=s>=(u=(g+m)/2))?g=u:m=u,(h=l>=(c=(y+x)/2))?y=c:x=c,n=v,!(v=v[p=h<<1|f]))return this;if(!v.length)break;(n[p+1&3]||n[p+2&3]||n[p+3&3])&&(i=n,d=p)}for(;v.data!==r;)if(a=v,!(v=v.next))return this;return(o=v.next)&&delete v.next,a?o?a.next=o:delete a.next:n?(o?n[p]=o:delete n[p],(v=n[0]||n[1]||n[2]||n[3])&&v===(n[3]||n[2]||n[1]||n[0])&&!v.length&&(i?i[d]=v:this._root=v)):this._root=o,this},v.removeAll=function(r){for(var n=0,i=r.length;n<i;++n)this.remove(r[n]);return this},v.root=function(){return this._root},v.size=function(){var r=0;return this.visit(function(n){if(!n.length)do++r;while(n=n.next)}),r},v.visit=function(r){var n,i,a,o,s,l,c=[],f=this._root;for(f&&c.push(new u(f,this._x0,this._y0,this._x1,this._y1));n=c.pop();)if(!r(f=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&f.length){var h=(a+s)/2,p=(o+l)/2;(i=f[3])&&c.push(new u(i,h,p,s,l)),(i=f[2])&&c.push(new u(i,a,p,h,l)),(i=f[1])&&c.push(new u(i,h,o,s,p)),(i=f[0])&&c.push(new u(i,a,o,h,p))}return this},v.visitAfter=function(r){var n,i=[],a=[];for(this._root&&i.push(new u(this._root,this._x0,this._y0,this._x1,this._y1));n=i.pop();){var o=n.node;if(o.length){var s,l=n.x0,c=n.y0,f=n.x1,h=n.y1,p=(l+f)/2,d=(c+h)/2;(s=o[0])&&i.push(new u(s,l,c,p,d)),(s=o[1])&&i.push(new u(s,p,c,f,d)),(s=o[2])&&i.push(new u(s,l,d,p,h)),(s=o[3])&&i.push(new u(s,p,d,f,h))}a.push(n)}for(;n=a.pop();)r(n.node,n.x0,n.y0,n.x1,n.y1);return this},v.x=function(r){return arguments.length?(this._x=r,this):this._x},v.y=function(r){return arguments.length?(this._y=r,this):this._y};var x=i(15140);function b(r){return r.index}function _(r,n){var i=r.get(n);if(!i)throw Error("missing: "+n);return i}function w(r){var n,i,a,l,u,c=b,f=function(r){return 1/Math.min(l[r.source.index],l[r.target.index])},h=o(30),p=1;function d(a){for(var o=0,l=r.length;o<p;++o)for(var c,f,h,d,v,g,y,m=0;m<l;++m)f=(c=r[m]).source,d=(h=c.target).x+h.vx-f.x-f.vx||s(),v=h.y+h.vy-f.y-f.vy||s(),d*=g=((g=Math.sqrt(d*d+v*v))-i[m])/g*a*n[m],v*=g,h.vx-=d*(y=u[m]),h.vy-=v*y,f.vx+=d*(y=1-y),f.vy+=v*y}function v(){if(a){var o,s,f=a.length,h=r.length,p=(0,x.UI)(a,c);for(o=0,l=Array(f);o<h;++o)(s=r[o]).index=o,"object"!=typeof s.source&&(s.source=_(p,s.source)),"object"!=typeof s.target&&(s.target=_(p,s.target)),l[s.source.index]=(l[s.source.index]||0)+1,l[s.target.index]=(l[s.target.index]||0)+1;for(o=0,u=Array(h);o<h;++o)s=r[o],u[o]=l[s.source.index]/(l[s.source.index]+l[s.target.index]);n=Array(h),g(),i=Array(h),y()}}function g(){if(a)for(var i=0,o=r.length;i<o;++i)n[i]=+f(r[i],i,r)}function y(){if(a)for(var n=0,o=r.length;n<o;++n)i[n]=+h(r[n],n,r)}return null==r&&(r=[]),d.initialize=function(r){a=r,v()},d.links=function(n){return arguments.length?(r=n,v(),d):r},d.id=function(r){return arguments.length?(c=r,d):c},d.iterations=function(r){return arguments.length?(p=+r,d):p},d.strength=function(r){return arguments.length?(f="function"==typeof r?r:o(+r),g(),d):f},d.distance=function(r){return arguments.length?(h="function"==typeof r?r:o(+r),y(),d):h},d}var T={value:function(){}};function k(){for(var r,n=0,i=arguments.length,a={};n<i;++n){if(!(r=arguments[n]+"")||r in a||/[\s.]/.test(r))throw Error("illegal type: "+r);a[r]=[]}return new A(a)}function A(r){this._=r}function M(r,n,i){for(var a=0,o=r.length;a<o;++a)if(r[a].name===n){r[a]=T,r=r.slice(0,a).concat(r.slice(a+1));break}return null!=i&&r.push({name:n,value:i}),r}A.prototype=k.prototype={constructor:A,on:function(r,n){var i,a=this._,o=(r+"").trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!a.hasOwnProperty(r))throw Error("unknown type: "+r);return{type:r,name:n}}),s=-1,l=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw Error("invalid callback: "+n);for(;++s<l;)if(i=(r=o[s]).type)a[i]=M(a[i],r.name,n);else if(null==n)for(i in a)a[i]=M(a[i],r.name,null);return this}for(;++s<l;)if((i=(r=o[s]).type)&&(i=function(r,n){for(var i,a=0,o=r.length;a<o;++a)if((i=r[a]).name===n)return i.value}(a[i],r.name)))return i},copy:function(){var r={},n=this._;for(var i in n)r[i]=n[i].slice();return new A(r)},call:function(r,n){if((i=arguments.length-2)>0)for(var i,a,o=Array(i),s=0;s<i;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(r))throw Error("unknown type: "+r);for(s=0,i=(a=this._[r]).length;s<i;++s)a[s].value.apply(n,o)},apply:function(r,n,i){if(!this._.hasOwnProperty(r))throw Error("unknown type: "+r);for(var a=this._[r],o=0,s=a.length;o<s;++o)a[o].value.apply(n,i)}};var S,E,L=0,C=0,O=0,P=0,I=0,D=0,z="object"==typeof performance&&performance.now?performance:Date,R="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function F(){return I||(R(B),I=z.now()+D)}function B(){I=0}function N(){this._call=this._time=this._next=null}function j(r,n,i){var a=new N;return a.restart(r,n,i),a}function U(){I=(P=z.now())+D,L=C=0;try{!function(){F(),++L;for(var r,n=S;n;)(r=I-n._time)>=0&&n._call.call(null,r),n=n._next;--L}()}finally{L=0,function(){for(var r,n,i=S,a=1/0;i;)i._call?(a>i._time&&(a=i._time),r=i,i=i._next):(n=i._next,i._next=null,i=r?r._next=n:S=n);E=r,H(a)}(),I=0}}function V(){var r=z.now(),n=r-P;n>1e3&&(D-=n,P=r)}function H(r){L||(C&&(C=clearTimeout(C)),r-I>24?(r<1/0&&(C=setTimeout(U,r-z.now()-D)),O&&(O=clearInterval(O))):(O||(P=z.now(),O=setInterval(V,1e3)),L=1,R(U)))}function q(r){return r.x}function G(r){return r.y}N.prototype=j.prototype={constructor:N,restart:function(r,n,i){if("function"!=typeof r)throw TypeError("callback is not a function");i=(null==i?F():+i)+(null==n?0:+n),this._next||E===this||(E?E._next=this:S=this,E=this),this._call=r,this._time=i,H()},stop:function(){this._call&&(this._call=null,this._time=1/0,H())}};var Z=Math.PI*(3-Math.sqrt(5));function Y(r){var n,i=1,a=.001,o=1-Math.pow(.001,1/300),s=0,l=.6,u=(0,x.UI)(),c=j(h),f=k("tick","end");function h(){p(),f.call("tick",n),i<a&&(c.stop(),f.call("end",n))}function p(a){var c,f,h=r.length;void 0===a&&(a=1);for(var p=0;p<a;++p)for(i+=(s-i)*o,u.each(function(r){r(i)}),c=0;c<h;++c)null==(f=r[c]).fx?f.x+=f.vx*=l:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=l:(f.y=f.fy,f.vy=0);return n}function d(){for(var n,i=0,a=r.length;i<a;++i){if((n=r[i]).index=i,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var o=10*Math.sqrt(i),s=i*Z;n.x=o*Math.cos(s),n.y=o*Math.sin(s)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function v(n){return n.initialize&&n.initialize(r),n}return null==r&&(r=[]),d(),n={tick:p,restart:function(){return c.restart(h),n},stop:function(){return c.stop(),n},nodes:function(i){return arguments.length?(r=i,d(),u.each(v),n):r},alpha:function(r){return arguments.length?(i=+r,n):i},alphaMin:function(r){return arguments.length?(a=+r,n):a},alphaDecay:function(r){return arguments.length?(o=+r,n):+o},alphaTarget:function(r){return arguments.length?(s=+r,n):s},velocityDecay:function(r){return arguments.length?(l=1-r,n):1-l},force:function(r,i){return arguments.length>1?(null==i?u.remove(r):u.set(r,v(i)),n):u.get(r)},find:function(n,i,a){var o,s,l,u,c,f=0,h=r.length;for(null==a?a=1/0:a*=a,f=0;f<h;++f)(l=(o=n-(u=r[f]).x)*o+(s=i-u.y)*s)<a&&(c=u,a=l);return c},on:function(r,i){return arguments.length>1?(f.on(r,i),n):f.on(r)}}}function W(){var r,n,i,a,l=o(-30),u=1,c=1/0,f=.81;function p(a){var o,s=r.length,l=h(r,q,G).visitAfter(v);for(i=a,o=0;o<s;++o)n=r[o],l.visit(g)}function d(){if(r){var n,i,o=r.length;for(a=Array(o),n=0;n<o;++n)a[(i=r[n]).index]=+l(i,n,r)}}function v(r){var n,i,o,s,l,u=0,c=0;if(r.length){for(o=s=l=0;l<4;++l)(n=r[l])&&(i=Math.abs(n.value))&&(u+=n.value,c+=i,o+=i*n.x,s+=i*n.y);r.x=o/c,r.y=s/c}else{(n=r).x=n.data.x,n.y=n.data.y;do u+=a[n.data.index];while(n=n.next)}r.value=u}function g(r,o,l,h){if(!r.value)return!0;var p=r.x-n.x,d=r.y-n.y,v=h-o,g=p*p+d*d;if(v*v/f<g)return g<c&&(0===p&&(g+=(p=s())*p),0===d&&(g+=(d=s())*d),g<u&&(g=Math.sqrt(u*g)),n.vx+=p*r.value*i/g,n.vy+=d*r.value*i/g),!0;if(!(r.length||g>=c)){(r.data!==n||r.next)&&(0===p&&(g+=(p=s())*p),0===d&&(g+=(d=s())*d),g<u&&(g=Math.sqrt(u*g)));do r.data!==n&&(v=a[r.data.index]*i/g,n.vx+=p*v,n.vy+=d*v);while(r=r.next)}}return p.initialize=function(n){r=n,d()},p.strength=function(r){return arguments.length?(l="function"==typeof r?r:o(+r),d(),p):l},p.distanceMin=function(r){return arguments.length?(u=r*r,p):Math.sqrt(u)},p.distanceMax=function(r){return arguments.length?(c=r*r,p):Math.sqrt(c)},p.theta=function(r){return arguments.length?(f=r*r,p):Math.sqrt(f)},p}function X(r,n,i){var a,s,l,u=o(.1);function c(r){for(var o=0,u=a.length;o<u;++o){var c=a[o],f=c.x-n||1e-6,h=c.y-i||1e-6,p=Math.sqrt(f*f+h*h),d=(l[o]-p)*s[o]*r/p;c.vx+=f*d,c.vy+=h*d}}function f(){if(a){var n,i=a.length;for(s=Array(i),l=Array(i),n=0;n<i;++n)l[n]=+r(a[n],n,a),s[n]=isNaN(l[n])?0:+u(a[n],n,a)}}return"function"!=typeof r&&(r=o(+r)),null==n&&(n=0),null==i&&(i=0),c.initialize=function(r){a=r,f()},c.strength=function(r){return arguments.length?(u="function"==typeof r?r:o(+r),f(),c):u},c.radius=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),f(),c):r},c.x=function(r){return arguments.length?(n=+r,c):n},c.y=function(r){return arguments.length?(i=+r,c):i},c}function J(r){var n,i,a,s=o(.1);function l(r){for(var o,s=0,l=n.length;s<l;++s)(o=n[s]).vx+=(a[s]-o.x)*i[s]*r}function u(){if(n){var o,l=n.length;for(i=Array(l),a=Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+r(n[o],o,n))?0:+s(n[o],o,n)}}return"function"!=typeof r&&(r=o(null==r?0:+r)),l.initialize=function(r){n=r,u()},l.strength=function(r){return arguments.length?(s="function"==typeof r?r:o(+r),u(),l):s},l.x=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),u(),l):r},l}function K(r){var n,i,a,s=o(.1);function l(r){for(var o,s=0,l=n.length;s<l;++s)(o=n[s]).vy+=(a[s]-o.y)*i[s]*r}function u(){if(n){var o,l=n.length;for(i=Array(l),a=Array(l),o=0;o<l;++o)i[o]=isNaN(a[o]=+r(n[o],o,n))?0:+s(n[o],o,n)}}return"function"!=typeof r&&(r=o(null==r?0:+r)),l.initialize=function(r){n=r,u()},l.strength=function(r){return arguments.length?(s="function"==typeof r?r:o(+r),u(),l):s},l.y=function(n){return arguments.length?(r="function"==typeof n?n:o(+n),u(),l):r},l}},60721:function(r,n,i){"use strict";function a(r,n){if((i=(r=n?r.toExponential(n-1):r.toExponential()).indexOf("e"))<0)return null;var i,a=r.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+r.slice(i+1)]}i.d(n,{WU:function(){return d},FF:function(){return y}});var o,s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function l(r){var n;if(!(n=s.exec(r)))throw Error("invalid format: "+r);return new u({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function u(r){this.fill=void 0===r.fill?" ":r.fill+"",this.align=void 0===r.align?">":r.align+"",this.sign=void 0===r.sign?"-":r.sign+"",this.symbol=void 0===r.symbol?"":r.symbol+"",this.zero=!!r.zero,this.width=void 0===r.width?void 0:+r.width,this.comma=!!r.comma,this.precision=void 0===r.precision?void 0:+r.precision,this.trim=!!r.trim,this.type=void 0===r.type?"":r.type+""}function c(r,n){var i=a(r,n);if(!i)return r+"";var o=i[0],s=i[1];return s<0?"0."+Array(-s).join("0")+o:o.length>s+1?o.slice(0,s+1)+"."+o.slice(s+1):o+Array(s-o.length+2).join("0")}l.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var f={"%":function(r,n){return(100*r).toFixed(n)},b:function(r){return Math.round(r).toString(2)},c:function(r){return r+""},d:function(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)},e:function(r,n){return r.toExponential(n)},f:function(r,n){return r.toFixed(n)},g:function(r,n){return r.toPrecision(n)},o:function(r){return Math.round(r).toString(8)},p:function(r,n){return c(100*r,n)},r:c,s:function(r,n){var i=a(r,n);if(!i)return r+"";var s=i[0],l=i[1],u=l-(o=3*Math.max(-8,Math.min(8,Math.floor(l/3))))+1,c=s.length;return u===c?s:u>c?s+Array(u-c+1).join("0"):u>0?s.slice(0,u)+"."+s.slice(u):"0."+Array(1-u).join("0")+a(r,Math.max(0,n+u-1))[0]},X:function(r){return Math.round(r).toString(16).toUpperCase()},x:function(r){return Math.round(r).toString(16)}};function h(r){return r}var p,d,v=Array.prototype.map,g=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function y(r){var n,i,s,u=void 0===r.grouping||void 0===r.thousands?h:(i=v.call(r.grouping,Number),s=r.thousands+"",function(r,n){for(var a=r.length,o=[],l=0,u=i[0],c=0;a>0&&u>0&&(c+u+1>n&&(u=Math.max(1,n-c)),o.push(r.substring(a-=u,a+u)),!((c+=u+1)>n));)u=i[l=(l+1)%i.length];return o.reverse().join(s)}),c=void 0===r.currency?"":r.currency[0]+"",p=void 0===r.currency?"":r.currency[1]+"",d=void 0===r.decimal?".":r.decimal+"",y=void 0===r.numerals?h:(n=v.call(r.numerals,String),function(r){return r.replace(/[0-9]/g,function(r){return n[+r]})}),m=void 0===r.percent?"%":r.percent+"",x=void 0===r.minus?"-":r.minus+"",b=void 0===r.nan?"NaN":r.nan+"";function _(r){var n=(r=l(r)).fill,i=r.align,a=r.sign,s=r.symbol,h=r.zero,v=r.width,_=r.comma,w=r.precision,T=r.trim,k=r.type;"n"===k?(_=!0,k="g"):f[k]||(void 0===w&&(w=12),T=!0,k="g"),(h||"0"===n&&"="===i)&&(h=!0,n="0",i="=");var A="$"===s?c:"#"===s&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",M="$"===s?p:/[%p]/.test(k)?m:"",S=f[k],E=/[defgprs%]/.test(k);function L(r){var s,l,c,f=A,p=M;if("c"===k)p=S(r)+p,r="";else{var m=(r=+r)<0||1/r<0;if(r=isNaN(r)?b:S(Math.abs(r),w),T&&(r=function(r){t:for(var n,i=r.length,a=1,o=-1;a<i;++a)switch(r[a]){case".":o=n=a;break;case"0":0===o&&(o=a),n=a;break;default:if(!+r[a])break t;o>0&&(o=0)}return o>0?r.slice(0,o)+r.slice(n+1):r}(r)),m&&0==+r&&"+"!==a&&(m=!1),f=(m?"("===a?a:x:"-"===a||"("===a?"":a)+f,p=("s"===k?g[8+o/3]:"")+p+(m&&"("===a?")":""),E){for(s=-1,l=r.length;++s<l;)if(48>(c=r.charCodeAt(s))||c>57){p=(46===c?d+r.slice(s+1):r.slice(s))+p,r=r.slice(0,s);break}}}_&&!h&&(r=u(r,1/0));var L=f.length+r.length+p.length,C=L<v?Array(v-L+1).join(n):"";switch(_&&h&&(r=u(C+r,C.length?v-p.length:1/0),C=""),i){case"<":r=f+r+p+C;break;case"=":r=f+C+r+p;break;case"^":r=C.slice(0,L=C.length>>1)+f+r+p+C.slice(L);break;default:r=C+f+r+p}return y(r)}return w=void 0===w?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),L.toString=function(){return r+""},L}return{format:_,formatPrefix:function(r,n){var i,o=_(((r=l(r)).type="f",r)),s=3*Math.max(-8,Math.min(8,Math.floor(((i=a(Math.abs(i=n)))?i[1]:NaN)/3))),u=Math.pow(10,-s),c=g[8+s/3];return function(r){return o(u*r)+c}}}}d=(p=y({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})).format,p.formatPrefix},65704:function(r,n,i){"use strict";i.r(n),i.d(n,{geoAiry:function(){return z},geoAiryRaw:function(){return D},geoAitoff:function(){return F},geoAitoffRaw:function(){return R},geoArmadillo:function(){return N},geoArmadilloRaw:function(){return B},geoAugust:function(){return U},geoAugustRaw:function(){return j},geoBaker:function(){return G},geoBakerRaw:function(){return q},geoBerghaus:function(){return W},geoBerghausRaw:function(){return Y},geoBertin1953:function(){return tr},geoBertin1953Raw:function(){return te},geoBoggs:function(){return tl},geoBoggsRaw:function(){return ts},geoBonne:function(){return tp},geoBonneRaw:function(){return th},geoBottomley:function(){return tv},geoBottomleyRaw:function(){return td},geoBromley:function(){return ty},geoBromleyRaw:function(){return tg},geoChamberlin:function(){return tA},geoChamberlinAfrica:function(){return tk},geoChamberlinRaw:function(){return tw},geoCollignon:function(){return tS},geoCollignonRaw:function(){return tM},geoCraig:function(){return tL},geoCraigRaw:function(){return tE},geoCraster:function(){return tP},geoCrasterRaw:function(){return tO},geoCylindricalEqualArea:function(){return tD},geoCylindricalEqualAreaRaw:function(){return tI},geoCylindricalStereographic:function(){return tR},geoCylindricalStereographicRaw:function(){return tz},geoEckert1:function(){return tB},geoEckert1Raw:function(){return tF},geoEckert2:function(){return tj},geoEckert2Raw:function(){return tN},geoEckert3:function(){return tV},geoEckert3Raw:function(){return tU},geoEckert4:function(){return tq},geoEckert4Raw:function(){return tH},geoEckert5:function(){return tZ},geoEckert5Raw:function(){return tG},geoEckert6:function(){return tW},geoEckert6Raw:function(){return tY},geoEisenlohr:function(){return tK},geoEisenlohrRaw:function(){return tJ},geoFahey:function(){return t0},geoFaheyRaw:function(){return tQ},geoFoucaut:function(){return t2},geoFoucautRaw:function(){return t1},geoFoucautSinusoidal:function(){return t5},geoFoucautSinusoidalRaw:function(){return t3},geoGilbert:function(){return t9},geoGingery:function(){return en},geoGingeryRaw:function(){return et},geoGinzburg4:function(){return eo},geoGinzburg4Raw:function(){return ea},geoGinzburg5:function(){return el},geoGinzburg5Raw:function(){return es},geoGinzburg6:function(){return ec},geoGinzburg6Raw:function(){return eu},geoGinzburg8:function(){return eh},geoGinzburg8Raw:function(){return ef},geoGinzburg9:function(){return ed},geoGinzburg9Raw:function(){return ep},geoGringorten:function(){return ey},geoGringortenQuincuncial:function(){return nl},geoGringortenRaw:function(){return eg},geoGuyou:function(){return e_},geoGuyouRaw:function(){return eb},geoHammer:function(){return $},geoHammerRaw:function(){return J},geoHammerRetroazimuthal:function(){return eA},geoHammerRetroazimuthalRaw:function(){return eT},geoHealpix:function(){return eD},geoHealpixRaw:function(){return eC},geoHill:function(){return eR},geoHillRaw:function(){return ez},geoHomolosine:function(){return ej},geoHomolosineRaw:function(){return eN},geoHufnagel:function(){return eV},geoHufnagelRaw:function(){return eU},geoHyperelliptical:function(){return eq},geoHyperellipticalRaw:function(){return eH},geoInterrupt:function(){return eZ},geoInterruptedBoggs:function(){return eW},geoInterruptedHomolosine:function(){return eJ},geoInterruptedMollweide:function(){return e$},geoInterruptedMollweideHemispheres:function(){return e0},geoInterruptedQuarticAuthalic:function(){return rR},geoInterruptedSinuMollweide:function(){return e2},geoInterruptedSinusoidal:function(){return e5},geoKavrayskiy7:function(){return e6},geoKavrayskiy7Raw:function(){return e4},geoLagrange:function(){return e7},geoLagrangeRaw:function(){return e8},geoLarrivee:function(){return re},geoLarriveeRaw:function(){return rt},geoLaskowski:function(){return rn},geoLaskowskiRaw:function(){return rr},geoLittrow:function(){return ra},geoLittrowRaw:function(){return ri},geoLoximuthal:function(){return rs},geoLoximuthalRaw:function(){return ro},geoMiller:function(){return ru},geoMillerRaw:function(){return rl},geoModifiedStereographic:function(){return r_},geoModifiedStereographicAlaska:function(){return rg},geoModifiedStereographicGs48:function(){return ry},geoModifiedStereographicGs50:function(){return rm},geoModifiedStereographicLee:function(){return rb},geoModifiedStereographicMiller:function(){return rx},geoModifiedStereographicRaw:function(){return rc},geoMollweide:function(){return to},geoMollweideRaw:function(){return ta},geoMtFlatPolarParabolic:function(){return rA},geoMtFlatPolarParabolicRaw:function(){return rk},geoMtFlatPolarQuartic:function(){return rS},geoMtFlatPolarQuarticRaw:function(){return rM},geoMtFlatPolarSinusoidal:function(){return rL},geoMtFlatPolarSinusoidalRaw:function(){return rE},geoNaturalEarth:function(){return rC.Z},geoNaturalEarth2:function(){return rP},geoNaturalEarth2Raw:function(){return rO},geoNaturalEarthRaw:function(){return rC.K},geoNellHammer:function(){return rD},geoNellHammerRaw:function(){return rI},geoNicolosi:function(){return rB},geoNicolosiRaw:function(){return rF},geoPatterson:function(){return rj},geoPattersonRaw:function(){return rN},geoPeirceQuincuncial:function(){return nu},geoPierceQuincuncial:function(){return nu},geoPolyconic:function(){return rV},geoPolyconicRaw:function(){return rU},geoPolyhedral:function(){return rW},geoPolyhedralButterfly:function(){return rQ},geoPolyhedralCollignon:function(){return r2},geoPolyhedralWaterman:function(){return r3},geoProject:function(){return r7},geoQuantize:function(){return nc},geoQuincuncial:function(){return ns},geoRectangularPolyconic:function(){return nh},geoRectangularPolyconicRaw:function(){return nf},geoRobinson:function(){return nv},geoRobinsonRaw:function(){return nd},geoSatellite:function(){return ny},geoSatelliteRaw:function(){return ng},geoSinuMollweide:function(){return eB},geoSinuMollweideRaw:function(){return eF},geoSinusoidal:function(){return tf},geoSinusoidalRaw:function(){return tc},geoStitch:function(){return nM},geoTimes:function(){return nE},geoTimesRaw:function(){return nS},geoTwoPointAzimuthal:function(){return nP},geoTwoPointAzimuthalRaw:function(){return nC},geoTwoPointAzimuthalUsa:function(){return nO},geoTwoPointEquidistant:function(){return nz},geoTwoPointEquidistantRaw:function(){return nI},geoTwoPointEquidistantUsa:function(){return nD},geoVanDerGrinten:function(){return nF},geoVanDerGrinten2:function(){return nN},geoVanDerGrinten2Raw:function(){return nB},geoVanDerGrinten3:function(){return nU},geoVanDerGrinten3Raw:function(){return nj},geoVanDerGrinten4:function(){return nH},geoVanDerGrinten4Raw:function(){return nV},geoVanDerGrintenRaw:function(){return nR},geoWagner:function(){return nG},geoWagner4:function(){return nJ},geoWagner4Raw:function(){return nX},geoWagner6:function(){return n$},geoWagner6Raw:function(){return nK},geoWagner7:function(){return nZ},geoWagnerRaw:function(){return nq},geoWiechel:function(){return n0},geoWiechelRaw:function(){return nQ},geoWinkel3:function(){return n2},geoWinkel3Raw:function(){return n1}});var a=i(15002),o=Math.abs,s=Math.atan,l=Math.atan2,u=Math.cos,c=Math.exp,f=Math.floor,h=Math.log,p=Math.max,d=Math.min,v=Math.pow,g=Math.round,y=Math.sign||function(r){return r>0?1:r<0?-1:0},m=Math.sin,x=Math.tan,b=Math.PI,_=b/2,w=b/4,T=Math.SQRT1_2,k=O(2),A=O(b),M=2*b,S=180/b,E=b/180;function L(r){return r>1?_:r<-1?-_:Math.asin(r)}function C(r){return r>1?0:r<-1?b:Math.acos(r)}function O(r){return r>0?Math.sqrt(r):0}function P(r){return(c(r)-c(-r))/2}function I(r){return(c(r)+c(-r))/2}function D(r){var n=x(r/2),i=2*h(u(r/2))/(n*n);function a(r,n){var a=u(r),o=u(n),s=m(n),l=o*a,c=-((1-l?h((1+l)/2)/(1-l):-.5)+i/(1+l));return[c*o*m(r),c*s]}return a.invert=function(n,a){var s,c=O(n*n+a*a),f=-r/2,p=50;if(!c)return[0,0];do{var d=f/2,v=u(d),g=m(d),y=g/v,x=-h(o(v));f-=s=(2/y*x-i*y-c)/(-x/(g*g)+1-i/(2*v*v))*(v<0?.7:1)}while(o(s)>1e-6&&--p>0);var b=m(f);return[l(n*b,c*u(f)),L(a*b/c)]},a}function z(){var r=_,n=(0,a.r)(D),i=n(r);return i.radius=function(i){return arguments.length?n(r=i*E):r*S},i.scale(179.976).clipAngle(147)}function R(r,n){var i,a=u(n),o=(i=C(a*u(r/=2)))?i/Math.sin(i):1;return[2*a*m(r)*o,m(n)*o]}function F(){return(0,a.Z)(R).scale(152.63)}function B(r){var n=m(r),i=u(r),a=r>=0?1:-1,s=x(a*r),c=(1+n-i)/2;function f(r,o){var f=u(o),h=u(r/=2);return[(1+f)*m(r),(a*o>-l(h,s)-.001?0:-(10*a))+c+m(o)*i-(1+f)*n*h]}return f.invert=function(r,f){var h=0,p=0,d=50;do{var v=u(h),g=m(h),y=u(p),x=m(p),b=1+y,_=b*g-r,w=c+x*i-b*n*v-f,T=b*v/2,k=-g*x,A=n*b*g/2,M=i*y+n*v*x,S=k*A-M*T,E=(w*k-_*M)/S/2,L=(_*A-w*T)/S;o(L)>2&&(L/=2),h-=E,p-=L}while((o(E)>1e-6||o(L)>1e-6)&&--d>0);return a*p>-l(u(h),s)-.001?[2*h,p]:null},f}function N(){var r=20*E,n=r>=0?1:-1,i=x(n*r),o=(0,a.r)(B),s=o(r),c=s.stream;return s.parallel=function(a){return arguments.length?(i=x((n=(r=a*E)>=0?1:-1)*r),o(r)):r*S},s.stream=function(a){var o=s.rotate(),f=c(a),h=(s.rotate([0,0]),c(a)),p=s.precision();return s.rotate(o),f.sphere=function(){h.polygonStart(),h.lineStart();for(var a=-180*n;n*a<180;a+=90*n)h.point(a,90*n);if(r)for(;n*(a-=3*n*p)>=-180;)h.point(a,-(n*l(u(a*E/2),i))*S);h.lineEnd(),h.polygonEnd()},f},s.scale(218.695).center([0,28.0974])}function j(r,n){var i=x(n/2),a=O(1-i*i),o=1+a*u(r/=2),s=m(r)*a/o,l=i/o,c=s*s,f=l*l;return[4/3*s*(3+c-3*f),4/3*l*(3+3*c-f)]}function U(){return(0,a.Z)(j).scale(66.1603)}R.invert=function(r,n){if(!(r*r+4*n*n>b*b+1e-6)){var i=r,a=n,s=25;do{var l,c=m(i),f=m(i/2),h=u(i/2),p=m(a),d=u(a),v=m(2*a),g=p*p,y=d*d,x=f*f,_=1-y*h*h,w=_?C(d*h)*O(l=1/_):l=0,T=2*w*d*f-r,k=w*p-n,A=l*(y*x+w*d*h*g),M=l*(.5*c*v-2*w*p*f),S=.25*l*(v*f-w*p*y*c),E=l*(g*h+w*x*d),L=M*S-E*A;if(!L)break;var P=(k*M-T*E)/L,I=(T*S-k*A)/L;i-=P,a-=I}while((o(P)>1e-6||o(I)>1e-6)&&--s>0);return[i,a]}},j.invert=function(r,n){if(n*=3/8,!(r*=3/8)&&o(n)>1)return null;var i,a,s=1+r*r+n*n,c=O((s-O(s*s-4*n*n))/2),f=L(c)/3,p=c?h((i=o(n/c))+O(i*i-1))/3:h((a=o(r))+O(a*a+1))/3,d=u(f),v=I(p),g=v*v-d*d;return[2*y(r)*l(P(p)*d,.25-g),2*y(n)*l(v*m(f),.25+g)]};var V=O(8),H=h(1+k);function q(r,n){var i=o(n);return i<w?[r,h(x(w+n/2))]:[r*u(i)*(2*k-1/m(i)),y(n)*(2*k*(i-w)-h(x(i/2)))]}function G(){return(0,a.Z)(q).scale(112.314)}q.invert=function(r,n){if((a=o(n))<H)return[r,2*s(c(n))-_];var i,a,l=w,f=25;do{var p=u(l/2),d=x(l/2);l-=i=(V*(l-w)-h(d)-a)/(V-p*p/(2*d))}while(o(i)>1e-12&&--f>0);return[r/(u(l)*(V-1/m(l))),y(n)*l]};var Z=i(17889);function Y(r){var n=2*b/r;function i(r,i){var a=(0,Z.N)(r,i);if(o(r)>_){var s=l(a[1],a[0]),c=O(a[0]*a[0]+a[1]*a[1]),f=n*g((s-_)/n)+_,h=l(m(s-=f),2-u(s));s=f+L(b/c*m(h))-h,a[0]=c*u(s),a[1]=c*m(s)}return a}return i.invert=function(r,i){var a=O(r*r+i*i);if(a>_){var o=l(i,r),c=n*g((o-_)/n)+_,f=o>c?-1:1,h=a*u(c-o),p=1/x(f*C((h-b)/O(b*(b-2*h)+a*a)));r=a*u(o=c+2*s((p+f*O(p*p-3))/3)),i=a*m(o)}return Z.N.invert(r,i)},i}function W(){var r=5,n=(0,a.r)(Y),i=n(r),o=i.stream,s=-u(.01*E),c=m(.01*E);return i.lobes=function(i){return arguments.length?n(r=+i):r},i.stream=function(n){var a=i.rotate(),f=o(n),h=(i.rotate([0,0]),o(n));return i.rotate(a),f.sphere=function(){h.polygonStart(),h.lineStart();for(var n=0,i=360/r,a=2*b/r,o=90-180/r,f=_;n<r;++n,o-=i,f-=a)h.point(l(c*u(f),s)*S,L(c*m(f))*S),o<-90?(h.point(-90,-180-o-.01),h.point(-90,-180-o+.01)):(h.point(90,o+.01),h.point(90,o-.01));h.lineEnd(),h.polygonEnd()},f},i.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var X=i(12956);function J(r,n){if(arguments.length<2&&(n=r),1===n)return X.l;if(n===1/0)return K;function i(i,a){var o=(0,X.l)(i/n,a);return o[0]*=r,o}return i.invert=function(i,a){var o=X.l.invert(i/r,a);return o[0]*=n,o},i}function K(r,n){return[r*u(n)/u(n/=2),2*m(n)]}function $(){var r=2,n=(0,a.r)(J),i=n(r);return i.coefficient=function(i){return arguments.length?n(r=+i):r},i.scale(169.529)}function Q(r,n,i){var a,s,l,u=100;i=void 0===i?0:+i,n=+n;do(s=r(i))===(l=r(i+1e-6))&&(l=s+1e-6),i-=a=-.000001*(s-n)/(s-l);while(u-- >0&&o(a)>1e-6);return u<0?NaN:i}function tt(r,n,i){return void 0===n&&(n=40),void 0===i&&(i=1e-12),function(a,s,l,u){var c,f,h;l=void 0===l?0:+l,u=void 0===u?0:+u;for(var p=0;p<n;p++){var d=r(l,u),v=d[0]-a,g=d[1]-s;if(o(v)<i&&o(g)<i)break;var y=v*v+g*g;if(y>c)l-=f/=2,u-=h/=2;else{c=y;var m=(l>0?-1:1)*i,x=(u>0?-1:1)*i,b=r(l+m,u),_=r(l,u+x),w=(b[0]-d[0])/m,T=(b[1]-d[1])/m,k=(_[0]-d[0])/x,A=(_[1]-d[1])/x,M=A*w-T*k,S=(.5>o(M)?.5:1)/M;if(l+=f=(g*k-v*A)*S,u+=h=(v*T-g*w)*S,o(f)<i&&o(h)<i)break}}return[l,u]}}function te(){var r=J(1.68,2);function n(n,i){if(n+i<-1.4){var a=(n-i+1.6)*(n+i+1.4)/8;n+=a,i-=.8*a*m(i+b/2)}var o=r(n,i),s=(1-u(n*i))/12;return o[1]<0&&(o[0]*=1+s),o[1]>0&&(o[1]*=1+s/1.5*o[0]*o[0]),o}return n.invert=tt(n),n}function tr(){return(0,a.Z)(te()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function tn(r,n){var i,a=r*m(n),s=30;do n-=i=(n+m(n)-a)/(1+u(n));while(o(i)>1e-6&&--s>0);return n/2}function ti(r,n,i){function a(a,o){return[r*a*u(o=tn(i,o)),n*m(o)]}return a.invert=function(a,o){return[a/(r*u(o=L(o/n))),L((2*o+m(2*o))/i)]},a}K.invert=function(r,n){var i=2*L(n/2);return[r*u(i/2)/u(i),i]};var ta=ti(k/_,k,b);function to(){return(0,a.Z)(ta).scale(169.529)}function ts(r,n){var i=tn(b,n);return[2.00276*r/(1/u(n)+1.11072/u(i)),(n+k*m(i))/2.00276]}function tl(){return(0,a.Z)(ts).scale(160.857)}function tu(r){var n=0,i=(0,a.r)(r),o=i(n);return o.parallel=function(r){return arguments.length?i(n=r*E):n*S},o}function tc(r,n){return[r*u(n),n]}function tf(){return(0,a.Z)(tc).scale(152.63)}function th(r){if(!r)return tc;var n=1/x(r);function i(i,a){var o=n+r-a,s=o?i*u(a)/o:o;return[o*m(s),n-o*u(s)]}return i.invert=function(i,a){var o=O(i*i+(a=n-a)*a),s=n+r-o;return[o/u(s)*l(i,a),s]},i}function tp(){return tu(th).scale(123.082).center([0,26.1441]).parallel(45)}function td(r){function n(n,i){var a=_-i,o=a?n*r*m(a)/a:a;return[a*m(o)/r,_-a*u(o)]}return n.invert=function(n,i){var a=n*r,o=_-i,s=O(a*a+o*o),u=l(a,o);return[(s?s/m(s):1)*u/r,_-s]},n}function tv(){var r=.5,n=(0,a.r)(td),i=n(r);return i.fraction=function(i){return arguments.length?n(r=+i):r},i.scale(158.837)}ts.invert=function(r,n){var i,a,s=2.00276*n,l=n<0?-w:w,c=25;do a=s-k*m(l),l-=i=(m(2*l)+2*l-b*m(a))/(2*u(2*l)+2+b*u(a)*k*u(l));while(o(i)>1e-6&&--c>0);return[r*(1/u(a=s-k*m(l))+1.11072/u(l))/2.00276,a]},tc.invert=function(r,n){return[r/u(n),n]};var tg=ti(1,4/b,b);function ty(){return(0,a.Z)(tg).scale(152.63)}var tm=i(66624),tx=i(49386);function tb(r,n,i,a,s,c){var f,h=u(c);if(o(r)>1||o(c)>1)f=C(i*s+n*a*h);else{var p=m(r/2),d=m(c/2);f=2*L(O(p*p+n*a*d*d))}return o(f)>1e-6?[f,l(a*m(c),n*s-i*a*h)]:[0,0]}function t_(r,n,i){return C((r*r+n*n-i*i)/(2*r*n))}function tw(r,n,i){for(var a,o=[[r[0],r[1],m(r[1]),u(r[1])],[n[0],n[1],m(n[1]),u(n[1])],[i[0],i[1],m(i[1]),u(i[1])]],s=o[2],l=0;l<3;++l,s=a)a=o[l],s.v=tb(a[1]-s[1],s[3],s[2],a[3],a[2],a[0]-s[0]),s.point=[0,0];var c=t_(o[0].v[0],o[2].v[0],o[1].v[0]),h=t_(o[0].v[0],o[1].v[0],o[2].v[0]),p=b-c;o[2].point[1]=0,o[0].point[0]=-(o[1].point[0]=o[0].v[0]/2);var d=[o[2].point[0]=o[0].point[0]+o[2].v[0]*u(c),2*(o[0].point[1]=o[1].point[1]=o[2].v[0]*m(c))];return function(r,n){var i,a=m(n),s=u(n),l=[,,,];for(i=0;i<3;++i){var c,v=o[i];if(l[i]=tb(n-v[1],v[3],v[2],s,a,r-v[0]),!l[i][0])return v.point;l[i][1]=(c=l[i][1]-v.v[1])-2*b*f((c+b)/(2*b))}var g=d.slice();for(i=0;i<3;++i){var y=2==i?0:i+1,x=t_(o[i].v[0],l[i][0],l[y][0]);l[i][1]<0&&(x=-x),i?1==i?(x=h-x,g[0]-=l[i][0]*u(x),g[1]-=l[i][0]*m(x)):(x=p-x,g[0]+=l[i][0]*u(x),g[1]+=l[i][0]*m(x)):(g[0]+=l[i][0]*u(x),g[1]-=l[i][0]*m(x))}return g[0]/=3,g[1]/=3,g}}function tT(r){return r[0]*=E,r[1]*=E,r}function tk(){return tA([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function tA(r,n,i){var o=(0,tm.Z)({type:"MultiPoint",coordinates:[r,n,i]}),s=[-o[0],-o[1]],l=(0,tx.Z)(s),u=tw(tT(l(r)),tT(l(n)),tT(l(i)));u.invert=tt(u);var c=(0,a.Z)(u).rotate(s),f=c.center;return delete c.rotate,c.center=function(r){return arguments.length?f(l(r)):l.invert(f())},c.clipAngle(90)}function tM(r,n){var i=O(1-m(n));return[2/A*r*i,A*(1-i)]}function tS(){return(0,a.Z)(tM).scale(95.6464).center([0,30])}function tE(r){var n=x(r);function i(r,i){return[r,(r?r/m(r):1)*(m(i)*u(r)-n*u(i))]}return i.invert=n?function(r,i){r&&(i*=m(r)/r);var a=u(r);return[r,2*l(O(a*a+n*n-i*i)-a,n-i)]}:function(r,n){return[r,L(r?n*x(r)/r:n)]},i}function tL(){return tu(tE).scale(249.828).clipAngle(90)}tM.invert=function(r,n){var i=(i=n/A-1)*i;return[i>0?r*O(b/i)/2:0,L(1-i)]};var tC=O(3);function tO(r,n){return[tC*r*(2*u(2*n/3)-1)/A,tC*A*m(n/3)]}function tP(){return(0,a.Z)(tO).scale(156.19)}function tI(r){var n=u(r);function i(r,i){return[r*n,m(i)/n]}return i.invert=function(r,i){return[r/n,L(i*n)]},i}function tD(){return tu(tI).parallel(38.58).scale(195.044)}function tz(r){var n=u(r);function i(r,i){return[r*n,(1+n)*x(i/2)]}return i.invert=function(r,i){return[r/n,2*s(i/(1+n))]},i}function tR(){return tu(tz).scale(124.75)}function tF(r,n){var i=O(8/(3*b));return[i*r*(1-o(n)/b),i*n]}function tB(){return(0,a.Z)(tF).scale(165.664)}function tN(r,n){var i=O(4-3*m(o(n)));return[2/O(6*b)*r*i,y(n)*O(2*b/3)*(2-i)]}function tj(){return(0,a.Z)(tN).scale(165.664)}function tU(r,n){var i=O(b*(4+b));return[2/i*r*(1+O(1-4*n*n/(b*b))),4/i*n]}function tV(){return(0,a.Z)(tU).scale(180.739)}function tH(r,n){var i=(2+_)*m(n);n/=2;for(var a=0,s=1/0;a<10&&o(s)>1e-6;a++){var l=u(n);n-=s=(n+m(n)*(l+2)-i)/(2*l*(1+l))}return[2/O(b*(4+b))*r*(1+u(n)),2*O(b/(4+b))*m(n)]}function tq(){return(0,a.Z)(tH).scale(180.739)}function tG(r,n){return[r*(1+u(n))/O(2+b),2*n/O(2+b)]}function tZ(){return(0,a.Z)(tG).scale(173.044)}function tY(r,n){for(var i=(1+_)*m(n),a=0,s=1/0;a<10&&o(s)>1e-6;a++)n-=s=(n+m(n)-i)/(1+u(n));return i=O(2+b),[r*(1+u(n))/i,2*n/i]}function tW(){return(0,a.Z)(tY).scale(173.044)}tO.invert=function(r,n){var i=3*L(n/(tC*A));return[A*r/(tC*(2*u(2*i/3)-1)),i]},tF.invert=function(r,n){var i=O(8/(3*b)),a=n/i;return[r/(i*(1-o(a)/b)),a]},tN.invert=function(r,n){var i=2-o(n)/O(2*b/3);return[r*O(6*b)/(2*i),y(n)*L((4-i*i)/3)]},tU.invert=function(r,n){var i=O(b*(4+b))/2;return[r*i/(1+O(1-n*n*(4+b)/(4*b))),n*i/2]},tH.invert=function(r,n){var i=n*O((4+b)/b)/2,a=L(i),o=u(a);return[r/(2/O(b*(4+b))*(1+o)),L((a+i*(o+2))/(2+_))]},tG.invert=function(r,n){var i=O(2+b),a=n*i/2;return[i*r/(1+u(a)),a]},tY.invert=function(r,n){var i=1+_,a=O(i/2);return[2*r*a/(1+u(n*=a)),L((n+m(n))/i)]};var tX=3+2*k;function tJ(r,n){var i=m(r/=2),a=u(r),o=O(u(n)),l=u(n/=2),c=m(n)/(l+k*a*o),f=O(2/(1+c*c)),p=O((k*l+(a+i)*o)/(k*l+(a-i)*o));return[tX*(f*(p-1/p)-2*h(p)),tX*(f*c*(p+1/p)-2*s(c))]}function tK(){return(0,a.Z)(tJ).scale(62.5271)}tJ.invert=function(r,n){if(!(i=j.invert(r/1.2,1.065*n)))return null;var i,a=i[0],l=i[1],c=20;r/=tX,n/=tX;do{var f=a/2,v=l/2,g=m(f),y=u(f),x=m(v),b=u(v),w=u(l),A=O(w),M=x/(b+k*y*A),S=M*M,E=O(2/(1+S)),L=(k*b+(y+g)*A)/(k*b+(y-g)*A),C=O(L),P=C-1/C,I=C+1/C,D=E*P-2*h(C)-r,z=E*M*I-2*s(M)-n,R=x&&T*A*g*S/x,F=(k*y*b+A)/(2*(b+k*y*A)*(b+k*y*A)*A),B=-.5*M*E*E*E,N=B*R,U=B*F,V=(V=2*b+k*A*(y-g))*V*C,H=(k*y*b*A+w)/V,q=-k*g*x/(A*V),G=P*N-2*H/C+E*(H+H/L),Z=P*U-2*q/C+E*(q+q/L),Y=M*I*N-2*R/(1+S)+E*I*R+E*M*(H-H/L),W=M*I*U-2*F/(1+S)+E*I*F+E*M*(q-q/L),X=Z*Y-W*G;if(!X)break;var J=(z*Z-D*W)/X,K=(D*Y-z*G)/X;a-=J,l=p(-_,d(_,l-K))}while((o(J)>1e-6||o(K)>1e-6)&&--c>0);return 1e-6>o(o(l)-_)?[0,l]:c&&[a,l]};var t$=u(35*E);function tQ(r,n){var i=x(n/2);return[r*t$*O(1-i*i),(1+t$)*i]}function t0(){return(0,a.Z)(tQ).scale(137.152)}function t1(r,n){var i=n/2,a=u(i);return[2*r/A*u(n)*a*a,A*x(i)]}function t2(){return(0,a.Z)(t1).scale(135.264)}function t3(r){var n=1-r,i=o(b,0)[0]-o(-b,0)[0],a=O(2*(o(0,_)[1]-o(0,-_)[1])/i);function o(i,a){var o=u(a),s=m(a);return[o/(n+r*o)*i,n*a+r*s]}function s(r,n){var i=o(r,n);return[i[0]*a,i[1]/a]}function l(r){return s(0,r)[1]}return s.invert=function(i,o){var s=Q(l,o);return[i/a*(r+n/u(s)),s]},s}function t5(){var r=.5,n=(0,a.r)(t3),i=n(r);return i.alpha=function(i){return arguments.length?n(r=+i):r},i.scale(168.725)}tQ.invert=function(r,n){var i=n/(1+t$);return[r&&r/(t$*O(1-i*i)),2*s(i)]},t1.invert=function(r,n){var i=s(n/A),a=u(i),o=2*i;return[r*A/2/(u(o)*a*a),o]};var t4=i(57962),t6=i(97492);function t8(r){return[r[0]/2,L(x(r[1]/2*E))*S]}function t7(r){return[2*r[0],2*s(m(r[1]*E))*S]}function t9(r){null==r&&(r=t4.Z);var n=r(),i=(0,t6.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function a(r){return n(t8(r))}function o(r){a[r]=function(){return arguments.length?(n[r].apply(n,arguments),a):n[r]()}}return n.invert&&(a.invert=function(r){return t7(n.invert(r))}),a.stream=function(r){var a=n.stream(r),o=i.stream({point:function(r,n){a.point(r/2,L(x(-n/2*E))*S)},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}});return o.sphere=a.sphere,o},a.rotate=function(r){return arguments.length?(i.rotate(r),a):i.rotate()},a.center=function(r){return arguments.length?(n.center(t8(r)),a):t7(n.center())},o("angle"),o("clipAngle"),o("clipExtent"),o("fitExtent"),o("fitHeight"),o("fitSize"),o("fitWidth"),o("scale"),o("translate"),o("precision"),a.scale(249.5)}function et(r,n){var i=2*b/n,a=r*r;function s(n,s){var c=(0,Z.N)(n,s),f=c[0],h=c[1],p=f*f+h*h;if(p>a){var d=O(p),v=l(h,f),y=i*g(v/i),x=v-y,w=r*u(x),T=(r*m(x)-x*m(w))/(_-w),k=ee(x,T),A=(b-r)/er(k,w,b);f=d;var M,S=50;do f-=M=(r+er(k,w,f)*A-d)/(k(f)*A);while(o(M)>1e-6&&--S>0);h=x*m(f),f<_&&(h-=T*(f-_));var E=m(y),L=u(y);c[0]=f*L-h*E,c[1]=f*E+h*L}return c}return s.invert=function(n,s){var c=n*n+s*s;if(c>a){var f=O(c),h=l(s,n),p=i*g(h/i),d=h-p;n=f*u(d),s=f*m(d);for(var v=n-_,y=m(n),x=s/y,w=n<_?1/0:0,T=10;;){var k=r*m(x),A=r*u(x),M=m(A),S=_-A,E=(k-x*M)/S,L=ee(x,E);if(1e-12>o(w)||!--T)break;x-=w=(x*y-E*v-s)/(y-2*v*(S*(A+x*k*u(A)-M)-k*(k-x*M))/(S*S))}n=(f=r+er(L,A,n)*(b-r)/er(L,A,b))*u(h=p+x),s=f*m(h)}return Z.N.invert(n,s)},s}function ee(r,n){return function(i){var a=r*u(i);return i<_&&(a-=n),O(1+a*a)}}function er(r,n,i){for(var a=(i-n)/50,o=r(n)+r(i),s=1,l=n;s<50;++s)o+=2*r(l+=a);return .5*o*a}function en(){var r=6,n=30*E,i=u(n),o=m(n),s=(0,a.r)(et),c=s(n,r),f=c.stream,h=-u(.01*E),p=m(.01*E);return c.radius=function(a){return arguments.length?(i=u(n=a*E),o=m(n),s(n,r)):n*S},c.lobes=function(i){return arguments.length?s(n,r=+i):r},c.stream=function(n){var a=c.rotate(),s=f(n),d=(c.rotate([0,0]),f(n));return c.rotate(a),s.sphere=function(){d.polygonStart(),d.lineStart();for(var n=0,a=2*b/r,s=0;n<r;++n,s-=a)d.point(l(p*u(s),h)*S,L(p*m(s))*S),d.point(l(o*u(s-a/2),i)*S,L(o*m(s-a/2))*S);d.lineEnd(),d.polygonEnd()},s},c.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ei(r,n,i,a,s,l,c,f){function h(o,h){if(!h)return[r*o/b,0];var p=h*h,d=r+p*(n+p*(i+p*a)),v=h*(s-1+p*(l-f+p*c)),g=(d*d+v*v)/(2*v),y=o*L(d/g)/b;return[g*m(y),h*(1+p*f)+g*(1-u(y))]}return arguments.length<8&&(f=0),h.invert=function(h,p){var d,v,g=b*h/r,y=p,x=50;do{var _=y*y,w=r+_*(n+_*(i+_*a)),T=y*(s-1+_*(l-f+_*c)),k=w*w+T*T,A=2*T,M=k/A,S=M*M,E=L(w/M)/b,C=g*E,P=w*w,I=(2*n+_*(4*i+6*_*a))*y,D=s+_*(3*l+5*_*c),z=(2*(w*I+T*(D-1))*A-2*(D-1)*k)/(A*A),R=u(C),F=m(C),B=M*R,N=M*F,j=g/b*(1/O(1-P/S))*(I*M-w*z)/S,U=N-h,V=y*(1+_*f)+M-B-p,H=z*F+B*j,q=B*E,G=1+z-(z*R-N*j),Z=N*E,Y=H*Z-G*q;if(!Y)break;g-=d=(V*H-U*G)/Y,y-=v=(U*Z-V*q)/Y}while((o(d)>1e-6||o(v)>1e-6)&&--x>0);return[g,y]},h}var ea=ei(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function eo(){return(0,a.Z)(ea).scale(149.995)}var es=ei(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function el(){return(0,a.Z)(es).scale(153.93)}var eu=ei(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ec(){return(0,a.Z)(eu).scale(130.945)}function ef(r,n){var i=r*r,a=n*n;return[r*(1-.162388*a)*(.87-952426e-9*i*i),n*(1+a/12)]}function eh(){return(0,a.Z)(ef).scale(131.747)}ef.invert=function(r,n){var i,a=r,s=n,l=50;do{var u=s*s;s-=i=(s*(1+u/12)-n)/(1+u/4)}while(o(i)>1e-6&&--l>0);l=50,r/=1-.162388*u;do{var c=(c=a*a)*c;a-=i=(a*(.87-952426e-9*c)-r)/(.87-.00476213*c)}while(o(i)>1e-6&&--l>0);return[a,s]};var ep=ei(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ed(){return(0,a.Z)(ep).scale(131.087)}function ev(r){var n=r(_,0)[0]-r(-_,0)[0];function i(i,a){var o=i>0?-.5:.5,s=r(i+o*b,a);return s[0]-=o*n,s}return r.invert&&(i.invert=function(i,a){var o=i>0?-.5:.5,s=r.invert(i+o*n,a),l=s[0]-o*b;return l<-b?l+=2*b:l>b&&(l-=2*b),s[0]=l,s}),i}function eg(r,n){var i=y(r),a=y(n),s=u(n),c=u(r)*s,f=m(r)*s,h=m(a*n);r=o(l(f,h)),n=L(c),o(r-_)>1e-6&&(r%=_);var p=function(r,n){if(n===_)return[0,0];var i,a,s=m(n),l=s*s,c=l*l,f=1+c,h=1+3*c,p=1-c,d=L(1/O(f)),v=p+l*f*d,g=(1-s)/v,y=O(g),x=g*f,w=O(x),T=y*p;if(0===r)return[0,-(T+l*w)];var k,A=u(n),M=1/A,S=2*s*A,E=(-v*A-(-3*l+d*h)*S*(1-s))/(v*v),C=-M*S,P=-M*(l*f*E+g*h*S),I=-2*M*(.5*E/y*p-2*l*y*S),D=4*r/b;if(r>.222*b||n<b/4&&r>.175*b){if(i=(T+l*O(x*(1+c)-T*T))/(1+c),r>b/4)return[i,i];var z=i,R=.5*i;i=.5*(R+z),a=50;do{var F=i*(I+C*O(x-i*i))+P*L(i/w)-D;if(!F)break;F<0?R=i:z=i,i=.5*(R+z)}while(o(z-R)>1e-6&&--a>0)}else{i=1e-6,a=25;do{var B=i*i,N=O(x-B),j=I+C*N,U=i*j+P*L(i/w)-D;i-=k=N?U/(j+(P-C*B)/N):0}while(o(k)>1e-6&&--a>0)}return[i,-T-l*O(x-i*i)]}(r>b/4?_-r:r,n);return r>b/4&&(h=p[0],p[0]=-p[1],p[1]=-h),p[0]*=i,p[1]*=-a,p}function ey(){return(0,a.Z)(ev(eg)).scale(239.75)}function em(r,n){if(n<1e-6)return[(f=m(r))-(i=n*(r-f*(a=u(r)))/4)*a,a+i*f,1-n*f*f/2,r-i];if(n>=.999999)return i=(1-n)/4,l=1/(a=I(r)),[(f=((p=c(2*(p=r)))-1)/(p+1))+i*((h=a*P(r))-r)/(a*a),l-i*f*l*(h-r),l+i*f*l*(h+r),2*s(c(r))-_+i*(h-r)/a];var i,a,l,f,h,p,d=[1,0,0,0,0,0,0,0,0],v=[O(n),0,0,0,0,0,0,0,0],g=0;for(a=O(1-n),h=1;o(v[g]/d[g])>1e-6&&g<8;)i=d[g++],v[g]=(i-a)/2,d[g]=(i+a)/2,a=O(i*a),h*=2;l=h*d[g]*r;do l=(L(f=v[g]*m(a=l)/d[g])+l)/2;while(--g);return[m(l),f=u(l),f/u(l-a),l]}function ex(r,n){if(!n)return r;if(1===n)return h(x(r/2+w));for(var i=1,a=O(1-n),l=O(n),u=0;o(l)>1e-6;u++){if(r%b){var c=s(a*x(r)/i);c<0&&(c+=b),r+=c+~~(r/b)*b}else r+=r;l=(i+a)/2,a=O(i*a),l=((i=l)-a)/2}return r/(v(2,u)*i)}function eb(r,n){var i,a,f,p,d,v=(k-1)/(k+1),g=O(1-v*v),w=ex(_,g*g),T=c(-1*h(x(b/4+o(n)/2)))/O(v),A=(i=T*u(-1*r),a=T*m(-1*r),f=i*i,p=a+1,[.5*((i>=0?_:-_)-l(d=1-f-a*a,2*i)),-.25*h(d*d+4*f)+.5*h(p*p+f)]),M=function(r,n,i){var a=o(r),l=P(o(n));if(a){var u=1/m(a),c=1/(x(a)*x(a)),f=-(c+l*l*u*u*i-1+i),h=(-f+O(f*f-(i-1)*c*4))/2;return[ex(s(1/O(h)),i)*y(r),ex(s(O((h/c-1)/i)),1-i)*y(n)]}return[0,ex(s(l),1-i)*y(n)]}(A[0],A[1],g*g);return[-M[1],(n>=0?1:-1)*(.5*w-M[0])]}function e_(){return(0,a.Z)(ev(eb)).scale(151.496)}eg.invert=function(r,n){o(r)>1&&(r=2*y(r)-r),o(n)>1&&(n=2*y(n)-n);var i=y(r),a=y(n),s=-i*r,c=-a*n,f=c/s<1,h=function(r,n){for(var i=0,a=1,s=.5,l=50;;){var c=s*s,f=O(s),h=L(1/O(1+c)),p=1-c+s*(1+c)*h,d=(1-f)/p,v=O(d),g=d*(1+c),y=v*(1-c),m=O(g-r*r),x=n+y+s*m;if(1e-12>o(a-i)||0==--l||0===x)break;x>0?i=s:a=s,s=.5*(i+a)}if(!l)return null;var _=L(f),w=u(_),T=1/w,k=2*f*w,A=(-p*w-(-3*s+h*(1+3*c))*k*(1-f))/(p*p);return[b/4*(r*(-2*T*(.5*A/v*(1-c)-2*s*v*k)+-T*k*m)+-T*(s*(1+c)*A+d*(1+3*c)*k)*L(r/O(g))),_]}(f?c:s,f?s:c),p=h[0],d=h[1],v=u(d);return f&&(p=-_-p),[i*(l(m(p)*v,-m(d))+b),a*L(u(p)*v)]},eb.invert=function(r,n){var i,a,o,u,f,p,d,v,g,y=(k-1)/(k+1),m=O(1-y*y),x=(f=-r,p=m*m,(u=.5*ex(_,m*m)-n)?(d=em(u,p),f?(g=(v=em(f,1-p))[1]*v[1]+p*d[0]*d[0]*v[0]*v[0],[[d[0]*v[2]/g,d[1]*d[2]*v[0]*v[1]/g],[d[1]*v[1]/g,-d[0]*d[2]*v[0]*v[2]/g],[d[2]*v[1]*v[2]/g,-p*d[0]*d[1]*v[0]/g]]):[[d[0],0],[d[1],0],[d[2],0]]):[[0,(v=em(f,1-p))[0]/v[1]],[1/v[1],0],[v[2]/v[1],0]]),b=(i=x[0],o=(a=x[1])[0]*a[0]+a[1]*a[1],[(i[0]*a[0]+i[1]*a[1])/o,(i[1]*a[0]-i[0]*a[1])/o]);return[-(l(b[1],b[0])/1),2*s(c(-.5*h(y*b[0]*b[0]+y*b[1]*b[1])))-_]};var ew=i(7613);function eT(r){var n=m(r),i=u(r),a=ek(r);function s(r,s){var l=a(r,s);r=l[0];var c=m(s=l[1]),f=u(s),h=u(r),p=C(n*c+i*f*h),d=m(p),v=o(d)>1e-6?p/d:1;return[v*i*m(r),(o(r)>_?v:-v)*(n*f-i*c*h)]}return a.invert=ek(-r),s.invert=function(r,i){var o=O(r*r+i*i),s=-m(o),c=u(o),f=o*c,h=-i*s,p=o*n,d=O(f*f+h*h-p*p),v=l(f*p+h*d,h*p-f*d),g=(o>_?-1:1)*l(r*s,o*u(v)*c+i*m(v)*s);return a.invert(g,v)},s}function ek(r){var n=m(r),i=u(r);return function(r,a){var o=u(a),s=u(r)*o,c=m(r)*o,f=m(a);return[l(c,s*i-f*n),L(f*i+s*n)]}}function eA(){var r=0,n=(0,a.r)(eT),i=n(r),o=i.rotate,s=i.stream,l=(0,ew.Z)();return i.parallel=function(a){if(!arguments.length)return r*S;var o=i.rotate();return n(r=a*E).rotate(o)},i.rotate=function(n){return arguments.length?(o.call(i,[n[0],n[1]-r*S]),l.center([-n[0],-n[1]]),i):((n=o.call(i))[1]+=r*S,n)},i.stream=function(r){return(r=s(r)).sphere=function(){r.polygonStart();var n,i=l.radius(89.99)().coordinates[0],a=i.length-1,o=-1;for(r.lineStart();++o<a;)r.point((n=i[o])[0],n[1]);for(r.lineEnd(),a=(i=l.radius(90.01)().coordinates[0]).length-1,r.lineStart();--o>=0;)r.point((n=i[o])[0],n[1]);r.lineEnd(),r.polygonEnd()},r},i.scale(79.4187).parallel(45).clipAngle(179.999)}var eM=i(33064),eS=i(72736),eE=L(1-1/3)*S,eL=tI(0);function eC(r){var n=eE*E,i=tM(b,n)[0]-tM(-b,n)[0],a=eL(0,n)[1],s=tM(0,n)[1],l=A-s,u=M/r,c=4/M,h=a+l*l*4/M;function v(v,g){var y,m=o(g);if(m>n){var x=d(r-1,p(0,f((v+b)/u)));(y=tM(v+=b*(r-1)/r-x*u,m))[0]=y[0]*M/i-M*(r-1)/(2*r)+x*M/r,y[1]=a+4*(y[1]-s)*l/M,g<0&&(y[1]=-y[1])}else y=eL(v,g);return y[0]*=c,y[1]/=h,y}return v.invert=function(n,v){n/=c;var g=o(v*=h);if(g>a){var y=d(r-1,p(0,f((n+b)/u)));n=(n+b*(r-1)/r-y*u)*i/M;var m=tM.invert(n,.25*(g-a)*M/l+s);return m[0]-=b*(r-1)/r-y*u,v<0&&(m[1]=-m[1]),m}return eL.invert(n,v)},v}function eO(r,n){return[r,1&n?89.999999:eE]}function eP(r,n){return[r,1&n?-89.999999:-eE]}function eI(r){return[.999999*r[0],r[1]]}function eD(){var r=4,n=(0,a.r)(eC),i=n(r),o=i.stream;return i.lobes=function(i){return arguments.length?n(r=+i):r},i.stream=function(n){var a=i.rotate(),s=o(n),l=(i.rotate([0,0]),o(n));return i.rotate(a),s.sphere=function(){var n,i;(0,eS.Z)((n=180/r,i=[].concat((0,eM.w6)(-180,180+n/2,n).map(eO),(0,eM.w6)(180,-180-n/2,-n).map(eP)),{type:"Polygon",coordinates:[180===n?i.map(eI):i]}),l)},s},i.scale(239.75)}function ez(r){var n,i=1+r,a=L(m(1/i)),s=2*O(b/(n=b+4*a*i)),c=.5*s*(i+O(r*(2+r))),f=r*r,h=i*i;function p(p,d){var v,g,y=1-m(d);if(y&&y<2){var x,w=_-d,T=25;do{var k=m(w),A=u(w),M=a+l(k,i-A),S=1+h-2*i*A;w-=x=(w-f*a-i*k+S*M-.5*y*n)/(2*i*k*M)}while(o(x)>1e-12&&--T>0);v=s*O(S),g=p*M/b}else v=s*(r+y),g=p*a/b;return[v*m(g),c-v*u(g)]}return p.invert=function(r,o){var u=r*r+(o-=c)*o,p=(1+h-u/(s*s))/(2*i),d=C(p),v=m(d),g=a+l(v,i-p);return[L(r/O(u))*b/g,L(1-2*(d-f*a-i*v+(1+h-2*i*p)*g)/n)]},p}function eR(){var r=1,n=(0,a.r)(ez),i=n(r);return i.ratio=function(i){return arguments.length?n(r=+i):r},i.scale(167.774).center([0,18.67])}function eF(r,n){return n>-.7109889596207567?((r=ta(r,n))[1]+=.0528035274542,r):tc(r,n)}function eB(){return(0,a.Z)(eF).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function eN(r,n){return o(n)>.7109889596207567?((r=ta(r,n))[1]-=n>0?.0528035274542:-.0528035274542,r):tc(r,n)}function ej(){return(0,a.Z)(eN).scale(152.63)}function eU(r,n,i,a){var o=O(4*b/(2*i+(1+r-n/2)*m(2*i)+(r+n)/2*m(4*i)+n/2*m(6*i))),s=O(a*m(i)*O((1+r*u(2*i)+n*u(4*i))/(1+r+n))),l=i*f(1);function c(i){return O(1+r*u(2*i)+n*u(4*i))}function f(a){var o=a*i;return(2*o+(1+r-n/2)*m(2*o)+(r+n)/2*m(4*o)+n/2*m(6*o))/i}function h(r){return c(r)*m(r)}var p=function(r,n){var a=i*Q(f,l*m(n)/i,n/b);isNaN(a)&&(a=i*y(n));var h=o*c(a);return[h*s*r/b*u(a),h/s*m(a)]};return p.invert=function(r,n){var a=Q(h,n*s/o);return[r*b/(u(a)*o*s*c(a)),L(i*f(a/i)/l)]},0===i&&(o=O(a/b),(p=function(r,n){return[r*o,m(n)/o]}).invert=function(r,n){return[r/o,L(n*o)]}),p}function eV(){var r=1,n=0,i=45*E,o=2,s=(0,a.r)(eU),l=s(r,n,i,o);return l.a=function(a){return arguments.length?s(r=+a,n,i,o):r},l.b=function(a){return arguments.length?s(r,n=+a,i,o):n},l.psiMax=function(a){return arguments.length?s(r,n,i=+a*E,o):i*S},l.ratio=function(a){return arguments.length?s(r,n,i,o=+a):o},l.scale(180.739)}function eH(r,n,i){function a(i){return r+(1-r)*v(1-v(i,n),1/n)}function s(r){var n,i,o,s;return void 0===n&&(n=20),i=a(0),o=a(.5*(0+r)),s=a(r),function r(n,i,a,o,s,l,u,c,f,h,p){var d,v,g,y,m,x,b,_,w,T;if(p.nanEncountered)return NaN;if(v=n(i+.25*(d=a-i)),g=n(a-.25*d),isNaN(v))p.nanEncountered=!0;else{if(!isNaN(g))return T=((x=(y=d*(o+4*v+s)/12)+(m=d*(s+4*g+l)/12))-u)/15,h>f?(p.maxDepthCount++,x+T):Math.abs(T)<c?x+T:isNaN(_=r(n,i,b=i+.5*d,o,v,s,y,.5*c,f,h+1,p))?(p.nanEncountered=!0,NaN):isNaN(w=r(n,b,a,s,g,l,m,.5*c,f,h+1,p))?(p.nanEncountered=!0,NaN):_+w;p.nanEncountered=!0}}(a,0,r,i,o,s,(i+4*o+s)*(r-0)/6,1e-4,n,1,{maxDepthCount:0,nanEncountered:!1})}for(var l=1/s(1),u=(1+1e-8)*l,c=[],f=0;f<=1e3;f++)c.push(s(f/1e3)*u);function h(r){var n=0,i=1e3,a=500;do c[a]>r?i=a:n=a,a=n+i>>1;while(a>n);var o=c[a+1]-c[a];return o&&(o=(r-c[a+1])/o),(a+1+o)/1e3}var p=2*h(1)/b*l/i,d=function(r,n){var i=h(o(m(n))),s=a(i)*r;return i/=p,[s,n>=0?i:-i]};return d.invert=function(r,n){var i;return 1>o(n*=p)&&(i=y(n)*L(s(o(n))*l)),[r/a(o(n)),i]},d}function eq(){var r=0,n=2.5,i=1.183136,o=(0,a.r)(eH),s=o(r,n,i);return s.alpha=function(a){return arguments.length?o(r=+a,n,i):r},s.k=function(a){return arguments.length?o(r,n=+a,i):n},s.gamma=function(a){return arguments.length?o(r,n,i=+a):i},s.scale(152.63)}function eG(r,n){for(var i,a,o,s=-1,l=r.length,u=r[0],c=[];++s<l;){a=((i=r[s])[0]-u[0])/n,o=(i[1]-u[1])/n;for(var f=0;f<n;++f)c.push([u[0]+f*a,u[1]+f*o]);u=i}return c.push(i),c}function eZ(r,n,i){function s(i,a){for(var o=a<0?-1:1,s=n[+(a<0)],l=0,u=s.length-1;l<u&&i>s[l][2][0];++l);var c=r(i-s[l][1][0],a);return c[0]+=r(s[l][1][0],o*a>o*s[l][0][1]?s[l][0][1]:a)[0],c}i?s.invert=i(s):r.invert&&(s.invert=function(i,a){for(var l=u[+(a<0)],c=n[+(a<0)],f=0,h=l.length;f<h;++f){var p=l[f];if(p[0][0]<=i&&i<p[1][0]&&p[0][1]<=a&&a<p[1][1]){var d,v,g=r.invert(i-r(c[f][1][0],0)[0],a);return g[0]+=c[f][1][0],(d=s(g[0],g[1]),v=[i,a],1e-6>o(d[0]-v[0])&&1e-6>o(d[1]-v[1]))?g:null}}});var l,u,c=(0,a.Z)(s),f=c.stream;return c.stream=function(r){var n=c.rotate(),i=f(r),a=(c.rotate([0,0]),f(r));return c.rotate(n),i.sphere=function(){(0,eS.Z)(l,a)},i},c.lobes=function(i){return arguments.length?(l=function(r){var n,i,a,o,s,l,u,c=[],f=r[0].length;for(u=0;u<f;++u)i=(n=r[0][u])[0][0],a=n[0][1],o=n[1][1],s=n[2][0],l=n[2][1],c.push(eG([[i+1e-6,a+1e-6],[i+1e-6,o-1e-6],[s-1e-6,o-1e-6],[s-1e-6,l+1e-6]],30));for(u=r[1].length-1;u>=0;--u)i=(n=r[1][u])[0][0],a=n[0][1],o=n[1][1],s=n[2][0],l=n[2][1],c.push(eG([[s-1e-6,l-1e-6],[s-1e-6,o+1e-6],[i+1e-6,o+1e-6],[i+1e-6,a-1e-6]],30));return{type:"Polygon",coordinates:[(0,eM.TS)(c)]}}(i),u=(n=i.map(function(r){return r.map(function(r){return[[r[0][0]*E,r[0][1]*E],[r[1][0]*E,r[1][1]*E],[r[2][0]*E,r[2][1]*E]]})})).map(function(n){return n.map(function(n){var i,a=r(n[0][0],n[0][1])[0],o=r(n[2][0],n[2][1])[0],s=r(n[1][0],n[0][1])[1],l=r(n[1][0],n[1][1])[1];return s>l&&(i=s,s=l,l=i),[[a,s],[o,l]]})}),c):n.map(function(r){return r.map(function(r){return[[r[0][0]*S,r[0][1]*S],[r[1][0]*S,r[1][1]*S],[r[2][0]*S,r[2][1]*S]]})})},null!=n&&c.lobes(n),c}eF.invert=function(r,n){return n>-.7109889596207567?ta.invert(r,n-.0528035274542):tc.invert(r,n)},eN.invert=function(r,n){return o(n)>.7109889596207567?ta.invert(r,n+(n>0?.0528035274542:-.0528035274542)):tc.invert(r,n)};var eY=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function eW(){return eZ(ts,eY).scale(160.857)}var eX=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function eJ(){return eZ(eN,eX).scale(152.63)}var eK=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function e$(){return eZ(ta,eK).scale(169.529)}var eQ=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function e0(){return eZ(ta,eQ).scale(169.529).rotate([20,0])}var e1=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function e2(){return eZ(eF,e1,tt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var e3=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function e5(){return eZ(tc,e3).scale(152.63).rotate([-20,0])}function e4(r,n){return[3/M*r*O(b*b/3-n*n),n]}function e6(){return(0,a.Z)(e4).scale(158.837)}function e8(r){function n(n,i){if(1e-6>o(o(i)-_))return[0,i<0?-2:2];var a=m(i),s=v((1+a)/(1-a),r/2),l=.5*(s+1/s)+u(n*=r);return[2*m(n)/l,(s-1/s)/l]}return n.invert=function(n,i){var a=o(i);if(1e-6>o(a-2))return n?null:[0,y(i)*_];if(a>2)return null;var s=(n/=2)*n,u=(i/=2)*i,c=2*i/(1+s+u);return c=v((1+c)/(1-c),1/r),[l(2*n,1-s-u)/r,L((c-1)/(c+1))]},n}function e7(){var r=.5,n=(0,a.r)(e8),i=n(r);return i.spacing=function(i){return arguments.length?n(r=+i):r},i.scale(124.75)}e4.invert=function(r,n){return[M/3*r/O(b*b/3-n*n),n]};var e9=b/k;function rt(r,n){return[r*(1+O(u(n)))/2,n/(u(n/2)*u(r/6))]}function re(){return(0,a.Z)(rt).scale(97.2672)}function rr(r,n){var i=r*r,a=n*n;return[r*(.975534+a*(-.0143059*i-.119161+-.0547009*a)),n*(1.00384+i*(.0802894+-.02855*a+199025e-9*i)+a*(.0998909+-.0491032*a))]}function rn(){return(0,a.Z)(rr).scale(139.98)}function ri(r,n){return[m(r)/u(n),x(n)*u(r)]}function ra(){return(0,a.Z)(ri).scale(144.049).clipAngle(89.999)}function ro(r){var n=u(r),i=x(w+r/2);function a(a,s){var l=s-r,u=1e-6>o(l)?a*n:1e-6>o(u=w+s/2)||1e-6>o(o(u)-_)?0:a*l/h(x(u)/i);return[u,l]}return a.invert=function(a,s){var l,u=s+r;return[1e-6>o(s)?a/n:1e-6>o(l=w+u/2)||1e-6>o(o(l)-_)?0:a*h(x(l)/i)/s,u]},a}function rs(){return tu(ro).parallel(40).scale(158.837)}function rl(r,n){return[r,1.25*h(x(w+.4*n))]}function ru(){return(0,a.Z)(rl).scale(108.318)}function rc(r){var n=r.length-1;function i(i,a){for(var o,s=u(a),l=2/(1+s*u(i)),c=l*s*m(i),f=l*m(a),h=n,p=r[h],d=p[0],v=p[1];--h>=0;)d=(p=r[h])[0]+c*(o=d)-f*v,v=p[1]+c*v+f*o;return[d=c*(o=d)-f*v,v=c*v+f*o]}return i.invert=function(i,a){var c=20,f=i,h=a;do{for(var p,d=n,v=r[d],g=v[0],y=v[1],x=0,b=0;--d>=0;)x=g+f*(p=x)-h*b,b=y+f*b+h*p,g=(v=r[d])[0]+f*(p=g)-h*y,y=v[1]+f*y+h*p;var _,w,T=(x=g+f*(p=x)-h*b)*x+(b=y+f*b+h*p)*b;f-=_=((g=f*(p=g)-h*y-i)*x+(y=f*y+h*p-a)*b)/T,h-=w=(y*x-g*b)/T}while(o(_)+o(w)>1e-6*1e-6&&--c>0);if(c){var k=O(f*f+h*h),A=2*s(.5*k),M=m(A);return[l(f*M,k*u(A)),k?L(h*M/k):0]}},i}rt.invert=function(r,n){var i=o(r),a=o(n),s=1e-6,l=_;a<e9?l*=a/e9:s+=6*C(e9/a);for(var c=0;c<25;c++){var f=m(l),h=O(u(l)),p=m(l/2),d=u(l/2),v=m(s/6),g=u(s/6),y=.5*s*(1+h)-i,x=l/(d*g)-a,b=h?-.25*s*f/h:0,w=.5*(1+h),T=(1+.5*l*p/d)/(d*g),k=l/d*(v/6)/(g*g),A=b*k-T*w,M=(y*k-x*w)/A,S=(x*b-y*T)/A;if(l-=M,s-=S,1e-6>o(M)&&1e-6>o(S))break}return[r<0?-s:s,n<0?-l:l]},rr.invert=function(r,n){var i=y(r)*b,a=n/2,s=50;do{var l=i*i,u=a*a,c=i*a,f=i*(.975534+u*(-.0143059*l-.119161+-.0547009*u))-r,h=a*(1.00384+l*(.0802894+-.02855*u+199025e-9*l)+u*(.0998909+-.0491032*u))-n,p=.975534-u*(.119161+3*l*.0143059+.0547009*u),d=-c*(.238322+.2188036*u+.0286118*l),v=c*(.1605788+7961e-7*l+-.0571*u),g=1.00384+l*(.0802894+199025e-9*l)+u*(3*(.0998909-.02855*l)-.245516*u),m=d*v-g*p,x=(h*d-f*g)/m,_=(f*v-h*p)/m;i-=x,a-=_}while((o(x)>1e-6||o(_)>1e-6)&&--s>0);return s&&[i,a]},ri.invert=function(r,n){var i=r*r,a=n*n+1,o=i+a,s=r?T*O((o-O(o*o-4*i))/i):1/O(a);return[L(r*s),y(n)*C(s)]},rl.invert=function(r,n){return[r,2.5*s(c(.8*n))-.625*b]};var rf=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],rh=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],rp=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],rd=[[.9245,0],[0,0],[.01943,0]],rv=[[.721316,0],[0,0],[-.00881625,-.00617325]];function rg(){return r_(rf,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ry(){return r_(rh,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function rm(){return r_(rp,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function rx(){return r_(rd,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function rb(){return r_(rv,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function r_(r,n){var i=(0,a.Z)(rc(r)).rotate(n).clipAngle(90),o=(0,tx.Z)(n),s=i.center;return delete i.rotate,i.center=function(r){return arguments.length?s(o(r)):o.invert(s())},i}var rw=O(6),rT=O(7);function rk(r,n){var i=L(7*m(n)/(3*rw));return[rw*r*(2*u(2*i/3)-1)/rT,9*m(i/3)/rT]}function rA(){return(0,a.Z)(rk).scale(164.859)}function rM(r,n){for(var i,a=(1+T)*m(n),s=n,l=0;l<25&&(s-=i=(m(s/2)+m(s)-a)/(.5*u(s/2)+u(s)),!(1e-6>o(i)));l++);return[r*(1+2*u(s)/u(s/2))/(3*k),2*O(3)*m(s/2)/O(2+k)]}function rS(){return(0,a.Z)(rM).scale(188.209)}function rE(r,n){for(var i,a=O(6/(4+b)),s=(1+b/4)*m(n),l=n/2,c=0;c<25&&(l-=i=(l/2+m(l)-s)/(.5+u(l)),!(1e-6>o(i)));c++);return[a*(.5+u(l))*r/1.5,a*l]}function rL(){return(0,a.Z)(rE).scale(166.518)}rk.invert=function(r,n){var i=3*L(n*rT/9);return[r*rT/(rw*(2*u(2*i/3)-1)),L(3*m(i)*rw/7)]},rM.invert=function(r,n){var i=n*O(2+k)/(2*O(3)),a=2*L(i);return[3*k*r/(1+2*u(a)/u(a/2)),L((i+m(a))/(1+T))]},rE.invert=function(r,n){var i=O(6/(4+b)),a=n/i;return 1e-6>o(o(a)-_)&&(a=a<0?-_:_),[1.5*r/(i*(.5+u(a))),L((a/2+m(a))/(1+b/4))]};var rC=i(26867);function rO(r,n){var i=n*n,a=i*i,o=i*a;return[r*(.84719-.13063*i+o*o*(.05494*i-.04515-.02326*a+.00331*o)),n*(1.01183+a*a*(.01926*i-.02625-.00396*a))]}function rP(){return(0,a.Z)(rO).scale(175.295)}function rI(r,n){return[r*(1+u(n))/2,2*(n-x(n/2))]}function rD(){return(0,a.Z)(rI).scale(152.63)}rO.invert=function(r,n){var i,a,s,l,u=n,c=25;do u-=i=(u*(1.01183+(s=(a=u*u)*a)*s*(.01926*a-.02625-.00396*s))-n)/(1.01183+s*s*(.21186*a-.23625+-.05148*s));while(o(i)>1e-12&&--c>0);return[r/(.84719-.13063*(a=u*u)+(l=a*(s=a*a))*l*(.05494*a-.04515-.02326*s+.00331*l)),u]},rI.invert=function(r,n){for(var i=n/2,a=0,s=1/0;a<10&&o(s)>1e-6;++a){var l=u(n/2);n-=s=(n-x(n/2)-i)/(1-.5/(l*l))}return[2*r/(1+u(n)),n]};var rz=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function rR(){return eZ(J(1/0),rz).rotate([20,0]).scale(152.63)}function rF(r,n){var i=m(n),a=u(n),s=y(r);if(0===r||o(n)===_)return[0,n];if(0===n)return[r,0];if(o(r)===_)return[r*a,_*i];var l=b/(2*r)-2*r/b,c=2*n/b,f=(1-c*c)/(i-c),h=l*l,p=f*f,d=1+h/p,v=1+p/h,g=(l*i/f-l/2)/d,x=(p*i/h+f/2)/v,w=x*x-(p*i*i/h+f*i-1)/v;return[_*(g+O(g*g+a*a/d)*s),_*(x+O(w<0?0:w)*y(-n*l)*s)]}function rB(){return(0,a.Z)(rF).scale(127.267)}function rN(r,n){var i=n*n;return[r,n*(1.0148+i*i*(.23185+i*(-.14499+.02406*i)))]}function rj(){return(0,a.Z)(rN).scale(139.319)}function rU(r,n){if(1e-6>o(n))return[r,0];var i=x(n),a=r*m(n);return[m(a)/i,n+(1-u(a))/i]}function rV(){return(0,a.Z)(rU).scale(103.74)}rF.invert=function(r,n){var i=(r/=_)*r,a=i+(n/=_)*n,o=b*b;return[r?(a-1+O((1-a)*(1-a)+4*i))/(2*r)*_:0,Q(function(r){return a*(b*m(r)-2*r)*b+4*r*r*(n-m(r))+2*b*r-o*n},0)]},rN.invert=function(r,n){n>1.790857183?n=1.790857183:n<-1.790857183&&(n=-1.790857183);var i,a=n;do{var s=a*a;a-=i=(a*(1.0148+s*s*(.23185+s*(-.14499+.02406*s)))-n)/(1.0148+s*s*(1.1592500000000001+s*(-1.01493+.21654*s)))}while(o(i)>1e-6);return[r,a]},rU.invert=function(r,n){if(1e-6>o(n))return[r,0];var i,a=r*r+n*n,s=.5*n,l=10;do{var c=x(s),f=1/u(s),h=a-2*n*s+s*s;s-=i=(c*h+2*(s-n))/(2+h*f*f+2*(s-n)*c)}while(o(i)>1e-6&&--l>0);return c=x(s),[(o(n)<o(s+1/c)?L(r*c):y(n)*y(r)*(C(o(r*c))+_))/m(s),s]};var rH=i(77338),rq=i(83074);function rG(r,n){return[r[0]*n[0]+r[1]*n[3],r[0]*n[1]+r[1]*n[4],r[0]*n[2]+r[1]*n[5]+r[2],r[3]*n[0]+r[4]*n[3],r[3]*n[1]+r[4]*n[4],r[3]*n[2]+r[4]*n[5]+r[5]]}function rZ(r,n){return[r[0]-n[0],r[1]-n[1]]}function rY(r){return O(r[0]*r[0]+r[1]*r[1])}function rW(r,n,i){function s(r,i){var a,o=n(r,i),s=o.project([r*S,i*S]);return(a=o.transform)?[a[0]*s[0]+a[1]*s[1]+a[2],-(a[3]*s[0]+a[4]*s[1]+a[5])]:(s[1]=-s[1],s)}(function r(n,i){if(n.edges=function(r){for(var n=r.length,i=[],a=r[n-1],o=0;o<n;++o)i.push([a,a=r[o]]);return i}(n.face),i.face){var a,o,s,c,f,h,p=n.shared=function(r,n){for(var i,a,o=r.length,s=null,l=0;l<o;++l){i=r[l];for(var u=n.length;--u>=0;)if(a=n[u],i[0]===a[0]&&i[1]===a[1]){if(s)return[s,i];s=i}}}(n.face,i.face),d=(a=p.map(i.project),o=p.map(n.project),s=rZ(a[1],a[0]),c=rZ(o[1],o[0]),f=l(s[0]*c[1]-s[1]*c[0],s[0]*c[0]+s[1]*c[1]),h=rY(s)/rY(c),rG([1,0,a[0][0],0,1,a[0][1]],rG([h,0,0,0,h,0],rG([u(f),m(f),0,-m(f),u(f),0],[1,0,-o[0][0],0,1,-o[0][1]]))));n.transform=i.transform?rG(i.transform,d):d;for(var v=i.edges,g=0,y=v.length;g<y;++g)rX(p[0],v[g][1])&&rX(p[1],v[g][0])&&(v[g]=n),rX(p[0],v[g][0])&&rX(p[1],v[g][1])&&(v[g]=n);for(g=0,y=(v=n.edges).length;g<y;++g)rX(p[0],v[g][0])&&rX(p[1],v[g][1])&&(v[g]=i),rX(p[0],v[g][1])&&rX(p[1],v[g][0])&&(v[g]=i)}else n.transform=i.transform;return n.children&&n.children.forEach(function(i){r(i,n)}),n})(r,{transform:null}),function r(n){return n.project.invert||n.children&&n.children.some(r)}(r)&&(s.invert=function(i,a){var o=function r(i,a){var o=i.project.invert,s=i.transform,l=a;if(s&&(l=[(s=[(c=1/((u=s)[0]*u[4]-u[1]*u[3]))*u[4],-c*u[1],c*(u[1]*u[5]-u[2]*u[4]),-c*u[3],c*u[0],c*(u[2]*u[3]-u[0]*u[5])])[0]*l[0]+s[1]*l[1]+s[2],s[3]*l[0]+s[4]*l[1]+s[5]]),o&&i===n((f=h=o(l))[0]*E,f[1]*E))return h;for(var u,c,f,h,p=i.children,d=0,v=p&&p.length;d<v;++d)if(h=r(p[d],a))return h}(r,[i,-a]);return o&&(o[0]*=E,o[1]*=E,o)});var c=(0,a.Z)(s),f=c.stream;return c.stream=function(n){var i=c.rotate(),a=f(n),s=(c.rotate([0,0]),f(n));return c.rotate(i),a.sphere=function(){s.polygonStart(),s.lineStart(),function r(n,i,a){var s,l,u=i.edges,c=u.length,f={type:"MultiPoint",coordinates:i.face},h=i.face.filter(function(r){return 90!==o(r[1])}),p=(0,rH.Z)({type:"MultiPoint",coordinates:h}),d=!1,v=-1,g=p[1][0]-p[0][0],y=180===g||360===g?[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]:(0,tm.Z)(f);if(a)for(;++v<c&&u[v]!==a;);++v;for(var m=0;m<c;++m)Array.isArray(l=u[(m+v)%c])?(d||(n.point((s=(0,rq.Z)(l[0],y)(1e-6))[0],s[1]),d=!0),n.point((s=(0,rq.Z)(l[1],y)(1e-6))[0],s[1])):(d=!1,l!==a&&r(n,l,i))}(s,r),s.lineEnd(),s.polygonEnd()},a},c.angle(null==i?-30:i*S)}function rX(r,n){return r&&n&&r[0]===n[0]&&r[1]===n[1]}var rJ=i(98936),rK=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],r$=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(r){return r.map(function(r){return rK[r]})});function rQ(r){r=r||function(r){var n=(0,tm.Z)({type:"MultiPoint",coordinates:r});return(0,rJ.Z)().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=r$.map(function(n){return{face:n,project:r(n)}});return[-1,0,0,1,0,1,4,5].forEach(function(r,i){var a=n[r];a&&(a.children||(a.children=[])).push(n[i])}),rW(n[0],function(r,i){return n[r<-b/2?i<0?6:4:r<0?i<0?2:0:r<b/2?i<0?3:1:i<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var r0=2/O(3);function r1(r,n){var i=tM(r,n);return[i[0]*r0,i[1]]}function r2(r){r=r||function(r){var n=(0,tm.Z)({type:"MultiPoint",coordinates:r});return(0,a.Z)(r1).translate([0,0]).scale(1).rotate(n[1]>0?[-n[0],0]:[180-n[0],180])};var n=r$.map(function(n){return{face:n,project:r(n)}});return[-1,0,0,1,0,1,4,5].forEach(function(r,i){var a=n[r];a&&(a.children||(a.children=[])).push(n[i])}),rW(n[0],function(r,i){return n[r<-b/2?i<0?6:4:r<0?i<0?2:0:r<b/2?i<0?3:1:i<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function r3(r){r=r||function(r){var n=6===r.length?(0,tm.Z)({type:"MultiPoint",coordinates:r}):r[0];return(0,rJ.Z)().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=r$.map(function(r){for(var n,i=r.map(r6),a=i.length,o=i[a-1],s=[],l=0;l<a;++l)n=i[l],s.push(r4([.9486832980505138*o[0]+.31622776601683794*n[0],.9486832980505138*o[1]+.31622776601683794*n[1],.9486832980505138*o[2]+.31622776601683794*n[2]]),r4([.9486832980505138*n[0]+.31622776601683794*o[0],.9486832980505138*n[1]+.31622776601683794*o[1],.9486832980505138*n[2]+.31622776601683794*o[2]])),o=n;return s}),i=[],a=[-1,0,0,1,0,1,4,5];n.forEach(function(r,o){for(var s,l,u=r$[o],c=u.length,f=i[o]=[],h=0;h<c;++h)n.push([u[h],r[(2*h+2)%(2*c)],r[(2*h+1)%(2*c)]]),a.push(o),f.push((s=r6(r[(2*h+2)%(2*c)]),l=r6(r[(2*h+1)%(2*c)]),[s[1]*l[2]-s[2]*l[1],s[2]*l[0]-s[0]*l[2],s[0]*l[1]-s[1]*l[0]]))});var o=n.map(function(n){return{project:r(n),face:n}});return a.forEach(function(r,n){var i=o[r];i&&(i.children||(i.children=[])).push(o[n])}),rW(o[0],function(r,n){var a=u(n),s=[a*u(r),a*m(r),m(n)],l=r<-b/2?n<0?6:4:r<0?n<0?2:0:r<b/2?n<0?3:1:n<0?7:5,c=i[l];return o[0>r5(c[0],s)?8+3*l:0>r5(c[1],s)?8+3*l+1:0>r5(c[2],s)?8+3*l+2:l]}).angle(-30).scale(110.625).center([0,45])}function r5(r,n){for(var i=0,a=r.length,o=0;i<a;++i)o+=r[i]*n[i];return o}function r4(r){return[l(r[1],r[0])*S,L(p(-1,d(1,r[2])))*S]}function r6(r){var n=r[0]*E,i=r[1]*E,a=u(i);return[a*u(n),a*m(n),m(i)]}function r8(){}function r7(r,n){var i,a=n.stream;if(!a)throw Error("invalid projection");switch(r&&r.type){case"Feature":i=nt;break;case"FeatureCollection":i=r9;break;default:i=ne}return i(r,a)}function r9(r,n){return{type:"FeatureCollection",features:r.features.map(function(r){return nt(r,n)})}}function nt(r,n){return{type:"Feature",id:r.id,properties:r.properties,geometry:ne(r.geometry,n)}}function ne(r,n){var i;if(!r)return null;if("GeometryCollection"===r.type)return{type:"GeometryCollection",geometries:r.geometries.map(function(r){return ne(r,n)})};switch(r.type){case"Point":case"MultiPoint":i=ni;break;case"LineString":case"MultiLineString":i=na;break;case"Polygon":case"MultiPolygon":case"Sphere":i=no;break;default:return null}return(0,eS.Z)(r,n(i)),i.result()}r1.invert=function(r,n){return tM.invert(r/r0,n)};var nr=[],nn=[],ni={point:function(r,n){nr.push([r,n])},result:function(){var r=nr.length?nr.length<2?{type:"Point",coordinates:nr[0]}:{type:"MultiPoint",coordinates:nr}:null;return nr=[],r}},na={lineStart:r8,point:function(r,n){nr.push([r,n])},lineEnd:function(){nr.length&&(nn.push(nr),nr=[])},result:function(){var r=nn.length?nn.length<2?{type:"LineString",coordinates:nn[0]}:{type:"MultiLineString",coordinates:nn}:null;return nn=[],r}},no={polygonStart:r8,lineStart:r8,point:function(r,n){nr.push([r,n])},lineEnd:function(){var r=nr.length;if(r){do nr.push(nr[0].slice());while(++r<4);nn.push(nr),nr=[]}},polygonEnd:r8,result:function(){if(!nn.length)return null;var r=[],n=[];return nn.forEach(function(i){(function(r){if((n=r.length)<4)return!1;for(var n,i=0,a=r[n-1][1]*r[0][0]-r[n-1][0]*r[0][1];++i<n;)a+=r[i-1][1]*r[i][0]-r[i-1][0]*r[i][1];return a<=0})(i)?r.push([i]):n.push(i)}),n.forEach(function(n){var i=n[0];r.some(function(r){if(function(r,n){for(var i=n[0],a=n[1],o=!1,s=0,l=r.length,u=l-1;s<l;u=s++){var c=r[s],f=c[0],h=c[1],p=r[u],d=p[0],v=p[1];h>a^v>a&&i<(d-f)*(a-h)/(v-h)+f&&(o=!o)}return o}(r[0],i))return r.push(n),!0})||r.push([n])}),nn=[],r.length?r.length>1?{type:"MultiPolygon",coordinates:r}:{type:"Polygon",coordinates:r[0]}:null}};function ns(r){var n=r(_,0)[0]-r(-_,0)[0];function i(i,a){var s=o(i)<_,l=r(s?i:i>0?i-b:i+b,a),u=(l[0]-l[1])*T,c=(l[0]+l[1])*T;if(s)return[u,c];var f=n*T,h=u>0^c>0?-1:1;return[h*u-y(c)*f,h*c-y(u)*f]}return r.invert&&(i.invert=function(i,a){var s=(i+a)*T,l=(a-i)*T,u=o(s)<.5*n&&o(l)<.5*n;if(!u){var c=n*T,f=s>0^l>0?-1:1,h=-f*i+(l>0?1:-1)*c,p=-f*a+(s>0?1:-1)*c;s=(-h-p)*T,l=(h-p)*T}var d=r.invert(s,l);return u||(d[0]+=s>0?b:-b),d}),(0,a.Z)(i).rotate([-90,-90,45]).clipAngle(179.999)}function nl(){return ns(eg).scale(176.423)}function nu(){return ns(eb).scale(111.48)}function nc(r,n){if(!(0<=(n=+n)&&n<=20))throw Error("invalid digits");function i(r){var i=r.length,a=2,o=Array(i);for(o[0]=+r[0].toFixed(n),o[1]=+r[1].toFixed(n);a<i;)o[a]=r[a],++a;return o}function a(r){for(var n=i(r[0]),a=[n],o=1;o<r.length;o++){var s=i(r[o]);(s.length>2||s[0]!=n[0]||s[1]!=n[1])&&(a.push(s),n=s)}return 1===a.length&&r.length>1&&a.push(i(r[r.length-1])),a}function o(r){return r.map(a)}function s(r){var n;if(null==r)return r;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(s)};break;case"Point":n={type:"Point",coordinates:i(r.coordinates)};break;case"MultiPoint":n={type:r.type,coordinates:r.coordinates.map(i)};break;case"LineString":n={type:r.type,coordinates:a(r.coordinates)};break;case"MultiLineString":case"Polygon":n={type:r.type,coordinates:o(r.coordinates)};break;case"MultiPolygon":n={type:"MultiPolygon",coordinates:r.coordinates.map(o)};break;default:return r}return null!=r.bbox&&(n.bbox=r.bbox),n}function l(r){var n={type:"Feature",properties:r.properties,geometry:s(r.geometry)};return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),n}if(null!=r)switch(r.type){case"Feature":return l(r);case"FeatureCollection":var u={type:"FeatureCollection",features:r.features.map(l)};return null!=r.bbox&&(u.bbox=r.bbox),u;default:return s(r)}return r}function nf(r){var n=m(r);function i(i,a){var o=n?x(i*n/2)/n:i/2;if(!a)return[2*o,-r];var l=2*s(o*m(a)),c=1/x(a);return[m(l)*c,a+(1-u(l))*c-r]}return i.invert=function(i,a){if(1e-6>o(a+=r))return[n?2*s(n*i/2)/n:i,0];var l,c=i*i+a*a,f=0,h=10;do{var p=x(f),d=1/u(f),v=c-2*a*f+f*f;f-=l=(p*v+2*(f-a))/(2+v*d*d+2*(f-a)*p)}while(o(l)>1e-6&&--h>0);var g=i*(p=x(f)),y=x(o(a)<o(f+1/p)?.5*L(g):.5*C(g)+b/4)/m(f);return[n?2*s(n*y)/n:2*y,f]},i}function nh(){return tu(nf).scale(131.215)}var np=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function nd(r,n){var i,a=d(18,36*o(n)/b),s=f(a),l=a-s,u=(i=np[s])[0],c=i[1],h=(i=np[++s])[0],p=i[1],v=(i=np[d(19,++s)])[0],g=i[1];return[r*(h+l*(v-u)/2+l*l*(v-2*h+u)/2),(n>0?_:-_)*(p+l*(g-c)/2+l*l*(g-2*p+c)/2)]}function nv(){return(0,a.Z)(nd).scale(152.63)}function ng(r,n){var i=function(r){function n(n,i){var a=u(i),o=(r-1)/(r-a*u(n));return[o*a*m(n),o*m(i)]}return n.invert=function(n,i){var a=n*n+i*i,o=O(a),s=(r-O(1-a*(r+1)/(r-1)))/((r-1)/o+o/(r-1));return[l(n*s,o*O(1-s*s)),o?L(i*s/o):0]},n}(r);if(!n)return i;var a=u(n),o=m(n);function s(n,s){var l=i(n,s),u=l[1],c=u*o/(r-1)+a;return[l[0]*a/c,u/c]}return s.invert=function(n,s){var l=(r-1)/(r-1-s*o);return i.invert(l*n,l*s*a)},s}function ny(){var r=2,n=0,i=(0,a.r)(ng),o=i(r,n);return o.distance=function(a){return arguments.length?i(r=+a,n):r},o.tilt=function(a){return arguments.length?i(r,n=a*E):n*S},o.scale(432.147).clipAngle(C(1/r)*S-1e-6)}function nm(r){return r.length>0}function nx(r){return -90===r||90===r?[0,r]:[-180,Math.floor(1e4*r)/1e4]}function nb(r){var n=r[0],i=r[1],a=!1;return n<=-179.9999?(n=-180,a=!0):n>=179.9999&&(n=180,a=!0),i<=-89.9999?(i=-90,a=!0):i>=89.9999&&(i=90,a=!0),a?[n,i]:r}function n_(r){return r.map(nb)}function nw(r,n,i){for(var a=0,o=r.length;a<o;++a){var s=r[a].slice();i.push({index:-1,polygon:n,ring:s});for(var l=0,u=s.length;l<u;++l){var c=s[l],f=c[0],h=c[1];if(f<=-179.9999||f>=179.9999||h<=-89.9999||h>=89.9999){s[l]=nb(c);for(var p=l+1;p<u;++p){var d=s[p],v=d[0],g=d[1];if(v>-179.9999&&v<179.9999&&g>-89.9999&&g<89.9999)break}if(p===l+1)continue;if(l){var y={index:-1,polygon:n,ring:s.slice(0,l+1)};y.ring[y.ring.length-1]=nx(h),i[i.length-1]=y}else i.pop();if(p>=u)break;i.push({index:-1,polygon:n,ring:s=s.slice(p-1)}),s[0]=nx(s[0][1]),l=-1,u=s.length}}}}function nT(r){var n,i,a,o,s,l,u=r.length,c={},f={};for(n=0;n<u;++n)a=(i=r[n]).ring[0],s=i.ring[i.ring.length-1],a[0]!==s[0]||a[1]!==s[1]?(i.index=n,c[a]=f[s]=i):(i.polygon.push(i.ring),r[n]=null);for(n=0;n<u;++n)if(i=r[n]){if(a=i.ring[0],s=i.ring[i.ring.length-1],o=f[a],l=c[s],delete c[a],delete f[s],a[0]===s[0]&&a[1]===s[1]){i.polygon.push(i.ring);continue}o?(delete f[a],delete c[o.ring[0]],o.ring.pop(),r[o.index]=null,i={index:-1,polygon:o.polygon,ring:o.ring.concat(i.ring)},o===l?i.polygon.push(i.ring):(i.index=u++,r.push(c[i.ring[0]]=f[i.ring[i.ring.length-1]]=i))):l?(delete c[s],delete f[l.ring[l.ring.length-1]],i.ring.pop(),i={index:u++,polygon:l.polygon,ring:i.ring.concat(l.ring)},r[l.index]=null,r.push(c[i.ring[0]]=f[i.ring[i.ring.length-1]]=i)):(i.ring.push(i.ring[0]),i.polygon.push(i.ring))}}function nk(r){var n={type:"Feature",geometry:nA(r.geometry)};return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function nA(r){if(null==r)return r;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(nA)};break;case"Point":n={type:"Point",coordinates:nb(r.coordinates)};break;case"MultiPoint":case"LineString":n={type:r.type,coordinates:n_(r.coordinates)};break;case"MultiLineString":n={type:"MultiLineString",coordinates:r.coordinates.map(n_)};break;case"Polygon":var n,i,a,o,s=[];nw(r.coordinates,s,i=[]),nT(i),n={type:"Polygon",coordinates:s};break;case"MultiPolygon":i=[],a=-1,o=r.coordinates.length;for(var l=Array(o);++a<o;)nw(r.coordinates[a],l[a]=[],i);nT(i),n={type:"MultiPolygon",coordinates:l.filter(nm)};break;default:return r}return null!=r.bbox&&(n.bbox=r.bbox),n}function nM(r){if(null==r)return r;switch(r.type){case"Feature":return nk(r);case"FeatureCollection":var n={type:"FeatureCollection",features:r.features.map(nk)};return null!=r.bbox&&(n.bbox=r.bbox),n;default:return nA(r)}}function nS(r,n){var i=x(n/2),a=m(w*i);return[r*(.74482-.34588*a*a),1.70711*i]}function nE(){return(0,a.Z)(nS).scale(146.153)}function nL(r,n,i){var o=(0,rq.Z)(n,i),s=o(.5),l=(0,tx.Z)([-s[0],-s[1]])(n),u=o.distance/2,c=-L(m(l[1]*E)/m(u)),f=[-s[0],-s[1],-(l[0]>0?b-c:c)*S],h=(0,a.Z)(r(u)).rotate(f),p=(0,tx.Z)(f),d=h.center;return delete h.rotate,h.center=function(r){return arguments.length?d(p(r)):p.invert(d())},h.clipAngle(90)}function nC(r){var n=u(r);function i(r,i){var a=(0,rJ.M)(r,i);return a[0]*=n,a}return i.invert=function(r,i){return rJ.M.invert(r/n,i)},i}function nO(){return nP([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function nP(r,n){return nL(nC,r,n)}function nI(r){if(!(r*=2))return Z.N;var n=-r/2,i=-n,a=r*r,o=x(i),s=.5/m(i);function c(o,s){var l=C(u(s)*u(o-n)),c=C(u(s)*u(o-i));return[((l*=l)-(c*=c))/(2*r),(s<0?-1:1)*O(4*a*c-(a-l+c)*(a-l+c))/(2*r)]}return c.invert=function(r,a){var c,f,h=a*a,p=u(O(h+(c=r+n)*c)),d=u(O(h+(c=r+i)*c));return[l(f=p-d,c=(p+d)*o),(a<0?-1:1)*C(O(c*c+f*f)*s)]},c}function nD(){return nz([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function nz(r,n){return nL(nI,r,n)}function nR(r,n){if(1e-6>o(n))return[r,0];var i=o(n/_),a=L(i);if(1e-6>o(r)||1e-6>o(o(n)-_))return[0,y(n)*b*x(a/2)];var s=u(a),l=o(b/r-r/b)/2,c=l*l,f=s/(i+s-1),h=f*(2/i-1),p=h*h,d=p+c,v=f-p,g=c+f;return[y(r)*b*(l*v+O(c*v*v-d*(f*f-p)))/d,y(n)*b*(h*g-l*O((c+1)*d-g*g))/d]}function nF(){return(0,a.Z)(nR).scale(79.4183)}function nB(r,n){if(1e-6>o(n))return[r,0];var i=o(n/_),a=L(i);if(1e-6>o(r)||1e-6>o(o(n)-_))return[0,y(n)*b*x(a/2)];var s=u(a),l=o(b/r-r/b)/2,c=l*l,f=s*(O(1+c)-l*s)/(1+c*i*i);return[y(r)*b*f,y(n)*b*O(1-f*(2*l+f))]}function nN(){return(0,a.Z)(nB).scale(79.4183)}function nj(r,n){if(1e-6>o(n))return[r,0];var i=n/_,a=L(i);if(1e-6>o(r)||1e-6>o(o(n)-_))return[0,b*x(a/2)];var s=(b/r-r/b)/2,l=i/(1+u(a));return[b*(y(r)*O(s*s+1-l*l)-s),b*l]}function nU(){return(0,a.Z)(nj).scale(79.4183)}function nV(r,n){if(!n)return[r,0];var i=o(n);if(!r||i===_)return[0,n];var a=i/_,s=a*a,l=(8*a-s*(s+2)-5)/(2*s*(a-1)),u=l*l,c=a*l,f=s+u+2*c,h=a+3*l,p=r/_,d=p+1/p,v=y(o(r)-_)*O(d*d-4),g=v*v,m=(v*(f+u-1)+2*O(f*(s+u*g-1)+(1-s)*(s*(h*h+4*u)+12*c*u+4*u*u)))/(4*f+g);return[y(r)*_*m,y(n)*_*O(1+v*o(m)-m*m)]}function nH(){return(0,a.Z)(nV).scale(127.16)}function nq(r,n,i,a){var o=b/3;r=p(r,1e-6),n=p(n,1e-6),r=d(r,_),n=d(n,b-1e-6),i=d(i=p(i,0),99.999999);var s=(a=p(a,1e-6))/100,c=C((i/100+1)*u(o))/o,f=m(r)/m(c*_),h=n/b,v=O(s*m(r/2)/m(n/2));return function(r,n,i,a,o){function s(s,l){var c=i*m(a*l),f=O(1-c*c),h=O(2/(1+f*u(s*=o)));return[r*f*h*m(s),n*c*h]}return s.invert=function(s,u){var c=s/r,f=u/n,h=O(c*c+f*f),p=2*L(h/2);return[l(s*x(p),r*h)/o,h&&L(u*m(p)/(n*i*h))/a]},s}(v/O(h*f*c),1/(v*O(h*f*c)),f,c,h)}function nG(){var r=65*E,n=60*E,i=20,o=200,s=(0,a.r)(nq),l=s(r,n,i,o);return l.poleline=function(a){return arguments.length?s(r=+a*E,n,i,o):r*S},l.parallels=function(a){return arguments.length?s(r,n=+a*E,i,o):n*S},l.inflation=function(a){return arguments.length?s(r,n,i=+a,o):i},l.ratio=function(a){return arguments.length?s(r,n,i,o=+a):o},l.scale(163.775)}function nZ(){return nG().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}np.forEach(function(r){r[1]*=1.0144}),nd.invert=function(r,n){var i=n/_,a=90*i,s=d(18,o(a/5)),l=p(0,f(s));do{var u=np[l][1],c=np[l+1][1],h=np[d(19,l+2)][1],v=h-u,g=h-2*c+u,y=2*(o(i)-c)/v,m=g/v,x=y*(1-m*y*(1-2*m*y));if(x>=0||1===l){a=(n>=0?5:-5)*(x+s);var b,w=50;do x=(s=d(18,o(a)/5))-(l=f(s)),u=np[l][1],a-=(b=(n>=0?_:-_)*((c=np[l+1][1])+x*((h=np[d(19,l+2)][1])-u)/2+x*x*(h-2*c+u)/2)-n)*S;while(o(b)>1e-12&&--w>0);break}}while(--l>=0);var T=np[l][0],k=np[l+1][0],A=np[d(19,l+2)][0];return[r/(k+x*(A-T)/2+x*x*(A-2*k+T)/2),a*E]},nS.invert=function(r,n){var i=n/1.70711,a=m(w*i);return[r/(.74482-.34588*a*a),2*s(i)]},nR.invert=function(r,n){if(1e-6>o(n))return[r,0];if(1e-6>o(r))return[0,_*m(2*s(n/b))];var i=(r/=b)*r,a=(n/=b)*n,l=i+a,c=l*l,f=-o(n)*(1+l),h=f-2*a+i,p=-2*f+1+2*a+c,d=(f-h*h/(3*p))/p,v=2*O(-d/3),g=C(3*(a/p+(2*h*h*h/(p*p*p)-9*f*h/(p*p))/27)/(d*v))/3;return[b*(l-1+O(1+2*(i-a)+c))/(2*r),y(n)*b*(-v*u(g+b/3)-h/(3*p))]},nB.invert=function(r,n){if(!r)return[0,_*m(2*s(n/b))];var i=o(r/b),a=(1-i*i-(n/=b)*n)/(2*i),u=O(a*a+1);return[y(r)*b*(u-a),y(n)*_*m(2*l(O((1-2*a*i)*(a+u)-i),O(u+a+i)))]},nj.invert=function(r,n){if(!n)return[r,0];var i=n/b,a=(b*b*(1-i*i)-r*r)/(2*b*r);return[r?b*(y(r)*O(a*a+1)-a):0,_*m(2*s(i))]},nV.invert=function(r,n){if(!r||!n)return[r,n];n/=b;var i,a=y(r)*r/_,s=(a*a-1+4*n*n)/o(a),l=s*s,u=2*n,c=50;do{var f=u*u,h=(8*u-f*(f+2)-5)/(2*f*(u-1)),p=(3*u-f*u-10)/(2*f*u),d=h*h,v=u*h,g=u+h,m=g*g,x=u+3*h,w=-2*g*(4*v*d+(1-4*f+3*f*f)*(1+p)+d*(14*f-6-l+(8*f-8-2*l)*p)+v*(12*f-8+(10*f-10-l)*p)),T=O(m*(f+d*l-1)+(1-f)*(f*(x*x+4*d)+d*(12*v+4*d)));u-=i=(s*(m+d-1)+2*T-a*(4*m+l))/(s*(2*h*p+2*g*(1+p))+w/T-8*g*(s*(-1+d+m)+2*T)*(1+p)/(l+4*m))}while(i>1e-6&&--c>0);return[y(r)*(O(s*s+4)+s)*b/4,_*u]};var nY=4*b+3*O(3),nW=2*O(2*b*O(3)/nY),nX=ti(nW*O(3)/b,nW,nY/6);function nJ(){return(0,a.Z)(nX).scale(176.84)}function nK(r,n){return[r*O(1-3*n*n/(b*b)),n]}function n$(){return(0,a.Z)(nK).scale(152.63)}function nQ(r,n){var i=u(n),a=u(r)*i,o=1-a,s=u(r=l(m(r)*i,-m(n))),c=m(r);return[c*(i=O(1-a*a))-s*o,-s*i-c*o]}function n0(){return(0,a.Z)(nQ).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function n1(r,n){var i=R(r,n);return[(i[0]+r/_)/2,(i[1]+n)/2]}function n2(){return(0,a.Z)(n1).scale(158.837)}nK.invert=function(r,n){return[r/O(1-3*n*n/(b*b)),n]},nQ.invert=function(r,n){var i=-((r*r+n*n)/2),a=O(-i*(2+i)),o=n*i+r*a,s=r*i-n*a,u=O(s*s+o*o);return[l(a*o,u*(1+i)),u?-L(a*s/u):0]},n1.invert=function(r,n){var i=r,a=n,s=25;do{var l,c=u(a),f=m(a),h=m(2*a),p=f*f,d=c*c,v=m(i),g=u(i/2),y=m(i/2),x=y*y,b=1-d*g*g,w=b?C(c*g)*O(l=1/b):l=0,T=.5*(2*w*c*y+i/_)-r,k=.5*(w*f+a)-n,A=.5*l*(d*x+w*c*g*p)+.5/_,M=l*(v*h/4-w*f*y),S=.125*l*(h*y-w*f*d*v),E=.5*l*(p*g+w*x*c)+.5,L=M*S-E*A,P=(k*M-T*E)/L,I=(T*S-k*A)/L;i-=P,a-=I}while((o(P)>1e-6||o(I)>1e-6)&&--s>0);return[i,a]}},33940:function(r,n,i){"use strict";function a(){return new o}function o(){this.reset()}i.d(n,{Z:function(){return a}}),o.prototype={constructor:o,reset:function(){this.s=this.t=0},add:function(r){l(s,r,this.t),l(this,s.s,this.s),this.s?this.t+=s.t:this.s=s.t},valueOf:function(){return this.s}};var s=new o;function l(r,n,i){var a=r.s=n+i,o=a-n;r.t=n-(a-o)+(i-o)}},97860:function(r,n,i){"use strict";i.d(n,{L9:function(){return d},ZP:function(){return _},gL:function(){return g}});var a,o,s,l,u,c=i(33940),f=i(39695),h=i(73182),p=i(72736),d=(0,c.Z)(),v=(0,c.Z)(),g={point:h.Z,lineStart:h.Z,lineEnd:h.Z,polygonStart:function(){d.reset(),g.lineStart=y,g.lineEnd=m},polygonEnd:function(){var r=+d;v.add(r<0?f.BZ+r:r),this.lineStart=this.lineEnd=this.point=h.Z},sphere:function(){v.add(f.BZ)}};function y(){g.point=x}function m(){b(a,o)}function x(r,n){g.point=b,a=r,o=n,r*=f.uR,n*=f.uR,s=r,l=(0,f.mC)(n=n/2+f.pu),u=(0,f.O$)(n)}function b(r,n){r*=f.uR,n=(n*=f.uR)/2+f.pu;var i=r-s,a=i>=0?1:-1,o=a*i,c=(0,f.mC)(n),h=(0,f.O$)(n),p=u*h,v=l*c+p*(0,f.mC)(o),g=p*a*(0,f.O$)(o);d.add((0,f.fv)(g,v)),s=r,l=c,u=h}function _(r){return v.reset(),(0,p.Z)(r,g),2*v}},77338:function(r,n,i){"use strict";i.d(n,{Z:function(){return P}});var a,o,s,l,u,c,f,h,p,d,v=i(33940),g=i(97860),y=i(7620),m=i(39695),x=i(72736),b=(0,v.Z)(),_={point:w,lineStart:k,lineEnd:A,polygonStart:function(){_.point=M,_.lineStart=S,_.lineEnd=E,b.reset(),g.gL.polygonStart()},polygonEnd:function(){g.gL.polygonEnd(),_.point=w,_.lineStart=k,_.lineEnd=A,g.L9<0?(a=-(s=180),o=-(l=90)):b>m.Ho?l=90:b<-m.Ho&&(o=-90),d[0]=a,d[1]=s},sphere:function(){a=-(s=180),o=-(l=90)}};function w(r,n){p.push(d=[a=r,s=r]),n<o&&(o=n),n>l&&(l=n)}function T(r,n){var i=(0,y.Og)([r*m.uR,n*m.uR]);if(h){var c=(0,y.T5)(h,i),f=[c[1],-c[0],0],v=(0,y.T5)(f,c);(0,y.iJ)(v),v=(0,y.Y1)(v);var g,x=r-u,b=x>0?1:-1,_=v[0]*m.RW*b,w=(0,m.Wn)(x)>180;w^(b*u<_&&_<b*r)?(g=v[1]*m.RW)>l&&(l=g):w^(b*u<(_=(_+360)%360-180)&&_<b*r)?(g=-v[1]*m.RW)<o&&(o=g):(n<o&&(o=n),n>l&&(l=n)),w?r<u?L(a,r)>L(a,s)&&(s=r):L(r,s)>L(a,s)&&(a=r):s>=a?(r<a&&(a=r),r>s&&(s=r)):r>u?L(a,r)>L(a,s)&&(s=r):L(r,s)>L(a,s)&&(a=r)}else p.push(d=[a=r,s=r]);n<o&&(o=n),n>l&&(l=n),h=i,u=r}function k(){_.point=T}function A(){d[0]=a,d[1]=s,_.point=w,h=null}function M(r,n){if(h){var i=r-u;b.add((0,m.Wn)(i)>180?i+(i>0?360:-360):i)}else c=r,f=n;g.gL.point(r,n),T(r,n)}function S(){g.gL.lineStart()}function E(){M(c,f),g.gL.lineEnd(),(0,m.Wn)(b)>m.Ho&&(a=-(s=180)),d[0]=a,d[1]=s,h=null}function L(r,n){return(n-=r)<0?n+360:n}function C(r,n){return r[0]-n[0]}function O(r,n){return r[0]<=r[1]?r[0]<=n&&n<=r[1]:n<r[0]||r[1]<n}function P(r){var n,i,u,c,f,h,v;if(l=s=-(a=o=1/0),p=[],(0,x.Z)(r,_),i=p.length){for(p.sort(C),n=1,f=[u=p[0]];n<i;++n)O(u,(c=p[n])[0])||O(u,c[1])?(L(u[0],c[1])>L(u[0],u[1])&&(u[1]=c[1]),L(c[0],u[1])>L(u[0],u[1])&&(u[0]=c[0])):f.push(u=c);for(h=-1/0,n=0,u=f[i=f.length-1];n<=i;u=c,++n)c=f[n],(v=L(u[1],c[0]))>h&&(h=v,a=c[0],s=u[1])}return p=d=null,a===1/0||o===1/0?[[NaN,NaN],[NaN,NaN]]:[[a,o],[s,l]]}},7620:function(r,n,i){"use strict";i.d(n,{Og:function(){return s},T:function(){return f},T5:function(){return u},Y1:function(){return o},iJ:function(){return h},j9:function(){return l},s0:function(){return c}});var a=i(39695);function o(r){return[(0,a.fv)(r[1],r[0]),(0,a.ZR)(r[2])]}function s(r){var n=r[0],i=r[1],o=(0,a.mC)(i);return[o*(0,a.mC)(n),o*(0,a.O$)(n),(0,a.O$)(i)]}function l(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}function u(r,n){return[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]]}function c(r,n){r[0]+=n[0],r[1]+=n[1],r[2]+=n[2]}function f(r,n){return[r[0]*n,r[1]*n,r[2]*n]}function h(r){var n=(0,a._b)(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=n,r[1]/=n,r[2]/=n}},66624:function(r,n,i){"use strict";i.d(n,{Z:function(){return z}});var a,o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_=i(39695),w=i(73182),T=i(72736),k={sphere:w.Z,point:A,lineStart:S,lineEnd:C,polygonStart:function(){k.lineStart=O,k.lineEnd=P},polygonEnd:function(){k.lineStart=S,k.lineEnd=C}};function A(r,n){r*=_.uR,n*=_.uR;var i=(0,_.mC)(n);M(i*(0,_.mC)(r),i*(0,_.O$)(r),(0,_.O$)(n))}function M(r,n,i){++a,s+=(r-s)/a,l+=(n-l)/a,u+=(i-u)/a}function S(){k.point=E}function E(r,n){r*=_.uR,n*=_.uR;var i=(0,_.mC)(n);m=i*(0,_.mC)(r),x=i*(0,_.O$)(r),b=(0,_.O$)(n),k.point=L,M(m,x,b)}function L(r,n){r*=_.uR,n*=_.uR;var i=(0,_.mC)(n),a=i*(0,_.mC)(r),s=i*(0,_.O$)(r),l=(0,_.O$)(n),u=(0,_.fv)((0,_._b)((u=x*l-b*s)*u+(u=b*a-m*l)*u+(u=m*s-x*a)*u),m*a+x*s+b*l);o+=u,c+=u*(m+(m=a)),f+=u*(x+(x=s)),h+=u*(b+(b=l)),M(m,x,b)}function C(){k.point=A}function O(){k.point=I}function P(){D(g,y),k.point=A}function I(r,n){g=r,y=n,r*=_.uR,n*=_.uR,k.point=D;var i=(0,_.mC)(n);m=i*(0,_.mC)(r),x=i*(0,_.O$)(r),b=(0,_.O$)(n),M(m,x,b)}function D(r,n){r*=_.uR,n*=_.uR;var i=(0,_.mC)(n),a=i*(0,_.mC)(r),s=i*(0,_.O$)(r),l=(0,_.O$)(n),u=x*l-b*s,g=b*a-m*l,y=m*s-x*a,w=(0,_._b)(u*u+g*g+y*y),T=(0,_.ZR)(w),k=w&&-T/w;p+=k*u,d+=k*g,v+=k*y,o+=T,c+=T*(m+(m=a)),f+=T*(x+(x=s)),h+=T*(b+(b=l)),M(m,x,b)}function z(r){a=o=s=l=u=c=f=h=p=d=v=0,(0,T.Z)(r,k);var n=p,i=d,g=v,y=n*n+i*i+g*g;return y<_.aW&&(n=c,i=f,g=h,o<_.Ho&&(n=s,i=l,g=u),(y=n*n+i*i+g*g)<_.aW)?[NaN,NaN]:[(0,_.fv)(i,n)*_.RW,(0,_.ZR)(g/(0,_._b)(y))*_.RW]}},7613:function(r,n,i){"use strict";i.d(n,{m:function(){return u},Z:function(){return f}});var a=i(7620);function o(r){return function(){return r}}var s=i(39695),l=i(49386);function u(r,n,i,o,l,u){if(i){var f=(0,s.mC)(n),h=(0,s.O$)(n),p=o*i;null==l?(l=n+o*s.BZ,u=n-p/2):(l=c(f,l),u=c(f,u),(o>0?l<u:l>u)&&(l+=o*s.BZ));for(var d,v=l;o>0?v>u:v<u;v-=p)d=(0,a.Y1)([f,-h*(0,s.mC)(v),-h*(0,s.O$)(v)]),r.point(d[0],d[1])}}function c(r,n){(n=(0,a.Og)(n))[0]-=r,(0,a.iJ)(n);var i=(0,s.Kh)(-n[1]);return((0>-n[2]?-i:i)+s.BZ-s.Ho)%s.BZ}function f(){var r,n,i=o([0,0]),a=o(90),c=o(6),f={point:function(i,a){r.push(i=n(i,a)),i[0]*=s.RW,i[1]*=s.RW}};function h(){var o=i.apply(this,arguments),h=a.apply(this,arguments)*s.uR,p=c.apply(this,arguments)*s.uR;return r=[],n=(0,l.I)(-o[0]*s.uR,-o[1]*s.uR,0).invert,u(f,h,p,1),o={type:"Polygon",coordinates:[r]},r=n=null,o}return h.center=function(r){return arguments.length?(i="function"==typeof r?r:o([+r[0],+r[1]]),h):i},h.radius=function(r){return arguments.length?(a="function"==typeof r?r:o(+r),h):a},h.precision=function(r){return arguments.length?(c="function"==typeof r?r:o(+r),h):c},h}},87070:function(r,n,i){"use strict";var a=i(97023),o=i(39695);n.Z=(0,a.Z)(function(){return!0},function(r){var n,i=NaN,a=NaN,s=NaN;return{lineStart:function(){r.lineStart(),n=1},point:function(l,u){var c,f,h,p,d,v,g=l>0?o.pi:-o.pi,y=(0,o.Wn)(l-i);(0,o.Wn)(y-o.pi)<o.Ho?(r.point(i,a=(a+u)/2>0?o.ou:-o.ou),r.point(s,a),r.lineEnd(),r.lineStart(),r.point(g,a),r.point(l,a),n=0):s!==g&&y>=o.pi&&((0,o.Wn)(i-s)<o.Ho&&(i-=s*o.Ho),(0,o.Wn)(l-g)<o.Ho&&(l-=g*o.Ho),c=i,f=a,h=l,v=(0,o.O$)(c-h),a=(0,o.Wn)(v)>o.Ho?(0,o.z4)(((0,o.O$)(f)*(d=(0,o.mC)(u))*(0,o.O$)(h)-(0,o.O$)(u)*(p=(0,o.mC)(f))*(0,o.O$)(c))/(p*d*v)):(f+u)/2,r.point(s,a),r.lineEnd(),r.lineStart(),r.point(g,a),n=0),r.point(i=l,a=u),s=g},lineEnd:function(){r.lineEnd(),i=a=NaN},clean:function(){return 2-n}}},function(r,n,i,a){var s;if(null==r)s=i*o.ou,a.point(-o.pi,s),a.point(0,s),a.point(o.pi,s),a.point(o.pi,0),a.point(o.pi,-s),a.point(0,-s),a.point(-o.pi,-s),a.point(-o.pi,0),a.point(-o.pi,s);else if((0,o.Wn)(r[0]-n[0])>o.Ho){var l=r[0]<n[0]?o.pi:-o.pi;s=i*l/2,a.point(-l,s),a.point(0,s),a.point(l,s)}else a.point(n[0],n[1])},[-o.pi,-o.ou])},85272:function(r,n,i){"use strict";i.d(n,{Z:function(){return o}});var a=i(73182);function o(){var r,n=[];return{point:function(n,i,a){r.push([n,i,a])},lineStart:function(){n.push(r=[])},lineEnd:a.Z,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],r=null,i}}}},1457:function(r,n,i){"use strict";i.d(n,{Z:function(){return c}});var a=i(7620),o=i(7613),s=i(39695),l=i(67108),u=i(97023);function c(r){var n=(0,s.mC)(r),i=6*s.uR,c=n>0,f=(0,s.Wn)(n)>s.Ho;function h(r,i){return(0,s.mC)(r)*(0,s.mC)(i)>n}function p(r,i,o){var l=(0,a.Og)(r),u=(0,a.Og)(i),c=[1,0,0],f=(0,a.T5)(l,u),h=(0,a.j9)(f,f),p=f[0],d=h-p*p;if(!d)return!o&&r;var v=(0,a.T5)(c,f),g=(0,a.T)(c,n*h/d),y=(0,a.T)(f,-n*p/d);(0,a.s0)(g,y);var m=(0,a.j9)(g,v),x=(0,a.j9)(v,v),b=m*m-x*((0,a.j9)(g,g)-1);if(!(b<0)){var _=(0,s._b)(b),w=(0,a.T)(v,(-m-_)/x);if((0,a.s0)(w,g),w=(0,a.Y1)(w),!o)return w;var T,k=r[0],A=i[0],M=r[1],S=i[1];A<k&&(T=k,k=A,A=T);var E=A-k,L=(0,s.Wn)(E-s.pi)<s.Ho;if(!L&&S<M&&(T=M,M=S,S=T),L||E<s.Ho?L?M+S>0^w[1]<((0,s.Wn)(w[0]-k)<s.Ho?M:S):M<=w[1]&&w[1]<=S:E>s.pi^(k<=w[0]&&w[0]<=A)){var C=(0,a.T)(v,(-m+_)/x);return(0,a.s0)(C,g),[w,(0,a.Y1)(C)]}}}function d(n,i){var a=c?r:s.pi-r,o=0;return n<-a?o|=1:n>a&&(o|=2),i<-a?o|=4:i>a&&(o|=8),o}return(0,u.Z)(h,function(r){var n,i,a,o,u;return{lineStart:function(){o=a=!1,u=1},point:function(v,g){var y,m,x=[v,g],b=h(v,g),_=c?b?0:d(v,g):b?d(v+(v<0?s.pi:-s.pi),g):0;(!n&&(o=a=b)&&r.lineStart(),b!==a&&(!(m=p(n,x))||(0,l.Z)(n,m)||(0,l.Z)(x,m))&&(x[2]=1),b!==a)?(u=0,b?(r.lineStart(),m=p(x,n),r.point(m[0],m[1])):(m=p(n,x),r.point(m[0],m[1],2),r.lineEnd()),n=m):f&&n&&c^b&&!(_&i)&&(y=p(x,n,!0))&&(u=0,c?(r.lineStart(),r.point(y[0][0],y[0][1]),r.point(y[1][0],y[1][1]),r.lineEnd()):(r.point(y[1][0],y[1][1]),r.lineEnd(),r.lineStart(),r.point(y[0][0],y[0][1],3))),!b||n&&(0,l.Z)(n,x)||r.point(x[0],x[1]),n=x,a=b,i=_},lineEnd:function(){a&&r.lineEnd(),n=null},clean:function(){return u|(o&&a)<<1}}},function(n,a,s,l){(0,o.m)(l,r,i,s,n,a)},c?[0,-r]:[-s.pi,r-s.pi])}},97023:function(r,n,i){"use strict";i.d(n,{Z:function(){return c}});var a=i(85272),o=i(46225),s=i(39695),l=i(23071),u=i(33064);function c(r,n,i,s){return function(c){var p,d,v,g=n(c),y=(0,a.Z)(),m=n(y),x=!1,b={point:_,lineStart:T,lineEnd:k,polygonStart:function(){b.point=A,b.lineStart=M,b.lineEnd=S,d=[],p=[]},polygonEnd:function(){b.point=_,b.lineStart=T,b.lineEnd=k,d=(0,u.TS)(d);var r=(0,l.Z)(p,s);d.length?(x||(c.polygonStart(),x=!0),(0,o.Z)(d,h,r,i,c)):r&&(x||(c.polygonStart(),x=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),x&&(c.polygonEnd(),x=!1),d=p=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function _(n,i){r(n,i)&&c.point(n,i)}function w(r,n){g.point(r,n)}function T(){b.point=w,g.lineStart()}function k(){b.point=_,g.lineEnd()}function A(r,n){v.push([r,n]),m.point(r,n)}function M(){m.lineStart(),v=[]}function S(){A(v[0][0],v[0][1]),m.lineEnd();var r,n,i,a,o=m.clean(),s=y.result(),l=s.length;if(v.pop(),p.push(v),v=null,l){if(1&o){if((n=(i=s[0]).length-1)>0){for(x||(c.polygonStart(),x=!0),c.lineStart(),r=0;r<n;++r)c.point((a=i[r])[0],a[1]);c.lineEnd()}}else l>1&&2&o&&s.push(s.pop().concat(s.shift())),d.push(s.filter(f))}}return b}}function f(r){return r.length>1}function h(r,n){return((r=r.x)[0]<0?r[1]-s.ou-s.Ho:s.ou-r[1])-((n=n.x)[0]<0?n[1]-s.ou-s.Ho:s.ou-n[1])}},87605:function(r,n,i){"use strict";i.d(n,{Z:function(){return u}});var a=i(39695),o=i(85272),s=i(46225),l=i(33064);function u(r,n,i,u){function c(a,o){return r<=a&&a<=i&&n<=o&&o<=u}function f(a,o,s,l){var c=0,f=0;if(null==a||(c=h(a,s))!==(f=h(o,s))||0>d(a,o)^s>0)do l.point(0===c||3===c?r:i,c>1?u:n);while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function h(o,s){return(0,a.Wn)(o[0]-r)<a.Ho?s>0?0:3:(0,a.Wn)(o[0]-i)<a.Ho?s>0?2:1:(0,a.Wn)(o[1]-n)<a.Ho?s>0?1:0:s>0?3:2}function p(r,n){return d(r.x,n.x)}function d(r,n){var i=h(r,1),a=h(n,1);return i!==a?i-a:0===i?n[1]-r[1]:1===i?r[0]-n[0]:2===i?r[1]-n[1]:n[0]-r[0]}return function(a){var h,d,v,g,y,m,x,b,_,w,T,k=a,A=(0,o.Z)(),M={point:S,lineStart:function(){M.point=E,d&&d.push(v=[]),w=!0,_=!1,x=b=NaN},lineEnd:function(){h&&(E(g,y),m&&_&&A.rejoin(),h.push(A.result())),M.point=S,_&&k.lineEnd()},polygonStart:function(){k=A,h=[],d=[],T=!0},polygonEnd:function(){var n=function(){for(var n=0,i=0,a=d.length;i<a;++i)for(var o,s,l=d[i],c=1,f=l.length,h=l[0],p=h[0],v=h[1];c<f;++c)o=p,s=v,p=(h=l[c])[0],v=h[1],s<=u?v>u&&(p-o)*(u-s)>(v-s)*(r-o)&&++n:v<=u&&(p-o)*(u-s)<(v-s)*(r-o)&&--n;return n}(),i=T&&n,o=(h=(0,l.TS)(h)).length;(i||o)&&(a.polygonStart(),i&&(a.lineStart(),f(null,null,1,a),a.lineEnd()),o&&(0,s.Z)(h,p,n,f,a),a.polygonEnd()),k=a,h=d=v=null}};function S(r,n){c(r,n)&&k.point(r,n)}function E(a,o){var s=c(a,o);if(d&&v.push([a,o]),w)g=a,y=o,m=s,w=!1,s&&(k.lineStart(),k.point(a,o));else if(s&&_)k.point(a,o);else{var l=[x=Math.max(-1e9,Math.min(1e9,x)),b=Math.max(-1e9,Math.min(1e9,b))],f=[a=Math.max(-1e9,Math.min(1e9,a)),o=Math.max(-1e9,Math.min(1e9,o))];(function(r,n,i,a,o,s){var l,u=r[0],c=r[1],f=0,h=1,p=n[0]-u,d=n[1]-c;if(l=i-u,p||!(l>0)){if(l/=p,p<0){if(l<f)return;l<h&&(h=l)}else if(p>0){if(l>h)return;l>f&&(f=l)}if(l=o-u,p||!(l<0)){if(l/=p,p<0){if(l>h)return;l>f&&(f=l)}else if(p>0){if(l<f)return;l<h&&(h=l)}if(l=a-c,d||!(l>0)){if(l/=d,d<0){if(l<f)return;l<h&&(h=l)}else if(d>0){if(l>h)return;l>f&&(f=l)}if(l=s-c,d||!(l<0)){if(l/=d,d<0){if(l>h)return;l>f&&(f=l)}else if(d>0){if(l<f)return;l<h&&(h=l)}return f>0&&(r[0]=u+f*p,r[1]=c+f*d),h<1&&(n[0]=u+h*p,n[1]=c+h*d),!0}}}}})(l,f,r,n,i,u)?(_||(k.lineStart(),k.point(l[0],l[1])),k.point(f[0],f[1]),s||k.lineEnd(),T=!1):s&&(k.lineStart(),k.point(a,o),T=!1)}x=a,b=o,_=s}return M}}},46225:function(r,n,i){"use strict";i.d(n,{Z:function(){return l}});var a=i(67108),o=i(39695);function s(r,n,i,a){this.x=r,this.z=n,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function l(r,n,i,l,c){var f,h,p=[],d=[];if(r.forEach(function(r){if(!((n=r.length-1)<=0)){var n,i,l=r[0],u=r[n];if((0,a.Z)(l,u)){if(!l[2]&&!u[2]){for(c.lineStart(),f=0;f<n;++f)c.point((l=r[f])[0],l[1]);return void c.lineEnd()}u[0]+=2*o.Ho}p.push(i=new s(l,r,null,!0)),d.push(i.o=new s(l,null,i,!1)),p.push(i=new s(u,r,null,!1)),d.push(i.o=new s(u,null,i,!0))}}),p.length){for(d.sort(n),u(p),u(d),f=0,h=d.length;f<h;++f)d[f].e=i=!i;for(var v,g,y=p[0];;){for(var m=y,x=!0;m.v;)if((m=m.n)===y)return;v=m.z,c.lineStart();do{if(m.v=m.o.v=!0,m.e){if(x)for(f=0,h=v.length;f<h;++f)c.point((g=v[f])[0],g[1]);else l(m.x,m.n.x,1,c);m=m.n}else{if(x)for(f=(v=m.p.z).length-1;f>=0;--f)c.point((g=v[f])[0],g[1]);else l(m.x,m.p.x,-1,c);m=m.p}v=(m=m.o).z,x=!x}while(!m.v);c.lineEnd()}}}function u(r){if(n=r.length){for(var n,i,a=0,o=r[0];++a<n;)o.n=i=r[a],i.p=o,o=i;o.n=i=r[0],i.p=o}}},96059:function(r,n,i){"use strict";function a(r,n){function i(i,a){return n((i=r(i,a))[0],i[1])}return r.invert&&n.invert&&(i.invert=function(i,a){return(i=n.invert(i,a))&&r.invert(i[0],i[1])}),i}i.d(n,{Z:function(){return a}})},8593:function(r,n,i){"use strict";function a(r){return r}i.d(n,{Z:function(){return a}})},27362:function(r,n,i){"use strict";i.r(n),i.d(n,{geoAlbers:function(){return tH},geoAlbersUsa:function(){return tG},geoArea:function(){return a.ZP},geoAzimuthalEqualArea:function(){return tZ.Z},geoAzimuthalEqualAreaRaw:function(){return tZ.l},geoAzimuthalEquidistant:function(){return tY.Z},geoAzimuthalEquidistantRaw:function(){return tY.N},geoBounds:function(){return o.Z},geoCentroid:function(){return s.Z},geoCircle:function(){return l.Z},geoClipAntimeridian:function(){return u.Z},geoClipCircle:function(){return c.Z},geoClipExtent:function(){return h},geoClipRectangle:function(){return f.Z},geoConicConformal:function(){return t0},geoConicConformalRaw:function(){return tQ},geoConicEqualArea:function(){return tV},geoConicEqualAreaRaw:function(){return tU},geoConicEquidistant:function(){return t3},geoConicEquidistantRaw:function(){return t2},geoContains:function(){return F},geoDistance:function(){return L},geoEqualEarth:function(){return t6},geoEqualEarthRaw:function(){return t4},geoEquirectangular:function(){return t1.Z},geoEquirectangularRaw:function(){return t1.k},geoGnomonic:function(){return t8.Z},geoGnomonicRaw:function(){return t8.M},geoGraticule:function(){return U},geoGraticule10:function(){return V},geoIdentity:function(){return t9},geoInterpolate:function(){return Y.Z},geoLength:function(){return M},geoMercator:function(){return tJ},geoMercatorRaw:function(){return tX},geoNaturalEarth1:function(){return et.Z},geoNaturalEarth1Raw:function(){return et.K},geoOrthographic:function(){return ee.Z},geoOrthographicRaw:function(){return ee.I},geoPath:function(){return tB},geoProjection:function(){return tN.Z},geoProjectionMutator:function(){return tN.r},geoRotation:function(){return tW.Z},geoStereographic:function(){return ei},geoStereographicRaw:function(){return en},geoStream:function(){return b.Z},geoTransform:function(){return t7.Z},geoTransverseMercator:function(){return eo},geoTransverseMercatorRaw:function(){return ea}});var a=i(97860),o=i(77338),s=i(66624),l=i(7613),u=i(87070),c=i(1457),f=i(87605);function h(){var r,n,i,a=0,o=0,s=960,l=500;return i={stream:function(i){return r&&n===i?r:r=(0,f.Z)(a,o,s,l)(n=i)},extent:function(u){return arguments.length?(a=+u[0][0],o=+u[0][1],s=+u[1][0],l=+u[1][1],r=n=null,i):[[a,o],[s,l]]}}}var p,d,v,g=i(23071),y=i(33940),m=i(39695),x=i(73182),b=i(72736),_=(0,y.Z)(),w={sphere:x.Z,point:x.Z,lineStart:function(){w.point=k,w.lineEnd=T},lineEnd:x.Z,polygonStart:x.Z,polygonEnd:x.Z};function T(){w.point=w.lineEnd=x.Z}function k(r,n){r*=m.uR,n*=m.uR,p=r,d=(0,m.O$)(n),v=(0,m.mC)(n),w.point=A}function A(r,n){r*=m.uR,n*=m.uR;var i=(0,m.O$)(n),a=(0,m.mC)(n),o=(0,m.Wn)(r-p),s=(0,m.mC)(o),l=a*(0,m.O$)(o),u=v*i-d*a*s,c=d*i+v*a*s;_.add((0,m.fv)((0,m._b)(l*l+u*u),c)),p=r,d=i,v=a}function M(r){return _.reset(),(0,b.Z)(r,w),+_}var S=[null,null],E={type:"LineString",coordinates:S};function L(r,n){return S[0]=r,S[1]=n,M(E)}var C={Feature:function(r,n){return P(r.geometry,n)},FeatureCollection:function(r,n){for(var i=r.features,a=-1,o=i.length;++a<o;)if(P(i[a].geometry,n))return!0;return!1}},O={Sphere:function(){return!0},Point:function(r,n){return 0===L(r.coordinates,n)},MultiPoint:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)if(0===L(i[a],n))return!0;return!1},LineString:function(r,n){return I(r.coordinates,n)},MultiLineString:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)if(I(i[a],n))return!0;return!1},Polygon:function(r,n){return D(r.coordinates,n)},MultiPolygon:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)if(D(i[a],n))return!0;return!1},GeometryCollection:function(r,n){for(var i=r.geometries,a=-1,o=i.length;++a<o;)if(P(i[a],n))return!0;return!1}};function P(r,n){return!(!r||!O.hasOwnProperty(r.type))&&O[r.type](r,n)}function I(r,n){for(var i,a,o,s=0,l=r.length;s<l;s++){if(0===(a=L(r[s],n))||s>0&&(o=L(r[s],r[s-1]))>0&&i<=o&&a<=o&&(i+a-o)*(1-Math.pow((i-a)/o,2))<m.aW*o)return!0;i=a}return!1}function D(r,n){return!!(0,g.Z)(r.map(z),R(n))}function z(r){return(r=r.map(R)).pop(),r}function R(r){return[r[0]*m.uR,r[1]*m.uR]}function F(r,n){return(r&&C.hasOwnProperty(r.type)?C[r.type]:P)(r,n)}var B=i(33064);function N(r,n,i){var a=(0,B.w6)(r,n-m.Ho,i).concat(n);return function(r){return a.map(function(n){return[r,n]})}}function j(r,n,i){var a=(0,B.w6)(r,n-m.Ho,i).concat(n);return function(r){return a.map(function(n){return[n,r]})}}function U(){var r,n,i,a,o,s,l,u,c,f,h,p,d=10,v=10,g=90,y=360,x=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return(0,B.w6)((0,m.mD)(a/g)*g,i,g).map(h).concat((0,B.w6)((0,m.mD)(u/y)*y,l,y).map(p)).concat((0,B.w6)((0,m.mD)(n/d)*d,r,d).filter(function(r){return(0,m.Wn)(r%g)>m.Ho}).map(c)).concat((0,B.w6)((0,m.mD)(s/v)*v,o,v).filter(function(r){return(0,m.Wn)(r%y)>m.Ho}).map(f))}return b.lines=function(){return _().map(function(r){return{type:"LineString",coordinates:r}})},b.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(l).slice(1),h(i).reverse().slice(1),p(u).reverse().slice(1))]}},b.extent=function(r){return arguments.length?b.extentMajor(r).extentMinor(r):b.extentMinor()},b.extentMajor=function(r){return arguments.length?(a=+r[0][0],i=+r[1][0],u=+r[0][1],l=+r[1][1],a>i&&(r=a,a=i,i=r),u>l&&(r=u,u=l,l=r),b.precision(x)):[[a,u],[i,l]]},b.extentMinor=function(i){return arguments.length?(n=+i[0][0],r=+i[1][0],s=+i[0][1],o=+i[1][1],n>r&&(i=n,n=r,r=i),s>o&&(i=s,s=o,o=i),b.precision(x)):[[n,s],[r,o]]},b.step=function(r){return arguments.length?b.stepMajor(r).stepMinor(r):b.stepMinor()},b.stepMajor=function(r){return arguments.length?(g=+r[0],y=+r[1],b):[g,y]},b.stepMinor=function(r){return arguments.length?(d=+r[0],v=+r[1],b):[d,v]},b.precision=function(d){return arguments.length?(x=+d,c=N(s,o,90),f=j(n,r,x),h=N(u,l,90),p=j(a,i,x),b):x},b.extentMajor([[-180,-90+m.Ho],[180,90-m.Ho]]).extentMinor([[-180,-80-m.Ho],[180,80+m.Ho]])}function V(){return U()()}var H,q,G,Z,Y=i(83074),W=i(8593),X=(0,y.Z)(),J=(0,y.Z)(),K={point:x.Z,lineStart:x.Z,lineEnd:x.Z,polygonStart:function(){K.lineStart=$,K.lineEnd=te},polygonEnd:function(){K.lineStart=K.lineEnd=K.point=x.Z,X.add((0,m.Wn)(J)),J.reset()},result:function(){return X.reset(),X/2}};function $(){K.point=Q}function Q(r,n){K.point=tt,H=G=r,q=Z=n}function tt(r,n){J.add(Z*r-G*n),G=r,Z=n}function te(){tt(H,q)}var tr,tn,ti,ta,to=i(3559),ts=0,tl=0,tu=0,tc=0,tf=0,th=0,tp=0,td=0,tv=0,tg={point:ty,lineStart:tm,lineEnd:t_,polygonStart:function(){tg.lineStart=tw,tg.lineEnd=tT},polygonEnd:function(){tg.point=ty,tg.lineStart=tm,tg.lineEnd=t_},result:function(){var r=tv?[tp/tv,td/tv]:th?[tc/th,tf/th]:tu?[ts/tu,tl/tu]:[NaN,NaN];return ts=tl=tu=tc=tf=th=tp=td=tv=0,r}};function ty(r,n){ts+=r,tl+=n,++tu}function tm(){tg.point=tx}function tx(r,n){tg.point=tb,ty(ti=r,ta=n)}function tb(r,n){var i=r-ti,a=n-ta,o=(0,m._b)(i*i+a*a);tc+=o*(ti+r)/2,tf+=o*(ta+n)/2,th+=o,ty(ti=r,ta=n)}function t_(){tg.point=ty}function tw(){tg.point=tk}function tT(){tA(tr,tn)}function tk(r,n){tg.point=tA,ty(tr=ti=r,tn=ta=n)}function tA(r,n){var i=r-ti,a=n-ta,o=(0,m._b)(i*i+a*a);tc+=o*(ti+r)/2,tf+=o*(ta+n)/2,th+=o,tp+=(o=ta*r-ti*n)*(ti+r),td+=o*(ta+n),tv+=3*o,ty(ti=r,ta=n)}function tM(r){this._context=r}tM.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(r,n){switch(this._point){case 0:this._context.moveTo(r,n),this._point=1;break;case 1:this._context.lineTo(r,n);break;default:this._context.moveTo(r+this._radius,n),this._context.arc(r,n,this._radius,0,m.BZ)}},result:x.Z};var tS,tE,tL,tC,tO,tP=(0,y.Z)(),tI={point:x.Z,lineStart:function(){tI.point=tD},lineEnd:function(){tS&&tz(tE,tL),tI.point=x.Z},polygonStart:function(){tS=!0},polygonEnd:function(){tS=null},result:function(){return tP.reset(),+tP}};function tD(r,n){tI.point=tz,tE=tC=r,tL=tO=n}function tz(r,n){tC-=r,tO-=n,tP.add((0,m._b)(tC*tC+tO*tO)),tC=r,tO=n}function tR(){this._string=[]}function tF(r){return"m0,"+r+"a"+r+","+r+" 0 1,1 0,"+-2*r+"a"+r+","+r+" 0 1,1 0,"+2*r+"z"}function tB(r,n){var i,a,o=4.5;function s(r){return r&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),(0,b.Z)(r,i(a))),a.result()}return s.area=function(r){return(0,b.Z)(r,i(K)),K.result()},s.measure=function(r){return(0,b.Z)(r,i(tI)),tI.result()},s.bounds=function(r){return(0,b.Z)(r,i(to.Z)),to.Z.result()},s.centroid=function(r){return(0,b.Z)(r,i(tg)),tg.result()},s.projection=function(n){return arguments.length?(i=null==n?(r=null,W.Z):(r=n).stream,s):r},s.context=function(r){return arguments.length?(a=null==r?(n=null,new tR):new tM(n=r),"function"!=typeof o&&a.pointRadius(o),s):n},s.pointRadius=function(r){return arguments.length?(o="function"==typeof r?r:(a.pointRadius(+r),+r),s):o},s.projection(r).context(n)}tR.prototype={_radius:4.5,_circle:tF(4.5),pointRadius:function(r){return(r=+r)!==this._radius&&(this._radius=r,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(r,n){switch(this._point){case 0:this._string.push("M",r,",",n),this._point=1;break;case 1:this._string.push("L",r,",",n);break;default:null==this._circle&&(this._circle=tF(this._radius)),this._string.push("M",r,",",n,this._circle)}},result:function(){if(this._string.length){var r=this._string.join("");return this._string=[],r}return null}};var tN=i(15002);function tj(r){var n=0,i=m.pi/3,a=(0,tN.r)(r),o=a(n,i);return o.parallels=function(r){return arguments.length?a(n=r[0]*m.uR,i=r[1]*m.uR):[n*m.RW,i*m.RW]},o}function tU(r,n){var i=(0,m.O$)(r),a=(i+(0,m.O$)(n))/2;if((0,m.Wn)(a)<m.Ho)return function(r){var n=(0,m.mC)(r);function i(r,i){return[r*n,(0,m.O$)(i)/n]}return i.invert=function(r,i){return[r/n,(0,m.ZR)(i*n)]},i}(r);var o=1+i*(2*a-i),s=(0,m._b)(o)/a;function l(r,n){var i=(0,m._b)(o-2*a*(0,m.O$)(n))/a;return[i*(0,m.O$)(r*=a),s-i*(0,m.mC)(r)]}return l.invert=function(r,n){var i=s-n,l=(0,m.fv)(r,(0,m.Wn)(i))*(0,m.Xx)(i);return i*a<0&&(l-=m.pi*(0,m.Xx)(r)*(0,m.Xx)(i)),[l/a,(0,m.ZR)((o-(r*r+i*i)*a*a)/(2*a))]},l}function tV(){return tj(tU).scale(155.424).center([0,33.6442])}function tH(){return tV().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var tq=i(47589);function tG(){var r,n,i,a,o,s,l=tH(),u=tV().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=tV().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(r,n){s=[r,n]}};function h(r){var n=r[0],l=r[1];return s=null,i.point(n,l),s||(a.point(n,l),s)||(o.point(n,l),s)}function p(){return r=n=null,h}return h.invert=function(r){var n=l.scale(),i=l.translate(),a=(r[0]-i[0])/n,o=(r[1]-i[1])/n;return(o>=.12&&o<.234&&a>=-.425&&a<-.214?u:o>=.166&&o<.234&&a>=-.214&&a<-.115?c:l).invert(r)},h.stream=function(i){var a,o;return r&&n===i?r:(o=(a=[l.stream(n=i),u.stream(i),c.stream(i)]).length,r={point:function(r,n){for(var i=-1;++i<o;)a[i].point(r,n)},sphere:function(){for(var r=-1;++r<o;)a[r].sphere()},lineStart:function(){for(var r=-1;++r<o;)a[r].lineStart()},lineEnd:function(){for(var r=-1;++r<o;)a[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<o;)a[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<o;)a[r].polygonEnd()}})},h.precision=function(r){return arguments.length?(l.precision(r),u.precision(r),c.precision(r),p()):l.precision()},h.scale=function(r){return arguments.length?(l.scale(r),u.scale(.35*r),c.scale(r),h.translate(l.translate())):l.scale()},h.translate=function(r){if(!arguments.length)return l.translate();var n=l.scale(),s=+r[0],h=+r[1];return i=l.translate(r).clipExtent([[s-.455*n,h-.238*n],[s+.455*n,h+.238*n]]).stream(f),a=u.translate([s-.307*n,h+.201*n]).clipExtent([[s-.425*n+m.Ho,h+.12*n+m.Ho],[s-.214*n-m.Ho,h+.234*n-m.Ho]]).stream(f),o=c.translate([s-.205*n,h+.212*n]).clipExtent([[s-.214*n+m.Ho,h+.166*n+m.Ho],[s-.115*n-m.Ho,h+.234*n-m.Ho]]).stream(f),p()},h.fitExtent=function(r,n){return(0,tq.qg)(h,r,n)},h.fitSize=function(r,n){return(0,tq.mF)(h,r,n)},h.fitWidth=function(r,n){return(0,tq.V6)(h,r,n)},h.fitHeight=function(r,n){return(0,tq.rf)(h,r,n)},h.scale(1070)}var tZ=i(12956),tY=i(17889),tW=i(49386);function tX(r,n){return[r,(0,m.cM)((0,m.OR)((m.ou+n)/2))]}function tJ(){return tK(tX).scale(961/m.BZ)}function tK(r){var n,i,a,o=(0,tN.Z)(r),s=o.center,l=o.scale,u=o.translate,c=o.clipExtent,f=null;function h(){var s=m.pi*l(),u=o((0,tW.Z)(o.rotate()).invert([0,0]));return c(null==f?[[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]]:r===tX?[[Math.max(u[0]-s,f),n],[Math.min(u[0]+s,i),a]]:[[f,Math.max(u[1]-s,n)],[i,Math.min(u[1]+s,a)]])}return o.scale=function(r){return arguments.length?(l(r),h()):l()},o.translate=function(r){return arguments.length?(u(r),h()):u()},o.center=function(r){return arguments.length?(s(r),h()):s()},o.clipExtent=function(r){return arguments.length?(null==r?f=n=i=a=null:(f=+r[0][0],n=+r[0][1],i=+r[1][0],a=+r[1][1]),h()):null==f?null:[[f,n],[i,a]]},h()}function t$(r){return(0,m.OR)((m.ou+r)/2)}function tQ(r,n){var i=(0,m.mC)(r),a=r===n?(0,m.O$)(r):(0,m.cM)(i/(0,m.mC)(n))/(0,m.cM)(t$(n)/t$(r)),o=i*(0,m.sQ)(t$(r),a)/a;if(!a)return tX;function s(r,n){o>0?n<-m.ou+m.Ho&&(n=-m.ou+m.Ho):n>m.ou-m.Ho&&(n=m.ou-m.Ho);var i=o/(0,m.sQ)(t$(n),a);return[i*(0,m.O$)(a*r),o-i*(0,m.mC)(a*r)]}return s.invert=function(r,n){var i=o-n,s=(0,m.Xx)(a)*(0,m._b)(r*r+i*i),l=(0,m.fv)(r,(0,m.Wn)(i))*(0,m.Xx)(i);return i*a<0&&(l-=m.pi*(0,m.Xx)(r)*(0,m.Xx)(i)),[l/a,2*(0,m.z4)((0,m.sQ)(o/s,1/a))-m.ou]},s}function t0(){return tj(tQ).scale(109.5).parallels([30,30])}tX.invert=function(r,n){return[r,2*(0,m.z4)((0,m.Qq)(n))-m.ou]};var t1=i(97492);function t2(r,n){var i=(0,m.mC)(r),a=r===n?(0,m.O$)(r):(i-(0,m.mC)(n))/(n-r),o=i/a+r;if((0,m.Wn)(a)<m.Ho)return t1.k;function s(r,n){var i=o-n,s=a*r;return[i*(0,m.O$)(s),o-i*(0,m.mC)(s)]}return s.invert=function(r,n){var i=o-n,s=(0,m.fv)(r,(0,m.Wn)(i))*(0,m.Xx)(i);return i*a<0&&(s-=m.pi*(0,m.Xx)(r)*(0,m.Xx)(i)),[s/a,o-(0,m.Xx)(a)*(0,m._b)(r*r+i*i)]},s}function t3(){return tj(t2).scale(131.154).center([0,13.9389])}var t5=(0,m._b)(3)/2;function t4(r,n){var i=(0,m.ZR)(t5*(0,m.O$)(n)),a=i*i,o=a*a*a;return[r*(0,m.mC)(i)/(t5*(1.340264+-.24331799999999998*a+o*(.0062510000000000005+.034164*a))),i*(1.340264+-.081106*a+o*(893e-6+.003796*a))]}function t6(){return(0,tN.Z)(t4).scale(177.158)}t4.invert=function(r,n){for(var i,a=n,o=a*a,s=o*o*o,l=0;l<12&&(s=(o=(a-=i=(a*(1.340264+-.081106*o+s*(893e-6+.003796*o))-n)/(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o)))*a)*o*o,!((0,m.Wn)(i)<m.aW));++l);return[t5*r*(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o))/(0,m.mC)(a),(0,m.ZR)((0,m.O$)(a)/t5)]};var t8=i(98936),t7=i(64684);function t9(){var r,n,i,a,o,s,l,u=1,c=0,h=0,p=1,d=1,v=0,g=null,y=1,x=1,b=(0,t7.l)({point:function(r,n){var i=T([r,n]);this.stream.point(i[0],i[1])}}),_=W.Z;function w(){return y=u*p,x=u*d,s=l=null,T}function T(i){var a=i[0]*y,o=i[1]*x;if(v){var s=o*r-a*n;a=a*r+o*n,o=s}return[a+c,o+h]}return T.invert=function(i){var a=i[0]-c,o=i[1]-h;if(v){var s=o*r+a*n;a=a*r-o*n,o=s}return[a/y,o/x]},T.stream=function(r){return s&&l===r?s:s=b(_(l=r))},T.postclip=function(r){return arguments.length?(_=r,g=i=a=o=null,w()):_},T.clipExtent=function(r){return arguments.length?(_=null==r?(g=i=a=o=null,W.Z):(0,f.Z)(g=+r[0][0],i=+r[0][1],a=+r[1][0],o=+r[1][1]),w()):null==g?null:[[g,i],[a,o]]},T.scale=function(r){return arguments.length?(u=+r,w()):u},T.translate=function(r){return arguments.length?(c=+r[0],h=+r[1],w()):[c,h]},T.angle=function(i){return arguments.length?(v=i%360*m.uR,n=(0,m.O$)(v),r=(0,m.mC)(v),w()):v*m.RW},T.reflectX=function(r){return arguments.length?(p=r?-1:1,w()):p<0},T.reflectY=function(r){return arguments.length?(d=r?-1:1,w()):d<0},T.fitExtent=function(r,n){return(0,tq.qg)(T,r,n)},T.fitSize=function(r,n){return(0,tq.mF)(T,r,n)},T.fitWidth=function(r,n){return(0,tq.V6)(T,r,n)},T.fitHeight=function(r,n){return(0,tq.rf)(T,r,n)},T}var et=i(26867),ee=i(57962),er=i(25382);function en(r,n){var i=(0,m.mC)(n),a=1+(0,m.mC)(r)*i;return[i*(0,m.O$)(r)/a,(0,m.O$)(n)/a]}function ei(){return(0,tN.Z)(en).scale(250).clipAngle(142)}function ea(r,n){return[(0,m.cM)((0,m.OR)((m.ou+n)/2)),-r]}function eo(){var r=tK(ea),n=r.center,i=r.rotate;return r.center=function(r){return arguments.length?n([-r[1],r[0]]):[(r=n())[1],-r[0]]},r.rotate=function(r){return arguments.length?i([r[0],r[1],r.length>2?r[2]+90:90]):[(r=i())[0],r[1],r[2]-90]},i([0,0,90]).scale(159.155)}en.invert=(0,er.O)(function(r){return 2*(0,m.z4)(r)}),ea.invert=function(r,n){return[-n,2*(0,m.z4)((0,m.Qq)(r))-m.ou]}},83074:function(r,n,i){"use strict";i.d(n,{Z:function(){return o}});var a=i(39695);function o(r,n){var i=r[0]*a.uR,o=r[1]*a.uR,s=n[0]*a.uR,l=n[1]*a.uR,u=(0,a.mC)(o),c=(0,a.O$)(o),f=(0,a.mC)(l),h=(0,a.O$)(l),p=u*(0,a.mC)(i),d=u*(0,a.O$)(i),v=f*(0,a.mC)(s),g=f*(0,a.O$)(s),y=2*(0,a.ZR)((0,a._b)((0,a.Jy)(l-o)+u*f*(0,a.Jy)(s-i))),m=(0,a.O$)(y),x=y?function(r){var n=(0,a.O$)(r*=y)/m,i=(0,a.O$)(y-r)/m,o=i*p+n*v,s=i*d+n*g;return[(0,a.fv)(s,o)*a.RW,(0,a.fv)(i*c+n*h,(0,a._b)(o*o+s*s))*a.RW]}:function(){return[i*a.RW,o*a.RW]};return x.distance=y,x}},39695:function(r,n,i){"use strict";i.d(n,{BZ:function(){return c},Ho:function(){return a},Jy:function(){return S},Kh:function(){return A},O$:function(){return _},OR:function(){return k},Qq:function(){return m},RW:function(){return f},Wn:function(){return p},Xx:function(){return w},ZR:function(){return M},_b:function(){return T},aW:function(){return o},cM:function(){return x},fv:function(){return v},mC:function(){return g},mD:function(){return y},ou:function(){return l},pi:function(){return s},pu:function(){return u},sQ:function(){return b},uR:function(){return h},z4:function(){return d}});var a=1e-6,o=1e-12,s=Math.PI,l=s/2,u=s/4,c=2*s,f=180/s,h=s/180,p=Math.abs,d=Math.atan,v=Math.atan2,g=Math.cos,y=Math.ceil,m=Math.exp,x=Math.log,b=Math.pow,_=Math.sin,w=Math.sign||function(r){return r>0?1:r<0?-1:0},T=Math.sqrt,k=Math.tan;function A(r){return r>1?0:r<-1?s:Math.acos(r)}function M(r){return r>1?l:r<-1?-l:Math.asin(r)}function S(r){return(r=_(r/2))*r}},73182:function(r,n,i){"use strict";function a(){}i.d(n,{Z:function(){return a}})},3559:function(r,n,i){"use strict";var a=i(73182),o=1/0,s=1/0,l=-1/0,u=l,c={point:function(r,n){r<o&&(o=r),r>l&&(l=r),n<s&&(s=n),n>u&&(u=n)},lineStart:a.Z,lineEnd:a.Z,polygonStart:a.Z,polygonEnd:a.Z,result:function(){var r=[[o,s],[l,u]];return l=u=-(s=o=1/0),r}};n.Z=c},67108:function(r,n,i){"use strict";i.d(n,{Z:function(){return o}});var a=i(39695);function o(r,n){return(0,a.Wn)(r[0]-n[0])<a.Ho&&(0,a.Wn)(r[1]-n[1])<a.Ho}},23071:function(r,n,i){"use strict";i.d(n,{Z:function(){return c}});var a=i(33940),o=i(7620),s=i(39695),l=(0,a.Z)();function u(r){return(0,s.Wn)(r[0])<=s.pi?r[0]:(0,s.Xx)(r[0])*(((0,s.Wn)(r[0])+s.pi)%s.BZ-s.pi)}function c(r,n){var i=u(n),a=n[1],c=(0,s.O$)(a),f=[(0,s.O$)(i),-(0,s.mC)(i),0],h=0,p=0;l.reset(),1===c?a=s.ou+s.Ho:-1===c&&(a=-s.ou-s.Ho);for(var d=0,v=r.length;d<v;++d)if(y=(g=r[d]).length)for(var g,y,m=g[y-1],x=u(m),b=m[1]/2+s.pu,_=(0,s.O$)(b),w=(0,s.mC)(b),T=0;T<y;++T,x=A,_=S,w=E,m=k){var k=g[T],A=u(k),M=k[1]/2+s.pu,S=(0,s.O$)(M),E=(0,s.mC)(M),L=A-x,C=L>=0?1:-1,O=C*L,P=O>s.pi,I=_*S;if(l.add((0,s.fv)(I*C*(0,s.O$)(O),w*E+I*(0,s.mC)(O))),h+=P?L+C*s.BZ:L,P^x>=i^A>=i){var D=(0,o.T5)((0,o.Og)(m),(0,o.Og)(k));(0,o.iJ)(D);var z=(0,o.T5)(f,D);(0,o.iJ)(z);var R=(P^L>=0?-1:1)*(0,s.ZR)(z[2]);(a>R||a===R&&(D[0]||D[1]))&&(p+=P^L>=0?1:-1)}}return(h<-s.Ho||h<s.Ho&&l<-s.Ho)^1&p}},25382:function(r,n,i){"use strict";i.d(n,{O:function(){return s},W:function(){return o}});var a=i(39695);function o(r){return function(n,i){var o=(0,a.mC)(n),s=(0,a.mC)(i),l=r(o*s);return[l*s*(0,a.O$)(n),l*(0,a.O$)(i)]}}function s(r){return function(n,i){var o=(0,a._b)(n*n+i*i),s=r(o),l=(0,a.O$)(s),u=(0,a.mC)(s);return[(0,a.fv)(n*l,o*u),(0,a.ZR)(o&&i*l/o)]}}},12956:function(r,n,i){"use strict";i.d(n,{Z:function(){return u},l:function(){return l}});var a=i(39695),o=i(25382),s=i(15002),l=(0,o.W)(function(r){return(0,a._b)(2/(1+r))});function u(){return(0,s.Z)(l).scale(124.75).clipAngle(179.999)}l.invert=(0,o.O)(function(r){return 2*(0,a.ZR)(r/2)})},17889:function(r,n,i){"use strict";i.d(n,{N:function(){return l},Z:function(){return u}});var a=i(39695),o=i(25382),s=i(15002),l=(0,o.W)(function(r){return(r=(0,a.Kh)(r))&&r/(0,a.O$)(r)});function u(){return(0,s.Z)(l).scale(79.4188).clipAngle(179.999)}l.invert=(0,o.O)(function(r){return r})},97492:function(r,n,i){"use strict";i.d(n,{Z:function(){return s},k:function(){return o}});var a=i(15002);function o(r,n){return[r,n]}function s(){return(0,a.Z)(o).scale(152.63)}o.invert=o},47589:function(r,n,i){"use strict";i.d(n,{V6:function(){return c},mF:function(){return u},qg:function(){return l},rf:function(){return f}});var a=i(72736),o=i(3559);function s(r,n,i){var s=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),null!=s&&r.clipExtent(null),(0,a.Z)(i,r.stream(o.Z)),n(o.Z.result()),null!=s&&r.clipExtent(s),r}function l(r,n,i){return s(r,function(i){var a=n[1][0]-n[0][0],o=n[1][1]-n[0][1],s=Math.min(a/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+n[0][0]+(a-s*(i[1][0]+i[0][0]))/2,u=+n[0][1]+(o-s*(i[1][1]+i[0][1]))/2;r.scale(150*s).translate([l,u])},i)}function u(r,n,i){return l(r,[[0,0],n],i)}function c(r,n,i){return s(r,function(i){var a=+n,o=a/(i[1][0]-i[0][0]),s=(a-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];r.scale(150*o).translate([s,l])},i)}function f(r,n,i){return s(r,function(i){var a=+n,o=a/(i[1][1]-i[0][1]),s=-o*i[0][0],l=(a-o*(i[1][1]+i[0][1]))/2;r.scale(150*o).translate([s,l])},i)}},98936:function(r,n,i){"use strict";i.d(n,{M:function(){return l},Z:function(){return u}});var a=i(39695),o=i(25382),s=i(15002);function l(r,n){var i=(0,a.mC)(n),o=(0,a.mC)(r)*i;return[i*(0,a.O$)(r)/o,(0,a.O$)(n)/o]}function u(){return(0,s.Z)(l).scale(144.049).clipAngle(60)}l.invert=(0,o.O)(a.z4)},15002:function(r,n,i){"use strict";i.d(n,{Z:function(){return x},r:function(){return b}});var a=i(87070),o=i(1457),s=i(87605),l=i(96059),u=i(8593),c=i(39695),f=i(49386),h=i(64684),p=i(47589),d=i(7620),v=(0,c.mC)(30*c.uR);function g(r,n){return+n?function(r,n){function i(a,o,s,l,u,f,h,p,d,g,y,m,x,b){var _=h-a,w=p-o,T=_*_+w*w;if(T>4*n&&x--){var k=l+g,A=u+y,M=f+m,S=(0,c._b)(k*k+A*A+M*M),E=(0,c.ZR)(M/=S),L=(0,c.Wn)((0,c.Wn)(M)-1)<c.Ho||(0,c.Wn)(s-d)<c.Ho?(s+d)/2:(0,c.fv)(A,k),C=r(L,E),O=C[0],P=C[1],I=O-a,D=P-o,z=w*I-_*D;(z*z/T>n||(0,c.Wn)((_*I+w*D)/T-.5)>.3||l*g+u*y+f*m<v)&&(i(a,o,s,l,u,f,O,P,L,k/=S,A/=S,M,x,b),b.point(O,P),i(O,P,L,k,A,M,h,p,d,g,y,m,x,b))}}return function(n){var a,o,s,l,u,c,f,h,p,v,g,y,m={point:x,lineStart:b,lineEnd:w,polygonStart:function(){n.polygonStart(),m.lineStart=T},polygonEnd:function(){n.polygonEnd(),m.lineStart=b}};function x(i,a){i=r(i,a),n.point(i[0],i[1])}function b(){h=NaN,m.point=_,n.lineStart()}function _(a,o){var s=(0,d.Og)([a,o]),l=r(a,o);i(h,p,f,v,g,y,h=l[0],p=l[1],f=a,v=s[0],g=s[1],y=s[2],16,n),n.point(h,p)}function w(){m.point=x,n.lineEnd()}function T(){b(),m.point=k,m.lineEnd=A}function k(r,n){_(a=r,n),o=h,s=p,l=v,u=g,c=y,m.point=_}function A(){i(h,p,f,v,g,y,o,s,a,l,u,c,16,n),m.lineEnd=w,w()}return m}}(r,n):(0,h.l)({point:function(n,i){n=r(n,i),this.stream.point(n[0],n[1])}})}var y=(0,h.l)({point:function(r,n){this.stream.point(r*c.uR,n*c.uR)}});function m(r,n,i,a,o,s){var l=(0,c.mC)(s),u=(0,c.O$)(s),f=l*r,h=u*r,p=l/r,d=u/r,v=(u*i-l*n)/r,g=(u*n+l*i)/r;function y(r,s){return[f*(r*=a)-h*(s*=o)+n,i-h*r-f*s]}return y.invert=function(r,n){return[a*(p*r-d*n+v),o*(g-d*r-p*n)]},y}function x(r){return b(function(){return r})()}function b(r){var n,i,d,v,x,b,_,w,T,k,A=150,M=480,S=250,E=0,L=0,C=0,O=0,P=0,I=0,D=1,z=1,R=null,F=a.Z,B=null,N=u.Z,j=.5;function U(r){return w(r[0]*c.uR,r[1]*c.uR)}function V(r){return(r=w.invert(r[0],r[1]))&&[r[0]*c.RW,r[1]*c.RW]}function H(){var r=m(A,0,0,D,z,I).apply(null,n(E,L)),a=(I?m:function(r,n,i,a,o){function s(s,l){return[n+r*(s*=a),i-r*(l*=o)]}return s.invert=function(s,l){return[(s-n)/r*a,(i-l)/r*o]},s})(A,M-r[0],S-r[1],D,z,I);return i=(0,f.I)(C,O,P),_=(0,l.Z)(n,a),w=(0,l.Z)(i,_),b=g(_,j),q()}function q(){return T=k=null,U}return U.stream=function(r){var n;return T&&k===r?T:T=y((n=i,(0,h.l)({point:function(r,i){var a=n(r,i);return this.stream.point(a[0],a[1])}}))(F(b(N(k=r)))))},U.preclip=function(r){return arguments.length?(F=r,R=void 0,q()):F},U.postclip=function(r){return arguments.length?(N=r,B=d=v=x=null,q()):N},U.clipAngle=function(r){return arguments.length?(F=+r?(0,o.Z)(R=r*c.uR):(R=null,a.Z),q()):R*c.RW},U.clipExtent=function(r){return arguments.length?(N=null==r?(B=d=v=x=null,u.Z):(0,s.Z)(B=+r[0][0],d=+r[0][1],v=+r[1][0],x=+r[1][1]),q()):null==B?null:[[B,d],[v,x]]},U.scale=function(r){return arguments.length?(A=+r,H()):A},U.translate=function(r){return arguments.length?(M=+r[0],S=+r[1],H()):[M,S]},U.center=function(r){return arguments.length?(E=r[0]%360*c.uR,L=r[1]%360*c.uR,H()):[E*c.RW,L*c.RW]},U.rotate=function(r){return arguments.length?(C=r[0]%360*c.uR,O=r[1]%360*c.uR,P=r.length>2?r[2]%360*c.uR:0,H()):[C*c.RW,O*c.RW,P*c.RW]},U.angle=function(r){return arguments.length?(I=r%360*c.uR,H()):I*c.RW},U.reflectX=function(r){return arguments.length?(D=r?-1:1,H()):D<0},U.reflectY=function(r){return arguments.length?(z=r?-1:1,H()):z<0},U.precision=function(r){return arguments.length?(b=g(_,j=r*r),q()):(0,c._b)(j)},U.fitExtent=function(r,n){return(0,p.qg)(U,r,n)},U.fitSize=function(r,n){return(0,p.mF)(U,r,n)},U.fitWidth=function(r,n){return(0,p.V6)(U,r,n)},U.fitHeight=function(r,n){return(0,p.rf)(U,r,n)},function(){return n=r.apply(this,arguments),U.invert=n.invert&&V,H()}}},26867:function(r,n,i){"use strict";i.d(n,{K:function(){return s},Z:function(){return l}});var a=i(15002),o=i(39695);function s(r,n){var i=n*n,a=i*i;return[r*(.8707-.131979*i+a*(a*(.003971*i-.001529*a)-.013791)),n*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))]}function l(){return(0,a.Z)(s).scale(175.295)}s.invert=function(r,n){var i,a=n,s=25;do{var l=a*a,u=l*l;a-=i=(a*(1.007226+l*(.015085+u*(.028874*l-.044475-.005916*u)))-n)/(1.007226+l*(.045255+u*(.259866*l-.311325-.005916*11*u)))}while((0,o.Wn)(i)>o.Ho&&--s>0);return[r/(.8707+(l=a*a)*(l*(l*l*l*(.003971-.001529*l)-.013791)-.131979)),a]}},57962:function(r,n,i){"use strict";i.d(n,{I:function(){return l},Z:function(){return u}});var a=i(39695),o=i(25382),s=i(15002);function l(r,n){return[(0,a.mC)(n)*(0,a.O$)(r),(0,a.O$)(n)]}function u(){return(0,s.Z)(l).scale(249.5).clipAngle(90+a.Ho)}l.invert=(0,o.O)(a.ZR)},49386:function(r,n,i){"use strict";i.d(n,{I:function(){return l},Z:function(){return h}});var a=i(96059),o=i(39695);function s(r,n){return[(0,o.Wn)(r)>o.pi?r+Math.round(-r/o.BZ)*o.BZ:r,n]}function l(r,n,i){return(r%=o.BZ)?n||i?(0,a.Z)(c(r),f(n,i)):c(r):n||i?f(n,i):s}function u(r){return function(n,i){return[(n+=r)>o.pi?n-o.BZ:n<-o.pi?n+o.BZ:n,i]}}function c(r){var n=u(r);return n.invert=u(-r),n}function f(r,n){var i=(0,o.mC)(r),a=(0,o.O$)(r),s=(0,o.mC)(n),l=(0,o.O$)(n);function u(r,n){var u=(0,o.mC)(n),c=(0,o.mC)(r)*u,f=(0,o.O$)(r)*u,h=(0,o.O$)(n),p=h*i+c*a;return[(0,o.fv)(f*s-p*l,c*i-h*a),(0,o.ZR)(p*s+f*l)]}return u.invert=function(r,n){var u=(0,o.mC)(n),c=(0,o.mC)(r)*u,f=(0,o.O$)(r)*u,h=(0,o.O$)(n),p=h*s-f*l;return[(0,o.fv)(f*s+h*l,c*i+p*a),(0,o.ZR)(p*i-c*a)]},u}function h(r){function n(n){return(n=r(n[0]*o.uR,n[1]*o.uR))[0]*=o.RW,n[1]*=o.RW,n}return r=l(r[0]*o.uR,r[1]*o.uR,r.length>2?r[2]*o.uR:0),n.invert=function(n){return(n=r.invert(n[0]*o.uR,n[1]*o.uR))[0]*=o.RW,n[1]*=o.RW,n},n}s.invert=s},72736:function(r,n,i){"use strict";function a(r,n){r&&s.hasOwnProperty(r.type)&&s[r.type](r,n)}i.d(n,{Z:function(){return c}});var o={Feature:function(r,n){a(r.geometry,n)},FeatureCollection:function(r,n){for(var i=r.features,o=-1,s=i.length;++o<s;)a(i[o].geometry,n)}},s={Sphere:function(r,n){n.sphere()},Point:function(r,n){r=r.coordinates,n.point(r[0],r[1],r[2])},MultiPoint:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)r=i[a],n.point(r[0],r[1],r[2])},LineString:function(r,n){l(r.coordinates,n,0)},MultiLineString:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)l(i[a],n,0)},Polygon:function(r,n){u(r.coordinates,n)},MultiPolygon:function(r,n){for(var i=r.coordinates,a=-1,o=i.length;++a<o;)u(i[a],n)},GeometryCollection:function(r,n){for(var i=r.geometries,o=-1,s=i.length;++o<s;)a(i[o],n)}};function l(r,n,i){var a,o=-1,s=r.length-i;for(n.lineStart();++o<s;)a=r[o],n.point(a[0],a[1],a[2]);n.lineEnd()}function u(r,n){var i=-1,a=r.length;for(n.polygonStart();++i<a;)l(r[i],n,1);n.polygonEnd()}function c(r,n){r&&o.hasOwnProperty(r.type)?o[r.type](r,n):a(r,n)}},64684:function(r,n,i){"use strict";function a(r){return{stream:o(r)}}function o(r){return function(n){var i=new s;for(var a in r)i[a]=r[a];return i.stream=n,i}}function s(){}i.d(n,{Z:function(){return a},l:function(){return o}}),s.prototype={constructor:s,point:function(r,n){this.stream.point(r,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(r,n,i){"use strict";function a(r,n){return r.parent===n.parent?1:2}function o(r,n){return r+n.x}function s(r,n){return Math.max(r,n.y)}function l(){var r=a,n=1,i=1,l=!1;function u(a){var u,c=0;a.eachAfter(function(n){var i=n.children;i?(n.x=i.reduce(o,0)/i.length,n.y=1+i.reduce(s,0)):(n.x=u?c+=r(n,u):0,n.y=0,u=n)});var f=function(r){for(var n;n=r.children;)r=n[0];return r}(a),h=function(r){for(var n;n=r.children;)r=n[n.length-1];return r}(a),p=f.x-r(f,h)/2,d=h.x+r(h,f)/2;return a.eachAfter(l?function(r){r.x=(r.x-a.x)*n,r.y=(a.y-r.y)*i}:function(r){r.x=(r.x-p)/(d-p)*n,r.y=(1-(a.y?r.y/a.y:1))*i})}return u.separation=function(n){return arguments.length?(r=n,u):r},u.size=function(r){return arguments.length?(l=!1,n=+r[0],i=+r[1],u):l?null:[n,i]},u.nodeSize=function(r){return arguments.length?(l=!0,n=+r[0],i=+r[1],u):l?[n,i]:null},u}function u(r){var n=0,i=r.children,a=i&&i.length;if(a)for(;--a>=0;)n+=i[a].value;else n=1;r.value=n}function c(r,n){var i,a,o,s,l,u=new d(r),c=+r.value&&(u.value=r.value),h=[u];for(null==n&&(n=f);i=h.pop();)if(c&&(i.value=+i.data.value),(o=n(i.data))&&(l=o.length))for(i.children=Array(l),s=l-1;s>=0;--s)h.push(a=i.children[s]=new d(o[s])),a.parent=i,a.depth=i.depth+1;return u.eachBefore(p)}function f(r){return r.children}function h(r){r.data=r.data.data}function p(r){var n=0;do r.height=n;while((r=r.parent)&&r.height<++n)}function d(r){this.data=r,this.depth=this.height=0,this.parent=null}i.r(n),i.d(n,{cluster:function(){return l},hierarchy:function(){return c},pack:function(){return P},packEnclose:function(){return g},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return H},tree:function(){return W},treemap:function(){return Q},treemapBinary:function(){return tt},treemapDice:function(){return F},treemapResquarify:function(){return tr},treemapSlice:function(){return X},treemapSliceDice:function(){return te},treemapSquarify:function(){return $}}),d.prototype=c.prototype={constructor:d,count:function(){return this.eachAfter(u)},each:function(r){var n,i,a,o,s=this,l=[s];do for(n=l.reverse(),l=[];s=n.pop();)if(r(s),i=s.children)for(a=0,o=i.length;a<o;++a)l.push(i[a]);while(l.length);return this},eachAfter:function(r){for(var n,i,a,o=this,s=[o],l=[];o=s.pop();)if(l.push(o),n=o.children)for(i=0,a=n.length;i<a;++i)s.push(n[i]);for(;o=l.pop();)r(o);return this},eachBefore:function(r){for(var n,i,a=this,o=[a];a=o.pop();)if(r(a),n=a.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},sum:function(r){return this.eachAfter(function(n){for(var i=+r(n.data)||0,a=n.children,o=a&&a.length;--o>=0;)i+=a[o].value;n.value=i})},sort:function(r){return this.eachBefore(function(n){n.children&&n.children.sort(r)})},path:function(r){for(var n=this,i=function(r,n){if(r===n)return r;var i=r.ancestors(),a=n.ancestors(),o=null;for(r=i.pop(),n=a.pop();r===n;)o=r,r=i.pop(),n=a.pop();return o}(n,r),a=[n];n!==i;)a.push(n=n.parent);for(var o=a.length;r!==i;)a.splice(o,0,r),r=r.parent;return a},ancestors:function(){for(var r=this,n=[r];r=r.parent;)n.push(r);return n},descendants:function(){var r=[];return this.each(function(n){r.push(n)}),r},leaves:function(){var r=[];return this.eachBefore(function(n){n.children||r.push(n)}),r},links:function(){var r=this,n=[];return r.each(function(i){i!==r&&n.push({source:i.parent,target:i})}),n},copy:function(){return c(this).eachBefore(h)}};var v=Array.prototype.slice;function g(r){for(var n,i,a=0,o=(r=function(r){for(var n,i,a=r.length;a;)i=Math.random()*a--|0,n=r[a],r[a]=r[i],r[i]=n;return r}(v.call(r))).length,s=[];a<o;)n=r[a],i&&m(i,n)?++a:(i=function(r){var n;switch(r.length){case 1:return{x:(n=r[0]).x,y:n.y,r:n.r};case 2:return b(r[0],r[1]);case 3:return _(r[0],r[1],r[2])}}(s=function(r,n){var i,a;if(x(n,r))return[n];for(i=0;i<r.length;++i)if(y(n,r[i])&&x(b(r[i],n),r))return[r[i],n];for(i=0;i<r.length-1;++i)for(a=i+1;a<r.length;++a)if(y(b(r[i],r[a]),n)&&y(b(r[i],n),r[a])&&y(b(r[a],n),r[i])&&x(_(r[i],r[a],n),r))return[r[i],r[a],n];throw Error()}(s,n)),a=0);return i}function y(r,n){var i=r.r-n.r,a=n.x-r.x,o=n.y-r.y;return i<0||i*i<a*a+o*o}function m(r,n){var i=r.r-n.r+1e-6,a=n.x-r.x,o=n.y-r.y;return i>0&&i*i>a*a+o*o}function x(r,n){for(var i=0;i<n.length;++i)if(!m(r,n[i]))return!1;return!0}function b(r,n){var i=r.x,a=r.y,o=r.r,s=n.x,l=n.y,u=n.r,c=s-i,f=l-a,h=u-o,p=Math.sqrt(c*c+f*f);return{x:(i+s+c/p*h)/2,y:(a+l+f/p*h)/2,r:(p+o+u)/2}}function _(r,n,i){var a=r.x,o=r.y,s=r.r,l=n.x,u=n.y,c=n.r,f=i.x,h=i.y,p=i.r,d=a-l,v=a-f,g=o-u,y=o-h,m=c-s,x=p-s,b=a*a+o*o-s*s,_=b-l*l-u*u+c*c,w=b-f*f-h*h+p*p,T=v*g-d*y,k=(g*w-y*_)/(2*T)-a,A=(y*m-g*x)/T,M=(v*_-d*w)/(2*T)-o,S=(d*x-v*m)/T,E=A*A+S*S-1,L=2*(s+k*A+M*S),C=k*k+M*M-s*s,O=-(E?(L+Math.sqrt(L*L-4*E*C))/(2*E):C/L);return{x:a+k+A*O,y:o+M+S*O,r:O}}function w(r,n,i){var a,o,s,l,u=r.x-n.x,c=r.y-n.y,f=u*u+c*c;f?(o=n.r+i.r,o*=o,l=r.r+i.r,o>(l*=l)?(a=(f+l-o)/(2*f),s=Math.sqrt(Math.max(0,l/f-a*a)),i.x=r.x-a*u-s*c,i.y=r.y-a*c+s*u):(a=(f+o-l)/(2*f),s=Math.sqrt(Math.max(0,o/f-a*a)),i.x=n.x+a*u-s*c,i.y=n.y+a*c+s*u)):(i.x=n.x+i.r,i.y=n.y)}function T(r,n){var i=r.r+n.r-1e-6,a=n.x-r.x,o=n.y-r.y;return i>0&&i*i>a*a+o*o}function k(r){var n=r._,i=r.next._,a=n.r+i.r,o=(n.x*i.r+i.x*n.r)/a,s=(n.y*i.r+i.y*n.r)/a;return o*o+s*s}function A(r){this._=r,this.next=null,this.previous=null}function M(r){var n,i,a,o,s,l,u,c,f,h,p;if(!(o=r.length))return 0;if((n=r[0]).x=0,n.y=0,!(o>1))return n.r;if(i=r[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;w(i,n,a=r[2]),n=new A(n),i=new A(i),a=new A(a),n.next=a.previous=i,i.next=n.previous=a,a.next=i.previous=n;t:for(u=3;u<o;++u){w(n._,i._,a=r[u]),a=new A(a),c=i.next,f=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(T(c._,a._)){i=c,n.next=i,i.previous=n,--u;continue t}h+=c._.r,c=c.next}else{if(T(f._,a._)){(n=f).next=i,i.previous=n,--u;continue t}p+=f._.r,f=f.previous}while(c!==f.next);for(a.previous=n,a.next=i,n.next=i.previous=i=a,s=k(n);(a=a.next)!==i;)(l=k(a))<s&&(n=a,s=l);i=n.next}for(n=[i._],a=i;(a=a.next)!==i;)n.push(a._);for(a=g(n),u=0;u<o;++u)(n=r[u]).x-=a.x,n.y-=a.y;return a.r}function S(r){return M(r),r}function E(r){if("function"!=typeof r)throw Error();return r}function L(){return 0}function C(r){return function(){return r}}function O(r){return Math.sqrt(r.value)}function P(){var r=null,n=1,i=1,a=L;function o(o){return o.x=n/2,o.y=i/2,r?o.eachBefore(I(r)).eachAfter(D(a,.5)).eachBefore(z(1)):o.eachBefore(I(O)).eachAfter(D(L,1)).eachAfter(D(a,o.r/Math.min(n,i))).eachBefore(z(Math.min(n,i)/(2*o.r))),o}return o.radius=function(n){return arguments.length?(r=null==n?null:E(n),o):r},o.size=function(r){return arguments.length?(n=+r[0],i=+r[1],o):[n,i]},o.padding=function(r){return arguments.length?(a="function"==typeof r?r:C(+r),o):a},o}function I(r){return function(n){n.children||(n.r=Math.max(0,+r(n)||0))}}function D(r,n){return function(i){if(a=i.children){var a,o,s,l=a.length,u=r(i)*n||0;if(u)for(o=0;o<l;++o)a[o].r+=u;if(s=M(a),u)for(o=0;o<l;++o)a[o].r-=u;i.r=s+u}}}function z(r){return function(n){var i=n.parent;n.r*=r,i&&(n.x=i.x+r*n.x,n.y=i.y+r*n.y)}}function R(r){r.x0=Math.round(r.x0),r.y0=Math.round(r.y0),r.x1=Math.round(r.x1),r.y1=Math.round(r.y1)}function F(r,n,i,a,o){for(var s,l=r.children,u=-1,c=l.length,f=r.value&&(a-n)/r.value;++u<c;)(s=l[u]).y0=i,s.y1=o,s.x0=n,s.x1=n+=s.value*f}function B(){var r=1,n=1,i=0,a=!1;function o(o){var s,l=o.height+1;return o.x0=o.y0=i,o.x1=r,o.y1=n/l,o.eachBefore((s=n,function(r){r.children&&F(r,r.x0,s*(r.depth+1)/l,r.x1,s*(r.depth+2)/l);var n=r.x0,a=r.y0,o=r.x1-i,u=r.y1-i;o<n&&(n=o=(n+o)/2),u<a&&(a=u=(a+u)/2),r.x0=n,r.y0=a,r.x1=o,r.y1=u})),a&&o.eachBefore(R),o}return o.round=function(r){return arguments.length?(a=!!r,o):a},o.size=function(i){return arguments.length?(r=+i[0],n=+i[1],o):[r,n]},o.padding=function(r){return arguments.length?(i=+r,o):i},o}var N={depth:-1},j={};function U(r){return r.id}function V(r){return r.parentId}function H(){var r=U,n=V;function i(i){var a,o,s,l,u,c,f,h=i.length,v=Array(h),g={};for(o=0;o<h;++o)a=i[o],u=v[o]=new d(a),null!=(c=r(a,o,i))&&(c+="")&&(g[f="$"+(u.id=c)]=f in g?j:u);for(o=0;o<h;++o)if(u=v[o],null!=(c=n(i[o],o,i))&&(c+="")){if(!(l=g["$"+c]))throw Error("missing: "+c);if(l===j)throw Error("ambiguous: "+c);l.children?l.children.push(u):l.children=[u],u.parent=l}else{if(s)throw Error("multiple roots");s=u}if(!s)throw Error("no root");if(s.parent=N,s.eachBefore(function(r){r.depth=r.parent.depth+1,--h}).eachBefore(p),s.parent=null,h>0)throw Error("cycle");return s}return i.id=function(n){return arguments.length?(r=E(n),i):r},i.parentId=function(r){return arguments.length?(n=E(r),i):n},i}function q(r,n){return r.parent===n.parent?1:2}function G(r){var n=r.children;return n?n[0]:r.t}function Z(r){var n=r.children;return n?n[n.length-1]:r.t}function Y(r,n){this._=r,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function W(){var r=q,n=1,i=1,a=null;function o(o){var c=function(r){for(var n,i,a,o,s,l=new Y(r,0),u=[l];n=u.pop();)if(a=n._.children)for(n.children=Array(s=a.length),o=s-1;o>=0;--o)u.push(i=n.children[o]=new Y(a[o],o)),i.parent=n;return(l.parent=new Y(null,0)).children=[l],l}(o);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(l),a)o.eachBefore(u);else{var f=o,h=o,p=o;o.eachBefore(function(r){r.x<f.x&&(f=r),r.x>h.x&&(h=r),r.depth>p.depth&&(p=r)});var d=f===h?1:r(f,h)/2,v=d-f.x,g=n/(h.x+d+v),y=i/(p.depth||1);o.eachBefore(function(r){r.x=(r.x+v)*g,r.y=r.depth*y})}return o}function s(n){var i=n.children,a=n.parent.children,o=n.i?a[n.i-1]:null;if(i){!function(r){for(var n,i=0,a=0,o=r.children,s=o.length;--s>=0;)(n=o[s]).z+=i,n.m+=i,i+=n.s+(a+=n.c)}(n);var s=(i[0].z+i[i.length-1].z)/2;o?(n.z=o.z+r(n._,o._),n.m=n.z-s):n.z=s}else o&&(n.z=o.z+r(n._,o._));n.parent.A=function(n,i,a){if(i){for(var o,s,l,u=n,c=n,f=i,h=u.parent.children[0],p=u.m,d=c.m,v=f.m,g=h.m;f=Z(f),u=G(u),f&&u;)h=G(h),(c=Z(c)).a=n,(l=f.z+v-u.z-p+r(f._,u._))>0&&(function(r,n,i){var a=i/(n.i-r.i);n.c-=a,n.s+=i,r.c+=a,n.z+=i,n.m+=i}((o=f,s=a,o.a.parent===n.parent?o.a:s),n,l),p+=l,d+=l),v+=f.m,p+=u.m,g+=h.m,d+=c.m;f&&!Z(c)&&(c.t=f,c.m+=v-d),u&&!G(h)&&(h.t=u,h.m+=p-g,a=n)}return a}(n,o,n.parent.A||a[0])}function l(r){r._.x=r.z+r.parent.m,r.m+=r.parent.m}function u(r){r.x*=n,r.y=r.depth*i}return o.separation=function(n){return arguments.length?(r=n,o):r},o.size=function(r){return arguments.length?(a=!1,n=+r[0],i=+r[1],o):a?null:[n,i]},o.nodeSize=function(r){return arguments.length?(a=!0,n=+r[0],i=+r[1],o):a?[n,i]:null},o}function X(r,n,i,a,o){for(var s,l=r.children,u=-1,c=l.length,f=r.value&&(o-i)/r.value;++u<c;)(s=l[u]).x0=n,s.x1=a,s.y0=i,s.y1=i+=s.value*f}Y.prototype=Object.create(d.prototype);var J=(1+Math.sqrt(5))/2;function K(r,n,i,a,o,s){for(var l,u,c,f,h,p,d,v,g,y,m,x=[],b=n.children,_=0,w=0,T=b.length,k=n.value;_<T;){c=o-i,f=s-a;do h=b[w++].value;while(!h&&w<T);for(p=d=h,g=Math.max(d/(m=h*h*(y=Math.max(f/c,c/f)/(k*r))),m/p);w<T;++w){if(h+=u=b[w].value,u<p&&(p=u),u>d&&(d=u),(v=Math.max(d/(m=h*h*y),m/p))>g){h-=u;break}g=v}x.push(l={value:h,dice:c<f,children:b.slice(_,w)}),l.dice?F(l,i,a,o,k?a+=f*h/k:s):X(l,i,a,k?i+=c*h/k:o,s),k-=h,_=w}return x}var $=function r(n){function i(r,i,a,o,s){K(n,r,i,a,o,s)}return i.ratio=function(n){return r((n=+n)>1?n:1)},i}(J);function Q(){var r=$,n=!1,i=1,a=1,o=[0],s=L,l=L,u=L,c=L,f=L;function h(r){return r.x0=r.y0=0,r.x1=i,r.y1=a,r.eachBefore(p),o=[0],n&&r.eachBefore(R),r}function p(n){var i=o[n.depth],a=n.x0+i,h=n.y0+i,p=n.x1-i,d=n.y1-i;p<a&&(a=p=(a+p)/2),d<h&&(h=d=(h+d)/2),n.x0=a,n.y0=h,n.x1=p,n.y1=d,n.children&&(i=o[n.depth+1]=s(n)/2,a+=f(n)-i,h+=l(n)-i,(p-=u(n)-i)<a&&(a=p=(a+p)/2),(d-=c(n)-i)<h&&(h=d=(h+d)/2),r(n,a,h,p,d))}return h.round=function(r){return arguments.length?(n=!!r,h):n},h.size=function(r){return arguments.length?(i=+r[0],a=+r[1],h):[i,a]},h.tile=function(n){return arguments.length?(r=E(n),h):r},h.padding=function(r){return arguments.length?h.paddingInner(r).paddingOuter(r):h.paddingInner()},h.paddingInner=function(r){return arguments.length?(s="function"==typeof r?r:C(+r),h):s},h.paddingOuter=function(r){return arguments.length?h.paddingTop(r).paddingRight(r).paddingBottom(r).paddingLeft(r):h.paddingTop()},h.paddingTop=function(r){return arguments.length?(l="function"==typeof r?r:C(+r),h):l},h.paddingRight=function(r){return arguments.length?(u="function"==typeof r?r:C(+r),h):u},h.paddingBottom=function(r){return arguments.length?(c="function"==typeof r?r:C(+r),h):c},h.paddingLeft=function(r){return arguments.length?(f="function"==typeof r?r:C(+r),h):f},h}function tt(r,n,i,a,o){var s,l,u=r.children,c=u.length,f=Array(c+1);for(f[0]=l=s=0;s<c;++s)f[s+1]=l+=u[s].value;!function r(n,i,a,o,s,l,c){if(n>=i-1){var h=u[n];return h.x0=o,h.y0=s,h.x1=l,void(h.y1=c)}for(var p=f[n],d=a/2+p,v=n+1,g=i-1;v<g;){var y=v+g>>>1;f[y]<d?v=y+1:g=y}d-f[v-1]<f[v]-d&&n+1<v&&--v;var m=f[v]-p,x=a-m;if(l-o>c-s){var b=(o*x+l*m)/a;r(n,v,m,o,s,b,c),r(v,i,x,b,s,l,c)}else{var _=(s*x+c*m)/a;r(n,v,m,o,s,l,_),r(v,i,x,o,_,l,c)}}(0,c,r.value,n,i,a,o)}function te(r,n,i,a,o){(1&r.depth?X:F)(r,n,i,a,o)}var tr=function r(n){function i(r,i,a,o,s){if((l=r._squarify)&&l.ratio===n)for(var l,u,c,f,h,p=-1,d=l.length,v=r.value;++p<d;){for(c=(u=l[p]).children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?F(u,i,a,o,a+=(s-a)*u.value/v):X(u,i,a,i+=(o-i)*u.value/v,s),v-=u.value}else r._squarify=l=K(n,r,i,a,o,s),l.ratio=n}return i.ratio=function(n){return r((n=+n)>1?n:1)},i}(J)},45879:function(r,n,i){"use strict";i.d(n,{h5:function(){return y}});var a=Math.PI,o=2*a,s=o-1e-6;function l(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function u(){return new l}l.prototype=u.prototype={constructor:l,moveTo:function(r,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,n){this._+="L"+(this._x1=+r)+","+(this._y1=+n)},quadraticCurveTo:function(r,n,i,a){this._+="Q"+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},bezierCurveTo:function(r,n,i,a,o,s){this._+="C"+ +r+","+ +n+","+ +i+","+ +a+","+(this._x1=+o)+","+(this._y1=+s)},arcTo:function(r,n,i,o,s){r=+r,n=+n,i=+i,o=+o,s=+s;var l=this._x1,u=this._y1,c=i-r,f=o-n,h=l-r,p=u-n,d=h*h+p*p;if(s<0)throw Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=r)+","+(this._y1=n);else if(d>1e-6){if(Math.abs(p*c-f*h)>1e-6&&s){var v=i-l,g=o-u,y=c*c+f*f,m=Math.sqrt(y),x=Math.sqrt(d),b=s*Math.tan((a-Math.acos((y+d-(v*v+g*g))/(2*m*x)))/2),_=b/x,w=b/m;Math.abs(_-1)>1e-6&&(this._+="L"+(r+_*h)+","+(n+_*p)),this._+="A"+s+","+s+",0,0,"+ +(p*v>h*g)+","+(this._x1=r+w*c)+","+(this._y1=n+w*f)}else this._+="L"+(this._x1=r)+","+(this._y1=n)}},arc:function(r,n,i,l,u,c){r=+r,n=+n,c=!!c;var f=(i=+i)*Math.cos(l),h=i*Math.sin(l),p=r+f,d=n+h,v=1^c,g=c?l-u:u-l;if(i<0)throw Error("negative radius: "+i);null===this._x1?this._+="M"+p+","+d:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-d)>1e-6)&&(this._+="L"+p+","+d),i&&(g<0&&(g=g%o+o),g>s?this._+="A"+i+","+i+",0,1,"+v+","+(r-f)+","+(n-h)+"A"+i+","+i+",0,1,"+v+","+(this._x1=p)+","+(this._y1=d):g>1e-6&&(this._+="A"+i+","+i+",0,"+ +(g>=a)+","+v+","+(this._x1=r+i*Math.cos(u))+","+(this._y1=n+i*Math.sin(u))))},rect:function(r,n,i,a){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)+"h"+ +i+"v"+ +a+"h"+-i+"Z"},toString:function(){return this._}};var c=Array.prototype.slice;function f(r){return function(){return r}}function h(r){return r[0]}function p(r){return r[1]}function d(r){return r.source}function v(r){return r.target}function g(r,n,i,a,o){r.moveTo(n,i),r.bezierCurveTo(n=(n+a)/2,i,n,o,a,o)}function y(){return function(r){var n=d,i=v,a=h,o=p,s=null;function l(){var l,f=c.call(arguments),h=n.apply(this,f),p=i.apply(this,f);if(s||(s=l=u()),r(s,+a.apply(this,(f[0]=h,f)),+o.apply(this,f),+a.apply(this,(f[0]=p,f)),+o.apply(this,f)),l)return s=null,l+""||null}return l.source=function(r){return arguments.length?(n=r,l):n},l.target=function(r){return arguments.length?(i=r,l):i},l.x=function(r){return arguments.length?(a="function"==typeof r?r:f(+r),l):a},l.y=function(r){return arguments.length?(o="function"==typeof r?r:f(+r),l):o},l.context=function(r){return arguments.length?(s=null==r?null:r,l):s},l}(g)}},84096:function(r,n,i){"use strict";i.d(n,{i$:function(){return g},Dq:function(){return d},g0:function(){return y}});var a=i(58176),o=i(48480),s=i(59879),l=i(82301),u=i(34823),c=i(79791);function f(r){if(0<=r.y&&r.y<100){var n=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return n.setFullYear(r.y),n}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function h(r){if(0<=r.y&&r.y<100){var n=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return n.setUTCFullYear(r.y),n}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function p(r,n,i){return{y:r,m:n,d:i,H:0,M:0,S:0,L:0}}function d(r){var n=r.dateTime,i=r.date,u=r.time,c=r.periods,d=r.days,v=r.shortDays,g=r.months,y=r.shortMonths,x=k(c),b=A(c),_=k(d),w=A(d),T=k(v),tL=A(v),tC=k(g),tO=A(g),tP=k(y),tI=A(y),tD={a:function(r){return v[r.getDay()]},A:function(r){return d[r.getDay()]},b:function(r){return y[r.getMonth()]},B:function(r){return g[r.getMonth()]},c:null,d:Z,e:Z,f:K,H:Y,I:W,j:X,L:J,m:$,M:Q,p:function(r){return c[+(r.getHours()>=12)]},q:function(r){return 1+~~(r.getMonth()/3)},Q:tS,s:tE,S:tt,u:te,U:tr,V:tn,w:ti,W:ta,x:null,X:null,y:to,Y:ts,Z:tl,"%":tM},tz={a:function(r){return v[r.getUTCDay()]},A:function(r){return d[r.getUTCDay()]},b:function(r){return y[r.getUTCMonth()]},B:function(r){return g[r.getUTCMonth()]},c:null,d:tu,e:tu,f:td,H:tc,I:tf,j:th,L:tp,m:tv,M:tg,p:function(r){return c[+(r.getUTCHours()>=12)]},q:function(r){return 1+~~(r.getUTCMonth()/3)},Q:tS,s:tE,S:ty,u:tm,U:tx,V:tb,w:t_,W:tw,x:null,X:null,y:tT,Y:tk,Z:tA,"%":tM},tR={a:function(r,n,i){var a=T.exec(n.slice(i));return a?(r.w=tL[a[0].toLowerCase()],i+a[0].length):-1},A:function(r,n,i){var a=_.exec(n.slice(i));return a?(r.w=w[a[0].toLowerCase()],i+a[0].length):-1},b:function(r,n,i){var a=tP.exec(n.slice(i));return a?(r.m=tI[a[0].toLowerCase()],i+a[0].length):-1},B:function(r,n,i){var a=tC.exec(n.slice(i));return a?(r.m=tO[a[0].toLowerCase()],i+a[0].length):-1},c:function(r,i,a){return tN(r,n,i,a)},d:R,e:R,f:V,H:B,I:B,j:F,L:U,m:z,M:N,p:function(r,n,i){var a=x.exec(n.slice(i));return a?(r.p=b[a[0].toLowerCase()],i+a[0].length):-1},q:D,Q:q,s:G,S:j,u:S,U:E,V:L,w:M,W:C,x:function(r,n,a){return tN(r,i,n,a)},X:function(r,n,i){return tN(r,u,n,i)},y:P,Y:O,Z:I,"%":H};function tF(r,n){return function(i){var a,o,s,l=[],u=-1,c=0,f=r.length;for(i instanceof Date||(i=new Date(+i));++u<f;)37===r.charCodeAt(u)&&(l.push(r.slice(c,u)),null!=(o=m[a=r.charAt(++u)])?a=r.charAt(++u):o="e"===a?" ":"0",(s=n[a])&&(a=s(i,o)),l.push(a),c=u+1);return l.push(r.slice(c,u)),l.join("")}}function tB(r,n){return function(i){var u,c,d=p(1900,void 0,1);if(tN(d,r,i+="",0)!=i.length)return null;if("Q"in d)return new Date(d.Q);if("s"in d)return new Date(1e3*d.s+("L"in d?d.L:0));if(!n||"Z"in d||(d.Z=0),"p"in d&&(d.H=d.H%12+12*d.p),void 0===d.m&&(d.m="q"in d?d.q:0),"V"in d){if(d.V<1||d.V>53)return null;"w"in d||(d.w=1),"Z"in d?(u=(c=(u=h(p(d.y,0,1))).getUTCDay())>4||0===c?a.l6.ceil(u):(0,a.l6)(u),u=o.Z.offset(u,7*(d.V-1)),d.y=u.getUTCFullYear(),d.m=u.getUTCMonth(),d.d=u.getUTCDate()+(d.w+6)%7):(u=(c=(u=f(p(d.y,0,1))).getDay())>4||0===c?s.wA.ceil(u):(0,s.wA)(u),u=l.Z.offset(u,7*(d.V-1)),d.y=u.getFullYear(),d.m=u.getMonth(),d.d=u.getDate()+(d.w+6)%7)}else("W"in d||"U"in d)&&("w"in d||(d.w="u"in d?d.u%7:"W"in d?1:0),c="Z"in d?h(p(d.y,0,1)).getUTCDay():f(p(d.y,0,1)).getDay(),d.m=0,d.d="W"in d?(d.w+6)%7+7*d.W-(c+5)%7:d.w+7*d.U-(c+6)%7);return"Z"in d?(d.H+=d.Z/100|0,d.M+=d.Z%100,h(d)):f(d)}}function tN(r,n,i,a){for(var o,s,l=0,u=n.length,c=i.length;l<u;){if(a>=c)return -1;if(37===(o=n.charCodeAt(l++))){if(!(s=tR[(o=n.charAt(l++))in m?n.charAt(l++):o])||(a=s(r,i,a))<0)return -1}else if(o!=i.charCodeAt(a++))return -1}return a}return tD.x=tF(i,tD),tD.X=tF(u,tD),tD.c=tF(n,tD),tz.x=tF(i,tz),tz.X=tF(u,tz),tz.c=tF(n,tz),{format:function(r){var n=tF(r+="",tD);return n.toString=function(){return r},n},parse:function(r){var n=tB(r+="",!1);return n.toString=function(){return r},n},utcFormat:function(r){var n=tF(r+="",tz);return n.toString=function(){return r},n},utcParse:function(r){var n=tB(r+="",!0);return n.toString=function(){return r},n}}}var v,g,y,m={"-":"",_:" ",0:"0"},x=/^\s*\d+/,b=/^%/,_=/[\\^$*+?|[\]().{}]/g;function w(r,n,i){var a=r<0?"-":"",o=(a?-r:r)+"",s=o.length;return a+(s<i?Array(i-s+1).join(n)+o:o)}function T(r){return r.replace(_,"\\$&")}function k(r){return RegExp("^(?:"+r.map(T).join("|")+")","i")}function A(r){for(var n={},i=-1,a=r.length;++i<a;)n[r[i].toLowerCase()]=i;return n}function M(r,n,i){var a=x.exec(n.slice(i,i+1));return a?(r.w=+a[0],i+a[0].length):-1}function S(r,n,i){var a=x.exec(n.slice(i,i+1));return a?(r.u=+a[0],i+a[0].length):-1}function E(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.U=+a[0],i+a[0].length):-1}function L(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.V=+a[0],i+a[0].length):-1}function C(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.W=+a[0],i+a[0].length):-1}function O(r,n,i){var a=x.exec(n.slice(i,i+4));return a?(r.y=+a[0],i+a[0].length):-1}function P(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function I(r,n,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(i,i+6));return a?(r.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function D(r,n,i){var a=x.exec(n.slice(i,i+1));return a?(r.q=3*a[0]-3,i+a[0].length):-1}function z(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.m=a[0]-1,i+a[0].length):-1}function R(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.d=+a[0],i+a[0].length):-1}function F(r,n,i){var a=x.exec(n.slice(i,i+3));return a?(r.m=0,r.d=+a[0],i+a[0].length):-1}function B(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.H=+a[0],i+a[0].length):-1}function N(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.M=+a[0],i+a[0].length):-1}function j(r,n,i){var a=x.exec(n.slice(i,i+2));return a?(r.S=+a[0],i+a[0].length):-1}function U(r,n,i){var a=x.exec(n.slice(i,i+3));return a?(r.L=+a[0],i+a[0].length):-1}function V(r,n,i){var a=x.exec(n.slice(i,i+6));return a?(r.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function H(r,n,i){var a=b.exec(n.slice(i,i+1));return a?i+a[0].length:-1}function q(r,n,i){var a=x.exec(n.slice(i));return a?(r.Q=+a[0],i+a[0].length):-1}function G(r,n,i){var a=x.exec(n.slice(i));return a?(r.s=+a[0],i+a[0].length):-1}function Z(r,n){return w(r.getDate(),n,2)}function Y(r,n){return w(r.getHours(),n,2)}function W(r,n){return w(r.getHours()%12||12,n,2)}function X(r,n){return w(1+l.Z.count((0,u.Z)(r),r),n,3)}function J(r,n){return w(r.getMilliseconds(),n,3)}function K(r,n){return J(r,n)+"000"}function $(r,n){return w(r.getMonth()+1,n,2)}function Q(r,n){return w(r.getMinutes(),n,2)}function tt(r,n){return w(r.getSeconds(),n,2)}function te(r){var n=r.getDay();return 0===n?7:n}function tr(r,n){return w(s.OM.count((0,u.Z)(r)-1,r),n,2)}function tn(r,n){var i=r.getDay();return r=i>=4||0===i?(0,s.bL)(r):s.bL.ceil(r),w(s.bL.count((0,u.Z)(r),r)+(4===(0,u.Z)(r).getDay()),n,2)}function ti(r){return r.getDay()}function ta(r,n){return w(s.wA.count((0,u.Z)(r)-1,r),n,2)}function to(r,n){return w(r.getFullYear()%100,n,2)}function ts(r,n){return w(r.getFullYear()%1e4,n,4)}function tl(r){var n=r.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+w(n/60|0,"0",2)+w(n%60,"0",2)}function tu(r,n){return w(r.getUTCDate(),n,2)}function tc(r,n){return w(r.getUTCHours(),n,2)}function tf(r,n){return w(r.getUTCHours()%12||12,n,2)}function th(r,n){return w(1+o.Z.count((0,c.Z)(r),r),n,3)}function tp(r,n){return w(r.getUTCMilliseconds(),n,3)}function td(r,n){return tp(r,n)+"000"}function tv(r,n){return w(r.getUTCMonth()+1,n,2)}function tg(r,n){return w(r.getUTCMinutes(),n,2)}function ty(r,n){return w(r.getUTCSeconds(),n,2)}function tm(r){var n=r.getUTCDay();return 0===n?7:n}function tx(r,n){return w(a.Ox.count((0,c.Z)(r)-1,r),n,2)}function tb(r,n){var i=r.getUTCDay();return r=i>=4||0===i?(0,a.hB)(r):a.hB.ceil(r),w(a.hB.count((0,c.Z)(r),r)+(4===(0,c.Z)(r).getUTCDay()),n,2)}function t_(r){return r.getUTCDay()}function tw(r,n){return w(a.l6.count((0,c.Z)(r)-1,r),n,2)}function tT(r,n){return w(r.getUTCFullYear()%100,n,2)}function tk(r,n){return w(r.getUTCFullYear()%1e4,n,4)}function tA(){return"+0000"}function tM(){return"%"}function tS(r){return+r}function tE(r){return Math.floor(+r/1e3)}g=(v=d({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,v.parse,y=v.utcFormat,v.utcParse},82301:function(r,n,i){"use strict";i.d(n,{a:function(){return l}});var a=i(30052),o=i(54263),s=(0,a.Z)(function(r){r.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+n)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*o.yB)/o.UD},function(r){return r.getDate()-1});n.Z=s;var l=s.range},54263:function(r,n,i){"use strict";i.d(n,{UD:function(){return l},Y2:function(){return s},Ym:function(){return a},iM:function(){return u},yB:function(){return o}});var a=1e3,o=6e4,s=36e5,l=864e5,u=6048e5},81041:function(r,n,i){"use strict";i.r(n),i.d(n,{timeDay:function(){return x.Z},timeDays:function(){return x.a},timeFriday:function(){return b.mC},timeFridays:function(){return b.b$},timeHour:function(){return y},timeHours:function(){return m},timeInterval:function(){return a.Z},timeMillisecond:function(){return s},timeMilliseconds:function(){return l},timeMinute:function(){return d},timeMinutes:function(){return v},timeMonday:function(){return b.wA},timeMondays:function(){return b.bJ},timeMonth:function(){return w},timeMonths:function(){return T},timeSaturday:function(){return b.EY},timeSaturdays:function(){return b.Ff},timeSecond:function(){return f},timeSeconds:function(){return h},timeSunday:function(){return b.OM},timeSundays:function(){return b.vm},timeThursday:function(){return b.bL},timeThursdays:function(){return b.$t},timeTuesday:function(){return b.sy},timeTuesdays:function(){return b.aU},timeWednesday:function(){return b.zg},timeWednesdays:function(){return b.Ld},timeWeek:function(){return b.OM},timeWeeks:function(){return b.vm},timeYear:function(){return k.Z},timeYears:function(){return k.g},utcDay:function(){return O.Z},utcDays:function(){return O.y},utcFriday:function(){return P.QQ},utcFridays:function(){return P.fz},utcHour:function(){return L},utcHours:function(){return C},utcMillisecond:function(){return s},utcMilliseconds:function(){return l},utcMinute:function(){return M},utcMinutes:function(){return S},utcMonday:function(){return P.l6},utcMondays:function(){return P.$3},utcMonth:function(){return D},utcMonths:function(){return z},utcSaturday:function(){return P.g4},utcSaturdays:function(){return P.Q_},utcSecond:function(){return f},utcSeconds:function(){return h},utcSunday:function(){return P.Ox},utcSundays:function(){return P.SU},utcThursday:function(){return P.hB},utcThursdays:function(){return P.xj},utcTuesday:function(){return P.J1},utcTuesdays:function(){return P.DK},utcWednesday:function(){return P.b3},utcWednesdays:function(){return P.uy},utcWeek:function(){return P.Ox},utcWeeks:function(){return P.SU},utcYear:function(){return R.Z},utcYears:function(){return R.D}});var a=i(30052),o=(0,a.Z)(function(){},function(r,n){r.setTime(+r+n)},function(r,n){return n-r});o.every=function(r){return isFinite(r=Math.floor(r))&&r>0?r>1?(0,a.Z)(function(n){n.setTime(Math.floor(n/r)*r)},function(n,i){n.setTime(+n+i*r)},function(n,i){return(i-n)/r}):o:null};var s=o,l=o.range,u=i(54263),c=(0,a.Z)(function(r){r.setTime(r-r.getMilliseconds())},function(r,n){r.setTime(+r+n*u.Ym)},function(r,n){return(n-r)/u.Ym},function(r){return r.getUTCSeconds()}),f=c,h=c.range,p=(0,a.Z)(function(r){r.setTime(r-r.getMilliseconds()-r.getSeconds()*u.Ym)},function(r,n){r.setTime(+r+n*u.yB)},function(r,n){return(n-r)/u.yB},function(r){return r.getMinutes()}),d=p,v=p.range,g=(0,a.Z)(function(r){r.setTime(r-r.getMilliseconds()-r.getSeconds()*u.Ym-r.getMinutes()*u.yB)},function(r,n){r.setTime(+r+n*u.Y2)},function(r,n){return(n-r)/u.Y2},function(r){return r.getHours()}),y=g,m=g.range,x=i(82301),b=i(59879),_=(0,a.Z)(function(r){r.setDate(1),r.setHours(0,0,0,0)},function(r,n){r.setMonth(r.getMonth()+n)},function(r,n){return n.getMonth()-r.getMonth()+12*(n.getFullYear()-r.getFullYear())},function(r){return r.getMonth()}),w=_,T=_.range,k=i(34823),A=(0,a.Z)(function(r){r.setUTCSeconds(0,0)},function(r,n){r.setTime(+r+n*u.yB)},function(r,n){return(n-r)/u.yB},function(r){return r.getUTCMinutes()}),M=A,S=A.range,E=(0,a.Z)(function(r){r.setUTCMinutes(0,0,0)},function(r,n){r.setTime(+r+n*u.Y2)},function(r,n){return(n-r)/u.Y2},function(r){return r.getUTCHours()}),L=E,C=E.range,O=i(48480),P=i(58176),I=(0,a.Z)(function(r){r.setUTCDate(1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCMonth(r.getUTCMonth()+n)},function(r,n){return n.getUTCMonth()-r.getUTCMonth()+12*(n.getUTCFullYear()-r.getUTCFullYear())},function(r){return r.getUTCMonth()}),D=I,z=I.range,R=i(79791)},30052:function(r,n,i){"use strict";i.d(n,{Z:function(){return function r(n,i,s,l){function u(r){return n(r=0==arguments.length?new Date:new Date(+r)),r}return u.floor=function(r){return n(r=new Date(+r)),r},u.ceil=function(r){return n(r=new Date(r-1)),i(r,1),n(r),r},u.round=function(r){var n=u(r),i=u.ceil(r);return r-n<i-r?n:i},u.offset=function(r,n){return i(r=new Date(+r),null==n?1:Math.floor(n)),r},u.range=function(r,a,o){var s,l=[];if(r=u.ceil(r),o=null==o?1:Math.floor(o),!(r<a&&o>0))return l;do l.push(s=new Date(+r)),i(r,o),n(r);while(s<r&&r<a);return l},u.filter=function(a){return r(function(r){if(r>=r)for(;n(r),!a(r);)r.setTime(r-1)},function(r,n){if(r>=r){if(n<0)for(;++n<=0;)for(;i(r,-1),!a(r););else for(;--n>=0;)for(;i(r,1),!a(r););}})},s&&(u.count=function(r,i){return a.setTime(+r),o.setTime(+i),n(a),n(o),Math.floor(s(a,o))},u.every=function(r){return isFinite(r=Math.floor(r))&&r>0?r>1?u.filter(l?function(n){return l(n)%r==0}:function(n){return u.count(0,n)%r==0}):u:null}),u}}});var a=new Date,o=new Date},48480:function(r,n,i){"use strict";i.d(n,{y:function(){return l}});var a=i(30052),o=i(54263),s=(0,a.Z)(function(r){r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+n)},function(r,n){return(n-r)/o.UD},function(r){return r.getUTCDate()-1});n.Z=s;var l=s.range},58176:function(r,n,i){"use strict";i.d(n,{$3:function(){return g},DK:function(){return y},J1:function(){return c},Ox:function(){return l},QQ:function(){return p},Q_:function(){return _},SU:function(){return v},b3:function(){return f},fz:function(){return b},g4:function(){return d},hB:function(){return h},l6:function(){return u},uy:function(){return m},xj:function(){return x}});var a=i(30052),o=i(54263);function s(r){return(0,a.Z)(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-r)%7),n.setUTCHours(0,0,0,0)},function(r,n){r.setUTCDate(r.getUTCDate()+7*n)},function(r,n){return(n-r)/o.iM})}var l=s(0),u=s(1),c=s(2),f=s(3),h=s(4),p=s(5),d=s(6),v=l.range,g=u.range,y=c.range,m=f.range,x=h.range,b=p.range,_=d.range},79791:function(r,n,i){"use strict";i.d(n,{D:function(){return s}});var a=i(30052),o=(0,a.Z)(function(r){r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,n){r.setUTCFullYear(r.getUTCFullYear()+n)},function(r,n){return n.getUTCFullYear()-r.getUTCFullYear()},function(r){return r.getUTCFullYear()});o.every=function(r){return isFinite(r=Math.floor(r))&&r>0?(0,a.Z)(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/r)*r),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,i){n.setUTCFullYear(n.getUTCFullYear()+i*r)}):null},n.Z=o;var s=o.range},59879:function(r,n,i){"use strict";i.d(n,{$t:function(){return x},EY:function(){return d},Ff:function(){return _},Ld:function(){return m},OM:function(){return l},aU:function(){return y},b$:function(){return b},bJ:function(){return g},bL:function(){return h},mC:function(){return p},sy:function(){return c},vm:function(){return v},wA:function(){return u},zg:function(){return f}});var a=i(30052),o=i(54263);function s(r){return(0,a.Z)(function(n){n.setDate(n.getDate()-(n.getDay()+7-r)%7),n.setHours(0,0,0,0)},function(r,n){r.setDate(r.getDate()+7*n)},function(r,n){return(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*o.yB)/o.iM})}var l=s(0),u=s(1),c=s(2),f=s(3),h=s(4),p=s(5),d=s(6),v=l.range,g=u.range,y=c.range,m=f.range,x=h.range,b=p.range,_=d.range},34823:function(r,n,i){"use strict";i.d(n,{g:function(){return s}});var a=i(30052),o=(0,a.Z)(function(r){r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,n){r.setFullYear(r.getFullYear()+n)},function(r,n){return n.getFullYear()-r.getFullYear()},function(r){return r.getFullYear()});o.every=function(r){return isFinite(r=Math.floor(r))&&r>0?(0,a.Z)(function(n){n.setFullYear(Math.floor(n.getFullYear()/r)*r),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,i){n.setFullYear(n.getFullYear()+i*r)}):null},n.Z=o;var s=o.range},17045:function(r,n,i){"use strict";var a=i(8709),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,l=Array.prototype.concat,u=Object.defineProperty,c=i(55622)(),f=u&&c,h=function(r,n,i,a){if(n in r){if(!0===a){if(r[n]===i)return}else if("function"!=typeof a||"[object Function]"!==s.call(a)||!a())return}f?u(r,n,{configurable:!0,enumerable:!1,value:i,writable:!0}):r[n]=i},p=function(r,n){var i=arguments.length>2?arguments[2]:{},s=a(n);o&&(s=l.call(s,Object.getOwnPropertySymbols(n)));for(var u=0;u<s.length;u+=1)h(r,s[u],n[s[u]],i[s[u]])};p.supportsDescriptors=!!f,r.exports=p},46775:function(r){r.exports=function(){for(var r=0;r<arguments.length;r++)if(void 0!==arguments[r])return arguments[r]}},53545:function(r){"use strict";r.exports=a;var n=(a.canvas=document.createElement("canvas")).getContext("2d"),i=o([32,126]);function a(r,a){Array.isArray(r)&&(r=r.join(", "));var s,l={},u=16,c=.05;a&&(2===a.length&&"number"==typeof a[0]?s=o(a):Array.isArray(a)?s=a:(a.o?s=o(a.o):a.pairs&&(s=a.pairs),a.fontSize&&(u=a.fontSize),null!=a.threshold&&(c=a.threshold))),s||(s=i),n.font=u+"px "+r;for(var f=0;f<s.length;f++){var h=s[f],p=n.measureText(h[0]).width+n.measureText(h[1]).width,d=n.measureText(h).width;if(Math.abs(p-d)>u*c){var v=(d-p)/u;l[h]=1e3*v}}return l}function o(r){for(var n=[],i=r[0];i<=r[1];i++)for(var a=String.fromCharCode(i),o=r[0];o<r[1];o++){var s=a+String.fromCharCode(o);n.push(s)}return n}a.createPairs=o,a.ascii=i},31457:function(r,n,i){var a=i(65185),o=i(18625),s={M:"moveTo",C:"bezierCurveTo"};r.exports=function(r,n){r.beginPath(),o(a(n)).forEach(function(n){var i=n[0],a=n.slice(1);r[s[i]].apply(r,a)}),r.closePath()}},90660:function(r){r.exports=function(r){switch(r){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(r){"use strict";r.exports=function(r,n){switch(void 0===n&&(n=0),typeof r){case"number":if(r>0)return function(r,n){var i,a;for(i=Array(r),a=0;a<r;++a)i[a]=n;return i}(0|r,n);break;case"object":if("number"==typeof r.length)return function r(n,i,a){var o=0|n[a];if(o<=0)return[];var s,l=Array(o);if(a===n.length-1)for(s=0;s<o;++s)l[s]=i;else for(s=0;s<o;++s)l[s]=r(n,i,a+1);return l}(r,n,0)}return[]}},11474:function(r){"use strict";function n(r,n,h){h=h||2;var p,g,m,x,b,_,w,T=n&&n.length,k=T?n[0]*h:r.length,A=i(r,0,k,h,!0),M=[];if(!A||A.next===A.prev)return M;if(T&&(A=function(r,n,s,c){var f,h,p,g=[];for(f=0,h=n.length;f<h;f++)(p=i(r,n[f]*c,f<h-1?n[f+1]*c:r.length,c,!1))===p.next&&(p.steiner=!0),g.push(function(r){var n=r,i=r;do(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next;while(n!==r);return i}(p));for(g.sort(o),f=0;f<g.length;f++)(function(r,n){if(n=function(r,n){var i,a,o,s=n,c=r.x,f=r.y,h=-1/0;do{if(f<=s.y&&f>=s.next.y&&s.next.y!==s.y){var p=s.x+(f-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(p<=c&&p>h){if(h=p,p===c){if(f===s.y)return s;if(f===s.next.y)return s.next}o=s.x<s.next.x?s:s.next}}s=s.next}while(s!==n);if(!o)return null;if(c===h)return o;var v,g=o,y=o.x,m=o.y,x=1/0;s=o;do c>=s.x&&s.x>=y&&c!==s.x&&l(f<m?c:h,f,y,m,f<m?h:c,f,s.x,s.y)&&(v=Math.abs(f-s.y)/(c-s.x),d(s,r)&&(v<x||v===x&&(s.x>o.x||s.x===o.x&&(i=o,a=s,0>u(i.prev,i,a.prev)&&0>u(a.next,i,i.next))))&&(o=s,x=v)),s=s.next;while(s!==g);return o}(r,n)){var i=v(n,r);a(n,n.next),a(i,i.next)}})(g[f],s),s=a(s,s.next);return s}(r,n,A,h)),r.length>80*h){p=m=r[0],g=x=r[1];for(var S=h;S<k;S+=h)(b=r[S])<p&&(p=b),(_=r[S+1])<g&&(g=_),b>m&&(m=b),_>x&&(x=_);w=0!==(w=Math.max(m-p,x-g))?1/w:0}return function r(n,i,o,h,p,g,m){if(n){!m&&g&&function(r,n,i,a){var o=r;do null===o.z&&(o.z=s(o.x,o.y,n,i,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,function(r){var n,i,a,o,s,l,u,c,f=1;do{for(i=r,r=null,s=null,l=0;i;){for(l++,a=i,u=0,n=0;n<f&&(u++,a=a.nextZ);n++);for(c=f;u>0||c>0&&a;)0!==u&&(0===c||!a||i.z<=a.z)?(o=i,i=i.nextZ,u--):(o=a,a=a.nextZ,c--),s?s.nextZ=o:r=o,o.prevZ=s,s=o;i=a}s.nextZ=null,f*=2}while(l>1)}(o)}(n,h,p,g);for(var x,b,_=n;n.prev!==n.next;)if(x=n.prev,b=n.next,g?function(r,n,i,a){var o=r.prev,c=r.next;if(u(o,r,c)>=0)return!1;for(var f=o.x<r.x?o.x<c.x?o.x:c.x:r.x<c.x?r.x:c.x,h=o.y<r.y?o.y<c.y?o.y:c.y:r.y<c.y?r.y:c.y,p=o.x>r.x?o.x>c.x?o.x:c.x:r.x>c.x?r.x:c.x,d=o.y>r.y?o.y>c.y?o.y:c.y:r.y>c.y?r.y:c.y,v=s(f,h,n,i,a),g=s(p,d,n,i,a),y=r.prevZ,m=r.nextZ;y&&y.z>=v&&m&&m.z<=g;){if(y!==r.prev&&y!==r.next&&l(o.x,o.y,r.x,r.y,c.x,c.y,y.x,y.y)&&u(y.prev,y,y.next)>=0||(y=y.prevZ,m!==r.prev&&m!==r.next&&l(o.x,o.y,r.x,r.y,c.x,c.y,m.x,m.y)&&u(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;y&&y.z>=v;){if(y!==r.prev&&y!==r.next&&l(o.x,o.y,r.x,r.y,c.x,c.y,y.x,y.y)&&u(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;m&&m.z<=g;){if(m!==r.prev&&m!==r.next&&l(o.x,o.y,r.x,r.y,c.x,c.y,m.x,m.y)&&u(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}(n,h,p,g):function(r){var n=r.prev,i=r.next;if(u(n,r,i)>=0)return!1;for(var a=r.next.next;a!==r.prev;){if(l(n.x,n.y,r.x,r.y,i.x,i.y,a.x,a.y)&&u(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}(n))i.push(x.i/o),i.push(n.i/o),i.push(b.i/o),y(n),n=b.next,_=b.next;else if((n=b)===_){m?1===m?r(n=function(r,n,i){var o=r;do{var s=o.prev,l=o.next.next;!c(s,l)&&f(s,o,o.next,l)&&d(s,l)&&d(l,s)&&(n.push(s.i/i),n.push(o.i/i),n.push(l.i/i),y(o),y(o.next),o=r=l),o=o.next}while(o!==r);return a(o)}(a(n),i,o),i,o,h,p,g,2):2===m&&function(n,i,o,s,l,h){var p=n;do{for(var g,y,m=p.next.next;m!==p.prev;){if(p.i!==m.i&&(g=p,y=m,g.next.i!==y.i&&g.prev.i!==y.i&&!function(r,n){var i=r;do{if(i.i!==r.i&&i.next.i!==r.i&&i.i!==n.i&&i.next.i!==n.i&&f(i,i.next,r,n))return!0;i=i.next}while(i!==r);return!1}(g,y)&&(d(g,y)&&d(y,g)&&function(r,n){var i=r,a=!1,o=(r.x+n.x)/2,s=(r.y+n.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&o<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next;while(i!==r);return a}(g,y)&&(u(g.prev,g,y.prev)||u(g,y.prev,y))||c(g,y)&&u(g.prev,g,g.next)>0&&u(y.prev,y,y.next)>0))){var x=v(p,m);return p=a(p,p.next),x=a(x,x.next),r(p,i,o,s,l,h),void r(x,i,o,s,l,h)}m=m.next}p=p.next}while(p!==n)}(n,i,o,h,p,g):r(a(n),i,o,h,p,g,1);break}}}(A,M,h,p,g,w),M}function i(r,n,i,a,o){var s,l;if(o===x(r,n,i,a)>0)for(s=n;s<i;s+=a)l=g(s,r[s],r[s+1],l);else for(s=i-a;s>=n;s-=a)l=g(s,r[s],r[s+1],l);return l&&c(l,l.next)&&(y(l),l=l.next),l}function a(r,n){if(!r)return r;n||(n=r);var i,a=r;do if(i=!1,a.steiner||!c(a,a.next)&&0!==u(a.prev,a,a.next))a=a.next;else{if(y(a),(a=n=a.prev)===a.next)break;i=!0}while(i||a!==n);return n}function o(r,n){return r.x-n.x}function s(r,n,i,a,o){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-i)*o)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-a)*o)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function l(r,n,i,a,o,s,l,u){return(o-l)*(n-u)-(r-l)*(s-u)>=0&&(r-l)*(a-u)-(i-l)*(n-u)>=0&&(i-l)*(s-u)-(o-l)*(a-u)>=0}function u(r,n,i){return(n.y-r.y)*(i.x-n.x)-(n.x-r.x)*(i.y-n.y)}function c(r,n){return r.x===n.x&&r.y===n.y}function f(r,n,i,a){var o=p(u(r,n,i)),s=p(u(r,n,a)),l=p(u(i,a,r)),c=p(u(i,a,n));return o!==s&&l!==c||!(0!==o||!h(r,i,n))||!(0!==s||!h(r,a,n))||!(0!==l||!h(i,r,a))||!(0!==c||!h(i,n,a))}function h(r,n,i){return n.x<=Math.max(r.x,i.x)&&n.x>=Math.min(r.x,i.x)&&n.y<=Math.max(r.y,i.y)&&n.y>=Math.min(r.y,i.y)}function p(r){return r>0?1:r<0?-1:0}function d(r,n){return 0>u(r.prev,r,r.next)?u(r,n,r.next)>=0&&u(r,r.prev,n)>=0:0>u(r,n,r.prev)||0>u(r,r.next,n)}function v(r,n){var i=new m(r.i,r.x,r.y),a=new m(n.i,n.x,n.y),o=r.next,s=n.prev;return r.next=n,n.prev=r,i.next=o,o.prev=i,a.next=i,i.prev=a,s.next=a,a.prev=s,a}function g(r,n,i,a){var o=new m(r,n,i);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o}function y(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function m(r,n,i){this.i=r,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function x(r,n,i,a){for(var o=0,s=n,l=i-a;s<i;s+=a)o+=(r[l]-r[s])*(r[s+1]+r[l+1]),l=s;return o}r.exports=n,r.exports.default=n,n.deviation=function(r,n,i,a){var o=n&&n.length,s=o?n[0]*i:r.length,l=Math.abs(x(r,0,s,i));if(o)for(var u=0,c=n.length;u<c;u++){var f=n[u]*i,h=u<c-1?n[u+1]*i:r.length;l-=Math.abs(x(r,f,h,i))}var p=0;for(u=0;u<a.length;u+=3){var d=a[u]*i,v=a[u+1]*i,g=a[u+2]*i;p+=Math.abs((r[d]-r[g])*(r[v+1]-r[d+1])-(r[d]-r[v])*(r[g+1]-r[d+1]))}return 0===l&&0===p?0:Math.abs((p-l)/l)},n.flatten=function(r){for(var n=r[0][0].length,i={vertices:[],holes:[],dimensions:n},a=0,o=0;o<r.length;o++){for(var s=0;s<r[o].length;s++)for(var l=0;l<n;l++)i.vertices.push(r[o][s][l]);o>0&&(a+=r[o-1].length,i.holes.push(a))}return i}},2502:function(r,n,i){var a=i(68664);r.exports=function(r,n){var i,o=[],s=[],l=[],u={},c=[];i=0;for(var f=r.length;i<f;){var h=function(n){!function(n){for(var i=0;i<r.length;i++)i<n&&(r[i]=[]),r[i]=r[i].filter(function(r){return r>=n})}(n);for(var i,o=a(r).components.filter(function(r){return r.length>1}),s=1/0,l=0;l<o.length;l++)for(var u=0;u<o[l].length;u++)o[l][u]<s&&(s=o[l][u],i=l);var c=o[i];return!!c&&{leastVertex:s,adjList:r.map(function(r,n){return -1===c.indexOf(n)?[]:r.filter(function(r){return -1!==c.indexOf(r)})})}}(i);if(i=h.leastVertex,c=h.adjList){for(var p=0;p<c.length;p++)for(var d=0;d<c[p].length;d++){var v=c[p][d];l[+v]=!1,u[v]={}}(function r(a){var f,h,p=!1;for(s.push(a),l[a]=!0,f=0;f<c[a].length;f++)(h=c[a][f])===i?(function(i,a){var s=[].concat(a).concat(i);n?n(r):o.push(s)}(i,s),p=!0):l[h]||(p=r(h));if(p)!function r(n){l[n]=!1,u.hasOwnProperty(n)&&Object.keys(u[n]).forEach(function(i){delete u[n][i],l[i]&&r(i)})}(a);else for(f=0;f<c[a].length;f++){var d=u[h=c[a][f]];d||(d={},u[h]=d),d[h]=!0}return s.pop(),p})(i),i+=1}else i=f}return n?void 0:o}},16134:function(r,n,i){"use strict";var a=i(36672);r.exports=function(){return a(this).length=0,this}},4892:function(r,n,i){"use strict";r.exports=i(64404)()?Array.from:i(49441)},64404:function(r){"use strict";r.exports=function(){var r,n,i=Array.from;return"function"==typeof i&&!!((n=i(r=["raz","dwa"]))&&n!==r&&"dwa"===n[1])}},49441:function(r,n,i){"use strict";var a=i(8260).iterator,o=i(73051),s=i(33717),l=i(35976),u=i(78513),c=i(36672),f=i(95296),h=i(87963),p=Array.isArray,d=Function.prototype.call,v={configurable:!0,enumerable:!0,writable:!0,value:null},g=Object.defineProperty;r.exports=function(r){var n,i,y,m,x,b,_,w,T,k,A=arguments[1],M=arguments[2];if(r=Object(c(r)),f(A)&&u(A),this&&this!==Array&&s(this))n=this;else{if(!A){if(o(r))return 1!==(x=r.length)?Array.apply(null,r):((m=[,])[0]=r[0],m);if(p(r)){for(m=Array(x=r.length),i=0;i<x;++i)m[i]=r[i];return m}}m=[]}if(!p(r)){if(void 0!==(T=r[a])){for(_=u(T).call(r),n&&(m=new n),w=_.next(),i=0;!w.done;)k=A?d.call(A,M,w.value,i):w.value,n?(v.value=k,g(m,i,v)):m[i]=k,w=_.next(),++i;x=i}else if(h(r)){for(x=r.length,n&&(m=new n),i=0,y=0;i<x;++i)k=r[i],i+1<x&&(b=k.charCodeAt(0))>=55296&&b<=56319&&(k+=r[++i]),k=A?d.call(A,M,k,y):k,n?(v.value=k,g(m,y,v)):m[y]=k,++y;x=y}}if(void 0===x)for(x=l(r.length),n&&(m=new n(x)),i=0;i<x;++i)k=A?d.call(A,M,r[i],i):r[i],n?(v.value=k,g(m,i,v)):m[i]=k;return n&&(v.value=null,m.length=x),m}},73051:function(r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());r.exports=function(r){return n.call(r)===i}},33717:function(r){"use strict";var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);r.exports=function(r){return"function"==typeof r&&i(n.call(r))}},52345:function(r){"use strict";r.exports=function(){}},9953:function(r,n,i){"use strict";r.exports=i(90436)()?Math.sign:i(6069)},90436:function(r){"use strict";r.exports=function(){var r=Math.sign;return"function"==typeof r&&1===r(10)&&-1===r(-20)}},6069:function(r){"use strict";r.exports=function(r){return isNaN(r=Number(r))||0===r?r:r>0?1:-1}},56247:function(r,n,i){"use strict";var a=i(9953),o=Math.abs,s=Math.floor;r.exports=function(r){return isNaN(r)?0:0!==(r=Number(r))&&isFinite(r)?a(r)*s(o(r)):r}},35976:function(r,n,i){"use strict";var a=i(56247),o=Math.max;r.exports=function(r){return o(0,a(r))}},67260:function(r,n,i){"use strict";var a=i(78513),o=i(36672),s=Function.prototype.bind,l=Function.prototype.call,u=Object.keys,c=Object.prototype.propertyIsEnumerable;r.exports=function(r,n){return function(i,f){var h,p=arguments[2],d=arguments[3];return i=Object(o(i)),a(f),h=u(i),d&&h.sort("function"==typeof d?s.call(d,i):void 0),"function"!=typeof r&&(r=h[r]),l.call(r,h,function(r,a){return c.call(i,r)?l.call(f,p,i[r],r,i,a):n})}}},95879:function(r,n,i){"use strict";r.exports=i(73583)()?Object.assign:i(34205)},73583:function(r){"use strict";r.exports=function(){var r,n=Object.assign;return"function"==typeof n&&(n(r={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),r.foo+r.bar+r.trzy==="razdwatrzy")}},34205:function(r,n,i){"use strict";var a=i(68700),o=i(36672),s=Math.max;r.exports=function(r,n){var i,l,u,c=s(arguments.length,2);for(r=Object(o(r)),u=function(a){try{r[a]=n[a]}catch(r){i||(i=r)}},l=1;l<c;++l)a(n=arguments[l]).forEach(u);if(void 0!==i)throw i;return r}},19012:function(r,n,i){"use strict";var a=i(4892),o=i(95879),s=i(36672);r.exports=function(r){var n=Object(s(r)),i=arguments[1],l=Object(arguments[2]);if(n!==r&&!i)return n;var u={};return i?a(i,function(n){(l.ensure||n in r)&&(u[n]=r[n])}):o(u,r),u}},52818:function(r,n,i){"use strict";var a,o,s,l,u=Object.create;i(33247)()||(a=i(51882)),r.exports=a?1!==a.level?u:(o={},s={},l={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){s[r]="__proto__"!==r?l:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(o,s),Object.defineProperty(a,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(r,n){return u(null===r?o:r,n)}):u},96437:function(r,n,i){"use strict";r.exports=i(67260)("forEach")},99611:function(r,n,i){"use strict";var a=i(95296),o={function:!0,object:!0};r.exports=function(r){return a(r)&&o[typeof r]||!1}},95296:function(r,n,i){"use strict";var a=i(52345)();r.exports=function(r){return r!==a&&null!==r}},68700:function(r,n,i){"use strict";r.exports=i(13895)()?Object.keys:i(25217)},13895:function(r){"use strict";r.exports=function(){try{return Object.keys("primitive"),!0}catch(r){return!1}}},25217:function(r,n,i){"use strict";var a=i(95296),o=Object.keys;r.exports=function(r){return o(a(r)?Object(r):r)}},16906:function(r,n,i){"use strict";var a=i(78513),o=i(96437),s=Function.prototype.call;r.exports=function(r,n){var i={},l=arguments[2];return a(n),o(r,function(r,a,o,u){i[a]=s.call(n,l,r,a,o,u)}),i}},21780:function(r,n,i){"use strict";var a=i(95296),o=Array.prototype.forEach,s=Object.create;r.exports=function(r){var n=s(null);return o.call(arguments,function(r){a(r)&&function(r,n){var i;for(i in r)n[i]=r[i]}(Object(r),n)}),n}},1496:function(r,n,i){"use strict";r.exports=i(33247)()?Object.setPrototypeOf:i(51882)},33247:function(r){"use strict";var n=Object.create,i=Object.getPrototypeOf,a={};r.exports=function(){var r=Object.setPrototypeOf;return"function"==typeof r&&i(r((arguments[0]||n)(null),a))===a}},51882:function(r,n,i){"use strict";var a,o,s,l,u=i(99611),c=i(36672),f=Object.prototype.isPrototypeOf,h=Object.defineProperty,p={configurable:!0,enumerable:!1,writable:!0,value:void 0};a=function(r,n){if(c(r),null===n||u(n))return r;throw TypeError("Prototype must be null or an object")},r.exports=(o=function(){var r,n=Object.create(null),i={},a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(a){try{(r=a.set).call(n,i)}catch(r){}if(Object.getPrototypeOf(n)===i)return{set:r,level:2}}return n.__proto__=i,Object.getPrototypeOf(n)===i?{level:2}:((n={}).__proto__=i,Object.getPrototypeOf(n)===i&&{level:1})}())?(2===o.level?o.set?(l=o.set,s=function(r,n){return l.call(a(r,n),n),r}):s=function(r,n){return a(r,n).__proto__=n,r}:s=function r(n,i){var o;return a(n,i),(o=f.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,null===i&&(i=r.nullPolyfill),n.__proto__=i,o&&h(r.nullPolyfill,"__proto__",p),n},Object.defineProperty(s,"level",{configurable:!1,enumerable:!1,writable:!1,value:o.level})):null,i(52818)},78513:function(r){"use strict";r.exports=function(r){if("function"!=typeof r)throw TypeError(r+" is not a function");return r}},98976:function(r,n,i){"use strict";var a=i(99611);r.exports=function(r){if(!a(r))throw TypeError(r+" is not an Object");return r}},36672:function(r,n,i){"use strict";var a=i(95296);r.exports=function(r){if(!a(r))throw TypeError("Cannot use null or undefined");return r}},66741:function(r,n,i){"use strict";r.exports=i(17557)()?String.prototype.contains:i(60381)},17557:function(r){"use strict";var n="razdwatrzy";r.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},60381:function(r){"use strict";var n=String.prototype.indexOf;r.exports=function(r){return n.call(this,r,arguments[1])>-1}},87963:function(r){"use strict";var n=Object.prototype.toString,i=n.call("");r.exports=function(r){return"string"==typeof r||r&&"object"==typeof r&&(r instanceof String||n.call(r)===i)||!1}},43043:function(r){"use strict";var n=Object.create(null),i=Math.random;r.exports=function(){var r;do r=i().toString(36).slice(2);while(n[r]);return r}},32411:function(r,n,i){"use strict";var a,o=i(1496),s=i(66741),l=i(62072),u=i(8260),c=i(95426),f=Object.defineProperty;a=r.exports=function(r,n){if(!(this instanceof a))throw TypeError("Constructor requires 'new'");c.call(this,r),f(this,"__kind__",l("",n=n?s.call(n,"key+value")?"key+value":s.call(n,"key")?"key":"value":"value"))},o&&o(a,c),delete a.prototype.constructor,a.prototype=Object.create(c.prototype,{_resolve:l(function(r){return"value"===this.__kind__?this.__list__[r]:"key+value"===this.__kind__?[r,this.__list__[r]]:r})}),f(a.prototype,u.toStringTag,l("c","Array Iterator"))},27515:function(r,n,i){"use strict";var a=i(73051),o=i(78513),s=i(87963),l=i(66661),u=Array.isArray,c=Function.prototype.call,f=Array.prototype.some;r.exports=function(r,n){var i,h,p,d,v,g,y,m,x=arguments[2];if(u(r)||a(r)?i="array":s(r)?i="string":r=l(r),o(n),p=function(){d=!0},"array"!==i){if("string"!==i)for(h=r.next();!h.done;){if(c.call(n,x,h.value,p),d)return;h=r.next()}else for(g=r.length,v=0;v<g&&(y=r[v],v+1<g&&(m=y.charCodeAt(0))>=55296&&m<=56319&&(y+=r[++v]),c.call(n,x,y,p),!d);++v);}else f.call(r,function(r){return c.call(n,x,r,p),d})}},66661:function(r,n,i){"use strict";var a=i(73051),o=i(87963),s=i(32411),l=i(259),u=i(58095),c=i(8260).iterator;r.exports=function(r){return"function"==typeof u(r)[c]?r[c]():a(r)?new s(r):o(r)?new l(r):new s(r)}},95426:function(r,n,i){"use strict";var a,o=i(16134),s=i(95879),l=i(78513),u=i(36672),c=i(62072),f=i(55174),h=i(8260),p=Object.defineProperty,d=Object.defineProperties;r.exports=a=function(r,n){if(!(this instanceof a))throw TypeError("Constructor requires 'new'");d(this,{__list__:c("w",u(r)),__context__:c("w",n),__nextIndex__:c("w",0)}),n&&(l(n.on),n.on("_add",this._onAdd),n.on("_delete",this._onDelete),n.on("_clear",this._onClear))},delete a.prototype.constructor,d(a.prototype,s({_next:c(function(){var r;if(this.__list__)return this.__redo__&&void 0!==(r=this.__redo__.shift())?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(r){return void 0===r?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:c(function(r){return this.__list__[r]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object "+(this[h.toStringTag]||"Object")+"]"})},f({_onAdd:c(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(n,i){n>=r&&(this.__redo__[i]=++n)},this),this.__redo__.push(r)):p(this,"__redo__",c("c",[r])))}),_onDelete:c(function(r){var n;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(n=this.__redo__.indexOf(r))&&this.__redo__.splice(n,1),this.__redo__.forEach(function(n,i){n>r&&(this.__redo__[i]=--n)},this)))}),_onClear:c(function(){this.__redo__&&o.call(this.__redo__),this.__nextIndex__=0})}))),p(a.prototype,h.iterator,c(function(){return this}))},35940:function(r,n,i){"use strict";var a=i(73051),o=i(95296),s=i(87963),l=i(8260).iterator,u=Array.isArray;r.exports=function(r){return!(!o(r)||!u(r)&&!s(r)&&!a(r)&&"function"!=typeof r[l])}},259:function(r,n,i){"use strict";var a,o=i(1496),s=i(62072),l=i(8260),u=i(95426),c=Object.defineProperty;a=r.exports=function(r){if(!(this instanceof a))throw TypeError("Constructor requires 'new'");r=String(r),u.call(this,r),c(this,"__length__",s("",r.length))},o&&o(a,u),delete a.prototype.constructor,a.prototype=Object.create(u.prototype,{_next:s(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:s(function(r){var n,i=this.__list__[r];return this.__nextIndex__===this.__length__?i:(n=i.charCodeAt(0))>=55296&&n<=56319?i+this.__list__[this.__nextIndex__++]:i})}),c(a.prototype,l.toStringTag,s("c","String Iterator"))},58095:function(r,n,i){"use strict";var a=i(35940);r.exports=function(r){if(!a(r))throw TypeError(r+" is not iterable");return r}},73523:function(r){"use strict";function n(r,n){if(null==r)throw TypeError("Cannot convert first argument to object");for(var i=Object(r),a=1;a<arguments.length;a++){var o=arguments[a];if(null!=o)for(var s=Object.keys(Object(o)),l=0,u=s.length;l<u;l++){var c=s[l],f=Object.getOwnPropertyDescriptor(o,c);void 0!==f&&f.enumerable&&(i[c]=o[c])}}return i}r.exports={assign:n,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}}},8260:function(r,n,i){"use strict";r.exports=i(69711)()?i(94908).Symbol:i(18415)},69711:function(r,n,i){"use strict";var a=i(94908),o={object:!0,symbol:!0};r.exports=function(){var r,n=a.Symbol;if("function"!=typeof n)return!1;r=n("test symbol");try{String(r)}catch(r){return!1}return!!o[typeof n.iterator]&&!!o[typeof n.toPrimitive]&&!!o[typeof n.toStringTag]}},82276:function(r){"use strict";r.exports=function(r){return!!r&&("symbol"==typeof r||!!r.constructor&&"Symbol"===r.constructor.name&&"Symbol"===r[r.constructor.toStringTag])}},29366:function(r,n,i){"use strict";var a=i(62072),o=Object.defineProperty,s=Object.prototype,l=(0,Object.create)(null);r.exports=function(r){for(var n,i,u=0;l[r+(u||"")];)++u;return l[r+=u||""]=!0,o(s,n="@@"+r,a.gs(null,function(r){i||(i=!0,o(this,n,a(r)),i=!1)})),n}},92842:function(r,n,i){"use strict";var a=i(62072),o=i(94908).Symbol;r.exports=function(r){return Object.defineProperties(r,{hasInstance:a("",o&&o.hasInstance||r("hasInstance")),isConcatSpreadable:a("",o&&o.isConcatSpreadable||r("isConcatSpreadable")),iterator:a("",o&&o.iterator||r("iterator")),match:a("",o&&o.match||r("match")),replace:a("",o&&o.replace||r("replace")),search:a("",o&&o.search||r("search")),species:a("",o&&o.species||r("species")),split:a("",o&&o.split||r("split")),toPrimitive:a("",o&&o.toPrimitive||r("toPrimitive")),toStringTag:a("",o&&o.toStringTag||r("toStringTag")),unscopables:a("",o&&o.unscopables||r("unscopables"))})}},13304:function(r,n,i){"use strict";var a=i(62072),o=i(53308),s=Object.create(null);r.exports=function(r){return Object.defineProperties(r,{for:a(function(n){return s[n]?s[n]:s[n]=r(String(n))}),keyFor:a(function(r){var n;for(n in o(r),s)if(s[n]===r)return n})})}},18415:function(r,n,i){"use strict";var a,o,s,l=i(62072),u=i(53308),c=i(94908).Symbol,f=i(29366),h=i(92842),p=i(13304),d=Object.create,v=Object.defineProperties,g=Object.defineProperty;if("function"==typeof c)try{String(c()),s=!0}catch(r){}else c=null;o=function(r){if(this instanceof o)throw TypeError("Symbol is not a constructor");return a(r)},r.exports=a=function r(n){if(this instanceof r)throw TypeError("Symbol is not a constructor");return s?c(n):v(d(o.prototype),{__description__:l("",n=void 0===n?"":String(n)),__name__:l("",f(n))})},h(a),p(a),v(o.prototype,{constructor:l(a),toString:l("",function(){return this.__name__})}),v(a.prototype,{toString:l(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:l(function(){return u(this)})}),g(a.prototype,a.toPrimitive,l("",function(){var r=u(this);return"symbol"==typeof r?r:r.toString()})),g(a.prototype,a.toStringTag,l("c","Symbol")),g(o.prototype,a.toStringTag,l("c",a.prototype[a.toStringTag])),g(o.prototype,a.toPrimitive,l("c",a.prototype[a.toPrimitive]))},53308:function(r,n,i){"use strict";var a=i(82276);r.exports=function(r){if(!a(r))throw TypeError(r+" is not a symbol");return r}},83522:function(r,n,i){"use strict";r.exports=i(96402)()?WeakMap:i(329)},96402:function(r){"use strict";r.exports=function(){var r,n;if("function"!=typeof WeakMap)return!1;try{r=new WeakMap([[n={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return"[object WeakMap]"===String(r)&&"function"==typeof r.set&&r.set({},1)===r&&"function"==typeof r.delete&&"function"==typeof r.has&&"one"===r.get(n)}},96416:function(r){"use strict";r.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function(r,n,i){"use strict";var a,o=i(95296),s=i(1496),l=i(98976),u=i(36672),c=i(43043),f=i(62072),h=i(66661),p=i(27515),d=i(8260).toStringTag,v=i(96416),g=Array.isArray,y=Object.defineProperty,m=Object.prototype.hasOwnProperty,x=Object.getPrototypeOf;r.exports=a=function(){var r,n=arguments[0];if(!(this instanceof a))throw TypeError("Constructor requires 'new'");return r=v&&s&&WeakMap!==a?s(new WeakMap,x(this)):this,o(n)&&(g(n)||(n=h(n))),y(r,"__weakMapData__",f("c","$weakMap$"+c())),n&&p(n,function(n){u(n),r.set(n[0],n[1])}),r},v&&(s&&s(a,WeakMap),a.prototype=Object.create(WeakMap.prototype,{constructor:f(a)})),Object.defineProperties(a.prototype,{delete:f(function(r){return!!m.call(l(r),this.__weakMapData__)&&(delete r[this.__weakMapData__],!0)}),get:f(function(r){if(m.call(l(r),this.__weakMapData__))return r[this.__weakMapData__]}),has:f(function(r){return m.call(l(r),this.__weakMapData__)}),set:f(function(r,n){return y(l(r),this.__weakMapData__,f("c",n)),this}),toString:f(function(){return"[object WeakMap]"})}),y(a.prototype,d,f("c","WeakMap"))},15398:function(r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(r,n,i){return Function.prototype.apply.call(r,n,i)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var o=Number.isNaN||function(r){return r!=r};function s(){s.init.call(this)}r.exports=s,r.exports.once=function(r,n){return new Promise(function(i,a){function o(i){r.removeListener(n,s),a(i)}function s(){"function"==typeof r.removeListener&&r.removeListener("error",o),i([].slice.call(arguments))}y(r,n,s,{once:!0}),"error"!==n&&"function"==typeof r.on&&y(r,"error",o,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(r){if("function"!=typeof r)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function c(r){return void 0===r._maxListeners?s.defaultMaxListeners:r._maxListeners}function f(r,n,i,a){var o,s,l;if(u(i),void 0===(s=r._events)?(s=r._events=Object.create(null),r._eventsCount=0):(void 0!==s.newListener&&(r.emit("newListener",n,i.listener?i.listener:i),s=r._events),l=s[n]),void 0===l)l=s[n]=i,++r._eventsCount;else if("function"==typeof l?l=s[n]=a?[i,l]:[l,i]:a?l.unshift(i):l.push(i),(o=c(r))>0&&l.length>o&&!l.warned){l.warned=!0;var f=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=n,f.count=l.length,console&&console.warn&&console.warn(f)}return r}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(r,n,i){var a={fired:!1,wrapFn:void 0,target:r,type:n,listener:i},o=h.bind(a);return o.listener=i,a.wrapFn=o,o}function d(r,n,i){var a=r._events;if(void 0===a)return[];var o=a[n];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(r){for(var n=Array(r.length),i=0;i<n.length;++i)n[i]=r[i].listener||r[i];return n}(o):g(o,o.length)}function v(r){var n=this._events;if(void 0!==n){var i=n[r];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(r,n){for(var i=Array(n),a=0;a<n;++a)i[a]=r[a];return i}function y(r,n,i,a){if("function"==typeof r.on)a.once?r.once(n,i):r.on(n,i);else{if("function"!=typeof r.addEventListener)throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(n,function o(s){a.once&&r.removeEventListener(n,o),i(s)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(r){if("number"!=typeof r||r<0||o(r))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");l=r}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||o(r))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(r){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var o="error"===r,s=this._events;if(void 0!==s)o=o&&void 0===s.error;else if(!o)return!1;if(o){if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var l,u=Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u}var c=s[r];if(void 0===c)return!1;if("function"==typeof c)a(c,this,n);else{var f=c.length,h=g(c,f);for(i=0;i<f;++i)a(h[i],this,n)}return!0},s.prototype.addListener=function(r,n){return f(this,r,n,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(r,n){return f(this,r,n,!0)},s.prototype.once=function(r,n){return u(n),this.on(r,p(this,r,n)),this},s.prototype.prependOnceListener=function(r,n){return u(n),this.prependListener(r,p(this,r,n)),this},s.prototype.removeListener=function(r,n){var i,a,o,s,l;if(u(n),void 0===(a=this._events)||void 0===(i=a[r]))return this;if(i===n||i.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete a[r],a.removeListener&&this.emit("removeListener",r,i.listener||n));else if("function"!=typeof i){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){l=i[s].listener,o=s;break}if(o<0)return this;0===o?i.shift():function(r,n){for(;n+1<r.length;n++)r[n]=r[n+1];r.pop()}(i,o),1===i.length&&(a[r]=i[0]),void 0!==a.removeListener&&this.emit("removeListener",r,l||n)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(r){var n,i,a;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[r]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[r]),this;if(0==arguments.length){var o,s=Object.keys(i);for(a=0;a<s.length;++a)"removeListener"!==(o=s[a])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=i[r]))this.removeListener(r,n);else if(void 0!==n)for(a=n.length-1;a>=0;a--)this.removeListener(r,n[a]);return this},s.prototype.listeners=function(r){return d(this,r,!0)},s.prototype.rawListeners=function(r){return d(this,r,!1)},s.listenerCount=function(r,n){return"function"==typeof r.listenerCount?r.listenerCount(n):v.call(r,n)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},60774:function(r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};r.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(r){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},94908:function(r,n,i){"use strict";r.exports=i(51152)()?globalThis:i(60774)},51152:function(r){"use strict";r.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},92770:function(r,n,i){"use strict";var a=i(18546);r.exports=function(r){var n=typeof r;if("string"===n){var i=r;if(0==(r=+r)&&a(i))return!1}else if("number"!==n)return!1;return r-r<1}},30120:function(r,n,i){var a=i(90660);r.exports=function(r,n,i){if(!r)throw TypeError("must specify data as first parameter");if(i=0|+(i||0),Array.isArray(r)&&r[0]&&"number"==typeof r[0][0]){var o,s,l,u,c=r[0].length,f=r.length*c;n&&"string"!=typeof n||(n=new(a(n||"float32"))(f+i));var h=n.length-i;if(f!==h)throw Error("source length "+f+" ("+c+"x"+r.length+") does not match destination length "+h);for(o=0,l=i;o<r.length;o++)for(s=0;s<c;s++)n[l++]=null===r[o][s]?NaN:r[o][s]}else if(n&&"string"!=typeof n)n.set(r,i);else{var p=a(n||"float32");if(Array.isArray(r)||"array"===n)for(o=0,l=i,u=(n=new p(r.length+i)).length;l<u;l++,o++)n[l]=null===r[o]?NaN:r[o];else 0===i?n=new p(r):(n=new p(r.length+i)).set(r,i)}return n}},68016:function(r,n,i){"use strict";var a=i(53313),o=[32,126];r.exports=function(r){var n=(r=r||{}).shape?r.shape:r.canvas?[r.canvas.width,r.canvas.height]:[512,512],i=r.canvas||document.createElement("canvas"),s=r.font,l="number"==typeof r.step?[r.step,r.step]:r.step||[32,32],u=r.chars||o;if(s&&"string"!=typeof s&&(s=a(s)),Array.isArray(u)){if(2===u.length&&"number"==typeof u[0]&&"number"==typeof u[1]){for(var c=[],f=u[0],h=0;f<=u[1];f++)c[h++]=String.fromCharCode(f);u=c}}else u=String(u).split("");n=n.slice(),i.width=n[0],i.height=n[1];var p=i.getContext("2d");p.fillStyle="#000",p.fillRect(0,0,i.width,i.height),p.font=s,p.textAlign="center",p.textBaseline="middle",p.fillStyle="#fff";var d=l[0]/2,v=l[1]/2;for(f=0;f<u.length;f++)p.fillText(u[f],d,v),(d+=l[0])>n[0]-l[0]/2&&(d=l[0]/2,v+=l[1]);return i}},32879:function(r){"use strict";function n(r,s){s||(s={}),("string"==typeof r||Array.isArray(r))&&(s.family=r);var l=Array.isArray(s.family)?s.family.join(", "):s.family;if(!l)throw Error("`family` must be defined");var u=s.size||s.fontSize||s.em||48,c=s.weight||s.fontWeight||"",f=(r=[s.style||s.fontStyle||"",c,u].join(" ")+"px "+l,s.origin||"top");if(n.cache[l]&&u<=n.cache[l].em)return i(n.cache[l],f);var h=s.canvas||n.canvas,p=h.getContext("2d"),d={upper:void 0!==s.upper?s.upper:"H",lower:void 0!==s.lower?s.lower:"x",descent:void 0!==s.descent?s.descent:"p",ascent:void 0!==s.ascent?s.ascent:"h",tittle:void 0!==s.tittle?s.tittle:"i",overshoot:void 0!==s.overshoot?s.overshoot:"O"},v=Math.ceil(1.5*u);h.height=v,h.width=.5*v,p.font=r;var g={top:0};p.clearRect(0,0,v,v),p.textBaseline="top",p.fillStyle="black",p.fillText("H",0,0);var y=a(p.getImageData(0,0,v,v));p.clearRect(0,0,v,v),p.textBaseline="bottom",p.fillText("H",0,v);var m=a(p.getImageData(0,0,v,v));g.lineHeight=g.bottom=v-m+y,p.clearRect(0,0,v,v),p.textBaseline="alphabetic",p.fillText("H",0,v);var x=v-a(p.getImageData(0,0,v,v))-1+y;g.baseline=g.alphabetic=x,p.clearRect(0,0,v,v),p.textBaseline="middle",p.fillText("H",0,.5*v);var b=a(p.getImageData(0,0,v,v));g.median=g.middle=v-b-1+y-.5*v,p.clearRect(0,0,v,v),p.textBaseline="hanging",p.fillText("H",0,.5*v);var _=a(p.getImageData(0,0,v,v));g.hanging=v-_-1+y-.5*v,p.clearRect(0,0,v,v),p.textBaseline="ideographic",p.fillText("H",0,v);var w=a(p.getImageData(0,0,v,v));if(g.ideographic=v-w-1+y,d.upper&&(p.clearRect(0,0,v,v),p.textBaseline="top",p.fillText(d.upper,0,0),g.upper=a(p.getImageData(0,0,v,v)),g.capHeight=g.baseline-g.upper),d.lower&&(p.clearRect(0,0,v,v),p.textBaseline="top",p.fillText(d.lower,0,0),g.lower=a(p.getImageData(0,0,v,v)),g.xHeight=g.baseline-g.lower),d.tittle&&(p.clearRect(0,0,v,v),p.textBaseline="top",p.fillText(d.tittle,0,0),g.tittle=a(p.getImageData(0,0,v,v))),d.ascent&&(p.clearRect(0,0,v,v),p.textBaseline="top",p.fillText(d.ascent,0,0),g.ascent=a(p.getImageData(0,0,v,v))),d.descent&&(p.clearRect(0,0,v,v),p.textBaseline="top",p.fillText(d.descent,0,0),g.descent=o(p.getImageData(0,0,v,v))),d.overshoot){p.clearRect(0,0,v,v),p.textBaseline="top",p.fillText(d.overshoot,0,0);var T=o(p.getImageData(0,0,v,v));g.overshoot=T-x}for(var k in g)g[k]/=u;return g.em=u,n.cache[l]=g,i(g,f)}function i(r,n){var i={};for(var a in"string"==typeof n&&(n=r[n]),r)"em"!==a&&(i[a]=r[a]-n);return i}function a(r){for(var n=r.height,i=r.data,a=3;a<i.length;a+=4)if(0!==i[a])return Math.floor(.25*(a-3)/n)}function o(r){for(var n=r.height,i=r.data,a=i.length-1;a>0;a-=4)if(0!==i[a])return Math.floor(.25*(a-3)/n)}r.exports=n,n.canvas=document.createElement("canvas"),n.cache={}},31353:function(r,n,i){"use strict";var a=i(85395),o=Object.prototype.toString,s=Object.prototype.hasOwnProperty;r.exports=function(r,n,i){var l;if(!a(n))throw TypeError("iterator must be a function");arguments.length>=3&&(l=i),"[object Array]"===o.call(r)?function(r,n,i){for(var a=0,o=r.length;a<o;a++)s.call(r,a)&&(null==i?n(r[a],a,r):n.call(i,r[a],a,r))}(r,n,l):"string"==typeof r?function(r,n,i){for(var a=0,o=r.length;a<o;a++)null==i?n(r.charAt(a),a,r):n.call(i,r.charAt(a),a,r)}(r,n,l):function(r,n,i){for(var a in r)s.call(r,a)&&(null==i?n(r[a],a,r):n.call(i,r[a],a,r))}(r,n,l)}},73047:function(r){"use strict";var n=Array.prototype.slice,i=Object.prototype.toString;r.exports=function(r){var a=this;if("function"!=typeof a||"[object Function]"!==i.call(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var o,s=n.call(arguments,1),l=Math.max(0,a.length-s.length),u=[],c=0;c<l;c++)u.push("$"+c);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var i=a.apply(this,s.concat(n.call(arguments)));return Object(i)===i?i:this}return a.apply(r,s.concat(n.call(arguments)))}),a.prototype){var f=function(){};f.prototype=a.prototype,o.prototype=new f,f.prototype=null}return o}},77575:function(r,n,i){"use strict";var a=i(73047);r.exports=Function.prototype.bind||a},86249:function(r){r.exports=function(r,n){if("string"!=typeof r)throw TypeError("must specify type string");if(n=n||{},"undefined"==typeof document&&!n.canvas)return null;var i=n.canvas||document.createElement("canvas");"number"==typeof n.width&&(i.width=n.width),"number"==typeof n.height&&(i.height=n.height);var a,o=n;try{var s=[r];0===r.indexOf("webgl")&&s.push("experimental-"+r);for(var l=0;l<s.length;l++)if(a=i.getContext(s[l],o))return a}catch(r){a=null}return a||null}},68318:function(r,n,i){"use strict";var a,o=SyntaxError,s=Function,l=TypeError,u=function(r){try{return s('"use strict"; return ('+r+").constructor;")()}catch(r){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(r){c=null}var f=function(){throw new l},h=c?function(){try{return f}catch(r){try{return c(arguments,"callee").get}catch(r){return f}}}():f,p=i(57877)(),d=Object.getPrototypeOf||function(r){return r.__proto__},v={},g="undefined"==typeof Uint8Array?a:d(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?a:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?a:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):a,"%AsyncFromSyncIteratorPrototype%":a,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?a:Atomics,"%BigInt%":"undefined"==typeof BigInt?a:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?a:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?a:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?a:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?a:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?a:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?a:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?a:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?a:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?a:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):a,"%JSON%":"object"==typeof JSON?JSON:a,"%Map%":"undefined"==typeof Map?a:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?d((new Map)[Symbol.iterator]()):a,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?a:Promise,"%Proxy%":"undefined"==typeof Proxy?a:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?a:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?a:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?d((new Set)[Symbol.iterator]()):a,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?a:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):a,"%Symbol%":p?Symbol:a,"%SyntaxError%":o,"%ThrowTypeError%":h,"%TypedArray%":g,"%TypeError%":l,"%Uint8Array%":"undefined"==typeof Uint8Array?a:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?a:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?a:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?a:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?a:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?a:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?a:WeakSet};try{null.error}catch(r){var m=d(d(r));y["%Error.prototype%"]=m}var x=function r(n){var i;if("%AsyncFunction%"===n)i=u("async function () {}");else if("%GeneratorFunction%"===n)i=u("function* () {}");else if("%AsyncGeneratorFunction%"===n)i=u("async function* () {}");else if("%AsyncGenerator%"===n){var a=r("%AsyncGeneratorFunction%");a&&(i=a.prototype)}else if("%AsyncIteratorPrototype%"===n){var o=r("%AsyncGenerator%");o&&(i=d(o.prototype))}return y[n]=i,i},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=i(77575),w=i(35065),T=_.call(Function.call,Array.prototype.concat),k=_.call(Function.apply,Array.prototype.splice),A=_.call(Function.call,String.prototype.replace),M=_.call(Function.call,String.prototype.slice),S=_.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,L=/\\(\\)?/g,C=function(r,n){var i,a=r;if(w(b,a)&&(a="%"+(i=b[a])[0]+"%"),w(y,a)){var s=y[a];if(s===v&&(s=x(a)),void 0===s&&!n)throw new l("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:i,name:a,value:s}}throw new o("intrinsic "+r+" does not exist!")};r.exports=function(r,n){if("string"!=typeof r||0===r.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof n)throw new l('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,r))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(r){var n=M(r,0,1),i=M(r,-1);if("%"===n&&"%"!==i)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==n)throw new o("invalid intrinsic syntax, expected opening `%`");var a=[];return A(r,E,function(r,n,i,o){a[a.length]=i?A(o,L,"$1"):n||r}),a}(r),a=i.length>0?i[0]:"",s=C("%"+a+"%",n),u=s.name,f=s.value,h=!1,p=s.alias;p&&(a=p[0],k(i,T([0,1],p)));for(var d=1,v=!0;d<i.length;d+=1){var g=i[d],m=M(g,0,1),x=M(g,-1);if(('"'===m||"'"===m||"`"===m||'"'===x||"'"===x||"`"===x)&&m!==x)throw new o("property names with quotes must have matching quotes");if("constructor"!==g&&v||(h=!0),w(y,u="%"+(a+="."+g)+"%"))f=y[u];else if(null!=f){if(!(g in f)){if(!n)throw new l("base intrinsic for "+r+" exists, but the property is not available.");return}if(c&&d+1>=i.length){var b=c(f,g);f=(v=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:f[g]}else v=w(f,g),f=f[g];v&&!h&&(y[u]=f)}}return f}},85400:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],p=n[9],d=n[10],v=n[11],g=n[12],y=n[13],m=n[14],x=n[15];return r[0]=u*(d*x-v*m)-p*(c*x-f*m)+y*(c*v-f*d),r[1]=-(a*(d*x-v*m)-p*(o*x-s*m)+y*(o*v-s*d)),r[2]=a*(c*x-f*m)-u*(o*x-s*m)+y*(o*f-s*c),r[3]=-(a*(c*v-f*d)-u*(o*v-s*d)+p*(o*f-s*c)),r[4]=-(l*(d*x-v*m)-h*(c*x-f*m)+g*(c*v-f*d)),r[5]=i*(d*x-v*m)-h*(o*x-s*m)+g*(o*v-s*d),r[6]=-(i*(c*x-f*m)-l*(o*x-s*m)+g*(o*f-s*c)),r[7]=i*(c*v-f*d)-l*(o*v-s*d)+h*(o*f-s*c),r[8]=l*(p*x-v*y)-h*(u*x-f*y)+g*(u*v-f*p),r[9]=-(i*(p*x-v*y)-h*(a*x-s*y)+g*(a*v-s*p)),r[10]=i*(u*x-f*y)-l*(a*x-s*y)+g*(a*f-s*u),r[11]=-(i*(u*v-f*p)-l*(a*v-s*p)+h*(a*f-s*u)),r[12]=-(l*(p*m-d*y)-h*(u*m-c*y)+g*(u*d-c*p)),r[13]=i*(p*m-d*y)-h*(a*m-o*y)+g*(a*d-o*p),r[14]=-(i*(u*m-c*y)-l*(a*m-o*y)+g*(a*c-o*u)),r[15]=i*(u*d-c*p)-l*(a*d-o*p)+h*(a*c-o*u),r}},42331:function(r){r.exports=function(r){var n=new Float32Array(16);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n}},31042:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}},11902:function(r){r.exports=function(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},89887:function(r){r.exports=function(r){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],f=r[8],h=r[9],p=r[10],d=r[11],v=r[12],g=r[13],y=r[14],m=r[15];return(n*l-i*s)*(p*m-d*y)-(n*u-a*s)*(h*m-d*g)+(n*c-o*s)*(h*y-p*g)+(i*u-a*l)*(f*m-d*v)-(i*c-o*l)*(f*y-p*v)+(a*c-o*u)*(f*g-h*v)}},27812:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=i+i,u=a+a,c=o+o,f=i*l,h=a*l,p=a*u,d=o*l,v=o*u,g=o*c,y=s*l,m=s*u,x=s*c;return r[0]=1-p-g,r[1]=h+x,r[2]=d-m,r[3]=0,r[4]=h-x,r[5]=1-f-g,r[6]=v+y,r[7]=0,r[8]=d+m,r[9]=v-y,r[10]=1-f-p,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},34045:function(r){r.exports=function(r,n,i){var a,o,s,l=i[0],u=i[1],c=i[2],f=Math.sqrt(l*l+u*u+c*c);return 1e-6>Math.abs(f)?null:(l*=f=1/f,u*=f,c*=f,a=Math.sin(n),s=1-(o=Math.cos(n)),r[0]=l*l*s+o,r[1]=u*l*s+c*a,r[2]=c*l*s-u*a,r[3]=0,r[4]=l*u*s-c*a,r[5]=u*u*s+o,r[6]=c*u*s+l*a,r[7]=0,r[8]=l*c*s+u*a,r[9]=u*c*s-l*a,r[10]=c*c*s+o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}},45973:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=a+a,c=o+o,f=s+s,h=a*u,p=a*c,d=a*f,v=o*c,g=o*f,y=s*f,m=l*u,x=l*c,b=l*f;return r[0]=1-(v+y),r[1]=p+b,r[2]=d-x,r[3]=0,r[4]=p-b,r[5]=1-(h+y),r[6]=g+m,r[7]=0,r[8]=d+x,r[9]=g-m,r[10]=1-(h+v),r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r}},81472:function(r){r.exports=function(r,n){return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},14669:function(r){r.exports=function(r,n){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}},75262:function(r){r.exports=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=i,r[7]=0,r[8]=0,r[9]=-i,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},331:function(r){r.exports=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=a,r[1]=0,r[2]=-i,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=i,r[9]=0,r[10]=a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},11049:function(r){r.exports=function(r,n){var i=Math.sin(n),a=Math.cos(n);return r[0]=a,r[1]=i,r[2]=0,r[3]=0,r[4]=-i,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},75195:function(r){r.exports=function(r,n,i,a,o,s,l){var u=1/(i-n),c=1/(o-a),f=1/(s-l);return r[0]=2*s*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2*s*c,r[6]=0,r[7]=0,r[8]=(i+n)*u,r[9]=(o+a)*c,r[10]=(l+s)*f,r[11]=-1,r[12]=0,r[13]=0,r[14]=l*s*2*f,r[15]=0,r}},71551:function(r){r.exports=function(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},79576:function(r,n,i){r.exports={create:i(11902),clone:i(42331),copy:i(31042),identity:i(71551),transpose:i(88654),invert:i(95874),adjoint:i(85400),determinant:i(89887),multiply:i(91362),translate:i(31283),scale:i(10789),rotate:i(65074),rotateX:i(35545),rotateY:i(94918),rotateZ:i(15692),fromRotation:i(34045),fromRotationTranslation:i(45973),fromScaling:i(81472),fromTranslation:i(14669),fromXRotation:i(75262),fromYRotation:i(331),fromZRotation:i(11049),fromQuat:i(27812),frustum:i(75195),perspective:i(7864),perspectiveFromFieldOfView:i(35279),ortho:i(60378),lookAt:i(65551),str:i(6726)}},95874:function(r){r.exports=function(r,n){var i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],p=n[9],d=n[10],v=n[11],g=n[12],y=n[13],m=n[14],x=n[15],b=i*u-a*l,_=i*c-o*l,w=i*f-s*l,T=a*c-o*u,k=a*f-s*u,A=o*f-s*c,M=h*y-p*g,S=h*m-d*g,E=h*x-v*g,L=p*m-d*y,C=p*x-v*y,O=d*x-v*m,P=b*O-_*C+w*L+T*E-k*S+A*M;return P?(P=1/P,r[0]=(u*O-c*C+f*L)*P,r[1]=(o*C-a*O-s*L)*P,r[2]=(y*A-m*k+x*T)*P,r[3]=(d*k-p*A-v*T)*P,r[4]=(c*E-l*O-f*S)*P,r[5]=(i*O-o*E+s*S)*P,r[6]=(m*w-g*A-x*_)*P,r[7]=(h*A-d*w+v*_)*P,r[8]=(l*C-u*E+f*M)*P,r[9]=(a*E-i*C-s*M)*P,r[10]=(g*k-y*w+x*b)*P,r[11]=(p*w-h*k-v*b)*P,r[12]=(u*S-l*L-c*M)*P,r[13]=(i*L-a*S+o*M)*P,r[14]=(y*_-g*T-m*b)*P,r[15]=(h*T-p*_+d*b)*P,r):null}},65551:function(r,n,i){var a=i(71551);r.exports=function(r,n,i,o){var s,l,u,c,f,h,p,d,v,g,y=n[0],m=n[1],x=n[2],b=o[0],_=o[1],w=o[2],T=i[0],k=i[1],A=i[2];return 1e-6>Math.abs(y-T)&&1e-6>Math.abs(m-k)&&1e-6>Math.abs(x-A)?a(r):(p=y-T,d=m-k,v=x-A,(g=Math.sqrt((s=_*(v*=g=1/Math.sqrt(p*p+d*d+v*v))-w*(d*=g))*s+(l=w*(p*=g)-b*v)*l+(u=b*d-_*p)*u))?(s*=g=1/g,l*=g,u*=g):(s=0,l=0,u=0),(g=Math.sqrt((c=d*u-v*l)*c+(f=v*s-p*u)*f+(h=p*l-d*s)*h))?(c*=g=1/g,f*=g,h*=g):(c=0,f=0,h=0),r[0]=s,r[1]=c,r[2]=p,r[3]=0,r[4]=l,r[5]=f,r[6]=d,r[7]=0,r[8]=u,r[9]=h,r[10]=v,r[11]=0,r[12]=-(s*y+l*m+u*x),r[13]=-(c*y+f*m+h*x),r[14]=-(p*y+d*m+v*x),r[15]=1,r)}},91362:function(r){r.exports=function(r,n,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],v=n[10],g=n[11],y=n[12],m=n[13],x=n[14],b=n[15],_=i[0],w=i[1],T=i[2],k=i[3];return r[0]=_*a+w*u+T*p+k*y,r[1]=_*o+w*c+T*d+k*m,r[2]=_*s+w*f+T*v+k*x,r[3]=_*l+w*h+T*g+k*b,_=i[4],w=i[5],T=i[6],k=i[7],r[4]=_*a+w*u+T*p+k*y,r[5]=_*o+w*c+T*d+k*m,r[6]=_*s+w*f+T*v+k*x,r[7]=_*l+w*h+T*g+k*b,_=i[8],w=i[9],T=i[10],k=i[11],r[8]=_*a+w*u+T*p+k*y,r[9]=_*o+w*c+T*d+k*m,r[10]=_*s+w*f+T*v+k*x,r[11]=_*l+w*h+T*g+k*b,_=i[12],w=i[13],T=i[14],k=i[15],r[12]=_*a+w*u+T*p+k*y,r[13]=_*o+w*c+T*d+k*m,r[14]=_*s+w*f+T*v+k*x,r[15]=_*l+w*h+T*g+k*b,r}},60378:function(r){r.exports=function(r,n,i,a,o,s,l){var u=1/(n-i),c=1/(a-o),f=1/(s-l);return r[0]=-2*u,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*c,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(n+i)*u,r[13]=(o+a)*c,r[14]=(l+s)*f,r[15]=1,r}},7864:function(r){r.exports=function(r,n,i,a,o){var s=1/Math.tan(n/2),l=1/(a-o);return r[0]=s/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(o+a)*l,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*o*a*l,r[15]=0,r}},35279:function(r){r.exports=function(r,n,i,a){var o=Math.tan(n.upDegrees*Math.PI/180),s=Math.tan(n.downDegrees*Math.PI/180),l=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(l+u),f=2/(o+s);return r[0]=c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=-(l-u)*c*.5,r[9]=(o-s)*f*.5,r[10]=a/(i-a),r[11]=-1,r[12]=0,r[13]=0,r[14]=a*i/(i-a),r[15]=0,r}},65074:function(r){r.exports=function(r,n,i,a){var o,s,l,u,c,f,h,p,d,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C=a[0],O=a[1],P=a[2],I=Math.sqrt(C*C+O*O+P*P);return 1e-6>Math.abs(I)?null:(C*=I=1/I,O*=I,P*=I,o=Math.sin(i),l=1-(s=Math.cos(i)),u=n[0],c=n[1],f=n[2],h=n[3],p=n[4],d=n[5],v=n[6],g=n[7],y=n[8],m=n[9],x=n[10],b=n[11],_=C*C*l+s,w=O*C*l+P*o,T=P*C*l-O*o,k=C*O*l-P*o,A=O*O*l+s,M=P*O*l+C*o,S=C*P*l+O*o,E=O*P*l-C*o,L=P*P*l+s,r[0]=u*_+p*w+y*T,r[1]=c*_+d*w+m*T,r[2]=f*_+v*w+x*T,r[3]=h*_+g*w+b*T,r[4]=u*k+p*A+y*M,r[5]=c*k+d*A+m*M,r[6]=f*k+v*A+x*M,r[7]=h*k+g*A+b*M,r[8]=u*S+p*E+y*L,r[9]=c*S+d*E+m*L,r[10]=f*S+v*E+x*L,r[11]=h*S+g*E+b*L,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}},35545:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[4],l=n[5],u=n[6],c=n[7],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*o+f*a,r[5]=l*o+h*a,r[6]=u*o+p*a,r[7]=c*o+d*a,r[8]=f*o-s*a,r[9]=h*o-l*a,r[10]=p*o-u*a,r[11]=d*o-c*a,r}},94918:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],f=n[8],h=n[9],p=n[10],d=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o-f*a,r[1]=l*o-h*a,r[2]=u*o-p*a,r[3]=c*o-d*a,r[8]=s*a+f*o,r[9]=l*a+h*o,r[10]=u*a+p*o,r[11]=c*a+d*o,r}},15692:function(r){r.exports=function(r,n,i){var a=Math.sin(i),o=Math.cos(i),s=n[0],l=n[1],u=n[2],c=n[3],f=n[4],h=n[5],p=n[6],d=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*o+f*a,r[1]=l*o+h*a,r[2]=u*o+p*a,r[3]=c*o+d*a,r[4]=f*o-s*a,r[5]=h*o-l*a,r[6]=p*o-u*a,r[7]=d*o-c*a,r}},10789:function(r){r.exports=function(r,n,i){var a=i[0],o=i[1],s=i[2];return r[0]=n[0]*a,r[1]=n[1]*a,r[2]=n[2]*a,r[3]=n[3]*a,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=n[7]*o,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}},6726:function(r){r.exports=function(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}},31283:function(r){r.exports=function(r,n,i){var a,o,s,l,u,c,f,h,p,d,v,g,y=i[0],m=i[1],x=i[2];return n===r?(r[12]=n[0]*y+n[4]*m+n[8]*x+n[12],r[13]=n[1]*y+n[5]*m+n[9]*x+n[13],r[14]=n[2]*y+n[6]*m+n[10]*x+n[14],r[15]=n[3]*y+n[7]*m+n[11]*x+n[15]):(a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],v=n[10],g=n[11],r[0]=a,r[1]=o,r[2]=s,r[3]=l,r[4]=u,r[5]=c,r[6]=f,r[7]=h,r[8]=p,r[9]=d,r[10]=v,r[11]=g,r[12]=a*y+u*m+p*x+n[12],r[13]=o*y+c*m+d*x+n[13],r[14]=s*y+f*m+v*x+n[14],r[15]=l*y+h*m+g*x+n[15]),r}},88654:function(r){r.exports=function(r,n){if(r===n){var i=n[1],a=n[2],o=n[3],s=n[6],l=n[7],u=n[11];r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=i,r[6]=n[9],r[7]=n[13],r[8]=a,r[9]=s,r[11]=n[14],r[12]=o,r[13]=l,r[14]=u}else r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15];return r}},42505:function(r,n,i){"use strict";var a=i(72791),o=i(71299),s=i(98580),l=i(12018),u=i(83522),c=i(25075),f=i(68016),h=i(58404),p=i(18863),d=i(10973),v=i(25677),g=i(75686),y=i(53545),m=i(56131),x=i(32879),b=i(30120),_=i(13547).nextPow2,w=new u,T=!1;if(document.body){var k=document.body.appendChild(document.createElement("div"));k.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(k).fontStretch&&(T=!0),document.body.removeChild(k)}var A=function(r){var n;"function"==typeof(n=r)&&n._gl&&n.prop&&n.texture&&n.buffer?(r={regl:r},this.gl=r.regl._gl):this.gl=l(r),this.shader=w.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=r.regl||s({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(r)?r:{})};A.prototype.createShader=function(){var r=this.regl,n=r({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:r.prop("count"),offset:r.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:r.this("sizeBuffer")},width:{offset:0,stride:8,buffer:r.this("sizeBuffer")},char:r.this("charBuffer"),position:r.this("position")},uniforms:{atlasSize:function(r,n){return[n.atlas.width,n.atlas.height]},atlasDim:function(r,n){return[n.atlas.cols,n.atlas.rows]},atlas:function(r,n){return n.atlas.texture},charStep:function(r,n){return n.atlas.step},em:function(r,n){return n.atlas.em},color:r.prop("color"),opacity:r.prop("opacity"),viewport:r.this("viewportArray"),scale:r.this("scale"),align:r.prop("align"),baseline:r.prop("baseline"),translate:r.this("translate"),positionOffset:r.prop("positionOffset")},primitive:"points",viewport:r.this("viewport"),vert:"\n			precision highp float;\n			attribute float width, charOffset, char;\n			attribute vec2 position;\n			uniform float fontSize, charStep, em, align, baseline;\n			uniform vec4 viewport;\n			uniform vec4 color;\n			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n			varying vec4 fontColor;\n			void main () {\n				vec2 offset = floor(em * (vec2(align + charOffset, baseline)\n					+ vec2(positionOffset.x, -positionOffset.y)))\n					/ (viewport.zw * scale.xy);\n\n				vec2 position = (position + translate) * scale;\n				position += offset * scale;\n\n				charCoord = position * viewport.zw + viewport.xy;\n\n				gl_Position = vec4(position * 2. - 1., 0, 1);\n\n				gl_PointSize = charStep;\n\n				charId.x = mod(char, atlasDim.x);\n				charId.y = floor(char / atlasDim.x);\n\n				charWidth = width * em;\n\n				fontColor = color / 255.;\n			}",frag:"\n			precision highp float;\n			uniform float fontSize, charStep, opacity;\n			uniform vec2 atlasSize;\n			uniform vec4 viewport;\n			uniform sampler2D atlas;\n			varying vec4 fontColor;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n\n			float lightness(vec4 color) {\n				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n			}\n\n			void main () {\n				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n				float halfCharStep = floor(charStep * .5 + .5);\n\n				// invert y and shift by 1px (FF expecially needs that)\n				uv.y = charStep - uv.y;\n\n				// ignore points outside of character bounding box\n				float halfCharWidth = ceil(charWidth * .5);\n				if (floor(uv.x) > halfCharStep + halfCharWidth ||\n					floor(uv.x) < halfCharStep - halfCharWidth) return;\n\n				uv += charId * charStep;\n				uv = uv / atlasSize;\n\n				vec4 color = fontColor;\n				vec4 mask = texture2D(atlas, uv);\n\n				float maskY = lightness(mask);\n				// float colorY = lightness(color);\n				color.a *= maskY;\n				color.a *= opacity;\n\n				// color.a += .1;\n\n				// antialiasing, see yiq color space y-channel formula\n				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n				gl_FragColor = color;\n			}"});return{regl:r,draw:n,atlas:{}}},A.prototype.update=function(r){var n,i=this;if("string"==typeof r)r={text:r};else if(!r)return;null!=(r=o(r,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(r.opacity)?this.opacity=r.opacity.map(function(r){return parseFloat(r)}):this.opacity=parseFloat(r.opacity)),null!=r.viewport&&(this.viewport=p(r.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=r.kerning&&(this.kerning=r.kerning),null!=r.offset&&("number"==typeof r.offset&&(r.offset=[r.offset,0]),this.positionOffset=b(r.offset)),r.direction&&(this.direction=r.direction),r.range&&(this.range=r.range,this.scale=[1/(r.range[2]-r.range[0]),1/(r.range[3]-r.range[1])],this.translate=[-r.range[0],-r.range[1]]),r.scale&&(this.scale=r.scale),r.translate&&(this.translate=r.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||r.font||(r.font=A.baseFontSize+"px sans-serif");var s,l=!1,u=!1;if(r.font&&(Array.isArray(r.font)?r.font:[r.font]).forEach(function(r,n){if("string"==typeof r)try{r=a.parse(r)}catch(n){r=a.parse(A.baseFontSize+"px "+r)}else r=a.parse(a.stringify(r));var o=a.stringify({size:A.baseFontSize,family:r.family,stretch:T?r.stretch:void 0,variant:r.variant,weight:r.weight,style:r.style}),s=v(r.size),c=Math.round(s[0]*g(s[1]));if(c!==i.fontSize[n]&&(u=!0,i.fontSize[n]=c),!(i.font[n]&&o==i.font[n].baseString||(l=!0,i.font[n]=A.fonts[o],i.font[n]))){var f=r.family.join(", "),h=[r.style];r.style!=r.variant&&h.push(r.variant),r.variant!=r.weight&&h.push(r.weight),T&&r.weight!=r.stretch&&h.push(r.stretch),i.font[n]={baseString:o,family:f,weight:r.weight,stretch:r.stretch,style:r.style,variant:r.variant,width:{},kerning:{},metrics:x(f,{origin:"top",fontSize:A.baseFontSize,fontStyle:h.join(" ")})},A.fonts[o]=i.font[n]}}),(l||u)&&this.font.forEach(function(n,o){var s=a.stringify({size:i.fontSize[o],family:n.family,stretch:T?n.stretch:void 0,variant:n.variant,weight:n.weight,style:n.style});if(i.fontAtlas[o]=i.shader.atlas[s],!i.fontAtlas[o]){var l=n.metrics;i.shader.atlas[s]=i.fontAtlas[o]={fontString:s,step:2*Math.ceil(i.fontSize[o]*l.bottom*.5),em:i.fontSize[o],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:i.regl.texture()}}null==r.text&&(r.text=i.text)}),"string"==typeof r.text&&r.position&&r.position.length>2){for(var d=Array(.5*r.position.length),w=0;w<d.length;w++)d[w]=r.text;r.text=d}if(null!=r.text||l){if(this.textOffsets=[0],Array.isArray(r.text)){this.count=r.text[0].length,this.counts=[this.count];for(var k=1;k<r.text.length;k++)this.textOffsets[k]=this.textOffsets[k-1]+r.text[k-1].length,this.count+=r.text[k].length,this.counts.push(r.text[k].length);this.text=r.text.join("")}else this.text=r.text,this.count=this.text.length,this.counts=[this.count];s=[],this.font.forEach(function(r,n){A.atlasContext.font=r.baseString;for(var a=i.fontAtlas[n],o=0;o<i.text.length;o++){var l=i.text.charAt(o);if(null==a.ids[l]&&(a.ids[l]=a.chars.length,a.chars.push(l),s.push(l)),null==r.width[l]&&(r.width[l]=A.atlasContext.measureText(l).width/A.baseFontSize,i.kerning)){var u=[];for(var c in r.width)u.push(c+l,l+c);m(r.kerning,y(r.family,{pairs:u}))}}})}if(r.position){if(r.position.length>2){for(var M=!r.position[0].length,S=h.mallocFloat(2*this.count),E=0,L=0;E<this.counts.length;E++){var C=this.counts[E];if(M)for(var O=0;O<C;O++)S[L++]=r.position[2*E],S[L++]=r.position[2*E+1];else for(var P=0;P<C;P++)S[L++]=r.position[E][0],S[L++]=r.position[E][1]}this.position.call?this.position({type:"float",data:S}):this.position=this.regl.buffer({type:"float",data:S}),h.freeFloat(S)}else this.position.destroy&&this.position.destroy(),this.position={constant:r.position}}if(r.text||l){var I=h.mallocUint8(this.count),D=h.mallocFloat(2*this.count);this.textWidth=[];for(var z=0,R=0;z<this.counts.length;z++){for(var F=this.counts[z],B=this.font[z]||this.font[0],N=this.fontAtlas[z]||this.fontAtlas[0],j=0;j<F;j++){var U=this.text.charAt(R),V=this.text.charAt(R-1);if(I[R]=N.ids[U],D[2*R]=B.width[U],j){var H=D[2*R-2],q=D[2*R],G=D[2*R-1]+.5*H+.5*q;if(this.kerning){var Z=B.kerning[V+U];Z&&(G+=.001*Z)}D[2*R+1]=G}else D[2*R+1]=.5*D[2*R];R++}this.textWidth.push(D.length?.5*D[2*R-2]+D[2*R-1]:0)}r.align||(r.align=this.align),this.charBuffer({data:I,type:"uint8",usage:"stream"}),this.sizeBuffer({data:D,type:"float",usage:"stream"}),h.freeUint8(I),h.freeFloat(D),s.length&&this.font.forEach(function(r,n){var a=i.fontAtlas[n],o=a.step,s=Math.min(Math.floor(A.maxAtlasSize/o),a.chars.length),l=Math.ceil(a.chars.length/s),u=_(s*o),c=_(l*o);a.width=u,a.height=c,a.rows=l,a.cols=s,a.em&&a.texture({data:f({canvas:A.atlasCanvas,font:a.fontString,chars:a.chars,shape:[u,c],step:[o,o]})})})}if(r.align&&(this.align=r.align,this.alignOffset=this.textWidth.map(function(r,n){var a=Array.isArray(i.align)?i.align.length>1?i.align[n]:i.align[0]:i.align;if("number"==typeof a)return a;switch(a){case"right":case"end":return-r;case"center":case"centre":case"middle":return-(.5*r)}return 0})),null==this.baseline&&null==r.baseline&&(r.baseline=0),null!=r.baseline&&(this.baseline=r.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(r,n){var a=(i.font[n]||i.font[0]).metrics;return -1*(0+(.5*a.bottom+("number"==typeof r?r-a.baseline:-a[r])))})),null!=r.color){if(r.color||(r.color="transparent"),"string"!=typeof r.color&&isNaN(r.color)){if("number"==typeof r.color[0]&&r.color.length>this.counts.length){var Y=r.color.length;n=h.mallocUint8(Y);for(var W=(r.color.subarray||r.color.slice).bind(r.color),X=0;X<Y;X+=4)n.set(c(W(X,X+4),"uint8"),X)}else{var J=r.color.length;n=h.mallocUint8(4*J);for(var K=0;K<J;K++)n.set(c(r.color[K]||0,"uint8"),4*K)}this.color=n}else this.color=c(r.color,"uint8")}if(r.position||r.text||r.color||r.baseline||r.align||r.font||r.offset||r.opacity){if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var $=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array($);for(var Q=0;Q<this.batch.length;Q++)this.batch[Q]={count:this.counts.length>1?this.counts[Q]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Q]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*Q,4*Q+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Q]:this.opacity,baseline:null!=this.baselineOffset[Q]?this.baselineOffset[Q]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[Q]?this.alignOffset[Q]:this.alignOffset[0]:0,atlas:this.fontAtlas[Q]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*Q,2*Q+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},r.exports=A},12018:function(r,n,i){"use strict";var a=i(71299);function o(r){if(r.container){if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*i.g.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*i.g.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}}function s(r){return"function"==typeof r.getContext&&"width"in r&&"height"in r}function l(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}r.exports=function(r){if(r?"string"==typeof r&&(r={container:r}):r={},(r=s(r)||"string"==typeof(n=r).nodeName&&"function"==typeof n.appendChild&&"function"==typeof n.getBoundingClientRect?{container:r}:"function"==typeof(u=r).drawArrays||"function"==typeof u.drawElements?{gl:r}:a(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(r.pixelRatio=i.g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if("string"==typeof r.container){var n,u,c=document.querySelector(r.container);if(!c)throw Error("Element "+r.container+" is not found");r.container=c}s(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=l(),r.container.appendChild(r.canvas),o(r))}else if(!r.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=l(),r.container.appendChild(r.canvas),o(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{r.gl=r.canvas.getContext(n,r.attrs)}catch(r){}return r.gl}),r.gl}},56068:function(r){r.exports=function(r){"string"==typeof r&&(r=[r]);for(var n=[].slice.call(arguments,1),i=[],a=0;a<r.length-1;a++)i.push(r[a],n[a]||"");return i.push(r[a]),i.join("")}},40383:function(r,n,i){"use strict";var a=i(68318)("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch(r){a=null}r.exports=a},57035:function(r,n,i){"use strict";var a,o=i(54404);a="function"==typeof i.g.matchMedia?!i.g.matchMedia("(hover: none)").matches:o,r.exports=a},38520:function(r,n,i){"use strict";var a=i(54404);r.exports=a&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch(n){r=!1}return r}()},55622:function(r,n,i){"use strict";var a=i(68318)("%Object.defineProperty%",!0),o=function(){if(a)try{return a({},"a",{value:1}),!0}catch(r){}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return 1!==a([],"length",{value:1}).length}catch(r){return!0}},r.exports=o},57877:function(r,n,i){"use strict";var a="undefined"!=typeof Symbol&&Symbol,o=i(35638);r.exports=function(){return"function"==typeof a&&"function"==typeof Symbol&&"symbol"==typeof a("foo")&&"symbol"==typeof Symbol("bar")&&o()}},35638:function(r){"use strict";r.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var r={},n=Symbol("test"),i=Object(n);if("string"==typeof n||"[object Symbol]"!==Object.prototype.toString.call(n)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(n in r[n]=42,r)return!1;if("function"==typeof Object.keys&&0!==Object.keys(r).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(r).length)return!1;var a=Object.getOwnPropertySymbols(r);if(1!==a.length||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(r,n))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(r,n);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},84543:function(r,n,i){"use strict";var a=i(35638);r.exports=function(){return a()&&!!Symbol.toStringTag}},35065:function(r,n,i){"use strict";var a=i(77575);r.exports=a.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(r,n){n.read=function(r,n,i,a,o){var s,l,u=8*o-a-1,c=(1<<u)-1,f=c>>1,h=-7,p=i?o-1:0,d=i?-1:1,v=r[n+p];for(p+=d,s=v&(1<<-h)-1,v>>=-h,h+=u;h>0;s=256*s+r[n+p],p+=d,h-=8);for(l=s&(1<<-h)-1,s>>=-h,h+=a;h>0;l=256*l+r[n+p],p+=d,h-=8);if(0===s)s=1-f;else{if(s===c)return l?NaN:1/0*(v?-1:1);l+=Math.pow(2,a),s-=f}return(v?-1:1)*l*Math.pow(2,s-a)},n.write=function(r,n,i,a,o,s){var l,u,c,f=8*s-o-1,h=(1<<f)-1,p=h>>1,d=23===o?5960464477539062e-23:0,v=a?0:s-1,g=a?1:-1,y=n<0||0===n&&1/n<0?1:0;for(isNaN(n=Math.abs(n))||n===1/0?(u=isNaN(n)?1:0,l=h):(l=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-l))<1&&(l--,c*=2),(n+=l+p>=1?d/c:d*Math.pow(2,1-p))*c>=2&&(l++,c/=2),l+p>=h?(u=0,l=h):l+p>=1?(u=(n*c-1)*Math.pow(2,o),l+=p):(u=n*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;r[i+v]=255&u,v+=g,u/=256,o-=8);for(l=l<<o|u,f+=o;f>0;r[i+v]=255&l,v+=g,l/=256,f-=8);r[i+v-g]|=128*y}},42018:function(r){"function"==typeof Object.create?r.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}},47216:function(r,n,i){"use strict";var a=i(84543)(),o=i(6614)("Object.prototype.toString"),s=function(r){return!(a&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===o(r)},l=function(r){return!!s(r)||null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Array]"!==o(r)&&"[object Function]"===o(r.callee)},u=function(){return s(arguments)}();s.isLegacyArguments=l,r.exports=u?s:l},54404:function(r){r.exports=!0},85395:function(r){"use strict";var n,i,a=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get:function(){throw i}}),i={},o(function(){throw 42},null,n)}catch(r){r!==i&&(o=null)}else o=null;var s=/^\s*class\b/,l=function(r){try{var n=a.call(r);return s.test(n)}catch(r){return!1}},u=function(r){try{return!l(r)&&(a.call(r),!0)}catch(r){return!1}},c=Object.prototype.toString,f="function"==typeof Symbol&&!!Symbol.toStringTag,h=!(0 in[,]),p=function(){return!1};if("object"==typeof document){var d=document.all;c.call(d)===c.call(document.all)&&(p=function(r){if((h||!r)&&(void 0===r||"object"==typeof r))try{var n=c.call(r);return("[object HTMLAllCollection]"===n||"[object HTML document.all class]"===n||"[object HTMLCollection]"===n||"[object Object]"===n)&&null==r("")}catch(r){}return!1})}r.exports=o?function(r){if(p(r))return!0;if(!r||"function"!=typeof r&&"object"!=typeof r)return!1;try{o(r,null,n)}catch(r){if(r!==i)return!1}return!l(r)&&u(r)}:function(r){if(p(r))return!0;if(!r||"function"!=typeof r&&"object"!=typeof r)return!1;if(f)return u(r);if(l(r))return!1;var n=c.call(r);return!("[object Function]"!==n&&"[object GeneratorFunction]"!==n&&!/^\[object HTML/.test(n))&&u(r)}},65481:function(r,n,i){"use strict";var a,o=Object.prototype.toString,s=Function.prototype.toString,l=/^\s*(?:function)?\*/,u=i(84543)(),c=Object.getPrototypeOf;r.exports=function(r){if("function"!=typeof r)return!1;if(l.test(s.call(r)))return!0;if(!u)return"[object GeneratorFunction]"===o.call(r);if(!c)return!1;if(void 0===a){var n=function(){if(!u)return!1;try{return Function("return function*() {}")()}catch(r){}}();a=!!n&&c(n)}return c(r)===a}},62683:function(r){"use strict";r.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(r){"use strict";r.exports=function(r){return r!=r}},15567:function(r,n,i){"use strict";var a=i(68222),o=i(17045),s=i(64274),l=i(14922),u=i(22442),c=a(l(),Number);o(c,{getPolyfill:l,implementation:s,shim:u}),r.exports=c},14922:function(r,n,i){"use strict";var a=i(64274);r.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:a}},22442:function(r,n,i){"use strict";var a=i(17045),o=i(14922);r.exports=function(){var r=o();return a(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r}},64941:function(r){"use strict";r.exports=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)}},10973:function(r){"use strict";var n=Object.prototype.toString;r.exports=function(r){var i;return"[object Object]"===n.call(r)&&(null===(i=Object.getPrototypeOf(r))||i===Object.getPrototypeOf({}))}},18546:function(r){"use strict";r.exports=function(r){for(var n,i=r.length,a=0;a<i;a++)if(((n=r.charCodeAt(a))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},89546:function(r){"use strict";r.exports=function(r){return"string"==typeof r&&(r=r.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r)&&/[\dz]$/i.test(r)&&r.length>4))}},9187:function(r,n,i){"use strict";var a=i(31353),o=i(72077),s=i(6614),l=s("Object.prototype.toString"),u=i(84543)(),c=i(40383),f="undefined"==typeof globalThis?i.g:globalThis,h=o(),p=s("Array.prototype.indexOf",!0)||function(r,n){for(var i=0;i<r.length;i+=1)if(r[i]===n)return i;return -1},d=s("String.prototype.slice"),v={},g=Object.getPrototypeOf;u&&c&&g&&a(h,function(r){var n=new f[r];if(Symbol.toStringTag in n){var i=g(n),a=c(i,Symbol.toStringTag);a||(a=c(g(i),Symbol.toStringTag)),v[r]=a.get}}),r.exports=function(r){var n;return!!r&&"object"==typeof r&&(u&&Symbol.toStringTag in r?!!c&&(n=!1,a(v,function(i,a){if(!n)try{n=i.call(r)===a}catch(r){}}),n):p(h,d(l(r),8,-1))>-1)}},27084:function(r){"use strict";r.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},16825:function(r,n,i){"use strict";r.exports=function(r,n){n||(n=r,r=window);var i=0,o=0,s=0,l={shift:!1,alt:!1,control:!1,meta:!1},u=!1;function c(r){var n=!1;return"altKey"in r&&(n=n||r.altKey!==l.alt,l.alt=!!r.altKey),"shiftKey"in r&&(n=n||r.shiftKey!==l.shift,l.shift=!!r.shiftKey),"ctrlKey"in r&&(n=n||r.ctrlKey!==l.control,l.control=!!r.ctrlKey),"metaKey"in r&&(n=n||r.metaKey!==l.meta,l.meta=!!r.metaKey),n}function f(r,u){var f=a.x(u),h=a.y(u);"buttons"in u&&(r=0|u.buttons),(r!==i||f!==o||h!==s||c(u))&&(i=0|r,o=f||0,s=h||0,n&&n(i,o,s,l))}function h(r){f(0,r)}function p(){(i||o||s||l.shift||l.alt||l.meta||l.control)&&(o=s=0,i=0,l.shift=l.alt=l.control=l.meta=!1,n&&n(0,0,0,l))}function d(r){c(r)&&n&&n(i,o,s,l)}function v(r){0===a.buttons(r)?f(0,r):f(i,r)}function g(r){f(i|a.buttons(r),r)}function y(r){f(i&~a.buttons(r),r)}function m(){u||(u=!0,r.addEventListener("mousemove",v),r.addEventListener("mousedown",g),r.addEventListener("mouseup",y),r.addEventListener("mouseleave",h),r.addEventListener("mouseenter",h),r.addEventListener("mouseout",h),r.addEventListener("mouseover",h),r.addEventListener("blur",p),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var x={element:r};return Object.defineProperties(x,{enabled:{get:function(){return u},set:function(n){n?m():u&&(u=!1,r.removeEventListener("mousemove",v),r.removeEventListener("mousedown",g),r.removeEventListener("mouseup",y),r.removeEventListener("mouseleave",h),r.removeEventListener("mouseenter",h),r.removeEventListener("mouseout",h),r.removeEventListener("mouseover",h),r.removeEventListener("blur",p),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return o},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),x};var a=i(74311)},48956:function(r){var n={left:0,top:0};r.exports=function(r,i,a){i=i||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var o,s=r.clientX||0,l=r.clientY||0,u=(o=i)===window||o===document||o===document.body?n:o.getBoundingClientRect();return a[0]=s-u.left,a[1]=l-u.top,a}},74311:function(r,n){"use strict";function i(r){return r.target||r.srcElement||window}n.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(n=r.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in r){var n;if(1===(n=r.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},n.element=i,n.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var n=i(r).getBoundingClientRect();return r.clientX-n.left}return 0},n.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var n=i(r).getBoundingClientRect();return r.clientY-n.top}return 0}},1195:function(r,n,i){"use strict";var a=i(75686);r.exports=function(r,n,i){"function"==typeof r&&(i=!!n,n=r,r=window);var o=a("ex",r),s=function(r){i&&r.preventDefault();var a=r.deltaX||0,s=r.deltaY||0,l=r.deltaZ||0,u=1;switch(r.deltaMode){case 1:u=o;break;case 2:u=window.innerHeight}if(s*=u,l*=u,(a*=u)||s||l)return n(a,s,l,r)};return r.addEventListener("wheel",s),s}},7417:function(r,n,i){var a,o,s;o="Promise",(s=void 0!==i.g?i.g:this)[o]=s[o]||function(){"use strict";var r,n,i,a=Object.prototype.toString,o="undefined"!=typeof setImmediate?function(r){return setImmediate(r)}:setTimeout;try{Object.defineProperty({},"x",{}),r=function(r,n,i,a){return Object.defineProperty(r,n,{value:i,writable:!0,configurable:!1!==a})}}catch(n){r=function(r,n,i){return r[n]=i,r}}function s(r,a){i.add(r,a),n||(n=o(i.drain))}function l(r){var n,i=typeof r;return null==r||"object"!=i&&"function"!=i||(n=r.then),"function"==typeof n&&n}function u(){for(var r=0;r<this.chain.length;r++)(function(r,n,i){var a,o;try{!1===n?i.reject(r.msg):(a=!0===n?r.msg:n.call(void 0,r.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(o=l(a))?o.call(a,i.resolve,i.reject):i.resolve(a)}catch(r){i.reject(r)}})(this,1===this.state?this.chain[r].success:this.chain[r].failure,this.chain[r]);this.chain.length=0}function c(r){var n,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(n=l(r))?s(function(){var a=new p(i);try{n.call(r,function(){c.apply(a,arguments)},function(){f.apply(a,arguments)})}catch(r){f.call(a,r)}}):(i.msg=r,i.state=1,i.chain.length>0&&s(u,i))}catch(r){f.call(new p(i),r)}}}function f(r){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=r,n.state=2,n.chain.length>0&&s(u,n))}function h(r,n,i,a){for(var o=0;o<n.length;o++)!function(o){r.resolve(n[o]).then(function(r){i(o,r)},a)}(o)}function p(r){this.def=r,this.triggered=!1}function d(r){this.promise=r,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function v(r){if("function"!=typeof r)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new d(this);this.then=function(r,i){var a={success:"function"!=typeof r||r,failure:"function"==typeof i&&i};return a.promise=new this.constructor(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");a.resolve=r,a.reject=n}),n.chain.push(a),0!==n.state&&s(u,n),a.promise},this.catch=function(r){return this.then(void 0,r)};try{r.call(void 0,function(r){c.call(n,r)},function(r){f.call(n,r)})}catch(r){f.call(n,r)}}i=function(){var r,i,a;function o(r,n){this.fn=r,this.self=n,this.next=void 0}return{add:function(n,s){a=new o(n,s),i?i.next=a:r=a,i=a,a=void 0},drain:function(){var a=r;for(r=i=n=void 0;a;)a.fn.call(a.self),a=a.next}}}();var g=r({},"constructor",v,!1);return v.prototype=g,r(g,"__NPO__",0,!1),r(v,"resolve",function(r){return r&&"object"==typeof r&&1===r.__NPO__?r:new this(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");n(r)})}),r(v,"reject",function(r){return new this(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");i(r)})}),r(v,"all",function(r){var n=this;return"[object Array]"!=a.call(r)?n.reject(TypeError("Not an array")):0===r.length?n.resolve([]):new n(function(i,a){if("function"!=typeof i||"function"!=typeof a)throw TypeError("Not a function");var o=r.length,s=Array(o),l=0;h(n,r,function(r,n){s[r]=n,++l===o&&i(s)},a)})}),r(v,"race",function(r){var n=this;return"[object Array]"!=a.call(r)?n.reject(TypeError("Not an array")):new n(function(i,a){if("function"!=typeof i||"function"!=typeof a)throw TypeError("Not a function");h(n,r,function(r,n){i(n)},a)})}),v}(),r.exports?r.exports=s[o]:void 0===(a=(function(){return s[o]}).call(n,i,n,r))||(r.exports=a)},18625:function(r){var n=Math.PI,i=n/180*120;function a(r,n,i,a){return["C",r,n,i,a,i,a]}function o(r,n,i,a,o,s){return["C",r/3+2/3*i,n/3+2/3*a,o/3+2/3*i,s/3+2/3*a,o,s]}function s(r,n,i){return{x:r*Math.cos(i)-n*Math.sin(i),y:r*Math.sin(i)+n*Math.cos(i)}}r.exports=function(r){for(var l,u=[],c=0,f=0,h=0,p=0,d=null,v=null,g=0,y=0,m=0,x=r.length;m<x;m++){var b=r[m],_=b[0];switch(_){case"M":h=b[1],p=b[2];break;case"A":(b=function r(a,o,l,u,c,f,h,p,d,v){if(v)A=v[0],M=v[1],T=v[2],k=v[3];else{var g=s(a,o,-c);a=g.x,o=g.y;var y=(a-(p=(g=s(p,d,-c)).x))/2,m=(o-(d=g.y))/2,x=y*y/(l*l)+m*m/(u*u);x>1&&(l*=x=Math.sqrt(x),u*=x);var b=l*l,_=u*u,w=(f==h?-1:1)*Math.sqrt(Math.abs((b*_-b*m*m-_*y*y)/(b*m*m+_*y*y)));w==1/0&&(w=1);var T=w*l*m/u+(a+p)/2,k=-(w*u)*y/l+(o+d)/2,A=Math.asin(((o-k)/u).toFixed(9)),M=Math.asin(((d-k)/u).toFixed(9));(A=a<T?n-A:A)<0&&(A=2*n+A),(M=p<T?n-M:M)<0&&(M=2*n+M),h&&A>M&&(A-=2*n),!h&&M>A&&(M-=2*n)}if(Math.abs(M-A)>i)var S=M,E=p,L=d,C=r(p=T+l*Math.cos(M=A+i*(h&&M>A?1:-1)),d=k+u*Math.sin(M),l,u,c,0,h,E,L,[M,S,T,k]);var O=Math.tan((M-A)/4),P=4/3*l*O,I=4/3*u*O,D=[2*a-(a+P*Math.sin(A)),2*o-(o-I*Math.cos(A)),p+P*Math.sin(M),d-I*Math.cos(M),p,d];if(v)return D;C&&(D=D.concat(C));for(var z=0;z<D.length;){var R=s(D[z],D[z+1],c);D[z++]=R.x,D[z++]=R.y}return D}(g,y,b[1],b[2],n/180*b[3],b[4],b[5],b[6],b[7])).unshift("C"),b.length>7&&(u.push(b.splice(0,7)),b.unshift("C"));break;case"S":var w=g,T=y;"C"!=l&&"S"!=l||(w+=w-c,T+=T-f),b=["C",w,T,b[1],b[2],b[3],b[4]];break;case"T":"Q"==l||"T"==l?(d=2*g-d,v=2*y-v):(d=g,v=y),b=o(g,y,d,v,b[1],b[2]);break;case"Q":d=b[1],v=b[2],b=o(g,y,b[1],b[2],b[3],b[4]);break;case"L":b=a(g,y,b[1],b[2]);break;case"H":b=a(g,y,b[1],y);break;case"V":b=a(g,y,g,b[1]);break;case"Z":b=a(g,y,h,p)}l=_,g=b[b.length-2],y=b[b.length-1],b.length>4?(c=b[b.length-4],f=b[b.length-3]):(c=g,f=y),u.push(b)}return u}},56131:function(r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;r.exports=!function(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(r){return n[r]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(r){return!1}}()?function(r,o){for(var s,l,u=function(r){if(null==r)throw TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(r),c=1;c<arguments.length;c++){for(var f in s=Object(arguments[c]))i.call(s,f)&&(u[f]=s[f]);if(n){l=n(s);for(var h=0;h<l.length;h++)a.call(s,l[h])&&(u[l[h]]=s[l[h]])}}return u}:Object.assign},65848:function(r){"use strict";var n=function(r){return r!=r};r.exports=function(r,i){return 0===r&&0===i?1/r==1/i:r===i||!(!n(r)||!n(i))}},64003:function(r,n,i){"use strict";var a=i(17045),o=i(68222),s=i(65848),l=i(27015),u=i(55572),c=o(l(),Object);a(c,{getPolyfill:l,implementation:s,shim:u}),r.exports=c},27015:function(r,n,i){"use strict";var a=i(65848);r.exports=function(){return"function"==typeof Object.is?Object.is:a}},55572:function(r,n,i){"use strict";var a=i(27015),o=i(17045);r.exports=function(){var r=a();return o(Object,{is:r},{is:function(){return Object.is!==r}}),r}},99019:function(r,n,i){"use strict";var a;if(!Object.keys){var o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,l=i(64178),u=Object.prototype.propertyIsEnumerable,c=!u.call({toString:null},"toString"),f=u.call(function(){},"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(r){var n=r.constructor;return n&&n.prototype===r},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},v=function(){if("undefined"==typeof window)return!1;for(var r in window)try{if(!d["$"+r]&&o.call(window,r)&&null!==window[r]&&"object"==typeof window[r])try{p(window[r])}catch(r){return!0}}catch(r){return!0}return!1}();a=function(r){var n=null!==r&&"object"==typeof r,i="[object Function]"===s.call(r),a=l(r),u=n&&"[object String]"===s.call(r),d=[];if(!n&&!i&&!a)throw TypeError("Object.keys called on a non-object");var g=f&&i;if(u&&r.length>0&&!o.call(r,0))for(var y=0;y<r.length;++y)d.push(String(y));if(a&&r.length>0)for(var m=0;m<r.length;++m)d.push(String(m));else for(var x in r)g&&"prototype"===x||!o.call(r,x)||d.push(String(x));if(c)for(var b=function(r){if("undefined"==typeof window||!v)return p(r);try{return p(r)}catch(r){return!1}}(r),_=0;_<h.length;++_)b&&"constructor"===h[_]||!o.call(r,h[_])||d.push(h[_]);return d}}r.exports=a},8709:function(r,n,i){"use strict";var a=Array.prototype.slice,o=i(64178),s=Object.keys,l=s?function(r){return s(r)}:i(99019),u=Object.keys;l.shim=function(){return Object.keys?function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2)||(Object.keys=function(r){return o(r)?u(a.call(r)):u(r)}):Object.keys=l,Object.keys||l},r.exports=l},64178:function(r){"use strict";var n=Object.prototype.toString;r.exports=function(r){var i=n.call(r),a="[object Arguments]"===i;return a||(a="[object Array]"!==i&&null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Function]"===n.call(r.callee)),a}},88641:function(r){"use strict";function n(r,n){if("string"!=typeof r)return[r];var i=[r];"string"==typeof n||Array.isArray(n)?n={brackets:n}:n||(n={});var a=n.brackets?Array.isArray(n.brackets)?n.brackets:[n.brackets]:["{}","[]","()"],o=n.escape||"___",s=!!n.flat;a.forEach(function(r){var n=new RegExp(["\\",r[0],"[^\\",r[0],"\\",r[1],"]*\\",r[1]].join("")),a=[];function s(n,s,l){var u=i.push(n.slice(r[0].length,-r[1].length))-1;return a.push(u),o+u+o}i.forEach(function(r,a){for(var o,l=0;r!=o;)if(o=r,r=r.replace(n,s),l++>1e4)throw Error("References have circular dependency. Please, check them.");i[a]=r}),a=a.reverse(),i=i.map(function(n){return a.forEach(function(i){n=n.replace(RegExp("(\\"+o+i+"\\"+o+")","g"),r[0]+"$1"+r[1])}),n})});var l=RegExp("\\"+o+"([0-9]+)\\"+o);return s?i:function r(n,i,a){for(var o,s=[],u=0;o=l.exec(n);){if(u++>1e4)throw Error("Circular references in parenthesis");s.push(n.slice(0,o.index)),s.push(r(i[o[1]],i)),n=n.slice(o.index+o[0].length)}return s.push(n),s}(i[0],i)}function i(r,n){if(n&&n.flat){var i,a=n&&n.escape||"___",o=r[0];if(!o)return"";for(var s=RegExp("\\"+a+"([0-9]+)\\"+a),l=0;o!=i;){if(l++>1e4)throw Error("Circular references in "+r);i=o,o=o.replace(s,u)}return o}return r.reduce(function r(n,i){return Array.isArray(i)&&(i=i.reduce(r,"")),n+i},"");function u(n,i){if(null==r[i])throw Error("Reference "+i+"is undefined");return r[i]}}function a(r,a){return Array.isArray(r)?i(r,a):n(r,a)}a.parse=n,a.stringify=i,r.exports=a},18863:function(r,n,i){"use strict";var a=i(71299);r.exports=function(r){var n;return arguments.length>1&&(r=arguments),"string"==typeof r?r=r.split(/\s/).map(parseFloat):"number"==typeof r&&(r=[r]),r.length&&"number"==typeof r[0]?n=1===r.length?{width:r[0],height:r[0],x:0,y:0}:2===r.length?{width:r[0],height:r[1],x:0,y:0}:{x:r[0],y:r[1],width:r[2]-r[0]||0,height:r[3]-r[1]||0}:r&&(n={x:(r=a(r,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:r.top||0},null==r.width?r.right?n.width=r.right-n.x:n.width=0:n.width=r.width,null==r.height?r.bottom?n.height=r.bottom-n.y:n.height=0:n.height=r.height),n}},95616:function(r){r.exports=function(r){var o=[];return r.replace(i,function(r,i,s){var l,u=i.toLowerCase();for(s=(l=s.match(a))?l.map(Number):[],"m"==u&&s.length>2&&(o.push([i].concat(s.splice(0,2))),u="l",i="m"==i?"l":"L");;){if(s.length==n[u])return s.unshift(i),o.push(s);if(s.length<n[u])throw Error("malformed path data");o.push([i].concat(s.splice(0,n[u])))}}),o};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(r){r.exports=function(r,n){n||(n=[0,""]);var i=parseFloat(r=String(r),10);return n[0]=i,n[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},9748:function(r,n,i){var a=i(90386);(function(){var n,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?r.exports=function(){return performance.now()}:null!=a&&a.hrtime?(r.exports=function(){return(n()-s)/1e6},i=a.hrtime,s=(n=function(){var r;return 1e9*(r=i())[0]+r[1]})()-1e9*a.uptime()):Date.now?(r.exports=function(){return Date.now()-o},o=Date.now()):(r.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)},71299:function(r){"use strict";r.exports=function(r,n,a){var o,s,l={};if("string"==typeof n&&(n=i(n)),Array.isArray(n)){var u={};for(s=0;s<n.length;s++)u[n[s]]=!0;n=u}for(o in n)n[o]=i(n[o]);var c={};for(o in n){var f=n[o];if(Array.isArray(f))for(s=0;s<f.length;s++){var h=f[s];if(a&&(c[h]=!0),h in r){if(l[o]=r[h],a)for(var p=s;p<f.length;p++)c[f[p]]=!0;break}}else o in r&&(n[o]&&(l[o]=r[o]),a&&(c[o]=!0))}if(a)for(o in r)c[o]||(l[o]=r[o]);return l};var n={};function i(r){return n[r]?n[r]:("string"==typeof r&&(r=n[r]=r.split(/\s*,\s*|\s+/)),r)}},38258:function(r){r.exports=function(r,n,i,a){var o=r[0],s=r[1],l=!1;void 0===i&&(i=0),void 0===a&&(a=n.length);for(var u=a-i,c=0,f=u-1;c<u;f=c++){var h=n[c+i][0],p=n[c+i][1],d=n[f+i][0],v=n[f+i][1];p>s!=v>s&&o<(d-h)*(s-p)/(v-p)+h&&(l=!l)}return l}},52142:function(r,n,i){var a,o=i(69444),s=i(29023),l=i(87263),u=i(11328),c=i(55968),f=i(10670),h=!1,p=s();function d(r,n,i){var o=a.segments(r),s=a.segments(n),l=i(a.combine(o,s));return a.polygon(l)}a={buildLog:function(r){return!0===r?h=o():!1===r&&(h=!1),!1!==h&&h.list},epsilon:function(r){return p.epsilon(r)},segments:function(r){var n=l(!0,p,h);return r.regions.forEach(n.addRegion),{segments:n.calculate(r.inverted),inverted:r.inverted}},combine:function(r,n){return{combined:l(!1,p,h).calculate(r.segments,r.inverted,n.segments,n.inverted),inverted1:r.inverted,inverted2:n.inverted}},selectUnion:function(r){return{segments:c.union(r.combined,h),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:c.intersect(r.combined,h),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:c.difference(r.combined,h),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:c.differenceRev(r.combined,h),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:c.xor(r.combined,h),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:u(r.segments,p,h),inverted:r.inverted}},polygonFromGeoJSON:function(r){return f.toPolygon(a,r)},polygonToGeoJSON:function(r){return f.fromPolygon(a,p,r)},union:function(r,n){return d(r,n,a.selectUnion)},intersect:function(r,n){return d(r,n,a.selectIntersect)},difference:function(r,n){return d(r,n,a.selectDifference)},differenceRev:function(r,n){return d(r,n,a.selectDifferenceRev)},xor:function(r,n){return d(r,n,a.selectXor)}},"object"==typeof window&&(window.PolyBool=a),r.exports=a},69444:function(r){r.exports=function(){var r,n=0,i=!1;function a(n,i){return r.list.push({type:n,data:i?JSON.parse(JSON.stringify(i)):void 0}),r}return r={list:[],segmentId:function(){return n++},checkIntersection:function(r,n){return a("check",{seg1:r,seg2:n})},segmentChop:function(r,n){return a("div_seg",{seg:r,pt:n}),a("chop",{seg:r,pt:n})},statusRemove:function(r){return a("pop_seg",{seg:r})},segmentUpdate:function(r){return a("seg_update",{seg:r})},segmentNew:function(r,n){return a("new_seg",{seg:r,primary:n})},segmentRemove:function(r){return a("rem_seg",{seg:r})},tempStatus:function(r,n,i){return a("temp_status",{seg:r,above:n,below:i})},rewind:function(r){return a("rewind",{seg:r})},status:function(r,n,i){return a("status",{seg:r,above:n,below:i})},vert:function(n){return n===i?r:(i=n,a("vert",{x:n}))},log:function(r){return"string"!=typeof r&&(r=JSON.stringify(r,!1,"  ")),a("log",{txt:r})},reset:function(){return a("reset")},selected:function(r){return a("selected",{segs:r})},chainStart:function(r){return a("chain_start",{seg:r})},chainRemoveHead:function(r,n){return a("chain_rem_head",{index:r,pt:n})},chainRemoveTail:function(r,n){return a("chain_rem_tail",{index:r,pt:n})},chainNew:function(r,n){return a("chain_new",{pt1:r,pt2:n})},chainMatch:function(r){return a("chain_match",{index:r})},chainClose:function(r){return a("chain_close",{index:r})},chainAddHead:function(r,n){return a("chain_add_head",{index:r,pt:n})},chainAddTail:function(r,n){return a("chain_add_tail",{index:r,pt:n})},chainConnect:function(r,n){return a("chain_con",{index1:r,index2:n})},chainReverse:function(r){return a("chain_rev",{index:r})},chainJoin:function(r,n){return a("chain_join",{index1:r,index2:n})},done:function(){return a("done")}}}},29023:function(r){r.exports=function(r){"number"!=typeof r&&(r=1e-10);var n={epsilon:function(n){return"number"==typeof n&&(r=n),r},pointAboveOrOnLine:function(n,i,a){var o=i[0],s=i[1],l=a[0],u=a[1],c=n[0];return(l-o)*(n[1]-s)-(u-s)*(c-o)>=-r},pointBetween:function(n,i,a){var o=n[1]-i[1],s=a[0]-i[0],l=n[0]-i[0],u=a[1]-i[1],c=l*s+o*u;return!(c<r||c-(s*s+u*u)>-r)},pointsSameX:function(n,i){return Math.abs(n[0]-i[0])<r},pointsSameY:function(n,i){return Math.abs(n[1]-i[1])<r},pointsSame:function(r,i){return n.pointsSameX(r,i)&&n.pointsSameY(r,i)},pointsCompare:function(r,i){return n.pointsSameX(r,i)?n.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(n,i,a){var o=n[0]-i[0],s=n[1]-i[1],l=i[0]-a[0];return Math.abs(o*(i[1]-a[1])-l*s)<r},linesIntersect:function(n,i,a,o){var s=i[0]-n[0],l=i[1]-n[1],u=o[0]-a[0],c=o[1]-a[1],f=s*c-l*u;if(Math.abs(f)<r)return!1;var h=n[0]-a[0],p=n[1]-a[1],d=(u*p-c*h)/f,v=(s*p-l*h)/f,g={alongA:0,alongB:0,pt:[n[0]+d*s,n[1]+d*l]};return g.alongA=d<=-r?-2:d<r?-1:d-1<=-r?0:d-1<r?1:2,g.alongB=v<=-r?-2:v<r?-1:v-1<=-r?0:v-1<r?1:2,g},pointInsideRegion:function(n,i){for(var a=n[0],o=n[1],s=i[i.length-1][0],l=i[i.length-1][1],u=!1,c=0;c<i.length;c++){var f=i[c][0],h=i[c][1];h-o>r!=l-o>r&&(s-f)*(o-h)/(l-h)+f-a>r&&(u=!u),s=f,l=h}return u}};return n}},10670:function(r){r.exports={toPolygon:function(r,n){function i(n){if(n.length<=0)return r.segments({inverted:!1,regions:[]});function i(n){var i=n.slice(0,n.length-1);return r.segments({inverted:!1,regions:[i]})}for(var a=i(n[0]),o=1;o<n.length;o++)a=r.selectDifference(r.combine(a,i(n[o])));return a}if("Polygon"===n.type)return r.polygon(i(n.coordinates));if("MultiPolygon"===n.type){for(var a=r.segments({inverted:!1,regions:[]}),o=0;o<n.coordinates.length;o++)a=r.selectUnion(r.combine(a,i(n.coordinates[o])));return r.polygon(a)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(r,n,i){function a(r,i){return n.pointInsideRegion([.5*(r[0][0]+r[1][0]),.5*(r[0][1]+r[1][1])],i)}function o(r){return{region:r,children:[]}}i=r.polygon(r.segments(i));for(var s=o(null),l=0;l<i.regions.length;l++){var u=i.regions[l];u.length<3||function r(n,i){for(var s,l=0;l<n.children.length;l++)if(a(i,(s=n.children[l]).region))return void r(s,i);var u=o(i);for(l=0;l<n.children.length;l++)a((s=n.children[l]).region,i)&&(u.children.push(s),n.children.splice(l,1),l--);n.children.push(u)}(s,u)}function c(r,n){for(var i=0,a=r[r.length-1][0],o=r[r.length-1][1],s=[],l=0;l<r.length;l++){var u=r[l][0],c=r[l][1];s.push([u,c]),i+=c*a-u*o,a=u,o=c}return i<0!==n&&s.reverse(),s.push([s[0][0],s[0][1]]),s}var f=[];for(l=0;l<s.children.length;l++)(function r(n){var i=[c(n.region,!1)];f.push(i);for(var a=0;a<n.children.length;a++)i.push(function(n){for(var i=0;i<n.children.length;i++)r(n.children[i]);return c(n.region,!0)}(n.children[a]))})(s.children[l]);return f.length<=0?{type:"Polygon",coordinates:[]}:1==f.length?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}}},87263:function(r,n,i){var a=i(26859);r.exports=function(r,n,i){function o(r,n,a){return{id:i?i.segmentId():-1,start:r,end:n,myFill:{above:a.myFill.above,below:a.myFill.below},otherFill:null}}var s=a.create();function l(r,i){s.insertBefore(r,function(a){var o,s,l,u,c,f;return o=r.isStart,s=r.pt,l=a.isStart,u=a.pt,c=a.other.pt,(0!==(f=n.pointsCompare(s,u))?f:n.pointsSame(i,c)?0:o!==l?o?1:-1:n.pointAboveOrOnLine(i,l?u:c,l?c:u)?1:-1)<0})}function u(r,n){var i,o,s=(l(i=a.node({isStart:!0,pt:r.start,seg:r,primary:n,other:null,status:null}),r.end),i);return o=a.node({isStart:!1,pt:r.end,seg:r,primary:n,other:s,status:null}),s.other=o,l(o,s.pt),s}function c(r,n){var a=o(n,r.seg.end,r.seg);return i&&i.segmentChop(r.seg,n),r.other.remove(),r.seg.end=n,r.other.pt=n,l(r.other,r.pt),u(a,r.primary)}function f(o,l){var u=a.create();function f(r,a){var o=r.seg,s=a.seg,l=o.start,u=o.end,f=s.start,h=s.end;i&&i.checkIntersection(o,s);var p=n.linesIntersect(l,u,f,h);if(!1===p){if(!n.pointsCollinear(l,u,f)||n.pointsSame(l,h)||n.pointsSame(u,f))return!1;var d=n.pointsSame(l,f),v=n.pointsSame(u,h);if(d&&v)return a;var g=!d&&n.pointBetween(l,f,h),y=!v&&n.pointBetween(u,f,h);if(d)return y?c(a,u):c(r,h),a;g&&(v||(y?c(a,u):c(r,h)),c(a,l))}else 0===p.alongA&&(-1===p.alongB?c(r,f):0===p.alongB?c(r,p.pt):1===p.alongB&&c(r,h)),0===p.alongB&&(-1===p.alongA?c(a,l):0===p.alongA?c(a,p.pt):1===p.alongA&&c(a,u));return!1}for(var h=[];!s.isEmpty();){var p=s.getHead();if(i&&i.vert(p.pt[0]),p.isStart){i&&i.segmentNew(p.seg,p.primary);var d=function(r){return u.findTransition(function(i){var a,o,s,l,u;return a=i.ev,o=r.seg.start,s=r.seg.end,l=a.seg.start,u=a.seg.end,(n.pointsCollinear(o,l,u)?n.pointsCollinear(s,l,u)||n.pointAboveOrOnLine(s,l,u)?1:-1:n.pointAboveOrOnLine(o,l,u)?1:-1)>0})}(p),v=d.before?d.before.ev:null,g=d.after?d.after.ev:null;i&&i.tempStatus(p.seg,!!v&&v.seg,!!g&&g.seg);var y,m,x=function(){if(v){var r=f(p,v);if(r)return r}return!!g&&f(p,g)}();if(x&&(r?(m=null===p.seg.myFill.below||p.seg.myFill.above!==p.seg.myFill.below)&&(x.seg.myFill.above=!x.seg.myFill.above):x.seg.otherFill=p.seg.myFill,i&&i.segmentUpdate(x.seg),p.other.remove(),p.remove()),s.getHead()!==p){i&&i.rewind(p.seg);continue}r?(m=null===p.seg.myFill.below||p.seg.myFill.above!==p.seg.myFill.below,p.seg.myFill.below=g?g.seg.myFill.above:o,p.seg.myFill.above=m?!p.seg.myFill.below:p.seg.myFill.below):null===p.seg.otherFill&&(y=g?p.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:p.primary?l:o,p.seg.otherFill={above:y,below:y}),i&&i.status(p.seg,!!v&&v.seg,!!g&&g.seg),p.other.status=d.insert(a.node({ev:p}))}else{var b=p.status;if(null===b)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(u.exists(b.prev)&&u.exists(b.next)&&f(b.prev.ev,b.next.ev),i&&i.statusRemove(b.ev.seg),b.remove(),!p.primary){var _=p.seg.myFill;p.seg.myFill=p.seg.otherFill,p.seg.otherFill=_}h.push(p.seg)}s.getHead().remove()}return i&&i.done(),h}return r?{addRegion:function(r){for(var a,o,s,l=r[r.length-1],c=0;c<r.length;c++){a=l,l=r[c];var f=n.pointsCompare(a,l);0!==f&&u((o=f<0?a:l,s=f<0?l:a,{id:i?i.segmentId():-1,start:o,end:s,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return f(r,!1)}}:{calculate:function(r,n,i,a){return r.forEach(function(r){u(o(r.start,r.end,r),!0)}),i.forEach(function(r){u(o(r.start,r.end,r),!1)}),f(n,a)}}}},26859:function(r){r.exports={create:function(){var r={root:{root:!0,next:null},exists:function(n){return null!==n&&n!==r.root},isEmpty:function(){return null===r.root.next},getHead:function(){return r.root.next},insertBefore:function(n,i){for(var a=r.root,o=r.root.next;null!==o;){if(i(o))return n.prev=o.prev,n.next=o,o.prev.next=n,void(o.prev=n);a=o,o=o.next}a.next=n,n.prev=a,n.next=null},findTransition:function(n){for(var i=r.root,a=r.root.next;null!==a&&!n(a);)i=a,a=a.next;return{before:i===r.root?null:i,after:a,insert:function(r){return r.prev=i,r.next=a,i.next=r,null!==a&&(a.prev=r),r}}}};return r},node:function(r){return r.prev=null,r.next=null,r.remove=function(){r.prev.next=r.next,r.next&&(r.next.prev=r.prev),r.prev=null,r.next=null},r}}},11328:function(r){r.exports=function(r,n,i){var a=[],o=[];return r.forEach(function(r){var s=r.start,l=r.end;if(n.pointsSame(s,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{i&&i.chainStart(r);for(var u={index:0,matches_head:!1,matches_pt1:!1},c={index:0,matches_head:!1,matches_pt1:!1},f=u,h=0;h<a.length;h++){var p=(m=a[h])[0],d=(m[1],m[m.length-1]);if(m[m.length-2],n.pointsSame(p,s)){if(M(h,!0,!0))break}else if(n.pointsSame(p,l)){if(M(h,!0,!1))break}else if(n.pointsSame(d,s)){if(M(h,!1,!0))break}else if(n.pointsSame(d,l)&&M(h,!1,!1))break}if(f===u)return a.push([s,l]),void(i&&i.chainNew(s,l));if(f===c){i&&i.chainMatch(u.index);var v=u.index,g=u.matches_pt1?l:s,y=u.matches_head,m=a[v],x=y?m[0]:m[m.length-1],b=y?m[1]:m[m.length-2],_=y?m[m.length-1]:m[0],w=y?m[m.length-2]:m[1];return n.pointsCollinear(b,x,g)&&(y?(i&&i.chainRemoveHead(u.index,g),m.shift()):(i&&i.chainRemoveTail(u.index,g),m.pop()),x=b),n.pointsSame(_,g)?(a.splice(v,1),n.pointsCollinear(w,_,x)&&(y?(i&&i.chainRemoveTail(u.index,x),m.pop()):(i&&i.chainRemoveHead(u.index,x),m.shift())),i&&i.chainClose(u.index),void o.push(m)):void(y?(i&&i.chainAddHead(u.index,g),m.unshift(g)):(i&&i.chainAddTail(u.index,g),m.push(g)))}var T=u.index,k=c.index;i&&i.chainConnect(T,k);var A=a[T].length<a[k].length;u.matches_head?c.matches_head?A?(S(T),E(T,k)):(S(k),E(k,T)):E(k,T):c.matches_head?E(T,k):A?(S(T),E(k,T)):(S(k),E(T,k))}function M(r,n,i){return f.index=r,f.matches_head=n,f.matches_pt1=i,f===u?(f=c,!1):(f=null,!0)}function S(r){i&&i.chainReverse(r),a[r].reverse()}function E(r,o){var s=a[r],l=a[o],u=s[s.length-1],c=s[s.length-2],f=l[0],h=l[1];n.pointsCollinear(c,u,f)&&(i&&i.chainRemoveTail(r,u),s.pop(),u=c),n.pointsCollinear(u,f,h)&&(i&&i.chainRemoveHead(o,f),l.shift()),i&&i.chainJoin(r,o),a[r]=s.concat(l),a.splice(o,1)}}),o}},55968:function(r){function n(r,n,i){var a=[];return r.forEach(function(r){var o=(r.myFill.above?8:0)+(r.myFill.below?4:0)+(r.otherFill&&r.otherFill.above?2:0)+(r.otherFill&&r.otherFill.below?1:0);0!==n[o]&&a.push({id:i?i.segmentId():-1,start:r.start,end:r.end,myFill:{above:1===n[o],below:2===n[o]},otherFill:null})}),i&&i.selected(a),a}r.exports={union:function(r,i){return n(r,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],i)},intersect:function(r,i){return n(r,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],i)},difference:function(r,i){return n(r,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],i)},differenceRev:function(r,i){return n(r,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],i)},xor:function(r,i){return n(r,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],i)}}},14847:function(r,n,i){"use strict";var a=i(21630).Transform,o=i(90715);function s(){a.call(this,{readableObjectMode:!0})}function l(r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack||"",this.name=this.constructor.name,this.message=r,n&&(this.code=n),i&&(this.statusCode=i)}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,o(s.prototype),n.OF=function(r,n,i){for(var a=n,o=0;o<i.length;)if(r[a++]!==i[o++])return!1;return!0},n.eG=function(r,n){var i=[],a=0;if(n&&"hex"===n)for(;a<r.length;)i.push(parseInt(r.slice(a,a+2),16)),a+=2;else for(;a<r.length;a++)i.push(255&r.charCodeAt(a));return i},n.mP=function(r,n){return r[n]|r[n+1]<<8},n.n8=function(r,n){return r[n+1]|r[n]<<8},n.nm=function(r,n){return r[n]|r[n+1]<<8|r[n+2]<<16|16777216*r[n+3]},n.Ag=function(r,n){return r[n+3]|r[n+2]<<8|r[n+1]<<16|16777216*r[n]},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l},71371:function(r){"use strict";function n(r,n){var i=Error(r);return i.code=n,i}function i(r,i,a){this.input=r.subarray(i,a),this.start=i;var o=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==o&&"MM\0*"!==o)throw n("invalid TIFF signature","EBADDATA");this.big_endian="M"===o[0]}i.prototype.each=function(r){this.aborted=!1;var n=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:n}];this.ifds_to_read.length>0&&!this.aborted;){var i=this.ifds_to_read.shift();i.offset&&this.scan_ifd(i.id,i.offset,r)}},i.prototype.read_uint16=function(r){var i=this.input;if(r+2>i.length)throw n("unexpected EOF","EBADDATA");return this.big_endian?256*i[r]+i[r+1]:i[r]+256*i[r+1]},i.prototype.read_uint32=function(r){var i=this.input;if(r+4>i.length)throw n("unexpected EOF","EBADDATA");return this.big_endian?16777216*i[r]+65536*i[r+1]+256*i[r+2]+i[r+3]:i[r]+256*i[r+1]+65536*i[r+2]+16777216*i[r+3]},i.prototype.is_subifd_link=function(r,n){return 0===r&&34665===n||0===r&&34853===n||34665===r&&40965===n},i.prototype.exif_format_length=function(r){switch(r){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},i.prototype.exif_format_read=function(r,n){var i;switch(r){case 1:case 2:return this.input[n];case 6:return(i=this.input[n])|33554430*(128&i);case 3:return this.read_uint16(n);case 8:return(i=this.read_uint16(n))|131070*(32768&i);case 4:return this.read_uint32(n);case 9:return 0|this.read_uint32(n);default:return null}},i.prototype.scan_ifd=function(r,i,a){var o=this.read_uint16(i);i+=2;for(var s=0;s<o;s++){var l=this.read_uint16(i),u=this.read_uint16(i+2),c=this.read_uint32(i+4),f=this.exif_format_length(u),h=c*f,p=h<=4?i+8:this.read_uint32(i+8),d=!1;if(p+h>this.input.length)throw n("unexpected EOF","EBADDATA");for(var v=[],g=p,y=0;y<c;y++,g+=f){var m=this.exif_format_read(u,g);if(null===m){v=null;break}v.push(m)}if(Array.isArray(v)&&2===u&&(v=function(r){try{return decodeURIComponent(escape(r))}catch(n){return r}}(String.fromCharCode.apply(null,v)))&&"\0"===v[v.length-1]&&(v=v.slice(0,-1)),this.is_subifd_link(r,l)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:l,offset:v[0]}),d=!0),!1===a({is_big_endian:this.big_endian,ifd:r,tag:l,format:u,count:c,entry_offset:i+this.start,data_length:h,data_offset:p+this.start,value:v,is_subifd_link:d}))return void(this.aborted=!0);i+=12}0===r&&this.ifds_to_read.push({id:1,offset:this.read_uint32(i)})},r.exports.ExifParser=i,r.exports.get_orientation=function(r){var n=0;try{return new i(r,0,r.length).each(function(r){if(0===r.ifd&&274===r.tag&&Array.isArray(r.value))return n=r.value[0],!1}),n}catch(r){return -1}}},76767:function(r,n,i){"use strict";var a=i(14847).n8,o=i(14847).Ag;function s(r,n){if(r.length<4+n)return null;var i=o(r,n);return r.length<i+n||i<8?null:{boxtype:String.fromCharCode.apply(null,r.slice(n+4,n+8)),data:r.slice(n+8,n+i),end:n+i}}function l(r,n,i){for(var a=0,o=0;o<i;o++)a=256*a+(r[n+o]||0);return a}r.exports.unbox=s,r.exports.readSizeFromMeta=function(r){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(r,n){for(var i=4;;){var u=s(r,i);if(!u)break;"iprp"===u.boxtype&&function(r,n){for(var i=0;;){var a=s(r,i);if(!a)break;"ipco"===a.boxtype&&function(r,n){for(var i=0;;){var a=s(r,i);if(!a)break;switch(a.boxtype){case"ispe":n.sizes.push({width:o(a.data,4),height:o(a.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&a.data[0]})}i=a.end}}(a.data,n),i=a.end}}(u.data,n),"iloc"===u.boxtype&&function(r,n){for(var i=r[4]>>4&15,o=15&r[4],s=r[5]>>4&15,u=a(r,6),c=8,f=0;f<u;f++){var h=a(r,c),p=a(r,c+=2),d=l(r,c+=2,s),v=a(r,c+=s);if(c+=2,0===p&&1===v){var g=l(r,c,i),y=l(r,c+i,o);n.item_loc[h]={length:y,offset:g+d}}c+=v*(i+o)}}(u.data,n),"iinf"===u.boxtype&&function(r,n){for(var i=a(r,4),o=6,l=0;l<i;l++){var u=s(r,o);if(!u)break;if("infe"===u.boxtype){for(var c=a(u.data,4),f="",h=8;h<u.data.length&&u.data[h];h++)f+=String.fromCharCode(u.data[h]);n.item_inf[f]=c}o=u.end}}(u.data,n),i=u.end}}(r,n),n.sizes.length){var i,u,c,f=(u=(i=n.sizes).reduce(function(r,n){return r.width>n.width||r.width===n.width&&r.height>n.height?r:n}),c=i.reduce(function(r,n){return r.height>n.height||r.height===n.height&&r.width>n.width?r:n}),u.width>c.height||u.width===c.height&&u.height>c.width?u:c),h=1;n.transforms.forEach(function(r){var n={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},i={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===r.type&&(h=0===r.value?i[h]:n[h=n[h=i[h]]]),"irot"===r.type)for(var a=0;a<r.value;a++)h=n[h]});var p=null;return n.item_inf.Exif&&(p=n.item_loc[n.item_inf.Exif]),{width:f.width,height:f.height,orientation:n.transforms.length?h:null,variants:n.sizes,exif_location:p}}},r.exports.getMimeType=function(r){var n=String.fromCharCode.apply(null,r.slice(0,4)),i={};i[n]=!0;for(var a=8;a<r.length;a+=4)i[String.fromCharCode.apply(null,r.slice(a,a+4))]=!0;if(i.mif1||i.msf1||i.miaf)return"avif"===n||"avis"===n||"avio"===n?{type:"avif",mime:"image/avif"}:"heic"===n||"heix"===n?{type:"heic",mime:"image/heic"}:"hevc"===n||"hevx"===n?{type:"heic",mime:"image/heic-sequence"}:i.avif||i.avis?{type:"avif",mime:"image/avif"}:i.heic||i.heix||i.hevc||i.hevx||i.heis?i.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).Ag,l=i(76767),u=i(71371),c=a("ftyp");r.exports=function(r){if(o(r,4,c)){var n=l.unbox(r,0);if(n){var i=l.getMimeType(n.data);if(i){for(var a,f=n.end;;){var h=l.unbox(r,f);if(!h)break;if(f=h.end,"mdat"===h.boxtype)return;if("meta"===h.boxtype){a=h.data;break}}if(a){var p=l.readSizeFromMeta(a);if(p){var d={width:p.width,height:p.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(p.variants.length>1&&(d.variants=p.variants),p.orientation&&(d.orientation=p.orientation),p.exif_location&&p.exif_location.offset+p.exif_location.length<=r.length){var v=s(r,p.exif_location.offset),g=r.slice(p.exif_location.offset+v+4,p.exif_location.offset+p.exif_location.length),y=u.get_orientation(g);y>0&&(d.orientation=y)}return d}}}}}}},2504:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).mP,l=a("BM");r.exports=function(r){if(!(r.length<26)&&o(r,0,l))return{width:s(r,18),height:s(r,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).mP,l=a("GIF87a"),u=a("GIF89a");r.exports=function(r){if(!(r.length<10)&&(o(r,0,l)||o(r,0,u)))return{width:s(r,6),height:s(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(r,n,i){"use strict";var a=i(14847).mP;r.exports=function(r){var n=a(r,0),i=a(r,2),o=a(r,4);if(0===n&&1===i&&o){for(var s=[],l={width:0,height:0},u=0;u<o;u++){var c=r[6+16*u]||256,f=r[6+16*u+1]||256,h={width:c,height:f};s.push(h),(c>l.width||f>l.height)&&(l=h)}return{width:l.width,height:l.height,variants:s,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(r,n,i){"use strict";var a=i(14847).n8,o=i(14847).eG,s=i(14847).OF,l=i(71371),u=o("Exif\0\0");r.exports=function(r){if(!(r.length<2)&&255===r[0]&&216===r[1]&&255===r[2])for(var n=2;;){for(;;){if(r.length-n<2)return;if(255===r[n++])break}for(var i,o,c=r[n++];255===c;)c=r[n++];if(208<=c&&c<=217||1===c)i=0;else{if(!(192<=c&&c<=254)||r.length-n<2)return;i=a(r,n)-2,n+=2}if(217===c||218===c)return;if(225===c&&i>=10&&s(r,n,u)&&(o=l.get_orientation(r.slice(n+6,n+i))),i>=5&&192<=c&&c<=207&&196!==c&&200!==c&&204!==c){if(r.length-n<i)return;var f={width:a(r,n+3),height:a(r,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return o>0&&(f.orientation=o),f}n+=i}}},6303:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).Ag,l=a("\x89PNG\r\n\x1a\n"),u=a("IHDR");r.exports=function(r){if(!(r.length<24)&&o(r,0,l)&&o(r,12,u))return{width:s(r,16),height:s(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).Ag,l=a("8BPS\0\x01");r.exports=function(r){if(!(r.length<22)&&o(r,0,l))return{width:s(r,18),height:s(r,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(r){"use strict";function n(r){return"number"==typeof r&&isFinite(r)&&r>0}var i=/<[-_.:a-zA-Z0-9][^>]*>/,a=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,o=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,s=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,l=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,u=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function c(r){return u.test(r)?r.match(u)[0]:"px"}r.exports=function(r){if(function(r){var n,i=0,a=r.length;for(239===r[0]&&187===r[1]&&191===r[2]&&(i=3);i<a&&(32===(n=r[i])||9===n||13===n||10===n);)i++;return i!==a&&60===r[i]}(r)){for(var u="",f=0;f<r.length;f++)u+=String.fromCharCode(r[f]);var h=(u.match(i)||[""])[0];if(a.test(h)){var p,d,v,g=(p=h.match(o),d=h.match(s),v=h.match(l),{width:p&&(p[1]||p[2]),height:d&&(d[1]||d[2]),viewbox:v&&(v[1]||v[2])}),y=parseFloat(g.width),m=parseFloat(g.height);if(g.width&&g.height){if(!n(y)||!n(m))return;return{width:y,height:m,type:"svg",mime:"image/svg+xml",wUnits:c(g.width),hUnits:c(g.height)}}var x=(g.viewbox||"").split(" "),b={width:x[2],height:x[3]},_=parseFloat(b.width),w=parseFloat(b.height);if(n(_)&&n(w)&&c(b.width)===c(b.height)){var T=_/w;if(g.width){if(!n(y))return;return{width:y,height:y/T,type:"svg",mime:"image/svg+xml",wUnits:c(g.width),hUnits:c(g.width)}}if(g.height){if(!n(m))return;return{width:m*T,height:m,type:"svg",mime:"image/svg+xml",wUnits:c(g.height),hUnits:c(g.height)}}return{width:_,height:w,type:"svg",mime:"image/svg+xml",wUnits:c(b.width),hUnits:c(b.height)}}}}}},66278:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).mP,l=i(14847).n8,u=i(14847).nm,c=i(14847).Ag,f=a("II*\0"),h=a("MM\0*");function p(r,n,i){return i?l(r,n):s(r,n)}function d(r,n,i){return i?c(r,n):u(r,n)}function v(r,n,i){var a=p(r,n+2,i);return 1!==d(r,n+4,i)||3!==a&&4!==a?null:3===a?p(r,n+8,i):d(r,n+8,i)}r.exports=function(r){if(!(r.length<8)&&(o(r,0,f)||o(r,0,h))){var n=77===r[0],i=d(r,4,n)-8;if(!(i<0)){var a=i+8;if(!(r.length-a<2)){var s,l,u,c,g=12*p(r,a+0,n);if(!(g<=0||(a+=2,r.length-a<g))){for(s=0;s<g;s+=12)256===(c=p(r,a+s,n))?l=v(r,a+s,n):257===c&&(u=v(r,a+s,n));return l&&u?{width:l,height:u,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(r,n,i){"use strict";var a=i(14847).eG,o=i(14847).OF,s=i(14847).mP,l=i(14847).nm,u=i(71371),c=a("RIFF"),f=a("WEBP");r.exports=function(r){if(!(r.length<16)&&(o(r,0,c)||o(r,8,f))){var n=12,i=null,a=0,h=l(r,4)+8;if(!(h>r.length)){for(;n+8<h;)if(0!==r[n]){var p,d=String.fromCharCode.apply(null,r.slice(n,n+4)),v=l(r,n+4);"VP8 "===d&&v>=10?i=i||function(r,n){if(157===r[n+3]&&1===r[n+4]&&42===r[n+5])return{width:16383&s(r,n+6),height:16383&s(r,n+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(r,n+8):"VP8L"===d&&v>=9?i=i||function(r,n){if(47===r[n]){var i=l(r,n+1);return{width:1+(16383&i),height:1+(i>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}(r,n+8):"VP8X"===d&&v>=10?i=i||{width:1+(r[(p=n+8)+6]<<16|r[p+5]<<8|r[p+4]),height:1+(r[p+9]<<p|r[p+8]<<8|r[p+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}:"EXIF"===d&&(a=u.get_orientation(r.slice(n+8,n+8+v)),n=1/0),n+=8+v}else n++;if(i)return a>0&&(i.orientation=a),i}}}},91497:function(r,n,i){"use strict";r.exports={avif:i(24461),bmp:i(2504),gif:i(47342),ico:i(31355),jpeg:i(54261),png:i(6303),psd:i(38689),svg:i(6881),tiff:i(66278),webp:i(90784)}},33575:function(r,n,i){"use strict";var a=i(91497);r.exports=function(r){return function(r){for(var n=Object.keys(a),i=0;i<n.length;i++){var o=a[n[i]](r);if(o)return o}return null}(r)},r.exports.parsers=a},90386:function(r){var n,i,a=r.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(r){if(n===setTimeout)return setTimeout(r,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(r,0);try{return n(r,0)}catch(i){try{return n.call(null,r,0)}catch(i){return n.call(this,r,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(r){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(r){i=s}}();var u,c=[],f=!1,h=-1;function p(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!f){var r=l(p);f=!0;for(var n=c.length;n;){for(u=c,c=[];++h<n;)u&&u[h].run();h=-1,n=c.length}u=null,f=!1,function(r){if(i===clearTimeout)return clearTimeout(r);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(r);try{i(r)}catch(n){try{return i.call(null,r)}catch(n){return i.call(this,r)}}}(r)}}function v(r,n){this.fun=r,this.array=n}function g(){}a.nextTick=function(r){var n=Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)n[i-1]=arguments[i];c.push(new v(r,n)),1!==c.length||f||l(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(r){return[]},a.binding=function(r){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(r){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},5877:function(r,n,i){for(var a=i(9748),o="undefined"==typeof window?i.g:window,s=["moz","webkit"],l="AnimationFrame",u=o["request"+l],c=o["cancel"+l]||o["cancelRequest"+l],f=0;!u&&f<s.length;f++)u=o[s[f]+"Request"+l],c=o[s[f]+"Cancel"+l]||o[s[f]+"CancelRequest"+l];if(!u||!c){var h=0,p=0,d=[];u=function(r){if(0===d.length){var n=a(),i=Math.max(0,16.666666666666668-(n-h));h=i+n,setTimeout(function(){var r=d.slice(0);d.length=0;for(var n=0;n<r.length;n++)if(!r[n].cancelled)try{r[n].callback(h)}catch(r){setTimeout(function(){throw r},0)}},Math.round(i))}return d.push({handle:++p,callback:r,cancelled:!1}),p},c=function(r){for(var n=0;n<d.length;n++)d[n].handle===r&&(d[n].cancelled=!0)}}r.exports=function(r){return u.call(o,r)},r.exports.cancel=function(){c.apply(o,arguments)},r.exports.polyfill=function(r){r||(r=o),r.requestAnimationFrame=u,r.cancelAnimationFrame=c}},3593:function(r,n,i){"use strict";var a=i(21527),o=i(25075),s=i(93447),l=i(71299),u=i(56131),c=i(30120),f=i(57060),h=f.float32,p=f.fract32;r.exports=function(r,n){if("function"==typeof r?(n||(n={}),n.regl=r):n=r,n.length&&(n.positions=n),!(r=n.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var i,f,v,g,y,m,x=r._gl,b={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return g=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),v=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=r.buffer({usage:"static",type:"float",data:d}),A(n),i=r({vert:"\n		precision highp float;\n\n		attribute vec2 position, positionFract;\n		attribute vec4 error;\n		attribute vec4 color;\n\n		attribute vec2 direction, lineOffset, capOffset;\n\n		uniform vec4 viewport;\n		uniform float lineWidth, capSize;\n		uniform vec2 scale, scaleFract, translate, translateFract;\n\n		varying vec4 fragColor;\n\n		void main() {\n			fragColor = color / 255.;\n\n			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n			vec2 position = position + dxy;\n\n			vec2 pos = (position + translate) * scale\n				+ (positionFract + translateFract) * scale\n				+ (position + translate) * scaleFract\n				+ (positionFract + translateFract) * scaleFract;\n\n			pos += pixelOffset / viewport.zw;\n\n			gl_Position = vec4(pos * 2. - 1., 0, 1);\n		}\n		",frag:"\n		precision highp float;\n\n		varying vec4 fragColor;\n\n		uniform float opacity;\n\n		void main() {\n			gl_FragColor = fragColor;\n			gl_FragColor.a *= opacity;\n		}\n		",uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(r,n){return[n.viewport.x,n.viewport.y,r.viewportWidth,r.viewportHeight]}},attributes:{color:{buffer:g,offset:function(r,n){return 4*n.offset},divisor:1},position:{buffer:f,offset:function(r,n){return 8*n.offset},divisor:1},positionFract:{buffer:v,offset:function(r,n){return 8*n.offset},divisor:1},error:{buffer:y,offset:function(r,n){return 16*n.offset},divisor:1},direction:{buffer:m,stride:24,offset:0},lineOffset:{buffer:m,stride:24,offset:8},capOffset:{buffer:m,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:d.length}),u(w,{update:A,draw:T,destroy:M,regl:r,gl:x,canvas:x.canvas,groups:_}),w;function w(r){r?A(r):null===r&&M(),T()}function T(n){if("number"==typeof n)return k(n);n&&!Array.isArray(n)&&(n=[n]),r._refresh(),_.forEach(function(r,i){r&&(n&&(n[i]?r.draw=!0:r.draw=!1),r.draw?k(i):r.draw=!0)})}function k(r){"number"==typeof r&&(r=_[r]),null!=r&&r&&r.count&&r.color&&r.opacity&&r.positions&&r.positions.length>1&&(r.scaleRatio=[r.scale[0]*r.viewport.width,r.scale[1]*r.viewport.height],i(r),r.after&&r.after(r))}function A(r){if(r){null!=r.length?"number"==typeof r[0]&&(r=[{positions:r}]):Array.isArray(r)||(r=[r]);var n=0,i=0;if(w.groups=_=r.map(function(r,f){var h=_[f];return r&&("function"==typeof r?r={after:r}:"number"==typeof r[0]&&(r={positions:r}),r=l(r,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),h||(_[f]=h={id:f,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},r=u({},b,r)),s(h,r,[{lineWidth:function(r){return .5*+r},capSize:function(r){return .5*+r},opacity:parseFloat,errors:function(r){return r=c(r),i+=r.length,r},positions:function(r,i){return r=c(r,"float64"),i.count=Math.floor(r.length/2),i.bounds=a(r,2),i.offset=n,n+=i.count,r}},{color:function(r,n){var i=n.count;if(r||(r="transparent"),!Array.isArray(r)||"number"==typeof r[0]){var a=r;r=Array(i);for(var s=0;s<i;s++)r[s]=a}if(r.length<i)throw Error("Not enough colors");for(var l=new Uint8Array(4*i),u=0;u<i;u++){var c=o(r[u],"uint8");l.set(c,4*u)}return l},range:function(r,n,i){var a=n.bounds;return r||(r=a),n.scale=[1/(r[2]-r[0]),1/(r[3]-r[1])],n.translate=[-r[0],-r[1]],n.scaleFract=p(n.scale),n.translateFract=p(n.translate),r},viewport:function(r){var n;return Array.isArray(r)?n={x:r[0],y:r[1],width:r[2]-r[0],height:r[3]-r[1]}:r?(n={x:r.x||r.left||0,y:r.y||r.top||0},r.right?n.width=r.right-n.x:n.width=r.w||r.width||0,r.bottom?n.height=r.bottom-n.y:n.height=r.h||r.height||0):n={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight},n}}])),h}),n||i){var d=_.reduce(function(r,n,i){return r+(n?n.count:0)},0),m=new Float64Array(2*d),T=new Uint8Array(4*d),k=new Float32Array(4*d);_.forEach(function(r,n){if(r){var i=r.positions,a=r.count,o=r.offset,s=r.color,l=r.errors;a&&(T.set(s,4*o),k.set(l,4*o),m.set(i,2*o))}});var A=h(m);f(A),v(p(m,A)),g(T),y(k)}}}function M(){f.destroy(),v.destroy(),g.destroy(),y.destroy(),m.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(r,n,i){"use strict";var a=i(25075),o=i(21527),s=i(56131),l=i(56068),u=i(71299),c=i(30120),f=i(11474),h=i(54),p=i(57060),d=p.float32,v=p.fract32,g=i(83522),y=i(18863),m=i(6851);function x(r,n){if(!(this instanceof x))return new x(r,n);if("function"==typeof r?(n||(n={}),n.regl=r):n=r,n.length&&(n.positions=n),!(r=n.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=r._gl,this.regl=r,this.passes=[],this.shaders=x.shaders.has(r)?x.shaders.get(r):x.shaders.set(r,x.createShaders(r)).get(r),this.update(n)}r.exports=x,x.dashMult=2,x.maxPatternLength=256,x.precisionThreshold=3e6,x.maxPoints=1e4,x.maxLines=2048,x.shaders=new g,x.createShaders=function(r){var n,i=r.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),a={primitive:"triangle strip",instances:r.prop("count"),count:4,offset:0,uniforms:{miterMode:function(r,n){return"round"===n.join?2:1},miterLimit:r.prop("miterLimit"),scale:r.prop("scale"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),translate:r.prop("translate"),thickness:r.prop("thickness"),dashTexture:r.prop("dashTexture"),opacity:r.prop("opacity"),pixelRatio:r.context("pixelRatio"),id:r.prop("id"),dashLength:r.prop("dashLength"),viewport:function(r,n){return[n.viewport.x,n.viewport.y,r.viewportWidth,r.viewportHeight]},depth:r.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(r,n){return!n.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport")},o=r(s({vert:l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n	// the order is important\n	return position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n	float lineStart = 1. - lineEnd;\n	float lineOffset = lineTop * 2. - 1.;\n\n	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n	tangent = normalize(diff * scale * viewport.zw);\n	vec2 normal = vec2(-tangent.y, tangent.x);\n\n	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n		+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n}\n"]),frag:l(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n	float alpha = 1.;\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:i,divisor:0,stride:8,offset:0},lineTop:{buffer:i,divisor:0,stride:8,offset:4},aCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:r.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:r.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:r.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},a));try{n=r(s({cull:{enable:!0,face:"back"},vert:l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n	vec2 normalWidth = thickness / scaleRatio;\n\n	float lineStart = 1. - lineEnd;\n	float lineBot = 1. - lineTop;\n\n	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n	vec2 prevDiff = aCoord - prevCoord;\n	vec2 currDiff = bCoord - aCoord;\n	vec2 nextDiff = nextCoord - bCoord;\n\n	vec2 prevTangent = normalize(prevDiff * scaleRatio);\n	vec2 currTangent = normalize(currDiff * scaleRatio);\n	vec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n	vec2 currNormal = vec2(-currTangent.y, currTangent.x);\n	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n	vec2 startJoinDirection = normalize(prevTangent - currTangent);\n	vec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n	// collapsed/unidirectional segment cases\n	// FIXME: there should be more elegant solution\n	vec2 prevTanDiff = abs(prevTangent - currTangent);\n	vec2 nextTanDiff = abs(nextTangent - currTangent);\n	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n		startJoinDirection = currNormal;\n	}\n	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n		endJoinDirection = currNormal;\n	}\n	if (aCoord == bCoord) {\n		endJoinDirection = startJoinDirection;\n		currNormal = prevNormal;\n		currTangent = prevTangent;\n	}\n\n	tangent = currTangent;\n\n	//calculate join shifts relative to normals\n	float startJoinShift = dot(currNormal, startJoinDirection);\n	float endJoinShift = dot(currNormal, endJoinDirection);\n\n	float startMiterRatio = abs(1. / startJoinShift);\n	float endMiterRatio = abs(1. / endJoinShift);\n\n	vec2 startJoin = startJoinDirection * startMiterRatio;\n	vec2 endJoin = endJoinDirection * endMiterRatio;\n\n	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n	startTopJoin = sign(startJoinShift) * startJoin * .5;\n	startBotJoin = -startTopJoin;\n\n	endTopJoin = sign(endJoinShift) * endJoin * .5;\n	endBotJoin = -endTopJoin;\n\n	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n	//miter anti-clipping\n	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n	//prevent close to reverse direction switch\n	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n	if (prevReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n		//handle miter clipping\n		bTopCoord -= normalWidth * endTopJoin;\n		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n	}\n\n	if (nextReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n		//handle miter clipping\n		aBotCoord -= normalWidth * startBotJoin;\n		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n	}\n\n	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n	//position is normalized 0..1 coord on the screen\n	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n	enableStartMiter = step(dot(currTangent, prevTangent), .5);\n	enableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n	//bevel miter cutoffs\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n\n	//round miter cutoffs\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n}\n"]),frag:l(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nvoid main() {\n	float alpha = 1., distToStart, distToEnd;\n	float cutoff = thickness * .5;\n\n	//bevel miter\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToStart + 1., 0.), 1.);\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToEnd + 1., 0.), 1.);\n		}\n	}\n\n	// round miter\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < 0.) {\n				float radius = length(gl_FragCoord.xy - startCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < 0.) {\n				float radius = length(gl_FragCoord.xy - endCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n	}\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:i,divisor:0,stride:8,offset:0},lineTop:{buffer:i,divisor:0,stride:8,offset:4},aColor:{buffer:r.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:r.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:r.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},a))}catch(r){n=o}return{fill:r({primitive:"triangle",elements:function(r,n){return n.triangles},offset:0,vert:l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n	vec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n	fragColor.a *= opacity;\n}\n"]),frag:l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n	gl_FragColor = fragColor;\n}\n"]),uniforms:{scale:r.prop("scale"),color:r.prop("fill"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),translate:r.prop("translate"),opacity:r.prop("opacity"),pixelRatio:r.context("pixelRatio"),id:r.prop("id"),viewport:function(r,n){return[n.viewport.x,n.viewport.y,r.viewportWidth,r.viewportHeight]}},attributes:{position:{buffer:r.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:r.prop("positionFractBuffer"),stride:8,offset:8}},blend:a.blend,depth:{enable:!1},scissor:a.scissor,stencil:a.stencil,viewport:a.viewport}),rect:o,miter:n}},x.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},x.prototype.render=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];r.length&&this.update.apply(this,r),this.draw()},x.prototype.draw=function(){for(var r=this,n=[],i=arguments.length;i--;)n[i]=arguments[i];return(n.length?n:this.passes).forEach(function(n,i){if(n&&Array.isArray(n))return r.draw.apply(r,n);"number"==typeof n&&(n=r.passes[n]),n&&n.count>1&&n.opacity&&(r.regl._refresh(),n.fill&&n.triangles&&n.triangles.length>2&&r.shaders.fill(n),n.thickness&&(n.scale[0]*n.viewport.width>x.precisionThreshold||n.scale[1]*n.viewport.height>x.precisionThreshold||"rect"===n.join||!n.join&&(n.thickness<=2||n.count>=x.maxPoints)?r.shaders.rect(n):r.shaders.miter(n)))}),this},x.prototype.update=function(r){var n=this;if(r){null!=r.length?"number"==typeof r[0]&&(r=[{positions:r}]):Array.isArray(r)||(r=[r]);var i=this.regl,l=this.gl;if(r.forEach(function(r,p){var g=n.passes[p];if(void 0!==r){if(null!==r){if("number"==typeof r[0]&&(r={positions:r}),r=u(r,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),g||(n.passes[p]=g={id:p,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:i.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},r=s({},x.defaults,r)),null!=r.thickness&&(g.thickness=parseFloat(r.thickness)),null!=r.opacity&&(g.opacity=parseFloat(r.opacity)),null!=r.miterLimit&&(g.miterLimit=parseFloat(r.miterLimit)),null!=r.overlay&&(g.overlay=!!r.overlay,p<x.maxLines&&(g.depth=2*(x.maxLines-1-p%x.maxLines)/x.maxLines-1)),null!=r.join&&(g.join=r.join),null!=r.hole&&(g.hole=r.hole),null!=r.fill&&(g.fill=r.fill?a(r.fill,"uint8"):null),null!=r.viewport&&(g.viewport=y(r.viewport)),g.viewport||(g.viewport=y([l.drawingBufferWidth,l.drawingBufferHeight])),null!=r.close&&(g.close=r.close),null===r.positions&&(r.positions=[]),r.positions){if(r.positions.x&&r.positions.y){var b,_,w=r.positions.x,T=r.positions.y;b=new Float64Array(2*(_=g.count=Math.max(w.length,T.length)));for(var k=0;k<_;k++)b[2*k]=w[k],b[2*k+1]=T[k]}else b=c(r.positions,"float64"),_=g.count=Math.floor(b.length/2);var A=g.bounds=o(b,2);if(g.fill){for(var M=[],S={},E=0,L=0,C=0,O=g.count;L<O;L++){var P=b[2*L],I=b[2*L+1];isNaN(P)||isNaN(I)||null==P||null==I?(P=b[2*E],I=b[2*E+1],S[L]=E):E=L,M[C++]=P,M[C++]=I}if(r.splitNull){g.count-1 in S||(S[g.count]=g.count-1);var D=Object.keys(S).map(Number).sort(function(r,n){return r-n}),z=[],R=0,F=null!=g.hole?g.hole[0]:null;if(null!=F){var B=m(D,function(r){return r>=F});(D=D.slice(0,B)).push(F)}for(var N=function(r){var n=f(M.slice(2*R,2*D[r]).concat(F?M.slice(2*F):[]),(g.hole||[]).map(function(n){return n-F+(D[r]-R)}));n=n.map(function(n){return n+R+(n+R<D[r]?0:F-D[r])}),z.push.apply(z,n),R=D[r]+1},j=0;j<D.length;j++)N(j);for(var U=0,V=z.length;U<V;U++)null!=S[z[U]]&&(z[U]=S[z[U]]);g.triangles=z}else{for(var H=f(M,g.hole||[]),q=0,G=H.length;q<G;q++)null!=S[H[q]]&&(H[q]=S[H[q]]);g.triangles=H}}var Z=new Float64Array(b);h(Z,2,A);var Y=new Float64Array(2*_+6);g.close?b[0]===b[2*_-2]&&b[1]===b[2*_-1]?(Y[0]=Z[2*_-4],Y[1]=Z[2*_-3]):(Y[0]=Z[2*_-2],Y[1]=Z[2*_-1]):(Y[0]=Z[0],Y[1]=Z[1]),Y.set(Z,2),g.close?b[0]===b[2*_-2]&&b[1]===b[2*_-1]?(Y[2*_+2]=Z[2],Y[2*_+3]=Z[3],g.count-=1):(Y[2*_+2]=Z[0],Y[2*_+3]=Z[1],Y[2*_+4]=Z[2],Y[2*_+5]=Z[3]):(Y[2*_+2]=Z[2*_-2],Y[2*_+3]=Z[2*_-1],Y[2*_+4]=Z[2*_-2],Y[2*_+5]=Z[2*_-1]);var W=d(Y);g.positionBuffer(W);var X=v(Y,W);g.positionFractBuffer(X)}if(r.range?g.range=r.range:g.range||(g.range=g.bounds),(r.range||r.positions)&&g.count){var J=g.bounds,K=J[2]-J[0],$=J[3]-J[1],Q=g.range[2]-g.range[0],tt=g.range[3]-g.range[1];g.scale=[K/Q,$/tt],g.translate=[-g.range[0]/Q+J[0]/Q||0,-g.range[1]/tt+J[1]/tt||0],g.scaleFract=v(g.scale),g.translateFract=v(g.translate)}if(r.dashes){var te,tr=0;if(!r.dashes||r.dashes.length<2)tr=1,te=new Uint8Array([255,255,255,255,255,255,255,255]);else{tr=0;for(var tn=0;tn<r.dashes.length;++tn)tr+=r.dashes[tn];te=new Uint8Array(tr*x.dashMult);for(var ti=0,ta=255,to=0;to<2;to++)for(var ts=0;ts<r.dashes.length;++ts){for(var tl=0,tu=r.dashes[ts]*x.dashMult*.5;tl<tu;++tl)te[ti++]=ta;ta^=255}}g.dashLength=tr,g.dashTexture({channels:1,data:te,width:te.length,height:1,mag:"linear",min:"linear"},0,0)}if(r.color){var tc=g.count,tf=r.color;tf||(tf="transparent");var th=new Uint8Array(4*tc+4);if(Array.isArray(tf)&&"number"!=typeof tf[0]){for(var tp=0;tp<tc;tp++){var td=a(tf[tp],"uint8");th.set(td,4*tp)}th.set(a(tf[0],"uint8"),4*tc)}else for(var tv=a(tf,"uint8"),tg=0;tg<tc+1;tg++)th.set(tv,4*tg);g.colorBuffer({usage:"dynamic",type:"uint8",data:th})}}else n.passes[p]=null}}),r.length<this.passes.length){for(var p=r.length;p<this.passes.length;p++){var g=this.passes[p];g&&(g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy())}this.passes.length=r.length}for(var b=[],_=0;_<this.passes.length;_++)null!==this.passes[_]&&b.push(this.passes[_]);return this.passes=b,this}},x.prototype.destroy=function(){return this.passes.forEach(function(r){r.colorBuffer.destroy(),r.positionBuffer.destroy(),r.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(r,n,i){"use strict";function a(r,n){if(r){if("string"==typeof r)return o(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);return"Object"===i&&r.constructor&&(i=r.constructor.name),"Map"===i||"Set"===i?Array.from(r):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(r,n):void 0}}function o(r,n){(null==n||n>r.length)&&(n=r.length);for(var i=0,a=Array(n);i<n;i++)a[i]=r[i];return a}var s=i(25075),l=i(21527),u=i(6475),c=i(88294),f=i(56131),h=i(56068),p=i(71299),d=i(93447),v=i(30120),g=i(62683),y=i(57060),m=i(18863);function x(r,n){var i=this;if(!(this instanceof x))return new x(r,n);"function"==typeof r?(n||(n={}),n.regl=r):(n=r,r=null),n&&n.length&&(n.positions=n);var a,o=(r=n.regl)._gl,s=[];this.tooManyColors=g,a=r.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),f(this,{regl:r,gl:o,groups:[],markerCache:[null],markerTextures:[null],palette:s,paletteIds:{},paletteTexture:a,maxColors:255,maxSize:100,canvas:o.canvas}),this.update(n);var l={uniforms:{constPointSize:!!n.constPointSize,opacity:r.prop("opacity"),paletteSize:function(r,n){return[i.tooManyColors?0:255,a.height]},pixelRatio:r.context("pixelRatio"),scale:r.prop("scale"),scaleFract:r.prop("scaleFract"),translate:r.prop("translate"),translateFract:r.prop("translateFract"),markerTexture:r.prop("markerTexture"),paletteTexture:a},attributes:{x:function(r,n){return n.xAttr||{buffer:n.positionBuffer,stride:8,offset:0}},y:function(r,n){return n.yAttr||{buffer:n.positionBuffer,stride:8,offset:4}},xFract:function(r,n){return n.xAttr?{constant:[0,0]}:{buffer:n.positionFractBuffer,stride:8,offset:0}},yFract:function(r,n){return n.yAttr?{constant:[0,0]}:{buffer:n.positionFractBuffer,stride:8,offset:4}},size:function(r,n){return n.size.length?{buffer:n.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*n.size/i.maxSize)]}},borderSize:function(r,n){return n.borderSize.length?{buffer:n.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*n.borderSize/i.maxSize)]}},colorId:function(r,n){return n.color.length?{buffer:n.colorBuffer,stride:i.tooManyColors?8:4,offset:0}:{constant:i.tooManyColors?s.slice(4*n.color,4*n.color+4):[n.color]}},borderColorId:function(r,n){return n.borderColor.length?{buffer:n.colorBuffer,stride:i.tooManyColors?8:4,offset:i.tooManyColors?4:2}:{constant:i.tooManyColors?s.slice(4*n.borderColor,4*n.borderColor+4):[n.borderColor]}},isActive:function(r,n){return!0===n.activation?{constant:[1]}:n.activation?n.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:r.prop("elements"),count:r.prop("count"),offset:r.prop("offset"),primitive:"points"},u=f({},l);u.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),u.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),this.drawMarker=r(u);var c=f({},l);c.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n	float t;\n	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n	return t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n	float radius, alpha = 1.0, delta = fragWidth;\n\n	radius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n	if (radius > 1.0 + delta) {\n		discard;\n	}\n\n	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n	float borderRadius = fragBorderRadius;\n	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n	vec4 color = mix(fragColor, fragBorderColor, ratio);\n	color.a *= alpha * opacity;\n	gl_FragColor = color;\n}\n"]),c.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\n// `invariant` effectively turns off optimizations for the position.\n// We need this because -fast-math on M1 Macs is re-ordering\n// floating point operations in a way that causes floating point\n// precision limits to put points in the wrong locations.\ninvariant gl_Position;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),g&&(c.frag=c.frag.replace("smoothstep","smoothStep"),u.frag=u.frag.replace("smoothstep","smoothStep")),this.drawCircle=r(c)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var r=this,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=this.groups;if(1===i.length&&Array.isArray(i[0])&&(null===i[0][0]||Array.isArray(i[0][0]))&&(i=i[0]),this.regl._refresh(),i.length)for(var s=0;s<i.length;s++)this.drawItem(s,i[s]);else o.forEach(function(n,i){r.drawItem(i)});return this},x.prototype.drawItem=function(r,n){var i,s=this.groups,l=s[r];if("number"==typeof n&&(r=n,l=s[n],n=null),l&&l.count&&l.opacity){l.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,l,n));for(var u=[],c=1;c<l.activation.length;c++)l.activation[c]&&(!0===l.activation[c]||l.activation[c].data.length)&&u.push.apply(u,function(r){if(Array.isArray(r))return o(r)}(i=this.getMarkerDrawOptions(c,l,n))||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(i)||a(i)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());u.length&&this.drawMarker(u)}},x.prototype.getMarkerDrawOptions=function(r,n,i){var o=n.range,s=n.tree,l=n.viewport,u=n.activation,c=n.selectionBuffer,h=n.count;if(this.regl,!s)return i?[f({},n,{markerTexture:this.markerTextures[r],activation:u[r],count:i.length,elements:i,offset:0})]:[f({},n,{markerTexture:this.markerTextures[r],activation:u[r],offset:0})];var p=[],d=s.range(o,{lod:!0,px:[(o[2]-o[0])/l.width,(o[3]-o[1])/l.height]});if(i){for(var v=u[r].data,g=new Uint8Array(h),y=0;y<i.length;y++){var m=i[y];g[m]=v?v[m]:1}c.subdata(g)}for(var x=d.length;x--;){var b,_=function(r){if(Array.isArray(r))return r}(b=d[x])||function(r,n){var i=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=i){var a,o,s,l,u=[],c=!0,f=!1;try{for(s=(i=i.call(r)).next;!(c=(a=s.call(i)).done)&&(u.push(a.value),2!==u.length);c=!0);}catch(r){f=!0,o=r}finally{try{if(!c&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw o}}return u}}(b,2)||a(b,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=_[0],T=_[1];p.push(f({},n,{markerTexture:this.markerTextures[r],activation:i?c:u[r],offset:w,count:T-w}))}return p},x.prototype.update=function(){for(var r=this,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];if(i.length){1===i.length&&Array.isArray(i[0])&&(i=i[0]);var o=this.groups,s=this.gl,u=this.regl,h=this.maxSize,g=this.maxColors,b=this.palette;this.groups=o=i.map(function(n,i){var a=o[i];if(void 0===n)return a;null===n?n={positions:null}:"function"==typeof n?n={ondraw:n}:"number"==typeof n[0]&&(n={positions:n}),null===(n=p(n,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(n.positions=[]),null!=n.tooManyColors&&(r.tooManyColors=n.tooManyColors),a||(o[i]=a={id:i,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:u.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},n=f({},x.defaults,n)),!n.positions||"marker"in n||(n.marker=a.marker,delete a.marker),!n.marker||"positions"in n||(n.positions=a.positions,delete a.positions);var _=0,w=0;if(d(a,n,[{snap:!0,size:function(r,n){return null==r&&(r=x.defaults.size),_+=r&&r.length?1:0,r},borderSize:function(r,n){return null==r&&(r=x.defaults.borderSize),_+=r&&r.length?1:0,r},opacity:parseFloat,color:function(n,i){return null==n&&(n=x.defaults.color),n=r.updateColor(n),w++,n},borderColor:function(n,i){return null==n&&(n=x.defaults.borderColor),n=r.updateColor(n),w++,n},bounds:function(r,n,i){return"range"in i||(i.range=null),r},positions:function(r,n,i){var a=n.snap,o=n.positionBuffer,s=n.positionFractBuffer,f=n.selectionBuffer;if(r.x||r.y)return r.x.length?n.xAttr={buffer:u.buffer(r.x),offset:0,stride:4,count:r.x.length}:n.xAttr={buffer:r.x.buffer,offset:4*r.x.offset||0,stride:4*(r.x.stride||1),count:r.x.count},r.y.length?n.yAttr={buffer:u.buffer(r.y),offset:0,stride:4,count:r.y.length}:n.yAttr={buffer:r.y.buffer,offset:4*r.y.offset||0,stride:4*(r.y.stride||1),count:r.y.count},n.count=Math.max(n.xAttr.count,n.yAttr.count),r;r=v(r,"float64");var h=n.count=Math.floor(r.length/2),p=n.bounds=h?l(r,2):null;if(i.range||n.range||(delete n.range,i.range=p),i.marker||n.marker||(delete n.marker,i.marker=null),a&&(!0===a||h>a)?n.tree=c(r,{bounds:p}):a&&a.length&&(n.tree=a),n.tree){var d={primitive:"points",usage:"static",data:n.tree,type:"uint32"};n.elements?n.elements(d):n.elements=u.elements(d)}var g=y.float32(r);return o({data:g,usage:"dynamic"}),s({data:y.fract32(r,g),usage:"dynamic"}),f({data:new Uint8Array(h),type:"uint8",usage:"stream"}),r}},{marker:function(n,i,a){var o=i.activation;if(o.forEach(function(r){return r&&r.destroy&&r.destroy()}),o.length=0,n&&"number"!=typeof n[0]){for(var s=[],l=0,c=Math.min(n.length,i.count);l<c;l++){var f=r.addMarker(n[l]);s[f]||(s[f]=new Uint8Array(i.count)),s[f][l]=1}for(var h=0;h<s.length;h++)if(s[h]){var p={data:s[h],type:"uint8",usage:"static"};o[h]?o[h](p):o[h]=u.buffer(p),o[h].data=s[h]}}else o[r.addMarker(n)]=!0;return n},range:function(r,n,i){var a=n.bounds;if(a)return r||(r=a),n.scale=[1/(r[2]-r[0]),1/(r[3]-r[1])],n.translate=[-r[0],-r[1]],n.scaleFract=y.fract(n.scale),n.translateFract=y.fract(n.translate),r},viewport:function(r){return m(r||[s.drawingBufferWidth,s.drawingBufferHeight])}}]),_){var T=a,k=T.count,A=T.size,M=T.borderSize,S=T.sizeBuffer,E=new Uint8Array(2*k);if(A.length||M.length)for(var L=0;L<k;L++)E[2*L]=Math.round(255*(null==A[L]?A:A[L])/h),E[2*L+1]=Math.round(255*(null==M[L]?M:M[L])/h);S({data:E,usage:"dynamic"})}if(w){var C,O=a,P=O.count,I=O.color,D=O.borderColor,z=O.colorBuffer;if(r.tooManyColors){if(I.length||D.length){C=new Uint8Array(8*P);for(var R=0;R<P;R++){var F=I[R];C[8*R]=b[4*F],C[8*R+1]=b[4*F+1],C[8*R+2]=b[4*F+2],C[8*R+3]=b[4*F+3];var B=D[R];C[8*R+4]=b[4*B],C[8*R+5]=b[4*B+1],C[8*R+6]=b[4*B+2],C[8*R+7]=b[4*B+3]}}}else if(I.length||D.length){C=new Uint8Array(4*P+2);for(var N=0;N<P;N++)null!=I[N]&&(C[4*N]=I[N]%g,C[4*N+1]=Math.floor(I[N]/g)),null!=D[N]&&(C[4*N+2]=D[N]%g,C[4*N+3]=Math.floor(D[N]/g))}z({data:C||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return a})}},x.prototype.addMarker=function(r){var n,i=this.markerTextures,a=this.regl,o=this.markerCache,s=null==r?0:o.indexOf(r);if(s>=0)return s;if(r instanceof Uint8Array||r instanceof Uint8ClampedArray)n=r;else{n=new Uint8Array(r.length);for(var l=0,u=r.length;l<u;l++)n[l]=255*r[l]}var c=Math.floor(Math.sqrt(n.length));return s=i.length,o.push(r),i.push(a.texture({channels:1,data:n,radius:c,mag:"linear",min:"linear"})),s},x.prototype.updateColor=function(r){var n=this.paletteIds,i=this.palette,a=this.maxColors;Array.isArray(r)||(r=[r]);var o=[];if("number"==typeof r[0]){var l=[];if(Array.isArray(r))for(var c=0;c<r.length;c+=4)l.push(r.slice(c,c+4));else for(var f=0;f<r.length;f+=4)l.push(r.subarray(f,f+4));r=l}for(var h=0;h<r.length;h++){var p=r[h],d=u(p=s(p,"uint8"),!1);if(null==n[d]){var v=i.length;n[d]=Math.floor(v/4),i[v]=p[0],i[v+1]=p[1],i[v+2]=p[2],i[v+3]=p[3]}o[h]=n[d]}return!this.tooManyColors&&i.length>4*a&&(this.tooManyColors=!0),this.updatePalette(i),1===o.length?o[0]:o},x.prototype.updatePalette=function(r){if(!this.tooManyColors){var n=this.maxColors,i=this.paletteTexture,a=Math.ceil(.25*r.length/n);if(a>1)for(var o=.25*(r=r.slice()).length%n;o<a*n;o++)r.push(0,0,0,0);i.height<a&&i.resize(n,a),i.subimage({width:Math.min(.25*r.length,n),height:a,data:r},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(r){r.sizeBuffer.destroy(),r.positionBuffer.destroy(),r.positionFractBuffer.destroy(),r.colorBuffer.destroy(),r.activation.forEach(function(r){return r&&r.destroy&&r.destroy()}),r.selectionBuffer.destroy(),r.elements&&r.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(r){return r&&r.destroy&&r.destroy()}),this};var b=i(56131);r.exports=function(r,n){var i=new x(r,n),a=i.render.bind(i);return b(a,{render:a,update:i.update.bind(i),draw:i.draw.bind(i),destroy:i.destroy.bind(i),regl:i.regl,gl:i.gl,canvas:i.gl.canvas,groups:i.groups,markers:i.markerCache,palette:i.palette}),a}},60487:function(r,n,i){"use strict";var a=i(11870),o=i(71299),s=i(21527),l=i(5877),u=i(57471),c=i(18863),f=i(30120);function h(r,n){if(!(this instanceof h))return new h(r,n);this.traces=[],this.passes={},this.regl=r,this.scatter=a(r),this.canvas=this.scatter.canvas}function p(r,n,i){var a,o,s,l,u=r[n],c=r[i];return u.length>2?(u[0],u[2],a=u[1],o=u[3]):u.length?(a=u[0],o=u[1]):(u.x,a=u.y,u.x,u.width,o=u.y+u.height),c.length>2?(s=c[0],l=c[2],c[1],c[3]):c.length?(s=c[0],l=c[1]):(s=c.x,c.y,l=c.x+c.width,c.y,c.height),[s,a,l,o]}function d(r){if("number"==typeof r)return[r,r,r,r];if(2===r.length)return[r[0],r[1],r[0],r[1]];var n=c(r);return[n.x,n.y,n.x+n.width,n.y+n.height]}r.exports=h,h.prototype.render=function(){for(var r=this,n=[],i=arguments.length;i--;)n[i]=arguments[i];return n.length&&this.update.apply(this,n),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=l(function(){r.draw(),r.dirty=!0,r.planned=null})):(this.draw(),this.dirty=!0,l(function(){r.dirty=!1})),this)},h.prototype.update=function(){for(var r,n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length){for(var a=0;a<n.length;a++)this.updateItem(a,n[a]);this.traces=this.traces.filter(Boolean);for(var o=[],s=0,l=0;l<this.traces.length;l++){for(var u=this.traces[l],c=this.traces[l].passes,f=0;f<c.length;f++)o.push(this.passes[c[f]]);u.passOffset=s,s+=u.passes.length}return(r=this.scatter).update.apply(r,o),this}},h.prototype.updateItem=function(r,n){var i=this.regl;if(null===n)return this.traces[r]=null,this;if(!n)return this;var a,l=o(n,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),u=this.traces[r]||(this.traces[r]={id:r,buffer:i.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:c([i._gl.drawingBufferWidth,i._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=l.color&&(u.color=l.color),null!=l.size&&(u.size=l.size),null!=l.marker&&(u.marker=l.marker),null!=l.borderColor&&(u.borderColor=l.borderColor),null!=l.borderSize&&(u.borderSize=l.borderSize),null!=l.opacity&&(u.opacity=l.opacity),l.viewport&&(u.viewport=c(l.viewport)),null!=l.diagonal&&(u.diagonal=l.diagonal),null!=l.upper&&(u.upper=l.upper),null!=l.lower&&(u.lower=l.lower),l.data){u.buffer(f(l.data)),u.columns=l.data.length,u.count=l.data[0].length,u.bounds=[];for(var h=0;h<u.columns;h++)u.bounds[h]=s(l.data[h],1)}l.range&&(u.range=l.range,a=u.range&&"number"!=typeof u.range[0]),l.domain&&(u.domain=l.domain);var v=!1;null!=l.padding&&(Array.isArray(l.padding)&&l.padding.length===u.columns&&"number"==typeof l.padding[l.padding.length-1]?(u.padding=l.padding.map(d),v=!0):u.padding=d(l.padding));var g=u.columns,y=u.count,m=u.viewport.width,x=u.viewport.height,b=u.viewport.x,_=u.viewport.y,w=m/g,T=x/g;u.passes=[];for(var k=0;k<g;k++)for(var A=0;A<g;A++)if((u.diagonal||A!==k)&&(u.upper||!(k>A))&&(u.lower||!(k<A))){var M,S,E,L=(M=u.id,S=k,E=A,(null!=M.id?M.id:M)<<16|(255&S)<<8|255&E),C=this.passes[L]||(this.passes[L]={});if(l.data&&(l.transpose?C.positions={x:{buffer:u.buffer,offset:A,count:y,stride:g},y:{buffer:u.buffer,offset:k,count:y,stride:g}}:C.positions={x:{buffer:u.buffer,offset:A*y,count:y},y:{buffer:u.buffer,offset:k*y,count:y}},C.bounds=p(u.bounds,k,A)),l.domain||l.viewport||l.data){var O=v?p(u.padding,k,A):u.padding;if(u.domain){var P=p(u.domain,k,A),I=P[0],D=P[1],z=P[2],R=P[3];C.viewport=[b+I*m+O[0],_+D*x+O[1],b+z*m-O[2],_+R*x-O[3]]}else C.viewport=[b+A*w+w*O[0],_+k*T+T*O[1],b+(A+1)*w-w*O[2],_+(k+1)*T-T*O[3]]}l.color&&(C.color=u.color),l.size&&(C.size=u.size),l.marker&&(C.marker=u.marker),l.borderSize&&(C.borderSize=u.borderSize),l.borderColor&&(C.borderColor=u.borderColor),l.opacity&&(C.opacity=u.opacity),l.range&&(C.range=a?p(u.range,k,A):u.range||C.bounds),u.passes.push(L)}return this},h.prototype.draw=function(){for(var r,n=[],i=arguments.length;i--;)n[i]=arguments[i];if(n.length){for(var a=[],o=0;o<n.length;o++)if("number"==typeof n[o]){var s=this.traces[n[o]],l=s.passes,c=s.passOffset;a.push.apply(a,u(c,c+l.length))}else if(n[o].length){var f=n[o],h=this.traces[o],p=h.passes,d=h.passOffset;p=p.map(function(r,n){a[d+n]=f})}(r=this.scatter).draw.apply(r,a)}else this.scatter.draw();return this},h.prototype.destroy=function(){return this.traces.forEach(function(r){r.buffer&&r.buffer.destroy&&r.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(r){r.exports=function(){function r(r,n){this.id=z++,this.type=r,this.data=n}function n(r){return"string"==typeof r?r.split():r}function i(r){return"string"==typeof r?document.querySelector(r):r}function a(r,n){for(var i=Array(r),a=0;a<r;++a)i[a]=n(a);return i}function o(r){var n,i;return n=(65535<r)<<4,n|=i=(255<(r>>>=n))<<3,(n|=i=(15<(r>>>=i))<<2)|(i=(3<(r>>>=i))<<1)|r>>>i>>1}function s(){function r(r){t:{for(var n=16;268435456>=n;n*=16)if(r<=n){r=n;break t}r=0}return 0<(n=i[o(r)>>2]).length?n.pop():new ArrayBuffer(r)}function n(r){i[o(r.byteLength)>>2].push(r)}var i=a(8,function(){return[]});return{alloc:r,free:n,allocType:function(n,i){var a=null;switch(n){case 5120:a=new Int8Array(r(i),0,i);break;case 5121:a=new Uint8Array(r(i),0,i);break;case 5122:a=new Int16Array(r(2*i),0,i);break;case 5123:a=new Uint16Array(r(2*i),0,i);break;case 5124:a=new Int32Array(r(4*i),0,i);break;case 5125:a=new Uint32Array(r(4*i),0,i);break;case 5126:a=new Float32Array(r(4*i),0,i);break;default:return null}return a.length!==i?a.subarray(0,i):a},freeType:function(r){n(r.buffer)}}}function l(r){return!!r&&"object"==typeof r&&Array.isArray(r.shape)&&Array.isArray(r.stride)&&"number"==typeof r.offset&&r.shape.length===r.stride.length&&(Array.isArray(r.data)||U(r.data))}function u(r,n,i,a,o,s){for(var l=0;l<n;++l)for(var u=r[l],c=0;c<i;++c)for(var f=u[c],h=0;h<a;++h)o[s++]=f[h]}function c(r){return 0|q[Object.prototype.toString.call(r)]}function f(r,n){for(var i=0;i<n.length;++i)r[i]=n[i]}function h(r,n,i,a,o,s,l){for(var u=0,c=0;c<i;++c)for(var f=0;f<a;++f)r[u++]=n[o*c+s*f+l]}function p(r){for(var n=N.allocType(5123,r.length),i=0;i<r.length;++i)if(isNaN(r[i]))n[i]=65535;else if(1/0===r[i])n[i]=31744;else if(-1/0===r[i])n[i]=64512;else{K[0]=r[i];var a=(s=$[0])>>>31<<15,o=(s<<1>>>24)-127,s=s>>13&1023;n[i]=-24>o?a:-14>o?a+(s+1024>>-14-o):15<o?a+31744:a+(o+15<<10)+s}return n}function d(r){return Array.isArray(r)||U(r)}function v(r){return"[object "+r+"]"}function g(r){return Array.isArray(r)&&(0===r.length||"number"==typeof r[0])}function y(r){return!(!Array.isArray(r)||0===r.length||!d(r[0]))}function m(r){return Object.prototype.toString.call(r)}function x(r){if(!r)return!1;var n=m(r);return 0<=tl.indexOf(n)||g(r)||y(r)||l(r)}function b(r,n){36193===r.type?(r.data=p(n),N.freeType(n)):r.data=n}function _(r,n,i,a,o,s){if(r=void 0!==tc[r]?tc[r]:te[r]*tu[n],s&&(r*=6),o){for(a=0;1<=i;)a+=r*i*i,i/=2;return a}return r*i*a}function w(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function T(r,n){return r>>>n|r<<32-n}function k(r,n){var i=(65535&r)+(65535&n);return(r>>16)+(n>>16)+(i>>16)<<16|65535&i}function A(r){return Array.prototype.slice.call(r)}function M(r){return A(r).join("")}function S(r){return Array.isArray(r)||U(r)||l(r)}function E(r){return r.sort(function(r,n){return"viewport"===r?-1:"viewport"===n?1:r<n?-1:1})}function L(r,n,i,a){this.thisDep=r,this.contextDep=n,this.propDep=i,this.append=a}function C(r){return r&&!(r.thisDep||r.contextDep||r.propDep)}function O(r){return new L(!1,!1,!1,r)}function P(r,n){var i=r.type;if(0===i)return new L(!0,1<=(i=r.data.length),2<=i,n);if(4===i)return new L((i=r.data).thisDep,i.contextDep,i.propDep,n);if(5===i)return new L(!1,!1,!1,n);if(6===i){for(var a=i=!1,o=!1,s=0;s<r.data.length;++s){var l=r.data[s];1===l.type?o=!0:2===l.type?a=!0:3===l.type?i=!0:0===l.type?(i=!0,1<=(l=l.data)&&(a=!0),2<=l&&(o=!0)):4===l.type&&(i=i||l.data.thisDep,a=a||l.data.contextDep,o=o||l.data.propDep)}return new L(i,a,o,n)}return new L(3===i,2===i,1===i,n)}function I(r,n){for(var i=0;i<r.length;++i)if(r[i]===n)return i;return -1}var D=function(r,n){for(var i=Object.keys(n),a=0;a<i.length;++a)r[i[a]]=n[i[a]];return r},z=0,R={DynamicVariable:r,define:function(n,i){return new r(n,"["+(function r(n){if(0===n.length)return[];var i=n.charAt(0),a=n.charAt(n.length-1);if(1<n.length&&i===a&&('"'===i||"'"===i))return['"'+n.substr(1,n.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(i=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(n))return r(n.substr(0,i.index)).concat(r(i[1])).concat(r(n.substr(i.index+i[0].length)));if(1===(i=n.split(".")).length)return['"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(n=[],a=0;a<i.length;++a)n=n.concat(r(i[a]));return n})(i+"").join("][")+"]")},isDynamic:function(n){return"function"==typeof n&&!n._reglType||n instanceof r},unbox:function n(i,a){return"function"==typeof i?new r(0,i):"number"==typeof i||"boolean"==typeof i?new r(5,i):Array.isArray(i)?new r(6,i.map(function(r,i){return n(r,a+"["+i+"]")})):i instanceof r?i:void 0}},F={next:"function"==typeof requestAnimationFrame?function(r){return requestAnimationFrame(r)}:function(r){return setTimeout(r,16)},cancel:"function"==typeof cancelAnimationFrame?function(r){return cancelAnimationFrame(r)}:clearTimeout},B="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},N=s();N.zero=s();var j=function(r,n){var i=1;n.ext_texture_filter_anisotropic&&(i=r.getParameter(34047));var a=1,o=1;n.webgl_draw_buffers&&(a=r.getParameter(34852),o=r.getParameter(36063));var s=!!n.oes_texture_float;if(s){s=r.createTexture(),r.bindTexture(3553,s),r.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var l=r.createFramebuffer();if(r.bindFramebuffer(36160,l),r.framebufferTexture2D(36160,36064,3553,s,0),r.bindTexture(3553,null),36053!==r.checkFramebufferStatus(36160))s=!1;else{r.viewport(0,0,1,1),r.clearColor(1,0,0,1),r.clear(16384);var u=N.allocType(5126,4);r.readPixels(0,0,1,1,6408,5126,u),r.getError()?s=!1:(r.deleteFramebuffer(l),r.deleteTexture(s),s=1===u[0]),N.freeType(u)}}return u=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(u=r.createTexture(),l=N.allocType(5121,36),r.activeTexture(33984),r.bindTexture(34067,u),r.texImage2D(34069,0,6408,3,3,0,6408,5121,l),N.freeType(l),r.bindTexture(34067,null),r.deleteTexture(u),u=!r.getError()),{colorBits:[r.getParameter(3410),r.getParameter(3411),r.getParameter(3412),r.getParameter(3413)],depthBits:r.getParameter(3414),stencilBits:r.getParameter(3415),subpixelBits:r.getParameter(3408),extensions:Object.keys(n).filter(function(r){return!!n[r]}),maxAnisotropic:i,maxDrawbuffers:a,maxColorAttachments:o,pointSizeDims:r.getParameter(33901),lineWidthDims:r.getParameter(33902),maxViewportDims:r.getParameter(3386),maxCombinedTextureUnits:r.getParameter(35661),maxCubeMapSize:r.getParameter(34076),maxRenderbufferSize:r.getParameter(34024),maxTextureUnits:r.getParameter(34930),maxTextureSize:r.getParameter(3379),maxAttributes:r.getParameter(34921),maxVertexUniforms:r.getParameter(36347),maxVertexTextureUnits:r.getParameter(35660),maxVaryingVectors:r.getParameter(36348),maxFragmentUniforms:r.getParameter(36349),glsl:r.getParameter(35724),renderer:r.getParameter(7937),vendor:r.getParameter(7936),version:r.getParameter(7938),readFloat:s,npotTextureCube:u}},U=function(r){return r instanceof Uint8Array||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||r instanceof Float32Array||r instanceof Float64Array||r instanceof Uint8ClampedArray},V=function(r){return Object.keys(r).map(function(n){return r[n]})},H={shape:function(r){for(var n=[];r.length;r=r[0])n.push(r.length);return n},flatten:function(r,n,i,a){var o=1;if(n.length)for(var s=0;s<n.length;++s)o*=n[s];else o=0;switch(i=a||N.allocType(i,o),n.length){case 0:break;case 1:for(a=n[0],n=0;n<a;++n)i[n]=r[n];break;case 2:for(a=n[0],n=n[1],s=o=0;s<a;++s)for(var l=r[s],c=0;c<n;++c)i[o++]=l[c];break;case 3:u(r,n[0],n[1],n[2],i,0);break;default:!function r(n,i,a,o,s){for(var l=1,c=a+1;c<i.length;++c)l*=i[c];var f=i[a];if(4==i.length-a){var h=i[a+1],p=i[a+2];for(i=i[a+3],c=0;c<f;++c)u(n[c],h,p,i,o,s),s+=l}else for(c=0;c<f;++c)r(n[c],i,a+1,o,s),s+=l}(r,n,0,i,0)}return i}},q={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Z={dynamic:35048,stream:35040,static:35044},Y=H.flatten,W=H.shape,X=[];X[5120]=1,X[5122]=2,X[5124]=4,X[5121]=1,X[5123]=2,X[5125]=4,X[5126]=4;var J={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},K=new Float32Array(1),$=new Uint32Array(K.buffer),Q=[9984,9986,9985,9987],tt=[0,6409,6410,6407,6408],te={};te[6409]=te[6406]=te[6402]=1,te[34041]=te[6410]=2,te[6407]=te[35904]=3,te[6408]=te[35906]=4;var tr=v("HTMLCanvasElement"),tn=v("OffscreenCanvas"),ti=v("CanvasRenderingContext2D"),ta=v("ImageBitmap"),to=v("HTMLImageElement"),ts=v("HTMLVideoElement"),tl=Object.keys(q).concat([tr,tn,ti,ta,to,ts]),tu=[];tu[5121]=1,tu[5126]=4,tu[36193]=2,tu[5123]=2,tu[5125]=4;var tc=[];tc[32854]=2,tc[32855]=2,tc[36194]=2,tc[34041]=4,tc[33776]=.5,tc[33777]=.5,tc[33778]=1,tc[33779]=1,tc[35986]=.5,tc[35987]=1,tc[34798]=1,tc[35840]=.5,tc[35841]=.25,tc[35842]=.5,tc[35843]=.25,tc[36196]=.5;var tf=[];tf[32854]=2,tf[32855]=2,tf[36194]=2,tf[33189]=2,tf[36168]=1,tf[34041]=4,tf[35907]=4,tf[34836]=16,tf[34842]=8,tf[34843]=6;var th=function(r,n,i,a,o){function s(r){this.id=f++,this.refCount=1,this.renderbuffer=r,this.format=32854,this.height=this.width=0,o.profile&&(this.stats={size:0})}function l(n){var i=n.renderbuffer;r.bindRenderbuffer(36161,null),r.deleteRenderbuffer(i),n.renderbuffer=null,n.refCount=0,delete h[n.id],a.renderbufferCount--}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};n.ext_srgb&&(u.srgba=35907),n.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843),n.webgl_color_buffer_float&&(u.rgba32f=34836);var c=[];Object.keys(u).forEach(function(r){c[u[r]]=r});var f=0,h={};return s.prototype.decRef=function(){0>=--this.refCount&&l(this)},o.profile&&(a.getTotalRenderbufferSize=function(){var r=0;return Object.keys(h).forEach(function(n){r+=h[n].stats.size}),r}),{create:function(n,i){function l(n,i){var a=0,s=0,h=32854;if("object"==typeof n&&n?("shape"in n?(a=0|(s=n.shape)[0],s=0|s[1]):("radius"in n&&(a=s=0|n.radius),"width"in n&&(a=0|n.width),"height"in n&&(s=0|n.height)),"format"in n&&(h=u[n.format])):"number"==typeof n?(a=0|n,s="number"==typeof i?0|i:a):n||(a=s=1),a!==f.width||s!==f.height||h!==f.format)return l.width=f.width=a,l.height=f.height=s,f.format=h,r.bindRenderbuffer(36161,f.renderbuffer),r.renderbufferStorage(36161,h,a,s),o.profile&&(f.stats.size=tf[f.format]*f.width*f.height),l.format=c[f.format],l}var f=new s(r.createRenderbuffer());return h[f.id]=f,a.renderbufferCount++,l(n,i),l.resize=function(n,i){var a=0|n,s=0|i||a;return a===f.width&&s===f.height||(l.width=f.width=a,l.height=f.height=s,r.bindRenderbuffer(36161,f.renderbuffer),r.renderbufferStorage(36161,f.format,a,s),o.profile&&(f.stats.size=tf[f.format]*f.width*f.height)),l},l._reglType="renderbuffer",l._renderbuffer=f,o.profile&&(l.stats=f.stats),l.destroy=function(){f.decRef()},l},clear:function(){V(h).forEach(l)},restore:function(){V(h).forEach(function(n){n.renderbuffer=r.createRenderbuffer(),r.bindRenderbuffer(36161,n.renderbuffer),r.renderbufferStorage(36161,n.format,n.width,n.height)}),r.bindRenderbuffer(36161,null)}}},tp=[];tp[6408]=4,tp[6407]=3;var td=[];td[5121]=1,td[5126]=4,td[36193]=2;var tv=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],tg=["x","y","z","w"],ty="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),tm={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},tx={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},tb={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},t_={cw:2304,ccw:2305},tw=new L(!1,!1,!1,function(){});return function(r){function o(){if(0===tX.length)tI&&tI.update(),tQ=null;else{tQ=F.next(o),tc();for(var r=tX.length-1;0<=r;--r){var n=tX[r];n&&n(tF,null,0)}tM.flush(),tI&&tI.update()}}function s(){!tQ&&0<tX.length&&(tQ=F.next(o))}function u(){tQ&&(F.cancel(o),tQ=null)}function v(r){r.preventDefault(),u(),tJ.forEach(function(r){r()})}function z(r){tM.getError(),tE.restore(),tV.restore(),tN.restore(),tH.restore(),tq.restore(),tG.restore(),tU.restore(),tI&&tI.restore(),tZ.procs.refresh(),s(),tK.forEach(function(r){r()})}function K(r){function n(r,n){var i={},a={};return Object.keys(r).forEach(function(o){var s=r[o];if(R.isDynamic(s))a[o]=R.unbox(s,o);else{if(n&&Array.isArray(s)){for(var l=0;l<s.length;++l)if(R.isDynamic(s[l]))return void(a[o]=R.unbox(s,o))}i[o]=s}}),{dynamic:a,static:i}}var i=n(r.context||{},!0),a=n(r.uniforms||{},!0),o=n(r.attributes||{},!1);r=n(function(r){function n(r){if(r in i){var n=i[r];delete i[r],Object.keys(n).forEach(function(a){i[r+"."+a]=n[a]})}}var i=D({},r);return delete i.uniforms,delete i.attributes,delete i.context,delete i.vao,"stencil"in i&&i.stencil.op&&(i.stencil.opBack=i.stencil.opFront=i.stencil.op,delete i.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),"vao"in r&&(i.vao=r.vao),i}(r),!1);var s={gpuTime:0,cpuTime:0,count:0},l=tZ.compile(r,o,a,i,s),u=l.draw,c=l.batch,f=l.scope,h=[];return D(function(r,n){var i;if("function"==typeof r)return f.call(this,null,r,0);if("function"==typeof n){if("number"==typeof r)for(i=0;i<r;++i)f.call(this,null,n,i);else{if(!Array.isArray(r))return f.call(this,r,n,0);for(i=0;i<r.length;++i)f.call(this,r[i],n,i)}}else if("number"==typeof r){if(0<r)return c.call(this,function(r){for(;h.length<r;)h.push(null);return h}(0|r),0|r)}else{if(!Array.isArray(r))return u.call(this,r);if(r.length)return c.call(this,r,r.length)}},{stats:s,destroy:function(){l.destroy()}})}function $(r,n){var i=0;tZ.procs.poll();var a=n.color;a&&(tM.clearColor(+a[0]||0,+a[1]||0,+a[2]||0,+a[3]||0),i|=16384),"depth"in n&&(tM.clearDepth(+n.depth),i|=256),"stencil"in n&&(tM.clearStencil(0|n.stencil),i|=1024),tM.clear(i)}function tl(r){return tX.push(r),s(),{cancel:function(){var n=I(tX,r);tX[n]=function r(){var n=I(tX,r);tX[n]=tX[tX.length-1],--tX.length,0>=tX.length&&u()}}}}function tu(){var r=tY.viewport,n=tY.scissor_box;r[0]=r[1]=n[0]=n[1]=0,tF.viewportWidth=tF.framebufferWidth=tF.drawingBufferWidth=r[2]=n[2]=tM.drawingBufferWidth,tF.viewportHeight=tF.framebufferHeight=tF.drawingBufferHeight=r[3]=n[3]=tM.drawingBufferHeight}function tc(){tF.tick+=1,tF.time=tT(),tu(),tZ.procs.poll()}function tf(){tH.refresh(),tu(),tZ.procs.refresh(),tI&&tI.update()}function tT(){return(B()-tD)/1e3}if(!(r=function(r){var a,o,s,l,u=r||{};r={};var c=[],f=[],h="undefined"==typeof window?1:window.devicePixelRatio,p=!1,d={},v=function(r){},g=function(){};if("string"==typeof u?a=document.querySelector(u):"object"==typeof u&&("string"==typeof u.nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?a=u:"function"==typeof u.drawArrays||"function"==typeof u.drawElements?s=(l=u).canvas:("gl"in u?l=u.gl:"canvas"in u?s=i(u.canvas):"container"in u&&(o=i(u.container)),"attributes"in u&&(r=u.attributes),"extensions"in u&&(c=n(u.extensions)),"optionalExtensions"in u&&(f=n(u.optionalExtensions)),"onDone"in u&&(v=u.onDone),"profile"in u&&(p=!!u.profile),"pixelRatio"in u&&(h=+u.pixelRatio),"cachedCode"in u&&(d=u.cachedCode))),a&&("canvas"===a.nodeName.toLowerCase()?s=a:o=a),!l){if(!s){if(!(a=function(r,n,i){function a(){var n=window.innerWidth,a=window.innerHeight;r!==document.body&&(n=(a=s.getBoundingClientRect()).right-a.left,a=a.bottom-a.top),s.width=i*n,s.height=i*a}var o,s=document.createElement("canvas");return D(s.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),r.appendChild(s),r===document.body&&(s.style.position="absolute",D(r.style,{margin:0,padding:0})),r!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver(function(){setTimeout(a)})).observe(r):window.addEventListener("resize",a,!1),a(),{canvas:s,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),r.removeChild(s)}}}(o||document.body,0,h)))return null;s=a.canvas,g=a.onDestroy}void 0===r.premultipliedAlpha&&(r.premultipliedAlpha=!0),l=function(r,n){function i(i){try{return r.getContext(i,n)}catch(r){return null}}return i("webgl")||i("experimental-webgl")||i("webgl-experimental")}(s,r)}return l?{gl:l,canvas:s,container:o,extensions:c,optionalExtensions:f,pixelRatio:h,profile:p,cachedCode:d,onDone:v,onDestroy:g}:(g(),v("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(r)))return null;var tk,tA,tM=r.gl,tS=tM.getContextAttributes();tM.isContextLost();var tE=function(r,n){function i(n){var i;n=n.toLowerCase();try{i=a[n]=r.getExtension(n)}catch(r){}return!!i}for(var a={},o=0;o<n.extensions.length;++o){var s=n.extensions[o];if(!i(s))return n.onDestroy(),n.onDone('"'+s+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return n.optionalExtensions.forEach(i),{extensions:a,restore:function(){Object.keys(a).forEach(function(r){if(a[r]&&!i(r))throw Error("(regl): error restoring extension "+r)})}}}(tM,r);if(!tE)return null;var tL=(tk={"":0},tA=[""],{id:function(r){var n=tk[r];return n||(n=tk[r]=tA.length,tA.push(r),n)},str:function(r){return tA[r]}}),tC={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},tO=r.cachedCode||{},tP=tE.extensions,tI=function(r,n){function i(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function a(r,n,a){var o=l.pop()||new i;o.startQueryIndex=r,o.endQueryIndex=n,o.sum=0,o.stats=a,u.push(o)}if(!n.ext_disjoint_timer_query)return null;var o=[],s=[],l=[],u=[],c=[],f=[];return{beginQuery:function(r){var i=o.pop()||n.ext_disjoint_timer_query.createQueryEXT();n.ext_disjoint_timer_query.beginQueryEXT(35007,i),s.push(i),a(s.length-1,s.length,r)},endQuery:function(){n.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:a,update:function(){var r,i;if(0!==(r=s.length)){f.length=Math.max(f.length,r+1),c.length=Math.max(c.length,r+1),c[0]=0;var a=f[0]=0;for(i=r=0;i<s.length;++i){var h=s[i];n.ext_disjoint_timer_query.getQueryObjectEXT(h,34919)?(a+=n.ext_disjoint_timer_query.getQueryObjectEXT(h,34918),o.push(h)):s[r++]=h,c[i+1]=a,f[i+1]=r}for(s.length=r,i=r=0;i<u.length;++i){var p=(a=u[i]).startQueryIndex;h=a.endQueryIndex,a.sum+=c[h]-c[p],p=f[p],(h=f[h])===p?(a.stats.gpuTime+=a.sum/1e6,l.push(a)):(a.startQueryIndex=p,a.endQueryIndex=h,u[r++]=a)}u.length=r}},getNumPendingQueries:function(){return s.length},clear:function(){o.push.apply(o,s);for(var r=0;r<o.length;r++)n.ext_disjoint_timer_query.deleteQueryEXT(o[r]);s.length=0,o.length=0},restore:function(){s.length=0,o.length=0}}}(0,tP),tD=B(),tz=tM.drawingBufferWidth,tR=tM.drawingBufferHeight,tF={tick:0,time:0,viewportWidth:tz,viewportHeight:tR,framebufferWidth:tz,framebufferHeight:tR,drawingBufferWidth:tz,drawingBufferHeight:tR,pixelRatio:r.pixelRatio},tB=(tz={elements:null,primitive:4,count:-1,offset:0,instances:-1},j(tM,tP)),tN=function(r,n,i,a){function o(n){this.id=d++,this.buffer=r.createBuffer(),this.type=n,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,i.profile&&(this.stats={size:0})}function s(n,i,a){n.byteLength=i.byteLength,r.bufferData(n.type,i,a)}function u(r,n,i,a,o,u){if(r.usage=i,Array.isArray(n)){if(r.dtype=a||5126,0<n.length){if(Array.isArray(n[0])){o=W(n);for(var p=a=1;p<o.length;++p)a*=o[p];r.dimension=a,s(r,n=Y(n,o,r.dtype),i),u?r.persistentData=n:N.freeType(n)}else"number"==typeof n[0]?(r.dimension=o,f(o=N.allocType(r.dtype,n.length),n),s(r,o,i),u?r.persistentData=o:N.freeType(o)):U(n[0])&&(r.dimension=n[0].length,r.dtype=a||c(n[0])||5126,s(r,n=Y(n,[n.length,n[0].length],r.dtype),i),u?r.persistentData=n:N.freeType(n))}}else if(U(n))r.dtype=a||c(n),r.dimension=o,s(r,n,i),u&&(r.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(l(n)){o=n.shape;var d=n.stride,v=(p=n.offset,0),g=0,y=0,m=0;1===o.length?(v=o[0],g=1,y=d[0],m=0):2===o.length&&(v=o[0],g=o[1],y=d[0],m=d[1]),r.dtype=a||c(n.data)||5126,r.dimension=g,h(o=N.allocType(r.dtype,v*g),n.data,v,g,y,m,p),s(r,o,i),u?r.persistentData=o:N.freeType(o)}else n instanceof ArrayBuffer&&(r.dtype=5121,r.dimension=o,s(r,n,i),u&&(r.persistentData=new Uint8Array(new Uint8Array(n))))}function p(i){n.bufferCount--,a(i),r.deleteBuffer(i.buffer),i.buffer=null,delete v[i.id]}var d=0,v={};o.prototype.bind=function(){r.bindBuffer(this.type,this.buffer)},o.prototype.destroy=function(){p(this)};var g=[];return i.profile&&(n.getTotalBufferSize=function(){var r=0;return Object.keys(v).forEach(function(n){r+=v[n].stats.size}),r}),{create:function(a,s,d,g){function y(n){var a=35044,o=null,s=0,c=0,f=1;return Array.isArray(n)||U(n)||l(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?s=0|n:n&&("data"in n&&(o=n.data),"usage"in n&&(a=Z[n.usage]),"type"in n&&(c=G[n.type]),"dimension"in n&&(f=0|n.dimension),"length"in n&&(s=0|n.length)),m.bind(),o?u(m,o,a,c,f,g):(s&&r.bufferData(m.type,s,a),m.dtype=c||5121,m.usage=a,m.dimension=f,m.byteLength=s),i.profile&&(m.stats.size=m.byteLength*X[m.dtype]),y}n.bufferCount++;var m=new o(s);return v[m.id]=m,d||y(a),y._reglType="buffer",y._buffer=m,y.subdata=function(n,i){var a,o=0|(i||0);if(m.bind(),U(n)||n instanceof ArrayBuffer)r.bufferSubData(m.type,o,n);else if(Array.isArray(n)){if(0<n.length){if("number"==typeof n[0]){var s=N.allocType(m.dtype,n.length);f(s,n),r.bufferSubData(m.type,o,s),N.freeType(s)}else(Array.isArray(n[0])||U(n[0]))&&(a=W(n),s=Y(n,a,m.dtype),r.bufferSubData(m.type,o,s),N.freeType(s))}}else if(l(n)){a=n.shape;var u=n.stride,p=s=0,d=0,v=0;1===a.length?(s=a[0],p=1,d=u[0],v=0):2===a.length&&(s=a[0],p=a[1],d=u[0],v=u[1]),a=Array.isArray(n.data)?m.dtype:c(n.data),h(a=N.allocType(a,s*p),n.data,s,p,d,v,n.offset),r.bufferSubData(m.type,o,a),N.freeType(a)}return y},i.profile&&(y.stats=m.stats),y.destroy=function(){p(m)},y},createStream:function(r,n){var i=g.pop();return i||(i=new o(r)),i.bind(),u(i,n,35040,0,1,!1),i},destroyStream:function(r){g.push(r)},clear:function(){V(v).forEach(p),g.forEach(p)},getBuffer:function(r){return r&&r._buffer instanceof o?r._buffer:null},restore:function(){V(v).forEach(function(n){n.buffer=r.createBuffer(),r.bindBuffer(n.type,n.buffer),r.bufferData(n.type,n.persistentData||n.byteLength,n.usage)})},_initBuffer:u}}(tM,tC,r,function(r){return tU.destroyBuffer(r)}),tj=function(r,n,i,a){function o(r){this.id=f++,c[this.id]=this,this.buffer=r,this.primType=4,this.type=this.vertCount=0}function s(a,o,s,u,c,f,h){var p;if(a.buffer.bind(),o?((p=h)||U(o)&&(!l(o)||U(o.data))||(p=n.oes_element_index_uint?5125:5123),i._initBuffer(a.buffer,o,s,p,3)):(r.bufferData(34963,f,s),a.buffer.dtype=p||5121,a.buffer.usage=s,a.buffer.dimension=3,a.buffer.byteLength=f),p=h,!h){switch(a.buffer.dtype){case 5121:case 5120:p=5121;break;case 5123:case 5122:p=5123;break;case 5125:case 5124:p=5125}a.buffer.dtype=p}a.type=p,0>(o=c)&&(o=a.buffer.byteLength,5123===p?o>>=1:5125===p&&(o>>=2)),a.vertCount=o,o=u,0>u&&(o=4,1===(u=a.buffer.dimension)&&(o=0),2===u&&(o=1),3===u&&(o=4)),a.primType=o}function u(r){a.elementsCount--,delete c[r.id],r.buffer.destroy(),r.buffer=null}var c={},f=0,h={uint8:5121,uint16:5123};n.oes_element_index_uint&&(h.uint32=5125),o.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:function(r,n){function c(r){if(r){if("number"==typeof r)f(r),p.primType=4,p.vertCount=0|r,p.type=5121;else{var n=null,i=35044,a=-1,o=-1,u=0,d=0;Array.isArray(r)||U(r)||l(r)?n=r:("data"in r&&(n=r.data),"usage"in r&&(i=Z[r.usage]),"primitive"in r&&(a=J[r.primitive]),"count"in r&&(o=0|r.count),"type"in r&&(d=h[r.type]),"length"in r?u=0|r.length:(u=o,5123===d||5122===d?u*=2:5125!==d&&5124!==d||(u*=4))),s(p,n,i,a,o,u,d)}}else f(),p.primType=4,p.vertCount=0,p.type=5121;return c}var f=i.create(null,34963,!0),p=new o(f._buffer);return a.elementsCount++,c(r),c._reglType="elements",c._elements=p,c.subdata=function(r,n){return f.subdata(r,n),c},c.destroy=function(){u(p)},c},createStream:function(r){var n=p.pop();return n||(n=new o(i.create(null,34963,!0,!1)._buffer)),s(n,r,35040,-1,-1,0,0),n},destroyStream:function(r){p.push(r)},getElements:function(r){return"function"==typeof r&&r._elements instanceof o?r._elements:null},clear:function(){V(c).forEach(u)}}}(tM,tP,tN,tC),tU=function(r,n,i,a,o,s,u){function c(){this.id=++p,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var r=n.oes_vertex_array_object;this.vao=r?r.createVertexArrayOES():null,d[this.id]=this,this.buffers=[]}var f=i.maxAttributes,h=Array(f);for(i=0;i<f;++i)h[i]=new w;var p=0,d={},v={Record:w,scope:{},state:h,currentVAO:null,targetVAO:null,restore:n.oes_vertex_array_object?function(){n.oes_vertex_array_object&&V(d).forEach(function(r){r.refresh()})}:function(){},createVAO:function(r){function n(r){Array.isArray(r)?(c=r,i.elements&&i.ownsElements&&i.elements.destroy(),i.elements=null,i.ownsElements=!1,i.offset=0,i.count=0,i.instances=-1,i.primitive=4):(r.elements?(c=r.elements,i.ownsElements?("function"==typeof c&&"elements"===c._reglType?i.elements.destroy():i.elements(c),i.ownsElements=!1):s.getElements(r.elements)?(i.elements=r.elements,i.ownsElements=!1):(i.elements=s.create(r.elements),i.ownsElements=!0)):(i.elements=null,i.ownsElements=!1),c=r.attributes,i.offset=0,i.count=-1,i.instances=-1,i.primitive=4,i.elements&&(i.count=i.elements._elements.vertCount,i.primitive=i.elements._elements.primType),"offset"in r&&(i.offset=0|r.offset),"count"in r&&(i.count=0|r.count),"instances"in r&&(i.instances=0|r.instances),"primitive"in r&&(i.primitive=J[r.primitive])),r={};var a=i.attributes;a.length=c.length;for(var u=0;u<c.length;++u){var c,f,h=c[u],p=a[u]=new w,d=h.data||h;Array.isArray(d)||U(d)||l(d)?(i.buffers[u]&&(f=i.buffers[u],U(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),i.buffers[u]=null)),i.buffers[u]||(f=i.buffers[u]=o.create(h,34962,!1,!0)),p.buffer=o.getBuffer(f),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1,r[u]=1):o.getBuffer(h)?(p.buffer=o.getBuffer(h),p.size=0|p.buffer.dimension,p.normalized=!1,p.type=p.buffer.dtype,p.offset=0,p.stride=0,p.divisor=0,p.state=1):o.getBuffer(h.buffer)?(p.buffer=o.getBuffer(h.buffer),p.size=0|(+h.size||p.buffer.dimension),p.normalized=!!h.normalized,p.type="type"in h?G[h.type]:p.buffer.dtype,p.offset=0|(h.offset||0),p.stride=0|(h.stride||0),p.divisor=0|(h.divisor||0),p.state=1):"x"in h&&(p.x=+h.x||0,p.y=+h.y||0,p.z=+h.z||0,p.w=+h.w||0,p.state=2)}for(f=0;f<i.buffers.length;++f)!r[f]&&i.buffers[f]&&(i.buffers[f].destroy(),i.buffers[f]=null);return i.refresh(),n}var i=new c;return a.vaoCount+=1,n.destroy=function(){for(var r=0;r<i.buffers.length;++r)i.buffers[r]&&i.buffers[r].destroy();i.buffers.length=0,i.ownsElements&&(i.elements.destroy(),i.elements=null,i.ownsElements=!1),i.destroy()},n._vao=i,n._reglType="vao",n(r)},getVAO:function(r){return"function"==typeof r&&r._vao?r._vao:null},destroyBuffer:function(n){for(var i=0;i<h.length;++i){var a=h[i];a.buffer===n&&(r.disableVertexAttribArray(i),a.buffer=null)}},setVAO:n.oes_vertex_array_object?function(r){if(r!==v.currentVAO){var i=n.oes_vertex_array_object;r?i.bindVertexArrayOES(r.vao):i.bindVertexArrayOES(null),v.currentVAO=r}}:function(i){if(i!==v.currentVAO){if(i)i.bindAttrs();else{for(var a=n.angle_instanced_arrays,o=0;o<h.length;++o){var s=h[o];s.buffer?(r.enableVertexAttribArray(o),s.buffer.bind(),r.vertexAttribPointer(o,s.size,s.type,s.normalized,s.stride,s.offfset),a&&s.divisor&&a.vertexAttribDivisorANGLE(o,s.divisor)):(r.disableVertexAttribArray(o),r.vertexAttrib4f(o,s.x,s.y,s.z,s.w))}u.elements?r.bindBuffer(34963,u.elements.buffer.buffer):r.bindBuffer(34963,null)}v.currentVAO=i}},clear:n.oes_vertex_array_object?function(){V(d).forEach(function(r){r.destroy()})}:function(){}};return c.prototype.bindAttrs=function(){for(var i=n.angle_instanced_arrays,a=this.attributes,o=0;o<a.length;++o){var l=a[o];l.buffer?(r.enableVertexAttribArray(o),r.bindBuffer(34962,l.buffer.buffer),r.vertexAttribPointer(o,l.size,l.type,l.normalized,l.stride,l.offset),i&&l.divisor&&i.vertexAttribDivisorANGLE(o,l.divisor)):(r.disableVertexAttribArray(o),r.vertexAttrib4f(o,l.x,l.y,l.z,l.w))}for(i=a.length;i<f;++i)r.disableVertexAttribArray(i);(i=s.getElements(this.elements))?r.bindBuffer(34963,i.buffer.buffer):r.bindBuffer(34963,null)},c.prototype.refresh=function(){var r=n.oes_vertex_array_object;r&&(r.bindVertexArrayOES(this.vao),this.bindAttrs(),v.currentVAO=null,r.bindVertexArrayOES(null))},c.prototype.destroy=function(){if(this.vao){var r=n.oes_vertex_array_object;this===v.currentVAO&&(v.currentVAO=null,r.bindVertexArrayOES(null)),r.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),d[this.id]&&(delete d[this.id],--a.vaoCount)},v}(tM,tP,tB,tC,tN,tj,tz),tV=function(r,n,i,a){function o(r,n,i,a){this.name=r,this.id=n,this.location=i,this.info=a}function s(r,n){for(var i=0;i<r.length;++i)if(r[i].id===n.id)return void(r[i].location=n.location);r.push(n)}function l(i,a,o){if(!(l=(o=35632===i?f:h)[a])){var s=n.str(a),l=r.createShader(i);r.shaderSource(l,s),r.compileShader(l),o[a]=l}return l}function u(r,n){this.id=v++,this.fragId=r,this.vertId=n,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function c(i,u,c){f=l(35632,i.fragId);var f,h=l(35633,i.vertId);if(u=i.program=r.createProgram(),r.attachShader(u,f),r.attachShader(u,h),c)for(f=0;f<c.length;++f)h=c[f],r.bindAttribLocation(u,h[0],h[1]);r.linkProgram(u),h=r.getProgramParameter(u,35718),a.profile&&(i.stats.uniformsCount=h);var p=i.uniforms;for(f=0;f<h;++f)if(c=r.getActiveUniform(u,f)){if(1<c.size)for(var d=0;d<c.size;++d){var v=c.name.replace("[0]","["+d+"]");s(p,new o(v,n.id(v),r.getUniformLocation(u,v),c))}else s(p,new o(c.name,n.id(c.name),r.getUniformLocation(u,c.name),c))}for(h=r.getProgramParameter(u,35721),a.profile&&(i.stats.attributesCount=h),i=i.attributes,f=0;f<h;++f)(c=r.getActiveAttrib(u,f))&&s(i,new o(c.name,n.id(c.name),r.getAttribLocation(u,c.name),c))}var f={},h={},p={},d=[],v=0;return a.profile&&(i.getMaxUniformsCount=function(){var r=0;return d.forEach(function(n){n.stats.uniformsCount>r&&(r=n.stats.uniformsCount)}),r},i.getMaxAttributesCount=function(){var r=0;return d.forEach(function(n){n.stats.attributesCount>r&&(r=n.stats.attributesCount)}),r}),{clear:function(){var n=r.deleteShader.bind(r);V(f).forEach(n),f={},V(h).forEach(n),h={},d.forEach(function(n){r.deleteProgram(n.program)}),d.length=0,p={},i.shaderCount=0},program:function(n,a,o,s){var l=p[a];l||(l=p[a]={});var v=l[n];if(v&&(v.refCount++,!s))return v;var g=new u(a,n);return i.shaderCount++,c(g,o,s),v||(l[n]=g),d.push(g),D(g,{destroy:function(){if(g.refCount--,0>=g.refCount){r.deleteProgram(g.program);var n=d.indexOf(g);d.splice(n,1),i.shaderCount--}0>=l[g.vertId].refCount&&(r.deleteShader(h[g.vertId]),delete h[g.vertId],delete p[g.fragId][g.vertId]),Object.keys(p[g.fragId]).length||(r.deleteShader(f[g.fragId]),delete f[g.fragId],delete p[g.fragId])}})},restore:function(){f={},h={};for(var r=0;r<d.length;++r)c(d[r],null,d[r].attributes.map(function(r){return[r.location,r.name]}))},shader:l,frag:-1,vert:-1}}(tM,tL,tC,r),tH=function(r,n,i,a,o,s,u){function c(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function f(r,n){r.internalformat=n.internalformat,r.format=n.format,r.type=n.type,r.compressed=n.compressed,r.premultiplyAlpha=n.premultiplyAlpha,r.flipY=n.flipY,r.unpackAlignment=n.unpackAlignment,r.colorSpace=n.colorSpace,r.width=n.width,r.height=n.height,r.channels=n.channels}function h(r,n){if("object"==typeof n&&n){"premultiplyAlpha"in n&&(r.premultiplyAlpha=n.premultiplyAlpha),"flipY"in n&&(r.flipY=n.flipY),"alignment"in n&&(r.unpackAlignment=n.alignment),"colorSpace"in n&&(r.colorSpace=J[n.colorSpace]),"type"in n&&(r.type=K[n.type]);var i=r.width,a=r.height,o=r.channels,s=!1;"shape"in n?(i=n.shape[0],a=n.shape[1],3===n.shape.length&&(o=n.shape[2],s=!0)):("radius"in n&&(i=a=n.radius),"width"in n&&(i=n.width),"height"in n&&(a=n.height),"channels"in n&&(o=n.channels,s=!0)),r.width=0|i,r.height=0|a,r.channels=0|o,i=!1,"format"in n&&(i=n.format,a=r.internalformat=$[i],r.format=tg[a],i in K&&!("type"in n)&&(r.type=K[i]),i in tl&&(r.compressed=!0),i=!0),!s&&i?r.channels=te[r.format]:s&&!i&&r.channels!==tt[r.format]&&(r.format=r.internalformat=tt[r.channels])}}function v(n){r.pixelStorei(37440,n.flipY),r.pixelStorei(37441,n.premultiplyAlpha),r.pixelStorei(37443,n.colorSpace),r.pixelStorei(3317,n.unpackAlignment)}function w(){c.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function T(r,n){var i=null;if(x(n)?i=n:n&&(h(r,n),"x"in n&&(r.xOffset=0|n.x),"y"in n&&(r.yOffset=0|n.y),x(n.data)&&(i=n.data)),n.copy){var a=o.viewportWidth,s=o.viewportHeight;r.width=r.width||a-r.xOffset,r.height=r.height||s-r.yOffset,r.needsCopy=!0}else if(i){if(U(i))r.channels=r.channels||4,r.data=i,"type"in n||5121!==r.type||(r.type=0|q[Object.prototype.toString.call(i)]);else if(g(i)){switch(r.channels=r.channels||4,s=(a=i).length,r.type){case 5121:case 5123:case 5125:case 5126:(s=N.allocType(r.type,s)).set(a),r.data=s;break;case 36193:r.data=p(a)}r.alignment=1,r.needsFree=!0}else if(l(i)){Array.isArray(a=i.data)||5121!==r.type||(r.type=0|q[Object.prototype.toString.call(a)]),s=i.shape;var u,c,f,v,_=i.stride;3===s.length?(f=s[2],v=_[2]):v=f=1,u=s[0],c=s[1],s=_[0],_=_[1],r.alignment=1,r.width=u,r.height=c,r.channels=f,r.format=r.internalformat=tt[f],r.needsFree=!0,u=v,i=i.offset,f=r.width,v=r.height,c=r.channels;for(var w=N.allocType(36193===r.type?5126:r.type,f*v*c),T=0,k=0;k<v;++k)for(var A=0;A<f;++A)for(var M=0;M<c;++M)w[T++]=a[s*A+_*k+u*M+i];b(r,w)}else if(m(i)===tr||m(i)===tn||m(i)===ti)m(i)===tr||m(i)===tn?r.element=i:r.element=i.canvas,r.width=r.element.width,r.height=r.element.height,r.channels=4;else if(m(i)===ta)r.element=i,r.width=i.width,r.height=i.height,r.channels=4;else if(m(i)===to)r.element=i,r.width=i.naturalWidth,r.height=i.naturalHeight,r.channels=4;else if(m(i)===ts)r.element=i,r.width=i.videoWidth,r.height=i.videoHeight,r.channels=4;else if(y(i)){for(a=r.width||i[0].length,s=r.height||i.length,_=r.channels,_=d(i[0][0])?_||i[0][0].length:_||1,u=H.shape(i),f=1,v=0;v<u.length;++v)f*=u[v];f=N.allocType(36193===r.type?5126:r.type,f),H.flatten(i,u,"",f),b(r,f),r.alignment=1,r.width=a,r.height=s,r.channels=_,r.format=r.internalformat=tt[_],r.needsFree=!0}}else r.width=r.width||1,r.height=r.height||1,r.channels=r.channels||4}function k(n,i,o,s,l){var u=n.element,c=n.data,f=n.internalformat,h=n.format,p=n.type,d=n.width,g=n.height;v(n),u?r.texSubImage2D(i,l,o,s,h,p,u):n.compressed?r.compressedTexSubImage2D(i,l,o,s,f,d,g,c):n.needsCopy?(a(),r.copyTexSubImage2D(i,l,o,s,n.xOffset,n.yOffset,d,g)):r.texSubImage2D(i,l,o,s,d,g,h,p,c)}function A(){return ty.pop()||new w}function M(r){r.needsFree&&N.freeType(r.data),w.call(r),ty.push(r)}function S(){c.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function E(r,n,i){var a=r.images[0]=A();r.mipmask=1,a.width=r.width=n,a.height=r.height=i,a.channels=r.channels=4}function L(r,n){var i=null;if(x(n))f(i=r.images[0]=A(),r),T(i,n),r.mipmask=1;else if(h(r,n),Array.isArray(n.mipmap))for(var a=n.mipmap,o=0;o<a.length;++o)f(i=r.images[o]=A(),r),i.width>>=o,i.height>>=o,T(i,a[o]),r.mipmask|=1<<o;else f(i=r.images[0]=A(),r),T(i,n),r.mipmask=1;f(r,r.images[0])}function C(n,i){for(var o=n.images,s=0;s<o.length&&o[s];++s){var l=o[s],u=s,c=l.element,f=l.data,h=l.internalformat,p=l.format,d=l.type,g=l.width,y=l.height;v(l),c?r.texImage2D(i,u,p,p,d,c):l.compressed?r.compressedTexImage2D(i,u,h,g,y,0,f):l.needsCopy?(a(),r.copyTexImage2D(i,u,p,l.xOffset,l.yOffset,g,y,0)):r.texImage2D(i,u,p,g,y,0,p,d,f||null)}}function O(){var r=tm.pop()||new S;c.call(r);for(var n=r.mipmask=0;16>n;++n)r.images[n]=null;return r}function P(r){for(var n=r.images,i=0;i<n.length;++i)n[i]&&M(n[i]),n[i]=null;tm.push(r)}function I(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function z(r,n){"min"in n&&(r.minFilter=X[n.min],!(0<=Q.indexOf(r.minFilter))||"faces"in n||(r.genMipmaps=!0)),"mag"in n&&(r.magFilter=W[n.mag]);var i=r.wrapS,a=r.wrapT;if("wrap"in n){var o=n.wrap;"string"==typeof o?i=a=Y[o]:Array.isArray(o)&&(i=Y[o[0]],a=Y[o[1]])}else"wrapS"in n&&(i=Y[n.wrapS]),"wrapT"in n&&(a=Y[n.wrapT]);if(r.wrapS=i,r.wrapT=a,"anisotropic"in n&&(r.anisotropic=n.anisotropic),"mipmap"in n){switch(i=!1,typeof n.mipmap){case"string":r.mipmapHint=Z[n.mipmap],i=r.genMipmaps=!0;break;case"boolean":i=r.genMipmaps=n.mipmap;break;case"object":r.genMipmaps=!1,i=!0}!i||"min"in n||(r.minFilter=9984)}}function R(i,a){r.texParameteri(a,10241,i.minFilter),r.texParameteri(a,10240,i.magFilter),r.texParameteri(a,10242,i.wrapS),r.texParameteri(a,10243,i.wrapT),n.ext_texture_filter_anisotropic&&r.texParameteri(a,34046,i.anisotropic),i.genMipmaps&&(r.hint(33170,i.mipmapHint),r.generateMipmap(a))}function F(n){c.call(this),this.mipmask=0,this.internalformat=6408,this.id=tx++,this.refCount=1,this.target=n,this.texture=r.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new I,u.profile&&(this.stats={size:0})}function B(n){r.activeTexture(33984),r.bindTexture(n.target,n.texture)}function j(){var n=tw[0];n?r.bindTexture(n.target,n.texture):r.bindTexture(3553,null)}function G(n){var i=n.texture,a=n.unit,o=n.target;0<=a&&(r.activeTexture(33984+a),r.bindTexture(o,null),tw[a]=null),r.deleteTexture(i),n.texture=null,n.params=null,n.pixels=null,n.refCount=0,delete tb[n.id],s.textureCount--}var Z={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Y={repeat:10497,clamp:33071,mirror:33648},W={nearest:9728,linear:9729},X=D({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},W),J={none:0,browser:37444},K={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},$={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},tl={};n.ext_srgb&&($.srgb=35904,$.srgba=35906),n.oes_texture_float&&(K.float32=K.float=5126),n.oes_texture_half_float&&(K.float16=K["half float"]=36193),n.webgl_depth_texture&&(D($,{depth:6402,"depth stencil":34041}),D(K,{uint16:5123,uint32:5125,"depth stencil":34042})),n.webgl_compressed_texture_s3tc&&D(tl,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),n.webgl_compressed_texture_atc&&D(tl,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),n.webgl_compressed_texture_pvrtc&&D(tl,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),n.webgl_compressed_texture_etc1&&(tl["rgb etc1"]=36196);var tu=Array.prototype.slice.call(r.getParameter(34467));Object.keys(tl).forEach(function(r){var n=tl[r];0<=tu.indexOf(n)&&($[r]=n)});var tc=Object.keys($);i.textureFormats=tc;var tf=[];Object.keys($).forEach(function(r){tf[$[r]]=r});var th=[];Object.keys(K).forEach(function(r){th[K[r]]=r});var tp=[];Object.keys(W).forEach(function(r){tp[W[r]]=r});var td=[];Object.keys(X).forEach(function(r){td[X[r]]=r});var tv=[];Object.keys(Y).forEach(function(r){tv[Y[r]]=r});var tg=tc.reduce(function(r,i){var a=$[i];return 6409===a||6406===a||6409===a||6410===a||6402===a||34041===a||n.ext_srgb&&(35904===a||35906===a)?r[a]=a:32855===a||0<=i.indexOf("rgba")?r[a]=6408:r[a]=6407,r},{}),ty=[],tm=[],tx=0,tb={},t_=i.maxTextureUnits,tw=Array(t_).map(function(){return null});return D(F.prototype,{bind:function(){this.bindCount+=1;var n=this.unit;if(0>n){for(var i=0;i<t_;++i){var a=tw[i];if(a){if(0<a.bindCount)continue;a.unit=-1}tw[i]=this,n=i;break}u.profile&&s.maxTextureUnits<n+1&&(s.maxTextureUnits=n+1),this.unit=n,r.activeTexture(33984+n),r.bindTexture(this.target,this.texture)}return n},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&G(this)}}),u.profile&&(s.getTotalTextureSize=function(){var r=0;return Object.keys(tb).forEach(function(n){r+=tb[n].stats.size}),r}),{create2D:function(n,i){function a(r,n){var i=o.texInfo;I.call(i);var s=O();return"number"==typeof r?E(s,0|r,"number"==typeof n?0|n:0|r):r?(z(i,r),L(s,r)):E(s,1,1),i.genMipmaps&&(s.mipmask=(s.width<<1)-1),o.mipmask=s.mipmask,f(o,s),o.internalformat=s.internalformat,a.width=s.width,a.height=s.height,B(o),C(s,3553),R(i,3553),j(),P(s),u.profile&&(o.stats.size=_(o.internalformat,o.type,s.width,s.height,i.genMipmaps,!1)),a.format=tf[o.internalformat],a.type=th[o.type],a.mag=tp[i.magFilter],a.min=td[i.minFilter],a.wrapS=tv[i.wrapS],a.wrapT=tv[i.wrapT],a}var o=new F(3553);return tb[o.id]=o,s.textureCount++,a(n,i),a.subimage=function(r,n,i,s){n|=0,i|=0,s|=0;var l=A();return f(l,o),l.width=0,l.height=0,T(l,r),l.width=l.width||(o.width>>s)-n,l.height=l.height||(o.height>>s)-i,B(o),k(l,3553,n,i,s),j(),M(l),a},a.resize=function(n,i){var s=0|n,l=0|i||s;if(s===o.width&&l===o.height)return a;a.width=o.width=s,a.height=o.height=l,B(o);for(var c=0;o.mipmask>>c;++c){var f=s>>c,h=l>>c;if(!f||!h)break;r.texImage2D(3553,c,o.format,f,h,0,o.format,o.type,null)}return j(),u.profile&&(o.stats.size=_(o.internalformat,o.type,s,l,!1,!1)),a},a._reglType="texture2d",a._texture=o,u.profile&&(a.stats=o.stats),a.destroy=function(){o.decRef()},a},createCube:function(n,i,a,o,l,c){function p(r,n,i,a,o,s){var l,c=d.texInfo;for(I.call(c),l=0;6>l;++l)v[l]=O();if("number"!=typeof r&&r){if("object"==typeof r){if(n)L(v[0],r),L(v[1],n),L(v[2],i),L(v[3],a),L(v[4],o),L(v[5],s);else if(z(c,r),h(d,r),"faces"in r)for(r=r.faces,l=0;6>l;++l)f(v[l],d),L(v[l],r[l]);else for(l=0;6>l;++l)L(v[l],r)}}else for(r=0|r||1,l=0;6>l;++l)E(v[l],r,r);for(f(d,v[0]),d.mipmask=c.genMipmaps?(v[0].width<<1)-1:v[0].mipmask,d.internalformat=v[0].internalformat,p.width=v[0].width,p.height=v[0].height,B(d),l=0;6>l;++l)C(v[l],34069+l);for(R(c,34067),j(),u.profile&&(d.stats.size=_(d.internalformat,d.type,p.width,p.height,c.genMipmaps,!0)),p.format=tf[d.internalformat],p.type=th[d.type],p.mag=tp[c.magFilter],p.min=td[c.minFilter],p.wrapS=tv[c.wrapS],p.wrapT=tv[c.wrapT],l=0;6>l;++l)P(v[l]);return p}var d=new F(34067);tb[d.id]=d,s.cubeCount++;var v=Array(6);return p(n,i,a,o,l,c),p.subimage=function(r,n,i,a,o){i|=0,a|=0,o|=0;var s=A();return f(s,d),s.width=0,s.height=0,T(s,n),s.width=s.width||(d.width>>o)-i,s.height=s.height||(d.height>>o)-a,B(d),k(s,34069+r,i,a,o),j(),M(s),p},p.resize=function(n){if((n|=0)!==d.width){p.width=d.width=n,p.height=d.height=n,B(d);for(var i=0;6>i;++i)for(var a=0;d.mipmask>>a;++a)r.texImage2D(34069+i,a,d.format,n>>a,n>>a,0,d.format,d.type,null);return j(),u.profile&&(d.stats.size=_(d.internalformat,d.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=d,u.profile&&(p.stats=d.stats),p.destroy=function(){d.decRef()},p},clear:function(){for(var n=0;n<t_;++n)r.activeTexture(33984+n),r.bindTexture(3553,null),tw[n]=null;V(tb).forEach(G),s.cubeCount=0,s.textureCount=0},getTexture:function(r){return null},restore:function(){for(var n=0;n<t_;++n){var i=tw[n];i&&(i.bindCount=0,i.unit=-1,tw[n]=null)}V(tb).forEach(function(n){n.texture=r.createTexture(),r.bindTexture(n.target,n.texture);for(var i=0;32>i;++i)if(0!=(n.mipmask&1<<i)){if(3553===n.target)r.texImage2D(3553,i,n.internalformat,n.width>>i,n.height>>i,0,n.internalformat,n.type,null);else for(var a=0;6>a;++a)r.texImage2D(34069+a,i,n.internalformat,n.width>>i,n.height>>i,0,n.internalformat,n.type,null)}R(n.texInfo,n.target)})},refresh:function(){for(var n=0;n<t_;++n){var i=tw[n];i&&(i.bindCount=0,i.unit=-1,tw[n]=null),r.activeTexture(33984+n),r.bindTexture(3553,null),r.bindTexture(34067,null)}}}}(tM,tP,tB,function(){tZ.procs.poll()},tF,tC,r),tq=th(tM,tP,0,tC,r),tG=function(r,n,i,a,o,s){function l(r,n,i){this.target=r,this.texture=n,this.renderbuffer=i;var a=r=0;n?(r=n.width,a=n.height):i&&(r=i.width,a=i.height),this.width=r,this.height=a}function u(r){r&&(r.texture&&r.texture._texture.decRef(),r.renderbuffer&&r.renderbuffer._renderbuffer.decRef())}function c(r,n,i){r&&(r.texture?r.texture._texture.refCount+=1:r.renderbuffer._renderbuffer.refCount+=1)}function f(n,i){i&&(i.texture?r.framebufferTexture2D(36160,n,i.target,i.texture._texture.texture,0):r.framebufferRenderbuffer(36160,n,36161,i.renderbuffer._renderbuffer.renderbuffer))}function h(r){var n=3553,i=null,a=null,o=r;return"object"==typeof r&&(o=r.data,"target"in r&&(n=0|r.target)),"texture2d"===(r=o._reglType)||"textureCube"===r?i=o:"renderbuffer"===r&&(a=o,n=36161),new l(n,i,a)}function p(r,n,i,s,u){return i?((r=a.create2D({width:r,height:n,format:s,type:u}))._texture.refCount=0,new l(3553,r,null)):((r=o.create({width:r,height:n,format:s}))._renderbuffer.refCount=0,new l(36161,null,r))}function d(r){return r&&(r.texture||r.renderbuffer)}function v(r,n,i){r&&(r.texture?r.texture.resize(n,i):r.renderbuffer&&r.renderbuffer.resize(n,i),r.width=n,r.height=i)}function g(){this.id=A++,M[this.id]=this,this.framebuffer=r.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function y(r){r.colorAttachments.forEach(u),u(r.depthAttachment),u(r.stencilAttachment),u(r.depthStencilAttachment)}function m(n){r.deleteFramebuffer(n.framebuffer),n.framebuffer=null,s.framebufferCount--,delete M[n.id]}function x(n){r.bindFramebuffer(36160,n.framebuffer);var a,o=n.colorAttachments;for(a=0;a<o.length;++a)f(36064+a,o[a]);for(a=o.length;a<i.maxColorAttachments;++a)r.framebufferTexture2D(36160,36064+a,3553,null,0);r.framebufferTexture2D(36160,33306,3553,null,0),r.framebufferTexture2D(36160,36096,3553,null,0),r.framebufferTexture2D(36160,36128,3553,null,0),f(36096,n.depthAttachment),f(36128,n.stencilAttachment),f(33306,n.depthStencilAttachment),r.checkFramebufferStatus(36160),r.isContextLost(),r.bindFramebuffer(36160,_.next?_.next.framebuffer:null),_.cur=_.next,r.getError()}function b(r,n){function i(r,n){var o,s=0,l=0,u=!0,f=!0;o=null;var v=!0,g="rgba",m="uint8",b=1,_=null,k=null,A=null,M=!1;"number"==typeof r?(s=0|r,l=0|n||s):r?("shape"in r?(s=(l=r.shape)[0],l=l[1]):("radius"in r&&(s=l=r.radius),"width"in r&&(s=r.width),"height"in r&&(l=r.height)),("color"in r||"colors"in r)&&Array.isArray(o=r.color||r.colors),o||("colorCount"in r&&(b=0|r.colorCount),"colorTexture"in r&&(v=!!r.colorTexture,g="rgba4"),"colorType"in r&&(m=r.colorType,!v)&&("half float"===m||"float16"===m?g="rgba16f":"float"!==m&&"float32"!==m||(g="rgba32f")),"colorFormat"in r&&(0<=w.indexOf(g=r.colorFormat)?v=!0:0<=T.indexOf(g)&&(v=!1))),("depthTexture"in r||"depthStencilTexture"in r)&&(M=!(!r.depthTexture&&!r.depthStencilTexture)),"depth"in r&&("boolean"==typeof r.depth?u=r.depth:(_=r.depth,f=!1)),"stencil"in r&&("boolean"==typeof r.stencil?f=r.stencil:(k=r.stencil,u=!1)),"depthStencil"in r&&("boolean"==typeof r.depthStencil?u=f=r.depthStencil:(A=r.depthStencil,f=u=!1))):s=l=1;var S=null,E=null,L=null,C=null;if(Array.isArray(o))S=o.map(h);else if(o)S=[h(o)];else for(S=Array(b),o=0;o<b;++o)S[o]=p(s,l,v,g,m);for(s=s||S[0].width,l=l||S[0].height,_?E=h(_):u&&!f&&(E=p(s,l,M,"depth","uint32")),k?L=h(k):f&&!u&&(L=p(s,l,!1,"stencil","uint8")),A?C=h(A):!_&&!k&&f&&u&&(C=p(s,l,M,"depth stencil","depth stencil")),u=null,o=0;o<S.length;++o)c(S[o]),S[o]&&S[o].texture&&(f=tp[S[o].texture._texture.format]*td[S[o].texture._texture.type],null===u&&(u=f));return c(E),c(L),c(C),y(a),a.width=s,a.height=l,a.colorAttachments=S,a.depthAttachment=E,a.stencilAttachment=L,a.depthStencilAttachment=C,i.color=S.map(d),i.depth=d(E),i.stencil=d(L),i.depthStencil=d(C),i.width=a.width,i.height=a.height,x(a),i}var a=new g;return s.framebufferCount++,i(r,n),D(i,{resize:function(r,n){var o=Math.max(0|r,1),s=Math.max(0|n||o,1);if(o===a.width&&s===a.height)return i;for(var l=a.colorAttachments,u=0;u<l.length;++u)v(l[u],o,s);return v(a.depthAttachment,o,s),v(a.stencilAttachment,o,s),v(a.depthStencilAttachment,o,s),a.width=i.width=o,a.height=i.height=s,x(a),i},_reglType:"framebuffer",_framebuffer:a,destroy:function(){m(a),y(a)},use:function(r){_.setFBO({framebuffer:i},r)}})}var _={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],T=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&T.push("srgba"),n.ext_color_buffer_half_float&&T.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&T.push("rgba32f");var k=["uint8"];n.oes_texture_half_float&&k.push("half float","float16"),n.oes_texture_float&&k.push("float","float32");var A=0,M={};return D(_,{getFramebuffer:function(r){return"function"==typeof r&&"framebuffer"===r._reglType&&(r=r._framebuffer)instanceof g?r:null},create:b,createCube:function(r){function n(r){var o,s={color:null},l=0,u=null;o="rgba";var c="uint8",f=1;if("number"==typeof r?l=0|r:r?("shape"in r?l=r.shape[0]:("radius"in r&&(l=0|r.radius),"width"in r?l=0|r.width:"height"in r&&(l=0|r.height)),("color"in r||"colors"in r)&&Array.isArray(u=r.color||r.colors),u||("colorCount"in r&&(f=0|r.colorCount),"colorType"in r&&(c=r.colorType),"colorFormat"in r&&(o=r.colorFormat)),"depth"in r&&(s.depth=r.depth),"stencil"in r&&(s.stencil=r.stencil),"depthStencil"in r&&(s.depthStencil=r.depthStencil)):l=1,u){if(Array.isArray(u))for(r=[],o=0;o<u.length;++o)r[o]=u[o];else r=[u]}else for(r=Array(f),u={radius:l,format:o,type:c},o=0;o<f;++o)r[o]=a.createCube(u);for(s.color=Array(r.length),o=0;o<r.length;++o)f=r[o],l=l||f.width,s.color[o]={target:34069,data:r[o]};for(o=0;6>o;++o){for(f=0;f<r.length;++f)s.color[f].target=34069+o;0<o&&(s.depth=i[0].depth,s.stencil=i[0].stencil,s.depthStencil=i[0].depthStencil),i[o]?i[o](s):i[o]=b(s)}return D(n,{width:l,height:l,color:r})}var i=Array(6);return n(r),D(n,{faces:i,resize:function(r){var a=0|r;if(a===n.width)return n;var o=n.color;for(r=0;r<o.length;++r)o[r].resize(a);for(r=0;6>r;++r)i[r].resize(a);return n.width=n.height=a,n},_reglType:"framebufferCube",destroy:function(){i.forEach(function(r){r.destroy()})}})},clear:function(){V(M).forEach(m)},restore:function(){_.cur=null,_.next=null,_.dirty=!0,V(M).forEach(function(n){n.framebuffer=r.createFramebuffer(),x(n)})}})}(tM,tP,tB,tH,tq,tC),tZ=function(r,n,i,o,s,l,u,c,f,h,p,v,g,y,m,x){function b(r){return r.replace(".","_")}function _(r,n,i){var a=b(r);tA.push(r),tk[a]=tT[a]=!!i,tM[a]=n}function w(r,n,i){var a=b(r);tA.push(r),Array.isArray(i)?(tT[a]=i.slice(),tk[a]=i.slice()):tT[a]=tk[a]=i,tS[a]=n}function I(){var r=function(r){function n(){var r=[],n=[];return D(function(){r.push.apply(r,A(arguments))},{def:function(){var i="v"+o++;return n.push(i),0<arguments.length&&(r.push(i,"="),r.push.apply(r,A(arguments)),r.push(";")),i},toString:function(){return M([0<n.length?"var "+n.join(",")+";":"",M(r)])}})}function i(){function r(r,n){a(r,n,"=",i.def(r,n),";")}var i=n(),a=n(),o=i.toString,s=a.toString;return D(function(){i.apply(i,A(arguments))},{def:i.def,entry:i,exit:a,save:r,set:function(n,a,o){r(n,a),i(n,a,"=",o,";")},toString:function(){return o()+s()}})}var a=r&&r.cache,o=0,s=[],l=[],u=[],c=n(),f={};return{global:c,link:function(r,n){var i=n&&n.stable;if(!i){for(var a=0;a<l.length;++a)if(l[a]===r&&!u[a])return s[a]}return a="g"+o++,s.push(a),l.push(r),u.push(i),a},block:n,proc:function(r,n){function a(){var r="a"+o.length;return o.push(r),r}var o=[];n=n||0;for(var s=0;s<n;++s)a();var l=(s=i()).toString;return f[r]=D(s,{arg:a,toString:function(){return M(["function(",o.join(),"){",l(),"}"])}})},scope:i,cond:function(){var r=M(arguments),n=i(),a=i(),o=n.toString,s=a.toString;return D(n,{then:function(){return n.apply(n,A(arguments)),this},else:function(){return a.apply(a,A(arguments)),this},toString:function(){var n=s();return n&&(n="else{"+n+"}"),M(["if(",r,"){",o(),"}",n])}})},compile:function(){var r=['"use strict";',c,"return {"];Object.keys(f).forEach(function(n){r.push('"',n,'":',f[n].toString(),",")}),r.push("}");var n,i=M(r).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return a&&a[n=function(r){for(var n,i="",a=0;a<r.length;a++)n=r.charCodeAt(a),i+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return i}(function(r){for(var n,i=Array(r.length>>2),a=0;a<i.length;a++)i[a]=0;for(a=0;a<8*r.length;a+=8)i[a>>5]|=(255&r.charCodeAt(a/8))<<24-a%32;var o,s,l,u,c,f,h,p,d,v,g,y=8*r.length;for(r=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],a=Array(64),i[y>>5]|=128<<24-y%32,i[15+(y+64>>9<<4)]=y,p=0;p<i.length;p+=16){for(y=r[0],o=r[1],s=r[2],l=r[3],u=r[4],c=r[5],f=r[6],h=r[7],d=0;64>d;d++)16>d?a[d]=i[d+p]:(v=d,g=k(g=T(g=a[d-2],17)^T(g,19)^g>>>10,a[d-7]),n=T(n=a[d-15],7)^T(n,18)^n>>>3,a[v]=k(k(g,n),a[d-16])),v=k(k(k(k(h,v=T(v=u,6)^T(v,11)^T(v,25)),u&c^~u&f),tv[d]),a[d]),g=k(h=T(h=y,2)^T(h,13)^T(h,22),y&o^y&s^o&s),h=f,f=c,c=u,u=k(l,v),l=s,s=o,o=y,y=k(v,g);r[0]=k(y,r[0]),r[1]=k(o,r[1]),r[2]=k(s,r[2]),r[3]=k(l,r[3]),r[4]=k(u,r[4]),r[5]=k(c,r[5]),r[6]=k(f,r[6]),r[7]=k(h,r[7])}for(i="",a=0;a<32*r.length;a+=8)i+=String.fromCharCode(r[a>>5]>>>24-a%32&255);return i}(function(r){for(var n,i,a="",o=-1;++o<r.length;)n=r.charCodeAt(o),i=o+1<r.length?r.charCodeAt(o+1):0,55296<=n&&56319>=n&&56320<=i&&57343>=i&&(n=65536+((1023&n)<<10)+(1023&i),o++),127>=n?a+=String.fromCharCode(n):2047>=n?a+=String.fromCharCode(192|n>>>6&31,128|63&n):65535>=n?a+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):2097151>=n&&(a+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return a}(i)))]?a[n].apply(null,l):(i=Function.apply(null,s.concat(i)),a&&(a[n]=i),i.apply(null,l))}}}({cache:m}),i=r.link,a=r.global;r.id=tC++,r.batchId="0";var o=i(tE),s=r.shared={props:"a0"};Object.keys(tE).forEach(function(r){s[r]=a.def(o,".",r)});var l=r.next={},u=r.current={};Object.keys(tS).forEach(function(r){Array.isArray(tT[r])&&(l[r]=a.def(s.next,".",r),u[r]=a.def(s.current,".",r))});var c=r.constants={};Object.keys(tL).forEach(function(r){c[r]=a.def(JSON.stringify(tL[r]))}),r.invoke=function(n,a){switch(a.type){case 0:var o=["this",s.context,s.props,r.batchId];return n.def(i(a.data),".call(",o.slice(0,Math.max(a.data.length+1,4)),")");case 1:return n.def(s.props,a.data);case 2:return n.def(s.context,a.data);case 3:return n.def("this",a.data);case 4:return a.data.append(r,n),a.data.ref;case 5:return a.data.toString();case 6:return a.data.map(function(i){return r.invoke(n,i)})}},r.attribCache={};var f={};return r.scopeAttrib=function(r){if((r=n.id(r))in f)return f[r];var a=h.scope[r];return a||(a=h.scope[r]=new tc),f[r]=i(a)},r}function z(r,n,i){var a=r.shared.context,o=r.scope();Object.keys(i).forEach(function(s){n.save(a,"."+s);var l=i[s].append(r,n);Array.isArray(l)?o(a,".",s,"=[",l.join(),"];"):o(a,".",s,"=",l,";")}),n(o)}function F(r,n,i,a){var o,s=(u=r.shared).gl,l=u.framebuffer;tp&&(o=n.def(u.extensions,".webgl_draw_buffers"));var u=(c=r.constants).drawBuffer,c=c.backBuffer;r=i?i.append(r,n):n.def(l,".next"),a||n("if(",r,"!==",l,".cur){"),n("if(",r,"){",s,".bindFramebuffer(",36160,",",r,".framebuffer);"),tp&&n(o,".drawBuffersWEBGL(",u,"[",r,".colorAttachments.length]);"),n("}else{",s,".bindFramebuffer(",36160,",null);"),tp&&n(o,".drawBuffersWEBGL(",c,");"),n("}",l,".cur=",r,";"),a||n("}")}function B(r,n,i){var o=r.shared,s=o.gl,l=r.current,u=r.next,c=o.current,f=o.next,h=r.cond(c,".dirty");tA.forEach(function(n){var o,p;if(!((n=b(n))in i.state)){if(n in u){o=u[n],p=l[n];var d=a(tT[n].length,function(r){return h.def(o,"[",r,"]")});h(r.cond(d.map(function(r,n){return r+"!=="+p+"["+n+"]"}).join("||")).then(s,".",tS[n],"(",d,");",d.map(function(r,n){return p+"["+n+"]="+r}).join(";"),";"))}else o=h.def(f,".",n),h(d=r.cond(o,"!==",c,".",n)),n in tM?d(r.cond(o).then(s,".enable(",tM[n],");").else(s,".disable(",tM[n],");"),c,".",n,"=",o,";"):d(s,".",tS[n],"(",o,");",c,".",n,"=",o,";")}}),0===Object.keys(i.state).length&&h(c,".dirty=false;"),n(h)}function N(r,n,i,a){var o,s=r.shared,l=r.current,u=s.current,c=s.gl;E(Object.keys(i)).forEach(function(s){var f=i[s];if(!a||a(f)){var h=f.append(r,n);if(tM[s]){var p=tM[s];C(f)?(o=r.link(h,{stable:!0}),n(r.cond(o).then(c,".enable(",p,");").else(c,".disable(",p,");")),n(u,".",s,"=",o,";")):(n(r.cond(h).then(c,".enable(",p,");").else(c,".disable(",p,");")),n(u,".",s,"=",h,";"))}else if(d(h)){var v=l[s];n(c,".",tS[s],"(",h,");",h.map(function(r,n){return v+"["+n+"]="+r}).join(";"),";")}else C(f)?(o=r.link(h,{stable:!0}),n(c,".",tS[s],"(",o,");",u,".",s,"=",o,";")):n(c,".",tS[s],"(",h,");",u,".",s,"=",h,";")}})}function j(r,n){th&&(r.instancing=n.def(r.shared.extensions,".angle_instanced_arrays"))}function U(r,n,i,a,o){function s(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function l(r){r(f=n.def(),"=",s(),";"),"string"==typeof o?r(d,".count+=",o,";"):r(d,".count++;"),y&&(a?r(h=n.def(),"=",g,".getNumPendingQueries();"):r(g,".beginQuery(",d,");"))}function u(r){r(d,".cpuTime+=",s(),"-",f,";"),y&&(a?r(g,".pushScopeStats(",h,",",g,".getNumPendingQueries(),",d,");"):r(g,".endQuery();"))}function c(r){var i=n.def(v,".profile");n(v,".profile=",r,";"),n.exit(v,".profile=",i,";")}var f,h,p=r.shared,d=r.stats,v=p.current,g=p.timer;if(i=i.profile){if(C(i))return void(i.enable?(l(n),u(n.exit),c("true")):c("false"));c(i=i.append(r,n))}else i=n.def(v,".profile");l(p=r.block()),n("if(",i,"){",p,"}"),u(r=r.block()),n.exit("if(",i,"){",r,"}")}function V(r,n,i,a,o){var s=r.shared;a.forEach(function(a){var l,u=a.name,c=i.attributes[u];if(c){if(!o(c))return;l=c.append(r,n)}else{if(!o(tw))return;var f=r.scopeAttrib(u);l={},Object.keys(new tc).forEach(function(r){l[r]=n.def(f,".",r)})}!function(i,a,o){function l(){n("if(!",h,".buffer){",c,".enableVertexAttribArray(",f,");}");var i,s=o.type;i=o.size?n.def(o.size,"||",a):a,n("if(",h,".type!==",s,"||",h,".size!==",i,"||",v.map(function(r){return h+"."+r+"!=="+o[r]}).join("||"),"){",c,".bindBuffer(",34962,",",p,".buffer);",c,".vertexAttribPointer(",[f,i,s,o.normalized,o.stride,o.offset],");",h,".type=",s,";",h,".size=",i,";",v.map(function(r){return h+"."+r+"="+o[r]+";"}).join(""),"}"),th&&n("if(",h,".divisor!==",s=o.divisor,"){",r.instancing,".vertexAttribDivisorANGLE(",[f,s],");",h,".divisor=",s,";}")}function u(){n("if(",h,".buffer){",c,".disableVertexAttribArray(",f,");",h,".buffer=null;","}if(",tg.map(function(r,n){return h+"."+r+"!=="+d[n]}).join("||"),"){",c,".vertexAttrib4f(",f,",",d,");",tg.map(function(r,n){return h+"."+r+"="+d[n]+";"}).join(""),"}")}var c=s.gl,f=n.def(i,".location"),h=n.def(s.attributes,"[",f,"]");i=o.state;var p=o.buffer,d=[o.x,o.y,o.z,o.w],v=["buffer","normalized","offset","stride"];1===i?l():2===i?u():(n("if(",i,"===",1,"){"),l(),n("}else{"),u(),n("}"))}(r.link(a),function(r){switch(r){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(a.info.type),l)})}function H(r,i,o,s,l,u){for(var c,f=r.shared,h=f.gl,p=0;p<s.length;++p){var v,g=(x=s[p]).name,y=x.info.type,m=o.uniforms[g],x=r.link(x)+".location";if(m){if(!l(m))continue;if(C(m)){if(g=m.value,35678===y||35680===y)i(h,".uniform1i(",x,",",(y=r.link(g._texture||g.color[0]._texture))+".bind());"),i.exit(y,".unbind();");else if(35674===y||35675===y||35676===y)m=2,35675===y?m=3:35676===y&&(m=4),i(h,".uniformMatrix",m,"fv(",x,",false,",g=r.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),");");else{switch(y){case 5126:c="1f";break;case 35664:c="2f";break;case 35665:c="3f";break;case 35666:c="4f";break;case 35670:case 5124:c="1i";break;case 35671:case 35667:c="2i";break;case 35672:case 35668:c="3i";break;case 35673:case 35669:c="4i"}i(h,".uniform",c,"(",x,",",d(g)?Array.prototype.slice.call(g):g,");")}continue}v=m.append(r,i)}else{if(!l(tw))continue;v=i.def(f.uniforms,"[",n.id(g),"]")}switch(35678===y?i("if(",v,"&&",v,'._reglType==="framebuffer"){',v,"=",v,".color[0];","}"):35680===y&&i("if(",v,"&&",v,'._reglType==="framebufferCube"){',v,"=",v,".color[0];","}"),g=1,y){case 35678:case 35680:y=i.def(v,"._texture"),i(h,".uniform1i(",x,",",y,".bind());"),i.exit(y,".unbind();");continue;case 5124:case 35670:c="1i";break;case 35667:case 35671:c="2i",g=2;break;case 35668:case 35672:c="3i",g=3;break;case 35669:case 35673:c="4i",g=4;break;case 5126:c="1f";break;case 35664:c="2f",g=2;break;case 35665:c="3f",g=3;break;case 35666:c="4f",g=4;break;case 35674:c="Matrix2fv";break;case 35675:c="Matrix3fv";break;case 35676:c="Matrix4fv"}if("M"===c.charAt(0)){i(h,".uniform",c,"(",x,","),x=Math.pow(y-35674+2,2);var b=r.global.def("new Float32Array(",x,")");Array.isArray(v)?i("false,(",a(x,function(r){return b+"["+r+"]="+v[r]}),",",b,")"):i("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",v,":(",a(x,function(r){return b+"["+r+"]="+v+"["+r+"]"}),",",b,")"),i(");")}else{if(1<g){y=[];var _=[];for(m=0;m<g;++m)Array.isArray(v)?_.push(v[m]):_.push(i.def(v+"["+m+"]")),u&&y.push(i.def());u&&i("if(!",r.batchId,"||",y.map(function(r,n){return r+"!=="+_[n]}).join("||"),"){",y.map(function(r,n){return r+"="+_[n]+";"}).join("")),i(h,".uniform",c,"(",x,",",_.join(","),");")}else u&&(y=i.def(),i("if(!",r.batchId,"||",y,"!==",v,"){",y,"=",v,";")),i(h,".uniform",c,"(",x,",",v,");");u&&i("}")}}}function q(r,n,i,a){function o(o){var s=m[o];return s?s.contextDep&&a.contextDynamic||s.propDep?s.append(r,i):s.append(r,n):n.def(y,".",o)}function s(){function r(){i(d,".drawElementsInstancedANGLE(",[b,w,T,_+"<<(("+T+"-5121)>>1)",p],");")}function n(){i(d,".drawArraysInstancedANGLE(",[b,_,w,p],");")}x&&"null"!==x?k?r():(i("if(",x,"){"),r(),i("}else{"),n(),i("}")):n()}function l(){function r(){i(g+".drawElements("+[b,w,T,_+"<<(("+T+"-5121)>>1)"]+");")}function n(){i(g+".drawArrays("+[b,_,w]+");")}x&&"null"!==x?k?r():(i("if(",x,"){"),r(),i("}else{"),n(),i("}")):n()}var u,c,f,h,p,d,v=r.shared,g=v.gl,y=v.draw,m=a.draw,x=(u=m.elements,c=n,u?((u.contextDep&&a.contextDynamic||u.propDep)&&(c=i),u=u.append(r,c),m.elementsActive&&c("if("+u+")"+g+".bindBuffer(34963,"+u+".buffer.buffer);")):(u=c.def(),c(u,"=",y,".","elements",";","if(",u,"){",g,".bindBuffer(",34963,",",u,".buffer.buffer);}","else if(",v.vao,".currentVAO){",u,"=",r.shared.elements+".getElements("+v.vao,".currentVAO.elements);",td?"":"if("+u+")"+g+".bindBuffer(34963,"+u+".buffer.buffer);","}")),u),b=o("primitive"),_=o("offset"),w=(f=m.count,h=n,f?((f.contextDep&&a.contextDynamic||f.propDep)&&(h=i),f=f.append(r,h)):f=h.def(y,".","count"),f);if("number"==typeof w){if(0===w)return}else i("if(",w,"){"),i.exit("}");th&&(p=o("instances"),d=r.instancing);var T=x+".type",k=m.elements&&C(m.elements)&&!m.vaoActive;th&&("number"!=typeof p||0<=p)?"string"==typeof p?(i("if(",p,">0){"),s(),i("}else if(",p,"<0){"),l(),i("}")):s():l()}function Z(r,n,i,a,o){return o=(n=I()).proc("body",o),th&&(n.instancing=o.def(n.shared.extensions,".angle_instanced_arrays")),r(n,o,i,a),n.compile().body}function Y(r,n,i,a){j(r,n),i.useVAO?i.drawVAO?n(r.shared.vao,".setVAO(",i.drawVAO.append(r,n),");"):n(r.shared.vao,".setVAO(",r.shared.vao,".targetVAO);"):(n(r.shared.vao,".setVAO(null);"),V(r,n,i,a.attributes,function(){return!0})),H(r,n,i,a.uniforms,function(){return!0},!1),q(r,n,n,i)}function W(r,n,i,a){function o(){return!0}r.batchId="a1",j(r,n),V(r,n,i,a.attributes,o),H(r,n,i,a.uniforms,o,!1),q(r,n,n,i)}function X(r,n,i,a){function o(r){return r.contextDep&&l||r.propDep}function s(r){return!o(r)}j(r,n);var l=i.contextDep,u=n.def(),c=n.def();r.shared.props=c,r.batchId=u;var f=r.scope(),h=r.scope();n(f.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",c,"=","a0","[",u,"];",h,"}",f.exit),i.needsContext&&z(r,h,i.context),i.needsFramebuffer&&F(r,h,i.framebuffer),N(r,h,i.state,o),i.profile&&o(i.profile)&&U(r,h,i,!1,!0),a?(i.useVAO?i.drawVAO?o(i.drawVAO)?h(r.shared.vao,".setVAO(",i.drawVAO.append(r,h),");"):f(r.shared.vao,".setVAO(",i.drawVAO.append(r,f),");"):f(r.shared.vao,".setVAO(",r.shared.vao,".targetVAO);"):(f(r.shared.vao,".setVAO(null);"),V(r,f,i,a.attributes,s),V(r,h,i,a.attributes,o)),H(r,f,i,a.uniforms,s,!1),H(r,h,i,a.uniforms,o,!0),q(r,f,h,i)):(n=r.global.def("{}"),a=i.shader.progVar.append(r,h),c=h.def(a,".id"),f=h.def(n,"[",c,"]"),h(r.shared.gl,".useProgram(",a,".program);","if(!",f,"){",f,"=",n,"[",c,"]=",r.link(function(n){return Z(W,r,i,n,2)}),"(",a,");}",f,".call(this,a0[",u,"],",u,");"))}function K(r,n,i){var a=n.static[i];if(a&&function(r){if("object"==typeof r&&!d(r)){for(var n=Object.keys(r),i=0;i<n.length;++i)if(R.isDynamic(r[n[i]]))return!0;return!1}}(a)){var o=r.global,s=Object.keys(a),l=!1,u=!1,c=!1,f=r.global.def("{}");s.forEach(function(n){var i=a[n];if(R.isDynamic(i))"function"==typeof i&&(i=a[n]=R.unbox(i)),n=P(i,null),l=l||n.thisDep,c=c||n.propDep,u=u||n.contextDep;else{switch(o(f,".",n,"="),typeof i){case"number":o(i);break;case"string":o('"',i,'"');break;case"object":Array.isArray(i)&&o("[",i.join(),"]");break;default:o(r.link(i))}o(";")}}),n.dynamic[i]=new R.DynamicVariable(4,{thisDep:l,contextDep:u,propDep:c,ref:f,append:function(r,n){s.forEach(function(i){var o=a[i];R.isDynamic(o)&&(o=r.invoke(n,o),n(f,".",i,"=",o,";"))})}}),delete n.static[i]}}var $,Q,tt,te,tr,tn,ti,ta,to,ts,tl,tu,tc=h.Record,tf={add:32774,subtract:32778,"reverse subtract":32779};i.ext_blend_minmax&&(tf.min=32775,tf.max=32776);var th=i.angle_instanced_arrays,tp=i.webgl_draw_buffers,td=i.oes_vertex_array_object,tT={dirty:!0,profile:x.profile},tk={},tA=[],tM={},tS={};_("dither",3024),_("blend.enable",3042),w("blend.color","blendColor",[0,0,0,0]),w("blend.equation","blendEquationSeparate",[32774,32774]),w("blend.func","blendFuncSeparate",[1,0,1,0]),_("depth.enable",2929,!0),w("depth.func","depthFunc",513),w("depth.range","depthRange",[0,1]),w("depth.mask","depthMask",!0),w("colorMask","colorMask",[!0,!0,!0,!0]),_("cull.enable",2884),w("cull.face","cullFace",1029),w("frontFace","frontFace",2305),w("lineWidth","lineWidth",1),_("polygonOffset.enable",32823),w("polygonOffset.offset","polygonOffset",[0,0]),_("sample.alpha",32926),_("sample.enable",32928),w("sample.coverage","sampleCoverage",[1,!1]),_("stencil.enable",2960),w("stencil.mask","stencilMask",-1),w("stencil.func","stencilFunc",[519,0,-1]),w("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),w("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),_("scissor.enable",3089),w("scissor.box","scissor",[0,0,r.drawingBufferWidth,r.drawingBufferHeight]),w("viewport","viewport",[0,0,r.drawingBufferWidth,r.drawingBufferHeight]);var tE={gl:r,context:g,strings:n,next:tk,current:tT,draw:v,elements:l,buffer:s,shader:p,attributes:h.state,vao:h,uniforms:f,framebuffer:c,extensions:i,timer:y,isBufferArgs:S},tL={primTypes:J,compareFuncs:tx,blendFuncs:tm,blendEquations:tf,stencilOps:tb,glTypes:G,orientationType:t_};tp&&(tL.backBuffer=[1029],tL.drawBuffer=a(o.maxDrawbuffers,function(r){return 0===r?[0]:a(r,function(r){return 36064+r})}));var tC=0;return{next:tk,current:tT,procs:(Q=($=I()).proc("poll"),tt=$.proc("refresh"),Q(te=$.block()),tt(te),tn=(to=$.shared).gl,ti=to.next,te(ta=to.current,".dirty=false;"),F($,Q),F($,tt,null,!0),th&&(tr=$.link(th)),i.oes_vertex_array_object&&tt($.link(i.oes_vertex_array_object),".bindVertexArrayOES(null);"),to=tt.def(to.attributes),ts=tt.def(0),(tl=$.cond(ts,".buffer")).then(tn,".enableVertexAttribArray(i);",tn,".bindBuffer(",34962,",",ts,".buffer.buffer);",tn,".vertexAttribPointer(i,",ts,".size,",ts,".type,",ts,".normalized,",ts,".stride,",ts,".offset);").else(tn,".disableVertexAttribArray(i);",tn,".vertexAttrib4f(i,",ts,".x,",ts,".y,",ts,".z,",ts,".w);",ts,".buffer=null;"),tt("for(var i=0;i<",tu=$.link(o.maxAttributes,{stable:!0}),";++i){",ts,"=",to,"[i];",tl,"}"),th&&tt("for(var i=0;i<",tu,";++i){",tr,".vertexAttribDivisorANGLE(i,",to,"[i].divisor);","}"),tt($.shared.vao,".currentVAO=null;",$.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"),Object.keys(tM).forEach(function(r){var n=tM[r],i=te.def(ti,".",r),a=$.block();a("if(",i,"){",tn,".enable(",n,")}else{",tn,".disable(",n,")}",ta,".",r,"=",i,";"),tt(a),Q("if(",i,"!==",ta,".",r,"){",a,"}")}),Object.keys(tS).forEach(function(r){var n,i,o=tS[r],s=tT[r],l=$.block();l(tn,".",o,"("),d(s)?(o=s.length,n=$.global.def(ti,".",r),i=$.global.def(ta,".",r),l(a(o,function(r){return n+"["+r+"]"}),");",a(o,function(r){return i+"["+r+"]="+n+"["+r+"];"}).join("")),Q("if(",a(o,function(r){return n+"["+r+"]!=="+i+"["+r+"]"}).join("||"),"){",l,"}")):(n=te.def(ti,".",r),i=te.def(ta,".",r),l(n,");",ta,".",r,"=",n,";"),Q("if(",n,"!==",i,"){",l,"}")),tt(l)}),$.compile()),compile:function(r,o,u,f,v){var g=I();g.stats=g.link(v),Object.keys(o.static).forEach(function(r){K(g,o,r)}),ty.forEach(function(n){K(g,r,n)});var y=function(r,o,u,f,v){function g(r){var n=I[r];n&&(z[r]=n)}var y,m,x,_,w,T,k,A,M,E=function(r,n){if("string"==typeof(i=r.static).frag&&"string"==typeof i.vert){if(0<Object.keys(n.dynamic).length)return null;var i=n.static,a=Object.keys(i);if(0<a.length&&"number"==typeof i[a[0]]){for(var o=[],s=0;s<a.length;++s)o.push([0|i[a[s]],a[s]]);return o}}return null}(r,o),I=function(r,n,i){function a(r){if(r in o){var i=o[r];r=!0;var a,l,u=0|i.x,c=0|i.y;return"width"in i?a=0|i.width:r=!1,"height"in i?l=0|i.height:r=!1,new L(!r&&n&&n.thisDep,!r&&n&&n.contextDep,!r&&n&&n.propDep,function(r,n){var o=r.shared.context,s=a;"width"in i||(s=n.def(o,".","framebufferWidth","-",u));var f=l;return"height"in i||(f=n.def(o,".","framebufferHeight","-",c)),[u,c,s,f]})}if(r in s){var f=s[r];return r=P(f,function(r,n){var i=r.invoke(n,f),a=r.shared.context,o=n.def(i,".x|0"),s=n.def(i,".y|0");return[o,s,n.def('"width" in ',i,"?",i,".width|0:","(",a,".","framebufferWidth","-",o,")"),i=n.def('"height" in ',i,"?",i,".height|0:","(",a,".","framebufferHeight","-",s,")")]}),n&&(r.thisDep=r.thisDep||n.thisDep,r.contextDep=r.contextDep||n.contextDep,r.propDep=r.propDep||n.propDep),r}return n?new L(n.thisDep,n.contextDep,n.propDep,function(r,n){var i=r.shared.context;return[0,0,n.def(i,".","framebufferWidth"),n.def(i,".","framebufferHeight")]}):null}var o=r.static,s=r.dynamic;if(r=a("viewport")){var l=r;r=new L(r.thisDep,r.contextDep,r.propDep,function(r,n){var i=l.append(r,n),a=r.shared.context;return n.set(a,".viewportWidth",i[2]),n.set(a,".viewportHeight",i[3]),i})}return{viewport:r,scissor_box:a("scissor.box")}}(r,U=function(r,n){var i=r.static,a=r.dynamic;if("framebuffer"in i){var o=i.framebuffer;return o?(o=c.getFramebuffer(o),O(function(r,n){var i=r.link(o),a=r.shared;return n.set(a.framebuffer,".next",i),a=a.context,n.set(a,".framebufferWidth",i+".width"),n.set(a,".framebufferHeight",i+".height"),i})):O(function(r,n){var i=r.shared;return n.set(i.framebuffer,".next","null"),i=i.context,n.set(i,".framebufferWidth",i+".drawingBufferWidth"),n.set(i,".framebufferHeight",i+".drawingBufferHeight"),"null"})}if("framebuffer"in a){var s=a.framebuffer;return P(s,function(r,n){var i=r.invoke(n,s),a=r.shared,o=a.framebuffer;return i=n.def(o,".getFramebuffer(",i,")"),n.set(o,".next",i),a=a.context,n.set(a,".framebufferWidth",i+"?"+i+".width:"+a+".drawingBufferWidth"),n.set(a,".framebufferHeight",i+"?"+i+".height:"+a+".drawingBufferHeight"),i})}return null}(r)),D=function(r,n){function i(r,n){if(r in a){var i=0|a[r];return n?s.offset=i:s.instances=i,O(function(r,a){return n&&(r.OFFSET=i),i})}if(r in o){var l=o[r];return P(l,function(r,i){var a=r.invoke(i,l);return n&&(r.OFFSET=a),a})}if(n){if(f)return O(function(r,n){return r.OFFSET=0});if(u)return new L(c.thisDep,c.contextDep,c.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.vao+".currentVAO.offset:0")})}else if(u)return new L(c.thisDep,c.contextDep,c.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.vao+".currentVAO.instances:-1")});return null}var a=r.static,o=r.dynamic,s={},u=!1,c=function(){if("vao"in a){var r=a.vao;return null!==r&&null===h.getVAO(r)&&(r=h.createVAO(r)),u=!0,s.vao=r,O(function(n){var i=h.getVAO(r);return i?n.link(i):"null"})}if("vao"in o){u=!0;var n=o.vao;return P(n,function(r,i){var a=r.invoke(i,n);return i.def(r.shared.vao+".getVAO("+a+")")})}return null}(),f=!1,p=function(){if("elements"in a){var r=a.elements;if(s.elements=r,S(r)){var n=s.elements=l.create(r,!0);r=l.getElements(n),f=!0}else r&&(r=l.getElements(r),f=!0);return(n=O(function(n,i){if(r){var a=n.link(r);return n.ELEMENTS=a}return n.ELEMENTS=null})).value=r,n}if("elements"in o){f=!0;var i=o.elements;return P(i,function(r,n){var a=(o=r.shared).isBufferArgs,o=o.elements,s=r.invoke(n,i),l=n.def("null");return a=n.def(a,"(",s,")"),s=r.cond(a).then(l,"=",o,".createStream(",s,");").else(l,"=",o,".getElements(",s,");"),n.entry(s),n.exit(r.cond(a).then(o,".destroyStream(",l,");")),r.ELEMENTS=l})}return u?new L(c.thisDep,c.contextDep,c.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.elements+".getElements("+r.shared.vao+".currentVAO.elements):null")}):null}(),d=i("offset",!0),v=function(){if("primitive"in a){var r=a.primitive;return s.primitive=r,O(function(n,i){return J[r]})}if("primitive"in o){var n=o.primitive;return P(n,function(r,i){var a=r.constants.primTypes,o=r.invoke(i,n);return i.def(a,"[",o,"]")})}return f?C(p)?p.value?O(function(r,n){return n.def(r.ELEMENTS,".primType")}):O(function(){return 4}):new L(p.thisDep,p.contextDep,p.propDep,function(r,n){var i=r.ELEMENTS;return n.def(i,"?",i,".primType:",4)}):u?new L(c.thisDep,c.contextDep,c.propDep,function(r,n){return n.def(r.shared.vao+".currentVAO?"+r.shared.vao+".currentVAO.primitive:4")}):null}(),g=function(){if("count"in a){var r=0|a.count;return s.count=r,O(function(){return r})}if("count"in o){var n=o.count;return P(n,function(r,i){return r.invoke(i,n)})}return f?C(p)?p?d?new L(d.thisDep,d.contextDep,d.propDep,function(r,n){return n.def(r.ELEMENTS,".vertCount-",r.OFFSET)}):O(function(r,n){return n.def(r.ELEMENTS,".vertCount")}):O(function(){return -1}):new L(p.thisDep||d.thisDep,p.contextDep||d.contextDep,p.propDep||d.propDep,function(r,n){var i=r.ELEMENTS;return r.OFFSET?n.def(i,"?",i,".vertCount-",r.OFFSET,":-1"):n.def(i,"?",i,".vertCount:-1")}):u?new L(c.thisDep,c.contextDep,c.propDep,function(r,n){return n.def(r.shared.vao,".currentVAO?",r.shared.vao,".currentVAO.count:-1")}):null}();return{elements:p,primitive:v,count:g,instances:i("instances",!1),offset:d,vao:c,vaoActive:u,elementsActive:f,static:s}}(r),z=(B=(F=r).static,N=F.dynamic,j={},tA.forEach(function(r){function n(n,a){if(r in B){var o=n(B[r]);j[i]=O(function(){return o})}else if(r in N){var s=N[r];j[i]=P(s,function(r,n){return a(r,n,r.invoke(n,s))})}}var i=b(r);switch(r){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return n(function(r){return r},function(r,n,i){return i});case"depth.func":return n(function(r){return tx[r]},function(r,n,i){return n.def(r.constants.compareFuncs,"[",i,"]")});case"depth.range":return n(function(r){return r},function(r,n,i){return[n.def("+",i,"[0]"),n=n.def("+",i,"[1]")]});case"blend.func":return n(function(r){return[tm["srcRGB"in r?r.srcRGB:r.src],tm["dstRGB"in r?r.dstRGB:r.dst],tm["srcAlpha"in r?r.srcAlpha:r.src],tm["dstAlpha"in r?r.dstAlpha:r.dst]]},function(r,n,i){function a(r,a){return n.def('"',r,a,'" in ',i,"?",i,".",r,a,":",i,".",r)}r=r.constants.blendFuncs;var o=a("src","RGB"),s=a("dst","RGB"),l=(o=n.def(r,"[",o,"]"),n.def(r,"[",a("src","Alpha"),"]"));return[o,s=n.def(r,"[",s,"]"),l,r=n.def(r,"[",a("dst","Alpha"),"]")]});case"blend.equation":return n(function(r){return"string"==typeof r?[tf[r],tf[r]]:"object"==typeof r?[tf[r.rgb],tf[r.alpha]]:void 0},function(r,n,i){var a=r.constants.blendEquations,o=n.def(),s=n.def();return(r=r.cond("typeof ",i,'==="string"')).then(o,"=",s,"=",a,"[",i,"];"),r.else(o,"=",a,"[",i,".rgb];",s,"=",a,"[",i,".alpha];"),n(r),[o,s]});case"blend.color":return n(function(r){return a(4,function(n){return+r[n]})},function(r,n,i){return a(4,function(r){return n.def("+",i,"[",r,"]")})});case"stencil.mask":return n(function(r){return 0|r},function(r,n,i){return n.def(i,"|0")});case"stencil.func":return n(function(r){return[tx[r.cmp||"keep"],r.ref||0,"mask"in r?r.mask:-1]},function(r,n,i){return[r=n.def('"cmp" in ',i,"?",r.constants.compareFuncs,"[",i,".cmp]",":",7680),n.def(i,".ref|0"),n=n.def('"mask" in ',i,"?",i,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return n(function(n){return["stencil.opBack"===r?1029:1028,tb[n.fail||"keep"],tb[n.zfail||"keep"],tb[n.zpass||"keep"]]},function(n,i,a){function o(r){return i.def('"',r,'" in ',a,"?",s,"[",a,".",r,"]:",7680)}var s=n.constants.stencilOps;return["stencil.opBack"===r?1029:1028,o("fail"),o("zfail"),o("zpass")]});case"polygonOffset.offset":return n(function(r){return[0|r.factor,0|r.units]},function(r,n,i){return[n.def(i,".factor|0"),n=n.def(i,".units|0")]});case"cull.face":return n(function(r){var n=0;return"front"===r?n=1028:"back"===r&&(n=1029),n},function(r,n,i){return n.def(i,'==="front"?',1028,":",1029)});case"frontFace":return n(function(r){return t_[r]},function(r,n,i){return n.def(i+'==="cw"?2304:2305')});case"colorMask":return n(function(r){return r.map(function(r){return!!r})},function(r,n,i){return a(4,function(r){return"!!"+i+"["+r+"]"})});case"sample.coverage":return n(function(r){return["value"in r?r.value:1,!!r.invert]},function(r,n,i){return[n.def('"value" in ',i,"?+",i,".value:1"),n=n.def("!!",i,".invert")]})}}),j),R=function(r,i,a){function o(r){if(r in s){var i=n.id(s[r]);return(r=O(function(){return i})).id=i,r}if(r in l){var a=l[r];return P(a,function(r,n){var i=r.invoke(n,a);return n.def(r.shared.strings,".id(",i,")")})}return null}var s=r.static,l=r.dynamic,u=o("frag"),c=o("vert"),f=null;return C(u)&&C(c)?(f=p.program(c.id,u.id,null,a),r=O(function(r,n){return r.link(f)})):r=new L(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,function(r,n){var i,a,o=r.shared.shader;return i=u?u.append(r,n):n.def(o,".","frag"),a=c?c.append(r,n):n.def(o,".","vert"),n.def(o+".program("+a+","+i+")")}),{frag:u,vert:c,progVar:r,program:f}}(r,0,E);g("viewport"),g(b("scissor.box"));var F,B,N,j,U,V=0<Object.keys(z).length;if((U={framebuffer:U,draw:D,shader:R,state:z,dirty:V,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(r){var n,i=r.static;if(r=r.dynamic,"profile"in i){var a=!!i.profile;(n=O(function(r,n){return a})).enable=a}else if("profile"in r){var o=r.profile;n=P(o,function(r,n){return r.invoke(n,o)})}return n}(r),U.uniforms=(y=u.static,m=u.dynamic,x={},Object.keys(y).forEach(function(r){var n,i=y[r];if("number"==typeof i||"boolean"==typeof i)n=O(function(){return i});else if("function"==typeof i){var o=i._reglType;"texture2d"===o||"textureCube"===o?n=O(function(r){return r.link(i)}):"framebuffer"!==o&&"framebufferCube"!==o||(n=O(function(r){return r.link(i.color[0])}))}else d(i)&&(n=O(function(r){return r.global.def("[",a(i.length,function(r){return i[r]}),"]")}));n.value=i,x[r]=n}),Object.keys(m).forEach(function(r){var n=m[r];x[r]=P(n,function(r,i){return r.invoke(i,n)})}),x),U.drawVAO=U.scopeVAO=D.vao,!U.drawVAO&&R.program&&!E&&i.angle_instanced_arrays&&D.static.elements){var H=!0;if(r=R.program.attributes.map(function(r){return r=o.static[r],H=H&&!!r,r}),H&&0<r.length){var q=h.getVAO(h.createVAO({attributes:r,elements:D.static.elements}));U.drawVAO=new L(null,null,null,function(r,n){return r.link(q)}),U.useVAO=!0}}return E?U.useVAO=!0:U.attributes=(_=o.static,w=o.dynamic,T={},Object.keys(_).forEach(function(r){var i=_[r],a=n.id(r),o=new tc;if(S(i))o.state=1,o.buffer=s.getBuffer(s.create(i,34962,!1,!0)),o.type=0;else if(u=s.getBuffer(i))o.state=1,o.buffer=u,o.type=0;else if("constant"in i){var l=i.constant;o.buffer="null",o.state=2,"number"==typeof l?o.x=l:tg.forEach(function(r,n){n<l.length&&(o[r]=l[n])})}else{var u=S(i.buffer)?s.getBuffer(s.create(i.buffer,34962,!1,!0)):s.getBuffer(i.buffer),c=0|i.offset,f=0|i.stride,h=0|i.size,p=!!i.normalized,d=0;"type"in i&&(d=G[i.type]),i=0|i.divisor,o.buffer=u,o.state=1,o.size=h,o.normalized=p,o.type=d||u.dtype,o.offset=c,o.stride=f,o.divisor=i}T[r]=O(function(r,n){var i=r.attribCache;if(a in i)return i[a];var s={isStream:!1};return Object.keys(o).forEach(function(r){s[r]=o[r]}),o.buffer&&(s.buffer=r.link(o.buffer),s.type=s.type||s.buffer+".dtype"),i[a]=s})}),Object.keys(w).forEach(function(r){var n=w[r];T[r]=P(n,function(r,i){function a(r){i(c[r],"=",o,".",r,"|0;")}var o=r.invoke(i,n),s=r.shared,l=r.constants,u=s.isBufferArgs,c=(s=s.buffer,{isStream:i.def(!1)}),f=new tc;f.state=1,Object.keys(f).forEach(function(r){c[r]=i.def(""+f[r])});var h=c.buffer,p=c.type;return i("if(",u,"(",o,")){",c.isStream,"=true;",h,"=",s,".createStream(",34962,",",o,");",p,"=",h,".dtype;","}else{",h,"=",s,".getBuffer(",o,");","if(",h,"){",p,"=",h,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[tg[0]],"=",o,".constant;",tg.slice(1).map(function(r){return c[r]}).join("="),"=0;","}else{",tg.map(function(r,n){return c[r]+"="+o+".constant.length>"+n+"?"+o+".constant["+n+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",h,"=",s,".createStream(",34962,",",o,".buffer);","}else{",h,"=",s,".getBuffer(",o,".buffer);","}",p,'="type" in ',o,"?",l.glTypes,"[",o,".type]:",h,".dtype;",c.normalized,"=!!",o,".normalized;"),a("size"),a("offset"),a("stride"),a("divisor"),i("}}"),i.exit("if(",c.isStream,"){",s,".destroyStream(",h,");","}"),c})}),T),U.context=(k=f.static,A=f.dynamic,M={},Object.keys(k).forEach(function(r){var n=k[r];M[r]=O(function(r,i){return"number"==typeof n||"boolean"==typeof n?""+n:r.link(n)})}),Object.keys(A).forEach(function(r){var n=A[r];M[r]=P(n,function(r,i){return r.invoke(i,n)})}),M),U}(r,o,u,f);return y.shader.program&&(y.shader.program.attributes.sort(function(r,n){return r.name<n.name?-1:1}),y.shader.program.uniforms.sort(function(r,n){return r.name<n.name?-1:1})),function(r,n){var i=r.proc("draw",1);j(r,i),z(r,i,n.context),F(r,i,n.framebuffer),B(r,i,n),N(r,i,n.state),U(r,i,n,!1,!0);var a=n.shader.progVar.append(r,i);if(i(r.shared.gl,".useProgram(",a,".program);"),n.shader.program)Y(r,i,n,n.shader.program);else{i(r.shared.vao,".setVAO(null);");var o=r.global.def("{}"),s=i.def(a,".id"),l=i.def(o,"[",s,"]");i(r.cond(l).then(l,".call(this,a0);").else(l,"=",o,"[",s,"]=",r.link(function(i){return Z(Y,r,n,i,1)}),"(",a,");",l,".call(this,a0);"))}0<Object.keys(n.state).length&&i(r.shared.current,".dirty=true;"),r.shared.vao&&i(r.shared.vao,".setVAO(null);")}(g,y),function(r,i){function a(n){var a=i.shader[n];a&&(isNaN(a=a.append(r,o))?o.set(s.shader,"."+n,a):o.set(s.shader,"."+n,r.link(a,{stable:!0})))}var o=r.proc("scope",3);r.batchId="a2";var s=r.shared,l=s.current;if(z(r,o,i.context),i.framebuffer&&i.framebuffer.append(r,o),E(Object.keys(i.state)).forEach(function(n){var a=i.state[n],l=a.append(r,o);d(l)?l.forEach(function(i,a){isNaN(i)?o.set(r.next[n],"["+a+"]",i):o.set(r.next[n],"["+a+"]",r.link(i,{stable:!0}))}):C(a)?o.set(s.next,"."+n,r.link(l,{stable:!0})):o.set(s.next,"."+n,l)}),U(r,o,i,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(n){var a=i.draw[n];a&&(isNaN(a=a.append(r,o))?o.set(s.draw,"."+n,a):o.set(s.draw,"."+n,r.link(a),{stable:!0}))}),Object.keys(i.uniforms).forEach(function(a){var l=i.uniforms[a].append(r,o);Array.isArray(l)&&(l="["+l.map(function(n){return isNaN(n)?n:r.link(n,{stable:!0})})+"]"),o.set(s.uniforms,"["+r.link(n.id(a),{stable:!0})+"]",l)}),Object.keys(i.attributes).forEach(function(n){var a=i.attributes[n].append(r,o),s=r.scopeAttrib(n);Object.keys(new tc).forEach(function(r){o.set(s,"."+r,a[r])})}),i.scopeVAO){var u=i.scopeVAO.append(r,o);isNaN(u)?o.set(s.vao,".targetVAO",u):o.set(s.vao,".targetVAO",r.link(u,{stable:!0}))}a("vert"),a("frag"),0<Object.keys(i.state).length&&(o(l,".dirty=true;"),o.exit(l,".dirty=true;")),o("a1(",r.shared.context,",a0,",r.batchId,");")}(g,y),function(r,n){function i(r){return r.contextDep&&o||r.propDep}var a=r.proc("batch",2);r.batchId="0",j(r,a);var o=!1,s=!0;Object.keys(n.context).forEach(function(r){o=o||n.context[r].propDep}),o||(z(r,a,n.context),s=!1);var l=!1;if((u=n.framebuffer)?(u.propDep?o=l=!0:u.contextDep&&o&&(l=!0),l||F(r,a,u)):F(r,a,null),n.state.viewport&&n.state.viewport.propDep&&(o=!0),B(r,a,n),N(r,a,n.state,function(r){return!i(r)}),n.profile&&i(n.profile)||U(r,a,n,!1,"a1"),n.contextDep=o,n.needsContext=s,n.needsFramebuffer=l,(s=n.shader.progVar).contextDep&&o||s.propDep)X(r,a,n,null);else if(s=s.append(r,a),a(r.shared.gl,".useProgram(",s,".program);"),n.shader.program)X(r,a,n,n.shader.program);else{a(r.shared.vao,".setVAO(null);");var u=r.global.def("{}"),c=(l=a.def(s,".id"),a.def(u,"[",l,"]"));a(r.cond(c).then(c,".call(this,a0,a1);").else(c,"=",u,"[",l,"]=",r.link(function(i){return Z(X,r,n,i,2)}),"(",s,");",c,".call(this,a0,a1);"))}0<Object.keys(n.state).length&&a(r.shared.current,".dirty=true;"),r.shared.vao&&a(r.shared.vao,".setVAO(null);")}(g,y),D(g.compile(),{destroy:function(){y.shader.program.destroy()}})}}}(tM,tL,tP,tB,tN,tj,0,tG,{},tU,tV,tz,tF,tI,tO,r),tY=(tL=function(r,n,i,a,o,s,l){function u(o){s=null===n.next?5121:n.next.colorAttachments[0].texture._texture.type;var s,l=0,u=0,c=a.framebufferWidth,f=a.framebufferHeight,h=null;return U(o)?h=o:o&&(l=0|o.x,u=0|o.y,c=0|(o.width||a.framebufferWidth-l),f=0|(o.height||a.framebufferHeight-u),h=o.data||null),i(),o=c*f*4,h||(5121===s?h=new Uint8Array(o):5126===s&&(h=h||new Float32Array(o))),r.pixelStorei(3333,4),r.readPixels(l,u,c,f,6408,s,h),h}return function(r){var i;return r&&"framebuffer"in r?(n.setFBO({framebuffer:r.framebuffer},function(){i=u(r)}),i):u(r)}}(tM,tG,tZ.procs.poll,tF),tZ.next),tW=tM.canvas,tX=[],tJ=[],tK=[],t$=[r.onDestroy],tQ=null;tW&&(tW.addEventListener("webglcontextlost",v,!1),tW.addEventListener("webglcontextrestored",z,!1));var t0=tG.setFBO=K({framebuffer:R.define.call(null,1,"framebuffer")});return tf(),tS=D(K,{clear:function(r){if("framebuffer"in r){if(r.framebuffer&&"framebufferCube"===r.framebuffer_reglType)for(var n=0;6>n;++n)t0(D({framebuffer:r.framebuffer.faces[n]},r),$);else t0(r,$)}else $(0,r)},prop:R.define.bind(null,1),context:R.define.bind(null,2),this:R.define.bind(null,3),draw:K({}),buffer:function(r){return tN.create(r,34962,!1,!1)},elements:function(r){return tj.create(r,!1)},texture:tH.create2D,cube:tH.createCube,renderbuffer:tq.create,framebuffer:tG.create,framebufferCube:tG.createCube,vao:tU.createVAO,attributes:tS,frame:tl,on:function(r,n){var i;switch(r){case"frame":return tl(n);case"lost":i=tJ;break;case"restore":i=tK;break;case"destroy":i=t$}return i.push(n),{cancel:function(){for(var r=0;r<i.length;++r)if(i[r]===n){i[r]=i[i.length-1],i.pop();break}}}},limits:tB,hasExtension:function(r){return 0<=tB.extensions.indexOf(r.toLowerCase())},read:tL,destroy:function(){tX.length=0,u(),tW&&(tW.removeEventListener("webglcontextlost",v),tW.removeEventListener("webglcontextrestored",z)),tV.clear(),tG.clear(),tq.clear(),tU.clear(),tH.clear(),tj.clear(),tN.clear(),tI&&tI.clear(),t$.forEach(function(r){r()})},_gl:tM,_refresh:tf,poll:function(){tc(),tI&&tI.update()},now:tT,stats:tC,getCachedCode:function(){return tO},preloadCachedCode:function(r){Object.entries(r).forEach(function(r){tO[r[0]]=r[1]})}}),r.onDone(null,tS),tS}}()},71665:function(r,n,i){var a=i(12856),o=a.Buffer;function s(r,n){for(var i in r)n[i]=r[i]}function l(r,n,i){return o(r,n,i)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=a:(s(a,n),n.Buffer=l),l.prototype=Object.create(o.prototype),s(o,l),l.from=function(r,n,i){if("number"==typeof r)throw TypeError("Argument must not be a number");return o(r,n,i)},l.alloc=function(r,n,i){if("number"!=typeof r)throw TypeError("Argument must be a number");var a=o(r);return void 0!==n?"string"==typeof i?a.fill(n,i):a.fill(n):a.fill(0),a},l.allocUnsafe=function(r){if("number"!=typeof r)throw TypeError("Argument must be a number");return o(r)},l.allocUnsafeSlow=function(r){if("number"!=typeof r)throw TypeError("Argument must be a number");return a.SlowBuffer(r)}},21630:function(r,n,i){r.exports=o;var a=i(15398).EventEmitter;function o(){a.call(this)}i(42018)(o,a),o.Readable=i(40410),o.Writable=i(37493),o.Duplex=i(37865),o.Transform=i(74308),o.PassThrough=i(66897),o.finished=i(12726),o.pipeline=i(10168),o.Stream=o,o.prototype.pipe=function(r,n){var i=this;function o(n){r.writable&&!1===r.write(n)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",o),r.on("drain",s),r._isStdio||n&&!1===n.end||(i.on("end",u),i.on("close",c));var l=!1;function u(){l||(l=!0,r.end())}function c(){l||(l=!0,"function"==typeof r.destroy&&r.destroy())}function f(r){if(h(),0===a.listenerCount(this,"error"))throw r}function h(){i.removeListener("data",o),r.removeListener("drain",s),i.removeListener("end",u),i.removeListener("close",c),i.removeListener("error",f),r.removeListener("error",f),i.removeListener("end",h),i.removeListener("close",h),r.removeListener("close",h)}return i.on("error",f),r.on("error",f),i.on("end",h),i.on("close",h),r.on("close",h),r.emit("pipe",i),r}},74322:function(r){"use strict";var n={};function i(r,i,a){a||(a=Error);var o=function(r){function n(n,a,o){return r.call(this,"string"==typeof i?i:i(n,a,o))||this}return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,n}(a);o.prototype.name=a.name,o.prototype.code=r,n[r]=o}function a(r,n){if(Array.isArray(r)){var i=r.length;return r=r.map(function(r){return String(r)}),i>2?"one of ".concat(n," ").concat(r.slice(0,i-1).join(", "),", or ")+r[i-1]:2===i?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}return"of ".concat(n," ").concat(String(r))}i("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(r,n,i){if("string"==typeof n&&(s="not ",n.substr(0,4)===s)?(o="must not be",n=n.replace(/^not /,"")):o="must be",(void 0===c||c>r.length)&&(c=r.length)," argument"===r.substring(c-9,c))l="The ".concat(r," ").concat(o," ").concat(a(n,"type"));else{var o,s,l,u,c,f=("number"!=typeof u&&(u=0),u+1>r.length||-1===r.indexOf(".",u)?"argument":"property");l='The "'.concat(r,'" ').concat(f," ").concat(o," ").concat(a(n,"type"))}return l+". Received type ".concat(typeof i)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r.exports.q=n},37865:function(r,n,i){"use strict";var a=i(90386),o=Object.keys||function(r){var n=[];for(var i in r)n.push(i);return n};r.exports=h;var s=i(40410),l=i(37493);i(42018)(h,s);for(var u=o(l.prototype),c=0;c<u.length;c++){var f=u[c];h.prototype[f]||(h.prototype[f]=l.prototype[f])}function h(r){if(!(this instanceof h))return new h(r);s.call(this,r),l.call(this,r),this.allowHalfOpen=!0,r&&(!1===r.readable&&(this.readable=!1),!1===r.writable&&(this.writable=!1),!1===r.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||a.nextTick(d,this)}function d(r){r.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},66897:function(r,n,i){"use strict";r.exports=o;var a=i(74308);function o(r){if(!(this instanceof o))return new o(r);a.call(this,r)}i(42018)(o,a),o.prototype._transform=function(r,n,i){i(null,r)}},40410:function(r,n,i){"use strict";var a,o=i(90386);r.exports=S,S.ReadableState=M,i(15398).EventEmitter;var s,l=function(r,n){return r.listeners(n).length},u=i(71405),c=i(12856).Buffer,f=i.g.Uint8Array||function(){},h=i(40964);s=h&&h.debuglog?h.debuglog("stream"):function(){};var p,d,v,g=i(31125),y=i(65756),m=i(56306).getHighWaterMark,x=i(74322).q,b=x.ERR_INVALID_ARG_TYPE,_=x.ERR_STREAM_PUSH_AFTER_EOF,w=x.ERR_METHOD_NOT_IMPLEMENTED,T=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(42018)(S,u);var k=y.errorOrDestroy,A=["error","close","destroy","pause","resume"];function M(r,n,o){a=a||i(37865),r=r||{},"boolean"!=typeof o&&(o=n instanceof a),this.objectMode=!!r.objectMode,o&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=m(this,r,"readableHighWaterMark",o),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(p||(p=i(68019).s),this.decoder=new p(r.encoding),this.encoding=r.encoding)}function S(r){if(a=a||i(37865),!(this instanceof S))return new S(r);var n=this instanceof a;this._readableState=new M(r,this,n),this.readable=!0,r&&("function"==typeof r.read&&(this._read=r.read),"function"==typeof r.destroy&&(this._destroy=r.destroy)),u.call(this)}function E(r,n,i,a,o){s("readableAddChunk",n);var l,u,h,p,d=r._readableState;if(null===n)d.reading=!1,function(r,n){if(s("onEofChunk"),!n.ended){if(n.decoder){var i=n.decoder.end();i&&i.length&&(n.buffer.push(i),n.length+=n.objectMode?1:i.length)}n.ended=!0,n.sync?O(r):(n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,P(r)))}}(r,d);else if(o||(l=n,c.isBuffer(l)||l instanceof f||"string"==typeof l||void 0===l||d.objectMode||(u=new b("chunk",["string","Buffer","Uint8Array"],l)),p=u),p)k(r,p);else if(d.objectMode||n&&n.length>0){if("string"==typeof n||d.objectMode||Object.getPrototypeOf(n)===c.prototype||(h=n,n=c.from(h)),a)d.endEmitted?k(r,new T):L(r,d,n,!0);else if(d.ended)k(r,new _);else{if(d.destroyed)return!1;d.reading=!1,d.decoder&&!i?(n=d.decoder.write(n),d.objectMode||0!==n.length?L(r,d,n,!1):I(r,d)):L(r,d,n,!1)}}else a||(d.reading=!1,I(r,d));return!d.ended&&(d.length<d.highWaterMark||0===d.length)}function L(r,n,i,a){n.flowing&&0===n.length&&!n.sync?(n.awaitDrain=0,r.emit("data",i)):(n.length+=n.objectMode?1:i.length,a?n.buffer.unshift(i):n.buffer.push(i),n.needReadable&&O(r)),I(r,n)}function C(r,n){var i;return r<=0||0===n.length&&n.ended?0:n.objectMode?1:r!=r?n.flowing&&n.length?n.buffer.head.data.length:n.length:(r>n.highWaterMark&&(n.highWaterMark=((i=r)>=1073741824?i=1073741824:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),r<=n.length?r:n.ended?n.length:(n.needReadable=!0,0))}function O(r){var n=r._readableState;s("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(s("emitReadable",n.flowing),n.emittedReadable=!0,o.nextTick(P,r))}function P(r){var n=r._readableState;s("emitReadable_",n.destroyed,n.length,n.ended),!n.destroyed&&(n.length||n.ended)&&(r.emit("readable"),n.emittedReadable=!1),n.needReadable=!n.flowing&&!n.ended&&n.length<=n.highWaterMark,B(r)}function I(r,n){n.readingMore||(n.readingMore=!0,o.nextTick(D,r,n))}function D(r,n){for(;!n.reading&&!n.ended&&(n.length<n.highWaterMark||n.flowing&&0===n.length);){var i=n.length;if(s("maybeReadMore read 0"),r.read(0),i===n.length)break}n.readingMore=!1}function z(r){var n=r._readableState;n.readableListening=r.listenerCount("readable")>0,n.resumeScheduled&&!n.paused?n.flowing=!0:r.listenerCount("data")>0&&r.resume()}function R(r){s("readable nexttick read 0"),r.read(0)}function F(r,n){s("resume",n.reading),n.reading||r.read(0),n.resumeScheduled=!1,r.emit("resume"),B(r),n.flowing&&!n.reading&&r.read(0)}function B(r){var n=r._readableState;for(s("flow",n.flowing);n.flowing&&null!==r.read(););}function N(r,n){var i;return 0===n.length?null:(n.objectMode?i=n.buffer.shift():!r||r>=n.length?(i=n.decoder?n.buffer.join(""):1===n.buffer.length?n.buffer.first():n.buffer.concat(n.length),n.buffer.clear()):i=n.buffer.consume(r,n.decoder),i)}function j(r){var n=r._readableState;s("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,o.nextTick(U,n,r))}function U(r,n){if(s("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&0===r.length&&(r.endEmitted=!0,n.readable=!1,n.emit("end"),r.autoDestroy)){var i=n._writableState;(!i||i.autoDestroy&&i.finished)&&n.destroy()}}function V(r,n){for(var i=0,a=r.length;i<a;i++)if(r[i]===n)return i;return -1}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(r){this._readableState&&(this._readableState.destroyed=r)}}),S.prototype.destroy=y.destroy,S.prototype._undestroy=y.undestroy,S.prototype._destroy=function(r,n){n(r)},S.prototype.push=function(r,n){var i,a=this._readableState;return a.objectMode?i=!0:"string"==typeof r&&((n=n||a.defaultEncoding)!==a.encoding&&(r=c.from(r,n),n=""),i=!0),E(this,r,n,!1,i)},S.prototype.unshift=function(r){return E(this,r,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(r){p||(p=i(68019).s);var n=new p(r);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var a=this._readableState.buffer.head,o="";null!==a;)o+=n.write(a.data),a=a.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this},S.prototype.read=function(r){s("read",r),r=parseInt(r,10);var n=this._readableState,i=r;if(0!==r&&(n.emittedReadable=!1),0===r&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:n.length>0)||n.ended))return s("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?j(this):O(this),null;if(0===(r=C(r,n))&&n.ended)return 0===n.length&&j(this),null;var a,o=n.needReadable;return s("need readable",o),(0===n.length||n.length-r<n.highWaterMark)&&s("length less than watermark",o=!0),n.ended||n.reading?s("reading or ended",o=!1):o&&(s("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(r=C(i,n))),null===(a=r>0?N(r,n):null)?(n.needReadable=n.length<=n.highWaterMark,r=0):(n.length-=r,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),i!==r&&n.ended&&j(this)),null!==a&&this.emit("data",a),a},S.prototype._read=function(r){k(this,new w("_read()"))},S.prototype.pipe=function(r,n){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=r;break;case 1:a.pipes=[a.pipes,r];break;default:a.pipes.push(r)}a.pipesCount+=1,s("pipe count=%d opts=%j",a.pipesCount,n);var u=n&&!1===n.end||r===o.stdout||r===o.stderr?y:c;function c(){s("onend"),r.end()}a.endEmitted?o.nextTick(u):i.once("end",u),r.on("unpipe",function n(o,l){s("onunpipe"),o===i&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,s("cleanup"),r.removeListener("close",v),r.removeListener("finish",g),r.removeListener("drain",f),r.removeListener("error",d),r.removeListener("unpipe",n),i.removeListener("end",c),i.removeListener("end",y),i.removeListener("data",p),h=!0,a.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&f())});var f=function(){var r=i._readableState;s("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&l(i,"data")&&(r.flowing=!0,B(i))};r.on("drain",f);var h=!1;function p(n){s("ondata");var o=r.write(n);s("dest.write",o),!1===o&&((1===a.pipesCount&&a.pipes===r||a.pipesCount>1&&-1!==V(a.pipes,r))&&!h&&(s("false write response, pause",a.awaitDrain),a.awaitDrain++),i.pause())}function d(n){s("onerror",n),y(),r.removeListener("error",d),0===l(r,"error")&&k(r,n)}function v(){r.removeListener("finish",g),y()}function g(){s("onfinish"),r.removeListener("close",v),y()}function y(){s("unpipe"),i.unpipe(r)}return i.on("data",p),function(r,n,i){if("function"==typeof r.prependListener)return r.prependListener(n,i);r._events&&r._events[n]?Array.isArray(r._events[n])?r._events[n].unshift(i):r._events[n]=[i,r._events[n]]:r.on(n,i)}(r,"error",d),r.once("close",v),r.once("finish",g),r.emit("pipe",i),a.flowing||(s("pipe resume"),i.resume()),r},S.prototype.unpipe=function(r){var n=this._readableState,i={hasUnpiped:!1};if(0===n.pipesCount)return this;if(1===n.pipesCount)return r&&r!==n.pipes||(r||(r=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,r&&r.emit("unpipe",this,i)),this;if(!r){var a=n.pipes,o=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var s=0;s<o;s++)a[s].emit("unpipe",this,{hasUnpiped:!1});return this}var l=V(n.pipes,r);return -1===l||(n.pipes.splice(l,1),n.pipesCount-=1,1===n.pipesCount&&(n.pipes=n.pipes[0]),r.emit("unpipe",this,i)),this},S.prototype.on=function(r,n){var i=u.prototype.on.call(this,r,n),a=this._readableState;return"data"===r?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===r&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,s("on readable",a.length,a.reading),a.length?O(this):a.reading||o.nextTick(R,this))),i},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(r,n){var i=u.prototype.removeListener.call(this,r,n);return"readable"===r&&o.nextTick(z,this),i},S.prototype.removeAllListeners=function(r){var n=u.prototype.removeAllListeners.apply(this,arguments);return"readable"!==r&&void 0!==r||o.nextTick(z,this),n},S.prototype.resume=function(){var r=this._readableState;return r.flowing||(s("resume"),r.flowing=!r.readableListening,r.resumeScheduled||(r.resumeScheduled=!0,o.nextTick(F,this,r))),r.paused=!1,this},S.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(r){var n=this,i=this._readableState,a=!1;for(var o in r.on("end",function(){if(s("wrapped end"),i.decoder&&!i.ended){var r=i.decoder.end();r&&r.length&&n.push(r)}n.push(null)}),r.on("data",function(o){s("wrapped data"),i.decoder&&(o=i.decoder.write(o)),i.objectMode&&null==o||(i.objectMode||o&&o.length)&&(n.push(o)||(a=!0,r.pause()))}),r)void 0===this[o]&&"function"==typeof r[o]&&(this[o]=function(n){return function(){return r[n].apply(r,arguments)}}(o));for(var l=0;l<A.length;l++)r.on(A[l],this.emit.bind(this,A[l]));return this._read=function(n){s("wrapped _read",n),a&&(a=!1,r.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=i(68221)),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(r){this._readableState&&(this._readableState.flowing=r)}}),S._fromList=N,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(r,n){return void 0===v&&(v=i(31748)),v(S,r,n)})},74308:function(r,n,i){"use strict";r.exports=h;var a=i(74322).q,o=a.ERR_METHOD_NOT_IMPLEMENTED,s=a.ERR_MULTIPLE_CALLBACK,l=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=a.ERR_TRANSFORM_WITH_LENGTH_0,c=i(37865);function f(r,n){var i=this._transformState;i.transforming=!1;var a=i.writecb;if(null===a)return this.emit("error",new s);i.writechunk=null,i.writecb=null,null!=n&&this.push(n),a(r);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function h(r){if(!(this instanceof h))return new h(r);c.call(this,r),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&("function"==typeof r.transform&&(this._transform=r.transform),"function"==typeof r.flush&&(this._flush=r.flush)),this.on("prefinish",p)}function p(){var r=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(n,i){d(r,n,i)})}function d(r,n,i){if(n)return r.emit("error",n);if(null!=i&&r.push(i),r._writableState.length)throw new u;if(r._transformState.transforming)throw new l;return r.push(null)}i(42018)(h,c),h.prototype.push=function(r,n){return this._transformState.needTransform=!1,c.prototype.push.call(this,r,n)},h.prototype._transform=function(r,n,i){i(new o("_transform()"))},h.prototype._write=function(r,n,i){var a=this._transformState;if(a.writecb=i,a.writechunk=r,a.writeencoding=n,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},h.prototype._read=function(r){var n=this._transformState;null===n.writechunk||n.transforming?n.needTransform=!0:(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform))},h.prototype._destroy=function(r,n){c.prototype._destroy.call(this,r,function(r){n(r)})}},37493:function(r,n,i){"use strict";var a,o=i(90386);function s(r){var n=this;this.next=null,this.entry=null,this.finish=function(){!function(r,n,i){var a=r.entry;for(r.entry=null;a;){var o=a.callback;n.pendingcb--,o(void 0),a=a.next}n.corkedRequestsFree.next=r}(n,r)}}r.exports=S,S.WritableState=M;var l,u={deprecate:i(20588)},c=i(71405),f=i(12856).Buffer,h=i.g.Uint8Array||function(){},p=i(65756),d=i(56306).getHighWaterMark,v=i(74322).q,g=v.ERR_INVALID_ARG_TYPE,y=v.ERR_METHOD_NOT_IMPLEMENTED,m=v.ERR_MULTIPLE_CALLBACK,x=v.ERR_STREAM_CANNOT_PIPE,b=v.ERR_STREAM_DESTROYED,_=v.ERR_STREAM_NULL_VALUES,w=v.ERR_STREAM_WRITE_AFTER_END,T=v.ERR_UNKNOWN_ENCODING,k=p.errorOrDestroy;function A(){}function M(r,n,l){a=a||i(37865),r=r||{},"boolean"!=typeof l&&(l=n instanceof a),this.objectMode=!!r.objectMode,l&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=d(this,r,"writableHighWaterMark",l),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===r.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(r){!function(r,n){var i=r._writableState,a=i.sync,s=i.writecb;if("function"!=typeof s)throw new m;if(i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,n)--i.pendingcb,a?(o.nextTick(s,n),o.nextTick(I,r,i),r._writableState.errorEmitted=!0,k(r,n)):(s(n),r._writableState.errorEmitted=!0,k(r,n),I(r,i));else{var l=O(i)||r.destroyed;l||i.corked||i.bufferProcessing||!i.bufferedRequest||C(r,i),a?o.nextTick(L,r,i,l,s):L(r,i,l,s)}}(n,r)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function S(r){var n=this instanceof(a=a||i(37865));if(!n&&!l.call(S,this))return new S(r);this._writableState=new M(r,this,n),this.writable=!0,r&&("function"==typeof r.write&&(this._write=r.write),"function"==typeof r.writev&&(this._writev=r.writev),"function"==typeof r.destroy&&(this._destroy=r.destroy),"function"==typeof r.final&&(this._final=r.final)),c.call(this)}function E(r,n,i,a,o,s,l){n.writelen=a,n.writecb=l,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new b("write")):i?r._writev(o,n.onwrite):r._write(o,s,n.onwrite),n.sync=!1}function L(r,n,i,a){i||0===n.length&&n.needDrain&&(n.needDrain=!1,r.emit("drain")),n.pendingcb--,a(),I(r,n)}function C(r,n){n.bufferProcessing=!0;var i=n.bufferedRequest;if(r._writev&&i&&i.next){var a=Array(n.bufferedRequestCount),o=n.corkedRequestsFree;o.entry=i;for(var l=0,u=!0;i;)a[l]=i,i.isBuf||(u=!1),i=i.next,l+=1;a.allBuffers=u,E(r,n,!0,n.length,a,"",o.finish),n.pendingcb++,n.lastBufferedRequest=null,o.next?(n.corkedRequestsFree=o.next,o.next=null):n.corkedRequestsFree=new s(n),n.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,f=i.encoding,h=i.callback;if(E(r,n,!1,n.objectMode?1:c.length,c,f,h),i=i.next,n.bufferedRequestCount--,n.writing)break}null===i&&(n.lastBufferedRequest=null)}n.bufferedRequest=i,n.bufferProcessing=!1}function O(r){return r.ending&&0===r.length&&null===r.bufferedRequest&&!r.finished&&!r.writing}function P(r,n){r._final(function(i){n.pendingcb--,i&&k(r,i),n.prefinished=!0,r.emit("prefinish"),I(r,n)})}function I(r,n){var i=O(n);if(i&&(n.prefinished||n.finalCalled||("function"!=typeof r._final||n.destroyed?(n.prefinished=!0,r.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,o.nextTick(P,r,n))),0===n.pendingcb&&(n.finished=!0,r.emit("finish"),n.autoDestroy))){var a=r._readableState;(!a||a.autoDestroy&&a.endEmitted)&&r.destroy()}return i}i(42018)(S,c),M.prototype.getBuffer=function(){for(var r=this.bufferedRequest,n=[];r;)n.push(r),r=r.next;return n},function(){try{Object.defineProperty(M.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(r){return!!l.call(this,r)||this===S&&r&&r._writableState instanceof M}})):l=function(r){return r instanceof this},S.prototype.pipe=function(){k(this,new x)},S.prototype.write=function(r,n,i){var a,s,l,u,c,p,d,v=this._writableState,y=!1,m=!v.objectMode&&(d=r,f.isBuffer(d)||d instanceof h);return m&&!f.isBuffer(r)&&(a=r,r=f.from(a)),"function"==typeof n&&(i=n,n=null),m?n="buffer":n||(n=v.defaultEncoding),"function"!=typeof i&&(i=A),v.ending?(s=i,k(this,l=new w),o.nextTick(s,l)):!m&&(u=r,c=i,null===u?p=new _:"string"==typeof u||v.objectMode||(p=new g("chunk",["string","Buffer"],u)),p&&(k(this,p),o.nextTick(c,p),1))||(v.pendingcb++,y=function(r,n,i,a,o,s){if(!i){var l,u,c=(l=a,u=o,n.objectMode||!1===n.decodeStrings||"string"!=typeof l||(l=f.from(l,u)),l);a!==c&&(i=!0,o="buffer",a=c)}var h=n.objectMode?1:a.length;n.length+=h;var p=n.length<n.highWaterMark;if(p||(n.needDrain=!0),n.writing||n.corked){var d=n.lastBufferedRequest;n.lastBufferedRequest={chunk:a,encoding:o,isBuf:i,callback:s,next:null},d?d.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else E(r,n,!1,h,a,o,s);return p}(this,v,m,r,n,i)),y},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,r.writing||r.corked||r.bufferProcessing||!r.bufferedRequest||C(this,r))},S.prototype.setDefaultEncoding=function(r){if("string"==typeof r&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new T(r);return this._writableState.defaultEncoding=r,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(r,n,i){i(new y("_write()"))},S.prototype._writev=null,S.prototype.end=function(r,n,i){var a,s=this._writableState;return"function"==typeof r?(i=r,r=null,n=null):"function"==typeof n&&(i=n,n=null),null!=r&&this.write(r,n),s.corked&&(s.corked=1,this.uncork()),s.ending||(a=i,s.ending=!0,I(this,s),a&&(s.finished?o.nextTick(a):this.once("finish",a)),s.ended=!0,this.writable=!1),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(r){this._writableState&&(this._writableState.destroyed=r)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(r,n){n(r)}},68221:function(r,n,i){"use strict";var a,o=i(90386);function s(r,n,i){return n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r}var l=i(12726),u=Symbol("lastResolve"),c=Symbol("lastReject"),f=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),d=Symbol("handlePromise"),v=Symbol("stream");function g(r,n){return{value:r,done:n}}function y(r){var n=r[u];if(null!==n){var i=r[v].read();null!==i&&(r[p]=null,r[u]=null,r[c]=null,n(g(i,!1)))}}function m(r){o.nextTick(y,r)}var x=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((s(a={get stream(){return this[v]},next:function(){var r,n=this,i=this[f];if(null!==i)return Promise.reject(i);if(this[h])return Promise.resolve(g(void 0,!0));if(this[v].destroyed)return new Promise(function(r,i){o.nextTick(function(){n[f]?i(n[f]):r(g(void 0,!0))})});var a,s=this[p];if(s)a=new Promise((r=this,function(n,i){s.then(function(){r[h]?n(g(void 0,!0)):r[d](n,i)},i)}));else{var l=this[v].read();if(null!==l)return Promise.resolve(g(l,!1));a=new Promise(this[d])}return this[p]=a,a}},Symbol.asyncIterator,function(){return this}),s(a,"return",function(){var r=this;return new Promise(function(n,i){r[v].destroy(null,function(r){r?i(r):n(g(void 0,!0))})})}),a),x);r.exports=function(r){var n,i=Object.create(b,(s(n={},v,{value:r,writable:!0}),s(n,u,{value:null,writable:!0}),s(n,c,{value:null,writable:!0}),s(n,f,{value:null,writable:!0}),s(n,h,{value:r._readableState.endEmitted,writable:!0}),s(n,d,{value:function(r,n){var a=i[v].read();a?(i[p]=null,i[u]=null,i[c]=null,r(g(a,!1))):(i[u]=r,i[c]=n)},writable:!0}),n));return i[p]=null,l(r,function(r){if(r&&"ERR_STREAM_PREMATURE_CLOSE"!==r.code){var n=i[c];return null!==n&&(i[p]=null,i[u]=null,i[c]=null,n(r)),void(i[f]=r)}var a=i[u];null!==a&&(i[p]=null,i[u]=null,i[c]=null,a(g(void 0,!0))),i[h]=!0}),r.on("readable",m.bind(null,i)),i}},31125:function(r,n,i){"use strict";function a(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),i.push.apply(i,a)}return i}var o=i(12856).Buffer,s=i(69862).inspect,l=s&&s.custom||"inspect";r.exports=function(){var r;function n(){(function(r,n){if(!(r instanceof n))throw TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}return r=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(0!==this.length){var r=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(0===this.length)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(0===this.length)return o.alloc(0);for(var n,i,a=o.allocUnsafe(r>>>0),s=this.head,l=0;s;)n=s.data,i=l,o.prototype.copy.call(n,a,i),l+=s.data.length,s=s.next;return a}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):i=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,a=n.data;for(r-=a.length;n=n.next;){var o=n.data,s=r>o.length?o.length:r;if(s===o.length?a+=o:a+=o.slice(0,r),0==(r-=s)){s===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++i}return this.length-=i,a}},{key:"_getBuffer",value:function(r){var n=o.allocUnsafe(r),i=this.head,a=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,l=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,l),0==(r-=l)){l===s.length?(++a,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(l));break}++a}return this.length-=a,n}},{key:l,value:function(r,n){return s(this,function(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach(function(n){var a;a=i[n],n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(i,n))})}return r}({},n,{depth:0,customInspect:!1}))}}],function(r,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}(n.prototype,r),n}()},65756:function(r,n,i){"use strict";var a=i(90386);function o(r,n){l(r,n),s(r)}function s(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function l(r,n){r.emit("error",n)}r.exports={destroy:function(r,n){var i=this,u=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return u||c?n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,a.nextTick(l,this,r)):a.nextTick(l,this,r)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(r){!n&&r?i._writableState?i._writableState.errorEmitted?a.nextTick(s,i):(i._writableState.errorEmitted=!0,a.nextTick(o,i,r)):a.nextTick(o,i,r):n?(a.nextTick(s,i),n(r)):a.nextTick(s,i)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,n){var i=r._readableState,a=r._writableState;i&&i.autoDestroy||a&&a.autoDestroy?r.destroy(n):r.emit("error",n)}}},12726:function(r,n,i){"use strict";var a=i(74322).q.ERR_STREAM_PREMATURE_CLOSE;function o(){}r.exports=function r(n,i,s){if("function"==typeof i)return r(n,null,i);i||(i={}),l=s||o,u=!1,s=function(){if(!u){u=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];l.apply(this,n)}};var l,u,c=i.readable||!1!==i.readable&&n.readable,f=i.writable||!1!==i.writable&&n.writable,h=function(){n.writable||d()},p=n._writableState&&n._writableState.finished,d=function(){f=!1,p=!0,c||s.call(n)},v=n._readableState&&n._readableState.endEmitted,g=function(){c=!1,v=!0,f||s.call(n)},y=function(r){s.call(n,r)},m=function(){var r;return c&&!v?(n._readableState&&n._readableState.ended||(r=new a),s.call(n,r)):f&&!p?(n._writableState&&n._writableState.ended||(r=new a),s.call(n,r)):void 0},x=function(){n.req.on("finish",d)};return n.setHeader&&"function"==typeof n.abort?(n.on("complete",d),n.on("abort",m),n.req?x():n.on("request",x)):f&&!n._writableState&&(n.on("end",h),n.on("close",h)),n.on("end",g),n.on("finish",d),!1!==i.error&&n.on("error",y),n.on("close",m),function(){n.removeListener("complete",d),n.removeListener("abort",m),n.removeListener("request",x),n.req&&n.req.removeListener("finish",d),n.removeListener("end",h),n.removeListener("close",h),n.removeListener("finish",d),n.removeListener("end",g),n.removeListener("error",y),n.removeListener("close",m)}}},31748:function(r){r.exports=function(){throw Error("Readable.from is not available in the browser")}},10168:function(r,n,i){"use strict";var a,o=i(74322).q,s=o.ERR_MISSING_ARGS,l=o.ERR_STREAM_DESTROYED;function u(r){if(r)throw r}function c(r){r()}function f(r,n){return r.pipe(n)}r.exports=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];var h,p,d=(h=n).length?"function"!=typeof h[h.length-1]?u:h.pop():u;if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new s("streams");var v=n.map(function(r,o){var s,u,f,h,g,y,m=o<n.length-1;return s=o>0,f=u=function(r){p||(p=r),r&&v.forEach(c),m||(v.forEach(c),d(p))},h=!1,u=function(){h||(h=!0,f.apply(void 0,arguments))},g=!1,r.on("close",function(){g=!0}),void 0===a&&(a=i(12726)),a(r,{readable:m,writable:s},function(r){if(r)return u(r);g=!0,u()}),y=!1,function(n){if(!g&&!y)return y=!0,r.setHeader&&"function"==typeof r.abort?r.abort():"function"==typeof r.destroy?r.destroy():void u(n||new l("pipe"))}});return n.reduce(f)}},56306:function(r,n,i){"use strict";var a=i(74322).q.ERR_INVALID_OPT_VALUE;r.exports={getHighWaterMark:function(r,n,i,o){var s=null!=n.highWaterMark?n.highWaterMark:o?n[i]:null;if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new a(o?i:"highWaterMark",s);return Math.floor(s)}return r.objectMode?16:16384}}},71405:function(r,n,i){r.exports=i(15398).EventEmitter},68019:function(r,n,i){"use strict";var a=i(71665).Buffer,o=a.isEncoding||function(r){switch((r=""+r)&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(r){var n;switch(this.encoding=function(r){var n=function(r){if(!r)return"utf8";for(var n;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(n)return;r=(""+r).toLowerCase(),n=!0}}(r);if("string"!=typeof n&&(a.isEncoding===o||!o(r)))throw Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=c,this.end=f,n=4;break;case"utf8":this.fillLast=u,n=4;break;case"base64":this.text=h,this.end=p,n=3;break;default:return this.write=d,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(n)}function l(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function u(r){var n=this.lastTotal-this.lastNeed,i=function(r,n,i){if(128!=(192&n[0]))return r.lastNeed=0,"�";if(r.lastNeed>1&&n.length>1){if(128!=(192&n[1]))return r.lastNeed=1,"�";if(r.lastNeed>2&&n.length>2&&128!=(192&n[2]))return r.lastNeed=2,"�"}}(this,r);return void 0!==i?i:this.lastNeed<=r.length?(r.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(r.copy(this.lastChar,n,0,r.length),void(this.lastNeed-=r.length))}function c(r,n){if((r.length-n)%2==0){var i=r.toString("utf16le",n);if(i){var a=i.charCodeAt(i.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",n,r.length-1)}function f(r){var n=r&&r.length?this.write(r):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,i)}return n}function h(r,n){var i=(r.length-n)%3;return 0===i?r.toString("base64",n):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",n,r.length-i))}function p(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function d(r){return r.toString(this.encoding)}function v(r){return r&&r.length?this.write(r):""}n.s=s,s.prototype.write=function(r){var n,i;if(0===r.length)return"";if(this.lastNeed){if(void 0===(n=this.fillLast(r)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<r.length?n?n+this.text(r,i):this.text(r,i):n||""},s.prototype.end=function(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+"�":n},s.prototype.text=function(r,n){var i=function(r,n,i){var a=n.length-1;if(a<i)return 0;var o=l(n[a]);return o>=0?(o>0&&(r.lastNeed=o-1),o):--a<i||-2===o?0:(o=l(n[a]))>=0?(o>0&&(r.lastNeed=o-2),o):--a<i||-2===o?0:(o=l(n[a]))>=0?(o>0&&(2===o?o=0:r.lastNeed=o-3),o):0}(this,r,n);if(!this.lastNeed)return r.toString("utf8",n);this.lastTotal=i;var a=r.length-(i-this.lastNeed);return r.copy(this.lastChar,0,a),r.toString("utf8",n,a)},s.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length}},90715:function(r,n,i){var a=i(32791),s=i(41633)("stream-parser");function l(r){s("initializing parser stream"),r._parserBytesLeft=0,r._parserBuffers=[],r._parserBuffered=0,r._parserState=-1,r._parserCallback=null,"function"==typeof r.push&&(r._parserOutput=r.push.bind(r)),r._parserInit=!0}function u(r,n){a(!this._parserCallback,'there is already a "callback" set!'),a(isFinite(r)&&r>0,'can only buffer a finite number of bytes > 0, got "'+r+'"'),this._parserInit||l(this),s("buffering %o bytes",r),this._parserBytesLeft=r,this._parserCallback=n,this._parserState=0}function c(r,n){a(!this._parserCallback,'there is already a "callback" set!'),a(r>0,'can only skip > 0 bytes, got "'+r+'"'),this._parserInit||l(this),s("skipping %o bytes",r),this._parserBytesLeft=r,this._parserCallback=n,this._parserState=1}function f(r,n){a(!this._parserCallback,'There is already a "callback" set!'),a(r>0,'can only pass through > 0 bytes, got "'+r+'"'),this._parserInit||l(this),s("passing through %o bytes",r),this._parserBytesLeft=r,this._parserCallback=n,this._parserState=2}function h(r,n,i){this._parserInit||l(this),s("write(%o bytes)",r.length),"function"==typeof n&&(i=n),v(this,r,null,i)}function p(r,n,i){this._parserInit||l(this),s("transform(%o bytes)",r.length),"function"!=typeof n&&(n=this._parserOutput),v(this,r,n,i)}function d(r,n,i,a){if(r._parserBytesLeft-=n.length,s("%o bytes left for stream piece",r._parserBytesLeft),0===r._parserState?(r._parserBuffers.push(n),r._parserBuffered+=n.length):2===r._parserState&&i(n),0!==r._parserBytesLeft)return a;var l=r._parserCallback;if(l&&0===r._parserState&&r._parserBuffers.length>1&&(n=o.concat(r._parserBuffers,r._parserBuffered)),0!==r._parserState&&(n=null),r._parserCallback=null,r._parserBuffered=0,r._parserState=-1,r._parserBuffers.splice(0),l){var u=[];n&&u.push(n),i&&u.push(i);var c=l.length>u.length;c&&u.push(g(a));var f=l.apply(r,u);if(!c||a===f)return a}}r.exports=function(r){var n=r&&"function"==typeof r._transform,i=r&&"function"==typeof r._write;if(!n&&!i)throw Error("must pass a Writable or Transform stream in");s("extending Parser into stream"),r._bytes=u,r._skipBytes=c,n&&(r._passthrough=f),n?r._transform=p:r._write=h};var v=g(function r(n,i,a,o){return n._parserBytesLeft<=0?o(Error("got data but not currently parsing anything")):i.length<=n._parserBytesLeft?function(){return d(n,i,a,o)}:function(){var s=i.slice(0,n._parserBytesLeft);return d(n,s,a,function(l){return l?o(l):i.length>s.length?function(){return r(n,i.slice(s.length),a,o)}:void 0})}});function g(r){return function(){for(var n=r.apply(this,arguments);"function"==typeof n;)n=n();return n}}},41633:function(r,n,i){var a=i(90386);function o(){var r;try{r=n.storage.debug}catch(r){}return!r&&void 0!==a&&"env"in a&&(r=a.env.DEBUG),r}(n=r.exports=i(74469)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(r){var i=this.useColors;if(r[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+r[0]+(i?"%c ":" ")+"+"+n.humanize(this.diff),i){var a="color: "+this.color;r.splice(1,0,a,"color: inherit");var o=0,s=0;r[0].replace(/%[a-zA-Z%]/g,function(r){"%%"!==r&&(o++,"%c"===r&&(s=o))}),r.splice(s,0,a)}},n.save=function(r){try{null==r?n.storage.removeItem("debug"):n.storage.debug=r}catch(r){}},n.load=o,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(r){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(r){try{return JSON.stringify(r)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}},n.enable(o())},74469:function(r,n,i){var a;function o(r){function i(){if(i.enabled){var r=+new Date,o=r-(a||r);i.diff=o,i.prev=a,i.curr=r,a=r;for(var s=Array(arguments.length),l=0;l<s.length;l++)s[l]=arguments[l];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,a){if("%%"===r)return r;u++;var o=n.formatters[a];if("function"==typeof o){var l=s[u];r=o.call(i,l),s.splice(u,1),u--}return r}),n.formatArgs.call(i,s),(i.log||n.log||console.log.bind(console)).apply(i,s)}}return i.namespace=r,i.enabled=n.enabled(r),i.useColors=n.useColors(),i.color=function(r){var i,a=0;for(i in r)a=(a<<5)-a+r.charCodeAt(i)|0;return n.colors[Math.abs(a)%n.colors.length]}(r),"function"==typeof n.init&&n.init(i),i}(n=r.exports=o.debug=o.default=o).coerce=function(r){return r instanceof Error?r.stack||r.message:r},n.disable=function(){n.enable("")},n.enable=function(r){n.save(r),n.names=[],n.skips=[];for(var i=("string"==typeof r?r:"").split(/[\s,]+/),a=i.length,o=0;o<a;o++)i[o]&&("-"===(r=i[o].replace(/\*/g,".*?"))[0]?n.skips.push(RegExp("^"+r.substr(1)+"$")):n.names.push(RegExp("^"+r+"$")))},n.enabled=function(r){var i,a;for(i=0,a=n.skips.length;i<a;i++)if(n.skips[i].test(r))return!1;for(i=0,a=n.names.length;i<a;i++)if(n.names[i].test(r))return!0;return!1},n.humanize=i(11375),n.names=[],n.skips=[],n.formatters={}},11375:function(r){function n(r,n,i){if(!(r<n))return r<1.5*n?Math.floor(r/n)+" "+i:Math.ceil(r/n)+" "+i+"s"}r.exports=function(r,i){i=i||{};var a=typeof r;if("string"===a&&r.length>0)return function(r){if(!((r=String(r)).length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(n){var i=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(r);if("number"===a&&!1===isNaN(r))return i.long?n(r,864e5,"day")||n(r,36e5,"hour")||n(r,6e4,"minute")||n(r,1e3,"second")||r+" ms":r>=864e5?Math.round(r/864e5)+"d":r>=36e5?Math.round(r/36e5)+"h":r>=6e4?Math.round(r/6e4)+"m":r>=1e3?Math.round(r/1e3)+"s":r+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},99011:function(r,n,i){"use strict";var a=i(88641);r.exports=function(r,n,i){if(null==r)throw Error("First argument should be a string");if(null==n)throw Error("Separator should be a string or a RegExp");i?("string"==typeof i||Array.isArray(i))&&(i={ignore:i}):i={},null==i.escape&&(i.escape=!0),null==i.ignore?i.ignore=["[]","()","{}","<>",'""',"''","``","“”","\xab\xbb"]:("string"==typeof i.ignore&&(i.ignore=[i.ignore]),i.ignore=i.ignore.map(function(r){return 1===r.length&&(r+=r),r}));var o=a.parse(r,{flat:!0,brackets:i.ignore}),s=o[0].split(n);if(i.escape){for(var l=[],u=0;u<s.length;u++){var c=s[u],f=s[u+1];"\\"===c[c.length-1]&&"\\"!==c[c.length-2]?(l.push(c+n+f),u++):l.push(c)}s=l}for(u=0;u<s.length;u++)o[0]=s[u],s[u]=a.stringify(o,{flat:!0});return s}},68664:function(r){"use strict";r.exports=function(r){for(var n=r.length,i=Array(n),a=Array(n),o=Array(n),s=Array(n),l=Array(n),u=Array(n),c=0;c<n;++c)i[c]=-1,a[c]=0,o[c]=!1,s[c]=0,l[c]=-1,u[c]=[];var f,h=0,p=[],d=[];for(c=0;c<n;++c)i[c]<0&&function(n){var c=[n],f=[n];for(i[n]=a[n]=h,o[n]=!0,h+=1;f.length>0;){var v=r[n=f[f.length-1]];if(s[n]<v.length){for(var g=s[n];g<v.length;++g){var y=v[g];if(i[y]<0){i[y]=a[y]=h,o[y]=!0,h+=1,c.push(y),f.push(y);break}o[y]&&(a[n]=0|Math.min(a[n],a[y])),l[y]>=0&&u[n].push(l[y])}s[n]=g}else{if(a[n]===i[n]){var m=[],x=[],b=0;for(g=c.length-1;g>=0;--g){var _=c[g];if(o[_]=!1,m.push(_),x.push(u[_]),b+=u[_].length,l[_]=p.length,_===n){c.length=g;break}}p.push(m);var w=Array(b);for(g=0;g<x.length;g++)for(var T=0;T<x[g].length;T++)w[--b]=x[g][T];d.push(w)}f.pop()}}}(c);for(c=0;c<d.length;c++){var v=d[c];if(0!==v.length){v.sort(function(r,n){return r-n}),f=[v[0]];for(var g=1;g<v.length;g++)v[g]!==v[g-1]&&f.push(v[g]);d[c]=f}}return{components:p,adjacencyList:d}}},7095:function(r,n,i){"use strict";i.r(n);var a=2*Math.PI,o=function(r,n,i,a,o,s,l){var u=r.x,c=r.y;return{x:a*(u*=n)-o*(c*=i)+s,y:o*u+a*c+l}},s=function(r,n){var i=1.5707963267948966===n?.551915024494:-1.5707963267948966===n?-.551915024494:4/3*Math.tan(n/4),a=Math.cos(r),o=Math.sin(r),s=Math.cos(r+n),l=Math.sin(r+n);return[{x:a-o*i,y:o+a*i},{x:s+l*i,y:l-s*i},{x:s,y:l}]},l=function(r,n,i,a){var o=r*i+n*a;return o>1&&(o=1),o<-1&&(o=-1),(r*a-n*i<0?-1:1)*Math.acos(o)};n.default=function(r){var n,i,u,c,f,h,p,d,v,g,y,m,x,b,_,w=r.px,T=r.py,k=r.cx,A=r.cy,M=r.rx,S=r.ry,E=r.xAxisRotation,L=void 0===E?0:E,C=r.largeArcFlag,O=r.sweepFlag,P=[];if(0===M||0===S)return[];var I=Math.sin(L*a/360),D=Math.cos(L*a/360),z=D*(w-k)/2+I*(T-A)/2,R=-I*(w-k)/2+D*(T-A)/2;if(0===z&&0===R)return[];var F=Math.pow(z,2)/Math.pow(M=Math.abs(M),2)+Math.pow(R,2)/Math.pow(S=Math.abs(S),2);F>1&&(M*=Math.sqrt(F),S*=Math.sqrt(F));var B=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,n){var i=[],a=!0,o=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done)&&(i.push(l.value),4!==i.length);a=!0);}catch(r){o=!0,s=r}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return i}(r,4);throw TypeError("Invalid attempt to destructure non-iterable instance")}((n=M,i=S,u=void 0===C?0:C,c=void 0===O?0:O,f=Math.pow(n,2),h=Math.pow(i,2),p=Math.pow(z,2),(v=f*h-f*(d=Math.pow(R,2))-h*p)<0&&(v=0),v/=f*d+h*p,g=(v=Math.sqrt(v)*(u===c?-1:1))*n/i*R,y=-(v*i)/n*z,b=l(1,0,m=(z-g)/n,x=(R-y)/i),_=l(m,x,(-z-g)/n,(-R-y)/i),0===c&&_>0&&(_-=a),1===c&&_<0&&(_+=a),[D*g-I*y+(w+k)/2,I*g+D*y+(T+A)/2,b,_]),0),N=B[0],j=B[1],U=B[2],V=B[3],H=Math.abs(V)/(a/4);1e-7>Math.abs(1-H)&&(H=1);var q=Math.max(Math.ceil(H),1);V/=q;for(var G=0;G<q;G++)P.push(s(U,V)),U+=V;return P.map(function(r){var n=o(r[0],M,S,D,I,N,j),i=n.x,a=n.y,s=o(r[1],M,S,D,I,N,j),l=s.x,u=s.y,c=o(r[2],M,S,D,I,N,j);return{x1:i,y1:a,x2:l,y2:u,x:c.x,y:c.y}})}},1750:function(r,n,i){"use strict";var a=i(95616),o=i(65185),s=i(29988),l=i(89546),u=i(32791);r.exports=function(r){if(Array.isArray(r)&&1===r.length&&"string"==typeof r[0]&&(r=r[0]),"string"==typeof r&&(u(l(r),"String is not an SVG path."),r=a(r)),u(Array.isArray(r),"Argument should be a string or an array of path segments."),!(r=s(r=o(r))).length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],i=0,c=r.length;i<c;i++)for(var f=r[i].slice(1),h=0;h<f.length;h+=2)f[h+0]<n[0]&&(n[0]=f[h+0]),f[h+1]<n[1]&&(n[1]=f[h+1]),f[h+0]>n[2]&&(n[2]=f[h+0]),f[h+1]>n[3]&&(n[3]=f[h+1]);return n}},29988:function(r,n,i){"use strict";r.exports=function(r){for(var n,i=[],l=0,u=0,c=0,f=0,h=null,p=null,d=0,v=0,g=0,y=r.length;g<y;g++){var m=r[g],x=m[0];switch(x){case"M":c=m[1],f=m[2];break;case"A":var b=a({px:d,py:v,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!b.length)continue;for(var _,w=0;w<b.length;w++)m=["C",(_=b[w]).x1,_.y1,_.x2,_.y2,_.x,_.y],w<b.length-1&&i.push(m);break;case"S":var T=d,k=v;"C"!=n&&"S"!=n||(T+=T-l,k+=k-u),m=["C",T,k,m[1],m[2],m[3],m[4]];break;case"T":"Q"==n||"T"==n?(h=2*d-h,p=2*v-p):(h=d,p=v),m=s(d,v,h,p,m[1],m[2]);break;case"Q":h=m[1],p=m[2],m=s(d,v,m[1],m[2],m[3],m[4]);break;case"L":m=o(d,v,m[1],m[2]);break;case"H":m=o(d,v,m[1],v);break;case"V":m=o(d,v,d,m[1]);break;case"Z":m=o(d,v,c,f)}n=x,d=m[m.length-2],v=m[m.length-1],m.length>4?(l=m[m.length-4],u=m[m.length-3]):(l=d,u=v),i.push(m)}return i};var a=i(7095);function o(r,n,i,a){return["C",r,n,i,a,i,a]}function s(r,n,i,a,o,s){return["C",r/3+2/3*i,n/3+2/3*a,o/3+2/3*i,s/3+2/3*a,o,s]}},82019:function(r,n,i){"use strict";var a,o=i(1750),s=i(95616),l=i(31457),u=i(89546),c=i(44781),f=document.createElement("canvas"),h=f.getContext("2d");r.exports=function(r,n){if(!u(r))throw Error("Argument should be valid svg path string");n||(n={}),n.shape?(i=n.shape[0],p=n.shape[1]):(i=f.width=n.w||n.width||200,p=f.height=n.h||n.height||200);var i,p,d=Math.min(i,p),v=n.stroke||0,g=n.viewbox||n.viewBox||o(r),y=[i/(g[2]-g[0]),p/(g[3]-g[1])],m=Math.min(y[0]||0,y[1]||0)/2;if(h.fillStyle="black",h.fillRect(0,0,i,p),h.fillStyle="white",v&&("number"!=typeof v&&(v=1),h.strokeStyle=v>0?"white":"black",h.lineWidth=Math.abs(v)),h.translate(.5*i,.5*p),h.scale(m,m),function(){if(null!=a)return a;var r=document.createElement("canvas").getContext("2d");if(r.canvas.width=r.canvas.height=1,!window.Path2D)return a=!1;var n=new Path2D("M0,0h1v1h-1v-1Z");r.fillStyle="black",r.fill(n);var i=r.getImageData(0,0,1,1);return a=i&&i.data&&255===i.data[3]}()){var x=new Path2D(r);h.fill(x),v&&h.stroke(x)}else l(h,s(r)),h.fill(),v&&h.stroke();return h.setTransform(1,0,0,1,0,0),c(h,{cutoff:null!=n.cutoff?n.cutoff:.5,radius:null!=n.radius?n.radius:.5*d})}},84267:function(r,n,i){var a;!function(o){var s=/^\s+/,l=/\s+$/,u=0,c=o.round,f=o.min,h=o.max,p=o.random;function d(r,n){if(n=n||{},(r=r||"")instanceof d)return r;if(!(this instanceof d))return new d(r,n);var i,a,p,v,g,y,m,x,b,_,w,T,k,A,M,S,E,L,C,O,I=(g={r:0,g:0,b:0},y=1,m=null,x=null,b=null,_=!1,w=!1,"string"==typeof(i=r)&&(i=function(r){r=r.replace(s,"").replace(l,"").toLowerCase();var n,i=!1;if(P[r])r=P[r],i=!0;else if("transparent"==r)return{r:0,g:0,b:0,a:0,format:"name"};return(n=q.rgb.exec(r))?{r:n[1],g:n[2],b:n[3]}:(n=q.rgba.exec(r))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=q.hsl.exec(r))?{h:n[1],s:n[2],l:n[3]}:(n=q.hsla.exec(r))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=q.hsv.exec(r))?{h:n[1],s:n[2],v:n[3]}:(n=q.hsva.exec(r))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=q.hex8.exec(r))?{r:F(n[1]),g:F(n[2]),b:F(n[3]),a:F(n[4])/255,format:i?"name":"hex8"}:(n=q.hex6.exec(r))?{r:F(n[1]),g:F(n[2]),b:F(n[3]),format:i?"name":"hex"}:(n=q.hex4.exec(r))?{r:F(n[1]+""+n[1]),g:F(n[2]+""+n[2]),b:F(n[3]+""+n[3]),a:F(n[4]+""+n[4])/255,format:i?"name":"hex8"}:!!(n=q.hex3.exec(r))&&{r:F(n[1]+""+n[1]),g:F(n[2]+""+n[2]),b:F(n[3]+""+n[3]),format:i?"name":"hex"}}(i)),"object"==typeof i&&(G(i.r)&&G(i.g)&&G(i.b)?(a=i.r,p=i.g,v=i.b,g={r:255*z(a,255),g:255*z(p,255),b:255*z(v,255)},_=!0,w="%"===String(i.r).substr(-1)?"prgb":"rgb"):G(i.h)&&G(i.s)&&G(i.v)?(m=N(i.s),x=N(i.v),T=i.h,k=m,A=x,T=6*z(T,360),k=z(k,100),A=z(A,100),M=o.floor(T),S=T-M,E=A*(1-k),L=A*(1-S*k),C=A*(1-(1-S)*k),g={r:255*[A,L,E,E,C,A][O=M%6],g:255*[C,A,A,L,E,E][O],b:255*[E,E,C,A,A,L][O]},_=!0,w="hsv"):G(i.h)&&G(i.s)&&G(i.l)&&(m=N(i.s),b=N(i.l),g=function(r,n,i){var a,o,s;function l(r,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?r+6*(n-r)*i:i<.5?n:i<2/3?r+(n-r)*(2/3-i)*6:r}if(r=z(r,360),n=z(n,100),i=z(i,100),0===n)a=o=s=i;else{var u=i<.5?i*(1+n):i+n-i*n,c=2*i-u;a=l(c,u,r+1/3),o=l(c,u,r),s=l(c,u,r-1/3)}return{r:255*a,g:255*o,b:255*s}}(i.h,m,b),_=!0,w="hsl"),i.hasOwnProperty("a")&&(y=i.a)),y=D(y),{ok:_,format:i.format||w,r:f(255,h(g.r,0)),g:f(255,h(g.g,0)),b:f(255,h(g.b,0)),a:y});this._originalInput=r,this._r=I.r,this._g=I.g,this._b=I.b,this._a=I.a,this._roundA=c(100*this._a)/100,this._format=n.format||I.format,this._gradientType=n.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=I.ok,this._tc_id=u++}function v(r,n,i){var a,o,s=h(r=z(r,255),n=z(n,255),i=z(i,255)),l=f(r,n,i),u=(s+l)/2;if(s==l)a=o=0;else{var c=s-l;switch(o=u>.5?c/(2-s-l):c/(s+l),s){case r:a=(n-i)/c+(n<i?6:0);break;case n:a=(i-r)/c+2;break;case i:a=(r-n)/c+4}a/=6}return{h:a,s:o,l:u}}function g(r,n,i){var a,o,s=h(r=z(r,255),n=z(n,255),i=z(i,255)),l=f(r,n,i),u=s-l;if(o=0===s?0:u/s,s==l)a=0;else{switch(s){case r:a=(n-i)/u+(n<i?6:0);break;case n:a=(i-r)/u+2;break;case i:a=(r-n)/u+4}a/=6}return{h:a,s:o,v:s}}function y(r,n,i,a){var o=[B(c(r).toString(16)),B(c(n).toString(16)),B(c(i).toString(16))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function m(r,n,i,a){return[B(j(a)),B(c(r).toString(16)),B(c(n).toString(16)),B(c(i).toString(16))].join("")}function x(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.s-=n/100,i.s=R(i.s),d(i)}function b(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.s+=n/100,i.s=R(i.s),d(i)}function _(r){return d(r).desaturate(100)}function w(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.l+=n/100,i.l=R(i.l),d(i)}function T(r,n){n=0===n?0:n||10;var i=d(r).toRgb();return i.r=h(0,f(255,i.r-c(-n/100*255))),i.g=h(0,f(255,i.g-c(-n/100*255))),i.b=h(0,f(255,i.b-c(-n/100*255))),d(i)}function k(r,n){n=0===n?0:n||10;var i=d(r).toHsl();return i.l-=n/100,i.l=R(i.l),d(i)}function A(r,n){var i=d(r).toHsl(),a=(i.h+n)%360;return i.h=a<0?360+a:a,d(i)}function M(r){var n=d(r).toHsl();return n.h=(n.h+180)%360,d(n)}function S(r){var n=d(r).toHsl(),i=n.h;return[d(r),d({h:(i+120)%360,s:n.s,l:n.l}),d({h:(i+240)%360,s:n.s,l:n.l})]}function E(r){var n=d(r).toHsl(),i=n.h;return[d(r),d({h:(i+90)%360,s:n.s,l:n.l}),d({h:(i+180)%360,s:n.s,l:n.l}),d({h:(i+270)%360,s:n.s,l:n.l})]}function L(r){var n=d(r).toHsl(),i=n.h;return[d(r),d({h:(i+72)%360,s:n.s,l:n.l}),d({h:(i+216)%360,s:n.s,l:n.l})]}function C(r,n,i){n=n||6,i=i||30;var a=d(r).toHsl(),o=360/i,s=[d(r)];for(a.h=(a.h-(o*n>>1)+720)%360;--n;)a.h=(a.h+o)%360,s.push(d(a));return s}function O(r,n){n=n||6;for(var i=d(r).toHsv(),a=i.h,o=i.s,s=i.v,l=[],u=1/n;n--;)l.push(d({h:a,s:o,v:s})),s=(s+u)%1;return l}d.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(299*r.r+587*r.g+114*r.b)/1e3},getLuminance:function(){var r,n,i,a=this.toRgb();return r=a.r/255,n=a.g/255,i=a.b/255,.2126*(r<=.03928?r/12.92:o.pow((r+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:o.pow((i+.055)/1.055,2.4))},setAlpha:function(r){return this._a=D(r),this._roundA=c(100*this._a)/100,this},toHsv:function(){var r=g(this._r,this._g,this._b);return{h:360*r.h,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=g(this._r,this._g,this._b),n=c(360*r.h),i=c(100*r.s),a=c(100*r.v);return 1==this._a?"hsv("+n+", "+i+"%, "+a+"%)":"hsva("+n+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var r=v(this._r,this._g,this._b);return{h:360*r.h,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=v(this._r,this._g,this._b),n=c(360*r.h),i=c(100*r.s),a=c(100*r.l);return 1==this._a?"hsl("+n+", "+i+"%, "+a+"%)":"hsla("+n+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(r){return y(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){var n,i,a,o,s;return n=this._r,i=this._g,a=this._b,o=this._a,s=[B(c(n).toString(16)),B(c(i).toString(16)),B(c(a).toString(16)),B(j(o))],r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*z(this._r,255))+"%",g:c(100*z(this._g,255))+"%",b:c(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*z(this._r,255))+"%, "+c(100*z(this._g,255))+"%, "+c(100*z(this._b,255))+"%)":"rgba("+c(100*z(this._r,255))+"%, "+c(100*z(this._g,255))+"%, "+c(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[y(this._r,this._g,this._b,!0)]||!1)},toFilter:function(r){var n="#"+m(this._r,this._g,this._b,this._a),i=n,a=this._gradientType?"GradientType = 1, ":"";if(r){var o=d(r);i="#"+m(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+n+",endColorstr="+i+")"},toString:function(r){var n=!!r;r=r||this._format;var i=!1,a=this._a<1&&this._a>=0;return n||!a||"hex"!==r&&"hex6"!==r&&"hex3"!==r&&"hex4"!==r&&"hex8"!==r&&"name"!==r?("rgb"===r&&(i=this.toRgbString()),"prgb"===r&&(i=this.toPercentageRgbString()),"hex"!==r&&"hex6"!==r||(i=this.toHexString()),"hex3"===r&&(i=this.toHexString(!0)),"hex4"===r&&(i=this.toHex8String(!0)),"hex8"===r&&(i=this.toHex8String()),"name"===r&&(i=this.toName()),"hsl"===r&&(i=this.toHslString()),"hsv"===r&&(i=this.toHsvString()),i||this.toHexString()):"name"===r&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(r,n){var i=r.apply(null,[this].concat([].slice.call(n)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(A,arguments)},_applyCombination:function(r,n){return r.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},d.fromRatio=function(r,n){if("object"==typeof r){var i={};for(var a in r)r.hasOwnProperty(a)&&(i[a]="a"===a?r[a]:N(r[a]));r=i}return d(r,n)},d.equals=function(r,n){return!(!r||!n)&&d(r).toRgbString()==d(n).toRgbString()},d.random=function(){return d.fromRatio({r:p(),g:p(),b:p()})},d.mix=function(r,n,i){i=0===i?0:i||50;var a=d(r).toRgb(),o=d(n).toRgb(),s=i/100;return d({r:(o.r-a.r)*s+a.r,g:(o.g-a.g)*s+a.g,b:(o.b-a.b)*s+a.b,a:(o.a-a.a)*s+a.a})},d.readability=function(r,n){var i=d(r),a=d(n);return(o.max(i.getLuminance(),a.getLuminance())+.05)/(o.min(i.getLuminance(),a.getLuminance())+.05)},d.isReadable=function(r,n,i){var a,o,s,l,u,c=d.readability(r,n);switch(o=!1,("AA"!==(l=((s=(s=i)||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==l&&(l="AA"),"small"!==(u=(s.size||"small").toLowerCase())&&"large"!==u&&(u="small"),a={level:l,size:u}).level+a.size){case"AAsmall":case"AAAlarge":o=c>=4.5;break;case"AAlarge":o=c>=3;break;case"AAAsmall":o=c>=7}return o},d.mostReadable=function(r,n,i){var a,o,s,l,u=null,c=0;o=(i=i||{}).includeFallbackColors,s=i.level,l=i.size;for(var f=0;f<n.length;f++)(a=d.readability(r,n[f]))>c&&(c=a,u=d(n[f]));return d.isReadable(r,u,{level:s,size:l})||!o?u:(i.includeFallbackColors=!1,d.mostReadable(r,["#fff","#000"],i))};var P=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=d.hexNames=function(r){var n={};for(var i in r)r.hasOwnProperty(i)&&(n[r[i]]=i);return n}(P);function D(r){return(isNaN(r=parseFloat(r))||r<0||r>1)&&(r=1),r}function z(r,n){"string"==typeof(i=r)&&-1!=i.indexOf(".")&&1===parseFloat(i)&&(r="100%");var i,a,s="string"==typeof(a=r)&&-1!=a.indexOf("%");return r=f(n,h(0,parseFloat(r))),s&&(r=parseInt(r*n,10)/100),1e-6>o.abs(r-n)?1:r%n/parseFloat(n)}function R(r){return f(1,h(0,r))}function F(r){return parseInt(r,16)}function B(r){return 1==r.length?"0"+r:""+r}function N(r){return r<=1&&(r=100*r+"%"),r}function j(r){return o.round(255*parseFloat(r)).toString(16)}var U,V,H,q=(V="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",H="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:RegExp("rgb"+V),rgba:RegExp("rgba"+H),hsl:RegExp("hsl"+V),hsla:RegExp("hsla"+H),hsv:RegExp("hsv"+V),hsva:RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(r){return!!q.CSS_UNIT.exec(r)}r.exports?r.exports=d:void 0===(a=(function(){return d}).call(n,i,n,r))||(r.exports=a)}(Math)},57060:function(r){"use strict";r.exports=i,r.exports.float32=r.exports.float=i,r.exports.fract32=r.exports.fract=function(r,n){if(r.length){if(r instanceof Float32Array)return new Float32Array(r.length);n instanceof Float32Array||(n=i(r));for(var a=0,o=n.length;a<o;a++)n[a]=r[a]-n[a];return n}return i(r-i(r))};var n=new Float32Array(1);function i(r){return r.length?r instanceof Float32Array?r:new Float32Array(r):(n[0]=r,n[0])}},75686:function(r,n,i){"use strict";var a=i(25677);function o(r,n){var i=a(getComputedStyle(r).getPropertyValue(n));return i[0]*s(i[1],r)}function s(r,n){switch(n=n||document.body,r=(r||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),r){case"%":return n.clientHeight/100;case"ch":case"ex":var i,a,s,l;return i=r,a=n,(s=document.createElement("div")).style["font-size"]="128"+i,a.appendChild(s),l=o(s,"font-size")/128,a.removeChild(s),l;case"em":return o(n,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}r.exports=s},96892:function(r,n,i){"use strict";function a(r){return r}function o(r,n){return"string"==typeof n&&(n=r.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return s(r,n)})}:s(r,n)}function s(r,n){var i=n.id,o=n.bbox,s=null==n.properties?{}:n.properties,l=function(r,n){var i=function(r){if(null==r)return a;var n,i,o=r.scale[0],s=r.scale[1],l=r.translate[0],u=r.translate[1];return function(r,a){a||(n=i=0);var c=2,f=r.length,h=Array(f);for(h[0]=(n+=r[0])*o+l,h[1]=(i+=r[1])*s+u;c<f;)h[c]=r[c],++c;return h}}(r.transform),o=r.arcs;function s(r){return i(r)}function l(r){for(var n=[],a=0,s=r.length;a<s;++a)!function(r,n){n.length&&n.pop();for(var a=o[r<0?~r:r],s=0,l=a.length;s<l;++s)n.push(i(a[s],s));r<0&&function(r,n){for(var i,a=r.length,o=a-n;o<--a;)i=r[o],r[o++]=r[a],r[a]=i}(n,l)}(r[a],n);return n.length<2&&n.push(n[0]),n}function u(r){for(var n=l(r);n.length<4;)n.push(n[0]);return n}function c(r){return r.map(u)}return function r(n){var i,a=n.type;switch(a){case"GeometryCollection":return{type:a,geometries:n.geometries.map(r)};case"Point":i=s(n.coordinates);break;case"MultiPoint":i=n.coordinates.map(s);break;case"LineString":i=l(n.arcs);break;case"MultiLineString":i=n.arcs.map(l);break;case"Polygon":i=c(n.arcs);break;case"MultiPolygon":i=n.arcs.map(c);break;default:return null}return{type:a,coordinates:i}}(n)}(r,n);return null==i&&null==o?{type:"Feature",properties:s,geometry:l}:null==o?{type:"Feature",id:i,properties:s,geometry:l}:{type:"Feature",id:i,bbox:o,properties:s,geometry:l}}i.d(n,{zL:function(){return o}})},73116:function(r,n,i){"use strict";var a=i(24511);r.exports=function(r){if("function"!=typeof r||!hasOwnProperty.call(r,"length"))return!1;try{if("number"!=typeof r.length||"function"!=typeof r.call||"function"!=typeof r.apply)return!1}catch(r){return!1}return!a(r)}},69190:function(r,n,i){"use strict";var a=i(24582),o=i(47403),s=i(9234),l=i(6048),u=function(r,n){return r.replace("%v",l(n))};r.exports=function(r,n,i){if(!o(i))throw TypeError(u(n,r));if(!a(r)){if("default"in i)return i.default;if(i.isOptional)return null}var l=s(i.errorMessage);throw a(l)||(l=n),TypeError(u(l,r))}},18497:function(r){"use strict";r.exports=function(r){try{return r.toString()}catch(n){try{return String(r)}catch(r){return null}}}},6048:function(r,n,i){"use strict";var a=i(18497),o=/[\n\r\u2028\u2029]/g;r.exports=function(r){var n=a(r);return null===n?"<Non-coercible to string value>":(n.length>100&&(n=n.slice(0,99)+"…"),n=n.replace(o,function(r){switch(r){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("Unexpected character")}}))}},47403:function(r,n,i){"use strict";var a=i(24582),o={object:!0,function:!0,undefined:!0};r.exports=function(r){return!!a(r)&&hasOwnProperty.call(o,typeof r)}},82527:function(r,n,i){"use strict";var a=i(69190),o=i(84985);r.exports=function(r){return o(r)?r:a(r,"%v is not a plain function",arguments[1])}},84985:function(r,n,i){"use strict";var a=i(73116),o=/^\s*class[\s{/}]/,s=Function.prototype.toString;r.exports=function(r){return!!a(r)&&!o.test(s.call(r))}},24511:function(r,n,i){"use strict";var a=i(47403);r.exports=function(r){if(!a(r))return!1;try{return!!r.constructor&&r.constructor.prototype===r}catch(r){return!1}}},9234:function(r,n,i){"use strict";var a=i(24582),o=i(47403),s=Object.prototype.toString;r.exports=function(r){if(!a(r))return null;if(o(r)){var n=r.toString;if("function"!=typeof n||n===s)return null}try{return""+r}catch(r){return null}}},10424:function(r,n,i){"use strict";var a=i(69190),o=i(24582);r.exports=function(r){return o(r)?r:a(r,"Cannot use %v",arguments[1])}},24582:function(r){"use strict";r.exports=function(r){return null!=r}},58404:function(r,n,i){"use strict";var a=i(13547),o=i(12129),s=i(12856).Buffer;i.g.__TYPEDARRAY_POOL||(i.g.__TYPEDARRAY_POOL={UINT8:o([32,0]),UINT16:o([32,0]),UINT32:o([32,0]),BIGUINT64:o([32,0]),INT8:o([32,0]),INT16:o([32,0]),INT32:o([32,0]),BIGINT64:o([32,0]),FLOAT:o([32,0]),DOUBLE:o([32,0]),DATA:o([32,0]),UINT8C:o([32,0]),BUFFER:o([32,0])});var l="undefined"!=typeof Uint8ClampedArray,u="undefined"!=typeof BigUint64Array,c="undefined"!=typeof BigInt64Array,f=i.g.__TYPEDARRAY_POOL;f.UINT8C||(f.UINT8C=o([32,0])),f.BIGUINT64||(f.BIGUINT64=o([32,0])),f.BIGINT64||(f.BIGINT64=o([32,0])),f.BUFFER||(f.BUFFER=o([32,0]));var h=f.DATA,p=f.BUFFER;function d(r){if(r){var n=r.length||r.byteLength;h[a.log2(n)].push(r)}}function v(r){r=a.nextPow2(r);var n=h[a.log2(r)];return n.length>0?n.pop():new ArrayBuffer(r)}function g(r){return new Uint8Array(v(r),0,r)}function y(r){return new Uint16Array(v(2*r),0,r)}function m(r){return new Uint32Array(v(4*r),0,r)}function x(r){return new Int8Array(v(r),0,r)}function b(r){return new Int16Array(v(2*r),0,r)}function _(r){return new Int32Array(v(4*r),0,r)}function w(r){return new Float32Array(v(4*r),0,r)}function T(r){return new Float64Array(v(8*r),0,r)}function k(r){return l?new Uint8ClampedArray(v(r),0,r):g(r)}function A(r){return u?new BigUint64Array(v(8*r),0,r):null}function M(r){return c?new BigInt64Array(v(8*r),0,r):null}function S(r){return new DataView(v(r),0,r)}function E(r){r=a.nextPow2(r);var n=p[a.log2(r)];return n.length>0?n.pop():new s(r)}n.free=function(r){if(s.isBuffer(r))p[a.log2(r.length)].push(r);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(r)&&(r=r.buffer),!r)return;var n=r.length||r.byteLength;h[0|a.log2(n)].push(r)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeBigUint64=n.freeInt8=n.freeInt16=n.freeInt32=n.freeBigInt64=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(r){d(r.buffer)},n.freeArrayBuffer=d,n.freeBuffer=function(r){p[a.log2(r.length)].push(r)},n.malloc=function(r,n){if(void 0===n||"arraybuffer"===n)return v(r);switch(n){case"uint8":return g(r);case"uint16":return y(r);case"uint32":return m(r);case"int8":return x(r);case"int16":return b(r);case"int32":return _(r);case"float":case"float32":return w(r);case"double":case"float64":return T(r);case"uint8_clamped":return k(r);case"bigint64":return M(r);case"biguint64":return A(r);case"buffer":return E(r);case"data":case"dataview":return S(r)}return null},n.mallocArrayBuffer=v,n.mallocUint8=g,n.mallocUint16=y,n.mallocUint32=m,n.mallocInt8=x,n.mallocInt16=b,n.mallocInt32=_,n.mallocFloat32=n.mallocFloat=w,n.mallocFloat64=n.mallocDouble=T,n.mallocUint8Clamped=k,n.mallocBigUint64=A,n.mallocBigInt64=M,n.mallocDataView=S,n.mallocBuffer=E,n.clearCache=function(){for(var r=0;r<32;++r)f.UINT8[r].length=0,f.UINT16[r].length=0,f.UINT32[r].length=0,f.INT8[r].length=0,f.INT16[r].length=0,f.INT32[r].length=0,f.FLOAT[r].length=0,f.DOUBLE[r].length=0,f.BIGUINT64[r].length=0,f.BIGINT64[r].length=0,f.UINT8C[r].length=0,h[r].length=0,p[r].length=0}},90448:function(r){var n=/[\'\"]/;r.exports=function(r){return r?(n.test(r.charAt(0))&&(r=r.substr(1)),n.test(r.charAt(r.length-1))&&(r=r.substr(0,r.length-1)),r):""}},93447:function(r){"use strict";r.exports=function(r,n,i){Array.isArray(i)||(i=[].slice.call(arguments,2));for(var a=0,o=i.length;a<o;a++){var s,l=i[a];for(var u in l)if((void 0===n[u]||Array.isArray(n[u])||r[u]!==n[u])&&u in n){if(!0===l[u])s=n[u];else if(!1===l[u]||"function"==typeof l[u]&&void 0===(s=l[u](n[u],r,n)))continue;r[u]=s}}return r}},20588:function(r,n,i){function a(r){try{if(!i.g.localStorage)return!1}catch(r){return!1}var n=i.g.localStorage[r];return null!=n&&"true"===String(n).toLowerCase()}r.exports=function(r,n){if(a("noDeprecation"))return r;var i=!1;return function(){if(!i){if(a("throwDeprecation"))throw Error(n);a("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}}},45920:function(r){r.exports=function(r){return r&&"object"==typeof r&&"function"==typeof r.copy&&"function"==typeof r.fill&&"function"==typeof r.readUInt8}},4936:function(r,n,i){"use strict";var a=i(47216),o=i(65481),s=i(21099),l=i(9187);function u(r){return r.call.bind(r)}var c="undefined"!=typeof BigInt,f="undefined"!=typeof Symbol,h=u(Object.prototype.toString),p=u(Number.prototype.valueOf),d=u(String.prototype.valueOf),v=u(Boolean.prototype.valueOf);if(c)var g=u(BigInt.prototype.valueOf);if(f)var y=u(Symbol.prototype.valueOf);function m(r,n){if("object"!=typeof r)return!1;try{return n(r),!0}catch(r){return!1}}function x(r){return"[object Map]"===h(r)}function b(r){return"[object Set]"===h(r)}function _(r){return"[object WeakMap]"===h(r)}function w(r){return"[object WeakSet]"===h(r)}function T(r){return"[object ArrayBuffer]"===h(r)}function k(r){return"undefined"!=typeof ArrayBuffer&&(T.working?T(r):r instanceof ArrayBuffer)}function A(r){return"[object DataView]"===h(r)}function M(r){return"undefined"!=typeof DataView&&(A.working?A(r):r instanceof DataView)}n.isArgumentsObject=a,n.isGeneratorFunction=o,n.isTypedArray=l,n.isPromise=function(r){return"undefined"!=typeof Promise&&r instanceof Promise||null!==r&&"object"==typeof r&&"function"==typeof r.then&&"function"==typeof r.catch},n.isArrayBufferView=function(r){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(r):l(r)||M(r)},n.isUint8Array=function(r){return"Uint8Array"===s(r)},n.isUint8ClampedArray=function(r){return"Uint8ClampedArray"===s(r)},n.isUint16Array=function(r){return"Uint16Array"===s(r)},n.isUint32Array=function(r){return"Uint32Array"===s(r)},n.isInt8Array=function(r){return"Int8Array"===s(r)},n.isInt16Array=function(r){return"Int16Array"===s(r)},n.isInt32Array=function(r){return"Int32Array"===s(r)},n.isFloat32Array=function(r){return"Float32Array"===s(r)},n.isFloat64Array=function(r){return"Float64Array"===s(r)},n.isBigInt64Array=function(r){return"BigInt64Array"===s(r)},n.isBigUint64Array=function(r){return"BigUint64Array"===s(r)},x.working="undefined"!=typeof Map&&x(new Map),n.isMap=function(r){return"undefined"!=typeof Map&&(x.working?x(r):r instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),n.isSet=function(r){return"undefined"!=typeof Set&&(b.working?b(r):r instanceof Set)},_.working="undefined"!=typeof WeakMap&&_(new WeakMap),n.isWeakMap=function(r){return"undefined"!=typeof WeakMap&&(_.working?_(r):r instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),n.isWeakSet=function(r){return w(r)},T.working="undefined"!=typeof ArrayBuffer&&T(new ArrayBuffer),n.isArrayBuffer=k,A.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&A(new DataView(new ArrayBuffer(1),0,1)),n.isDataView=M;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(r){return"[object SharedArrayBuffer]"===h(r)}function L(r){return void 0!==S&&(void 0===E.working&&(E.working=E(new S)),E.working?E(r):r instanceof S)}function C(r){return m(r,p)}function O(r){return m(r,d)}function P(r){return m(r,v)}function I(r){return c&&m(r,g)}function D(r){return f&&m(r,y)}n.isSharedArrayBuffer=L,n.isAsyncFunction=function(r){return"[object AsyncFunction]"===h(r)},n.isMapIterator=function(r){return"[object Map Iterator]"===h(r)},n.isSetIterator=function(r){return"[object Set Iterator]"===h(r)},n.isGeneratorObject=function(r){return"[object Generator]"===h(r)},n.isWebAssemblyCompiledModule=function(r){return"[object WebAssembly.Module]"===h(r)},n.isNumberObject=C,n.isStringObject=O,n.isBooleanObject=P,n.isBigIntObject=I,n.isSymbolObject=D,n.isBoxedPrimitive=function(r){return C(r)||O(r)||P(r)||I(r)||D(r)},n.isAnyArrayBuffer=function(r){return"undefined"!=typeof Uint8Array&&(k(r)||L(r))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(n,r,{enumerable:!1,value:function(){throw Error(r+" is not supported in userland")}})})},43827:function(r,n,i){var a=i(90386),o=Object.getOwnPropertyDescriptors||function(r){for(var n=Object.keys(r),i={},a=0;a<n.length;a++)i[n[a]]=Object.getOwnPropertyDescriptor(r,n[a]);return i},s=/%[sdj%]/g;n.format=function(r){if(!_(r)){for(var n=[],i=0;i<arguments.length;i++)n.push(f(arguments[i]));return n.join(" ")}i=1;for(var a=arguments,o=a.length,l=String(r).replace(s,function(r){if("%%"===r)return"%";if(i>=o)return r;switch(r){case"%s":return String(a[i++]);case"%d":return Number(a[i++]);case"%j":try{return JSON.stringify(a[i++])}catch(r){return"[Circular]"}default:return r}}),u=a[i];i<o;u=a[++i])x(u)||!k(u)?l+=" "+u:l+=" "+f(u);return l},n.deprecate=function(r,i){if(void 0!==a&&!0===a.noDeprecation)return r;if(void 0===a)return function(){return n.deprecate(r,i).apply(this,arguments)};var o=!1;return function(){if(!o){if(a.throwDeprecation)throw Error(i);a.traceDeprecation?console.trace(i):console.error(i),o=!0}return r.apply(this,arguments)}};var l={},u=/^$/;if(a.env.NODE_DEBUG){var c=a.env.NODE_DEBUG;u=RegExp("^"+(c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function f(r,i){var a={seen:[],stylize:p};return arguments.length>=3&&(a.depth=arguments[2]),arguments.length>=4&&(a.colors=arguments[3]),m(i)?a.showHidden=i:i&&n._extend(a,i),w(a.showHidden)&&(a.showHidden=!1),w(a.depth)&&(a.depth=2),w(a.colors)&&(a.colors=!1),w(a.customInspect)&&(a.customInspect=!0),a.colors&&(a.stylize=h),d(a,r,a.depth)}function h(r,n){var i=f.styles[n];return i?"\x1b["+f.colors[i][0]+"m"+r+"\x1b["+f.colors[i][1]+"m":r}function p(r,n){return r}function d(r,i,a){if(r.customInspect&&i&&S(i.inspect)&&i.inspect!==n.inspect&&(!i.constructor||i.constructor.prototype!==i)){var o,s,l=i.inspect(a,r);return _(l)||(l=d(r,l,a)),l}var u=function(r,n){if(w(n))return r.stylize("undefined","undefined");if(_(n)){var i="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(i,"string")}return b(n)?r.stylize(""+n,"number"):m(n)?r.stylize(""+n,"boolean"):x(n)?r.stylize("null","null"):void 0}(r,i);if(u)return u;var c=Object.keys(i),f=(p={},c.forEach(function(r,n){p[r]=!0}),p);if(r.showHidden&&(c=Object.getOwnPropertyNames(i)),M(i)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return v(i);if(0===c.length){if(S(i)){var h=i.name?": "+i.name:"";return r.stylize("[Function"+h+"]","special")}if(T(i))return r.stylize(RegExp.prototype.toString.call(i),"regexp");if(A(i))return r.stylize(Date.prototype.toString.call(i),"date");if(M(i))return v(i)}var p,k,E="",L=!1,C=["{","}"];return y(i)&&(L=!0,C=["[","]"]),S(i)&&(E=" [Function"+(i.name?": "+i.name:"")+"]"),T(i)&&(E=" "+RegExp.prototype.toString.call(i)),A(i)&&(E=" "+Date.prototype.toUTCString.call(i)),M(i)&&(E=" "+v(i)),0!==c.length||L&&0!=i.length?a<0?T(i)?r.stylize(RegExp.prototype.toString.call(i),"regexp"):r.stylize("[Object]","special"):(r.seen.push(i),k=L?function(r,n,i,a,o){for(var s=[],l=0,u=n.length;l<u;++l)O(n,String(l))?s.push(g(r,n,i,a,String(l),!0)):s.push("");return o.forEach(function(o){o.match(/^\d+$/)||s.push(g(r,n,i,a,o,!0))}),s}(r,i,a,f,c):c.map(function(n){return g(r,i,a,f,n,L)}),r.seen.pop(),o=E,s=C,k.reduce(function(r,n){return n.indexOf("\n"),r+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?s[0]+(""===o?"":o+"\n ")+" "+k.join(",\n  ")+" "+s[1]:s[0]+o+" "+k.join(", ")+" "+s[1]):C[0]+E+C[1]}function v(r){return"["+Error.prototype.toString.call(r)+"]"}function g(r,n,i,a,o,s){var l,u,c;if((c=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]}).get?u=c.set?r.stylize("[Getter/Setter]","special"):r.stylize("[Getter]","special"):c.set&&(u=r.stylize("[Setter]","special")),O(a,o)||(l="["+o+"]"),u||(0>r.seen.indexOf(c.value)?(u=x(i)?d(r,c.value,null):d(r,c.value,i-1)).indexOf("\n")>-1&&(u=s?u.split("\n").map(function(r){return"  "+r}).join("\n").slice(2):"\n"+u.split("\n").map(function(r){return"   "+r}).join("\n")):u=r.stylize("[Circular]","special")),w(l)){if(s&&o.match(/^\d+$/))return u;(l=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.slice(1,-1),l=r.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=r.stylize(l,"string"))}return l+": "+u}function y(r){return Array.isArray(r)}function m(r){return"boolean"==typeof r}function x(r){return null===r}function b(r){return"number"==typeof r}function _(r){return"string"==typeof r}function w(r){return void 0===r}function T(r){return k(r)&&"[object RegExp]"===E(r)}function k(r){return"object"==typeof r&&null!==r}function A(r){return k(r)&&"[object Date]"===E(r)}function M(r){return k(r)&&("[object Error]"===E(r)||r instanceof Error)}function S(r){return"function"==typeof r}function E(r){return Object.prototype.toString.call(r)}function L(r){return r<10?"0"+r.toString(10):r.toString(10)}n.debuglog=function(r){if(!l[r=r.toUpperCase()]){if(u.test(r)){var i=a.pid;l[r]=function(){var a=n.format.apply(n,arguments);console.error("%s %d: %s",r,i,a)}}else l[r]=function(){}}return l[r]},n.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.types=i(4936),n.isArray=y,n.isBoolean=m,n.isNull=x,n.isNullOrUndefined=function(r){return null==r},n.isNumber=b,n.isString=_,n.isSymbol=function(r){return"symbol"==typeof r},n.isUndefined=w,n.isRegExp=T,n.types.isRegExp=T,n.isObject=k,n.isDate=A,n.types.isDate=A,n.isError=M,n.types.isNativeError=M,n.isFunction=S,n.isPrimitive=function(r){return null===r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||"symbol"==typeof r||void 0===r},n.isBuffer=i(45920);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(r,n){return Object.prototype.hasOwnProperty.call(r,n)}n.log=function(){var r,i;console.log("%s - %s",(i=[L((r=new Date).getHours()),L(r.getMinutes()),L(r.getSeconds())].join(":"),[r.getDate(),C[r.getMonth()],i].join(" ")),n.format.apply(n,arguments))},n.inherits=i(42018),n._extend=function(r,n){if(!n||!k(n))return r;for(var i=Object.keys(n),a=i.length;a--;)r[i[a]]=n[i[a]];return r};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(r,n){if(!r){var i=Error("Promise was rejected with a falsy value");i.reason=r,r=i}return n(r)}n.promisify=function(r){if("function"!=typeof r)throw TypeError('The "original" argument must be of type Function');if(P&&r[P]){var n;if("function"!=typeof(n=r[P]))throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(n,P,{value:n,enumerable:!1,writable:!1,configurable:!0}),n}function n(){for(var n,i,a=new Promise(function(r,a){n=r,i=a}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(r,a){r?i(r):n(a)});try{r.apply(this,o)}catch(r){i(r)}return a}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),P&&Object.defineProperty(n,P,{value:n,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(n,o(r))},n.promisify.custom=P,n.callbackify=function(r){if("function"!=typeof r)throw TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=n.pop();if("function"!=typeof o)throw TypeError("The last argument must be of type Function");var s=this,l=function(){return o.apply(s,arguments)};r.apply(this,n).then(function(r){a.nextTick(l.bind(null,null,r))},function(r){a.nextTick(I.bind(null,r,l))})}return Object.setPrototypeOf(n,Object.getPrototypeOf(r)),Object.defineProperties(n,o(r)),n}},40372:function(r,n,i){var a=i(86249);r.exports=function(r){return a("webgl",r)}},21099:function(r,n,i){"use strict";var a=i(31353),o=i(72077),s=i(6614),l=i(40383),u=s("Object.prototype.toString"),c=i(84543)(),f="undefined"==typeof globalThis?i.g:globalThis,h=o(),p=s("String.prototype.slice"),d={},v=Object.getPrototypeOf;c&&l&&v&&a(h,function(r){if("function"==typeof f[r]){var n=new f[r];if(Symbol.toStringTag in n){var i=v(n),a=l(i,Symbol.toStringTag);a||(a=l(v(i),Symbol.toStringTag)),d[r]=a.get}}});var g=i(9187);r.exports=function(r){var n;return!!g(r)&&(c&&Symbol.toStringTag in r?(n=!1,a(d,function(i,a){if(!n)try{var o=i.call(r);o===a&&(n=o)}catch(r){}}),n):p(u(r),8,-1))}},3961:function(r,n,i){var a=i(63489),o=i(56131),s=a.instance();function l(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,o(l.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,n){if("string"==typeof r){var i=r.match(c);return i?i[0]:""}var a=this._validateYear(r),o=r.month(),s=""+this.toChineseMonth(a,o);return n&&s.length<2&&(s="0"+s),this.isIntercalaryMonth(a,o)&&(s+="i"),s},monthNames:function(r){if("string"==typeof r){var n=r.match(f);return n?n[0]:""}var i=this._validateYear(r),a=r.month(),o=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(i,a)-1];return this.isIntercalaryMonth(i,a)&&(o="闰"+o),o},monthNamesShort:function(r){if("string"==typeof r){var n=r.match(h);return n?n[0]:""}var i=this._validateYear(r),a=r.month(),o=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(i,a)-1];return this.isIntercalaryMonth(i,a)&&(o="闰"+o),o},parseMonth:function(r,n){r=this._validateYear(r);var i,a=parseInt(n);if(isNaN(a))"闰"===n[0]&&(i=!0,n=n.substring(1)),"月"===n[n.length-1]&&(n=n.substring(0,n.length-1)),a=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(n);else{var o=n[n.length-1];i="i"===o||"I"===o}return this.toMonthIndex(r,a,i)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,n){if(r.year&&(r=r.year()),"number"!=typeof r||r<1888||r>2111)throw n.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,n,i){var o=this.intercalaryMonth(r);if(i&&n!==o||n<1||n>12)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return o?!i&&n<=o?n-1:n:n-1},toChineseMonth:function(r,n){r.year&&(n=(r=r.year()).month());var i=this.intercalaryMonth(r);if(n<0||n>(i?12:11))throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return i?n<i?n+1:n:n+1},intercalaryMonth:function(r){return p[(r=this._validateYear(r))-p[0]]>>13},isIntercalaryMonth:function(r,n){r.year&&(n=(r=r.year()).month());var i=this.intercalaryMonth(r);return!!i&&i===n},leapYear:function(r){return 0!==this.intercalaryMonth(r)},weekOfYear:function(r,n,i){var o,l=d[this._validateYear(r,a.local.invalidyear)-d[0]];return(o=s.newDate(l>>9&4095,l>>5&15,31&l)).add(4-(o.dayOfWeek()||7),"d"),1+Math.floor((this.toJD(r,n,i)-o.toJD())/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,n){r.year&&(n=r.month(),r=r.year());var i=p[(r=this._validateYear(r))-p[0]];if(n>(i>>13?12:11))throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return i&1<<12-n?30:29},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,u,i,a.local.invalidDate);r=this._validateYear(o.year()),n=o.month(),i=o.day();var l=this.isIntercalaryMonth(r,n),u=this.toChineseMonth(r,n),c=function(r,n,i,a,o){if("object"==typeof r)l=r,s=n||{};else{if(!("number"==typeof r&&r>=1888&&r<=2111))throw Error("Lunar year outside range 1888-2111");if(!("number"==typeof n&&n>=1&&n<=12))throw Error("Lunar month outside range 1 - 12");if(!("number"==typeof i&&i>=1&&i<=30))throw Error("Lunar day outside range 1 - 30");"object"==typeof a?(c=!1,s=a):(c=!!a,s={}),l={year:r,month:n,day:i,isIntercalary:c}}u=l.day-1;var s,l,u,c,f,h=p[l.year-p[0]],v=h>>13;f=v&&(l.month>v||l.isIntercalary)?l.month:l.month-1;for(var g=0;g<f;g++)u+=h&1<<12-g?30:29;var y=d[l.year-d[0]],m=new Date(y>>9&4095,(y>>5&15)-1,(31&y)+u);return s.year=m.getFullYear(),s.month=1+m.getMonth(),s.day=m.getDate(),s}(r,u,i,l);return s.toJD(c.year,c.month,c.day)},fromJD:function(r){var n=s.fromJD(r),i=function(r,n,i,a){if("object"==typeof r)l=r,u=n||{};else{if(!("number"==typeof r&&r>=1888&&r<=2111))throw Error("Solar year outside range 1888-2111");if(!("number"==typeof n&&n>=1&&n<=12))throw Error("Solar month outside range 1 - 12");if(!("number"==typeof i&&i>=1&&i<=31))throw Error("Solar day outside range 1 - 31");l={year:r,month:n,day:i},u={}}var o=d[l.year-d[0]],s=l.year<<9|l.month<<5|l.day;u.year=s>=o?l.year:l.year-1;var l,u,c,f=new Date((o=d[u.year-d[0]])>>9&4095,(o>>5&15)-1,31&o);c=Math.round((new Date(l.year,l.month-1,l.day)-f)/864e5);var h,v=p[u.year-p[0]];for(h=0;h<13;h++){var g=v&1<<12-h?30:29;if(c<g)break;c-=g}var y=v>>13;return!y||h<y?(u.isIntercalary=!1,u.month=1+h):(h===y?u.isIntercalary=!0:u.isIntercalary=!1,u.month=h),u.day=1+c,u}(n.year(),n.month(),n.day()),a=this.toMonthIndex(i.year,i.month,i.isIntercalary);return this.newDate(i.year,a,i.day)},fromString:function(r){var n=r.match(u),i=this._validateYear(+n[1]),a=+n[2],o=!!n[3],s=this.toMonthIndex(i,a,o),l=+n[4];return this.newDate(i,s,l)},add:function(r,n,i){var a=r.year(),o=r.month(),s=this.isIntercalaryMonth(a,o),u=this.toChineseMonth(a,o),c=Object.getPrototypeOf(l.prototype).add.call(this,r,n,i);if("y"===i){var f=c.year(),h=c.month(),p=this.isIntercalaryMonth(f,u),d=s&&p?this.toMonthIndex(f,u,!0):this.toMonthIndex(f,u,!1);d!==h&&c.month(d)}return c}});var u=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,c=/^\d?\d[iI]?/m,f=/^闰?十?[一二三四五六七八九]?月/m,h=/^闰?十?[一二三四五六七八九]?/m;a.calendars.chinese=l;var p=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return(r=n.year()+(0>n.year()?1:0))%4==3||r%4==-1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),13},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return(r=o.year())<0&&r++,o.day()+30*(o.month()-1)+365*(r-1)+Math.floor(r/4)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor(r)+.5-this.jdEpoch,i=Math.floor((n-Math.floor((n+366)/1461))/365)+1;i<=0&&i--;var a=Math.floor((n=Math.floor(r)+.5-this.newDate(i,1,1).toJD())/30)+1,o=n-30*(a-1)+1;return this.newDate(i,a,o)}}),a.calendars.coptic=s},86825:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),!1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),13},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),400},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(r,n,i){return(this._validate(r,n,i,a.local.invalidDate).day()+1)%8},weekDay:function(r,n,i){var a=this.dayOfWeek(r,n,i);return a>=2&&a<=6},extraInfo:function(r,n,i){return{century:l[Math.floor((this._validate(r,n,i,a.local.invalidDate).year()-1)/100)+1]||""}},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=o.year()+(0>o.year()?1:0),n=o.month(),(i=o.day())+(n>1?16:0)+(n>2?32*(n-2):0)+400*(r-1)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor((r=Math.floor(r+.5)-Math.floor(this.jdEpoch)-1)/400)+1;r-=400*(n-1);var i=Math.floor((r+=r>15?16:0)/32)+1,a=r-32*(i-1)+1;return this.newDate(n<=0?n-1:n,i,a)}});var l={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=s},37715:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return(r=n.year()+(0>n.year()?1:0))%4==3||r%4==-1},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),13},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(13===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return(r=o.year())<0&&r++,o.day()+30*(o.month()-1)+365*(r-1)+Math.floor(r/4)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor(r)+.5-this.jdEpoch,i=Math.floor((n-Math.floor((n+366)/1461))/365)+1;i<=0&&i--;var a=Math.floor((n=Math.floor(r)+.5-this.newDate(i,1,1).toJD())/30)+1,o=n-30*(a-1)+1;return this.newDate(i,a,o)}}),a.calendars.ethiopian=s},99384:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function l(r,n){return r-n*Math.floor(r/n)}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(r){return 7>l(7*(r=r<0?r+1:r)+1,19)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),this._leapYear(r.year?r.year():r)?13:12},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){return r=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year(),this.toJD(-1===r?1:r+1,7,1)-this.toJD(r,7,1)},daysInMonth:function(r,n){return r.year&&(n=r.month(),r=r.year()),this._validate(r,n,this.minDay,a.local.invalidMonth),12===n&&this.leapYear(r)||8===n&&5===l(this.daysInYear(r),10)?30:9===n&&3===l(this.daysInYear(r),10)?29:this.daysPerMonth[n-1]},weekDay:function(r,n,i){return 6!==this.dayOfWeek(r,n,i)},extraInfo:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);r=o.year(),n=o.month(),i=o.day();var s=r<=0?r+1:r,l=this.jdEpoch+this._delay1(s)+this._delay2(s)+i+1;if(n<7){for(var u=7;u<=this.monthsInYear(r);u++)l+=this.daysInMonth(r,u);for(u=1;u<n;u++)l+=this.daysInMonth(r,u)}else for(u=7;u<n;u++)l+=this.daysInMonth(r,u);return l},_delay1:function(r){var n=Math.floor((235*r-234)/19),i=29*n+Math.floor((12084+13753*n)/25920);return 3>l(3*(i+1),7)&&i++,i},_delay2:function(r){var n=this._delay1(r-1),i=this._delay1(r);return this._delay1(r+1)-i==356?2:i-n==382?1:0},fromJD:function(r){r=Math.floor(r)+.5;for(var n=Math.floor(98496*(r-this.jdEpoch)/35975351)-1;r>=this.toJD(-1===n?1:n+1,7,1);)n++;for(var i=r<this.toJD(n,1,1)?7:1;r>this.toJD(n,i,this.daysInMonth(n,i));)i++;var a=r-this.toJD(n,i,1)+1;return this.newDate(n,i,a)}}),a.calendars.hebrew=s},43805:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(r){return(11*this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year()+14)%30<11},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){return this.leapYear(r)?355:354},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 5!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=o.year(),n=o.month(),r=r<=0?r+1:r,(i=o.day())+Math.ceil(29.5*(n-1))+354*(r-1)+Math.floor((3+11*r)/30)+this.jdEpoch-1},fromJD:function(r){var n=Math.floor((30*((r=Math.floor(r)+.5)-this.jdEpoch)+10646)/10631);n=n<=0?n-1:n;var i=Math.min(12,Math.ceil((r-29-this.toJD(n,1,1))/29.5)+1),a=r-this.toJD(n,i,1)+1;return this.newDate(n,i,a)}}),a.calendars.islamic=s},88874:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return(r=0>n.year()?n.year()+1:n.year())%4==0},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=o.year(),n=o.month(),i=o.day(),r<0&&r++,n<=2&&(r--,n+=12),Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+i-1524.5},fromJD:function(r){var n=Math.floor(r+.5)+1524,i=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*i),o=Math.floor((n-a)/30.6001),s=o-Math.floor(o<14?1:13),l=i-Math.floor(s>2?4716:4715),u=n-a-Math.floor(30.6001*o);return l<=0&&l--,this.newDate(l,s,u)}}),a.calendars.julian=s},83290:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function l(r,n){return r-n*Math.floor(r/n)}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),!1},formatYear:function(r){var n=Math.floor((r=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year())/400);return r%=400,n+"."+Math.floor((r+=r<0?400:0)/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var n=0,i=0;i<r.length;i++){var a=parseInt(r[i],10);if(Math.abs(a)>19||i>0&&a<0)throw"Invalid Mayan year";n=20*n+a}return n},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),18},weekOfYear:function(r,n,i){return this._validate(r,n,i,a.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear),360},daysInMonth:function(r,n){return this._validate(r,n,this.minDay,a.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,n,i){return this._validate(r,n,i,a.local.invalidDate).day()},weekDay:function(r,n,i){return this._validate(r,n,i,a.local.invalidDate),!0},extraInfo:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate).toJD(),s=this._toHaab(o),l=this._toTzolkin(o);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(r){var n=l(8+(r-=this.jdEpoch)+340,365);return[Math.floor(n/20)+1,l(n,20)]},_toTzolkin:function(r){return[l(20+(r-=this.jdEpoch)-1,20)+1,l(r+4-1,13)+1]},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return o.day()+20*o.month()+360*o.year()+this.jdEpoch},fromJD:function(r){var n=Math.floor((r=Math.floor(r)+.5-this.jdEpoch)/360);r%=360;var i=Math.floor((r+=r<0?360:0)/20),a=r%20;return this.newDate(n,i,a)}}),a.calendars.mayan=s},29108:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar;var l=a.instance("gregorian");o(s.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return l.leapYear(n.year()+(1>n.year()?1:0)+1469)},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidMonth);(r=o.year())<0&&r++;for(var s=o.day(),u=1;u<o.month();u++)s+=this.daysPerMonth[u-1];return s+l.toJD(r+1468,3,13)},fromJD:function(r){r=Math.floor(r+.5);for(var n=Math.floor((r-(this.jdEpoch-1))/366);r>=this.toJD(n+1,1,1);)n++;for(var i=r-Math.floor(this.toJD(n,1,1)+.5)+1,a=1;i>this.daysInMonth(n,a);)i-=this.daysInMonth(n,a),a++;return this.newDate(n,a,i)}}),a.calendars.nanakshahi=s},55422:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(r){return this.daysInYear(r)!==this.daysPerYear},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){if(r=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[r])return this.daysPerYear;for(var n=0,i=this.minMonth;i<=12;i++)n+=this.NEPALI_CALENDAR_DATA[r][i];return n},daysInMonth:function(r,n){return r.year&&(n=r.month(),r=r.year()),this._validate(r,n,this.minDay,a.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[r]?this.daysPerMonth[n-1]:this.NEPALI_CALENDAR_DATA[r][n]},weekDay:function(r,n,i){return 6!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);r=o.year(),n=o.month(),i=o.day();var s=a.instance(),l=0,u=n,c=r;this._createMissingCalendarData(r);var f=r-(u>9||9===u&&i>=this.NEPALI_CALENDAR_DATA[c][0]?56:57);for(9!==n&&(l=i,u--);9!==u;)u<=0&&(u=12,c--),l+=this.NEPALI_CALENDAR_DATA[c][u],u--;return 9===n?(l+=i-this.NEPALI_CALENDAR_DATA[c][0])<0&&(l+=s.daysInYear(f)):l+=this.NEPALI_CALENDAR_DATA[c][9]-this.NEPALI_CALENDAR_DATA[c][0],s.newDate(f,1,1).add(l,"d").toJD()},fromJD:function(r){var n=a.instance().fromJD(r),i=n.year(),o=n.dayOfYear(),s=i+56;this._createMissingCalendarData(s);for(var l=9,u=this.NEPALI_CALENDAR_DATA[s][0],c=this.NEPALI_CALENDAR_DATA[s][l]-u+1;o>c;)++l>12&&(l=1,s++),c+=this.NEPALI_CALENDAR_DATA[s][l];var f=this.NEPALI_CALENDAR_DATA[s][l]-(c-o);return this.newDate(s,l,f)},_createMissingCalendarData:function(r){var n=this.daysPerMonth.slice(0);n.unshift(17);for(var i=r-1;i<r+2;i++)void 0===this.NEPALI_CALENDAR_DATA[i]&&(this.NEPALI_CALENDAR_DATA[i]=n)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),a.calendars.nepali=s},94320:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function l(r,n){return r-n*Math.floor(r/n)}s.prototype=new a.baseCalendar,o(s.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return 682*((n.year()-(n.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 5!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);r=o.year(),n=o.month(),i=o.day();var s=r-(r>=0?474:473),u=474+l(s,2820);return i+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*u-110)/2816)+365*(u-1)+1029983*Math.floor(s/2820)+this.jdEpoch-1},fromJD:function(r){var n=(r=Math.floor(r)+.5)-this.toJD(475,1,1),i=Math.floor(n/1029983),a=l(n,1029983),o=2820;if(1029982!==a){var s=Math.floor(a/366);o=Math.floor((2134*s+2816*l(a,366)+2815)/1028522)+s+1}var u=o+2820*i+474;u=u<=0?u-1:u;var c=r-this.toJD(u,1,1)+1,f=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),h=r-this.toJD(u,f,1)+1;return this.newDate(u,f,h)}}),a.calendars.persian=s,a.calendars.jalali=s},31320:function(r,n,i){var a=i(63489),o=i(56131),s=a.instance();function l(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,o(l.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(n.year()),s.leapYear(r)},weekOfYear:function(r,n,i){var o=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(o.year()),s.weekOfYear(r,o.month(),o.day())},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=this._t2gYear(o.year()),s.toJD(r,o.month(),o.day())},fromJD:function(r){var n=s.fromJD(r),i=this._g2tYear(n.year());return this.newDate(i,n.month(),n.day())},_t2gYear:function(r){return r+this.yearsOffset+(r>=-this.yearsOffset&&r<=-1?1:0)},_g2tYear:function(r){return r-this.yearsOffset-(r>=1&&r<=this.yearsOffset?1:0)}}),a.calendars.taiwan=l},51367:function(r,n,i){var a=i(63489),o=i(56131),s=a.instance();function l(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}l.prototype=new a.baseCalendar,o(l.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(n.year()),s.leapYear(r)},weekOfYear:function(r,n,i){var o=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return r=this._t2gYear(o.year()),s.weekOfYear(r,o.month(),o.day())},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,a.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate);return r=this._t2gYear(o.year()),s.toJD(r,o.month(),o.day())},fromJD:function(r){var n=s.fromJD(r),i=this._g2tYear(n.year());return this.newDate(i,n.month(),n.day())},_t2gYear:function(r){return r-this.yearsOffset-(r>=1&&r<=this.yearsOffset?1:0)},_g2tYear:function(r){return r+this.yearsOffset+(r>=-this.yearsOffset&&r<=-1?1:0)}}),a.calendars.thai=l},21457:function(r,n,i){var a=i(63489),o=i(56131);function s(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}s.prototype=new a.baseCalendar,o(s.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear);return 355===this.daysInYear(n.year())},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(r){for(var n=0,i=1;i<=12;i++)n+=this.daysInMonth(r,i);return n},daysInMonth:function(r,n){for(var i=this._validate(r,n,this.minDay,a.local.invalidMonth).toJD()-24e5+.5,o=0,s=0;s<l.length;s++){if(l[s]>i)return l[o]-l[o-1];o++}return 30},weekDay:function(r,n,i){return 5!==this.dayOfWeek(r,n,i)},toJD:function(r,n,i){var o=this._validate(r,n,i,a.local.invalidDate),s=12*(o.year()-1)+o.month()-15292;return o.day()+l[s-1]-1+24e5-.5},fromJD:function(r){for(var n=r-24e5+.5,i=0,a=0;a<l.length&&!(l[a]>n);a++)i++;var o=i+15292,s=Math.floor((o-1)/12),u=n-l[i-1]+1;return this.newDate(s+1,o-12*s,u)},isValid:function(r,n,i){var o=a.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(o=(r=null!=r.year?r.year:r)>=1276&&r<=1500),o},_validate:function(r,n,i,o){var s=a.baseCalendar.prototype._validate.apply(this,arguments);if(s.year<1276||s.year>1500)throw o.replace(/\{0\}/,this.local.name);return s}}),a.calendars.ummalqura=s;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(r,n,i){var a=i(56131);function o(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function s(r,n,i,a){if(this._calendar=r,this._year=n,this._month=i,this._day=a,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function l(r,n){return"000000".substring(0,n-(r=""+r).length)+r}function u(){this.shortYearCutoff="+10"}function c(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}a(o.prototype,{instance:function(r,n){r=(r||"gregorian").toLowerCase(),n=n||"";var i=this._localCals[r+"-"+n];if(!i&&this.calendars[r]&&(i=new this.calendars[r](n),this._localCals[r+"-"+n]=i),!i)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return i},newDate:function(r,n,i,a,o){return(a=(null!=r&&r.year?r.calendar():"string"==typeof a?this.instance(a,o):a)||this.instance()).newDate(r,n,i)},substituteDigits:function(r){return function(n){return(n+"").replace(/[0-9]/g,function(n){return r[n]})}},substituteChineseDigits:function(r,n){return function(i){for(var a="",o=0;i>0;){var s=i%10;a=(0===s?"":r[s]+n[o])+a,o++,i=Math.floor(i/10)}return 0===a.indexOf(r[1]+n[1])&&(a=a.substr(1)),a||r[0]}}}),a(s.prototype,{newDate:function(r,n,i){return this._calendar.newDate(null==r?this:r,n,i)},year:function(r){return 0==arguments.length?this._year:this.set(r,"y")},month:function(r){return 0==arguments.length?this._month:this.set(r,"m")},day:function(r){return 0==arguments.length?this._day:this.set(r,"d")},date:function(r,n,i){if(!this._calendar.isValid(r,n,i))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=n,this._day=i,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,n){return this._calendar.add(this,r,n)},set:function(r,n){return this._calendar.set(this,r,n)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var n=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return 0===n?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(0>this.year()?"-":"")+l(Math.abs(this.year()),4)+"-"+l(this.month(),2)+"-"+l(this.day(),2)}}),a(u.prototype,{_validateLevel:0,newDate:function(r,n,i){return null==r?this.today():(r.year&&(this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate),i=r.day(),n=r.month(),r=r.year()),new s(this,r,n,i))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){return 0>this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return(0>n.year()?"-":"")+l(Math.abs(n.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear),12},monthOfYear:function(r,n){var i=this._validate(r,n,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return(i.month()+this.monthsInYear(i)-this.firstMonth)%this.monthsInYear(i)+this.minMonth},fromMonthOfYear:function(r,n){var i=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,i,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth),i},daysInYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(r,n,i){return this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate),{}},add:function(r,n,i){return this._validate(r,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,n,i),n,i)},_add:function(r,n,i){if(this._validateLevel++,"d"===i||"w"===i){var a=r.toJD()+n*("w"===i?this.daysInWeek():1),o=r.calendar().fromJD(a);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var s=r.year()+("y"===i?n:0),l=r.monthOfYear()+("m"===i?n:0);o=r.day(),"y"===i?(r.month()!==this.fromMonthOfYear(s,l)&&(l=this.newDate(s,r.month(),this.minDay).monthOfYear()),l=Math.min(l,this.monthsInYear(s)),o=Math.min(o,this.daysInMonth(s,this.fromMonthOfYear(s,l)))):"m"===i&&(function(r){for(;l<r.minMonth;)s--,l+=r.monthsInYear(s);for(var n=r.monthsInYear(s);l>n-1+r.minMonth;)s++,l-=n,n=r.monthsInYear(s)}(this),o=Math.min(o,this.daysInMonth(s,this.fromMonthOfYear(s,l))));var u=[s,this.fromMonthOfYear(s,l),o];return this._validateLevel--,u}catch(r){throw this._validateLevel--,r}},_correctAdd:function(r,n,i,a){if(!(this.hasYearZero||"y"!==a&&"m"!==a||0!==n[0]&&r.year()>0==n[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];n=this._add(r,i*o[0]+(i<0?-1:1)*o[1],o[2])}return r.date(n[0],n[1],n[2])},set:function(r,n,i){this._validate(r,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate);var a="y"===i?n:r.year(),o="m"===i?n:r.month(),s="d"===i?n:r.day();return"y"!==i&&"m"!==i||(s=Math.min(s,this.daysInMonth(a,o))),r.date(a,o,s)},isValid:function(r,n,i){this._validateLevel++;var a=this.hasYearZero||0!==r;if(a){var o=this.newDate(r,n,this.minDay);a=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(o)&&i>=this.minDay&&i-this.minDay<this.daysInMonth(o)}return this._validateLevel--,a},toJSDate:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);return f.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(r){return this.fromJD(f.instance().fromJSDate(r).toJD())},_validate:function(r,n,i,a){if(r.year){if(0===this._validateLevel&&this.name!==r.calendar().name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(r,n,i))throw a.replace(/\{0\}/,this.local.name);var o=this.newDate(r,n,i);return this._validateLevel--,o}catch(r){throw this._validateLevel--,r}}}),c.prototype=new u,a(c.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return(r=n.year()+(0>n.year()?1:0))%4==0&&(r%100!=0||r%400==0)},weekOfYear:function(r,n,i){var a=this.newDate(r,n,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var i=this._validate(r,n,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(r,n,i){return 6>(this.dayOfWeek(r,n,i)||7)},toJD:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate);r=a.year(),n=a.month(),i=a.day(),r<0&&r++,n<3&&(n+=12,r--);var o=Math.floor(r/100);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+i+(2-o+Math.floor(o/4))-1524.5},fromJD:function(r){var n=Math.floor(r+.5),i=Math.floor((n-1867216.25)/36524.25),a=1524+(i=n+1+i-Math.floor(i/4)),o=Math.floor((a-122.1)/365.25),s=Math.floor(365.25*o),l=Math.floor((a-s)/30.6001),u=a-s-Math.floor(30.6001*l),c=l-(l>13.5?13:1),f=o-(c>2.5?4716:4715);return f<=0&&f--,this.newDate(f,c,u)},toJSDate:function(r,n,i){var a=this._validate(r,n,i,f.local.invalidDate||f.regionalOptions[""].invalidDate),o=new Date(a.year(),a.month()-1,a.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var f=r.exports=new o;f.cdate=s,f.baseCalendar=u,f.calendars.gregorian=c},94338:function(r,n,i){var a=i(56131),o=i(63489);a(o.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),o.local=o.regionalOptions[""],a(o.cdate.prototype,{formatDate:function(r,n){return"string"!=typeof r&&(n=r,r=""),this._calendar.formatDate(r||"",this,n)}}),a(o.baseCalendar.prototype,{UNIX_EPOCH:o.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:o.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,n,i){if("string"!=typeof r&&(i=n,n=r,r=""),!n)return"";if(n.calendar()!==this)throw o.local.invalidFormat||o.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;for(var a,s,l,u=(i=i||{}).dayNamesShort||this.local.dayNamesShort,c=i.dayNames||this.local.dayNames,f=i.monthNumbers||this.local.monthNumbers,h=i.monthNamesShort||this.local.monthNamesShort,p=i.monthNames||this.local.monthNames,d=(i.calculateWeek||this.local.calculateWeek,function(n,i){for(var a=1;b+a<r.length&&r.charAt(b+a)===n;)a++;return b+=a-1,Math.floor(a/(i||1))>1}),v=function(r,n,i,a){var o=""+n;if(d(r,a))for(;o.length<i;)o="0"+o;return o},g=this.local.digits,y=function(r){return i.localNumbers&&g?g(r):r},m="",x=!1,b=0;b<r.length;b++)if(x)"'"!==r.charAt(b)||d("'")?m+=r.charAt(b):x=!1;else switch(r.charAt(b)){case"d":m+=y(v("d",n.day(),2));break;case"D":m+=(l=n.dayOfWeek(),d("D")?c[l]:u[l]);break;case"o":m+=v("o",n.dayOfYear(),3);break;case"w":m+=v("w",n.weekOfYear(),2);break;case"m":m+=(a=n,"function"==typeof f?f.call(this,a,d("m")):y(v("m",a.month(),2)));break;case"M":m+=(s=n,d("M")?"function"==typeof p?p.call(this,s):p[s.month()-this.minMonth]:"function"==typeof h?h.call(this,s):h[s.month()-this.minMonth]);break;case"y":m+=d("y",2)?n.year():(n.year()%100<10?"0":"")+n.year()%100;break;case"Y":d("Y",2),m+=n.formatYear();break;case"J":m+=n.toJD();break;case"@":m+=(n.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(n.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":d("'")?m+="'":x=!0;break;default:m+=r.charAt(b)}return m},parseDate:function(r,n,i){if(null==n)throw o.local.invalidArguments||o.regionalOptions[""].invalidArguments;if(""===(n="object"==typeof n?n.toString():n+""))return null;r=r||this.local.dateFormat;var a=(i=i||{}).shortYearCutoff||this.shortYearCutoff;a="string"!=typeof a?a:this.today().year()%100+parseInt(a,10);for(var s=i.dayNamesShort||this.local.dayNamesShort,l=i.dayNames||this.local.dayNames,u=i.parseMonth||this.local.parseMonth,c=i.monthNumbers||this.local.monthNumbers,f=i.monthNamesShort||this.local.monthNamesShort,h=i.monthNames||this.local.monthNames,p=-1,d=-1,v=-1,g=-1,y=-1,m=!1,x=!1,b=function(n,i){for(var a=1;M+a<r.length&&r.charAt(M+a)===n;)a++;return M+=a-1,Math.floor(a/(i||1))>1},_=function(r,i){var a=b(r,i),s=RegExp("^-?\\d{1,"+[2,3,a?4:2,a?4:2,10,11,20]["oyYJ@!".indexOf(r)+1]+"}"),l=n.substring(A).match(s);if(!l)throw(o.local.missingNumberAt||o.regionalOptions[""].missingNumberAt).replace(/\{0\}/,A);return A+=l[0].length,parseInt(l[0],10)},w=this,T=function(r,i,a,s){for(var l=b(r,s)?a:i,u=0;u<l.length;u++)if(n.substr(A,l[u].length).toLowerCase()===l[u].toLowerCase())return A+=l[u].length,u+w.minMonth;throw(o.local.unknownNameAt||o.regionalOptions[""].unknownNameAt).replace(/\{0\}/,A)},k=function(){if(n.charAt(A)!==r.charAt(M))throw(o.local.unexpectedLiteralAt||o.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,A);A++},A=0,M=0;M<r.length;M++)if(x)"'"!==r.charAt(M)||b("'")?k():x=!1;else switch(r.charAt(M)){case"d":g=_("d");break;case"D":T("D",s,l);break;case"o":y=_("o");break;case"w":_("w");break;case"m":v=function(){if("function"==typeof c){b("m");var r=c.call(w,n.substring(A));return A+=r.length,r}return _("m")}();break;case"M":v=function(){if("function"==typeof h){var r=b("M")?h.call(w,n.substring(A)):f.call(w,n.substring(A));return A+=r.length,r}return T("M",f,h)}();break;case"y":var S=M;m=!b("y",2),M=S,d=_("y",2);break;case"Y":d=_("Y",2);break;case"J":p=_("J")+.5,"."===n.charAt(A)&&(A++,_("J"));break;case"@":p=_("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":p=_("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":A=n.length;break;case"'":b("'")?k():x=!0;break;default:k()}if(A<n.length)throw o.local.unexpectedText||o.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():d<100&&m&&(d+=-1===a?1900:this.today().year()-this.today().year()%100-(d<=a?0:100)),"string"==typeof v&&(v=u.call(this,d,v)),y>-1){v=1,g=y;for(var E=this.daysInMonth(d,v);g>E;E=this.daysInMonth(d,v))v++,g-=E}return p>-1?this.fromJD(p):this.newDate(d,v,g)},determineDate:function(r,n,i,a,o){i&&"object"!=typeof i&&(o=a,a=i,i=null),"string"!=typeof a&&(o=a,a="");var s=this;return n=n?n.newDate():null,null==r?n:"string"==typeof r?function(r){try{return s.parseDate(a,r,o)}catch(r){}for(var n=((r=r.toLowerCase()).match(/^c/)&&i?i.newDate():null)||s.today(),l=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,u=l.exec(r);u;)n.add(parseInt(u[1],10),u[2]||"d"),u=l.exec(r);return n}(r):"number"==typeof r?isNaN(r)||r===1/0||r===-1/0?n:s.today().add(r,"d"):s.newDate(r)}})},69862:function(){},40964:function(){},72077:function(r,n,i){"use strict";var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?i.g:globalThis;r.exports=function(){for(var r=[],n=0;n<a.length;n++)"function"==typeof o[a[n]]&&(r[r.length]=a[n]);return r}},81684:function(r,n,i){"use strict";function a(r,n,i){r.prototype=n.prototype=i,i.constructor=r}function o(r,n){var i=Object.create(r.prototype);for(var a in n)i[a]=n[a];return i}function s(){}i.d(n,{sX:function(){return function r(n,i){var a,o,s=Z(i);return null==i||"boolean"===s?B(i):("number"===s?V:"string"===s?(a=_(i))?(i=a,j):function(r,n){var i,a,o,s,l,u=q.lastIndex=G.lastIndex=0,c=-1,f=[],h=[];for(r+="",n+="";(o=q.exec(r))&&(s=G.exec(n));)(l=s.index)>u&&(l=n.slice(u,l),f[c]?f[c]+=l:f[++c]=l),(o=o[0])===(s=s[0])?f[c]?f[c]+=s:f[++c]=s:(f[++c]=null,h.push({i:c,x:V(o,s)})),u=G.lastIndex;return u<n.length&&(l=n.slice(u),f[c]?f[c]+=l:f[++c]=l),f.length<2?h[0]?(i=h[0].x,function(r){return i(r)+""}):(a=n,function(){return a}):(n=h.length,function(r){for(var i,a=0;a<n;++a)f[(i=h[a]).i]=i.x(r);return f.join("")})}:i instanceof _?j:i instanceof Date?function(r,n){var i=new Date;return r=+r,n=+n,function(a){return i.setTime(r*(1-a)+n*a),i}}:!ArrayBuffer.isView(o=i)||o instanceof DataView?Array.isArray(i)?function(n,i){var a,o=i?i.length:0,s=n?Math.min(o,n.length):0,l=Array(s),u=Array(o);for(a=0;a<s;++a)l[a]=r(n[a],i[a]);for(;a<o;++a)u[a]=i[a];return function(r){for(a=0;a<s;++a)u[a]=l[a](r);return u}}:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?function(n,i){var a,o={},s={};for(a in null!==n&&"object"===H(n)||(n={}),null!==i&&"object"===H(i)||(i={}),i)a in n?o[a]=r(n[a],i[a]):s[a]=i[a];return function(r){for(a in o)s[a]=o[a](r);return s}}:V:function(r,n){n||(n=[]);var i,a=r?Math.min(n.length,r.length):0,o=n.slice();return function(s){for(i=0;i<a;++i)o[i]=r[i]*(1-s)+n[i]*s;return o}})(n,i)}},k4:function(){return V}});var l="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\(".concat(l,",").concat(l,",").concat(l,"\\)$")),p=new RegExp("^rgb\\(".concat(c,",").concat(c,",").concat(c,"\\)$")),d=new RegExp("^rgba\\(".concat(l,",").concat(l,",").concat(l,",").concat(u,"\\)$")),v=new RegExp("^rgba\\(".concat(c,",").concat(c,",").concat(c,",").concat(u,"\\)$")),g=new RegExp("^hsl\\(".concat(u,",").concat(c,",").concat(c,"\\)$")),y=new RegExp("^hsla\\(".concat(u,",").concat(c,",").concat(c,",").concat(u,"\\)$")),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function _(r){var n,i;return r=(r+"").trim().toLowerCase(),(n=f.exec(r))?(i=n[1].length,n=parseInt(n[1],16),6===i?w(n):3===i?new A(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===i?T(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===i?T(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=h.exec(r))?new A(n[1],n[2],n[3],1):(n=p.exec(r))?new A(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=d.exec(r))?T(n[1],n[2],n[3],n[4]):(n=v.exec(r))?T(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=g.exec(r))?O(n[1],n[2]/100,n[3]/100,1):(n=y.exec(r))?O(n[1],n[2]/100,n[3]/100,n[4]):m.hasOwnProperty(r)?w(m[r]):"transparent"===r?new A(NaN,NaN,NaN,0):null}function w(r){return new A(r>>16&255,r>>8&255,255&r,1)}function T(r,n,i,a){return a<=0&&(r=n=i=NaN),new A(r,n,i,a)}function k(r,n,i,a){var o;return 1==arguments.length?((o=r)instanceof s||(o=_(o)),o?new A((o=o.rgb()).r,o.g,o.b,o.opacity):new A):new A(r,n,i,null==a?1:a)}function A(r,n,i,a){this.r=+r,this.g=+n,this.b=+i,this.opacity=+a}function M(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function S(){var r=E(this.opacity);return"".concat(1===r?"rgb(":"rgba(").concat(L(this.r),", ").concat(L(this.g),", ").concat(L(this.b)).concat(1===r?")":", ".concat(r,")"))}function E(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function L(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function C(r){return((r=L(r))<16?"0":"")+r.toString(16)}function O(r,n,i,a){return a<=0?r=n=i=NaN:i<=0||i>=1?r=n=NaN:n<=0&&(r=NaN),new I(r,n,i,a)}function P(r){if(r instanceof I)return new I(r.h,r.s,r.l,r.opacity);if(r instanceof s||(r=_(r)),!r)return new I;if(r instanceof I)return r;var n=(r=r.rgb()).r/255,i=r.g/255,a=r.b/255,o=Math.min(n,i,a),l=Math.max(n,i,a),u=NaN,c=l-o,f=(l+o)/2;return c?(u=n===l?(i-a)/c+6*(i<a):i===l?(a-n)/c+2:(n-i)/c+4,c/=f<.5?l+o:2-l-o,u*=60):c=f>0&&f<1?0:u,new I(u,c,f,r.opacity)}function I(r,n,i,a){this.h=+r,this.s=+n,this.l=+i,this.opacity=+a}function D(r){return(r=(r||0)%360)<0?r+360:r}function z(r){return Math.max(0,Math.min(1,r||0))}function R(r,n,i){return 255*(r<60?n+(i-n)*r/60:r<180?i:r<240?n+(i-n)*(240-r)/60:n)}function F(r,n,i,a,o){var s=r*r,l=s*r;return((1-3*r+3*s-l)*n+(4-6*s+3*l)*i+(1+3*r+3*s-3*l)*a+l*o)/6}a(s,_,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:b,toString:b}),a(A,k,o(s,{brighter:function(r){return r=null==r?1.4285714285714286:Math.pow(1.4285714285714286,r),new A(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new A(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},clamp:function(){return new A(L(this.r),L(this.g),L(this.b),E(this.opacity))},displayable:function(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),a(I,function(r,n,i,a){return 1==arguments.length?P(r):new I(r,n,i,null==a?1:a)},o(s,{brighter:function(r){return r=null==r?1.4285714285714286:Math.pow(1.4285714285714286,r),new I(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=null==r?.7:Math.pow(.7,r),new I(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+360*(this.h<0),n=isNaN(r)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*n,o=2*i-a;return new A(R(r>=240?r-240:r+120,o,a),R(r,o,a),R(r<120?r+240:r-120,o,a),this.opacity)},clamp:function(){return new I(D(this.h),z(this.s),z(this.l),E(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var r=E(this.opacity);return"".concat(1===r?"hsl(":"hsla(").concat(D(this.h),", ").concat(100*z(this.s),"%, ").concat(100*z(this.l),"%").concat(1===r?")":", ".concat(r,")"))}}));var B=function(r){return function(){return r}};function N(r,n){var i=n-r;return i?function(n){return r+n*i}:B(isNaN(r)?n:r)}var j=function r(n){var i,a=1==(i=+(i=n))?N:function(r,n){var a,o,s;return n-r?(a=r,o=n,a=Math.pow(a,s=i),o=Math.pow(o,s)-a,s=1/s,function(r){return Math.pow(a+r*o,s)}):B(isNaN(r)?n:r)};function o(r,n){var i=a((r=k(r)).r,(n=k(n)).r),o=a(r.g,n.g),s=a(r.b,n.b),l=N(r.opacity,n.opacity);return function(n){return r.r=i(n),r.g=o(n),r.b=s(n),r.opacity=l(n),r+""}}return o.gamma=r,o}(1);function U(r){return function(n){var i,a,o=n.length,s=Array(o),l=Array(o),u=Array(o);for(i=0;i<o;++i)a=k(n[i]),s[i]=a.r||0,l[i]=a.g||0,u[i]=a.b||0;return s=r(s),l=r(l),u=r(u),a.opacity=1,function(r){return a.r=s(r),a.g=l(r),a.b=u(r),a+""}}}function V(r,n){return r=+r,n=+n,function(i){return r*(1-i)+n*i}}function H(r){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}U(function(r){var n=r.length-1;return function(i){var a=i<=0?i=0:i>=1?(i=1,n-1):Math.floor(i*n),o=r[a],s=r[a+1],l=a>0?r[a-1]:2*o-s,u=a<n-1?r[a+2]:2*s-o;return F((i-a/n)*n,l,o,s,u)}}),U(function(r){var n=r.length;return function(i){var a=Math.floor(((i%=1)<0?++i:i)*n),o=r[(a+n-1)%n],s=r[a%n],l=r[(a+1)%n],u=r[(a+2)%n];return F((i-a/n)*n,o,s,l,u)}});var q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G=RegExp(q.source,"g");function Z(r){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}},40402:function(r){"use strict";r.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(r){"use strict";r.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(r){"use strict";r.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(r){"use strict";r.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(r){"use strict";r.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(r){"use strict";r.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},n={};function i(a){var o=n[a];if(void 0!==o)return o.exports;var s=n[a]={exports:{}};return r[a].call(s.exports,s,s.exports,i),s.exports}return i.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(n,{a:n}),n},i.d=function(r,n){for(var a in n)i.o(n,a)&&!i.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:n[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(r){if("object"==typeof window)return window}}(),i.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},i.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i(27909)}()},r.exports=a()}}]);