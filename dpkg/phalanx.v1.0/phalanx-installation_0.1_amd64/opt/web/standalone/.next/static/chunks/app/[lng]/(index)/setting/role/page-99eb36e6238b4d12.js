(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9162],{48730:function(e,t,n){var r={"./en-US/home.json":[34102,4102],"./en-US/login.json":[59751,9751],"./en-US/register.json":[13223,3223],"./en-US/setting/menu.json":[23588,3588],"./en-US/setting/power.json":[97456,7456],"./en-US/setting/role.json":[18202,8202],"./en-US/setting/user.json":[80157,157],"./en-US/sidebar.json":[43759,3759],"./en-US/task/exploit.json":[70383,383],"./en-US/task/reconnaissance.json":[59786,9786],"./en-US/task/reconnaissance/executivePDF.json":[19774,9459],"./en-US/task/reconnaissance/pdf.json":[96600,6600],"./en-US/task/reconnaissance/report.json":[96872,6872],"./jp/home.json":[16734,6734],"./jp/login.json":[70848,848],"./jp/register.json":[90320,320],"./jp/setting/menu.json":[84168,4168],"./jp/setting/power.json":[15810,5810],"./jp/setting/role.json":[43909,3909],"./jp/setting/user.json":[76727,6727],"./jp/sidebar.json":[40802,802],"./jp/task/exploit.json":[91487,1487],"./jp/task/reconnaissance.json":[22253,2253],"./jp/task/reconnaissance/executivePDF.json":[19810,9810],"./jp/task/reconnaissance/pdf.json":[37950,7950],"./jp/task/reconnaissance/report.json":[99784,9784],"./zh-TW/home.json":[44744,4744],"./zh-TW/login.json":[36937,6937],"./zh-TW/register.json":[95199,5199],"./zh-TW/setting/menu.json":[91812,1812],"./zh-TW/setting/power.json":[31391,1391],"./zh-TW/setting/role.json":[80407,407],"./zh-TW/setting/user.json":[76355,6355],"./zh-TW/sidebar.json":[56956,6956],"./zh-TW/task/exploit.json":[65019,5019],"./zh-TW/task/reconnaissance.json":[13729,3729],"./zh-TW/task/reconnaissance/executivePDF.json":[13093,3093],"./zh-TW/task/reconnaissance/pdf.json":[53431,3431],"./zh-TW/task/reconnaissance/report.json":[70345,345]};function s(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],s=t[0];return n.e(t[1]).then(function(){return n.t(s,19)})}s.keys=function(){return Object.keys(r)},s.id=48730,e.exports=s},46109:function(e,t,n){Promise.resolve().then(n.bind(n,15070))},4369:function(e,t){"use strict";t.Z={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"}},15070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(57437),s=n(2265),i=n(11444),o=n(60335),a=n(95635),l=n(99128),c=n(91326),d=n(80511),u=n(60091),h=n(34990),j=n(32591),f=n(86492),x=n(79889),g=n(71254),p=n(22294),m=n(95253),v=n(65693),b=n(79710),Z=n(70749),k=n(78975),w=n(49),y=n(28549),S=n(23983),C=n(14595),T=n(68038),N=n(60035),R=n(67622),P=n(58237),E=n(4369),z=n(48024),I=n(10209),U=n(24204),W=n(74042);let L=e=>e.role,M=(0,W.P1)(L,e=>e.loading),O=(0,W.P1)(L,e=>e.powerTree);(0,W.P1)(L,e=>e.roleRequest);let q=(0,W.P1)(L,e=>e.roles),_=(0,W.P1)(L,e=>e.roleData);var D=n(90338);let A=(0,z.ZP)(k.Z)(e=>{let{theme:t}=e;return{"& .MuiSwitch-switchBase.Mui-checked":{color:E.Z[600],"&:hover":{backgroundColor:(0,I.Fq)(E.Z[600],t.palette.action.hoverOpacity)}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:E.Z[600]}}});function F(e){let{id:t,modal:n,handleChangeClose:o,lng:h}=e,j=(0,i.I0)(),x=(0,i.v9)(M),g=(0,i.v9)(_),[p,m]=(0,s.useState)(""),[v,b]=(0,s.useState)(""),Z=(0,i.v9)(O),{t:k}=(0,f.$)(h,"setting/role"),[E,z]=(0,s.useState)({id:-1,title:"",sort:null,description:"",is_enable:!0,rolePowerList:[]}),[I,W]=(0,s.useState)({title:k("required",{name:k("title")})}),L={title:{required:!0,requiredMessage:k("titleRequired")}},q=(e,t)=>{let n=L[e];if(n.required&&(!t||Array.isArray(t)&&0===t.length))return n.requiredMessage;if(n.regex){if(Array.isArray(t)){for(let e of t)if(!n.regex.test(e))return n.regexMessage}else if(!n.regex.test(t))return n.regexMessage}return""},F=async()=>{j(D.Nw.createOrUpdateRole(E))};(0,s.useEffect)(()=>{("view"==n||"delete"==n)&&j(D.Nw.fetchRoleById(t))},[n,j,t]),(0,s.useEffect)(()=>{("view"==n||"delete"==n)&&0!==Object.keys(g).length&&(z(g),g.rolePowerList&&$(g.rolePowerList),W({title:""}))},[n,g]);let[B,$]=(0,s.useState)([]);return((0,s.useEffect)(()=>{z({...E,rolePowerList:B})},[B]),(0,s.useEffect)(()=>{j(D.Nw.fetchPowerTree())},[j]),"delete"==n)?(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(d.Z,{variant:"body1",gutterBottom:!0,children:k("confirmDeletion",{title:E.title})}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(y.Z,{variant:"outlined",sx:{m:1},children:(0,r.jsx)(S.Z,{required:!0,label:k("typeToConfirmDelete",{title:E.title}),variant:"outlined",value:p,error:""!==v,helperText:v||k("enterNameToDelete"),onChange:e=>{let t=e.target.value;m(t),b(t!==E.title?k("nameMismatch"):"")}})})}),(0,r.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[" ",(0,r.jsx)(u.Z,{variant:"contained",color:"error",onClick:async()=>{j(D.Nw.deleteRole(t)),o()},startIcon:(0,r.jsx)(R.Z,{}),sx:{mr:1},disabled:p!==g.title,children:k("delete")}),(0,r.jsx)(u.Z,{variant:"contained",onClick:o,startIcon:(0,r.jsx)(P.Z,{}),children:k("cancel")})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{in:x,children:(0,r.jsx)(l.Z,{})}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:k(n)}),(0,r.jsx)(C.Z,{}),(0,r.jsxs)(w.Z,{sx:{pt:2},children:[(0,r.jsx)(y.Z,{variant:"outlined",sx:{m:1},children:(0,r.jsx)(S.Z,{required:!0,label:k("title"),variant:"outlined",error:""!==I.title,helperText:I.title,value:E.title,onChange:e=>{z(t=>({...t,title:e.target.value}));let t=q("title",e.target.value);W(e=>({...e,title:t}))}})}),(0,r.jsx)(y.Z,{variant:"outlined",sx:{m:1},children:(0,r.jsx)(S.Z,{required:!0,label:k("description"),variant:"outlined",value:E.description,onChange:e=>{z(t=>({...t,description:e.target.value}))}})}),(0,r.jsx)(y.Z,{variant:"outlined",sx:{m:1,alignItems:"flex-start"},children:(0,r.jsx)(T.Z,{value:E.is_enable,control:(0,r.jsx)(A,{color:"primary",checked:E.is_enable,style:{color:E.is_enable?"red":""}}),label:k("isEnable"),labelPlacement:"start",onChange:(e,t)=>{z(e=>({...e,is_enable:t}))}})}),(0,r.jsx)(y.Z,{variant:"outlined",sx:{m:1,alignItems:"flex-start"},children:Z&&(0,r.jsx)(U.C,{data:Z,selected:B,setSelected:$})})]}),(0,r.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:1,mb:1},children:(0,r.jsx)(N.Z,{children:(0,r.jsx)(u.Z,{variant:"contained",color:"success",disabled:Object.values(I).some(e=>""!==e),onClick:async()=>{F(),o()},children:k("save")})})})]})]})}function B(e){let{params:{lng:t}}=e,{t:n}=(0,f.$)(t,"setting/role"),k=(0,i.I0)(),w=(0,x.A)(),[y,S]=(0,s.useState)(!1),C=()=>S(!0),T=()=>S(!1),[N,R]=(0,s.useState)(!0),[P,E]=(0,s.useState)("create"),z=(0,i.v9)(M),I=(0,i.v9)(q),U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4};U.width=N?800:400;let W=[{field:"title",headerName:"".concat(n("title")),flex:1},{field:"description",headerName:"".concat(n("description")),flex:1},{field:"is_enable",headerName:"".concat(n("isEnable")),type:"boolean",flex:1},{field:"actions",headerName:"",flex:1,align:"center",sortable:!1,disableColumnMenu:!0,renderCell:e=>(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{onClick:()=>{O(Number(e.id)),C(),E("edit")},size:"small",style:{margin:"5px"},children:(0,r.jsx)(v.Z,{fontSize:"inherit"})}),(0,r.jsx)(o.Z,{onClick:()=>{O(Number(e.id)),C(),E("delete")},size:"small",style:{margin:"5px"},children:(0,r.jsx)(b.Z,{fontSize:"inherit"})})]})}];(0,s.useEffect)(()=>{k(D.Nw.fetchRole())},[k]);let[L,O]=(0,s.useState)(-1),_=async e=>{let t=[...I],n=t.findIndex(t=>t.id===e.row.id),r=e.targetIndex;if(n>-1&&r>-1){let e={...t[n]};t[n]={...t[r]},t[r]=e}k(D.Nw.changeRowRole({firstId:t[n].id,secondId:t[r].id}))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{in:z,children:(0,r.jsx)(l.Z,{})}),(0,r.jsxs)(c.Z,{children:[(0,r.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(d.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:n("roleManage")}),(0,r.jsxs)(c.Z,{children:[" ",(0,r.jsx)(u.Z,{component:"label",variant:"contained",color:"info",onClick:()=>{C(),E("create")},startIcon:(0,r.jsx)(m.Z,{}),sx:{mt:1,mb:1},children:n("create")})]})]}),(0,r.jsx)(h.Z,{elevation:3,sx:{p:2,borderRadius:"15px",width:"99%"},children:I&&I.length>0?(0,r.jsx)(g.s,{apiRef:w,rows:I,columns:W,slots:{toolbar:p.n},rowReordering:!0,onRowOrderChange:_,disableRowSelectionOnClick:!0,autoHeight:!0}):(0,r.jsx)(d.Z,{variant:"body1"})})]}),(0,r.jsx)(j.Z,{open:y,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(c.Z,{sx:U,children:["delete"!=P?(0,r.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",style:{color:"white"},children:(0,r.jsx)(o.Z,{"aria-label":"resize",style:{float:"right",backgroundColor:"transparent"},onClick:()=>{R(!N)},children:(0,r.jsx)(Z.Z,{})})}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(F,{id:L,modal:P,handleChangeClose:T,lng:t,t:n})]})})]})}},90338:function(e,t,n){"use strict";n.d(t,{I6:function(){return s},Nw:function(){return r}});let{actions:r,reducer:s}=(0,n(31116).oM)({name:"role",initialState:{loading:!1,queryOptions:{},roleRequest:{},roles:{},roleData:{},powerTree:{name:"ALL",id:"menu:0"}},reducers:{setQueryOptions(e,t){e.queryOptions=t.payload},setLoading(e,t){e.loading=t.payload},fetchRole(e,t){},setRoles(e,t){e.roles=t.payload},fetchPowerTree(e,t){},setPowerTree(e,t){e.powerTree=t.payload},createOrUpdateRole(e,t){},changeRowRole(e,t){},deleteRole(e,t){},fetchRoleById(e,t){},setSelectedRoleData(e,t){e.roleData=t.payload}}})},24204:function(e,t,n){"use strict";n.d(t,{C:function(){return u}});var r=n(57437),s=n(2265),i=n(10358),o=n(11118),a=n(28125),l=n(28866),c=n(68038),d=n(11929);function u(e){let{data:t,selected:n,setSelected:u}=e,h=(0,s.useMemo)(()=>new Set(n),[n]),j=e=>{let t=[e.id];return e.children&&e.children.forEach(e=>{t=t.concat(j(e))}),t},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.children&&(t[e.id]=e.children.map(e=>e.id),e.children.forEach(e=>f(e,t))),t},x=(0,s.useMemo)(()=>f(t),[t]),g=(e,n)=>{let r=j(t).filter(t=>{var n;return t===e||(null===(n=x[t])||void 0===n?void 0:n.includes(e))}),s=new Set(h);n?r.forEach(e=>s.add(e)):r.forEach(e=>s.delete(e)),u(Array.from(s))},p=e=>{var t,n,s;let o=null===(t=e.children)||void 0===t?void 0:t.every(e=>h.has(e.id)),a=null===(n=e.children)||void 0===n?void 0:n.some(e=>h.has(e.id)),l=h.has(e.id);return(0,r.jsx)(i.k,{nodeId:e.id,label:(0,r.jsx)(c.Z,{control:(0,r.jsx)(d.Z,{checked:l,indeterminate:a&&!o,onChange:t=>g(e.id,t.target.checked),onClick:e=>e.stopPropagation()}),label:e.name}),children:null===(s=e.children)||void 0===s?void 0:s.map(e=>p(e))},e.id)};return(0,r.jsx)(o.L,{defaultCollapseIcon:(0,r.jsx)(a.Z,{}),defaultExpandIcon:(0,r.jsx)(l.Z,{}),children:p(t)})}},86492:function(e,t,n){"use strict";n.d(t,{$:function(){return d}});var r=n(2265),s=n(46027),i=n(90089),o=n(9115),a=n(64312),l=n(88977),c=n(77350);s.ZP.use(i.Db).use(l.Z).use((0,a.Z)((e,t)=>n(48730)("./".concat(e,"/").concat(t,".json")))).init({...(0,c.FW)(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]});let d=(e,t,n)=>{let s=(0,o.useCookies)(),a=(0,i.$G)(t,n),{i18n:l}=a,[d,u]=(0,r.useState)(l.resolvedLanguage),h=d!==l.resolvedLanguage,j=e&&l.resolvedLanguage!==e,f=s.get(c.YN)!==e;return(0,r.useEffect)(()=>{h&&u(l.resolvedLanguage)},[l.resolvedLanguage,h]),(0,r.useEffect)(()=>{j&&l.changeLanguage(e)},[e,l.resolvedLanguage,j,l]),(0,r.useEffect)(()=>{f&&s.set(c.YN,e,{path:"/"})},[s,e,f]),a}},77350:function(e,t,n){"use strict";n.d(t,{FW:function(){return a},Mj:function(){return s},YN:function(){return o}});let r="en-US",s=[r,"zh-TW","jp"],i="translation",o="i18next";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return{supportedLngs:s,fallbackLng:r,lng:e,fallbackNS:i,defaultNS:i,ns:t}}}},function(e){e.O(0,[5249,2037,4902,8433,2320,5150,3119,3207,7879,7841,7351,2659,1481,2971,7023,1744],function(){return e(e.s=46109)}),_N_E=e.O()}]);